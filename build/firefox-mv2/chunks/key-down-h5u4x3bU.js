import{c as D,y as Y,z as ge,C as U}from"./SaveButton-DmOKJM4n.js";import{a as F,j as t,r as k,R as j,g as he,h as me,f as B}from"./FontSizeProvider-D3enan1E.js";import{r as fe,n as pe,m as Z,I as W,o as q,A as xe,p as ye,q as ve,s as be}from"./Sidebar-BePlkV0h.js";import{u as je}from"./use-form-CoJzCIEa.js";import{T as we,M as ke}from"./pdfjs-Dk_2IB0p.js";import{g as Ne,a as $e,b as Me,i as Se,c as Ce,d as He,e as ze,f as G}from"./elevenlabs-DyuDyElx.js";import{P as K,t as Ee}from"./color-Vokuk9CD.js";import{d as J,R as Oe}from"./rotate-ccw-CbPYOZAi.js";import{T as O}from"./browser-polyfill-0iagK1yo.js";/**
* @license lucide-react v0.350.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ae=D("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
* @license lucide-react v0.350.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const De=D("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
* @license lucide-react v0.350.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Re=D("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
* @license lucide-react v0.350.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Pe=D("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
* @license lucide-react v0.350.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Q=D("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
* @license lucide-react v0.350.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Te=D("StopCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]]);/**
* @license lucide-react v0.350.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Be=D("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),Fe=()=>{const{t:e}=F("common");return t.jsxs("div",{className:"animated-gradient-border mt-4 flex w-56 items-center gap-4 !rounded-lg bg-neutral-100 p-1 text-slate-900 dark:bg-neutral-800 dark:text-slate-50",children:[t.jsx("div",{className:"rounded p-1",children:t.jsx(Ae,{className:"w-6 h-6"})}),t.jsx("div",{className:"text-sm font-semibold",children:e("webSearch")})]})},X=(e,r,a)=>{k.useEffect(()=>{const s=e.current;if(s){s.style.height="0px";const i=s.scrollHeight;a?(s.style.maxHeight=`${a}px`,s.style.overflowY=i>a?"scroll":"hidden",s.style.height=`${Math.min(i,a)}px`):s.style.height=`${i}px`}},[e,r,a])},ee=e=>{const[r,a]=j.useState(!1),s=j.useRef(null),{t:i}=F("common"),l=je({initialValues:{message:e.value}});return X(s,l.values.message,300),j.useEffect(()=>{l.setFieldValue("message",e.value)},[e.value]),t.jsxs("form",{onSubmit:l.onSubmit(d=>{r||(e.onClose(),e.onSumbit(d.message,!0))}),className:"flex flex-col gap-2",children:[t.jsx("textarea",{...l.getInputProps("message"),onCompositionStart:()=>{},onCompositionEnd:()=>{},required:!0,rows:1,style:{minHeight:"60px"},tabIndex:0,placeholder:i("editMessage.placeholder"),ref:s,className:"w-full  bg-transparent focus-within:outline-none focus:ring-0 focus-visible:ring-0 ring-0 dark:ring-0 border-0 dark:text-gray-100"}),t.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:t.jsxs("div",{className:`w-full flex ${e.isBot?"justify-end":"justify-between"}`,children:[!e.isBot&&t.jsx("button",{type:"button",onClick:()=>{e.onSumbit(l.values.message,!1),e.onClose()},"aria-label":i("save"),className:"border border-gray-600 px-2 py-1.5 rounded-lg text-gray-700 dark:text-gray-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-gray-500 hover:bg-gray-100 dark:hover:bg-gray-900 text-sm",children:i("save")}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{"aria-label":i("save"),className:"bg-black px-2 py-1.5 rounded-lg text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-gray-500 hover:bg-gray-900 text-sm",children:e.isBot?i("save"):i("saveAndSubmit")}),t.jsx("button",{onClick:e.onClose,"aria-label":i("cancel"),className:"border dark:border-gray-600 px-2 py-1.5 rounded-lg text-gray-700 dark:text-gray-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-gray-500 hover:bg-gray-100 dark:hover:bg-gray-900 text-sm",children:i("cancel")})]})]})})," "]})},Ie=j.forwardRef((e,r)=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 303.188 303.188",xmlSpace:"preserve",ref:r,...e,children:[t.jsx("path",{fill:"#E4E4E4",d:"M219.821 0L32.842 0 32.842 303.188 270.346 303.188 270.346 50.525z"}),t.jsx("path",{fill:"#007934",d:"M227.64 25.263L32.842 25.263 32.842 0 219.821 0z"}),t.jsx("g",{fill:"#A4A9AD",children:t.jsx("path",{d:"M114.872 227.984c-2.982 0-5.311 1.223-6.982 3.666-1.671 2.444-2.507 5.814-2.507 10.109 0 8.929 3.396 13.393 10.188 13.393 2.052 0 4.041-.285 5.967-.856a59.8 59.8 0 005.808-2.063v10.601c-3.872 1.713-8.252 2.57-13.14 2.57-7.004 0-12.373-2.031-16.107-6.094-3.734-4.062-5.602-9.934-5.602-17.615 0-4.803.904-9.023 2.714-12.663 1.809-3.64 4.411-6.438 7.808-8.395 3.396-1.957 7.39-2.937 11.98-2.937 5.016 0 9.808 1.09 14.378 3.27l-3.841 9.871a42.982 42.982 0 00-5.141-2.031c-1.714-.55-3.554-.826-5.523-.826zM166.732 250.678c0 2.878-.729 5.433-2.191 7.665-1.459 2.232-3.565 3.967-6.315 5.205-2.751 1.237-5.977 1.856-9.681 1.856-3.089 0-5.681-.217-7.775-.65-2.095-.434-4.274-1.191-6.538-2.27v-11.172a37.254 37.254 0 007.458 2.872c2.582.689 4.951 1.032 7.109 1.032 1.862 0 3.227-.322 4.095-.969.867-.645 1.302-1.476 1.302-2.491 0-.635-.175-1.19-.524-1.666-.349-.477-.91-.958-1.682-1.444-.772-.486-2.83-1.48-6.173-2.983-3.026-1.375-5.296-2.708-6.809-3.999s-2.634-2.771-3.364-4.443-1.095-3.65-1.095-5.936c0-4.273 1.555-7.605 4.666-9.997 3.109-2.391 7.384-3.587 12.822-3.587 4.803 0 9.7 1.111 14.694 3.333l-3.841 9.681c-4.337-1.989-8.082-2.984-11.234-2.984-1.63 0-2.814.286-3.555.857s-1.111 1.28-1.111 2.127c0 .91.471 1.725 1.412 2.443.941.72 3.496 2.031 7.665 3.936 3.999 1.799 6.776 3.729 8.331 5.792 1.557 2.063 2.334 4.661 2.334 7.792zM199.964 218.368h14.027l-15.202 46.401H184.03l-15.139-46.401h14.092l6.316 23.519c1.312 5.227 2.031 8.865 2.158 10.918.148-1.481.443-3.333.889-5.555.443-2.222.835-3.967 1.174-5.236l6.444-23.646z"})}),t.jsx("path",{fill:"#D1D3D3",d:"M219.821 50.525L270.346 50.525 219.821 0z"}),t.jsx("path",{fill:"#007934",d:"M134.957 80.344H168.231V95.762H134.957z"}),t.jsx("path",{fill:"#007934",d:"M175.602 80.344H208.875V95.762H175.602z"}),t.jsx("path",{fill:"#007934",d:"M134.957 102.661H168.231V118.08H134.957z"}),t.jsx("path",{fill:"#007934",d:"M175.602 102.661H208.875V118.08H175.602z"}),t.jsx("path",{fill:"#007934",d:"M134.957 124.979H168.231V140.397H134.957z"}),t.jsx("path",{fill:"#007934",d:"M175.602 124.979H208.875V140.397H175.602z"}),t.jsx("path",{fill:"#007934",d:"M94.312 124.979H127.58500000000001V140.397H94.312z"}),t.jsx("path",{fill:"#007934",d:"M134.957 147.298H168.231V162.716H134.957z"}),t.jsx("path",{fill:"#007934",d:"M175.602 147.298H208.875V162.716H175.602z"}),t.jsx("path",{fill:"#007934",d:"M94.312 147.298H127.58500000000001V162.716H94.312z"}),t.jsx("path",{fill:"#007934",d:"M127.088 116.162h-10.04l-6.262-10.041-6.196 10.041h-9.821l10.656-16.435L95.406 84.04h9.624l5.8 9.932 5.581-9.932h9.909l-10.173 16.369 10.941 15.753z"})]})),Le=j.forwardRef((e,r)=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 303.188 303.188",xmlSpace:"preserve",ref:r,...e,children:[t.jsx("path",{fill:"#E8E8E8",d:"M219.821 0L32.842 0 32.842 303.188 270.346 303.188 270.346 50.525z"}),t.jsx("path",{fill:"#FB3449",d:"M230.013 149.935c-3.643-6.493-16.231-8.533-22.006-9.451-4.552-.724-9.199-.94-13.803-.936-3.615-.024-7.177.154-10.693.354-1.296.087-2.579.199-3.861.31a93.594 93.594 0 01-3.813-4.202c-7.82-9.257-14.134-19.755-19.279-30.664 1.366-5.271 2.459-10.772 3.119-16.485 1.205-10.427 1.619-22.31-2.288-32.251-1.349-3.431-4.946-7.608-9.096-5.528-4.771 2.392-6.113 9.169-6.502 13.973-.313 3.883-.094 7.776.558 11.594.664 3.844 1.733 7.494 2.897 11.139a165.324 165.324 0 003.588 9.943 171.593 171.593 0 01-2.63 7.603c-2.152 5.643-4.479 11.004-6.717 16.161l-3.465 7.507c-3.576 7.855-7.458 15.566-11.815 23.02-10.163 3.585-19.283 7.741-26.857 12.625-4.063 2.625-7.652 5.476-10.641 8.603-2.822 2.952-5.69 6.783-5.941 11.024-.141 2.394.807 4.717 2.768 6.137 2.697 2.015 6.271 1.881 9.4 1.225 10.25-2.15 18.121-10.961 24.824-18.387 4.617-5.115 9.872-11.61 15.369-19.465l.037-.054c9.428-2.923 19.689-5.391 30.579-7.205 4.975-.825 10.082-1.5 15.291-1.974 3.663 3.431 7.621 6.555 11.939 9.164 3.363 2.069 6.94 3.816 10.684 5.119 3.786 1.237 7.595 2.247 11.528 2.886 1.986.284 4.017.413 6.092.335 4.631-.175 11.278-1.951 11.714-7.57.134-1.72-.237-3.228-.98-4.55zm-110.869 10.31a170.827 170.827 0 01-6.232 9.041c-4.827 6.568-10.34 14.369-18.322 17.286-1.516.554-3.512 1.126-5.616 1.002-1.874-.11-3.722-.937-3.637-3.065.042-1.114.587-2.535 1.423-3.931.915-1.531 2.048-2.935 3.275-4.226 2.629-2.762 5.953-5.439 9.777-7.918 5.865-3.805 12.867-7.23 20.672-10.286-.449.71-.897 1.416-1.34 2.097zm27.222-84.26a38.169 38.169 0 01-.323-10.503 24.858 24.858 0 011.038-4.952c.428-1.33 1.352-4.576 2.826-4.993 2.43-.688 3.177 4.529 3.452 6.005 1.566 8.396.186 17.733-1.693 25.969-.299 1.31-.632 2.599-.973 3.883a121.219 121.219 0 01-1.648-4.821c-1.1-3.525-2.106-7.091-2.679-10.588zm16.683 66.28a236.508 236.508 0 00-25.979 5.708c.983-.275 5.475-8.788 6.477-10.555 4.721-8.315 8.583-17.042 11.358-26.197 4.9 9.691 10.847 18.962 18.153 27.214.673.749 1.357 1.489 2.053 2.22-4.094.441-8.123.978-12.062 1.61zm61.744 11.694c-.334 1.805-4.189 2.837-5.988 3.121-5.316.836-10.94.167-16.028-1.542-3.491-1.172-6.858-2.768-10.057-4.688-3.18-1.921-6.155-4.181-8.936-6.673 3.429-.206 6.9-.341 10.388-.275 3.488.035 7.003.211 10.475.664 6.511.726 13.807 2.961 18.932 7.186 1.009.833 1.331 1.569 1.214 2.207z"}),t.jsx("path",{fill:"#FB3449",d:"M227.64 25.263L32.842 25.263 32.842 0 219.821 0z"}),t.jsx("g",{fill:"#A4A9AD",children:t.jsx("path",{d:"M126.841 241.152c0 5.361-1.58 9.501-4.742 12.421-3.162 2.921-7.652 4.381-13.472 4.381h-3.643v15.917H92.022v-47.979h16.606c6.06 0 10.611 1.324 13.652 3.971 3.041 2.647 4.561 6.41 4.561 11.289zm-21.856 6.235h2.363c1.947 0 3.495-.546 4.644-1.641 1.149-1.094 1.723-2.604 1.723-4.529 0-3.238-1.794-4.857-5.382-4.857h-3.348v11.027zM175.215 248.864c0 8.007-2.205 14.177-6.613 18.509s-10.606 6.498-18.591 6.498h-15.523v-47.979h16.606c7.701 0 13.646 1.969 17.836 5.907 4.189 3.938 6.285 9.627 6.285 17.065zm-13.455.46c0-4.398-.87-7.657-2.609-9.78-1.739-2.122-4.381-3.183-7.926-3.183h-3.773v26.877h2.888c3.939 0 6.826-1.143 8.664-3.43 1.837-2.285 2.756-5.78 2.756-10.484zM196.579 273.871h-12.766v-47.979h28.355v10.403h-15.589v9.156h14.374v10.403h-14.374v18.017z"})}),t.jsx("path",{fill:"#D1D3D3",d:"M219.821 50.525L270.346 50.525 219.821 0z"})]})),Ve=j.forwardRef((e,r)=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-4 0 64 64",ref:r,...e,children:[t.jsx("path",{fill:"#F9CA06",fillRule:"evenodd",d:"M5.151-.036A5.074 5.074 0 00.077 5.038v53.841a5.073 5.073 0 005.074 5.074h45.774a5.074 5.074 0 005.074-5.074V20.274L37.097-.036H5.151z",clipRule:"evenodd"}),t.jsxs("g",{fillRule:"evenodd",clipRule:"evenodd",children:[t.jsx("path",{fill:"#F7BC04",d:"M56.008 20.316v1H43.209s-6.312-1.26-6.129-6.708c0 0 .208 5.708 6.004 5.708h12.924z"}),t.jsx("path",{fill:"#fff",d:"M37.106-.036v14.561c0 1.656 1.104 5.792 6.104 5.792h12.799L37.106-.036z",opacity:"0.5"})]}),t.jsx("path",{fill:"#fff",d:"M18.763 43.045h-3.277v10.047a.734.734 0 01-.756.738.73.73 0 01-.738-.738V43.045h-3.259c-.36 0-.648-.288-.648-.684 0-.36.288-.648.648-.648h8.03c.36 0 .648.288.648.685a.645.645 0 01-.648.647zm11.7 10.803a.64.64 0 01-.541-.27l-3.727-4.97-3.745 4.97a.639.639 0 01-.54.27.71.71 0 01-.72-.72c0-.144.036-.306.144-.432l3.889-5.131-3.619-4.826a.721.721 0 01-.144-.414c0-.343.288-.721.72-.721.216 0 .432.108.576.288l3.439 4.627 3.439-4.646a.642.642 0 01.541-.27c.378 0 .738.306.738.721a.7.7 0 01-.126.414l-3.619 4.808 3.89 5.149c.09.126.126.27.126.415a.739.739 0 01-.721.738zm11.195-10.803h-3.277v10.047a.734.734 0 01-.756.738.73.73 0 01-.738-.738V43.045h-3.259c-.36 0-.648-.288-.648-.684 0-.36.288-.648.648-.648h8.03c.36 0 .648.288.648.685a.644.644 0 01-.648.647z"})]})),te=({type:e,className:r="w-6 h-6"})=>{if(e==="pdf"||e==="application/pdf")return t.jsx(Le,{className:r});if(e==="csv"||e==="text/csv")return t.jsx(Ie,{className:r});if(e==="txt"||e==="text/plain")return t.jsx(Ve,{className:r})},Ze=({source:e,onSourceClick:r})=>(e==null?void 0:e.mode)==="rag"||(e==null?void 0:e.mode)==="chat"?t.jsxs("button",{onClick:()=>{r&&r(e)},className:"inline-flex gap-2   cursor-pointer transition-shadow duration-300 ease-in-out hover:shadow-lg  items-center rounded-md bg-gray-100 p-1 text-xs text-gray-800 border border-gray-300 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-100 opacity-80 hover:opacity-100",children:[t.jsx(te,{type:e.type,className:"h-3 w-3"}),t.jsx("span",{className:"text-xs",children:e.name})]}):t.jsx("a",{href:e==null?void 0:e.url,target:"_blank",className:"inline-flex cursor-pointer transition-shadow duration-300 ease-in-out hover:shadow-lg  items-center rounded-md bg-gray-100 p-1 text-xs text-gray-800 border border-gray-300 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-100 opacity-80 hover:opacity-100",children:t.jsx("span",{className:"text-xs",children:e.name})});function _e(e){let r=e.replace(/\\n/g,"<break/>");return r=r.replace(/^(#{1,6}) (.*?)(?=\r?\n\s*?(?:\r?\n|$))/gm,(a,s,i)=>`<prosody rate="${(s.length-1)*10+100}%">${i}</prosody>`),r=r.replace(/\\\*\\\*(.\*?)\\\*\\\*/g,"<emphasis>$1</emphasis>"),r=r.replace(/\\\*(.\*?)\\\*/g,'<amazon:effect name="whispered">$1</amazon:effect>'),r=`<speak>${r}</speak>`,`<?xml version="1.0"?>${r}`}const re=/```[\s\S]*?```/g,Ye=e=>{const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g;return e.replace(r,"")},Ue=e=>e.replace(/(```[\s\S]*?```)/g,"").replace(/^\|.*\|$/gm,"").replace(/(?:\*\*|__)(.*?)(?:\*\*|__)/g,"$1").replace(/(?:[*_])(.*?)(?:[*_])/g,"$1").replace(/~~(.*?)~~/g,"$1").replace(/`([^`]+)`/g,"$1").replace(/!?\[([^\]]*)\](?:\([^)]+\)|\[[^\]]*\])/g,"$1").replace(/^\[[^\]]+\]:\s*.*$/gm,"").replace(/^#{1,6}\s+/gm,"").replace(/^\s*[-*+]\s+/gm,"").replace(/^\s*(?:\d+\.)\s+/gm,"").replace(/^\s*>[> ]*/gm,"").replace(/^\s*:\s+/gm,"").replace(/\[\^[^\]]*\]/g,"").replace(/[-*_~]/g,"").replace(/\n{2,}/g,`
`),_=e=>Ue(Ye(e.trim())),We=e=>{const r=[];let a=0;return e.replace(re,s=>{const i=`\0${a}\0`;return r[a++]=s,i}).split(new RegExp("(?<=[.!?])\\s+")).map(s=>s.replace(/\u0000(\d+)\u0000/g,(i,l)=>r[l])).map(_).filter(Boolean)},qe=e=>{const r=[];let a=0;return e.replace(re,s=>{const i=`\0${a}\0`;return r[a++]=s,i}).split(/\n+/).map(s=>s.replace(/\u0000(\d+)\u0000/g,(i,l)=>r[l])).map(_).filter(Boolean)},Ge=e=>We(e).reduce((r,a)=>{const s=r.length-1;if(s>=0){const i=r[s],l=i.split(/\s+/).length,d=i.length;l<4||d<50?r[s]=`${i} ${a}`:r.push(a)}else r.push(a);return r},[]),Ke=(e,r="punctuation")=>{const a=[];switch(r){case"punctuation":a.push(...Ge(e));break;case"paragraph":a.push(...qe(e));break;case"none":a.push(_(e));break}return a},se=()=>{const[e,r]=k.useState(!1),[a,s]=k.useState(null),i=async({utterance:d})=>{try{const c=await Ne(),u=await $e();if(await Me()&&(d=fe(d)),u==="browser"){await Se()&&(d=_e(d));{const p=new SpeechSynthesisUtterance(d);p.onstart=()=>{r(!0)},p.onend=()=>{r(!1)};const f=window.speechSynthesis.getVoices().find(w=>w.name===c);f?p.voice=f:window.speechSynthesis.onvoiceschanged=()=>{const w=window.speechSynthesis.getVoices().find(b=>b.name===c);w&&(p.voice=w)},window.speechSynthesis.speak(p)}}else if(u==="elevenlabs"){const p=await Ce(),f=await He(),w=await ze(),b=Ke(d);let M=null;if(!p||!f||!w)throw new Error("Missing ElevenLabs configuration");for(let x=0;x<b.length;x++){r(!0);let m=M||await G(p,b[x],w,f);x<b.length-1&&G(p,b[x+1],w,f).then(C=>{C=C}).catch(console.error);const S=new Blob([m],{type:"audio/mpeg"}),z=URL.createObjectURL(S),A=new Audio(z);s(A),await new Promise(C=>{A.onended=C,A.play()}),URL.revokeObjectURL(z)}r(!1),s(null)}}catch{r(!1),s(null),pe.error({message:"Error",description:"Something went wrong while trying to play the audio"})}},l=()=>{if(a){a.pause(),a.currentTime=0,s(null),r(!1);return}window.speechSynthesis.cancel(),r(!1)};return k.useEffect(()=>()=>{l()},[]),{speak:i,cancel:l,isSpeaking:e}},Je=({generationInfo:e})=>{if(!e)return null;const r=(i,l)=>!i||!l?0:i/l*1e9,a=i=>{if(!i)return"0ms";const l=i/1e6;return l<1?`${l.toFixed(3)}ms`:l<1e3?`${Math.round(l)}ms`:`${(l/1e3).toFixed(2)}s`},s={...e,...e!=null&&e.eval_count&&(e!=null&&e.eval_duration)?{tokens_per_second:r(e.eval_count,e.eval_duration).toFixed(2)}:{}};return t.jsx("div",{className:"p-2 w-full",children:t.jsx("div",{className:"flex flex-col gap-2",children:Object.entries(s).filter(([i])=>i!=="model").map(([i,l])=>t.jsxs("div",{className:"flex flex-wrap justify-between",children:[t.jsx("div",{className:"font-medium text-xs",children:i}),t.jsx("div",{className:"font-medium text-xs break-all",children:i.includes("duration")?a(l):String(l)})]},i))})})};var ae={exports:{}};(function(e,r){(function(a,s){e.exports=s()})(he,function(){var a,s,i=1e3,l=6e4,d=36e5,c=864e5,u=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p=31536e6,f=2628e6,w=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,b={years:p,months:f,days:c,hours:d,minutes:l,seconds:i,milliseconds:1,weeks:6048e5},M=function(h){return h instanceof R},x=function(h,o,n){return new R(h,n,o.$l)},m=function(h){return s.p(h)+"s"},S=function(h){return h<0},z=function(h){return S(h)?Math.ceil(h):Math.floor(h)},A=function(h){return Math.abs(h)},C=function(h,o){return h?S(h)?{negative:!0,format:""+A(h)+o}:{negative:!1,format:""+h+o}:{negative:!1,format:""}},R=function(){function h(n,g,v){var y=this;if(this.$d={},this.$l=v,n===void 0&&(this.$ms=0,this.parseFromMilliseconds()),g)return x(n*b[m(g)],this);if(typeof n=="number")return this.$ms=n,this.parseFromMilliseconds(),this;if(typeof n=="object")return Object.keys(n).forEach(function(H){y.$d[m(H)]=n[H]}),this.calMilliseconds(),this;if(typeof n=="string"){var N=n.match(w);if(N){var $=N.slice(2).map(function(H){return H!=null?Number(H):0});return this.$d.years=$[0],this.$d.months=$[1],this.$d.weeks=$[2],this.$d.days=$[3],this.$d.hours=$[4],this.$d.minutes=$[5],this.$d.seconds=$[6],this.calMilliseconds(),this}}return this}var o=h.prototype;return o.calMilliseconds=function(){var n=this;this.$ms=Object.keys(this.$d).reduce(function(g,v){return g+(n.$d[v]||0)*b[v]},0)},o.parseFromMilliseconds=function(){var n=this.$ms;this.$d.years=z(n/p),n%=p,this.$d.months=z(n/f),n%=f,this.$d.days=z(n/c),n%=c,this.$d.hours=z(n/d),n%=d,this.$d.minutes=z(n/l),n%=l,this.$d.seconds=z(n/i),n%=i,this.$d.milliseconds=n},o.toISOString=function(){var n=C(this.$d.years,"Y"),g=C(this.$d.months,"M"),v=+this.$d.days||0;this.$d.weeks&&(v+=7*this.$d.weeks);var y=C(v,"D"),N=C(this.$d.hours,"H"),$=C(this.$d.minutes,"M"),H=this.$d.seconds||0;this.$d.milliseconds&&(H+=this.$d.milliseconds/1e3,H=Math.round(1e3*H)/1e3);var P=C(H,"S"),T=n.negative||g.negative||y.negative||N.negative||$.negative||P.negative,de=N.format||$.format||P.format?"T":"",V=(T?"-":"")+"P"+n.format+g.format+y.format+de+N.format+$.format+P.format;return V==="P"||V==="-P"?"P0D":V},o.toJSON=function(){return this.toISOString()},o.format=function(n){var g=n||"YYYY-MM-DDTHH:mm:ss",v={Y:this.$d.years,YY:s.s(this.$d.years,2,"0"),YYYY:s.s(this.$d.years,4,"0"),M:this.$d.months,MM:s.s(this.$d.months,2,"0"),D:this.$d.days,DD:s.s(this.$d.days,2,"0"),H:this.$d.hours,HH:s.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:s.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:s.s(this.$d.seconds,2,"0"),SSS:s.s(this.$d.milliseconds,3,"0")};return g.replace(u,function(y,N){return N||String(v[y])})},o.as=function(n){return this.$ms/b[m(n)]},o.get=function(n){var g=this.$ms,v=m(n);return v==="milliseconds"?g%=1e3:g=v==="weeks"?z(g/b[v]):this.$d[v],g||0},o.add=function(n,g,v){var y;return y=g?n*b[m(g)]:M(n)?n.$ms:x(n,this).$ms,x(this.$ms+y*(v?-1:1),this)},o.subtract=function(n,g){return this.add(n,g,!0)},o.locale=function(n){var g=this.clone();return g.$l=n,g},o.clone=function(){return x(this.$ms,this)},o.humanize=function(n){return a().add(this.$ms,"ms").locale(this.$l).fromNow(!n)},o.valueOf=function(){return this.asMilliseconds()},o.milliseconds=function(){return this.get("milliseconds")},o.asMilliseconds=function(){return this.as("milliseconds")},o.seconds=function(){return this.get("seconds")},o.asSeconds=function(){return this.as("seconds")},o.minutes=function(){return this.get("minutes")},o.asMinutes=function(){return this.as("minutes")},o.hours=function(){return this.get("hours")},o.asHours=function(){return this.as("hours")},o.days=function(){return this.get("days")},o.asDays=function(){return this.as("days")},o.weeks=function(){return this.get("weeks")},o.asWeeks=function(){return this.as("weeks")},o.months=function(){return this.get("months")},o.asMonths=function(){return this.as("months")},o.years=function(){return this.get("years")},o.asYears=function(){return this.as("years")},h}(),E=function(h,o,n){return h.add(o.years()*n,"y").add(o.months()*n,"M").add(o.days()*n,"d").add(o.hours()*n,"h").add(o.minutes()*n,"m").add(o.seconds()*n,"s").add(o.milliseconds()*n,"ms")};return function(h,o,n){a=n,s=n().$utils(),n.duration=function(y,N){var $=n.locale();return x(y,{$l:$},N)},n.isDuration=M;var g=o.prototype.add,v=o.prototype.subtract;o.prototype.add=function(y,N){return M(y)?E(this,y,1):g.bind(this)(y,N)},o.prototype.subtract=function(y,N){return M(y)?E(this,y,-1):v.bind(this)(y,N)}}})})(ae);var Qe=ae.exports;const Xe=me(Qe);J.extend(Xe);const et=e=>{try{const r=J.duration(e);return e<1e3?`${e}ms`:e<6e4?`${Math.floor(r.asSeconds())}s`:e<36e5?`${Math.floor(r.asMinutes())}m`:e<864e5?`${Math.floor(r.asHours())}h`:`${Math.floor(r.asDays())}d`}catch{return`${e}ms`}},tt=({message:e})=>{const[r]=B("useMarkdownForUserMessage",!1);return r?t.jsx(Z,{message:e}):t.jsx("span",{className:"whitespace-pre-wrap",children:e})},rt=e=>{const[r]=B("checkWideMode",!1),[a,s]=j.useState(!1),[i,l]=j.useState(!1),{t:d}=F("common"),{cancel:c,isSpeaking:u,speak:p}=se();return t.jsxs("div",{className:`group gap-2 relative flex w-full max-w-3xl flex-col items-end justify-center pb-2 md:px-4 lg:w-4/5 text-[#242424] dark:text-gray-100 ${r?"max-w-none":""}`,children:[t.jsx("div",{dir:"auto",className:"message-bubble bg-gray-50 dark:bg-[#242424] rounded-3xl prose dark:prose-invert break-words text-primary min-h-7 prose-p:opacity-95 prose-strong:opacity-100 bg-foreground border border-input-border max-w-[100%] sm:max-w-[90%] px-4 py-2.5 rounded-br-lg dark:border-[#2D2D2D]",children:i?t.jsx("div",{className:"w-screen max-w-[100%]",children:t.jsx(ee,{value:e.message,onSumbit:e.onEditFormSubmit,onClose:()=>l(!1),isBot:e.isBot})}):t.jsx(tt,{message:e.message})}),e.images&&e.images.filter(f=>f.length>0).length>0&&t.jsx("div",{children:e.images.filter(f=>f.length>0).map((f,w)=>t.jsx(W,{src:f,alt:"Uploaded Image",width:180,className:"rounded-lg relative"},w))}),!e.isProcessing&&!i?t.jsxs("div",{className:`space-x-2 gap-2 flex ${e.currentMessageIndex!==e.totalMessages-1?"invisible group-hover:visible":""}`,children:[e.isTTSEnabled&&t.jsx(O,{title:d("tts"),children:t.jsx("button",{"aria-label":d("tts"),onClick:()=>{u?c():p({utterance:e.message})},className:"flex items-center justify-center w-6 h-6 rounded-full bg-gray-100 dark:bg-[#242424] hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:u?t.jsx(Q,{className:"w-3 h-3 text-red-400 group-hover:text-red-500"}):t.jsx(Pe,{className:"w-3 h-3 text-gray-400 group-hover:text-gray-500"})})}),!e.hideCopy&&t.jsx(O,{title:d("copyToClipboard"),children:t.jsx("button",{"aria-label":d("copyToClipboard"),onClick:()=>{navigator.clipboard.writeText(e.message),s(!0),setTimeout(()=>{s(!1)},2e3)},className:"flex items-center justify-center w-6 h-6 rounded-full bg-gray-50 dark:bg-[#242424] hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:a?t.jsx(Y,{className:"w-3 h-3 text-green-400 group-hover:text-green-500"}):t.jsx(q,{className:"w-3 h-3 text-gray-400 group-hover:text-gray-500"})})}),!e.hideEditAndRegenerate&&t.jsx(O,{title:d("edit"),children:t.jsx("button",{onClick:()=>l(!0),"aria-label":d("edit"),className:"flex items-center justify-center w-6 h-6 rounded-full bg-gray-50 dark:bg-[#242424] hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:t.jsx(K,{className:"w-3 h-3 text-gray-400 group-hover:text-gray-500"})})})]}):t.jsx("div",{className:"invisible",children:t.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-gray-50 dark:bg-[#242424] hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"})})]})},st=e=>{var M,x;const[r,a]=j.useState(!1),[s,i]=j.useState(!1),[l]=B("checkWideMode",!1),[d]=B("userChatBubble",!0),[c]=B("autoCopyResponseToClipboard",!1),{t:u}=F("common"),{cancel:p,isSpeaking:f,speak:w}=se(),b=e.currentMessageIndex===e.totalMessages-1;return k.useEffect(()=>{c&&e.isBot&&b&&!e.isStreaming&&!e.isProcessing&&e.message.trim().length>0&&(navigator.clipboard.writeText(e.message),a(!0),setTimeout(()=>{a(!1)},2e3))},[c,e.isBot,e.currentMessageIndex,e.totalMessages,e.isStreaming,e.isProcessing,e.message]),d&&!e.isBot?t.jsx(rt,{...e}):t.jsx("div",{className:`group relative flex w-full max-w-3xl flex-col items-end justify-center pb-2 md:px-4 lg:w-4/5 text-gray-800 dark:text-gray-100 ${l?"max-w-none":""}`,children:t.jsxs("div",{className:"flex flex-row gap-4 md:gap-6 my-2 m-auto w-full",children:[t.jsx("div",{className:"w-8 flex flex-col relative items-end",children:e.isBot?e.modelImage?t.jsx(xe,{src:e.modelImage,alt:e.name,className:"size-8"}):t.jsx("div",{className:"relative h-7 w-7 p-1 rounded-sm text-white flex items-center justify-center  text-opacity-100",children:t.jsx("div",{className:"absolute h-8 w-8 rounded-full bg-gradient-to-r from-green-300 to-purple-400"})}):e.userAvatar?e.userAvatar:t.jsx("div",{className:"relative h-7 w-7 p-1 rounded-sm text-white flex items-center justify-center  text-opacity-100",children:t.jsx("div",{className:"absolute h-8 w-8 rounded-full from-blue-400 to-blue-600 bg-gradient-to-r"})})}),t.jsxs("div",{className:"flex w-[calc(100%-50px)] flex-col gap-2 lg:w-[calc(100%-115px)]",children:[t.jsx("span",{className:"text-xs font-bold text-gray-800 dark:text-white",children:e.isBot?e.name==="chrome::gemini-nano::page-assist"?"Gemini Nano":ge((M=`${(e==null?void 0:e.modelName)||(e==null?void 0:e.name)}`)==null?void 0:M.replaceAll(/accounts\/[^\/]+\/models\//g,"")):"You"}),e.isBot&&e.isSearchingInternet&&b?t.jsx(Fe,{}):null,t.jsx("div",{children:(e==null?void 0:e.message_type)&&t.jsx(we,{color:Ee[e==null?void 0:e.message_type]||"default",children:u(`copilot.${e==null?void 0:e.message_type}`)})}),t.jsx("div",{className:"flex flex-grow flex-col",children:s?t.jsx(ee,{value:e.message,onSumbit:e.onEditFormSubmit,onClose:()=>i(!1),isBot:e.isBot}):e.isBot?t.jsx(t.Fragment,{children:ye(e.message).map((m,S)=>m.type==="reasoning"?t.jsx(U,{className:"border-none !mb-3",defaultActiveKey:e!=null&&e.openReasoning?"reasoning":void 0,items:[{key:"reasoning",label:e.isStreaming&&(m!=null&&m.reasoning_running)?t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("span",{className:"italic",children:u("reasoning.thinking")})}):u("reasoning.thought",{time:et(e.reasoningTimeTaken)}),children:t.jsx(Z,{message:m.content})}]},S):t.jsx(Z,{message:m.content},S))}):t.jsx("p",{className:`prose dark:prose-invert whitespace-pre-line prose-p:leading-relaxed prose-pre:p-0 dark:prose-dark ${e.message_type&&"italic text-gray-500 dark:text-gray-400 text-sm"}
                  ${l?"max-w-none":""}
                  `,children:e.message})}),e.images&&e.images.filter(m=>m.length>0).length>0&&t.jsx("div",{children:e.images.filter(m=>m.length>0).map((m,S)=>t.jsx(W,{src:m,alt:"Uploaded Image",width:180,className:"rounded-md relative"},S))}),e.isBot&&(e==null?void 0:e.sources)&&(e==null?void 0:e.sources.length)>0&&t.jsx(U,{className:"mt-6",ghost:!0,items:[{key:"1",label:t.jsx("div",{className:"italic text-gray-500 dark:text-gray-400",children:u("citations")}),children:t.jsx("div",{className:"mb-3 flex flex-wrap gap-2",children:(x=e==null?void 0:e.sources)==null?void 0:x.map((m,S)=>t.jsx(Ze,{onSourceClick:e.onSourceClick,source:m},S))})}]}),!e.isProcessing&&!s?t.jsxs("div",{className:`space-x-2 gap-2 flex ${e.currentMessageIndex!==e.totalMessages-1?"invisible group-hover:visible":""}`,children:[e.isTTSEnabled&&t.jsx(O,{title:u("tts"),children:t.jsx("button",{"aria-label":u("tts"),onClick:()=>{f?p():w({utterance:e.message})},className:"flex items-center justify-center w-6 h-6 rounded-full bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:f?t.jsx(Q,{className:"w-3 h-3 text-red-400 group-hover:text-red-500"}):t.jsx(Be,{className:"w-3 h-3 text-gray-400 group-hover:text-gray-500"})})}),!e.hideCopy&&t.jsx(O,{title:u("copyToClipboard"),children:t.jsx("button",{"aria-label":u("copyToClipboard"),onClick:()=>{navigator.clipboard.writeText(e.message),a(!0),setTimeout(()=>{a(!1)},2e3)},className:"flex items-center justify-center w-6 h-6 rounded-full bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:r?t.jsx(Y,{className:"w-3 h-3 text-green-400 group-hover:text-green-500"}):t.jsx(q,{className:"w-3 h-3 text-gray-400 group-hover:text-gray-500"})})}),e.isBot&&t.jsxs(t.Fragment,{children:[e.generationInfo&&t.jsx(ve,{content:t.jsx(Je,{generationInfo:e.generationInfo}),title:u("generationInfo"),children:t.jsx("button",{"aria-label":u("generationInfo"),className:"flex items-center justify-center w-6 h-6 rounded-full bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:t.jsx(be,{className:"w-3 h-3 text-gray-400 group-hover:text-gray-500"})})}),!e.hideEditAndRegenerate&&b&&t.jsx(O,{title:u("regenerate"),children:t.jsx("button",{"aria-label":u("regenerate"),onClick:e.onRengerate,className:"flex items-center justify-center w-6 h-6 rounded-full bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:t.jsx(Oe,{className:"w-3 h-3 text-gray-400 group-hover:text-gray-500"})})}),!e.hideContinue&&b&&t.jsx(O,{title:u("continue"),children:t.jsx("button",{"aria-label":u("continue"),onClick:e==null?void 0:e.onContinue,className:"flex items-center justify-center w-6 h-6 rounded-full bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:t.jsx(Re,{className:"w-3 h-3 text-gray-400 group-hover:text-gray-500"})})})]}),!e.hideEditAndRegenerate&&t.jsx(O,{title:u("edit"),children:t.jsx("button",{onClick:()=>i(!0),"aria-label":u("edit"),className:"flex items-center justify-center w-6 h-6 rounded-full bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:t.jsx(K,{className:"w-3 h-3 text-gray-400 group-hover:text-gray-500"})})})]}):t.jsx("div",{className:"invisible",children:t.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"})})]})]})})},at=({source:e,open:r,setOpen:a})=>{var s,i,l,d,c,u,p;return t.jsx(ke,{open:r,zIndex:1e4,onCancel:()=>a(!1),footer:null,onOk:()=>a(!1),children:t.jsxs("div",{className:"flex flex-col gap-2 mt-6",children:[t.jsxs("h4",{className:"bg-gray-100 text-md dark:bg-gray-800 inline-flex gap-2 items-center text-gray-800 dark:text-gray-100 font-semibold p-2",children:[(e==null?void 0:e.type)&&t.jsx(te,{type:e==null?void 0:e.type,className:"h-4 w-5"}),e==null?void 0:e.name]}),(e==null?void 0:e.type)==="pdf"?t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"text-gray-500 text-sm",children:e==null?void 0:e.pageContent}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsx("span",{className:"border border-gray-300 dark:border-gray-700 rounded-md p-1 text-gray-500 text-xs",children:`Page ${(s=e==null?void 0:e.metadata)==null?void 0:s.page}`}),t.jsx("span",{className:"border border-gray-300 dark:border-gray-700 rounded-md p-1 text-xs text-gray-500",children:`Line ${(d=(l=(i=e==null?void 0:e.metadata)==null?void 0:i.loc)==null?void 0:l.lines)==null?void 0:d.from} - ${(p=(u=(c=e==null?void 0:e.metadata)==null?void 0:c.loc)==null?void 0:u.lines)==null?void 0:p.to}`})]})]}):t.jsx(t.Fragment,{children:t.jsx("p",{className:"text-gray-500 text-sm",children:e==null?void 0:e.pageContent})})]})})},nt=e=>{const r=/{([^}]+)}/g;let a=null,s;for(;(s=r.exec(e))!==null;)s.index===r.lastIndex&&r.lastIndex++,a={word:s[1],start:s.index,end:s.index+s[0].length};return a},it=e=>new Promise((r,a)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>r(s.result),s.onerror=i=>a(i)}),ne=(e,r)=>{const a=k.useRef();return k.useEffect(()=>{a.current=e},[e,...r]),k.useCallback((...s)=>{const i=a.current;return i(...s)},[a])},ot=(e={})=>{const{onEnd:r=()=>{},onResult:a=()=>{},onError:s=()=>{},autoStop:i=!1,autoStopTimeout:l=5e3,autoSubmit:d=!1}=e,c=k.useRef(null),[u,p]=k.useState(!1),[f,w]=k.useState(!1),[b,M]=k.useState(""),x=k.useRef(null),m=k.useRef("");k.useEffect(()=>{typeof window>"u"||(window.SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition,window.SpeechRecognition&&(w(!0),c.current=new window.SpeechRecognition))},[]);const S=()=>{M(""),m.current=""},z=(E,h,o)=>{const n=Array.from(E.results).map(g=>g[0]).map(g=>g.transcript).join("");a(n),h&&n!==m.current&&(m.current=n,x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{R(),o&&a(n)},l))},A=E=>{E.error==="not-allowed"&&(c.current&&(c.current.onend=null),p(!1)),s(E)},C=ne((E={})=>{if(u||!f)return;const{lang:h="",interimResults:o=!0,continuous:n=!1,maxAlternatives:g=1,grammars:v,autoStop:y=i,autoStopTimeout:N=l,autoSubmit:$=d}=E;p(!0),M(""),m.current="",c.current&&(c.current.lang=h,c.current.interimResults=o,c.current.onresult=H=>{z(H,y,$);const P=Array.from(H.results).map(T=>T[0]).map(T=>T.transcript).join("");M(P)},c.current.onerror=A,c.current.continuous=n,c.current.maxAlternatives=g,v&&(c.current.grammars=v),c.current.onend=()=>{c.current&&!y?c.current.start():r()},c.current&&c.current.start())},[u,f,c,i,l,d]),R=ne(()=>{!u||!f||(x.current&&(clearTimeout(x.current),x.current=null),c.current&&(c.current.onresult=null,c.current.onend=null,c.current.onerror=null,p(!1),c.current.stop()),r())},[u,f,c,r]);return k.useEffect(()=>()=>{x.current&&clearTimeout(x.current)},[]),{start:C,isListening:u,stop:R,supported:f,transcript:b,resetTranscript:S}};var ie={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},oe=j.createContext&&j.createContext(ie),lt=["attr","size","title"];function ct(e,r){if(e==null)return{};var a=ut(e,r),s,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)s=l[i],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function ut(e,r){if(e==null)return{};var a={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(r.indexOf(s)>=0)continue;a[s]=e[s]}return a}function I(){return I=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},I.apply(this,arguments)}function le(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,s)}return a}function L(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?le(Object(a),!0).forEach(function(s){dt(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function dt(e,r,a){return r=gt(r),r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function gt(e){var r=ht(e,"string");return typeof r=="symbol"?r:r+""}function ht(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function ce(e){return e&&e.map((r,a)=>j.createElement(r.tag,L({key:a},r.attr),ce(r.child)))}function ue(e){return r=>j.createElement(mt,I({attr:L({},e.attr)},r),ce(e.child))}function mt(e){var r=a=>{var{attr:s,size:i,title:l}=e,d=ct(e,lt),c=i||a.size||"1em",u;return a.className&&(u=a.className),e.className&&(u=(u?u+" ":"")+e.className),j.createElement("svg",I({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,s,d,{className:u,style:L(L({color:e.color||a.color},a.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),l&&j.createElement("title",null,l),e.children)};return oe!==void 0?j.createElement(oe.Consumer,null,a=>r(a)):r(ie)}function ft(e){return ue({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M128,24a104,104,0,0,0,0,208,8,8,0,0,0,5-14.23h0c-1.12-.91-20.88-17.32-31.06-49.77h26a8,8,0,0,0,0-16H98.08a140.17,140.17,0,0,1,0-48h59.88A138,138,0,0,1,160,128a8,8,0,0,0,16,0,154.7,154.7,0,0,0-1.84-24h38.51A87.61,87.61,0,0,1,216,128a8,8,0,0,0,16,0A104.11,104.11,0,0,0,128,24ZM107.59,42.4A135.28,135.28,0,0,0,85.29,88H49.63A88.29,88.29,0,0,1,107.59,42.4Zm0,171.2a88.29,88.29,0,0,1-58-45.6H85.29A135.28,135.28,0,0,0,107.59,213.6ZM81.84,152H43.33a88.15,88.15,0,0,1,0-48H81.84a157.44,157.44,0,0,0,0,48ZM102,88a115.11,115.11,0,0,1,26-45,115.27,115.27,0,0,1,26,45Zm68.75,0a135.28,135.28,0,0,0-22.3-45.6,88.29,88.29,0,0,1,58,45.6Zm50.95,85.66L203.31,192l18.35,18.34a8,8,0,0,1-11.32,11.32L192,203.31l-18.34,18.35a8,8,0,0,1-11.32-11.32L180.69,192l-18.35-18.34a8,8,0,0,1,11.32-11.32L192,180.69l18.34-18.35a8,8,0,0,1,11.32,11.32Z"},child:[]}]})(e)}function pt(e){return ue({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M128,24h0A104,104,0,1,0,232,128,104.12,104.12,0,0,0,128,24Zm88,104a87.61,87.61,0,0,1-3.33,24H174.16a157.44,157.44,0,0,0,0-48h38.51A87.61,87.61,0,0,1,216,128ZM102,168H154a115.11,115.11,0,0,1-26,45A115.27,115.27,0,0,1,102,168Zm-3.9-16a140.84,140.84,0,0,1,0-48h59.88a140.84,140.84,0,0,1,0,48ZM40,128a87.61,87.61,0,0,1,3.33-24H81.84a157.44,157.44,0,0,0,0,48H43.33A87.61,87.61,0,0,1,40,128ZM154,88H102a115.11,115.11,0,0,1,26-45A115.27,115.27,0,0,1,154,88Zm52.33,0H170.71a135.28,135.28,0,0,0-22.3-45.6A88.29,88.29,0,0,1,206.37,88ZM107.59,42.4A135.28,135.28,0,0,0,85.29,88H49.63A88.29,88.29,0,0,1,107.59,42.4ZM49.63,168H85.29a135.28,135.28,0,0,0,22.3,45.6A88.29,88.29,0,0,1,49.63,168Zm98.78,45.6a135.28,135.28,0,0,0,22.3-45.6h35.66A88.29,88.29,0,0,1,148.41,213.6Z"},child:[]}]})(e)}const xt=({e,sendWhenEnter:r,typing:a,isSending:s})=>e.key==="Enter"&&!e.shiftKey&&!e.nativeEvent.isComposing&&!s&&r;export{at as M,st as P,Te as S,X as a,pt as b,ft as c,De as d,nt as g,xt as h,it as t,ot as u};
