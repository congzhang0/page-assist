var ma=Object.defineProperty;var fa=(a,s,c)=>s in a?ma(a,s,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[s]=c;var Re=(a,s,c)=>(fa(a,typeof s!="symbol"?s+"":s,c),c),Zn=(a,s,c)=>{if(!s.has(a))throw TypeError("Cannot "+c)};var M=(a,s,c)=>(Zn(a,s,"read from private field"),c?c.call(a):s.get(a)),de=(a,s,c)=>{if(s.has(a))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(a):s.set(a,c)},Ie=(a,s,c,u)=>(Zn(a,s,"write to private field"),u?u.call(a,c):s.set(a,c),c);var un=(a,s,c,u)=>({set _(d){Ie(a,s,d,c)},get _(){return M(a,s,u)}}),Te=(a,s,c)=>(Zn(a,s,"access private method"),c);var Kt,Mt,Ft,yn,Ut,En,bn,Bn,Gn,Rr,jn,kr,Nr;import{r as reactExports,aF as NavigationContext,aG as stripBasename,aH as useHref,aI as useResolvedPath,V as useLocation,aJ as DataRouterStateContext,aw as useNavigate,aK as createPath,R as React,aL as reactIsExports,a9 as _inherits,aa as _createSuper,ab as _classCallCheck,ac as _createClass,a4 as supportRef,a8 as useComposeRef,f as _objectSpread2,aM as findDOMNode,s as _typeof,e as _extends$2,d as _defineProperty,aN as useSafeState,b as _slicedToArray,au as useLayoutUpdateEffect,a7 as warningOnce,aO as generate$1,aP as IconContext,aQ as updateCSS,_ as _objectWithoutProperties,aC as blue,c as classNames,a0 as useToken,aD as CSSMotionList,L as _toConsumableArray,ad as reactDomExports,aR as ReactDOM,aS as genComponentStyleHook,a3 as wrapperRaf,p as CSSMotion,A as ConfigContext,q as composeRef,aT as SizeContext,v as genStyleHooks,w as merge$1,aU as getLineHeight,z as unit,Z as genFocusStyle,$ as genSubStyleComponent,K as DisabledContext,W as canUseDom,o as useLayoutEffect$1,aV as removeCSS,aW as React$1,aX as contains$1,aY as merge$2,ax as get$1,aZ as set,az as _assertThisInitialized,a6 as isEqual,a1 as useLocale,a_ as getConfirmLocale,a$ as DisabledContextProvider,y as resetComponent,av as clearFix,C as ConfigProvider,T as globalConfig,aB as defaultLocale,b0 as warning$2,ay as fillRef,b1 as isDOM,b2 as _toArray,a5 as useMemo,E as Empty,x as textEllipsis,b3 as resetIcon,N as devUseWarning,aA as TinyColor,b4 as ValidateMessagesContext,b5 as pify,n as commonjsGlobal,m as getDefaultExportFromCjs,aE as getAugmentedNamespace}from"./FontSizeProvider-BQs3lYNB.js";function _mergeNamespaces(a,s){for(var c=0;c<s.length;c++){const u=s[c];if(typeof u!="string"&&!Array.isArray(u)){for(const d in u)if(d!=="default"&&!(d in a)){const h=Object.getOwnPropertyDescriptor(u,d);h&&Object.defineProperty(a,d,h.get?h:{enumerable:!0,get:()=>u[d]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}/**
* React Router DOM v6.10.0
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var c=arguments[s];for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(a[u]=c[u])}return a},_extends$1.apply(this,arguments)}function _objectWithoutPropertiesLoose(a,s){if(a==null)return{};var c={},u=Object.keys(a),d,h;for(h=0;h<u.length;h++)d=u[h],!(s.indexOf(d)>=0)&&(c[d]=a[d]);return c}function isModifiedEvent(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function shouldProcessLinkClick(a,s){return a.button===0&&(!s||s==="_self")&&!isModifiedEvent(a)}const _excluded$q=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],_excluded2$3=["aria-current","caseSensitive","className","end","style","to","children"],isBrowser$3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(a,s){let{onClick:c,relative:u,reloadDocument:d,replace:h,state:p,target:m,to:f,preventScrollReset:_}=a,y=_objectWithoutPropertiesLoose(a,_excluded$q),{basename:E}=reactExports.useContext(NavigationContext),b,T=!1;if(typeof f=="string"&&ABSOLUTE_URL_REGEX.test(f)&&(b=f,isBrowser$3)){let O=new URL(window.location.href),I=f.startsWith("//")?new URL(O.protocol+f):new URL(f),x=stripBasename(I.pathname,E);I.origin===O.origin&&x!=null?f=x+I.search+I.hash:T=!0}let A=useHref(f,{relative:u}),v=useLinkClickHandler(f,{replace:h,state:p,target:m,preventScrollReset:_,relative:u});function S(O){c&&c(O),O.defaultPrevented||v(O)}return reactExports.createElement("a",_extends$1({},y,{href:b||A,onClick:T||d?c:S,ref:s,target:m}))}),NavLink=reactExports.forwardRef(function(a,s){let{"aria-current":c="page",caseSensitive:u=!1,className:d="",end:h=!1,style:p,to:m,children:f}=a,_=_objectWithoutPropertiesLoose(a,_excluded2$3),y=useResolvedPath(m,{relative:_.relative}),E=useLocation(),b=reactExports.useContext(DataRouterStateContext),{navigator:T}=reactExports.useContext(NavigationContext),A=T.encodeLocation?T.encodeLocation(y).pathname:y.pathname,v=E.pathname,S=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;u||(v=v.toLowerCase(),S=S?S.toLowerCase():null,A=A.toLowerCase());let O=v===A||!h&&v.startsWith(A)&&v.charAt(A.length)==="/",I=S!=null&&(S===A||!h&&S.startsWith(A)&&S.charAt(A.length)==="/"),x=O?c:void 0,P;typeof d=="function"?P=d({isActive:O,isPending:I}):P=[d,O?"active":null,I?"pending":null].filter(Boolean).join(" ");let w=typeof p=="function"?p({isActive:O,isPending:I}):p;return reactExports.createElement(Link,_extends$1({},_,{"aria-current":x,className:P,ref:s,style:w,to:m}),typeof f=="function"?f({isActive:O,isPending:I}):f)});var DataRouterHook;(function(a){a.UseScrollRestoration="useScrollRestoration",a.UseSubmitImpl="useSubmitImpl",a.UseFetcher="useFetcher"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(a){a.UseFetchers="useFetchers",a.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(a,s){let{target:c,replace:u,state:d,preventScrollReset:h,relative:p}=s===void 0?{}:s,m=useNavigate(),f=useLocation(),_=useResolvedPath(a,{relative:p});return reactExports.useCallback(y=>{if(shouldProcessLinkClick(y,c)){y.preventDefault();let E=u!==void 0?u:createPath(f)===createPath(_);m(a,{replace:E,state:d,preventScrollReset:h,relative:p})}},[f,m,_,u,d,c,a,h,p])}function toArray$6(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=[];return React.Children.forEach(a,function(u){u==null&&!s.keepEmpty||(Array.isArray(u)?c=c.concat(toArray$6(u)):reactIsExports.isFragment(u)&&u.props?c=c.concat(toArray$6(u.props.children,s)):c.push(u))}),c}var CollectionContext=reactExports.createContext(null);function Collection(a){var s=a.children,c=a.onBatchResize,u=reactExports.useRef(0),d=reactExports.useRef([]),h=reactExports.useContext(CollectionContext),p=reactExports.useCallback(function(m,f,_){u.current+=1;var y=u.current;d.current.push({size:m,element:f,data:_}),Promise.resolve().then(function(){y===u.current&&(c==null||c(d.current),d.current=[])}),h==null||h(m,f,_)},[c,h]);return reactExports.createElement(CollectionContext.Provider,{value:p},s)}var MapShim=function(){if(typeof Map<"u")return Map;function a(s,c){var u=-1;return s.some(function(d,h){return d[0]===c?(u=h,!0):!1}),u}return function(){function s(){this.__entries__=[]}return Object.defineProperty(s.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),s.prototype.get=function(c){var u=a(this.__entries__,c),d=this.__entries__[u];return d&&d[1]},s.prototype.set=function(c,u){var d=a(this.__entries__,c);~d?this.__entries__[d][1]=u:this.__entries__.push([c,u])},s.prototype.delete=function(c){var u=this.__entries__,d=a(u,c);~d&&u.splice(d,1)},s.prototype.has=function(c){return!!~a(this.__entries__,c)},s.prototype.clear=function(){this.__entries__.splice(0)},s.prototype.forEach=function(c,u){u===void 0&&(u=null);for(var d=0,h=this.__entries__;d<h.length;d++){var p=h[d];c.call(u,p[1],p[0])}},s}()}(),isBrowser$2=typeof window<"u"&&typeof document<"u"&&window.document===document,global$1=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),requestAnimationFrame$1=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(global$1):function(a){return setTimeout(function(){return a(Date.now())},1e3/60)}}(),trailingTimeout=2;function throttle(a,s){var c=!1,u=!1,d=0;function h(){c&&(c=!1,a()),u&&m()}function p(){requestAnimationFrame$1(h)}function m(){var f=Date.now();if(c){if(f-d<trailingTimeout)return;u=!0}else c=!0,u=!1,setTimeout(p,s);d=f}return m}var REFRESH_DELAY=20,transitionKeys=["top","right","bottom","left","width","height","size","weight"],mutationObserverSupported=typeof MutationObserver<"u",ResizeObserverController=function(){function a(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=throttle(this.refresh.bind(this),REFRESH_DELAY)}return a.prototype.addObserver=function(s){~this.observers_.indexOf(s)||this.observers_.push(s),this.connected_||this.connect_()},a.prototype.removeObserver=function(s){var c=this.observers_,u=c.indexOf(s);~u&&c.splice(u,1),!c.length&&this.connected_&&this.disconnect_()},a.prototype.refresh=function(){var s=this.updateObservers_();s&&this.refresh()},a.prototype.updateObservers_=function(){var s=this.observers_.filter(function(c){return c.gatherActive(),c.hasActive()});return s.forEach(function(c){return c.broadcastActive()}),s.length>0},a.prototype.connect_=function(){!isBrowser$2||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),mutationObserverSupported?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},a.prototype.disconnect_=function(){!isBrowser$2||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},a.prototype.onTransitionEnd_=function(s){var c=s.propertyName,u=c===void 0?"":c,d=transitionKeys.some(function(h){return!!~u.indexOf(h)});d&&this.refresh()},a.getInstance=function(){return this.instance_||(this.instance_=new a),this.instance_},a.instance_=null,a}(),defineConfigurable=function(a,s){for(var c=0,u=Object.keys(s);c<u.length;c++){var d=u[c];Object.defineProperty(a,d,{value:s[d],enumerable:!1,writable:!1,configurable:!0})}return a},getWindowOf=function(a){var s=a&&a.ownerDocument&&a.ownerDocument.defaultView;return s||global$1},emptyRect=createRectInit(0,0,0,0);function toFloat(a){return parseFloat(a)||0}function getBordersSize(a){for(var s=[],c=1;c<arguments.length;c++)s[c-1]=arguments[c];return s.reduce(function(u,d){var h=a["border-"+d+"-width"];return u+toFloat(h)},0)}function getPaddings(a){for(var s=["top","right","bottom","left"],c={},u=0,d=s;u<d.length;u++){var h=d[u],p=a["padding-"+h];c[h]=toFloat(p)}return c}function getSVGContentRect(a){var s=a.getBBox();return createRectInit(0,0,s.width,s.height)}function getHTMLElementContentRect(a){var s=a.clientWidth,c=a.clientHeight;if(!s&&!c)return emptyRect;var u=getWindowOf(a).getComputedStyle(a),d=getPaddings(u),h=d.left+d.right,p=d.top+d.bottom,m=toFloat(u.width),f=toFloat(u.height);if(u.boxSizing==="border-box"&&(Math.round(m+h)!==s&&(m-=getBordersSize(u,"left","right")+h),Math.round(f+p)!==c&&(f-=getBordersSize(u,"top","bottom")+p)),!isDocumentElement(a)){var _=Math.round(m+h)-s,y=Math.round(f+p)-c;Math.abs(_)!==1&&(m-=_),Math.abs(y)!==1&&(f-=y)}return createRectInit(d.left,d.top,m,f)}var isSVGGraphicsElement=function(){return typeof SVGGraphicsElement<"u"?function(a){return a instanceof getWindowOf(a).SVGGraphicsElement}:function(a){return a instanceof getWindowOf(a).SVGElement&&typeof a.getBBox=="function"}}();function isDocumentElement(a){return a===getWindowOf(a).document.documentElement}function getContentRect(a){return isBrowser$2?isSVGGraphicsElement(a)?getSVGContentRect(a):getHTMLElementContentRect(a):emptyRect}function createReadOnlyRect(a){var s=a.x,c=a.y,u=a.width,d=a.height,h=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,p=Object.create(h.prototype);return defineConfigurable(p,{x:s,y:c,width:u,height:d,top:c,right:s+u,bottom:d+c,left:s}),p}function createRectInit(a,s,c,u){return{x:a,y:s,width:c,height:u}}var ResizeObservation=function(){function a(s){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=createRectInit(0,0,0,0),this.target=s}return a.prototype.isActive=function(){var s=getContentRect(this.target);return this.contentRect_=s,s.width!==this.broadcastWidth||s.height!==this.broadcastHeight},a.prototype.broadcastRect=function(){var s=this.contentRect_;return this.broadcastWidth=s.width,this.broadcastHeight=s.height,s},a}(),ResizeObserverEntry=function(){function a(s,c){var u=createReadOnlyRect(c);defineConfigurable(this,{target:s,contentRect:u})}return a}(),ResizeObserverSPI=function(){function a(s,c,u){if(this.activeObservations_=[],this.observations_=new MapShim,typeof s!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=s,this.controller_=c,this.callbackCtx_=u}return a.prototype.observe=function(s){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(s instanceof getWindowOf(s).Element))throw new TypeError('parameter 1 is not of type "Element".');var c=this.observations_;c.has(s)||(c.set(s,new ResizeObservation(s)),this.controller_.addObserver(this),this.controller_.refresh())}},a.prototype.unobserve=function(s){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(s instanceof getWindowOf(s).Element))throw new TypeError('parameter 1 is not of type "Element".');var c=this.observations_;c.has(s)&&(c.delete(s),c.size||this.controller_.removeObserver(this))}},a.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},a.prototype.gatherActive=function(){var s=this;this.clearActive(),this.observations_.forEach(function(c){c.isActive()&&s.activeObservations_.push(c)})},a.prototype.broadcastActive=function(){if(this.hasActive()){var s=this.callbackCtx_,c=this.activeObservations_.map(function(u){return new ResizeObserverEntry(u.target,u.broadcastRect())});this.callback_.call(s,c,s),this.clearActive()}},a.prototype.clearActive=function(){this.activeObservations_.splice(0)},a.prototype.hasActive=function(){return this.activeObservations_.length>0},a}(),observers=typeof WeakMap<"u"?new WeakMap:new MapShim,ResizeObserver$2=function(){function a(s){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var c=ResizeObserverController.getInstance(),u=new ResizeObserverSPI(s,c,this);observers.set(this,u)}return a}();["observe","unobserve","disconnect"].forEach(function(a){ResizeObserver$2.prototype[a]=function(){var s;return(s=observers.get(this))[a].apply(s,arguments)}});var index$1=function(){return typeof global$1.ResizeObserver<"u"?global$1.ResizeObserver:ResizeObserver$2}(),elementListeners=new Map;function onResize(a){a.forEach(function(s){var c,u=s.target;(c=elementListeners.get(u))===null||c===void 0||c.forEach(function(d){return d(u)})})}var resizeObserver=new index$1(onResize);function observe(a,s){elementListeners.has(a)||(elementListeners.set(a,new Set),resizeObserver.observe(a)),elementListeners.get(a).add(s)}function unobserve(a,s){elementListeners.has(a)&&(elementListeners.get(a).delete(s),elementListeners.get(a).size||(resizeObserver.unobserve(a),elementListeners.delete(a)))}var DomWrapper=function(a){_inherits(c,a);var s=_createSuper(c);function c(){return _classCallCheck(this,c),s.apply(this,arguments)}return _createClass(c,[{key:"render",value:function(){return this.props.children}}]),c}(reactExports.Component);function SingleObserver(a,s){var c=a.children,u=a.disabled,d=reactExports.useRef(null),h=reactExports.useRef(null),p=reactExports.useContext(CollectionContext),m=typeof c=="function",f=m?c(d):c,_=reactExports.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),y=!m&&reactExports.isValidElement(f)&&supportRef(f),E=y?f.ref:null,b=useComposeRef(E,d),T=function(){var S;return findDOMNode(d.current)||(d.current&&_typeof(d.current)==="object"?findDOMNode((S=d.current)===null||S===void 0?void 0:S.nativeElement):null)||findDOMNode(h.current)};reactExports.useImperativeHandle(s,function(){return T()});var A=reactExports.useRef(a);A.current=a;var v=reactExports.useCallback(function(S){var O=A.current,I=O.onResize,x=O.data,P=S.getBoundingClientRect(),w=P.width,C=P.height,k=S.offsetWidth,R=S.offsetHeight,N=Math.floor(w),F=Math.floor(C);if(_.current.width!==N||_.current.height!==F||_.current.offsetWidth!==k||_.current.offsetHeight!==R){var L={width:N,height:F,offsetWidth:k,offsetHeight:R};_.current=L;var X=k===Math.round(w)?w:k,V=R===Math.round(C)?C:R,H=_objectSpread2(_objectSpread2({},L),{},{offsetWidth:X,offsetHeight:V});p==null||p(H,S,x),I&&Promise.resolve().then(function(){I(H,S)})}},[]);return reactExports.useEffect(function(){var S=T();return S&&!u&&observe(S,v),function(){return unobserve(S,v)}},[d.current,u]),reactExports.createElement(DomWrapper,{ref:h},y?reactExports.cloneElement(f,{ref:b}):f)}var RefSingleObserver=reactExports.forwardRef(SingleObserver),INTERNAL_PREFIX_KEY="rc-observer-key";function ResizeObserver$1(a,s){var c=a.children,u=typeof c=="function"?[c]:toArray$6(c);return u.map(function(d,h){var p=(d==null?void 0:d.key)||"".concat(INTERNAL_PREFIX_KEY,"-").concat(h);return reactExports.createElement(RefSingleObserver,_extends$2({},a,{key:p,ref:h===0?s:void 0}),d)})}var RefResizeObserver=reactExports.forwardRef(ResizeObserver$1);RefResizeObserver.Collection=Collection;function omit(a,s){var c=_objectSpread2({},a);return Array.isArray(s)&&s.forEach(function(u){delete c[u]}),c}var Keyframe=function(){function a(s,c){_classCallCheck(this,a),_defineProperty(this,"name",void 0),_defineProperty(this,"style",void 0),_defineProperty(this,"_keyframe",!0),this.name=s,this.style=c}return _createClass(a,[{key:"getName",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return s?"".concat(s,"-").concat(this.name):this.name}}]),a}();const PresetColors=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"];function useEvent(a){var s=reactExports.useRef();s.current=a;var c=reactExports.useCallback(function(){for(var u,d=arguments.length,h=new Array(d),p=0;p<d;p++)h[p]=arguments[p];return(u=s.current)===null||u===void 0?void 0:u.call.apply(u,[s].concat(h))},[]);return c}function hasValue$1(a){return a!==void 0}function useMergedState(a,s){var c=s||{},u=c.defaultValue,d=c.value,h=c.onChange,p=c.postState,m=useSafeState(function(){return hasValue$1(d)?d:hasValue$1(u)?typeof u=="function"?u():u:typeof a=="function"?a():a}),f=_slicedToArray(m,2),_=f[0],y=f[1],E=d!==void 0?d:_,b=p?p(E):E,T=useEvent(h),A=useSafeState([E]),v=_slicedToArray(A,2),S=v[0],O=v[1];useLayoutUpdateEffect(function(){var x=S[0];_!==x&&T(_,x)},[S]),useLayoutUpdateEffect(function(){hasValue$1(d)||y(d)},[d]);var I=useEvent(function(x,P){y(x,P),O([E],P)});return[b,I]}function genPresetColor(a,s){return PresetColors.reduce((c,u)=>{const d=a[`${u}1`],h=a[`${u}3`],p=a[`${u}6`],m=a[`${u}7`];return Object.assign(Object.assign({},c),s(u,{lightColor:d,lightBorderColor:h,darkColor:p,textColor:m}))},{})}var CheckCircleFilled$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};const CheckCircleFilledSvg=CheckCircleFilled$2;function getRoot(a){var s;return a==null||(s=a.getRootNode)===null||s===void 0?void 0:s.call(a)}function inShadow(a){return getRoot(a)instanceof ShadowRoot}function getShadowRoot(a){return inShadow(a)?getRoot(a):null}function camelCase$2(a){return a.replace(/-(.)/g,function(s,c){return c.toUpperCase()})}function warning$1(a,s){warningOnce(a,"[@ant-design/icons] ".concat(s))}function isIconDefinition(a){return _typeof(a)==="object"&&typeof a.name=="string"&&typeof a.theme=="string"&&(_typeof(a.icon)==="object"||typeof a.icon=="function")}function normalizeAttrs(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(a).reduce(function(s,c){var u=a[c];switch(c){case"class":s.className=u,delete s.class;break;default:delete s[c],s[camelCase$2(c)]=u}return s},{})}function generate(a,s,c){return c?React.createElement(a.tag,_objectSpread2(_objectSpread2({key:s},normalizeAttrs(a.attrs)),c),(a.children||[]).map(function(u,d){return generate(u,"".concat(s,"-").concat(a.tag,"-").concat(d))})):React.createElement(a.tag,_objectSpread2({key:s},normalizeAttrs(a.attrs)),(a.children||[]).map(function(u,d){return generate(u,"".concat(s,"-").concat(a.tag,"-").concat(d))}))}function getSecondaryColor(a){return generate$1(a)[0]}function normalizeTwoToneColors(a){return a?Array.isArray(a)?a:[a]:[]}var iconStyles=`
.anticon {
  display: inline-flex;
  alignItems: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,useInsertStyles=function(a){var s=reactExports.useContext(IconContext),c=s.csp,u=s.prefixCls,d=iconStyles;u&&(d=d.replace(/anticon/g,u)),reactExports.useEffect(function(){var h=a.current,p=getShadowRoot(h);updateCSS(d,"@ant-design-icons",{prepend:!0,csp:c,attachTo:p})},[])},_excluded$p=["icon","className","onClick","style","primaryColor","secondaryColor"],twoToneColorPalette={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function setTwoToneColors(a){var s=a.primaryColor,c=a.secondaryColor;twoToneColorPalette.primaryColor=s,twoToneColorPalette.secondaryColor=c||getSecondaryColor(s),twoToneColorPalette.calculated=!!c}function getTwoToneColors(){return _objectSpread2({},twoToneColorPalette)}var IconBase=function(a){var s=a.icon,c=a.className,u=a.onClick,d=a.style,h=a.primaryColor,p=a.secondaryColor,m=_objectWithoutProperties(a,_excluded$p),f=reactExports.useRef(),_=twoToneColorPalette;if(h&&(_={primaryColor:h,secondaryColor:p||getSecondaryColor(h)}),useInsertStyles(f),warning$1(isIconDefinition(s),"icon should be icon definiton, but got ".concat(s)),!isIconDefinition(s))return null;var y=s;return y&&typeof y.icon=="function"&&(y=_objectSpread2(_objectSpread2({},y),{},{icon:y.icon(_.primaryColor,_.secondaryColor)})),generate(y.icon,"svg-".concat(y.name),_objectSpread2(_objectSpread2({className:c,onClick:u,style:d,"data-icon":y.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},m),{},{ref:f}))};IconBase.displayName="IconReact",IconBase.getTwoToneColors=getTwoToneColors,IconBase.setTwoToneColors=setTwoToneColors;const ReactIcon=IconBase;function setTwoToneColor(a){var s=normalizeTwoToneColors(a),c=_slicedToArray(s,2),u=c[0],d=c[1];return ReactIcon.setTwoToneColors({primaryColor:u,secondaryColor:d})}function getTwoToneColor(){var a=ReactIcon.getTwoToneColors();return a.calculated?[a.primaryColor,a.secondaryColor]:a.primaryColor}var _excluded$o=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];setTwoToneColor(blue.primary);var Icon=reactExports.forwardRef(function(a,s){var c=a.className,u=a.icon,d=a.spin,h=a.rotate,p=a.tabIndex,m=a.onClick,f=a.twoToneColor,_=_objectWithoutProperties(a,_excluded$o),y=reactExports.useContext(IconContext),E=y.prefixCls,b=E===void 0?"anticon":E,T=y.rootClassName,A=classNames(T,b,_defineProperty(_defineProperty({},"".concat(b,"-").concat(u.name),!!u.name),"".concat(b,"-spin"),!!d||u.name==="loading"),c),v=p;v===void 0&&m&&(v=-1);var S=h?{msTransform:"rotate(".concat(h,"deg)"),transform:"rotate(".concat(h,"deg)")}:void 0,O=normalizeTwoToneColors(f),I=_slicedToArray(O,2),x=I[0],P=I[1];return reactExports.createElement("span",_extends$2({role:"img","aria-label":u.name},_,{ref:s,tabIndex:v,onClick:m,className:A}),reactExports.createElement(ReactIcon,{icon:u,primaryColor:x,secondaryColor:P,style:S}))});Icon.displayName="AntdIcon",Icon.getTwoToneColor=getTwoToneColor,Icon.setTwoToneColor=setTwoToneColor;const AntdIcon=Icon;var CheckCircleFilled=function(a,s){return reactExports.createElement(AntdIcon,_extends$2({},a,{ref:s,icon:CheckCircleFilledSvg}))},RefIcon$f=reactExports.forwardRef(CheckCircleFilled);const CheckCircleFilled$1=RefIcon$f;var CloseCircleFilled$2={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};const CloseCircleFilledSvg=CloseCircleFilled$2;var CloseCircleFilled=function(a,s){return reactExports.createElement(AntdIcon,_extends$2({},a,{ref:s,icon:CloseCircleFilledSvg}))},RefIcon$e=reactExports.forwardRef(CloseCircleFilled);const CloseCircleFilled$1=RefIcon$e;var CloseOutlined$2={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};const CloseOutlinedSvg=CloseOutlined$2;var CloseOutlined=function(a,s){return reactExports.createElement(AntdIcon,_extends$2({},a,{ref:s,icon:CloseOutlinedSvg}))},RefIcon$d=reactExports.forwardRef(CloseOutlined);const CloseOutlined$1=RefIcon$d;var ExclamationCircleFilled$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};const ExclamationCircleFilledSvg=ExclamationCircleFilled$2;var ExclamationCircleFilled=function(a,s){return reactExports.createElement(AntdIcon,_extends$2({},a,{ref:s,icon:ExclamationCircleFilledSvg}))},RefIcon$c=reactExports.forwardRef(ExclamationCircleFilled);const ExclamationCircleFilled$1=RefIcon$c;var InfoCircleFilled$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};const InfoCircleFilledSvg=InfoCircleFilled$2;var InfoCircleFilled=function(a,s){return reactExports.createElement(AntdIcon,_extends$2({},a,{ref:s,icon:InfoCircleFilledSvg}))},RefIcon$b=reactExports.forwardRef(InfoCircleFilled);const InfoCircleFilled$1=RefIcon$b;var attributes$1=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,eventsName=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,propList="".concat(attributes$1," ").concat(eventsName).split(/[\s\n]+/),ariaPrefix="aria-",dataPrefix="data-";function match(a,s){return a.indexOf(s)===0}function pickAttrs(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c;s===!1?c={aria:!0,data:!0,attr:!0}:s===!0?c={aria:!0}:c=_objectSpread2({},s);var u={};return Object.keys(a).forEach(function(d){(c.aria&&(d==="role"||match(d,ariaPrefix))||c.data&&match(d,dataPrefix)||c.attr&&propList.includes(d))&&(u[d]=a[d])}),u}function isFragment(a){return a&&React.isValidElement(a)&&a.type===React.Fragment}const replaceElement$1=(a,s,c)=>React.isValidElement(a)?React.cloneElement(a,typeof c=="function"?c(a.props||{}):c):s;function cloneElement(a,s){return replaceElement$1(a,a,s)}const t=a=>typeof a=="object"&&a!=null&&a.nodeType===1,e$1=(a,s)=>(!s||a!=="hidden")&&a!=="visible"&&a!=="clip",n=(a,s)=>{if(a.clientHeight<a.scrollHeight||a.clientWidth<a.scrollWidth){const c=getComputedStyle(a,null);return e$1(c.overflowY,s)||e$1(c.overflowX,s)||(u=>{const d=(h=>{if(!h.ownerDocument||!h.ownerDocument.defaultView)return null;try{return h.ownerDocument.defaultView.frameElement}catch{return null}})(u);return!!d&&(d.clientHeight<u.scrollHeight||d.clientWidth<u.scrollWidth)})(a)}return!1},o$2=(a,s,c,u,d,h,p,m)=>h<a&&p>s||h>a&&p<s?0:h<=a&&m<=c||p>=s&&m>=c?h-a-u:p>s&&m<c||h<a&&m>c?p-s+d:0,l$1=a=>a.parentElement??(a.getRootNode().host||null),r=(a,s)=>{var c,u,d,h;if(typeof document>"u")return[];const{scrollMode:p,block:m,inline:f,boundary:_,skipOverflowHiddenElements:y}=s,E=typeof _=="function"?_:Q=>Q!==_;if(!t(a))throw new TypeError("Invalid target");const b=document.scrollingElement||document.documentElement,T=[];let A=a;for(;t(A)&&E(A);){if(A=l$1(A),A===b){T.push(A);break}A!=null&&A===document.body&&n(A)&&!n(document.documentElement)||A!=null&&n(A,y)&&T.push(A)}const v=(u=(c=window.visualViewport)==null?void 0:c.width)!=null?u:innerWidth,S=(h=(d=window.visualViewport)==null?void 0:d.height)!=null?h:innerHeight,{scrollX:O,scrollY:I}=window,{height:x,width:P,top:w,right:C,bottom:k,left:R}=a.getBoundingClientRect(),{top:N,right:F,bottom:L,left:X}=(Q=>{const Z=window.getComputedStyle(Q);return{top:parseFloat(Z.scrollMarginTop)||0,right:parseFloat(Z.scrollMarginRight)||0,bottom:parseFloat(Z.scrollMarginBottom)||0,left:parseFloat(Z.scrollMarginLeft)||0}})(a);let V=m==="start"||m==="nearest"?w-N:m==="end"?k+L:w+x/2-N+L,H=f==="center"?R+P/2-X+F:f==="end"?C+F:R-X;const ee=[];for(let Q=0;Q<T.length;Q++){const Z=T[Q],{height:K,width:se,top:ne,right:le,bottom:he,left:Y}=Z.getBoundingClientRect();if(p==="if-needed"&&w>=0&&R>=0&&k<=S&&C<=v&&w>=ne&&k<=he&&R>=Y&&C<=le)return ee;const D=getComputedStyle(Z),G=parseInt(D.borderLeftWidth,10),B=parseInt(D.borderTopWidth,10),U=parseInt(D.borderRightWidth,10),W=parseInt(D.borderBottomWidth,10);let q=0,J=0;const ae="offsetWidth"in Z?Z.offsetWidth-Z.clientWidth-G-U:0,ce="offsetHeight"in Z?Z.offsetHeight-Z.clientHeight-B-W:0,ie="offsetWidth"in Z?Z.offsetWidth===0?0:se/Z.offsetWidth:0,ue="offsetHeight"in Z?Z.offsetHeight===0?0:K/Z.offsetHeight:0;if(b===Z)q=m==="start"?V:m==="end"?V-S:m==="nearest"?o$2(I,I+S,S,B,W,I+V,I+V+x,x):V-S/2,J=f==="start"?H:f==="center"?H-v/2:f==="end"?H-v:o$2(O,O+v,v,G,U,O+H,O+H+P,P),q=Math.max(0,q+I),J=Math.max(0,J+O);else{q=m==="start"?V-ne-B:m==="end"?V-he+W+ce:m==="nearest"?o$2(ne,he,K,B,W+ce,V,V+x,x):V-(ne+K/2)+ce/2,J=f==="start"?H-Y-G:f==="center"?H-(Y+se/2)+ae/2:f==="end"?H-le+U+ae:o$2(Y,le,se,G,U+ae,H,H+P,P);const{scrollLeft:Ee,scrollTop:xe}=Z;q=ue===0?0:Math.max(0,Math.min(xe+q/ue,Z.scrollHeight-K/ue+ce)),J=ie===0?0:Math.max(0,Math.min(Ee+J/ie,Z.scrollWidth-se/ie+ae)),V+=xe-q,H+=Ee-J}ee.push({el:Z,top:q,left:J})}return ee},o$1=a=>a===!1?{block:"end",inline:"nearest"}:(s=>s===Object(s)&&Object.keys(s).length!==0)(a)?a:{block:"start",inline:"nearest"};function e(a,s){if(!a.isConnected||!(d=>{let h=d;for(;h&&h.parentNode;){if(h.parentNode===document)return!0;h=h.parentNode instanceof ShadowRoot?h.parentNode.host:h.parentNode}return!1})(a))return;const c=(d=>{const h=window.getComputedStyle(d);return{top:parseFloat(h.scrollMarginTop)||0,right:parseFloat(h.scrollMarginRight)||0,bottom:parseFloat(h.scrollMarginBottom)||0,left:parseFloat(h.scrollMarginLeft)||0}})(a);if((d=>typeof d=="object"&&typeof d.behavior=="function")(s))return s.behavior(r(a,s));const u=typeof s=="boolean"||s==null?void 0:s.behavior;for(const{el:d,top:h,left:p}of r(a,o$1(s))){const m=h-c.top+c.bottom,f=p-c.left+c.right;d.scroll({top:m,left:f,behavior:u})}}const useCSSVarCls=a=>{const[,,,,s]=useToken();return s?`${a}-css-var`:""};var KeyCode={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(a){var s=a.keyCode;if(a.altKey&&!a.ctrlKey||a.metaKey||s>=KeyCode.F1&&s<=KeyCode.F12)return!1;switch(s){case KeyCode.ALT:case KeyCode.CAPS_LOCK:case KeyCode.CONTEXT_MENU:case KeyCode.CTRL:case KeyCode.DOWN:case KeyCode.END:case KeyCode.ESC:case KeyCode.HOME:case KeyCode.INSERT:case KeyCode.LEFT:case KeyCode.MAC_FF_META:case KeyCode.META:case KeyCode.NUMLOCK:case KeyCode.NUM_CENTER:case KeyCode.PAGE_DOWN:case KeyCode.PAGE_UP:case KeyCode.PAUSE:case KeyCode.PRINT_SCREEN:case KeyCode.RIGHT:case KeyCode.SHIFT:case KeyCode.UP:case KeyCode.WIN_KEY:case KeyCode.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(a){if(a>=KeyCode.ZERO&&a<=KeyCode.NINE||a>=KeyCode.NUM_ZERO&&a<=KeyCode.NUM_MULTIPLY||a>=KeyCode.A&&a<=KeyCode.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&a===0)return!0;switch(a){case KeyCode.SPACE:case KeyCode.QUESTION_MARK:case KeyCode.NUM_PLUS:case KeyCode.NUM_MINUS:case KeyCode.NUM_PERIOD:case KeyCode.NUM_DIVISION:case KeyCode.SEMICOLON:case KeyCode.DASH:case KeyCode.EQUALS:case KeyCode.COMMA:case KeyCode.PERIOD:case KeyCode.SLASH:case KeyCode.APOSTROPHE:case KeyCode.SINGLE_QUOTE:case KeyCode.OPEN_SQUARE_BRACKET:case KeyCode.BACKSLASH:case KeyCode.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},Notify=reactExports.forwardRef(function(a,s){var c=a.prefixCls,u=a.style,d=a.className,h=a.duration,p=h===void 0?4.5:h,m=a.eventKey,f=a.content,_=a.closable,y=a.closeIcon,E=y===void 0?"x":y,b=a.props,T=a.onClick,A=a.onNoticeClose,v=a.times,S=a.hovering,O=reactExports.useState(!1),I=_slicedToArray(O,2),x=I[0],P=I[1],w=S||x,C=function(){A(m)},k=function(L){(L.key==="Enter"||L.code==="Enter"||L.keyCode===KeyCode.ENTER)&&C()};reactExports.useEffect(function(){if(!w&&p>0){var L=setTimeout(function(){C()},p*1e3);return function(){clearTimeout(L)}}},[p,w,v]);var R=reactExports.useMemo(function(){return _typeof(_)==="object"&&_!==null?_:_?{closeIcon:E}:{}},[_,E]),N=pickAttrs(R,!0),F="".concat(c,"-notice");return reactExports.createElement("div",_extends$2({},b,{ref:s,className:classNames(F,d,_defineProperty({},"".concat(F,"-closable"),_)),style:u,onMouseEnter:function(L){var X;P(!0),b==null||(X=b.onMouseEnter)===null||X===void 0||X.call(b,L)},onMouseLeave:function(L){var X;P(!1),b==null||(X=b.onMouseLeave)===null||X===void 0||X.call(b,L)},onClick:T}),reactExports.createElement("div",{className:"".concat(F,"-content")},f),_&&reactExports.createElement("a",_extends$2({tabIndex:0,className:"".concat(F,"-close"),onKeyDown:k,"aria-label":"Close"},N,{onClick:function(L){L.preventDefault(),L.stopPropagation(),C()}}),R.closeIcon))}),NotificationContext=React.createContext({}),NotificationProvider=function(a){var s=a.children,c=a.classNames;return React.createElement(NotificationContext.Provider,{value:{classNames:c}},s)},DEFAULT_OFFSET=8,DEFAULT_THRESHOLD=3,DEFAULT_GAP=16,useStack=function(a){var s={offset:DEFAULT_OFFSET,threshold:DEFAULT_THRESHOLD,gap:DEFAULT_GAP};if(a&&_typeof(a)==="object"){var c,u,d;s.offset=(c=a.offset)!==null&&c!==void 0?c:DEFAULT_OFFSET,s.threshold=(u=a.threshold)!==null&&u!==void 0?u:DEFAULT_THRESHOLD,s.gap=(d=a.gap)!==null&&d!==void 0?d:DEFAULT_GAP}return[!!a,s]},_excluded$n=["className","style","classNames","styles"],NoticeList=function(a){var s=a.configList,c=a.placement,u=a.prefixCls,d=a.className,h=a.style,p=a.motion,m=a.onAllNoticeRemoved,f=a.onNoticeClose,_=a.stack,y=reactExports.useContext(NotificationContext),E=y.classNames,b=reactExports.useRef({}),T=reactExports.useState(null),A=_slicedToArray(T,2),v=A[0],S=A[1],O=reactExports.useState([]),I=_slicedToArray(O,2),x=I[0],P=I[1],w=s.map(function(ee){return{config:ee,key:String(ee.key)}}),C=useStack(_),k=_slicedToArray(C,2),R=k[0],N=k[1],F=N.offset,L=N.threshold,X=N.gap,V=R&&(x.length>0||w.length<=L),H=typeof p=="function"?p(c):p;return reactExports.useEffect(function(){R&&x.length>1&&P(function(ee){return ee.filter(function(Q){return w.some(function(Z){var K=Z.key;return Q===K})})})},[x,w,R]),reactExports.useEffect(function(){var ee;if(R&&b.current[(ee=w[w.length-1])===null||ee===void 0?void 0:ee.key]){var Q;S(b.current[(Q=w[w.length-1])===null||Q===void 0?void 0:Q.key])}},[w,R]),React.createElement(CSSMotionList,_extends$2({key:c,className:classNames(u,"".concat(u,"-").concat(c),E==null?void 0:E.list,d,_defineProperty(_defineProperty({},"".concat(u,"-stack"),!!R),"".concat(u,"-stack-expanded"),V)),style:h,keys:w,motionAppear:!0},H,{onAllRemoved:function(){m(c)}}),function(ee,Q){var Z=ee.config,K=ee.className,se=ee.style,ne=ee.index,le=Z,he=le.key,Y=le.times,D=String(he),G=Z,B=G.className,U=G.style,W=G.classNames,q=G.styles,J=_objectWithoutProperties(G,_excluded$n),ae=w.findIndex(function(pe){return pe.key===D}),ce={};if(R){var ie=w.length-1-(ae>-1?ae:ne-1),ue=c==="top"||c==="bottom"?"-50%":"0";if(ie>0){var Ee,xe,ve;ce.height=V?(Ee=b.current[D])===null||Ee===void 0?void 0:Ee.offsetHeight:v==null?void 0:v.offsetHeight;for(var $e=0,_e=0;_e<ie;_e++){var Be;$e+=((Be=b.current[w[w.length-1-_e].key])===null||Be===void 0?void 0:Be.offsetHeight)+X}var ze=(V?$e:ie*F)*(c.startsWith("top")?1:-1),Se=!V&&v!==null&&v!==void 0&&v.offsetWidth&&(xe=b.current[D])!==null&&xe!==void 0&&xe.offsetWidth?((v==null?void 0:v.offsetWidth)-F*2*(ie<3?ie:3))/((ve=b.current[D])===null||ve===void 0?void 0:ve.offsetWidth):1;ce.transform="translate3d(".concat(ue,", ").concat(ze,"px, 0) scaleX(").concat(Se,")")}else ce.transform="translate3d(".concat(ue,", 0, 0)")}return React.createElement("div",{ref:Q,className:classNames("".concat(u,"-notice-wrapper"),K,W==null?void 0:W.wrapper),style:_objectSpread2(_objectSpread2(_objectSpread2({},se),ce),q==null?void 0:q.wrapper),onMouseEnter:function(){return P(function(pe){return pe.includes(D)?pe:[].concat(_toConsumableArray(pe),[D])})},onMouseLeave:function(){return P(function(pe){return pe.filter(function(me){return me!==D})})}},React.createElement(Notify,_extends$2({},J,{ref:function(pe){ae>-1?b.current[D]=pe:delete b.current[D]},prefixCls:u,classNames:W,styles:q,className:classNames(B,E==null?void 0:E.notice),style:U,times:Y,key:he,eventKey:he,onNoticeClose:f,hovering:R&&x.length>0})))})},Notifications=reactExports.forwardRef(function(a,s){var c=a.prefixCls,u=c===void 0?"rc-notification":c,d=a.container,h=a.motion,p=a.maxCount,m=a.className,f=a.style,_=a.onAllRemoved,y=a.stack,E=a.renderNotifications,b=reactExports.useState([]),T=_slicedToArray(b,2),A=T[0],v=T[1],S=function(R){var N,F=A.find(function(L){return L.key===R});F==null||(N=F.onClose)===null||N===void 0||N.call(F),v(function(L){return L.filter(function(X){return X.key!==R})})};reactExports.useImperativeHandle(s,function(){return{open:function(R){v(function(N){var F=_toConsumableArray(N),L=F.findIndex(function(H){return H.key===R.key}),X=_objectSpread2({},R);if(L>=0){var V;X.times=(((V=N[L])===null||V===void 0?void 0:V.times)||0)+1,F[L]=X}else X.times=0,F.push(X);return p>0&&F.length>p&&(F=F.slice(-p)),F})},close:function(R){S(R)},destroy:function(){v([])}}});var O=reactExports.useState({}),I=_slicedToArray(O,2),x=I[0],P=I[1];reactExports.useEffect(function(){var R={};A.forEach(function(N){var F=N.placement,L=F===void 0?"topRight":F;L&&(R[L]=R[L]||[],R[L].push(N))}),Object.keys(x).forEach(function(N){R[N]=R[N]||[]}),P(R)},[A]);var w=function(R){P(function(N){var F=_objectSpread2({},N),L=F[R]||[];return L.length||delete F[R],F})},C=reactExports.useRef(!1);if(reactExports.useEffect(function(){Object.keys(x).length>0?C.current=!0:C.current&&(_==null||_(),C.current=!1)},[x]),!d)return null;var k=Object.keys(x);return reactDomExports.createPortal(reactExports.createElement(reactExports.Fragment,null,k.map(function(R){var N=x[R],F=reactExports.createElement(NoticeList,{key:R,configList:N,placement:R,prefixCls:u,className:m==null?void 0:m(R),style:f==null?void 0:f(R),motion:h,onNoticeClose:S,onAllNoticeRemoved:w,stack:y});return E?E(F,{prefixCls:u,key:R}):F})),d)}),_excluded$m=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],defaultGetContainer=function(){return document.body},uniqueKey=0;function mergeConfig(){for(var a={},s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return c.forEach(function(d){d&&Object.keys(d).forEach(function(h){var p=d[h];p!==void 0&&(a[h]=p)})}),a}function useNotification(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=a.getContainer,c=s===void 0?defaultGetContainer:s,u=a.motion,d=a.prefixCls,h=a.maxCount,p=a.className,m=a.style,f=a.onAllRemoved,_=a.stack,y=a.renderNotifications,E=_objectWithoutProperties(a,_excluded$m),b=reactExports.useState(),T=_slicedToArray(b,2),A=T[0],v=T[1],S=reactExports.useRef(),O=reactExports.createElement(Notifications,{container:A,ref:S,prefixCls:d,motion:u,maxCount:h,className:p,style:m,onAllRemoved:f,stack:_,renderNotifications:y}),I=reactExports.useState([]),x=_slicedToArray(I,2),P=x[0],w=x[1],C=reactExports.useMemo(function(){return{open:function(k){var R=mergeConfig(E,k);(R.key===null||R.key===void 0)&&(R.key="rc-notification-".concat(uniqueKey),uniqueKey+=1),w(function(N){return[].concat(_toConsumableArray(N),[{type:"open",config:R}])})},close:function(k){w(function(R){return[].concat(_toConsumableArray(R),[{type:"close",key:k}])})},destroy:function(){w(function(k){return[].concat(_toConsumableArray(k),[{type:"destroy"}])})}}},[]);return reactExports.useEffect(function(){v(c())}),reactExports.useEffect(function(){S.current&&P.length&&(P.forEach(function(k){switch(k.type){case"open":S.current.open(k.config);break;case"close":S.current.close(k.key);break;case"destroy":S.current.destroy();break}}),w(function(k){return k.filter(function(R){return!P.includes(R)})}))},[P]),[C,O]}var LoadingOutlined$2={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};const LoadingOutlinedSvg=LoadingOutlined$2;var LoadingOutlined=function(a,s){return reactExports.createElement(AntdIcon,_extends$2({},a,{ref:s,icon:LoadingOutlinedSvg}))},RefIcon$a=reactExports.forwardRef(LoadingOutlined);const LoadingOutlined$1=RefIcon$a,zIndexContext=React.createContext(void 0),zIndexContext$1=zIndexContext,CONTAINER_OFFSET=100,CONTAINER_OFFSET_MAX_COUNT=10,CONTAINER_MAX_OFFSET=CONTAINER_OFFSET*CONTAINER_OFFSET_MAX_COUNT,containerBaseZIndexOffset={Modal:CONTAINER_OFFSET,Drawer:CONTAINER_OFFSET,Popover:CONTAINER_OFFSET,Popconfirm:CONTAINER_OFFSET,Tooltip:CONTAINER_OFFSET,Tour:CONTAINER_OFFSET},consumerBaseZIndexOffset={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function isContainerType(a){return a in containerBaseZIndexOffset}function useZIndex(a,s){const[,c]=useToken(),u=React.useContext(zIndexContext$1),d=isContainerType(a);if(s!==void 0)return[s,s];let h=u??0;return d?(h+=(u?0:c.zIndexPopupBase)+containerBaseZIndexOffset[a],h=Math.min(h,c.zIndexPopupBase+CONTAINER_MAX_OFFSET)):h+=consumerBaseZIndexOffset[a],[u===void 0?s:h,h]}function usePatchElement(){const[a,s]=reactExports.useState([]),c=reactExports.useCallback(u=>(s(d=>[].concat(_toConsumableArray(d),[u])),()=>{s(d=>d.filter(h=>h!==u))}),[]);return[a,c]}function _regeneratorRuntime(){_regeneratorRuntime=function(){return s};var a,s={},c=Object.prototype,u=c.hasOwnProperty,d=Object.defineProperty||function(Q,Z,K){Q[Z]=K.value},h=typeof Symbol=="function"?Symbol:{},p=h.iterator||"@@iterator",m=h.asyncIterator||"@@asyncIterator",f=h.toStringTag||"@@toStringTag";function _(Q,Z,K){return Object.defineProperty(Q,Z,{value:K,enumerable:!0,configurable:!0,writable:!0}),Q[Z]}try{_({},"")}catch{_=function(Q,Z,K){return Q[Z]=K}}function y(Q,Z,K,se){var ne=Z&&Z.prototype instanceof O?Z:O,le=Object.create(ne.prototype),he=new H(se||[]);return d(le,"_invoke",{value:F(Q,K,he)}),le}function E(Q,Z,K){try{return{type:"normal",arg:Q.call(Z,K)}}catch(se){return{type:"throw",arg:se}}}s.wrap=y;var b="suspendedStart",T="suspendedYield",A="executing",v="completed",S={};function O(){}function I(){}function x(){}var P={};_(P,p,function(){return this});var w=Object.getPrototypeOf,C=w&&w(w(ee([])));C&&C!==c&&u.call(C,p)&&(P=C);var k=x.prototype=O.prototype=Object.create(P);function R(Q){["next","throw","return"].forEach(function(Z){_(Q,Z,function(K){return this._invoke(Z,K)})})}function N(Q,Z){function K(ne,le,he,Y){var D=E(Q[ne],Q,le);if(D.type!=="throw"){var G=D.arg,B=G.value;return B&&_typeof(B)=="object"&&u.call(B,"__await")?Z.resolve(B.__await).then(function(U){K("next",U,he,Y)},function(U){K("throw",U,he,Y)}):Z.resolve(B).then(function(U){G.value=U,he(G)},function(U){return K("throw",U,he,Y)})}Y(D.arg)}var se;d(this,"_invoke",{value:function(ne,le){function he(){return new Z(function(Y,D){K(ne,le,Y,D)})}return se=se?se.then(he,he):he()}})}function F(Q,Z,K){var se=b;return function(ne,le){if(se===A)throw Error("Generator is already running");if(se===v){if(ne==="throw")throw le;return{value:a,done:!0}}for(K.method=ne,K.arg=le;;){var he=K.delegate;if(he){var Y=L(he,K);if(Y){if(Y===S)continue;return Y}}if(K.method==="next")K.sent=K._sent=K.arg;else if(K.method==="throw"){if(se===b)throw se=v,K.arg;K.dispatchException(K.arg)}else K.method==="return"&&K.abrupt("return",K.arg);se=A;var D=E(Q,Z,K);if(D.type==="normal"){if(se=K.done?v:T,D.arg===S)continue;return{value:D.arg,done:K.done}}D.type==="throw"&&(se=v,K.method="throw",K.arg=D.arg)}}}function L(Q,Z){var K=Z.method,se=Q.iterator[K];if(se===a)return Z.delegate=null,K==="throw"&&Q.iterator.return&&(Z.method="return",Z.arg=a,L(Q,Z),Z.method==="throw")||K!=="return"&&(Z.method="throw",Z.arg=new TypeError("The iterator does not provide a '"+K+"' method")),S;var ne=E(se,Q.iterator,Z.arg);if(ne.type==="throw")return Z.method="throw",Z.arg=ne.arg,Z.delegate=null,S;var le=ne.arg;return le?le.done?(Z[Q.resultName]=le.value,Z.next=Q.nextLoc,Z.method!=="return"&&(Z.method="next",Z.arg=a),Z.delegate=null,S):le:(Z.method="throw",Z.arg=new TypeError("iterator result is not an object"),Z.delegate=null,S)}function X(Q){var Z={tryLoc:Q[0]};1 in Q&&(Z.catchLoc=Q[1]),2 in Q&&(Z.finallyLoc=Q[2],Z.afterLoc=Q[3]),this.tryEntries.push(Z)}function V(Q){var Z=Q.completion||{};Z.type="normal",delete Z.arg,Q.completion=Z}function H(Q){this.tryEntries=[{tryLoc:"root"}],Q.forEach(X,this),this.reset(!0)}function ee(Q){if(Q||Q===""){var Z=Q[p];if(Z)return Z.call(Q);if(typeof Q.next=="function")return Q;if(!isNaN(Q.length)){var K=-1,se=function ne(){for(;++K<Q.length;)if(u.call(Q,K))return ne.value=Q[K],ne.done=!1,ne;return ne.value=a,ne.done=!0,ne};return se.next=se}}throw new TypeError(_typeof(Q)+" is not iterable")}return I.prototype=x,d(k,"constructor",{value:x,configurable:!0}),d(x,"constructor",{value:I,configurable:!0}),I.displayName=_(x,f,"GeneratorFunction"),s.isGeneratorFunction=function(Q){var Z=typeof Q=="function"&&Q.constructor;return!!Z&&(Z===I||(Z.displayName||Z.name)==="GeneratorFunction")},s.mark=function(Q){return Object.setPrototypeOf?Object.setPrototypeOf(Q,x):(Q.__proto__=x,_(Q,f,"GeneratorFunction")),Q.prototype=Object.create(k),Q},s.awrap=function(Q){return{__await:Q}},R(N.prototype),_(N.prototype,m,function(){return this}),s.AsyncIterator=N,s.async=function(Q,Z,K,se,ne){ne===void 0&&(ne=Promise);var le=new N(y(Q,Z,K,se),ne);return s.isGeneratorFunction(Z)?le:le.next().then(function(he){return he.done?he.value:le.next()})},R(k),_(k,f,"Generator"),_(k,p,function(){return this}),_(k,"toString",function(){return"[object Generator]"}),s.keys=function(Q){var Z=Object(Q),K=[];for(var se in Z)K.push(se);return K.reverse(),function ne(){for(;K.length;){var le=K.pop();if(le in Z)return ne.value=le,ne.done=!1,ne}return ne.done=!0,ne}},s.values=ee,H.prototype={constructor:H,reset:function(Q){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(V),!Q)for(var Z in this)Z.charAt(0)==="t"&&u.call(this,Z)&&!isNaN(+Z.slice(1))&&(this[Z]=a)},stop:function(){this.done=!0;var Q=this.tryEntries[0].completion;if(Q.type==="throw")throw Q.arg;return this.rval},dispatchException:function(Q){if(this.done)throw Q;var Z=this;function K(D,G){return le.type="throw",le.arg=Q,Z.next=D,G&&(Z.method="next",Z.arg=a),!!G}for(var se=this.tryEntries.length-1;se>=0;--se){var ne=this.tryEntries[se],le=ne.completion;if(ne.tryLoc==="root")return K("end");if(ne.tryLoc<=this.prev){var he=u.call(ne,"catchLoc"),Y=u.call(ne,"finallyLoc");if(he&&Y){if(this.prev<ne.catchLoc)return K(ne.catchLoc,!0);if(this.prev<ne.finallyLoc)return K(ne.finallyLoc)}else if(he){if(this.prev<ne.catchLoc)return K(ne.catchLoc,!0)}else{if(!Y)throw Error("try statement without catch or finally");if(this.prev<ne.finallyLoc)return K(ne.finallyLoc)}}}},abrupt:function(Q,Z){for(var K=this.tryEntries.length-1;K>=0;--K){var se=this.tryEntries[K];if(se.tryLoc<=this.prev&&u.call(se,"finallyLoc")&&this.prev<se.finallyLoc){var ne=se;break}}ne&&(Q==="break"||Q==="continue")&&ne.tryLoc<=Z&&Z<=ne.finallyLoc&&(ne=null);var le=ne?ne.completion:{};return le.type=Q,le.arg=Z,ne?(this.method="next",this.next=ne.finallyLoc,S):this.complete(le)},complete:function(Q,Z){if(Q.type==="throw")throw Q.arg;return Q.type==="break"||Q.type==="continue"?this.next=Q.arg:Q.type==="return"?(this.rval=this.arg=Q.arg,this.method="return",this.next="end"):Q.type==="normal"&&Z&&(this.next=Z),S},finish:function(Q){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var K=this.tryEntries[Z];if(K.finallyLoc===Q)return this.complete(K.completion,K.afterLoc),V(K),S}},catch:function(Q){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var K=this.tryEntries[Z];if(K.tryLoc===Q){var se=K.completion;if(se.type==="throw"){var ne=se.arg;V(K)}return ne}}throw Error("illegal catch attempt")},delegateYield:function(Q,Z,K){return this.delegate={iterator:ee(Q),resultName:Z,nextLoc:K},this.method==="next"&&(this.arg=a),S}},s}function asyncGeneratorStep(a,s,c,u,d,h,p){try{var m=a[h](p),f=m.value}catch(_){c(_);return}m.done?s(f):Promise.resolve(f).then(u,d)}function _asyncToGenerator(a){return function(){var s=this,c=arguments;return new Promise(function(u,d){var h=a.apply(s,c);function p(f){asyncGeneratorStep(h,u,d,p,m,"next",f)}function m(f){asyncGeneratorStep(h,u,d,p,m,"throw",f)}p(void 0)})}}var fullClone=_objectSpread2({},ReactDOM),version=fullClone.version,reactRender=fullClone.render,unmountComponentAtNode=fullClone.unmountComponentAtNode,createRoot;try{var mainVersion=Number((version||"").split(".")[0]);mainVersion>=18&&(createRoot=fullClone.createRoot)}catch{}function toggleWarning(a){var s=fullClone.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;s&&_typeof(s)==="object"&&(s.usingClientEntryPoint=a)}var MARK="__rc_react_root__";function modernRender(a,s){toggleWarning(!0);var c=s[MARK]||createRoot(s);toggleWarning(!1),c.render(a),s[MARK]=c}function legacyRender(a,s){reactRender(a,s)}function render$2(a,s){if(createRoot){modernRender(a,s);return}legacyRender(a,s)}function modernUnmount(a){return _modernUnmount.apply(this,arguments)}function _modernUnmount(){return _modernUnmount=_asyncToGenerator(_regeneratorRuntime().mark(function a(s){return _regeneratorRuntime().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Promise.resolve().then(function(){var u;(u=s[MARK])===null||u===void 0||u.unmount(),delete s[MARK]}));case 1:case"end":return c.stop()}},a)})),_modernUnmount.apply(this,arguments)}function legacyUnmount(a){unmountComponentAtNode(a)}function unmount(a){return _unmount.apply(this,arguments)}function _unmount(){return _unmount=_asyncToGenerator(_regeneratorRuntime().mark(function a(s){return _regeneratorRuntime().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(createRoot===void 0){c.next=2;break}return c.abrupt("return",modernUnmount(s));case 2:legacyUnmount(s);case 3:case"end":return c.stop()}},a)})),_unmount.apply(this,arguments)}const getCollapsedHeight=()=>({height:0,opacity:0}),getRealHeight=a=>{const{scrollHeight:s}=a;return{height:s,opacity:1}},getCurrentHeight=a=>({height:a?a.offsetHeight:0}),skipOpacityTransition=(a,s)=>(s==null?void 0:s.deadline)===!0||s.propertyName==="height",initCollapseMotion=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:getCollapsedHeight,onEnterStart:getCollapsedHeight,onAppearActive:getRealHeight,onEnterActive:getRealHeight,onLeaveStart:getCurrentHeight,onLeaveActive:getCollapsedHeight,onAppearEnd:skipOpacityTransition,onEnterEnd:skipOpacityTransition,onLeaveEnd:skipOpacityTransition,motionDeadline:500}},getTransitionName=(a,s,c)=>c!==void 0?c:`${a}-${s}`,isVisible=function(a){if(!a)return!1;if(a instanceof Element){if(a.offsetParent)return!0;if(a.getBBox){var s=a.getBBox(),c=s.width,u=s.height;if(c||u)return!0}if(a.getBoundingClientRect){var d=a.getBoundingClientRect(),h=d.width,p=d.height;if(h||p)return!0}}return!1},genWaveStyle=a=>{const{componentCls:s,colorPrimary:c}=a;return{[s]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${c})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${a.motionEaseOutCirc}`,`opacity 2s ${a.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow 0.3s ${a.motionEaseInOut}`,`opacity 0.35s ${a.motionEaseInOut}`].join(",")}}}}},useStyle$d=genComponentStyleHook("Wave",a=>[genWaveStyle(a)]),TARGET_CLS="ant-wave-target";function isNotGrey(a){const s=(a||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return s&&s[1]&&s[2]&&s[3]?!(s[1]===s[2]&&s[2]===s[3]):!0}function isValidWaveColor(a){return a&&a!=="#fff"&&a!=="#ffffff"&&a!=="rgb(255, 255, 255)"&&a!=="rgba(255, 255, 255, 1)"&&isNotGrey(a)&&!/rgba\((?:\d*, ){3}0\)/.test(a)&&a!=="transparent"}function getTargetWaveColor(a){const{borderTopColor:s,borderColor:c,backgroundColor:u}=getComputedStyle(a);return isValidWaveColor(s)?s:isValidWaveColor(c)?c:isValidWaveColor(u)?u:null}function validateNum(a){return Number.isNaN(a)?0:a}const WaveEffect=a=>{const{className:s,target:c,component:u}=a,d=reactExports.useRef(null),[h,p]=reactExports.useState(null),[m,f]=reactExports.useState([]),[_,y]=reactExports.useState(0),[E,b]=reactExports.useState(0),[T,A]=reactExports.useState(0),[v,S]=reactExports.useState(0),[O,I]=reactExports.useState(!1),x={left:_,top:E,width:T,height:v,borderRadius:m.map(C=>`${C}px`).join(" ")};h&&(x["--wave-color"]=h);function P(){const C=getComputedStyle(c);p(getTargetWaveColor(c));const k=C.position==="static",{borderLeftWidth:R,borderTopWidth:N}=C;y(k?c.offsetLeft:validateNum(-parseFloat(R))),b(k?c.offsetTop:validateNum(-parseFloat(N))),A(c.offsetWidth),S(c.offsetHeight);const{borderTopLeftRadius:F,borderTopRightRadius:L,borderBottomLeftRadius:X,borderBottomRightRadius:V}=C;f([F,L,V,X].map(H=>validateNum(parseFloat(H))))}if(reactExports.useEffect(()=>{if(c){const C=wrapperRaf(()=>{P(),I(!0)});let k;return typeof ResizeObserver<"u"&&(k=new ResizeObserver(P),k.observe(c)),()=>{wrapperRaf.cancel(C),k==null||k.disconnect()}}},[]),!O)return null;const w=(u==="Checkbox"||u==="Radio")&&(c==null?void 0:c.classList.contains(TARGET_CLS));return reactExports.createElement(CSSMotion,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(C,k)=>{var R;if(k.deadline||k.propertyName==="opacity"){const N=(R=d.current)===null||R===void 0?void 0:R.parentElement;unmount(N).then(()=>{N==null||N.remove()})}return!1}},C=>{let{className:k}=C;return reactExports.createElement("div",{ref:d,className:classNames(s,{"wave-quick":w},k),style:x})})},showWaveEffect=(a,s)=>{var c;const{component:u}=s;if(u==="Checkbox"&&!(!((c=a.querySelector("input"))===null||c===void 0)&&c.checked))return;const d=document.createElement("div");d.style.position="absolute",d.style.left="0px",d.style.top="0px",a==null||a.insertBefore(d,a==null?void 0:a.firstChild),render$2(reactExports.createElement(WaveEffect,Object.assign({},s,{target:a})),d)},showWaveEffect$1=showWaveEffect,useWave=(a,s,c)=>{const{wave:u}=reactExports.useContext(ConfigContext),[,d,h]=useToken(),p=useEvent(f=>{const _=a.current;if(u!=null&&u.disabled||!_)return;const y=_.querySelector(`.${TARGET_CLS}`)||_,{showEffect:E}=u||{};(E||showWaveEffect$1)(y,{className:s,token:d,component:c,event:f,hashId:h})}),m=reactExports.useRef();return f=>{wrapperRaf.cancel(m.current),m.current=wrapperRaf(()=>{p(f)})}},useWave$1=useWave,Wave=a=>{const{children:s,disabled:c,component:u}=a,{getPrefixCls:d}=reactExports.useContext(ConfigContext),h=reactExports.useRef(null),p=d("wave"),[,m]=useStyle$d(p),f=useWave$1(h,classNames(p,m),u);if(React.useEffect(()=>{const y=h.current;if(!y||y.nodeType!==1||c)return;const E=b=>{!isVisible(b.target)||!y.getAttribute||y.getAttribute("disabled")||y.disabled||y.className.includes("disabled")||y.className.includes("-leave")||f(b)};return y.addEventListener("click",E,!0),()=>{y.removeEventListener("click",E,!0)}},[c]),!React.isValidElement(s))return s??null;const _=supportRef(s)?composeRef(s.ref,h):h;return cloneElement(s,{ref:_})},Wave$1=Wave,useSize=a=>{const s=React.useContext(SizeContext);return React.useMemo(()=>a?typeof a=="string"?a??s:a instanceof Function?a(s):s:s,[a,s])},genSpaceCompactStyle=a=>{const{componentCls:s}=a;return{[s]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}},genSpaceCompactStyle$1=genSpaceCompactStyle,genSpaceStyle=a=>{const{componentCls:s,antCls:c}=a;return{[s]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${s}-item:empty`]:{display:"none"},[`${s}-item > ${c}-badge-not-a-wrapper:only-child`]:{display:"block"}}}},genSpaceGapStyle=a=>{const{componentCls:s}=a;return{[s]:{"&-gap-row-small":{rowGap:a.spaceGapSmallSize},"&-gap-row-middle":{rowGap:a.spaceGapMiddleSize},"&-gap-row-large":{rowGap:a.spaceGapLargeSize},"&-gap-col-small":{columnGap:a.spaceGapSmallSize},"&-gap-col-middle":{columnGap:a.spaceGapMiddleSize},"&-gap-col-large":{columnGap:a.spaceGapLargeSize}}}},useStyle$c=genStyleHooks("Space",a=>{const s=merge$1(a,{spaceGapSmallSize:a.paddingXS,spaceGapMiddleSize:a.padding,spaceGapLargeSize:a.paddingLG});return[genSpaceStyle(s),genSpaceGapStyle(s),genSpaceCompactStyle$1(s)]},()=>({}),{resetStyle:!1});var __rest$q=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};const SpaceCompactItemContext=reactExports.createContext(null),useCompactItemContext=(a,s)=>{const c=reactExports.useContext(SpaceCompactItemContext),u=reactExports.useMemo(()=>{if(!c)return"";const{compactDirection:d,isFirstItem:h,isLastItem:p}=c,m=d==="vertical"?"-vertical-":"-";return classNames(`${a}-compact${m}item`,{[`${a}-compact${m}first-item`]:h,[`${a}-compact${m}last-item`]:p,[`${a}-compact${m}item-rtl`]:s==="rtl"})},[a,s,c]);return{compactSize:c==null?void 0:c.compactSize,compactDirection:c==null?void 0:c.compactDirection,compactItemClassnames:u}},NoCompactStyle=a=>{let{children:s}=a;return reactExports.createElement(SpaceCompactItemContext.Provider,{value:null},s)},CompactItem=a=>{var{children:s}=a,c=__rest$q(a,["children"]);return reactExports.createElement(SpaceCompactItemContext.Provider,{value:c},s)},Compact=a=>{const{getPrefixCls:s,direction:c}=reactExports.useContext(ConfigContext),{size:u,direction:d,block:h,prefixCls:p,className:m,rootClassName:f,children:_}=a,y=__rest$q(a,["size","direction","block","prefixCls","className","rootClassName","children"]),E=useSize(x=>u??x),b=s("space-compact",p),[T,A]=useStyle$c(b),v=classNames(b,A,{[`${b}-rtl`]:c==="rtl",[`${b}-block`]:h,[`${b}-vertical`]:d==="vertical"},m,f),S=reactExports.useContext(SpaceCompactItemContext),O=toArray$6(_),I=reactExports.useMemo(()=>O.map((x,P)=>{const w=x&&x.key||`${b}-item-${P}`;return reactExports.createElement(CompactItem,{key:w,compactSize:E,compactDirection:d,isFirstItem:P===0&&(!S||(S==null?void 0:S.isFirstItem)),isLastItem:P===O.length-1&&(!S||(S==null?void 0:S.isLastItem))},x)}),[u,O,S]);return O.length===0?null:T(reactExports.createElement("div",Object.assign({className:v},y),I))};var __rest$p=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};const GroupSizeContext=reactExports.createContext(void 0),ButtonGroup=a=>{const{getPrefixCls:s,direction:c}=reactExports.useContext(ConfigContext),{prefixCls:u,size:d,className:h}=a,p=__rest$p(a,["prefixCls","size","className"]),m=s("btn-group",u),[,,f]=useToken();let _="";switch(d){case"large":_="lg";break;case"small":_="sm";break}const y=classNames(m,{[`${m}-${_}`]:_,[`${m}-rtl`]:c==="rtl"},h,f);return reactExports.createElement(GroupSizeContext.Provider,{value:d},reactExports.createElement("div",Object.assign({},p,{className:y})))},Group$2=ButtonGroup,rxTwoCNChar=/^[\u4e00-\u9fa5]{2}$/,isTwoCNChar=rxTwoCNChar.test.bind(rxTwoCNChar);function convertLegacyProps(a){return a==="danger"?{danger:!0}:{type:a}}function isString(a){return typeof a=="string"}function isUnBorderedButtonType(a){return a==="text"||a==="link"}function splitCNCharsBySpace(a,s){if(a==null)return;const c=s?" ":"";return typeof a!="string"&&typeof a!="number"&&isString(a.type)&&isTwoCNChar(a.props.children)?cloneElement(a,{children:a.props.children.split("").join(c)}):isString(a)?isTwoCNChar(a)?React.createElement("span",null,a.split("").join(c)):React.createElement("span",null,a):isFragment(a)?React.createElement("span",null,a):a}function spaceChildren(a,s){let c=!1;const u=[];return React.Children.forEach(a,d=>{const h=typeof d,p=h==="string"||h==="number";if(c&&p){const m=u.length-1,f=u[m];u[m]=`${f}${d}`}else u.push(d);c=p}),React.Children.map(u,d=>splitCNCharsBySpace(d,s))}const IconWrapper=reactExports.forwardRef((a,s)=>{const{className:c,style:u,children:d,prefixCls:h}=a,p=classNames(`${h}-icon`,c);return React.createElement("span",{ref:s,className:p,style:u},d)}),IconWrapper$1=IconWrapper,InnerLoadingIcon=reactExports.forwardRef((a,s)=>{let{prefixCls:c,className:u,style:d,iconClassName:h}=a;const p=classNames(`${c}-loading-icon`,u);return React.createElement(IconWrapper$1,{prefixCls:c,className:p,style:d,ref:s},React.createElement(LoadingOutlined$1,{className:h}))}),getCollapsedWidth=()=>({width:0,opacity:0,transform:"scale(0)"}),getRealWidth=a=>({width:a.scrollWidth,opacity:1,transform:"scale(1)"}),LoadingIcon=a=>{const{prefixCls:s,loading:c,existIcon:u,className:d,style:h}=a,p=!!c;return u?React.createElement(InnerLoadingIcon,{prefixCls:s,className:d,style:h}):React.createElement(CSSMotion,{visible:p,motionName:`${s}-loading-icon-motion`,motionLeave:p,removeOnLeave:!0,onAppearStart:getCollapsedWidth,onAppearActive:getRealWidth,onEnterStart:getCollapsedWidth,onEnterActive:getRealWidth,onLeaveStart:getRealWidth,onLeaveActive:getCollapsedWidth},(m,f)=>{let{className:_,style:y}=m;return React.createElement(InnerLoadingIcon,{prefixCls:s,className:d,style:Object.assign(Object.assign({},h),y),ref:f,iconClassName:_})})},LoadingIcon$1=LoadingIcon,genButtonBorderStyle=(a,s)=>({[`> span, > ${a}`]:{"&:not(:last-child)":{[`&, & > ${a}`]:{"&:not(:disabled)":{borderInlineEndColor:s}}},"&:not(:first-child)":{[`&, & > ${a}`]:{"&:not(:disabled)":{borderInlineStartColor:s}}}}}),genGroupStyle$1=a=>{const{componentCls:s,fontSize:c,lineWidth:u,groupBorderColor:d,colorErrorHover:h}=a;return{[`${s}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${s}`]:{"&:not(:last-child)":{[`&, & > ${s}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:a.calc(u).mul(-1).equal(),[`&, & > ${s}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[s]:{position:"relative",zIndex:1,"&:hover,\n          &:focus,\n          &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${s}-icon-only`]:{fontSize:c}},genButtonBorderStyle(`${s}-primary`,d),genButtonBorderStyle(`${s}-danger`,h)]}},genGroupStyle$2=genGroupStyle$1,prepareToken$3=a=>{const{paddingInline:s,onlyIconSize:c,paddingBlock:u}=a;return merge$1(a,{buttonPaddingHorizontal:s,buttonPaddingVertical:u,buttonIconOnlyFontSize:c})},prepareComponentToken$a=a=>{var s,c,u,d,h,p;const m=(s=a.contentFontSize)!==null&&s!==void 0?s:a.fontSize,f=(c=a.contentFontSizeSM)!==null&&c!==void 0?c:a.fontSize,_=(u=a.contentFontSizeLG)!==null&&u!==void 0?u:a.fontSizeLG,y=(d=a.contentLineHeight)!==null&&d!==void 0?d:getLineHeight(m),E=(h=a.contentLineHeightSM)!==null&&h!==void 0?h:getLineHeight(f),b=(p=a.contentLineHeightLG)!==null&&p!==void 0?p:getLineHeight(_);return{fontWeight:400,defaultShadow:`0 ${a.controlOutlineWidth}px 0 ${a.controlTmpOutline}`,primaryShadow:`0 ${a.controlOutlineWidth}px 0 ${a.controlOutline}`,dangerShadow:`0 ${a.controlOutlineWidth}px 0 ${a.colorErrorOutline}`,primaryColor:a.colorTextLightSolid,dangerColor:a.colorTextLightSolid,borderColorDisabled:a.colorBorder,defaultGhostColor:a.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:a.colorBgContainer,paddingInline:a.paddingContentHorizontal-a.lineWidth,paddingInlineLG:a.paddingContentHorizontal-a.lineWidth,paddingInlineSM:8-a.lineWidth,onlyIconSize:a.fontSizeLG,onlyIconSizeSM:a.fontSizeLG-2,onlyIconSizeLG:a.fontSizeLG+2,groupBorderColor:a.colorPrimaryHover,linkHoverBg:"transparent",textHoverBg:a.colorBgTextHover,defaultColor:a.colorText,defaultBg:a.colorBgContainer,defaultBorderColor:a.colorBorder,defaultBorderColorDisabled:a.colorBorder,defaultHoverBg:a.colorBgContainer,defaultHoverColor:a.colorPrimaryHover,defaultHoverBorderColor:a.colorPrimaryHover,defaultActiveBg:a.colorBgContainer,defaultActiveColor:a.colorPrimaryActive,defaultActiveBorderColor:a.colorPrimaryActive,contentFontSize:m,contentFontSizeSM:f,contentFontSizeLG:_,contentLineHeight:y,contentLineHeightSM:E,contentLineHeightLG:b,paddingBlock:Math.max((a.controlHeight-m*y)/2-a.lineWidth,0),paddingBlockSM:Math.max((a.controlHeightSM-f*E)/2-a.lineWidth,0),paddingBlockLG:Math.max((a.controlHeightLG-_*b)/2-a.lineWidth,0)}},genSharedButtonStyle=a=>{const{componentCls:s,iconCls:c,fontWeight:u}=a;return{[s]:{outline:"none",position:"relative",display:"inline-block",fontWeight:u,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${unit(a.lineWidth)} ${a.lineType} transparent`,cursor:"pointer",transition:`all ${a.motionDurationMid} ${a.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",color:a.colorText,"&:disabled > *":{pointerEvents:"none"},"> span":{display:"inline-block"},[`${s}-icon`]:{lineHeight:0},[`> ${c} + span, > span + ${c}`]:{marginInlineStart:a.marginXS},[`&:not(${s}-icon-only) > ${s}-icon`]:{[`&${s}-loading-icon, &:not(:last-child)`]:{marginInlineEnd:a.marginXS}},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},genFocusStyle(a)),[`&${s}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${s}-two-chinese-chars > *:not(${c})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},[`&-icon-only${s}-compact-item`]:{flex:"none"}}}},genHoverActiveButtonStyle=(a,s,c)=>({[`&:not(:disabled):not(${a}-disabled)`]:{"&:hover":s,"&:active":c}}),genCircleButtonStyle=a=>({minWidth:a.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),genRoundButtonStyle=a=>({borderRadius:a.controlHeight,paddingInlineStart:a.calc(a.controlHeight).div(2).equal(),paddingInlineEnd:a.calc(a.controlHeight).div(2).equal()}),genDisabledStyle$1=a=>({cursor:"not-allowed",borderColor:a.borderColorDisabled,color:a.colorTextDisabled,background:a.colorBgContainerDisabled,boxShadow:"none"}),genGhostButtonStyle=(a,s,c,u,d,h,p,m)=>({[`&${a}-background-ghost`]:Object.assign(Object.assign({color:c||void 0,background:s,borderColor:u||void 0,boxShadow:"none"},genHoverActiveButtonStyle(a,Object.assign({background:s},p),Object.assign({background:s},m))),{"&:disabled":{cursor:"not-allowed",color:d||void 0,borderColor:h||void 0}})}),genSolidDisabledButtonStyle=a=>({[`&:disabled, &${a.componentCls}-disabled`]:Object.assign({},genDisabledStyle$1(a))}),genSolidButtonStyle=a=>Object.assign({},genSolidDisabledButtonStyle(a)),genPureDisabledButtonStyle=a=>({[`&:disabled, &${a.componentCls}-disabled`]:{cursor:"not-allowed",color:a.colorTextDisabled}}),genDefaultButtonStyle=a=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},genSolidButtonStyle(a)),{background:a.defaultBg,borderColor:a.defaultBorderColor,color:a.defaultColor,boxShadow:a.defaultShadow}),genHoverActiveButtonStyle(a.componentCls,{color:a.defaultHoverColor,borderColor:a.defaultHoverBorderColor,background:a.defaultHoverBg},{color:a.defaultActiveColor,borderColor:a.defaultActiveBorderColor,background:a.defaultActiveBg})),genGhostButtonStyle(a.componentCls,a.ghostBg,a.defaultGhostColor,a.defaultGhostBorderColor,a.colorTextDisabled,a.colorBorder)),{[`&${a.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({color:a.colorError,borderColor:a.colorError},genHoverActiveButtonStyle(a.componentCls,{color:a.colorErrorHover,borderColor:a.colorErrorBorderHover},{color:a.colorErrorActive,borderColor:a.colorErrorActive})),genGhostButtonStyle(a.componentCls,a.ghostBg,a.colorError,a.colorError,a.colorTextDisabled,a.colorBorder)),genSolidDisabledButtonStyle(a))}),genPrimaryButtonStyle=a=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},genSolidButtonStyle(a)),{color:a.primaryColor,background:a.colorPrimary,boxShadow:a.primaryShadow}),genHoverActiveButtonStyle(a.componentCls,{color:a.colorTextLightSolid,background:a.colorPrimaryHover},{color:a.colorTextLightSolid,background:a.colorPrimaryActive})),genGhostButtonStyle(a.componentCls,a.ghostBg,a.colorPrimary,a.colorPrimary,a.colorTextDisabled,a.colorBorder,{color:a.colorPrimaryHover,borderColor:a.colorPrimaryHover},{color:a.colorPrimaryActive,borderColor:a.colorPrimaryActive})),{[`&${a.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({background:a.colorError,boxShadow:a.dangerShadow,color:a.dangerColor},genHoverActiveButtonStyle(a.componentCls,{background:a.colorErrorHover},{background:a.colorErrorActive})),genGhostButtonStyle(a.componentCls,a.ghostBg,a.colorError,a.colorError,a.colorTextDisabled,a.colorBorder,{color:a.colorErrorHover,borderColor:a.colorErrorHover},{color:a.colorErrorActive,borderColor:a.colorErrorActive})),genSolidDisabledButtonStyle(a))}),genDashedButtonStyle=a=>Object.assign(Object.assign({},genDefaultButtonStyle(a)),{borderStyle:"dashed"}),genLinkButtonStyle=a=>Object.assign(Object.assign(Object.assign({color:a.colorLink},genHoverActiveButtonStyle(a.componentCls,{color:a.colorLinkHover,background:a.linkHoverBg},{color:a.colorLinkActive})),genPureDisabledButtonStyle(a)),{[`&${a.componentCls}-dangerous`]:Object.assign(Object.assign({color:a.colorError},genHoverActiveButtonStyle(a.componentCls,{color:a.colorErrorHover},{color:a.colorErrorActive})),genPureDisabledButtonStyle(a))}),genTextButtonStyle=a=>Object.assign(Object.assign(Object.assign({},genHoverActiveButtonStyle(a.componentCls,{color:a.colorText,background:a.textHoverBg},{color:a.colorText,background:a.colorBgTextActive})),genPureDisabledButtonStyle(a)),{[`&${a.componentCls}-dangerous`]:Object.assign(Object.assign({color:a.colorError},genPureDisabledButtonStyle(a)),genHoverActiveButtonStyle(a.componentCls,{color:a.colorErrorHover,background:a.colorErrorBg},{color:a.colorErrorHover,background:a.colorErrorBg}))}),genTypeButtonStyle=a=>{const{componentCls:s}=a;return{[`${s}-default`]:genDefaultButtonStyle(a),[`${s}-primary`]:genPrimaryButtonStyle(a),[`${s}-dashed`]:genDashedButtonStyle(a),[`${s}-link`]:genLinkButtonStyle(a),[`${s}-text`]:genTextButtonStyle(a),[`${s}-ghost`]:genGhostButtonStyle(a.componentCls,a.ghostBg,a.colorBgContainer,a.colorBgContainer,a.colorTextDisabled,a.colorBorder)}},genButtonStyle=function(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:c,controlHeight:u,fontSize:d,lineHeight:h,borderRadius:p,buttonPaddingHorizontal:m,iconCls:f,buttonPaddingVertical:_}=a,y=`${c}-icon-only`;return[{[`${s}`]:{fontSize:d,lineHeight:h,height:u,padding:`${unit(_)} ${unit(m)}`,borderRadius:p,[`&${y}`]:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:u,paddingInlineStart:0,paddingInlineEnd:0,[`&${c}-round`]:{width:"auto"},[f]:{fontSize:a.buttonIconOnlyFontSize}},[`&${c}-loading`]:{opacity:a.opacityLoading,cursor:"default"},[`${c}-loading-icon`]:{transition:`width ${a.motionDurationSlow} ${a.motionEaseInOut}, opacity ${a.motionDurationSlow} ${a.motionEaseInOut}`}}},{[`${c}${c}-circle${s}`]:genCircleButtonStyle(a)},{[`${c}${c}-round${s}`]:genRoundButtonStyle(a)}]},genSizeBaseButtonStyle=a=>{const s=merge$1(a,{fontSize:a.contentFontSize,lineHeight:a.contentLineHeight});return genButtonStyle(s,a.componentCls)},genSizeSmallButtonStyle=a=>{const s=merge$1(a,{controlHeight:a.controlHeightSM,fontSize:a.contentFontSizeSM,lineHeight:a.contentLineHeightSM,padding:a.paddingXS,buttonPaddingHorizontal:a.paddingInlineSM,buttonPaddingVertical:a.paddingBlockSM,borderRadius:a.borderRadiusSM,buttonIconOnlyFontSize:a.onlyIconSizeSM});return genButtonStyle(s,`${a.componentCls}-sm`)},genSizeLargeButtonStyle=a=>{const s=merge$1(a,{controlHeight:a.controlHeightLG,fontSize:a.contentFontSizeLG,lineHeight:a.contentLineHeightLG,buttonPaddingHorizontal:a.paddingInlineLG,buttonPaddingVertical:a.paddingBlockLG,borderRadius:a.borderRadiusLG,buttonIconOnlyFontSize:a.onlyIconSizeLG});return genButtonStyle(s,`${a.componentCls}-lg`)},genBlockButtonStyle=a=>{const{componentCls:s}=a;return{[s]:{[`&${s}-block`]:{width:"100%"}}}},useStyle$b=genStyleHooks("Button",a=>{const s=prepareToken$3(a);return[genSharedButtonStyle(s),genSizeBaseButtonStyle(s),genSizeSmallButtonStyle(s),genSizeLargeButtonStyle(s),genBlockButtonStyle(s),genTypeButtonStyle(s),genGroupStyle$2(s)]},prepareComponentToken$a,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function compactItemBorder(a,s,c){const{focusElCls:u,focus:d,borderElCls:h}=c,p=h?"> *":"",m=["hover",d?"focus":null,"active"].filter(Boolean).map(f=>`&:${f} ${p}`).join(",");return{[`&-item:not(${s}-last-item)`]:{marginInlineEnd:a.calc(a.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[m]:{zIndex:2}},u?{[`&${u}`]:{zIndex:2}}:{}),{[`&[disabled] ${p}`]:{zIndex:0}})}}function compactItemBorderRadius(a,s,c){const{borderElCls:u}=c,d=u?`> ${u}`:"";return{[`&-item:not(${s}-first-item):not(${s}-last-item) ${d}`]:{borderRadius:0},[`&-item:not(${s}-last-item)${s}-first-item`]:{[`& ${d}, &${a}-sm ${d}, &${a}-lg ${d}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${s}-first-item)${s}-last-item`]:{[`& ${d}, &${a}-sm ${d}, &${a}-lg ${d}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function genCompactItemStyle(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:c}=a,u=`${c}-compact`;return{[u]:Object.assign(Object.assign({},compactItemBorder(a,u,s)),compactItemBorderRadius(c,u,s))}}function compactItemVerticalBorder(a,s){return{[`&-item:not(${s}-last-item)`]:{marginBottom:a.calc(a.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function compactItemBorderVerticalRadius(a,s){return{[`&-item:not(${s}-first-item):not(${s}-last-item)`]:{borderRadius:0},[`&-item${s}-first-item:not(${s}-last-item)`]:{[`&, &${a}-sm, &${a}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${s}-last-item:not(${s}-first-item)`]:{[`&, &${a}-sm, &${a}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function genCompactItemVerticalStyle(a){const s=`${a.componentCls}-compact-vertical`;return{[s]:Object.assign(Object.assign({},compactItemVerticalBorder(a,s)),compactItemBorderVerticalRadius(a.componentCls,s))}}const genButtonCompactStyle=a=>{const{componentCls:s,calc:c}=a;return{[s]:{[`&-compact-item${s}-primary`]:{[`&:not([disabled]) + ${s}-compact-item${s}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:c(a.lineWidth).mul(-1).equal(),insetInlineStart:c(a.lineWidth).mul(-1).equal(),display:"inline-block",width:a.lineWidth,height:`calc(100% + ${unit(a.lineWidth)} * 2)`,backgroundColor:a.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${s}-primary`]:{[`&:not([disabled]) + ${s}-compact-vertical-item${s}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:c(a.lineWidth).mul(-1).equal(),insetInlineStart:c(a.lineWidth).mul(-1).equal(),display:"inline-block",width:`calc(100% + ${unit(a.lineWidth)} * 2)`,height:a.lineWidth,backgroundColor:a.colorPrimaryHover,content:'""'}}}}}}},CompactCmp=genSubStyleComponent(["Button","compact"],a=>{const s=prepareToken$3(a);return[genCompactItemStyle(s),genCompactItemVerticalStyle(s),genButtonCompactStyle(s)]},prepareComponentToken$a);var __rest$o=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};function getLoadingConfig(a){if(typeof a=="object"&&a){let s=a==null?void 0:a.delay;return s=!Number.isNaN(s)&&typeof s=="number"?s:0,{loading:s<=0,delay:s}}return{loading:!!a,delay:0}}const InternalButton=(a,s)=>{var c,u;const{loading:d=!1,prefixCls:h,type:p,danger:m,shape:f="default",size:_,styles:y,disabled:E,className:b,rootClassName:T,children:A,icon:v,ghost:S=!1,block:O=!1,htmlType:I="button",classNames:x,style:P={}}=a,w=__rest$o(a,["loading","prefixCls","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","ghost","block","htmlType","classNames","style"]),C=p||"default",{getPrefixCls:k,autoInsertSpaceInButton:R,direction:N,button:F}=reactExports.useContext(ConfigContext),L=k("btn",h),[X,V,H]=useStyle$b(L),ee=reactExports.useContext(DisabledContext),Q=E??ee,Z=reactExports.useContext(GroupSizeContext),K=reactExports.useMemo(()=>getLoadingConfig(d),[d]),[se,ne]=reactExports.useState(K.loading),[le,he]=reactExports.useState(!1),Y=composeRef(s,reactExports.createRef()),D=reactExports.Children.count(A)===1&&!v&&!isUnBorderedButtonType(C);reactExports.useEffect(()=>{let ze=null;K.delay>0?ze=setTimeout(()=>{ze=null,ne(!0)},K.delay):ne(K.loading);function Se(){ze&&(clearTimeout(ze),ze=null)}return Se},[K]),reactExports.useEffect(()=>{if(!Y||!Y.current||R===!1)return;const ze=Y.current.textContent;D&&isTwoCNChar(ze)?le||he(!0):le&&he(!1)},[Y]);const G=ze=>{const{onClick:Se}=a;if(se||Q){ze.preventDefault();return}Se==null||Se(ze)},B=R!==!1,{compactSize:U,compactItemClassnames:W}=useCompactItemContext(L,N),q={large:"lg",small:"sm",middle:void 0},J=useSize(ze=>{var Se,pe;return(pe=(Se=_??U)!==null&&Se!==void 0?Se:Z)!==null&&pe!==void 0?pe:ze}),ae=J&&q[J]||"",ce=se?"loading":v,ie=omit(w,["navigate"]),ue=classNames(L,V,H,{[`${L}-${f}`]:f!=="default"&&f,[`${L}-${C}`]:C,[`${L}-${ae}`]:ae,[`${L}-icon-only`]:!A&&A!==0&&!!ce,[`${L}-background-ghost`]:S&&!isUnBorderedButtonType(C),[`${L}-loading`]:se,[`${L}-two-chinese-chars`]:le&&B&&!se,[`${L}-block`]:O,[`${L}-dangerous`]:!!m,[`${L}-rtl`]:N==="rtl"},W,b,T,F==null?void 0:F.className),Ee=Object.assign(Object.assign({},F==null?void 0:F.style),P),xe=classNames(x==null?void 0:x.icon,(c=F==null?void 0:F.classNames)===null||c===void 0?void 0:c.icon),ve=Object.assign(Object.assign({},(y==null?void 0:y.icon)||{}),((u=F==null?void 0:F.styles)===null||u===void 0?void 0:u.icon)||{}),$e=v&&!se?React.createElement(IconWrapper$1,{prefixCls:L,className:xe,style:ve},v):React.createElement(LoadingIcon$1,{existIcon:!!v,prefixCls:L,loading:!!se}),_e=A||A===0?spaceChildren(A,D&&B):null;if(ie.href!==void 0)return X(React.createElement("a",Object.assign({},ie,{className:classNames(ue,{[`${L}-disabled`]:Q}),href:Q?void 0:ie.href,style:Ee,onClick:G,ref:Y,tabIndex:Q?-1:0}),$e,_e));let Be=React.createElement("button",Object.assign({},w,{type:I,className:ue,style:Ee,onClick:G,disabled:Q,ref:Y}),$e,_e,!!W&&React.createElement(CompactCmp,{key:"compact",prefixCls:L}));return isUnBorderedButtonType(C)||(Be=React.createElement(Wave$1,{component:"Button",disabled:!!se},Be)),X(Be)},Button=reactExports.forwardRef(InternalButton);Button.Group=Group$2,Button.__ANT_BUTTON=!0;const Button$1=Button;function isThenable(a){return!!(a&&a.then)}const ActionButton=a=>{const{type:s,children:c,prefixCls:u,buttonProps:d,close:h,autoFocus:p,emitEvent:m,isSilent:f,quitOnNullishReturnValue:_,actionFn:y}=a,E=reactExports.useRef(!1),b=reactExports.useRef(null),[T,A]=useSafeState(!1),v=function(){h==null||h.apply(void 0,arguments)};reactExports.useEffect(()=>{let I=null;return p&&(I=setTimeout(()=>{var x;(x=b.current)===null||x===void 0||x.focus()})),()=>{I&&clearTimeout(I)}},[]);const S=I=>{isThenable(I)&&(A(!0),I.then(function(){A(!1,!0),v.apply(void 0,arguments),E.current=!1},x=>{if(A(!1,!0),E.current=!1,!(f!=null&&f()))return Promise.reject(x)}))},O=I=>{if(E.current)return;if(E.current=!0,!y){v();return}let x;if(m){if(x=y(I),_&&!isThenable(x)){E.current=!1,v(I);return}}else if(y.length)x=y(h),E.current=!1;else if(x=y(),!x){v();return}S(x)};return reactExports.createElement(Button$1,Object.assign({},convertLegacyProps(s),{onClick:O,loading:T,prefixCls:u},d,{ref:b}),c)},ActionButton$1=ActionButton,ModalContext=React.createContext({}),{Provider:ModalContextProvider}=ModalContext,ConfirmCancelBtn=()=>{const{autoFocusButton:a,cancelButtonProps:s,cancelTextLocale:c,isSilent:u,mergedOkCancel:d,rootPrefixCls:h,close:p,onCancel:m,onConfirm:f}=reactExports.useContext(ModalContext);return d?React.createElement(ActionButton$1,{isSilent:u,actionFn:m,close:function(){p==null||p.apply(void 0,arguments),f==null||f(!1)},autoFocus:a==="cancel",buttonProps:s,prefixCls:`${h}-btn`},c):null},CancelBtn=ConfirmCancelBtn,ConfirmOkBtn=()=>{const{autoFocusButton:a,close:s,isSilent:c,okButtonProps:u,rootPrefixCls:d,okTextLocale:h,okType:p,onConfirm:m,onOk:f}=reactExports.useContext(ModalContext);return React.createElement(ActionButton$1,{isSilent:c,type:p||"primary",actionFn:f,close:function(){s==null||s.apply(void 0,arguments),m==null||m(!0)},autoFocus:a==="ok",buttonProps:u,prefixCls:`${d}-btn`},h)},OkBtn=ConfirmOkBtn;var OrderContext=reactExports.createContext(null),EMPTY_LIST$1=[];function useDom(a,s){var c=reactExports.useState(function(){if(!canUseDom())return null;var A=document.createElement("div");return A}),u=_slicedToArray(c,1),d=u[0],h=reactExports.useRef(!1),p=reactExports.useContext(OrderContext),m=reactExports.useState(EMPTY_LIST$1),f=_slicedToArray(m,2),_=f[0],y=f[1],E=p||(h.current?void 0:function(A){y(function(v){var S=[A].concat(_toConsumableArray(v));return S})});function b(){d.parentElement||document.body.appendChild(d),h.current=!0}function T(){var A;(A=d.parentElement)===null||A===void 0||A.removeChild(d),h.current=!1}return useLayoutEffect$1(function(){return a?p?p(b):b():T(),T},[a]),useLayoutEffect$1(function(){_.length&&(_.forEach(function(A){return A()}),y(EMPTY_LIST$1))},[_]),[d,E]}var cached;function measureScrollbarSize(a){var s="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),c=document.createElement("div");c.id=s;var u=c.style;u.position="absolute",u.left="0",u.top="0",u.width="100px",u.height="100px",u.overflow="scroll";var d,h;if(a){var p=getComputedStyle(a);u.scrollbarColor=p.scrollbarColor,u.scrollbarWidth=p.scrollbarWidth;var m=getComputedStyle(a,"::-webkit-scrollbar"),f=parseInt(m.width,10),_=parseInt(m.height,10);try{var y=f?"width: ".concat(m.width,";"):"",E=_?"height: ".concat(m.height,";"):"";updateCSS(`
#`.concat(s,`::-webkit-scrollbar {
`).concat(y,`
`).concat(E,`
}`),s)}catch(A){console.error(A),d=f,h=_}}document.body.appendChild(c);var b=a&&d&&!isNaN(d)?d:c.offsetWidth-c.clientWidth,T=a&&h&&!isNaN(h)?h:c.offsetHeight-c.clientHeight;return document.body.removeChild(c),removeCSS(s),{width:b,height:T}}function getScrollBarSize(a){return typeof document>"u"?0:((a||cached===void 0)&&(cached=measureScrollbarSize()),cached.width)}function getTargetScrollBarSize(a){return typeof document>"u"||!a||!(a instanceof Element)?{width:0,height:0}:measureScrollbarSize(a)}function isBodyOverflowing(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var UNIQUE_ID="rc-util-locker-".concat(Date.now()),uuid$3=0;function useScrollLocker(a){var s=!!a,c=reactExports.useState(function(){return uuid$3+=1,"".concat(UNIQUE_ID,"_").concat(uuid$3)}),u=_slicedToArray(c,1),d=u[0];useLayoutEffect$1(function(){if(s){var h=getTargetScrollBarSize(document.body).width,p=isBodyOverflowing();updateCSS(`
html body {
  overflow-y: hidden;
  `.concat(p?"width: calc(100% - ".concat(h,"px);"):"",`
}`),d)}else removeCSS(d);return function(){removeCSS(d)}},[s,d])}var inline=!1;function inlineMock(a){return typeof a=="boolean"&&(inline=a),inline}var getPortalContainer=function(a){return a===!1?!1:!canUseDom()||!a?null:typeof a=="string"?document.querySelector(a):typeof a=="function"?a():a},Portal=reactExports.forwardRef(function(a,s){var c=a.open,u=a.autoLock,d=a.getContainer;a.debug;var h=a.autoDestroy,p=h===void 0?!0:h,m=a.children,f=reactExports.useState(c),_=_slicedToArray(f,2),y=_[0],E=_[1],b=y||c;reactExports.useEffect(function(){(p||c)&&E(c)},[c,p]);var T=reactExports.useState(function(){return getPortalContainer(d)}),A=_slicedToArray(T,2),v=A[0],S=A[1];reactExports.useEffect(function(){var L=getPortalContainer(d);S(L??null)});var O=useDom(b&&!v),I=_slicedToArray(O,2),x=I[0],P=I[1],w=v??x;useScrollLocker(u&&c&&canUseDom()&&(w===x||w===document.body));var C=null;if(m&&supportRef(m)&&s){var k=m;C=k.ref}var R=useComposeRef(C,s);if(!b||!canUseDom()||v===void 0)return null;var N=w===!1||inlineMock(),F=m;return s&&(F=reactExports.cloneElement(m,{ref:R})),reactExports.createElement(OrderContext.Provider,{value:P},N?F:reactDomExports.createPortal(F,w))}),RefContext=reactExports.createContext({});function getUseId(){var a=_objectSpread2({},React$1);return a.useId}var uuid$2=0,useOriginId=getUseId();const useId$1=useOriginId?function(a){var s=useOriginId();return a||s}:function(a){var s=reactExports.useState("ssr-id"),c=_slicedToArray(s,2),u=c[0],d=c[1];return reactExports.useEffect(function(){var h=uuid$2;uuid$2+=1,d("rc_unique_".concat(h))},[]),a||u};function getMotionName(a,s,c){var u=s;return!u&&c&&(u="".concat(a,"-").concat(c)),u}function getScroll(a,s){var c=a["page".concat(s?"Y":"X","Offset")],u="scroll".concat(s?"Top":"Left");if(typeof c!="number"){var d=a.document;c=d.documentElement[u],typeof c!="number"&&(c=d.body[u])}return c}function offset(a){var s=a.getBoundingClientRect(),c={left:s.left,top:s.top},u=a.ownerDocument,d=u.defaultView||u.parentWindow;return c.left+=getScroll(d),c.top+=getScroll(d,!0),c}const MemoChildren=reactExports.memo(function(a){var s=a.children;return s},function(a,s){var c=s.shouldUpdate;return!c});var sentinelStyle={width:0,height:0,overflow:"hidden",outline:"none"},entityStyle={outline:"none"},Panel=React.forwardRef(function(a,s){var c=a.prefixCls,u=a.className,d=a.style,h=a.title,p=a.ariaId,m=a.footer,f=a.closable,_=a.closeIcon,y=a.onClose,E=a.children,b=a.bodyStyle,T=a.bodyProps,A=a.modalRender,v=a.onMouseDown,S=a.onMouseUp,O=a.holderRef,I=a.visible,x=a.forceRender,P=a.width,w=a.height,C=a.classNames,k=a.styles,R=React.useContext(RefContext),N=R.panel,F=useComposeRef(O,N),L=reactExports.useRef(),X=reactExports.useRef(),V=reactExports.useRef();React.useImperativeHandle(s,function(){return{focus:function(){var le;(le=V.current)===null||le===void 0||le.focus()},changeActive:function(le){var he=document,Y=he.activeElement;le&&Y===X.current?L.current.focus():!le&&Y===L.current&&X.current.focus()}}});var H={};P!==void 0&&(H.width=P),w!==void 0&&(H.height=w);var ee;m&&(ee=React.createElement("div",{className:classNames("".concat(c,"-footer"),C==null?void 0:C.footer),style:_objectSpread2({},k==null?void 0:k.footer)},m));var Q;h&&(Q=React.createElement("div",{className:classNames("".concat(c,"-header"),C==null?void 0:C.header),style:_objectSpread2({},k==null?void 0:k.header)},React.createElement("div",{className:"".concat(c,"-title"),id:p},h)));var Z=reactExports.useMemo(function(){return _typeof(f)==="object"&&f!==null?f:f?{closeIcon:_??React.createElement("span",{className:"".concat(c,"-close-x")})}:{}},[f,_]),K=pickAttrs(Z,!0),se;f&&(se=React.createElement("button",_extends$2({type:"button",onClick:y,"aria-label":"Close"},K,{className:"".concat(c,"-close")}),Z.closeIcon));var ne=React.createElement("div",{className:classNames("".concat(c,"-content"),C==null?void 0:C.content),style:k==null?void 0:k.content},se,Q,React.createElement("div",_extends$2({className:classNames("".concat(c,"-body"),C==null?void 0:C.body),style:_objectSpread2(_objectSpread2({},b),k==null?void 0:k.body)},T),E),ee);return React.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":h?p:null,"aria-modal":"true",ref:F,style:_objectSpread2(_objectSpread2({},d),H),className:classNames(c,u),onMouseDown:v,onMouseUp:S},React.createElement("div",{tabIndex:0,ref:L,style:sentinelStyle,"aria-hidden":"true"}),React.createElement("div",{ref:V,tabIndex:-1,style:entityStyle},React.createElement(MemoChildren,{shouldUpdate:I||x},A?A(ne):ne)),React.createElement("div",{tabIndex:0,ref:X,style:sentinelStyle,"aria-hidden":"true"}))}),Content=reactExports.forwardRef(function(a,s){var c=a.prefixCls,u=a.title,d=a.style,h=a.className,p=a.visible,m=a.forceRender,f=a.destroyOnClose,_=a.motionName,y=a.ariaId,E=a.onVisibleChanged,b=a.mousePosition,T=reactExports.useRef(),A=reactExports.useState(),v=_slicedToArray(A,2),S=v[0],O=v[1],I={};S&&(I.transformOrigin=S);function x(){var P=offset(T.current);O(b?"".concat(b.x-P.left,"px ").concat(b.y-P.top,"px"):"")}return reactExports.createElement(CSSMotion,{visible:p,onVisibleChanged:E,onAppearPrepare:x,onEnterPrepare:x,forceRender:m,motionName:_,removeOnLeave:f,ref:T},function(P,w){var C=P.className,k=P.style;return reactExports.createElement(Panel,_extends$2({},a,{ref:s,title:u,ariaId:y,prefixCls:c,holderRef:w,style:_objectSpread2(_objectSpread2(_objectSpread2({},k),d),I),className:classNames(h,C)}))})});Content.displayName="Content";function Mask$1(a){var s=a.prefixCls,c=a.style,u=a.visible,d=a.maskProps,h=a.motionName,p=a.className;return reactExports.createElement(CSSMotion,{key:"mask",visible:u,motionName:h,leavedClassName:"".concat(s,"-mask-hidden")},function(m,f){var _=m.className,y=m.style;return reactExports.createElement("div",_extends$2({ref:f,style:_objectSpread2(_objectSpread2({},y),c),className:classNames("".concat(s,"-mask"),_,p)},d))})}function Dialog(a){var s=a.prefixCls,c=s===void 0?"rc-dialog":s,u=a.zIndex,d=a.visible,h=d===void 0?!1:d,p=a.keyboard,m=p===void 0?!0:p,f=a.focusTriggerAfterClose,_=f===void 0?!0:f,y=a.wrapStyle,E=a.wrapClassName,b=a.wrapProps,T=a.onClose,A=a.afterOpenChange,v=a.afterClose,S=a.transitionName,O=a.animation,I=a.closable,x=I===void 0?!0:I,P=a.mask,w=P===void 0?!0:P,C=a.maskTransitionName,k=a.maskAnimation,R=a.maskClosable,N=R===void 0?!0:R,F=a.maskStyle,L=a.maskProps,X=a.rootClassName,V=a.classNames,H=a.styles,ee=reactExports.useRef(),Q=reactExports.useRef(),Z=reactExports.useRef(),K=reactExports.useState(h),se=_slicedToArray(K,2),ne=se[0],le=se[1],he=useId$1();function Y(){contains$1(Q.current,document.activeElement)||(ee.current=document.activeElement)}function D(){if(!contains$1(Q.current,document.activeElement)){var ie;(ie=Z.current)===null||ie===void 0||ie.focus()}}function G(ie){if(ie)D();else{if(le(!1),w&&ee.current&&_){try{ee.current.focus({preventScroll:!0})}catch{}ee.current=null}ne&&(v==null||v())}A==null||A(ie)}function B(ie){T==null||T(ie)}var U=reactExports.useRef(!1),W=reactExports.useRef(),q=function(){clearTimeout(W.current),U.current=!0},J=function(){W.current=setTimeout(function(){U.current=!1})},ae=null;N&&(ae=function(ie){U.current?U.current=!1:Q.current===ie.target&&B(ie)});function ce(ie){if(m&&ie.keyCode===KeyCode.ESC){ie.stopPropagation(),B(ie);return}h&&ie.keyCode===KeyCode.TAB&&Z.current.changeActive(!ie.shiftKey)}return reactExports.useEffect(function(){h&&(le(!0),Y())},[h]),reactExports.useEffect(function(){return function(){clearTimeout(W.current)}},[]),reactExports.createElement("div",_extends$2({className:classNames("".concat(c,"-root"),X)},pickAttrs(a,{data:!0})),reactExports.createElement(Mask$1,{prefixCls:c,visible:w&&h,motionName:getMotionName(c,C,k),style:_objectSpread2(_objectSpread2({zIndex:u},F),H==null?void 0:H.mask),maskProps:L,className:V==null?void 0:V.mask}),reactExports.createElement("div",_extends$2({tabIndex:-1,onKeyDown:ce,className:classNames("".concat(c,"-wrap"),E,V==null?void 0:V.wrapper),ref:Q,onClick:ae,style:_objectSpread2(_objectSpread2(_objectSpread2({zIndex:u},y),H==null?void 0:H.wrapper),{},{display:ne?null:"none"})},b),reactExports.createElement(Content,_extends$2({},a,{onMouseDown:q,onMouseUp:J,ref:Z,closable:x,ariaId:he,prefixCls:c,visible:h&&ne,onClose:B,onVisibleChanged:G,motionName:getMotionName(c,S,O)}))))}var DialogWrap=function(a){var s=a.visible,c=a.getContainer,u=a.forceRender,d=a.destroyOnClose,h=d===void 0?!1:d,p=a.afterClose,m=a.panelRef,f=reactExports.useState(s),_=_slicedToArray(f,2),y=_[0],E=_[1],b=reactExports.useMemo(function(){return{panel:m}},[m]);return reactExports.useEffect(function(){s&&E(!0)},[s]),!u&&h&&!y?null:reactExports.createElement(RefContext.Provider,{value:b},reactExports.createElement(Portal,{open:s||u||y,autoDestroy:!1,getContainer:c,autoLock:s||y},reactExports.createElement(Dialog,_extends$2({},a,{destroyOnClose:h,afterClose:function(){p==null||p(),E(!1)}}))))};DialogWrap.displayName="Dialog";function pickClosable(a){if(a)return{closable:a.closable,closeIcon:a.closeIcon}}function useClosableConfig(a){const{closable:s,closeIcon:c}=a||{};return React.useMemo(()=>{if(!s&&(s===!1||c===!1||c===null))return!1;if(s===void 0&&c===void 0)return null;let u={closeIcon:typeof c!="boolean"&&c!==null?c:void 0};return s&&typeof s=="object"&&(u=Object.assign(Object.assign({},u),s)),u},[s,c])}function assignWithoutUndefined(){const a={};for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return c.forEach(d=>{d&&Object.keys(d).forEach(h=>{d[h]!==void 0&&(a[h]=d[h])})}),a}const EmptyFallbackCloseCollection={};function useClosable(a,s){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:EmptyFallbackCloseCollection;const u=useClosableConfig(a),d=useClosableConfig(s),h=React.useMemo(()=>Object.assign({closeIcon:React.createElement(CloseOutlined$1,null)},c),[c]),p=React.useMemo(()=>u===!1?!1:u?assignWithoutUndefined(h,d,u):d===!1?!1:d?assignWithoutUndefined(h,d):h.closable?h:!1,[u,d,h]);return React.useMemo(()=>{if(p===!1)return[!1,null];const{closeIconRender:m}=h,{closeIcon:f}=p;let _=f;if(_!=null){m&&(_=m(f));const y=pickAttrs(p,!0);Object.keys(y).length&&(_=React.isValidElement(_)?React.cloneElement(_,y):React.createElement("span",Object.assign({},y),_))}return[!0,_]},[p,h])}const canUseDocElement=()=>canUseDom()&&window.document.documentElement;var HOOK_MARK="RC_FORM_INTERNAL_HOOKS",warningFunc=function(){warningOnce(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Context=reactExports.createContext({getFieldValue:warningFunc,getFieldsValue:warningFunc,getFieldError:warningFunc,getFieldWarning:warningFunc,getFieldsError:warningFunc,isFieldsTouched:warningFunc,isFieldTouched:warningFunc,isFieldValidating:warningFunc,isFieldsValidating:warningFunc,resetFields:warningFunc,setFields:warningFunc,setFieldValue:warningFunc,setFieldsValue:warningFunc,validateFields:warningFunc,submit:warningFunc,getInternalHooks:function(){return warningFunc(),{dispatch:warningFunc,initEntityValue:warningFunc,registerField:warningFunc,useSubscribe:warningFunc,setInitialValues:warningFunc,destroyForm:warningFunc,setCallbacks:warningFunc,registerWatch:warningFunc,getFields:warningFunc,setValidateMessages:warningFunc,setPreserve:warningFunc,getInitialValue:warningFunc}}}),ListContext=reactExports.createContext(null);function toArray$5(a){return a==null?[]:Array.isArray(a)?a:[a]}function isFormInstance(a){return a&&!!a._init}var define_process_env_default$3={};function _extends(){return _extends=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var c=arguments[s];for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(a[u]=c[u])}return a},_extends.apply(this,arguments)}function _inheritsLoose(a,s){a.prototype=Object.create(s.prototype),a.prototype.constructor=a,_setPrototypeOf(a,s)}function _getPrototypeOf(a){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},_getPrototypeOf(a)}function _setPrototypeOf(a,s){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,u){return c.__proto__=u,c},_setPrototypeOf(a,s)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _construct(a,s,c){return _isNativeReflectConstruct()?_construct=Reflect.construct.bind():_construct=function(u,d,h){var p=[null];p.push.apply(p,d);var m=Function.bind.apply(u,p),f=new m;return h&&_setPrototypeOf(f,h.prototype),f},_construct.apply(null,arguments)}function _isNativeFunction(a){return Function.toString.call(a).indexOf("[native code]")!==-1}function _wrapNativeSuper(a){var s=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(c){if(c===null||!_isNativeFunction(c))return c;if(typeof c!="function")throw new TypeError("Super expression must either be null or a function");if(typeof s<"u"){if(s.has(c))return s.get(c);s.set(c,u)}function u(){return _construct(c,arguments,_getPrototypeOf(this).constructor)}return u.prototype=Object.create(c.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(u,c)},_wrapNativeSuper(a)}var formatRegExp=/%[sdj%]/g,warning=function(){};typeof process<"u";function convertFieldsError(a){if(!a||!a.length)return null;var s={};return a.forEach(function(c){var u=c.field;s[u]=s[u]||[],s[u].push(c)}),s}function format(a){for(var s=arguments.length,c=new Array(s>1?s-1:0),u=1;u<s;u++)c[u-1]=arguments[u];var d=0,h=c.length;if(typeof a=="function")return a.apply(null,c);if(typeof a=="string"){var p=a.replace(formatRegExp,function(m){if(m==="%%")return"%";if(d>=h)return m;switch(m){case"%s":return String(c[d++]);case"%d":return Number(c[d++]);case"%j":try{return JSON.stringify(c[d++])}catch{return"[Circular]"}break;default:return m}});return p}return a}function isNativeStringType(a){return a==="string"||a==="url"||a==="hex"||a==="email"||a==="date"||a==="pattern"}function isEmptyValue(a,s){return!!(a==null||s==="array"&&Array.isArray(a)&&!a.length||isNativeStringType(s)&&typeof a=="string"&&!a)}function asyncParallelArray(a,s,c){var u=[],d=0,h=a.length;function p(m){u.push.apply(u,m||[]),d++,d===h&&c(u)}a.forEach(function(m){s(m,p)})}function asyncSerialArray(a,s,c){var u=0,d=a.length;function h(p){if(p&&p.length){c(p);return}var m=u;u=u+1,m<d?s(a[m],h):c([])}h([])}function flattenObjArr(a){var s=[];return Object.keys(a).forEach(function(c){s.push.apply(s,a[c]||[])}),s}var AsyncValidationError=function(a){_inheritsLoose(s,a);function s(c,u){var d;return d=a.call(this,"Async Validation Error")||this,d.errors=c,d.fields=u,d}return s}(_wrapNativeSuper(Error));function asyncMap(a,s,c,u,d){if(s.first){var h=new Promise(function(b,T){var A=function(S){return u(S),S.length?T(new AsyncValidationError(S,convertFieldsError(S))):b(d)},v=flattenObjArr(a);asyncSerialArray(v,c,A)});return h.catch(function(b){return b}),h}var p=s.firstFields===!0?Object.keys(a):s.firstFields||[],m=Object.keys(a),f=m.length,_=0,y=[],E=new Promise(function(b,T){var A=function(v){if(y.push.apply(y,v),_++,_===f)return u(y),y.length?T(new AsyncValidationError(y,convertFieldsError(y))):b(d)};m.length||(u(y),b(d)),m.forEach(function(v){var S=a[v];p.indexOf(v)!==-1?asyncSerialArray(S,c,A):asyncParallelArray(S,c,A)})});return E.catch(function(b){return b}),E}function isErrorObj(a){return!!(a&&a.message!==void 0)}function getValue(a,s){for(var c=a,u=0;u<s.length;u++){if(c==null)return c;c=c[s[u]]}return c}function complementError(a,s){return function(c){var u;return a.fullFields?u=getValue(s,a.fullFields):u=s[c.field||a.fullField],isErrorObj(c)?(c.field=c.field||a.fullField,c.fieldValue=u,c):{message:typeof c=="function"?c():c,fieldValue:u,field:c.field||a.fullField}}}function deepMerge(a,s){if(s){for(var c in s)if(s.hasOwnProperty(c)){var u=s[c];typeof u=="object"&&typeof a[c]=="object"?a[c]=_extends({},a[c],u):a[c]=u}}return a}var required$1=function(a,s,c,u,d,h){a.required&&(!c.hasOwnProperty(a.field)||isEmptyValue(s,h||a.type))&&u.push(format(d.messages.required,a.fullField))},whitespace$1=function(a,s,c,u,d){(/^\s+$/.test(s)||s==="")&&u.push(format(d.messages.whitespace,a.fullField))},urlReg,getUrlRegex=function(){if(urlReg)return urlReg;var a="[a-fA-F\\d:]",s=function(x){return x&&x.includeBoundaries?"(?:(?<=\\s|^)(?="+a+")|(?<="+a+")(?=\\s|$))":""},c="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",u="[a-fA-F\\d]{1,4}",d=(`
(?:
(?:`+u+":){7}(?:"+u+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+u+":){6}(?:"+c+"|:"+u+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+u+":){5}(?::"+c+"|(?::"+u+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+u+":){4}(?:(?::"+u+"){0,1}:"+c+"|(?::"+u+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+u+":){3}(?:(?::"+u+"){0,2}:"+c+"|(?::"+u+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+u+":){2}(?:(?::"+u+"){0,3}:"+c+"|(?::"+u+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+u+":){1}(?:(?::"+u+"){0,4}:"+c+"|(?::"+u+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+u+"){0,5}:"+c+"|(?::"+u+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),h=new RegExp("(?:^"+c+"$)|(?:^"+d+"$)"),p=new RegExp("^"+c+"$"),m=new RegExp("^"+d+"$"),f=function(x){return x&&x.exact?h:new RegExp("(?:"+s(x)+c+s(x)+")|(?:"+s(x)+d+s(x)+")","g")};f.v4=function(x){return x&&x.exact?p:new RegExp(""+s(x)+c+s(x),"g")},f.v6=function(x){return x&&x.exact?m:new RegExp(""+s(x)+d+s(x),"g")};var _="(?:(?:[a-z]+:)?//)",y="(?:\\S+(?::\\S*)?@)?",E=f.v4().source,b=f.v6().source,T="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",A="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",v="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",S="(?::\\d{2,5})?",O='(?:[/?#][^\\s"]*)?',I="(?:"+_+"|www\\.)"+y+"(?:localhost|"+E+"|"+b+"|"+T+A+v+")"+S+O;return urlReg=new RegExp("(?:^"+I+"$)","i"),urlReg},pattern$2={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},types={integer:function(a){return types.number(a)&&parseInt(a,10)===a},float:function(a){return types.number(a)&&!types.integer(a)},array:function(a){return Array.isArray(a)},regexp:function(a){if(a instanceof RegExp)return!0;try{return!!new RegExp(a)}catch{return!1}},date:function(a){return typeof a.getTime=="function"&&typeof a.getMonth=="function"&&typeof a.getYear=="function"&&!isNaN(a.getTime())},number:function(a){return isNaN(a)?!1:typeof a=="number"},object:function(a){return typeof a=="object"&&!types.array(a)},method:function(a){return typeof a=="function"},email:function(a){return typeof a=="string"&&a.length<=320&&!!a.match(pattern$2.email)},url:function(a){return typeof a=="string"&&a.length<=2048&&!!a.match(getUrlRegex())},hex:function(a){return typeof a=="string"&&!!a.match(pattern$2.hex)}},type$1=function(a,s,c,u,d){if(a.required&&s===void 0){required$1(a,s,c,u,d);return}var h=["integer","float","array","regexp","object","method","email","number","date","url","hex"],p=a.type;h.indexOf(p)>-1?types[p](s)||u.push(format(d.messages.types[p],a.fullField,a.type)):p&&typeof s!==a.type&&u.push(format(d.messages.types[p],a.fullField,a.type))},range=function(a,s,c,u,d){var h=typeof a.len=="number",p=typeof a.min=="number",m=typeof a.max=="number",f=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_=s,y=null,E=typeof s=="number",b=typeof s=="string",T=Array.isArray(s);if(E?y="number":b?y="string":T&&(y="array"),!y)return!1;T&&(_=s.length),b&&(_=s.replace(f,"_").length),h?_!==a.len&&u.push(format(d.messages[y].len,a.fullField,a.len)):p&&!m&&_<a.min?u.push(format(d.messages[y].min,a.fullField,a.min)):m&&!p&&_>a.max?u.push(format(d.messages[y].max,a.fullField,a.max)):p&&m&&(_<a.min||_>a.max)&&u.push(format(d.messages[y].range,a.fullField,a.min,a.max))},ENUM$1="enum",enumerable$1=function(a,s,c,u,d){a[ENUM$1]=Array.isArray(a[ENUM$1])?a[ENUM$1]:[],a[ENUM$1].indexOf(s)===-1&&u.push(format(d.messages[ENUM$1],a.fullField,a[ENUM$1].join(", ")))},pattern$1=function(a,s,c,u,d){if(a.pattern){if(a.pattern instanceof RegExp)a.pattern.lastIndex=0,a.pattern.test(s)||u.push(format(d.messages.pattern.mismatch,a.fullField,s,a.pattern));else if(typeof a.pattern=="string"){var h=new RegExp(a.pattern);h.test(s)||u.push(format(d.messages.pattern.mismatch,a.fullField,s,a.pattern))}}},rules={required:required$1,whitespace:whitespace$1,type:type$1,range,enum:enumerable$1,pattern:pattern$1},string=function(a,s,c,u,d){var h=[],p=a.required||!a.required&&u.hasOwnProperty(a.field);if(p){if(isEmptyValue(s,"string")&&!a.required)return c();rules.required(a,s,u,h,d,"string"),isEmptyValue(s,"string")||(rules.type(a,s,u,h,d),rules.range(a,s,u,h,d),rules.pattern(a,s,u,h,d),a.whitespace===!0&&rules.whitespace(a,s,u,h,d))}c(h)},method2=function(a,s,c,u,d){var h=[],p=a.required||!a.required&&u.hasOwnProperty(a.field);if(p){if(isEmptyValue(s)&&!a.required)return c();rules.required(a,s,u,h,d),s!==void 0&&rules.type(a,s,u,h,d)}c(h)},number2=function(a,s,c,u,d){var h=[],p=a.required||!a.required&&u.hasOwnProperty(a.field);if(p){if(s===""&&(s=void 0),isEmptyValue(s)&&!a.required)return c();rules.required(a,s,u,h,d),s!==void 0&&(rules.type(a,s,u,h,d),rules.range(a,s,u,h,d))}c(h)},_boolean=function(a,s,c,u,d){var h=[],p=a.required||!a.required&&u.hasOwnProperty(a.field);if(p){if(isEmptyValue(s)&&!a.required)return c();rules.required(a,s,u,h,d),s!==void 0&&rules.type(a,s,u,h,d)}c(h)},regexp2=function(a,s,c,u,d){var h=[],p=a.required||!a.required&&u.hasOwnProperty(a.field);if(p){if(isEmptyValue(s)&&!a.required)return c();rules.required(a,s,u,h,d),isEmptyValue(s)||rules.type(a,s,u,h,d)}c(h)},integer2=function(a,s,c,u,d){var h=[],p=a.required||!a.required&&u.hasOwnProperty(a.field);if(p){if(isEmptyValue(s)&&!a.required)return c();rules.required(a,s,u,h,d),s!==void 0&&(rules.type(a,s,u,h,d),rules.range(a,s,u,h,d))}c(h)},floatFn=function(a,s,c,u,d){var h=[],p=a.required||!a.required&&u.hasOwnProperty(a.field);if(p){if(isEmptyValue(s)&&!a.required)return c();rules.required(a,s,u,h,d),s!==void 0&&(rules.type(a,s,u,h,d),rules.range(a,s,u,h,d))}c(h)},array2=function(a,s,c,u,d){var h=[],p=a.required||!a.required&&u.hasOwnProperty(a.field);if(p){if(s==null&&!a.required)return c();rules.required(a,s,u,h,d,"array"),s!=null&&(rules.type(a,s,u,h,d),rules.range(a,s,u,h,d))}c(h)},object2=function(a,s,c,u,d){var h=[],p=a.required||!a.required&&u.hasOwnProperty(a.field);if(p){if(isEmptyValue(s)&&!a.required)return c();rules.required(a,s,u,h,d),s!==void 0&&rules.type(a,s,u,h,d)}c(h)},ENUM="enum",enumerable2=function(a,s,c,u,d){var h=[],p=a.required||!a.required&&u.hasOwnProperty(a.field);if(p){if(isEmptyValue(s)&&!a.required)return c();rules.required(a,s,u,h,d),s!==void 0&&rules[ENUM](a,s,u,h,d)}c(h)},pattern2=function(a,s,c,u,d){var h=[],p=a.required||!a.required&&u.hasOwnProperty(a.field);if(p){if(isEmptyValue(s,"string")&&!a.required)return c();rules.required(a,s,u,h,d),isEmptyValue(s,"string")||rules.pattern(a,s,u,h,d)}c(h)},date2=function(a,s,c,u,d){var h=[],p=a.required||!a.required&&u.hasOwnProperty(a.field);if(p){if(isEmptyValue(s,"date")&&!a.required)return c();if(rules.required(a,s,u,h,d),!isEmptyValue(s,"date")){var m;s instanceof Date?m=s:m=new Date(s),rules.type(a,m,u,h,d),m&&rules.range(a,m.getTime(),u,h,d)}}c(h)},required2=function(a,s,c,u,d){var h=[],p=Array.isArray(s)?"array":typeof s;rules.required(a,s,u,h,d,p),c(h)},type2=function(a,s,c,u,d){var h=a.type,p=[],m=a.required||!a.required&&u.hasOwnProperty(a.field);if(m){if(isEmptyValue(s,h)&&!a.required)return c();rules.required(a,s,u,p,d,h),isEmptyValue(s,h)||rules.type(a,s,u,p,d)}c(p)},any=function(a,s,c,u,d){var h=[],p=a.required||!a.required&&u.hasOwnProperty(a.field);if(p){if(isEmptyValue(s)&&!a.required)return c();rules.required(a,s,u,h,d)}c(h)},validators={string,method:method2,number:number2,boolean:_boolean,regexp:regexp2,integer:integer2,float:floatFn,array:array2,object:object2,enum:enumerable2,pattern:pattern2,date:date2,url:type2,hex:type2,email:type2,required:required2,any};function newMessages(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var a=JSON.parse(JSON.stringify(this));return a.clone=this.clone,a}}}var messages=newMessages(),Schema=function(){function a(c){this.rules=null,this._messages=messages,this.define(c)}var s=a.prototype;return s.define=function(c){var u=this;if(!c)throw new Error("Cannot configure a schema with no rules");if(typeof c!="object"||Array.isArray(c))throw new Error("Rules must be an object");this.rules={},Object.keys(c).forEach(function(d){var h=c[d];u.rules[d]=Array.isArray(h)?h:[h]})},s.messages=function(c){return c&&(this._messages=deepMerge(newMessages(),c)),this._messages},s.validate=function(c,u,d){var h=this;u===void 0&&(u={}),d===void 0&&(d=function(){});var p=c,m=u,f=d;if(typeof m=="function"&&(f=m,m={}),!this.rules||Object.keys(this.rules).length===0)return f&&f(null,p),Promise.resolve(p);function _(A){var v=[],S={};function O(x){if(Array.isArray(x)){var P;v=(P=v).concat.apply(P,x)}else v.push(x)}for(var I=0;I<A.length;I++)O(A[I]);v.length?(S=convertFieldsError(v),f(v,S)):f(null,p)}if(m.messages){var y=this.messages();y===messages&&(y=newMessages()),deepMerge(y,m.messages),m.messages=y}else m.messages=this.messages();var E={},b=m.keys||Object.keys(this.rules);b.forEach(function(A){var v=h.rules[A],S=p[A];v.forEach(function(O){var I=O;typeof I.transform=="function"&&(p===c&&(p=_extends({},p)),S=p[A]=I.transform(S)),typeof I=="function"?I={validator:I}:I=_extends({},I),I.validator=h.getValidationMethod(I),I.validator&&(I.field=A,I.fullField=I.fullField||A,I.type=h.getType(I),E[A]=E[A]||[],E[A].push({rule:I,value:S,source:p,field:A}))})});var T={};return asyncMap(E,m,function(A,v){var w;var S=A.rule,O=(S.type==="object"||S.type==="array")&&(typeof S.fields=="object"||typeof S.defaultField=="object");O=O&&(S.required||!S.required&&A.value),S.field=A.field;function I(C,k){return _extends({},k,{fullField:S.fullField+"."+C,fullFields:S.fullFields?[].concat(S.fullFields,[C]):[C]})}function x(C){C===void 0&&(C=[]);var k=Array.isArray(C)?C:[C];!m.suppressWarning&&k.length&&a.warning("async-validator:",k),k.length&&S.message!==void 0&&(k=[].concat(S.message));var R=k.map(complementError(S,p));if(m.first&&R.length)return T[S.field]=1,v(R);if(!O)v(R);else{if(S.required&&!A.value)return S.message!==void 0?R=[].concat(S.message).map(complementError(S,p)):m.error&&(R=[m.error(S,format(m.messages.required,S.field))]),v(R);var N={};S.defaultField&&Object.keys(A.value).map(function(X){N[X]=S.defaultField}),N=_extends({},N,A.rule.fields);var F={};Object.keys(N).forEach(function(X){var V=N[X],H=Array.isArray(V)?V:[V];F[X]=H.map(I.bind(null,X))});var L=new a(F);L.messages(m.messages),A.rule.options&&(A.rule.options.messages=m.messages,A.rule.options.error=m.error),L.validate(A.value,A.rule.options||m,function(X){var V=[];R&&R.length&&V.push.apply(V,R),X&&X.length&&V.push.apply(V,X),v(V.length?V:null)})}}var P;if(S.asyncValidator)P=S.asyncValidator(S,A.value,x,A.source,m);else if(S.validator){try{P=S.validator(S,A.value,x,A.source,m)}catch(C){(w=console.error)==null||w.call(console,C),m.suppressValidatorError||setTimeout(function(){throw C},0),x(C.message)}P===!0?x():P===!1?x(typeof S.message=="function"?S.message(S.fullField||S.field):S.message||(S.fullField||S.field)+" fails"):P instanceof Array?x(P):P instanceof Error&&x(P.message)}P&&P.then&&P.then(function(){return x()},function(C){return x(C)})},function(A){_(A)},p)},s.getType=function(c){if(c.type===void 0&&c.pattern instanceof RegExp&&(c.type="pattern"),typeof c.validator!="function"&&c.type&&!validators.hasOwnProperty(c.type))throw new Error(format("Unknown rule type %s",c.type));return c.type||"string"},s.getValidationMethod=function(c){if(typeof c.validator=="function")return c.validator;var u=Object.keys(c),d=u.indexOf("message");return d!==-1&&u.splice(d,1),u.length===1&&u[0]==="required"?validators.required:validators[this.getType(c)]||void 0},a}();Schema.register=function(a,s){if(typeof s!="function")throw new Error("Cannot register a validator by type, validator is not a function");validators[a]=s},Schema.warning=warning,Schema.messages=messages,Schema.validators=validators;var typeTemplate="'${name}' is not a valid ${type}",defaultValidateMessages={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:typeTemplate,method:typeTemplate,array:typeTemplate,object:typeTemplate,number:typeTemplate,date:typeTemplate,boolean:typeTemplate,integer:typeTemplate,float:typeTemplate,regexp:typeTemplate,email:typeTemplate,url:typeTemplate,hex:typeTemplate},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},AsyncValidator=Schema;function replaceMessage(a,s){return a.replace(/\$\{\w+\}/g,function(c){var u=c.slice(2,-1);return s[u]})}var CODE_LOGIC_ERROR="CODE_LOGIC_ERROR";function validateRule(a,s,c,u,d){return _validateRule.apply(this,arguments)}function _validateRule(){return _validateRule=_asyncToGenerator(_regeneratorRuntime().mark(function a(s,c,u,d,h){var p,m,f,_,y,E,b,T,A;return _regeneratorRuntime().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return p=_objectSpread2({},u),delete p.ruleIndex,AsyncValidator.warning=function(){},p.validator&&(m=p.validator,p.validator=function(){try{return m.apply(void 0,arguments)}catch(S){return console.error(S),Promise.reject(CODE_LOGIC_ERROR)}}),f=null,p&&p.type==="array"&&p.defaultField&&(f=p.defaultField,delete p.defaultField),_=new AsyncValidator(_defineProperty({},s,[p])),y=merge$2(defaultValidateMessages,d.validateMessages),_.messages(y),E=[],v.prev=10,v.next=13,Promise.resolve(_.validate(_defineProperty({},s,c),_objectSpread2({},d)));case 13:v.next=18;break;case 15:v.prev=15,v.t0=v.catch(10),v.t0.errors&&(E=v.t0.errors.map(function(S,O){var I=S.message,x=I===CODE_LOGIC_ERROR?y.default:I;return reactExports.isValidElement(x)?reactExports.cloneElement(x,{key:"error_".concat(O)}):x}));case 18:if(!(!E.length&&f)){v.next=23;break}return v.next=21,Promise.all(c.map(function(S,O){return validateRule("".concat(s,".").concat(O),S,f,d,h)}));case 21:return b=v.sent,v.abrupt("return",b.reduce(function(S,O){return[].concat(_toConsumableArray(S),_toConsumableArray(O))},[]));case 23:return T=_objectSpread2(_objectSpread2({},u),{},{name:s,enum:(u.enum||[]).join(", ")},h),A=E.map(function(S){return typeof S=="string"?replaceMessage(S,T):S}),v.abrupt("return",A);case 26:case"end":return v.stop()}},a,null,[[10,15]])})),_validateRule.apply(this,arguments)}function validateRules(a,s,c,u,d,h){var p=a.join("."),m=c.map(function(y,E){var b=y.validator,T=_objectSpread2(_objectSpread2({},y),{},{ruleIndex:E});return b&&(T.validator=function(A,v,S){var O=!1,I=function(){for(var P=arguments.length,w=new Array(P),C=0;C<P;C++)w[C]=arguments[C];Promise.resolve().then(function(){warningOnce(!O,"Your validator function has already return a promise. `callback` will be ignored."),O||S.apply(void 0,w)})},x=b(A,v,I);O=x&&typeof x.then=="function"&&typeof x.catch=="function",warningOnce(O,"`callback` is deprecated. Please return a promise instead."),O&&x.then(function(){S()}).catch(function(P){S(P||" ")})}),T}).sort(function(y,E){var b=y.warningOnly,T=y.ruleIndex,A=E.warningOnly,v=E.ruleIndex;return!!b==!!A?T-v:b?1:-1}),f;if(d===!0)f=new Promise(function(){var y=_asyncToGenerator(_regeneratorRuntime().mark(function E(b,T){var A,v,S;return _regeneratorRuntime().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:A=0;case 1:if(!(A<m.length)){O.next=12;break}return v=m[A],O.next=5,validateRule(p,s,v,u,h);case 5:if(S=O.sent,!S.length){O.next=9;break}return T([{errors:S,rule:v}]),O.abrupt("return");case 9:A+=1,O.next=1;break;case 12:b([]);case 13:case"end":return O.stop()}},E)}));return function(E,b){return y.apply(this,arguments)}}());else{var _=m.map(function(y){return validateRule(p,s,y,u,h).then(function(E){return{errors:E,rule:y}})});f=(d?finishOnFirstFailed(_):finishOnAllFailed(_)).then(function(y){return Promise.reject(y)})}return f.catch(function(y){return y}),f}function finishOnAllFailed(a){return _finishOnAllFailed.apply(this,arguments)}function _finishOnAllFailed(){return _finishOnAllFailed=_asyncToGenerator(_regeneratorRuntime().mark(function a(s){return _regeneratorRuntime().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Promise.all(s).then(function(u){var d,h=(d=[]).concat.apply(d,_toConsumableArray(u));return h}));case 1:case"end":return c.stop()}},a)})),_finishOnAllFailed.apply(this,arguments)}function finishOnFirstFailed(a){return _finishOnFirstFailed.apply(this,arguments)}function _finishOnFirstFailed(){return _finishOnFirstFailed=_asyncToGenerator(_regeneratorRuntime().mark(function a(s){var c;return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return c=0,u.abrupt("return",new Promise(function(d){s.forEach(function(h){h.then(function(p){p.errors.length&&d([p]),c+=1,c===s.length&&d([])})})}));case 2:case"end":return u.stop()}},a)})),_finishOnFirstFailed.apply(this,arguments)}function getNamePath(a){return toArray$5(a)}function cloneByNamePathList(a,s){var c={};return s.forEach(function(u){var d=get$1(a,u);c=set(c,u,d)}),c}function containsNamePath(a,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return a&&a.some(function(u){return matchNamePath(s,u,c)})}function matchNamePath(a,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!a||!s||!c&&a.length!==s.length?!1:s.every(function(u,d){return a[d]===u})}function isSimilar(a,s){if(a===s)return!0;if(!a&&s||a&&!s||!a||!s||_typeof(a)!=="object"||_typeof(s)!=="object")return!1;var c=Object.keys(a),u=Object.keys(s),d=new Set([].concat(c,u));return _toConsumableArray(d).every(function(h){var p=a[h],m=s[h];return typeof p=="function"&&typeof m=="function"?!0:p===m})}function defaultGetValueFromEvent(a){var s=arguments.length<=1?void 0:arguments[1];return s&&s.target&&_typeof(s.target)==="object"&&a in s.target?s.target[a]:s}function move(a,s,c){var u=a.length;if(s<0||s>=u||c<0||c>=u)return a;var d=a[s],h=s-c;return h>0?[].concat(_toConsumableArray(a.slice(0,c)),[d],_toConsumableArray(a.slice(c,s)),_toConsumableArray(a.slice(s+1,u))):h<0?[].concat(_toConsumableArray(a.slice(0,s)),_toConsumableArray(a.slice(s+1,c+1)),[d],_toConsumableArray(a.slice(c+1,u))):a}var _excluded$l=["name"],EMPTY_ERRORS=[];function requireUpdate(a,s,c,u,d,h){return typeof a=="function"?a(s,c,"source"in h?{source:h.source}:{}):u!==d}var Field=function(a){_inherits(c,a);var s=_createSuper(c);function c(u){var d;if(_classCallCheck(this,c),d=s.call(this,u),_defineProperty(_assertThisInitialized(d),"state",{resetCount:0}),_defineProperty(_assertThisInitialized(d),"cancelRegisterFunc",null),_defineProperty(_assertThisInitialized(d),"mounted",!1),_defineProperty(_assertThisInitialized(d),"touched",!1),_defineProperty(_assertThisInitialized(d),"dirty",!1),_defineProperty(_assertThisInitialized(d),"validatePromise",void 0),_defineProperty(_assertThisInitialized(d),"prevValidating",void 0),_defineProperty(_assertThisInitialized(d),"errors",EMPTY_ERRORS),_defineProperty(_assertThisInitialized(d),"warnings",EMPTY_ERRORS),_defineProperty(_assertThisInitialized(d),"cancelRegister",function(){var f=d.props,_=f.preserve,y=f.isListField,E=f.name;d.cancelRegisterFunc&&d.cancelRegisterFunc(y,_,getNamePath(E)),d.cancelRegisterFunc=null}),_defineProperty(_assertThisInitialized(d),"getNamePath",function(){var f=d.props,_=f.name,y=f.fieldContext,E=y.prefixName,b=E===void 0?[]:E;return _!==void 0?[].concat(_toConsumableArray(b),_toConsumableArray(_)):[]}),_defineProperty(_assertThisInitialized(d),"getRules",function(){var f=d.props,_=f.rules,y=_===void 0?[]:_,E=f.fieldContext;return y.map(function(b){return typeof b=="function"?b(E):b})}),_defineProperty(_assertThisInitialized(d),"refresh",function(){d.mounted&&d.setState(function(f){var _=f.resetCount;return{resetCount:_+1}})}),_defineProperty(_assertThisInitialized(d),"metaCache",null),_defineProperty(_assertThisInitialized(d),"triggerMetaEvent",function(f){var _=d.props.onMetaChange;if(_){var y=_objectSpread2(_objectSpread2({},d.getMeta()),{},{destroy:f});isEqual(d.metaCache,y)||_(y),d.metaCache=y}else d.metaCache=null}),_defineProperty(_assertThisInitialized(d),"onStoreChange",function(f,_,y){var E=d.props,b=E.shouldUpdate,T=E.dependencies,A=T===void 0?[]:T,v=E.onReset,S=y.store,O=d.getNamePath(),I=d.getValue(f),x=d.getValue(S),P=_&&containsNamePath(_,O);switch(y.type==="valueUpdate"&&y.source==="external"&&!isEqual(I,x)&&(d.touched=!0,d.dirty=!0,d.validatePromise=null,d.errors=EMPTY_ERRORS,d.warnings=EMPTY_ERRORS,d.triggerMetaEvent()),y.type){case"reset":if(!_||P){d.touched=!1,d.dirty=!1,d.validatePromise=void 0,d.errors=EMPTY_ERRORS,d.warnings=EMPTY_ERRORS,d.triggerMetaEvent(),v==null||v(),d.refresh();return}break;case"remove":{if(b){d.reRender();return}break}case"setField":{var w=y.data;if(P){"touched"in w&&(d.touched=w.touched),"validating"in w&&!("originRCField"in w)&&(d.validatePromise=w.validating?Promise.resolve([]):null),"errors"in w&&(d.errors=w.errors||EMPTY_ERRORS),"warnings"in w&&(d.warnings=w.warnings||EMPTY_ERRORS),d.dirty=!0,d.triggerMetaEvent(),d.reRender();return}else if("value"in w&&containsNamePath(_,O,!0)){d.reRender();return}if(b&&!O.length&&requireUpdate(b,f,S,I,x,y)){d.reRender();return}break}case"dependenciesUpdate":{var C=A.map(getNamePath);if(C.some(function(k){return containsNamePath(y.relatedFields,k)})){d.reRender();return}break}default:if(P||(!A.length||O.length||b)&&requireUpdate(b,f,S,I,x,y)){d.reRender();return}break}b===!0&&d.reRender()}),_defineProperty(_assertThisInitialized(d),"validateRules",function(f){var _=d.getNamePath(),y=d.getValue(),E=f||{},b=E.triggerName,T=E.validateOnly,A=T===void 0?!1:T,v=Promise.resolve().then(_asyncToGenerator(_regeneratorRuntime().mark(function S(){var O,I,x,P,w,C,k;return _regeneratorRuntime().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(d.mounted){R.next=2;break}return R.abrupt("return",[]);case 2:if(O=d.props,I=O.validateFirst,x=I===void 0?!1:I,P=O.messageVariables,w=O.validateDebounce,C=d.getRules(),b&&(C=C.filter(function(N){return N}).filter(function(N){var F=N.validateTrigger;if(!F)return!0;var L=toArray$5(F);return L.includes(b)})),!(w&&b)){R.next=10;break}return R.next=8,new Promise(function(N){setTimeout(N,w)});case 8:if(d.validatePromise===v){R.next=10;break}return R.abrupt("return",[]);case 10:return k=validateRules(_,y,C,f,x,P),k.catch(function(N){return N}).then(function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:EMPTY_ERRORS;if(d.validatePromise===v){var F;d.validatePromise=null;var L=[],X=[];(F=N.forEach)===null||F===void 0||F.call(N,function(V){var H=V.rule.warningOnly,ee=V.errors,Q=ee===void 0?EMPTY_ERRORS:ee;H?X.push.apply(X,_toConsumableArray(Q)):L.push.apply(L,_toConsumableArray(Q))}),d.errors=L,d.warnings=X,d.triggerMetaEvent(),d.reRender()}}),R.abrupt("return",k);case 13:case"end":return R.stop()}},S)})));return A||(d.validatePromise=v,d.dirty=!0,d.errors=EMPTY_ERRORS,d.warnings=EMPTY_ERRORS,d.triggerMetaEvent(),d.reRender()),v}),_defineProperty(_assertThisInitialized(d),"isFieldValidating",function(){return!!d.validatePromise}),_defineProperty(_assertThisInitialized(d),"isFieldTouched",function(){return d.touched}),_defineProperty(_assertThisInitialized(d),"isFieldDirty",function(){if(d.dirty||d.props.initialValue!==void 0)return!0;var f=d.props.fieldContext,_=f.getInternalHooks(HOOK_MARK),y=_.getInitialValue;return y(d.getNamePath())!==void 0}),_defineProperty(_assertThisInitialized(d),"getErrors",function(){return d.errors}),_defineProperty(_assertThisInitialized(d),"getWarnings",function(){return d.warnings}),_defineProperty(_assertThisInitialized(d),"isListField",function(){return d.props.isListField}),_defineProperty(_assertThisInitialized(d),"isList",function(){return d.props.isList}),_defineProperty(_assertThisInitialized(d),"isPreserve",function(){return d.props.preserve}),_defineProperty(_assertThisInitialized(d),"getMeta",function(){d.prevValidating=d.isFieldValidating();var f={touched:d.isFieldTouched(),validating:d.prevValidating,errors:d.errors,warnings:d.warnings,name:d.getNamePath(),validated:d.validatePromise===null};return f}),_defineProperty(_assertThisInitialized(d),"getOnlyChild",function(f){if(typeof f=="function"){var _=d.getMeta();return _objectSpread2(_objectSpread2({},d.getOnlyChild(f(d.getControlled(),_,d.props.fieldContext))),{},{isFunction:!0})}var y=toArray$6(f);return y.length!==1||!reactExports.isValidElement(y[0])?{child:y,isFunction:!1}:{child:y[0],isFunction:!1}}),_defineProperty(_assertThisInitialized(d),"getValue",function(f){var _=d.props.fieldContext.getFieldsValue,y=d.getNamePath();return get$1(f||_(!0),y)}),_defineProperty(_assertThisInitialized(d),"getControlled",function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=d.props,y=_.name,E=_.trigger,b=_.validateTrigger,T=_.getValueFromEvent,A=_.normalize,v=_.valuePropName,S=_.getValueProps,O=_.fieldContext,I=b!==void 0?b:O.validateTrigger,x=d.getNamePath(),P=O.getInternalHooks,w=O.getFieldsValue,C=P(HOOK_MARK),k=C.dispatch,R=d.getValue(),N=S||function(H){return _defineProperty({},v,H)},F=f[E],L=y!==void 0?N(R):{},X=_objectSpread2(_objectSpread2({},f),L);X[E]=function(){d.touched=!0,d.dirty=!0,d.triggerMetaEvent();for(var H,ee=arguments.length,Q=new Array(ee),Z=0;Z<ee;Z++)Q[Z]=arguments[Z];T?H=T.apply(void 0,Q):H=defaultGetValueFromEvent.apply(void 0,[v].concat(Q)),A&&(H=A(H,R,w(!0))),k({type:"updateValue",namePath:x,value:H}),F&&F.apply(void 0,Q)};var V=toArray$5(I||[]);return V.forEach(function(H){var ee=X[H];X[H]=function(){ee&&ee.apply(void 0,arguments);var Q=d.props.rules;Q&&Q.length&&k({type:"validateField",namePath:x,triggerName:H})}}),X}),u.fieldContext){var h=u.fieldContext.getInternalHooks,p=h(HOOK_MARK),m=p.initEntityValue;m(_assertThisInitialized(d))}return d}return _createClass(c,[{key:"componentDidMount",value:function(){var u=this.props,d=u.shouldUpdate,h=u.fieldContext;if(this.mounted=!0,h){var p=h.getInternalHooks,m=p(HOOK_MARK),f=m.registerField;this.cancelRegisterFunc=f(this)}d===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var u=this.state.resetCount,d=this.props.children,h=this.getOnlyChild(d),p=h.child,m=h.isFunction,f;return m?f=p:reactExports.isValidElement(p)?f=reactExports.cloneElement(p,this.getControlled(p.props)):(warningOnce(!p,"`children` of Field is not validate ReactElement."),f=p),reactExports.createElement(reactExports.Fragment,{key:u},f)}}]),c}(reactExports.Component);_defineProperty(Field,"contextType",Context),_defineProperty(Field,"defaultProps",{trigger:"onChange",valuePropName:"value"});function WrapperField(a){var s=a.name,c=_objectWithoutProperties(a,_excluded$l),u=reactExports.useContext(Context),d=reactExports.useContext(ListContext),h=s!==void 0?getNamePath(s):void 0,p="keep";return c.isListField||(p="_".concat((h||[]).join("_"))),reactExports.createElement(Field,_extends$2({key:p,name:h,isListField:!!d},c,{fieldContext:u}))}function List$2(a){var s=a.name,c=a.initialValue,u=a.children,d=a.rules,h=a.validateTrigger,p=a.isListField,m=reactExports.useContext(Context),f=reactExports.useContext(ListContext),_=reactExports.useRef({keys:[],id:0}),y=_.current,E=reactExports.useMemo(function(){var v=getNamePath(m.prefixName)||[];return[].concat(_toConsumableArray(v),_toConsumableArray(getNamePath(s)))},[m.prefixName,s]),b=reactExports.useMemo(function(){return _objectSpread2(_objectSpread2({},m),{},{prefixName:E})},[m,E]),T=reactExports.useMemo(function(){return{getKey:function(v){var S=E.length,O=v[S];return[y.keys[O],v.slice(S+1)]}}},[E]);if(typeof u!="function")return warningOnce(!1,"Form.List only accepts function as children."),null;var A=function(v,S,O){var I=O.source;return I==="internal"?!1:v!==S};return reactExports.createElement(ListContext.Provider,{value:T},reactExports.createElement(Context.Provider,{value:b},reactExports.createElement(WrapperField,{name:[],shouldUpdate:A,rules:d,validateTrigger:h,initialValue:c,isList:!0,isListField:p??!!f},function(v,S){var O=v.value,I=O===void 0?[]:O,x=v.onChange,P=m.getFieldValue,w=function(){var R=P(E||[]);return R||[]},C={add:function(R,N){var F=w();N>=0&&N<=F.length?(y.keys=[].concat(_toConsumableArray(y.keys.slice(0,N)),[y.id],_toConsumableArray(y.keys.slice(N))),x([].concat(_toConsumableArray(F.slice(0,N)),[R],_toConsumableArray(F.slice(N))))):(y.keys=[].concat(_toConsumableArray(y.keys),[y.id]),x([].concat(_toConsumableArray(F),[R]))),y.id+=1},remove:function(R){var N=w(),F=new Set(Array.isArray(R)?R:[R]);F.size<=0||(y.keys=y.keys.filter(function(L,X){return!F.has(X)}),x(N.filter(function(L,X){return!F.has(X)})))},move:function(R,N){if(R!==N){var F=w();R<0||R>=F.length||N<0||N>=F.length||(y.keys=move(y.keys,R,N),x(move(F,R,N)))}}},k=I||[];return Array.isArray(k)||(k=[]),u(k.map(function(R,N){var F=y.keys[N];return F===void 0&&(y.keys[N]=y.id,F=y.keys[N],y.id+=1),{name:N,key:F,isListField:!0}}),C,S)})))}function allPromiseFinish(a){var s=!1,c=a.length,u=[];return a.length?new Promise(function(d,h){a.forEach(function(p,m){p.catch(function(f){return s=!0,f}).then(function(f){c-=1,u[m]=f,!(c>0)&&(s&&h(u),d(u))})})}):Promise.resolve([])}var SPLIT="__@field_split__";function normalize(a){return a.map(function(s){return"".concat(_typeof(s),":").concat(s)}).join(SPLIT)}var NameMap=function(){function a(){_classCallCheck(this,a),_defineProperty(this,"kvs",new Map)}return _createClass(a,[{key:"set",value:function(s,c){this.kvs.set(normalize(s),c)}},{key:"get",value:function(s){return this.kvs.get(normalize(s))}},{key:"update",value:function(s,c){var u=this.get(s),d=c(u);d?this.set(s,d):this.delete(s)}},{key:"delete",value:function(s){this.kvs.delete(normalize(s))}},{key:"map",value:function(s){return _toConsumableArray(this.kvs.entries()).map(function(c){var u=_slicedToArray(c,2),d=u[0],h=u[1],p=d.split(SPLIT);return s({key:p.map(function(m){var f=m.match(/^([^:]*):(.*)$/),_=_slicedToArray(f,3),y=_[1],E=_[2];return y==="number"?Number(E):E}),value:h})})}},{key:"toJSON",value:function(){var s={};return this.map(function(c){var u=c.key,d=c.value;return s[u.join(".")]=d,null}),s}}]),a}(),_excluded$k=["name"],FormStore=_createClass(function a(s){var c=this;_classCallCheck(this,a),_defineProperty(this,"formHooked",!1),_defineProperty(this,"forceRootUpdate",void 0),_defineProperty(this,"subscribable",!0),_defineProperty(this,"store",{}),_defineProperty(this,"fieldEntities",[]),_defineProperty(this,"initialValues",{}),_defineProperty(this,"callbacks",{}),_defineProperty(this,"validateMessages",null),_defineProperty(this,"preserve",null),_defineProperty(this,"lastValidatePromise",null),_defineProperty(this,"getForm",function(){return{getFieldValue:c.getFieldValue,getFieldsValue:c.getFieldsValue,getFieldError:c.getFieldError,getFieldWarning:c.getFieldWarning,getFieldsError:c.getFieldsError,isFieldsTouched:c.isFieldsTouched,isFieldTouched:c.isFieldTouched,isFieldValidating:c.isFieldValidating,isFieldsValidating:c.isFieldsValidating,resetFields:c.resetFields,setFields:c.setFields,setFieldValue:c.setFieldValue,setFieldsValue:c.setFieldsValue,validateFields:c.validateFields,submit:c.submit,_init:!0,getInternalHooks:c.getInternalHooks}}),_defineProperty(this,"getInternalHooks",function(u){return u===HOOK_MARK?(c.formHooked=!0,{dispatch:c.dispatch,initEntityValue:c.initEntityValue,registerField:c.registerField,useSubscribe:c.useSubscribe,setInitialValues:c.setInitialValues,destroyForm:c.destroyForm,setCallbacks:c.setCallbacks,setValidateMessages:c.setValidateMessages,getFields:c.getFields,setPreserve:c.setPreserve,getInitialValue:c.getInitialValue,registerWatch:c.registerWatch}):(warningOnce(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),_defineProperty(this,"useSubscribe",function(u){c.subscribable=u}),_defineProperty(this,"prevWithoutPreserves",null),_defineProperty(this,"setInitialValues",function(u,d){if(c.initialValues=u||{},d){var h,p=merge$2(u,c.store);(h=c.prevWithoutPreserves)===null||h===void 0||h.map(function(m){var f=m.key;p=set(p,f,get$1(u,f))}),c.prevWithoutPreserves=null,c.updateStore(p)}}),_defineProperty(this,"destroyForm",function(){var u=new NameMap;c.getFieldEntities(!0).forEach(function(d){c.isMergedPreserve(d.isPreserve())||u.set(d.getNamePath(),!0)}),c.prevWithoutPreserves=u}),_defineProperty(this,"getInitialValue",function(u){var d=get$1(c.initialValues,u);return u.length?merge$2(d):d}),_defineProperty(this,"setCallbacks",function(u){c.callbacks=u}),_defineProperty(this,"setValidateMessages",function(u){c.validateMessages=u}),_defineProperty(this,"setPreserve",function(u){c.preserve=u}),_defineProperty(this,"watchList",[]),_defineProperty(this,"registerWatch",function(u){return c.watchList.push(u),function(){c.watchList=c.watchList.filter(function(d){return d!==u})}}),_defineProperty(this,"notifyWatch",function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(c.watchList.length){var d=c.getFieldsValue(),h=c.getFieldsValue(!0);c.watchList.forEach(function(p){p(d,h,u)})}}),_defineProperty(this,"timeoutId",null),_defineProperty(this,"warningUnhooked",function(){}),_defineProperty(this,"updateStore",function(u){c.store=u}),_defineProperty(this,"getFieldEntities",function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return u?c.fieldEntities.filter(function(d){return d.getNamePath().length}):c.fieldEntities}),_defineProperty(this,"getFieldsMap",function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,d=new NameMap;return c.getFieldEntities(u).forEach(function(h){var p=h.getNamePath();d.set(p,h)}),d}),_defineProperty(this,"getFieldEntitiesForNamePathList",function(u){if(!u)return c.getFieldEntities(!0);var d=c.getFieldsMap(!0);return u.map(function(h){var p=getNamePath(h);return d.get(p)||{INVALIDATE_NAME_PATH:getNamePath(h)}})}),_defineProperty(this,"getFieldsValue",function(u,d){c.warningUnhooked();var h,p,m;if(u===!0||Array.isArray(u)?(h=u,p=d):u&&_typeof(u)==="object"&&(m=u.strict,p=u.filter),h===!0&&!p)return c.store;var f=c.getFieldEntitiesForNamePathList(Array.isArray(h)?h:null),_=[];return f.forEach(function(y){var E,b,T="INVALIDATE_NAME_PATH"in y?y.INVALIDATE_NAME_PATH:y.getNamePath();if(m){var A,v;if((A=(v=y).isList)!==null&&A!==void 0&&A.call(v))return}else if(!h&&(E=(b=y).isListField)!==null&&E!==void 0&&E.call(b))return;if(!p)_.push(T);else{var S="getMeta"in y?y.getMeta():null;p(S)&&_.push(T)}}),cloneByNamePathList(c.store,_.map(getNamePath))}),_defineProperty(this,"getFieldValue",function(u){c.warningUnhooked();var d=getNamePath(u);return get$1(c.store,d)}),_defineProperty(this,"getFieldsError",function(u){c.warningUnhooked();var d=c.getFieldEntitiesForNamePathList(u);return d.map(function(h,p){return h&&!("INVALIDATE_NAME_PATH"in h)?{name:h.getNamePath(),errors:h.getErrors(),warnings:h.getWarnings()}:{name:getNamePath(u[p]),errors:[],warnings:[]}})}),_defineProperty(this,"getFieldError",function(u){c.warningUnhooked();var d=getNamePath(u),h=c.getFieldsError([d])[0];return h.errors}),_defineProperty(this,"getFieldWarning",function(u){c.warningUnhooked();var d=getNamePath(u),h=c.getFieldsError([d])[0];return h.warnings}),_defineProperty(this,"isFieldsTouched",function(){c.warningUnhooked();for(var u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];var p=d[0],m=d[1],f,_=!1;d.length===0?f=null:d.length===1?Array.isArray(p)?(f=p.map(getNamePath),_=!1):(f=null,_=p):(f=p.map(getNamePath),_=m);var y=c.getFieldEntities(!0),E=function(v){return v.isFieldTouched()};if(!f)return _?y.every(function(v){return E(v)||v.isList()}):y.some(E);var b=new NameMap;f.forEach(function(v){b.set(v,[])}),y.forEach(function(v){var S=v.getNamePath();f.forEach(function(O){O.every(function(I,x){return S[x]===I})&&b.update(O,function(I){return[].concat(_toConsumableArray(I),[v])})})});var T=function(v){return v.some(E)},A=b.map(function(v){var S=v.value;return S});return _?A.every(T):A.some(T)}),_defineProperty(this,"isFieldTouched",function(u){return c.warningUnhooked(),c.isFieldsTouched([u])}),_defineProperty(this,"isFieldsValidating",function(u){c.warningUnhooked();var d=c.getFieldEntities();if(!u)return d.some(function(p){return p.isFieldValidating()});var h=u.map(getNamePath);return d.some(function(p){var m=p.getNamePath();return containsNamePath(h,m)&&p.isFieldValidating()})}),_defineProperty(this,"isFieldValidating",function(u){return c.warningUnhooked(),c.isFieldsValidating([u])}),_defineProperty(this,"resetWithFieldInitialValue",function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=new NameMap,h=c.getFieldEntities(!0);h.forEach(function(f){var _=f.props.initialValue,y=f.getNamePath();if(_!==void 0){var E=d.get(y)||new Set;E.add({entity:f,value:_}),d.set(y,E)}});var p=function(f){f.forEach(function(_){var y=_.props.initialValue;if(y!==void 0){var E=_.getNamePath(),b=c.getInitialValue(E);if(b!==void 0)warningOnce(!1,"Form already set 'initialValues' with path '".concat(E.join("."),"'. Field can not overwrite it."));else{var T=d.get(E);if(T&&T.size>1)warningOnce(!1,"Multiple Field with path '".concat(E.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(T){var A=c.getFieldValue(E),v=_.isListField();!v&&(!u.skipExist||A===void 0)&&c.updateStore(set(c.store,E,_toConsumableArray(T)[0].value))}}}})},m;u.entities?m=u.entities:u.namePathList?(m=[],u.namePathList.forEach(function(f){var _=d.get(f);if(_){var y;(y=m).push.apply(y,_toConsumableArray(_toConsumableArray(_).map(function(E){return E.entity})))}})):m=h,p(m)}),_defineProperty(this,"resetFields",function(u){c.warningUnhooked();var d=c.store;if(!u){c.updateStore(merge$2(c.initialValues)),c.resetWithFieldInitialValue(),c.notifyObservers(d,null,{type:"reset"}),c.notifyWatch();return}var h=u.map(getNamePath);h.forEach(function(p){var m=c.getInitialValue(p);c.updateStore(set(c.store,p,m))}),c.resetWithFieldInitialValue({namePathList:h}),c.notifyObservers(d,h,{type:"reset"}),c.notifyWatch(h)}),_defineProperty(this,"setFields",function(u){c.warningUnhooked();var d=c.store,h=[];u.forEach(function(p){var m=p.name,f=_objectWithoutProperties(p,_excluded$k),_=getNamePath(m);h.push(_),"value"in f&&c.updateStore(set(c.store,_,f.value)),c.notifyObservers(d,[_],{type:"setField",data:p})}),c.notifyWatch(h)}),_defineProperty(this,"getFields",function(){var u=c.getFieldEntities(!0),d=u.map(function(h){var p=h.getNamePath(),m=h.getMeta(),f=_objectSpread2(_objectSpread2({},m),{},{name:p,value:c.getFieldValue(p)});return Object.defineProperty(f,"originRCField",{value:!0}),f});return d}),_defineProperty(this,"initEntityValue",function(u){var d=u.props.initialValue;if(d!==void 0){var h=u.getNamePath(),p=get$1(c.store,h);p===void 0&&c.updateStore(set(c.store,h,d))}}),_defineProperty(this,"isMergedPreserve",function(u){var d=u!==void 0?u:c.preserve;return d??!0}),_defineProperty(this,"registerField",function(u){c.fieldEntities.push(u);var d=u.getNamePath();if(c.notifyWatch([d]),u.props.initialValue!==void 0){var h=c.store;c.resetWithFieldInitialValue({entities:[u],skipExist:!0}),c.notifyObservers(h,[u.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(p,m){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(c.fieldEntities=c.fieldEntities.filter(function(E){return E!==u}),!c.isMergedPreserve(m)&&(!p||f.length>1)){var _=p?void 0:c.getInitialValue(d);if(d.length&&c.getFieldValue(d)!==_&&c.fieldEntities.every(function(E){return!matchNamePath(E.getNamePath(),d)})){var y=c.store;c.updateStore(set(y,d,_,!0)),c.notifyObservers(y,[d],{type:"remove"}),c.triggerDependenciesUpdate(y,d)}}c.notifyWatch([d])}}),_defineProperty(this,"dispatch",function(u){switch(u.type){case"updateValue":{var d=u.namePath,h=u.value;c.updateValue(d,h);break}case"validateField":{var p=u.namePath,m=u.triggerName;c.validateFields([p],{triggerName:m});break}}}),_defineProperty(this,"notifyObservers",function(u,d,h){if(c.subscribable){var p=_objectSpread2(_objectSpread2({},h),{},{store:c.getFieldsValue(!0)});c.getFieldEntities().forEach(function(m){var f=m.onStoreChange;f(u,d,p)})}else c.forceRootUpdate()}),_defineProperty(this,"triggerDependenciesUpdate",function(u,d){var h=c.getDependencyChildrenFields(d);return h.length&&c.validateFields(h),c.notifyObservers(u,h,{type:"dependenciesUpdate",relatedFields:[d].concat(_toConsumableArray(h))}),h}),_defineProperty(this,"updateValue",function(u,d){var h=getNamePath(u),p=c.store;c.updateStore(set(c.store,h,d)),c.notifyObservers(p,[h],{type:"valueUpdate",source:"internal"}),c.notifyWatch([h]);var m=c.triggerDependenciesUpdate(p,h),f=c.callbacks.onValuesChange;if(f){var _=cloneByNamePathList(c.store,[h]);f(_,c.getFieldsValue())}c.triggerOnFieldsChange([h].concat(_toConsumableArray(m)))}),_defineProperty(this,"setFieldsValue",function(u){c.warningUnhooked();var d=c.store;if(u){var h=merge$2(c.store,u);c.updateStore(h)}c.notifyObservers(d,null,{type:"valueUpdate",source:"external"}),c.notifyWatch()}),_defineProperty(this,"setFieldValue",function(u,d){c.setFields([{name:u,value:d}])}),_defineProperty(this,"getDependencyChildrenFields",function(u){var d=new Set,h=[],p=new NameMap;c.getFieldEntities().forEach(function(f){var _=f.props.dependencies;(_||[]).forEach(function(y){var E=getNamePath(y);p.update(E,function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return b.add(f),b})})});var m=function f(_){var y=p.get(_)||new Set;y.forEach(function(E){if(!d.has(E)){d.add(E);var b=E.getNamePath();E.isFieldDirty()&&b.length&&(h.push(b),f(b))}})};return m(u),h}),_defineProperty(this,"triggerOnFieldsChange",function(u,d){var h=c.callbacks.onFieldsChange;if(h){var p=c.getFields();if(d){var m=new NameMap;d.forEach(function(_){var y=_.name,E=_.errors;m.set(y,E)}),p.forEach(function(_){_.errors=m.get(_.name)||_.errors})}var f=p.filter(function(_){var y=_.name;return containsNamePath(u,y)});f.length&&h(f,p)}}),_defineProperty(this,"validateFields",function(u,d){c.warningUnhooked();var h,p;Array.isArray(u)||typeof u=="string"||typeof d=="string"?(h=u,p=d):p=u;var m=!!h,f=m?h.map(getNamePath):[],_=[],y=String(Date.now()),E=new Set,b=p||{},T=b.recursive,A=b.dirty;c.getFieldEntities(!0).forEach(function(I){if(m||f.push(I.getNamePath()),!(!I.props.rules||!I.props.rules.length)&&!(A&&!I.isFieldDirty())){var x=I.getNamePath();if(E.add(x.join(y)),!m||containsNamePath(f,x,T)){var P=I.validateRules(_objectSpread2({validateMessages:_objectSpread2(_objectSpread2({},defaultValidateMessages),c.validateMessages)},p));_.push(P.then(function(){return{name:x,errors:[],warnings:[]}}).catch(function(w){var C,k=[],R=[];return(C=w.forEach)===null||C===void 0||C.call(w,function(N){var F=N.rule.warningOnly,L=N.errors;F?R.push.apply(R,_toConsumableArray(L)):k.push.apply(k,_toConsumableArray(L))}),k.length?Promise.reject({name:x,errors:k,warnings:R}):{name:x,errors:k,warnings:R}}))}}});var v=allPromiseFinish(_);c.lastValidatePromise=v,v.catch(function(I){return I}).then(function(I){var x=I.map(function(P){var w=P.name;return w});c.notifyObservers(c.store,x,{type:"validateFinish"}),c.triggerOnFieldsChange(x,I)});var S=v.then(function(){return c.lastValidatePromise===v?Promise.resolve(c.getFieldsValue(f)):Promise.reject([])}).catch(function(I){var x=I.filter(function(P){return P&&P.errors.length});return Promise.reject({values:c.getFieldsValue(f),errorFields:x,outOfDate:c.lastValidatePromise!==v})});S.catch(function(I){return I});var O=f.filter(function(I){return E.has(I.join(y))});return c.triggerOnFieldsChange(O),S}),_defineProperty(this,"submit",function(){c.warningUnhooked(),c.validateFields().then(function(u){var d=c.callbacks.onFinish;if(d)try{d(u)}catch(h){console.error(h)}}).catch(function(u){var d=c.callbacks.onFinishFailed;d&&d(u)})}),this.forceRootUpdate=s});function useForm$1(a){var s=reactExports.useRef(),c=reactExports.useState({}),u=_slicedToArray(c,2),d=u[1];if(!s.current)if(a)s.current=a;else{var h=function(){d({})},p=new FormStore(h);s.current=p.getForm()}return[s.current]}var FormContext$1=reactExports.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),FormProvider$1=function(a){var s=a.validateMessages,c=a.onFormChange,u=a.onFormFinish,d=a.children,h=reactExports.useContext(FormContext$1),p=reactExports.useRef({});return reactExports.createElement(FormContext$1.Provider,{value:_objectSpread2(_objectSpread2({},h),{},{validateMessages:_objectSpread2(_objectSpread2({},h.validateMessages),s),triggerFormChange:function(m,f){c&&c(m,{changedFields:f,forms:p.current}),h.triggerFormChange(m,f)},triggerFormFinish:function(m,f){u&&u(m,{values:f,forms:p.current}),h.triggerFormFinish(m,f)},registerForm:function(m,f){m&&(p.current=_objectSpread2(_objectSpread2({},p.current),{},_defineProperty({},m,f))),h.registerForm(m,f)},unregisterForm:function(m){var f=_objectSpread2({},p.current);delete f[m],p.current=f,h.unregisterForm(m)}})},d)},_excluded$j=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],Form$2=function(a,s){var c=a.name,u=a.initialValues,d=a.fields,h=a.form,p=a.preserve,m=a.children,f=a.component,_=f===void 0?"form":f,y=a.validateMessages,E=a.validateTrigger,b=E===void 0?"onChange":E,T=a.onValuesChange,A=a.onFieldsChange,v=a.onFinish,S=a.onFinishFailed,O=_objectWithoutProperties(a,_excluded$j),I=reactExports.useContext(FormContext$1),x=useForm$1(h),P=_slicedToArray(x,1),w=P[0],C=w.getInternalHooks(HOOK_MARK),k=C.useSubscribe,R=C.setInitialValues,N=C.setCallbacks,F=C.setValidateMessages,L=C.setPreserve,X=C.destroyForm;reactExports.useImperativeHandle(s,function(){return w}),reactExports.useEffect(function(){return I.registerForm(c,w),function(){I.unregisterForm(c)}},[I,w,c]),F(_objectSpread2(_objectSpread2({},I.validateMessages),y)),N({onValuesChange:T,onFieldsChange:function(ne){if(I.triggerFormChange(c,ne),A){for(var le=arguments.length,he=new Array(le>1?le-1:0),Y=1;Y<le;Y++)he[Y-1]=arguments[Y];A.apply(void 0,[ne].concat(he))}},onFinish:function(ne){I.triggerFormFinish(c,ne),v&&v(ne)},onFinishFailed:S}),L(p);var V=reactExports.useRef(null);R(u,!V.current),V.current||(V.current=!0),reactExports.useEffect(function(){return X},[]);var H,ee=typeof m=="function";if(ee){var Q=w.getFieldsValue(!0);H=m(Q,w)}else H=m;k(!ee);var Z=reactExports.useRef();reactExports.useEffect(function(){isSimilar(Z.current||[],d||[])||w.setFields(d||[]),Z.current=d},[d,w]);var K=reactExports.useMemo(function(){return _objectSpread2(_objectSpread2({},w),{},{validateTrigger:b})},[w,b]),se=reactExports.createElement(ListContext.Provider,{value:null},reactExports.createElement(Context.Provider,{value:K},H));return _===!1?se:reactExports.createElement(_,_extends$2({},O,{onSubmit:function(ne){ne.preventDefault(),ne.stopPropagation(),w.submit()},onReset:function(ne){var le;ne.preventDefault(),w.resetFields(),(le=O.onReset)===null||le===void 0||le.call(O,ne)}}),se)};function stringify$2(a){try{return JSON.stringify(a)}catch{return Math.random()}}function useWatch$1(){for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];var u=s[0],d=s[1],h=d===void 0?{}:d,p=isFormInstance(h)?{form:h}:h,m=p.form,f=reactExports.useState(),_=_slicedToArray(f,2),y=_[0],E=_[1],b=reactExports.useMemo(function(){return stringify$2(y)},[y]),T=reactExports.useRef(b);T.current=b;var A=reactExports.useContext(Context),v=m||A,S=v&&v._init,O=getNamePath(u),I=reactExports.useRef(O);return I.current=O,reactExports.useEffect(function(){if(S){var x=v.getFieldsValue,P=v.getInternalHooks,w=P(HOOK_MARK),C=w.registerWatch,k=function(F,L){var X=p.preserve?L:F;return typeof u=="function"?u(X):get$1(X,I.current)},R=C(function(F,L){var X=k(F,L),V=stringify$2(X);T.current!==V&&(T.current=V,E(X))}),N=k(x(),x(!0));return y!==N&&E(N),R}},[S]),y}var InternalForm$1=reactExports.forwardRef(Form$2),RefForm=InternalForm$1;RefForm.FormProvider=FormProvider$1,RefForm.Field=WrapperField,RefForm.List=List$2,RefForm.useForm=useForm$1,RefForm.useWatch=useWatch$1;const FormContext=reactExports.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),NoStyleItemContext=reactExports.createContext(null),FormProvider=a=>{const s=omit(a,["prefixCls"]);return reactExports.createElement(FormProvider$1,Object.assign({},s))},FormItemPrefixContext=reactExports.createContext({prefixCls:""}),FormItemInputContext=reactExports.createContext({}),NoFormStyle=a=>{let{children:s,status:c,override:u}=a;const d=reactExports.useContext(FormItemInputContext),h=reactExports.useMemo(()=>{const p=Object.assign({},d);return u&&delete p.isFormItemInput,c&&(delete p.status,delete p.hasFeedback,delete p.feedbackIcon),p},[c,u,d]);return reactExports.createElement(FormItemInputContext.Provider,{value:h},s)},VariantContext=reactExports.createContext(void 0);function voidFunc(){}const WatermarkContext=reactExports.createContext({add:voidFunc,remove:voidFunc});function usePanelRef(a){const s=reactExports.useContext(WatermarkContext),c=reactExports.useRef();return useEvent(u=>{if(u){const d=a?u.querySelector(a):u;s.add(d),c.current=d}else s.remove(c.current)})}const NormalCancelBtn=()=>{const{cancelButtonProps:a,cancelTextLocale:s,onCancel:c}=reactExports.useContext(ModalContext);return React.createElement(Button$1,Object.assign({onClick:c},a),s)},NormalCancelBtn$1=NormalCancelBtn,NormalOkBtn=()=>{const{confirmLoading:a,okButtonProps:s,okType:c,okTextLocale:u,onOk:d}=reactExports.useContext(ModalContext);return React.createElement(Button$1,Object.assign({},convertLegacyProps(c),{loading:a,onClick:d},s),u)},NormalOkBtn$1=NormalOkBtn;function renderCloseIcon(a,s){return React.createElement("span",{className:`${a}-close-x`},s||React.createElement(CloseOutlined$1,{className:`${a}-close-icon`}))}const Footer=a=>{const{okText:s,okType:c="primary",cancelText:u,confirmLoading:d,onOk:h,onCancel:p,okButtonProps:m,cancelButtonProps:f,footer:_}=a,[y]=useLocale("Modal",getConfirmLocale()),E=s||(y==null?void 0:y.okText),b=u||(y==null?void 0:y.cancelText),T={confirmLoading:d,okButtonProps:m,cancelButtonProps:f,okTextLocale:E,cancelTextLocale:b,okType:c,onOk:h,onCancel:p},A=React.useMemo(()=>T,_toConsumableArray(Object.values(T)));let v;return typeof _=="function"||typeof _>"u"?(v=React.createElement(React.Fragment,null,React.createElement(NormalCancelBtn$1,null),React.createElement(NormalOkBtn$1,null)),typeof _=="function"&&(v=_(v,{OkBtn:NormalOkBtn$1,CancelBtn:NormalCancelBtn$1})),v=React.createElement(ModalContextProvider,{value:A},v)):v=_,React.createElement(DisabledContextProvider,{disabled:!1},v)},initMotionCommon=a=>({animationDuration:a,animationFillMode:"both"}),initMotionCommonLeave=a=>({animationDuration:a,animationFillMode:"both"}),initMotion=function(a,s,c,u){const d=arguments.length>4&&arguments[4]!==void 0&&arguments[4]?"&":"";return{[`
      ${d}${a}-enter,
      ${d}${a}-appear
    `]:Object.assign(Object.assign({},initMotionCommon(u)),{animationPlayState:"paused"}),[`${d}${a}-leave`]:Object.assign(Object.assign({},initMotionCommonLeave(u)),{animationPlayState:"paused"}),[`
      ${d}${a}-enter${a}-enter-active,
      ${d}${a}-appear${a}-appear-active
    `]:{animationName:s,animationPlayState:"running"},[`${d}${a}-leave${a}-leave-active`]:{animationName:c,animationPlayState:"running",pointerEvents:"none"}}},fadeIn=new Keyframe("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),fadeOut=new Keyframe("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),initFadeMotion=function(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:c}=a,u=`${c}-fade`,d=s?"&":"";return[initMotion(u,fadeIn,fadeOut,a.motionDurationMid,s),{[`
        ${d}${u}-enter,
        ${d}${u}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${d}${u}-leave`]:{animationTimingFunction:"linear"}}]},moveDownIn=new Keyframe("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),moveDownOut=new Keyframe("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),moveLeftIn=new Keyframe("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),moveLeftOut=new Keyframe("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),moveRightIn=new Keyframe("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),moveRightOut=new Keyframe("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),moveUpIn=new Keyframe("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),moveUpOut=new Keyframe("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),moveMotion={"move-up":{inKeyframes:moveUpIn,outKeyframes:moveUpOut},"move-down":{inKeyframes:moveDownIn,outKeyframes:moveDownOut},"move-left":{inKeyframes:moveLeftIn,outKeyframes:moveLeftOut},"move-right":{inKeyframes:moveRightIn,outKeyframes:moveRightOut}},initMoveMotion=(a,s)=>{const{antCls:c}=a,u=`${c}-${s}`,{inKeyframes:d,outKeyframes:h}=moveMotion[s];return[initMotion(u,d,h,a.motionDurationMid),{[`
        ${u}-enter,
        ${u}-appear
      `]:{opacity:0,animationTimingFunction:a.motionEaseOutCirc},[`${u}-leave`]:{animationTimingFunction:a.motionEaseInOutCirc}}]},slideUpIn=new Keyframe("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),slideUpOut=new Keyframe("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),slideDownIn=new Keyframe("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),slideDownOut=new Keyframe("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),slideLeftIn=new Keyframe("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),slideLeftOut=new Keyframe("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),slideRightIn=new Keyframe("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),slideRightOut=new Keyframe("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),slideMotion={"slide-up":{inKeyframes:slideUpIn,outKeyframes:slideUpOut},"slide-down":{inKeyframes:slideDownIn,outKeyframes:slideDownOut},"slide-left":{inKeyframes:slideLeftIn,outKeyframes:slideLeftOut},"slide-right":{inKeyframes:slideRightIn,outKeyframes:slideRightOut}},initSlideMotion=(a,s)=>{const{antCls:c}=a,u=`${c}-${s}`,{inKeyframes:d,outKeyframes:h}=slideMotion[s];return[initMotion(u,d,h,a.motionDurationMid),{[`
      ${u}-enter,
      ${u}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:a.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${u}-leave`]:{animationTimingFunction:a.motionEaseInQuint}}]},zoomIn=new Keyframe("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),zoomOut=new Keyframe("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),zoomBigIn=new Keyframe("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),zoomBigOut=new Keyframe("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),zoomUpIn=new Keyframe("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),zoomUpOut=new Keyframe("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),zoomLeftIn=new Keyframe("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),zoomLeftOut=new Keyframe("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),zoomRightIn=new Keyframe("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),zoomRightOut=new Keyframe("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),zoomDownIn=new Keyframe("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),zoomDownOut=new Keyframe("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),zoomMotion={zoom:{inKeyframes:zoomIn,outKeyframes:zoomOut},"zoom-big":{inKeyframes:zoomBigIn,outKeyframes:zoomBigOut},"zoom-big-fast":{inKeyframes:zoomBigIn,outKeyframes:zoomBigOut},"zoom-left":{inKeyframes:zoomLeftIn,outKeyframes:zoomLeftOut},"zoom-right":{inKeyframes:zoomRightIn,outKeyframes:zoomRightOut},"zoom-up":{inKeyframes:zoomUpIn,outKeyframes:zoomUpOut},"zoom-down":{inKeyframes:zoomDownIn,outKeyframes:zoomDownOut}},initZoomMotion=(a,s)=>{const{antCls:c}=a,u=`${c}-${s}`,{inKeyframes:d,outKeyframes:h}=zoomMotion[s];return[initMotion(u,d,h,s==="zoom-big-fast"?a.motionDurationFast:a.motionDurationMid),{[`
        ${u}-enter,
        ${u}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:a.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${u}-leave`]:{animationTimingFunction:a.motionEaseInOutCirc}}]},genCollapseMotion=a=>({[a.componentCls]:{[`${a.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${a.motionDurationMid} ${a.motionEaseInOut},
        opacity ${a.motionDurationMid} ${a.motionEaseInOut} !important`}},[`${a.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${a.motionDurationMid} ${a.motionEaseInOut},
        opacity ${a.motionDurationMid} ${a.motionEaseInOut} !important`}}}),genCollapseMotion$1=genCollapseMotion;function box(a){return{position:a,inset:0}}const genModalMaskStyle=a=>{const{componentCls:s,antCls:c}=a;return[{[`${s}-root`]:{[`${s}${c}-zoom-enter, ${s}${c}-zoom-appear`]:{transform:"none",opacity:0,animationDuration:a.motionDurationSlow,userSelect:"none"},[`${s}${c}-zoom-leave ${s}-content`]:{pointerEvents:"none"},[`${s}-mask`]:Object.assign(Object.assign({},box("fixed")),{zIndex:a.zIndexPopupBase,height:"100%",backgroundColor:a.colorBgMask,pointerEvents:"none",[`${s}-hidden`]:{display:"none"}}),[`${s}-wrap`]:Object.assign(Object.assign({},box("fixed")),{zIndex:a.zIndexPopupBase,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"})}},{[`${s}-root`]:initFadeMotion(a)}]},genModalStyle=a=>{const{componentCls:s}=a;return[{[`${s}-root`]:{[`${s}-wrap-rtl`]:{direction:"rtl"},[`${s}-centered`]:{textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'},[s]:{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"}},[`@media (max-width: ${a.screenSMMax}px)`]:{[s]:{maxWidth:"calc(100vw - 16px)",margin:`${unit(a.marginXS)} auto`},[`${s}-centered`]:{[s]:{flex:1}}}}},{[s]:Object.assign(Object.assign({},resetComponent(a)),{pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:`calc(100vw - ${unit(a.calc(a.margin).mul(2).equal())})`,margin:"0 auto",paddingBottom:a.paddingLG,[`${s}-title`]:{margin:0,color:a.titleColor,fontWeight:a.fontWeightStrong,fontSize:a.titleFontSize,lineHeight:a.titleLineHeight,wordWrap:"break-word"},[`${s}-content`]:{position:"relative",backgroundColor:a.contentBg,backgroundClip:"padding-box",border:0,borderRadius:a.borderRadiusLG,boxShadow:a.boxShadow,pointerEvents:"auto",padding:a.contentPadding},[`${s}-close`]:Object.assign({position:"absolute",top:a.calc(a.modalHeaderHeight).sub(a.modalCloseBtnSize).div(2).equal(),insetInlineEnd:a.calc(a.modalHeaderHeight).sub(a.modalCloseBtnSize).div(2).equal(),zIndex:a.calc(a.zIndexPopupBase).add(10).equal(),padding:0,color:a.modalCloseIconColor,fontWeight:a.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:a.borderRadiusSM,width:a.modalCloseBtnSize,height:a.modalCloseBtnSize,border:0,outline:0,cursor:"pointer",transition:`color ${a.motionDurationMid}, background-color ${a.motionDurationMid}`,"&-x":{display:"flex",fontSize:a.fontSizeLG,fontStyle:"normal",lineHeight:`${unit(a.modalCloseBtnSize)}`,justifyContent:"center",textTransform:"none",textRendering:"auto"},"&:hover":{color:a.modalCloseIconHoverColor,backgroundColor:a.colorBgTextHover,textDecoration:"none"},"&:active":{backgroundColor:a.colorBgTextActive}},genFocusStyle(a)),[`${s}-header`]:{color:a.colorText,background:a.headerBg,borderRadius:`${unit(a.borderRadiusLG)} ${unit(a.borderRadiusLG)} 0 0`,marginBottom:a.headerMarginBottom,padding:a.headerPadding,borderBottom:a.headerBorderBottom},[`${s}-body`]:{fontSize:a.fontSize,lineHeight:a.lineHeight,wordWrap:"break-word",padding:a.bodyPadding},[`${s}-footer`]:{textAlign:"end",background:a.footerBg,marginTop:a.footerMarginTop,padding:a.footerPadding,borderTop:a.footerBorderTop,borderRadius:a.footerBorderRadius,[`> ${a.antCls}-btn + ${a.antCls}-btn`]:{marginInlineStart:a.marginXS}},[`${s}-open`]:{overflow:"hidden"}})},{[`${s}-pure-panel`]:{top:"auto",padding:0,display:"flex",flexDirection:"column",[`${s}-content,
          ${s}-body,
          ${s}-confirm-body-wrapper`]:{display:"flex",flexDirection:"column",flex:"auto"},[`${s}-confirm-body`]:{marginBottom:"auto"}}}]},genRTLStyle=a=>{const{componentCls:s}=a;return{[`${s}-root`]:{[`${s}-wrap-rtl`]:{direction:"rtl",[`${s}-confirm-body`]:{direction:"rtl"}}}}},prepareToken$2=a=>{const s=a.padding,c=a.fontSizeHeading5,u=a.lineHeightHeading5;return merge$1(a,{modalHeaderHeight:a.calc(a.calc(u).mul(c).equal()).add(a.calc(s).mul(2).equal()).equal(),modalFooterBorderColorSplit:a.colorSplit,modalFooterBorderStyle:a.lineType,modalFooterBorderWidth:a.lineWidth,modalCloseIconColor:a.colorIcon,modalCloseIconHoverColor:a.colorIconHover,modalCloseBtnSize:a.controlHeight,modalConfirmIconSize:a.fontHeight,modalTitleHeight:a.calc(a.titleFontSize).mul(a.titleLineHeight).equal()})},prepareComponentToken$9=a=>({footerBg:"transparent",headerBg:a.colorBgElevated,titleLineHeight:a.lineHeightHeading5,titleFontSize:a.fontSizeHeading5,contentBg:a.colorBgElevated,titleColor:a.colorTextHeading,contentPadding:a.wireframe?0:`${unit(a.paddingMD)} ${unit(a.paddingContentHorizontalLG)}`,headerPadding:a.wireframe?`${unit(a.padding)} ${unit(a.paddingLG)}`:0,headerBorderBottom:a.wireframe?`${unit(a.lineWidth)} ${a.lineType} ${a.colorSplit}`:"none",headerMarginBottom:a.wireframe?0:a.marginXS,bodyPadding:a.wireframe?a.paddingLG:0,footerPadding:a.wireframe?`${unit(a.paddingXS)} ${unit(a.padding)}`:0,footerBorderTop:a.wireframe?`${unit(a.lineWidth)} ${a.lineType} ${a.colorSplit}`:"none",footerBorderRadius:a.wireframe?`0 0 ${unit(a.borderRadiusLG)} ${unit(a.borderRadiusLG)}`:0,footerMarginTop:a.wireframe?0:a.marginSM,confirmBodyPadding:a.wireframe?`${unit(a.padding*2)} ${unit(a.padding*2)} ${unit(a.paddingLG)}`:0,confirmIconMarginInlineEnd:a.wireframe?a.margin:a.marginSM,confirmBtnsMarginTop:a.wireframe?a.marginLG:a.marginSM}),useStyle$a=genStyleHooks("Modal",a=>{const s=prepareToken$2(a);return[genModalStyle(s),genRTLStyle(s),genModalMaskStyle(s),initZoomMotion(s,"zoom")]},prepareComponentToken$9,{unitless:{titleLineHeight:!0}});var __rest$n=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};let mousePosition;const getClickPosition=a=>{mousePosition={x:a.pageX,y:a.pageY},setTimeout(()=>{mousePosition=null},100)};canUseDocElement()&&document.documentElement.addEventListener("click",getClickPosition,!0);const Modal$2=a=>{var s;const{getPopupContainer:c,getPrefixCls:u,direction:d,modal:h}=reactExports.useContext(ConfigContext),p=ne=>{const{onCancel:le}=a;le==null||le(ne)},m=ne=>{const{onOk:le}=a;le==null||le(ne)},{prefixCls:f,className:_,rootClassName:y,open:E,wrapClassName:b,centered:T,getContainer:A,focusTriggerAfterClose:v=!0,style:S,visible:O,width:I=520,footer:x,classNames:P,styles:w}=a,C=__rest$n(a,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles"]),k=u("modal",f),R=u(),N=useCSSVarCls(k),[F,L,X]=useStyle$a(k,N),V=classNames(b,{[`${k}-centered`]:!!T,[`${k}-wrap-rtl`]:d==="rtl"}),H=x!==null&&reactExports.createElement(Footer,Object.assign({},a,{onOk:m,onCancel:p})),[ee,Q]=useClosable(pickClosable(a),pickClosable(h),{closable:!0,closeIcon:reactExports.createElement(CloseOutlined$1,{className:`${k}-close-icon`}),closeIconRender:ne=>renderCloseIcon(k,ne)}),Z=usePanelRef(`.${k}-content`),[K,se]=useZIndex("Modal",C.zIndex);return F(reactExports.createElement(NoCompactStyle,null,reactExports.createElement(NoFormStyle,{status:!0,override:!0},reactExports.createElement(zIndexContext$1.Provider,{value:se},reactExports.createElement(DialogWrap,Object.assign({width:I},C,{zIndex:K,getContainer:A===void 0?c:A,prefixCls:k,rootClassName:classNames(L,y,X,N),footer:H,visible:E??O,mousePosition:(s=C.mousePosition)!==null&&s!==void 0?s:mousePosition,onClose:p,closable:ee,closeIcon:Q,focusTriggerAfterClose:v,transitionName:getTransitionName(R,"zoom",a.transitionName),maskTransitionName:getTransitionName(R,"fade",a.maskTransitionName),className:classNames(L,_,h==null?void 0:h.className),style:Object.assign(Object.assign({},h==null?void 0:h.style),S),classNames:Object.assign(Object.assign(Object.assign({},h==null?void 0:h.classNames),P),{wrapper:classNames(V,P==null?void 0:P.wrapper)}),styles:Object.assign(Object.assign({},h==null?void 0:h.styles),w),panelRef:Z}))))))},OriginModal=Modal$2,genModalConfirmStyle=a=>{const{componentCls:s,titleFontSize:c,titleLineHeight:u,modalConfirmIconSize:d,fontSize:h,lineHeight:p,modalTitleHeight:m,fontHeight:f,confirmBodyPadding:_}=a,y=`${s}-confirm`;return{[y]:{"&-rtl":{direction:"rtl"},[`${a.antCls}-modal-header`]:{display:"none"},[`${y}-body-wrapper`]:Object.assign({},clearFix()),[`&${s} ${s}-body`]:{padding:_},[`${y}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${a.iconCls}`]:{flex:"none",fontSize:d,marginInlineEnd:a.confirmIconMarginInlineEnd,marginTop:a.calc(a.calc(f).sub(d).equal()).div(2).equal()},[`&-has-title > ${a.iconCls}`]:{marginTop:a.calc(a.calc(m).sub(d).equal()).div(2).equal()}},[`${y}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:a.marginXS},[`${a.iconCls} + ${y}-paragraph`]:{maxWidth:`calc(100% - ${unit(a.calc(a.modalConfirmIconSize).add(a.marginSM).equal())})`},[`${y}-title`]:{color:a.colorTextHeading,fontWeight:a.fontWeightStrong,fontSize:c,lineHeight:u},[`${y}-content`]:{color:a.colorText,fontSize:h,lineHeight:p},[`${y}-btns`]:{textAlign:"end",marginTop:a.confirmBtnsMarginTop,[`${a.antCls}-btn + ${a.antCls}-btn`]:{marginBottom:0,marginInlineStart:a.marginXS}}},[`${y}-error ${y}-body > ${a.iconCls}`]:{color:a.colorError},[`${y}-warning ${y}-body > ${a.iconCls},
        ${y}-confirm ${y}-body > ${a.iconCls}`]:{color:a.colorWarning},[`${y}-info ${y}-body > ${a.iconCls}`]:{color:a.colorInfo},[`${y}-success ${y}-body > ${a.iconCls}`]:{color:a.colorSuccess}}},Confirm=genSubStyleComponent(["Modal","confirm"],a=>{const s=prepareToken$2(a);return[genModalConfirmStyle(s)]},prepareComponentToken$9,{order:-1e3});var __rest$m=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};function ConfirmContent(a){const{prefixCls:s,icon:c,okText:u,cancelText:d,confirmPrefixCls:h,type:p,okCancel:m,footer:f,locale:_}=a,y=__rest$m(a,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let E=c;if(!c&&c!==null)switch(p){case"info":E=reactExports.createElement(InfoCircleFilled$1,null);break;case"success":E=reactExports.createElement(CheckCircleFilled$1,null);break;case"error":E=reactExports.createElement(CloseCircleFilled$1,null);break;default:E=reactExports.createElement(ExclamationCircleFilled$1,null)}const b=m??p==="confirm",T=a.autoFocusButton===null?!1:a.autoFocusButton||"ok",[A]=useLocale("Modal"),v=_||A,S=u||(b?v==null?void 0:v.okText:v==null?void 0:v.justOkText),O=d||(v==null?void 0:v.cancelText),I=Object.assign({autoFocusButton:T,cancelTextLocale:O,okTextLocale:S,mergedOkCancel:b},y),x=reactExports.useMemo(()=>I,_toConsumableArray(Object.values(I))),P=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(CancelBtn,null),reactExports.createElement(OkBtn,null)),w=a.title!==void 0&&a.title!==null,C=`${h}-body`;return reactExports.createElement("div",{className:`${h}-body-wrapper`},reactExports.createElement("div",{className:classNames(C,{[`${C}-has-title`]:w})},E,reactExports.createElement("div",{className:`${h}-paragraph`},w&&reactExports.createElement("span",{className:`${h}-title`},a.title),reactExports.createElement("div",{className:`${h}-content`},a.content))),f===void 0||typeof f=="function"?reactExports.createElement(ModalContextProvider,{value:x},reactExports.createElement("div",{className:`${h}-btns`},typeof f=="function"?f(P,{OkBtn,CancelBtn}):P)):f,reactExports.createElement(Confirm,{prefixCls:s}))}const ConfirmDialog=a=>{const{close:s,zIndex:c,afterClose:u,open:d,keyboard:h,centered:p,getContainer:m,maskStyle:f,direction:_,prefixCls:y,wrapClassName:E,rootPrefixCls:b,bodyStyle:T,closable:A=!1,closeIcon:v,modalRender:S,focusTriggerAfterClose:O,onConfirm:I,styles:x}=a,P=`${y}-confirm`,w=a.width||416,C=a.style||{},k=a.mask===void 0?!0:a.mask,R=a.maskClosable===void 0?!1:a.maskClosable,N=classNames(P,`${P}-${a.type}`,{[`${P}-rtl`]:_==="rtl"},a.className),[,F]=useToken(),L=reactExports.useMemo(()=>c!==void 0?c:F.zIndexPopupBase+CONTAINER_MAX_OFFSET,[c,F]);return reactExports.createElement(OriginModal,{prefixCls:y,className:N,wrapClassName:classNames({[`${P}-centered`]:!!a.centered},E),onCancel:()=>{s==null||s({triggerCancel:!0}),I==null||I(!1)},open:d,title:"",footer:null,transitionName:getTransitionName(b||"","zoom",a.transitionName),maskTransitionName:getTransitionName(b||"","fade",a.maskTransitionName),mask:k,maskClosable:R,style:C,styles:Object.assign({body:T,mask:f},x),width:w,zIndex:L,afterClose:u,keyboard:h,centered:p,getContainer:m,closable:A,closeIcon:v,modalRender:S,focusTriggerAfterClose:O},reactExports.createElement(ConfirmContent,Object.assign({},a,{confirmPrefixCls:P})))},ConfirmDialogWrapper$1=a=>{const{rootPrefixCls:s,iconPrefixCls:c,direction:u,theme:d}=a;return reactExports.createElement(ConfigProvider,{prefixCls:s,iconPrefixCls:c,direction:u,theme:d},reactExports.createElement(ConfirmDialog,Object.assign({},a)))},ConfirmDialog$1=ConfirmDialogWrapper$1,destroyFns=[];let defaultRootPrefixCls="";function getRootPrefixCls(){return defaultRootPrefixCls}const ConfirmDialogWrapper=a=>{var s,c;const{prefixCls:u,getContainer:d,direction:h}=a,p=getConfirmLocale(),m=reactExports.useContext(ConfigContext),f=getRootPrefixCls()||m.getPrefixCls(),_=u||`${f}-modal`;let y=d;return y===!1&&(y=void 0),React.createElement(ConfirmDialog$1,Object.assign({},a,{rootPrefixCls:f,prefixCls:_,iconPrefixCls:m.iconPrefixCls,theme:m.theme,direction:h??m.direction,locale:(c=(s=m.locale)===null||s===void 0?void 0:s.Modal)!==null&&c!==void 0?c:p,getContainer:y}))};function confirm(a){const s=globalConfig(),c=document.createDocumentFragment();let u=Object.assign(Object.assign({},a),{close:m,open:!0}),d;function h(){for(var _=arguments.length,y=new Array(_),E=0;E<_;E++)y[E]=arguments[E];const b=y.some(T=>T&&T.triggerCancel);a.onCancel&&b&&a.onCancel.apply(a,[()=>{}].concat(_toConsumableArray(y.slice(1))));for(let T=0;T<destroyFns.length;T++)if(destroyFns[T]===m){destroyFns.splice(T,1);break}unmount(c)}function p(_){clearTimeout(d),d=setTimeout(()=>{const y=s.getPrefixCls(void 0,getRootPrefixCls()),E=s.getIconPrefixCls(),b=s.getTheme(),T=React.createElement(ConfirmDialogWrapper,Object.assign({},_));render$2(React.createElement(ConfigProvider,{prefixCls:y,iconPrefixCls:E,theme:b},s.holderRender?s.holderRender(T):T),c)})}function m(){for(var _=arguments.length,y=new Array(_),E=0;E<_;E++)y[E]=arguments[E];u=Object.assign(Object.assign({},u),{open:!1,afterClose:()=>{typeof a.afterClose=="function"&&a.afterClose(),h.apply(this,y)}}),u.visible&&delete u.visible,p(u)}function f(_){typeof _=="function"?u=_(u):u=Object.assign(Object.assign({},u),_),p(u)}return p(u),destroyFns.push(m),{destroy:m,update:f}}function withWarn(a){return Object.assign(Object.assign({},a),{type:"warning"})}function withInfo(a){return Object.assign(Object.assign({},a),{type:"info"})}function withSuccess(a){return Object.assign(Object.assign({},a),{type:"success"})}function withError(a){return Object.assign(Object.assign({},a),{type:"error"})}function withConfirm(a){return Object.assign(Object.assign({},a),{type:"confirm"})}function modalGlobalConfig(a){let{rootPrefixCls:s}=a;defaultRootPrefixCls=s}var __rest$l=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};const HookModal=(a,s)=>{var c,{afterClose:u,config:d}=a,h=__rest$l(a,["afterClose","config"]);const[p,m]=reactExports.useState(!0),[f,_]=reactExports.useState(d),{direction:y,getPrefixCls:E}=reactExports.useContext(ConfigContext),b=E("modal"),T=E(),A=()=>{var I;u(),(I=f.afterClose)===null||I===void 0||I.call(f)},v=function(){m(!1);for(var I=arguments.length,x=new Array(I),P=0;P<I;P++)x[P]=arguments[P];const w=x.some(C=>C&&C.triggerCancel);f.onCancel&&w&&f.onCancel.apply(f,[()=>{}].concat(_toConsumableArray(x.slice(1))))};reactExports.useImperativeHandle(s,()=>({destroy:v,update:I=>{_(x=>Object.assign(Object.assign({},x),I))}}));const S=(c=f.okCancel)!==null&&c!==void 0?c:f.type==="confirm",[O]=useLocale("Modal",defaultLocale.Modal);return reactExports.createElement(ConfirmDialog$1,Object.assign({prefixCls:b,rootPrefixCls:T},f,{close:v,open:p,afterClose:A,okText:f.okText||(S?O==null?void 0:O.okText:O==null?void 0:O.justOkText),direction:f.direction||y,cancelText:f.cancelText||(O==null?void 0:O.cancelText)},h))},HookModal$1=reactExports.forwardRef(HookModal);let uuid$1=0;const ElementsHolder=reactExports.memo(reactExports.forwardRef((a,s)=>{const[c,u]=usePatchElement();return reactExports.useImperativeHandle(s,()=>({patchElement:u}),[]),reactExports.createElement(reactExports.Fragment,null,c)}));function useModal(){const a=reactExports.useRef(null),[s,c]=reactExports.useState([]);reactExports.useEffect(()=>{s.length&&(_toConsumableArray(s).forEach(d=>{d()}),c([]))},[s]);const u=reactExports.useCallback(d=>function(h){var p;uuid$1+=1;const m=reactExports.createRef();let f;const _=new Promise(T=>{f=T});let y=!1,E;const b=reactExports.createElement(HookModal$1,{key:`modal-${uuid$1}`,config:d(h),ref:m,afterClose:()=>{E==null||E()},isSilent:()=>y,onConfirm:T=>{f(T)}});return E=(p=a.current)===null||p===void 0?void 0:p.patchElement(b),E&&destroyFns.push(E),{destroy:()=>{function T(){var A;(A=m.current)===null||A===void 0||A.destroy()}m.current?T():c(A=>[].concat(_toConsumableArray(A),[T]))},update:T=>{function A(){var v;(v=m.current)===null||v===void 0||v.update(T)}m.current?A():c(v=>[].concat(_toConsumableArray(v),[A]))},then:T=>(y=!0,_.then(T))}},[]);return[reactExports.useMemo(()=>({info:u(withInfo),success:u(withSuccess),error:u(withError),warning:u(withWarn),confirm:u(withConfirm)}),[]),reactExports.createElement(ElementsHolder,{key:"modal-holder",ref:a})]}const AppConfigContext=React.createContext({});function withPureRenderTheme(a){return s=>reactExports.createElement(ConfigProvider,{theme:{token:{motion:!1,zIndexPopupBase:0}}},reactExports.createElement(a,Object.assign({},s)))}const genPurePanel=(a,s,c,u)=>withPureRenderTheme(d=>{const{prefixCls:h,style:p}=d,m=reactExports.useRef(null),[f,_]=reactExports.useState(0),[y,E]=reactExports.useState(0),[b,T]=useMergedState(!1,{value:d.open}),{getPrefixCls:A}=reactExports.useContext(ConfigContext),v=A(s||"select",h);reactExports.useEffect(()=>{if(T(!0),typeof ResizeObserver<"u"){const I=new ResizeObserver(P=>{const w=P[0].target;_(w.offsetHeight+8),E(w.offsetWidth)}),x=setInterval(()=>{var P;const w=c?`.${c(v)}`:`.${v}-dropdown`,C=(P=m.current)===null||P===void 0?void 0:P.querySelector(w);C&&(clearInterval(x),I.observe(C))},10);return()=>{clearInterval(x),I.disconnect()}}},[]);let S=Object.assign(Object.assign({},d),{style:Object.assign(Object.assign({},p),{margin:0}),open:b,visible:b,getPopupContainer:()=>m.current});u&&(S=u(S));const O={paddingBottom:f,position:"relative",minWidth:y};return reactExports.createElement("div",{ref:m,style:O},reactExports.createElement(a,Object.assign({},S)))}),isMobile=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var a=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(a==null?void 0:a.substr(0,4))};var TransBtn=function(a){var s=a.className,c=a.customizeIcon,u=a.customizeIconProps,d=a.children,h=a.onMouseDown,p=a.onClick,m=typeof c=="function"?c(u):c;return reactExports.createElement("span",{className:s,onMouseDown:function(f){f.preventDefault(),h==null||h(f)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:p,"aria-hidden":!0},m!==void 0?m:reactExports.createElement("span",{className:classNames(s.split(/\s+/).map(function(f){return"".concat(f,"-icon")}))},d))},useAllowClear=function(a,s,c,u,d){var h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,p=arguments.length>6?arguments[6]:void 0,m=arguments.length>7?arguments[7]:void 0,f=React.useMemo(function(){if(_typeof(u)==="object")return u.clearIcon;if(d)return d},[u,d]),_=React.useMemo(function(){return!!(!h&&u&&(c.length||p)&&!(m==="combobox"&&p===""))},[u,h,c.length,p,m]);return{allowClear:_,clearIcon:React.createElement(TransBtn,{className:"".concat(a,"-clear"),onMouseDown:s,customizeIcon:f},"\xD7")}},BaseSelectContext=reactExports.createContext(null);function useBaseProps(){return reactExports.useContext(BaseSelectContext)}function useDelayReset(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,s=reactExports.useState(!1),c=_slicedToArray(s,2),u=c[0],d=c[1],h=reactExports.useRef(null),p=function(){window.clearTimeout(h.current)};reactExports.useEffect(function(){return p},[]);var m=function(f,_){p(),h.current=window.setTimeout(function(){d(f),_&&_()},a)};return[u,m,p]}function useLock(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,s=reactExports.useRef(null),c=reactExports.useRef(null);reactExports.useEffect(function(){return function(){window.clearTimeout(c.current)}},[]);function u(d){(d||s.current===null)&&(s.current=d),window.clearTimeout(c.current),c.current=window.setTimeout(function(){s.current=null},a)}return[function(){return s.current},u]}function useSelectTriggerControl(a,s,c,u){var d=reactExports.useRef(null);d.current={open:s,triggerOpen:c,customizedTrigger:u},reactExports.useEffect(function(){function h(p){var m;if(!((m=d.current)!==null&&m!==void 0&&m.customizedTrigger)){var f=p.target;f.shadowRoot&&p.composed&&(f=p.composedPath()[0]||f),d.current.open&&a().filter(function(_){return _}).every(function(_){return!_.contains(f)&&_!==f})&&d.current.triggerOpen(!1)}}return window.addEventListener("mousedown",h),function(){return window.removeEventListener("mousedown",h)}},[])}function isValidateOpenKey(a){return![KeyCode.ESC,KeyCode.SHIFT,KeyCode.BACKSPACE,KeyCode.TAB,KeyCode.WIN_KEY,KeyCode.ALT,KeyCode.META,KeyCode.WIN_KEY_RIGHT,KeyCode.CTRL,KeyCode.SEMICOLON,KeyCode.EQUALS,KeyCode.CAPS_LOCK,KeyCode.CONTEXT_MENU,KeyCode.F1,KeyCode.F2,KeyCode.F3,KeyCode.F4,KeyCode.F5,KeyCode.F6,KeyCode.F7,KeyCode.F8,KeyCode.F9,KeyCode.F10,KeyCode.F11,KeyCode.F12].includes(a)}var _excluded$i=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],UNDEFINED=void 0;function InternalItem(a,s){var c=a.prefixCls,u=a.invalidate,d=a.item,h=a.renderItem,p=a.responsive,m=a.responsiveDisabled,f=a.registerSize,_=a.itemKey,y=a.className,E=a.style,b=a.children,T=a.display,A=a.order,v=a.component,S=v===void 0?"div":v,O=_objectWithoutProperties(a,_excluded$i),I=p&&!T;function x(R){f(_,R)}reactExports.useEffect(function(){return function(){x(null)}},[]);var P=h&&d!==UNDEFINED?h(d):b,w;u||(w={opacity:I?0:1,height:I?0:UNDEFINED,overflowY:I?"hidden":UNDEFINED,order:p?A:UNDEFINED,pointerEvents:I?"none":UNDEFINED,position:I?"absolute":UNDEFINED});var C={};I&&(C["aria-hidden"]=!0);var k=reactExports.createElement(S,_extends$2({className:classNames(!u&&c,y),style:_objectSpread2(_objectSpread2({},w),E)},C,O,{ref:s}),P);return p&&(k=reactExports.createElement(RefResizeObserver,{onResize:function(R){var N=R.offsetWidth;x(N)},disabled:m},k)),k}var Item$4=reactExports.forwardRef(InternalItem);Item$4.displayName="Item";function channelUpdate(a){if(typeof MessageChannel>"u")wrapperRaf(a);else{var s=new MessageChannel;s.port1.onmessage=function(){return a()},s.port2.postMessage(void 0)}}function useBatcher(){var a=reactExports.useRef(null),s=function(c){a.current||(a.current=[],channelUpdate(function(){reactDomExports.unstable_batchedUpdates(function(){a.current.forEach(function(u){u()}),a.current=null})})),a.current.push(c)};return s}function useEffectState(a,s){var c=reactExports.useState(s),u=_slicedToArray(c,2),d=u[0],h=u[1],p=useEvent(function(m){a(function(){h(m)})});return[d,p]}var OverflowContext=React.createContext(null),_excluded$h=["component"],_excluded2$2=["className"],_excluded3=["className"],InternalRawItem=function(a,s){var c=reactExports.useContext(OverflowContext);if(!c){var u=a.component,d=u===void 0?"div":u,h=_objectWithoutProperties(a,_excluded$h);return reactExports.createElement(d,_extends$2({},h,{ref:s}))}var p=c.className,m=_objectWithoutProperties(c,_excluded2$2),f=a.className,_=_objectWithoutProperties(a,_excluded3);return reactExports.createElement(OverflowContext.Provider,{value:null},reactExports.createElement(Item$4,_extends$2({ref:s,className:classNames(p,f)},m,_)))},RawItem=reactExports.forwardRef(InternalRawItem);RawItem.displayName="RawItem";var _excluded$g=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],RESPONSIVE="responsive",INVALIDATE="invalidate";function defaultRenderRest(a){return"+ ".concat(a.length," ...")}function Overflow(a,s){var c=a.prefixCls,u=c===void 0?"rc-overflow":c,d=a.data,h=d===void 0?[]:d,p=a.renderItem,m=a.renderRawItem,f=a.itemKey,_=a.itemWidth,y=_===void 0?10:_,E=a.ssr,b=a.style,T=a.className,A=a.maxCount,v=a.renderRest,S=a.renderRawRest,O=a.suffix,I=a.component,x=I===void 0?"div":I,P=a.itemComponent,w=a.onVisibleChange,C=_objectWithoutProperties(a,_excluded$g),k=E==="full",R=useBatcher(),N=useEffectState(R,null),F=_slicedToArray(N,2),L=F[0],X=F[1],V=L||0,H=useEffectState(R,new Map),ee=_slicedToArray(H,2),Q=ee[0],Z=ee[1],K=useEffectState(R,0),se=_slicedToArray(K,2),ne=se[0],le=se[1],he=useEffectState(R,0),Y=_slicedToArray(he,2),D=Y[0],G=Y[1],B=useEffectState(R,0),U=_slicedToArray(B,2),W=U[0],q=U[1],J=reactExports.useState(null),ae=_slicedToArray(J,2),ce=ae[0],ie=ae[1],ue=reactExports.useState(null),Ee=_slicedToArray(ue,2),xe=Ee[0],ve=Ee[1],$e=reactExports.useMemo(function(){return xe===null&&k?Number.MAX_SAFE_INTEGER:xe||0},[xe,L]),_e=reactExports.useState(!1),Be=_slicedToArray(_e,2),ze=Be[0],Se=Be[1],pe="".concat(u,"-item"),me=Math.max(ne,D),Oe=A===RESPONSIVE,Le=h.length&&Oe,We=A===INVALIDATE,Ze=Le||typeof A=="number"&&h.length>A,Qe=reactExports.useMemo(function(){var Ge=h;return Le?L===null&&k?Ge=h:Ge=h.slice(0,Math.min(h.length,V/y)):typeof A=="number"&&(Ge=h.slice(0,A)),Ge},[h,y,L,A,Le]),Je=reactExports.useMemo(function(){return Le?h.slice($e+1):h.slice(Qe.length)},[h,Qe,Le,$e]),tt=reactExports.useCallback(function(Ge,et){var Me;return typeof f=="function"?f(Ge):(Me=f&&(Ge==null?void 0:Ge[f]))!==null&&Me!==void 0?Me:et},[f]),rt=reactExports.useCallback(p||function(Ge){return Ge},[p]);function at(Ge,et,Me){xe===Ge&&(et===void 0||et===ce)||(ve(Ge),Me||(Se(Ge<h.length-1),w==null||w(Ge)),et!==void 0&&ie(et))}function it(Ge,et){X(et.clientWidth)}function Ne(Ge,et){Z(function(Me){var ot=new Map(Me);return et===null?ot.delete(Ge):ot.set(Ge,et),ot})}function ye(Ge,et){G(et),le(D)}function ge(Ge,et){q(et)}function Fe(Ge){return Q.get(tt(Qe[Ge],Ge))}useLayoutEffect$1(function(){if(V&&typeof me=="number"&&Qe){var Ge=W,et=Qe.length,Me=et-1;if(!et){at(0,null);return}for(var ot=0;ot<et;ot+=1){var ke=Fe(ot);if(k&&(ke=ke||0),ke===void 0){at(ot-1,void 0,!0);break}if(Ge+=ke,Me===0&&Ge<=V||ot===Me-1&&Ge+Fe(Me)<=V){at(Me,null);break}else if(Ge+me>V){at(ot-1,Ge-ke-W+D);break}}O&&Fe(0)+W>V&&ie(null)}},[V,Q,D,W,tt,Qe]);var Ue=ze&&!!Je.length,dt={};ce!==null&&Le&&(dt={position:"absolute",left:ce,top:0});var pt={prefixCls:pe,responsive:Le,component:P,invalidate:We},Ae=m?function(Ge,et){var Me=tt(Ge,et);return reactExports.createElement(OverflowContext.Provider,{key:Me,value:_objectSpread2(_objectSpread2({},pt),{},{order:et,item:Ge,itemKey:Me,registerSize:Ne,display:et<=$e})},m(Ge,et))}:function(Ge,et){var Me=tt(Ge,et);return reactExports.createElement(Item$4,_extends$2({},pt,{order:et,key:Me,item:Ge,renderItem:rt,itemKey:Me,registerSize:Ne,display:et<=$e}))},Pe,De={order:Ue?$e:Number.MAX_SAFE_INTEGER,className:"".concat(pe,"-rest"),registerSize:ye,display:Ue};if(S)S&&(Pe=reactExports.createElement(OverflowContext.Provider,{value:_objectSpread2(_objectSpread2({},pt),De)},S(Je)));else{var Ce=v||defaultRenderRest;Pe=reactExports.createElement(Item$4,_extends$2({},pt,De),typeof Ce=="function"?Ce(Je):Ce)}var Xe=reactExports.createElement(x,_extends$2({className:classNames(!We&&u,T),style:b,ref:s},C),Qe.map(Ae),Ze?Pe:null,O&&reactExports.createElement(Item$4,_extends$2({},pt,{responsive:Oe,responsiveDisabled:!Le,order:$e,className:"".concat(pe,"-suffix"),registerSize:ge,display:!0,style:dt}),O));return Oe&&(Xe=reactExports.createElement(RefResizeObserver,{onResize:it,disabled:!Le},Xe)),Xe}var ForwardOverflow=reactExports.forwardRef(Overflow);ForwardOverflow.displayName="Overflow",ForwardOverflow.Item=RawItem,ForwardOverflow.RESPONSIVE=RESPONSIVE,ForwardOverflow.INVALIDATE=INVALIDATE;var Input$4=function(a,s){var c,u=a.prefixCls,d=a.id,h=a.inputElement,p=a.disabled,m=a.tabIndex,f=a.autoFocus,_=a.autoComplete,y=a.editable,E=a.activeDescendantId,b=a.value,T=a.maxLength,A=a.onKeyDown,v=a.onMouseDown,S=a.onChange,O=a.onPaste,I=a.onCompositionStart,x=a.onCompositionEnd,P=a.open,w=a.attrs,C=h||reactExports.createElement("input",null),k=C,R=k.ref,N=k.props,F=N.onKeyDown,L=N.onChange,X=N.onMouseDown,V=N.onCompositionStart,H=N.onCompositionEnd,ee=N.style;return warning$2(!("maxLength"in C.props)),C=reactExports.cloneElement(C,_objectSpread2(_objectSpread2(_objectSpread2({type:"search"},N),{},{id:d,ref:composeRef(s,R),disabled:p,tabIndex:m,autoComplete:_||"off",autoFocus:f,className:classNames("".concat(u,"-selection-search-input"),(c=C)===null||c===void 0||(c=c.props)===null||c===void 0?void 0:c.className),role:"combobox","aria-expanded":P||!1,"aria-haspopup":"listbox","aria-owns":"".concat(d,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(d,"_list"),"aria-activedescendant":P?E:void 0},w),{},{value:y?b:"",maxLength:T,readOnly:!y,unselectable:y?null:"on",style:_objectSpread2(_objectSpread2({},ee),{},{opacity:y?null:0}),onKeyDown:function(Q){A(Q),F&&F(Q)},onMouseDown:function(Q){v(Q),X&&X(Q)},onChange:function(Q){S(Q),L&&L(Q)},onCompositionStart:function(Q){I(Q),V&&V(Q)},onCompositionEnd:function(Q){x(Q),H&&H(Q)},onPaste:O})),C},RefInput=reactExports.forwardRef(Input$4);function toArray$4(a){return Array.isArray(a)?a:a!==void 0?[a]:[]}var isClient=typeof window<"u"&&window.document&&window.document.documentElement,isBrowserClient$1=isClient;function hasValue(a){return a!=null}function isComboNoValue(a){return!a&&a!==0}function isTitleType$1(a){return["string","number"].includes(_typeof(a))}function getTitle(a){var s=void 0;return a&&(isTitleType$1(a.title)?s=a.title.toString():isTitleType$1(a.label)&&(s=a.label.toString())),s}function useLayoutEffect(a,s){isBrowserClient$1?reactExports.useLayoutEffect(a,s):reactExports.useEffect(a,s)}function itemKey(a){var s;return(s=a.key)!==null&&s!==void 0?s:a.value}var onPreventMouseDown=function(a){a.preventDefault(),a.stopPropagation()},SelectSelector=function(a){var s=a.id,c=a.prefixCls,u=a.values,d=a.open,h=a.searchValue,p=a.autoClearSearchValue,m=a.inputRef,f=a.placeholder,_=a.disabled,y=a.mode,E=a.showSearch,b=a.autoFocus,T=a.autoComplete,A=a.activeDescendantId,v=a.tabIndex,S=a.removeIcon,O=a.maxTagCount,I=a.maxTagTextLength,x=a.maxTagPlaceholder,P=x===void 0?function(ce){return"+ ".concat(ce.length," ...")}:x,w=a.tagRender,C=a.onToggleOpen,k=a.onRemove,R=a.onInputChange,N=a.onInputPaste,F=a.onInputKeyDown,L=a.onInputMouseDown,X=a.onInputCompositionStart,V=a.onInputCompositionEnd,H=reactExports.useRef(null),ee=reactExports.useState(0),Q=_slicedToArray(ee,2),Z=Q[0],K=Q[1],se=reactExports.useState(!1),ne=_slicedToArray(se,2),le=ne[0],he=ne[1],Y="".concat(c,"-selection"),D=d||y==="multiple"&&p===!1||y==="tags"?h:"",G=y==="tags"||y==="multiple"&&p===!1||E&&(d||le);useLayoutEffect(function(){K(H.current.scrollWidth)},[D]);var B=function(ce,ie,ue,Ee,xe){return reactExports.createElement("span",{title:getTitle(ce),className:classNames("".concat(Y,"-item"),_defineProperty({},"".concat(Y,"-item-disabled"),ue))},reactExports.createElement("span",{className:"".concat(Y,"-item-content")},ie),Ee&&reactExports.createElement(TransBtn,{className:"".concat(Y,"-item-remove"),onMouseDown:onPreventMouseDown,onClick:xe,customizeIcon:S},"\xD7"))},U=function(ce,ie,ue,Ee,xe){var ve=function($e){onPreventMouseDown($e),C(!d)};return reactExports.createElement("span",{onMouseDown:ve},w({label:ie,value:ce,disabled:ue,closable:Ee,onClose:xe}))},W=function(ce){var ie=ce.disabled,ue=ce.label,Ee=ce.value,xe=!_&&!ie,ve=ue;if(typeof I=="number"&&(typeof ue=="string"||typeof ue=="number")){var $e=String(ve);$e.length>I&&(ve="".concat($e.slice(0,I),"..."))}var _e=function(Be){Be&&Be.stopPropagation(),k(ce)};return typeof w=="function"?U(Ee,ve,ie,xe,_e):B(ce,ve,ie,xe,_e)},q=function(ce){var ie=typeof P=="function"?P(ce):P;return B({title:ie},ie,!1)},J=reactExports.createElement("div",{className:"".concat(Y,"-search"),style:{width:Z},onFocus:function(){he(!0)},onBlur:function(){he(!1)}},reactExports.createElement(RefInput,{ref:m,open:d,prefixCls:c,id:s,inputElement:null,disabled:_,autoFocus:b,autoComplete:T,editable:G,activeDescendantId:A,value:D,onKeyDown:F,onMouseDown:L,onChange:R,onPaste:N,onCompositionStart:X,onCompositionEnd:V,tabIndex:v,attrs:pickAttrs(a,!0)}),reactExports.createElement("span",{ref:H,className:"".concat(Y,"-search-mirror"),"aria-hidden":!0},D,"\xA0")),ae=reactExports.createElement(ForwardOverflow,{prefixCls:"".concat(Y,"-overflow"),data:u,renderItem:W,renderRest:q,suffix:J,itemKey,maxCount:O});return reactExports.createElement(reactExports.Fragment,null,ae,!u.length&&!D&&reactExports.createElement("span",{className:"".concat(Y,"-placeholder")},f))},SingleSelector=function(a){var s=a.inputElement,c=a.prefixCls,u=a.id,d=a.inputRef,h=a.disabled,p=a.autoFocus,m=a.autoComplete,f=a.activeDescendantId,_=a.mode,y=a.open,E=a.values,b=a.placeholder,T=a.tabIndex,A=a.showSearch,v=a.searchValue,S=a.activeValue,O=a.maxLength,I=a.onInputKeyDown,x=a.onInputMouseDown,P=a.onInputChange,w=a.onInputPaste,C=a.onInputCompositionStart,k=a.onInputCompositionEnd,R=a.title,N=reactExports.useState(!1),F=_slicedToArray(N,2),L=F[0],X=F[1],V=_==="combobox",H=V||A,ee=E[0],Q=v||"";V&&S&&!L&&(Q=S),reactExports.useEffect(function(){V&&X(!1)},[V,S]);var Z=_!=="combobox"&&!y&&!A?!1:!!Q,K=R===void 0?getTitle(ee):R,se=reactExports.useMemo(function(){return ee?null:reactExports.createElement("span",{className:"".concat(c,"-selection-placeholder"),style:Z?{visibility:"hidden"}:void 0},b)},[ee,Z,b,c]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("span",{className:"".concat(c,"-selection-search")},reactExports.createElement(RefInput,{ref:d,prefixCls:c,id:u,open:y,inputElement:s,disabled:h,autoFocus:p,autoComplete:m,editable:H,activeDescendantId:f,value:Q,onKeyDown:I,onMouseDown:x,onChange:function(ne){X(!0),P(ne)},onPaste:w,onCompositionStart:C,onCompositionEnd:k,tabIndex:T,attrs:pickAttrs(a,!0),maxLength:V?O:void 0})),!V&&ee?reactExports.createElement("span",{className:"".concat(c,"-selection-item"),title:K,style:Z?{visibility:"hidden"}:void 0},ee.label):null,se)},Selector=function(a,s){var c=reactExports.useRef(null),u=reactExports.useRef(!1),d=a.prefixCls,h=a.open,p=a.mode,m=a.showSearch,f=a.tokenWithEnter,_=a.autoClearSearchValue,y=a.onSearch,E=a.onSearchSubmit,b=a.onToggleOpen,T=a.onInputKeyDown,A=a.domRef;reactExports.useImperativeHandle(s,function(){return{focus:function(ee){c.current.focus(ee)},blur:function(){c.current.blur()}}});var v=useLock(0),S=_slicedToArray(v,2),O=S[0],I=S[1],x=function(ee){var Q=ee.which;(Q===KeyCode.UP||Q===KeyCode.DOWN)&&ee.preventDefault(),T&&T(ee),Q===KeyCode.ENTER&&p==="tags"&&!u.current&&!h&&(E==null||E(ee.target.value)),isValidateOpenKey(Q)&&b(!0)},P=function(){I(!0)},w=reactExports.useRef(null),C=function(ee){y(ee,!0,u.current)!==!1&&b(!0)},k=function(){u.current=!0},R=function(ee){u.current=!1,p!=="combobox"&&C(ee.target.value)},N=function(ee){var Q=ee.target.value;if(f&&w.current&&/[\r\n]/.test(w.current)){var Z=w.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");Q=Q.replace(Z,w.current)}w.current=null,C(Q)},F=function(ee){var Q=ee.clipboardData,Z=Q==null?void 0:Q.getData("text");w.current=Z||""},L=function(ee){var Q=ee.target;if(Q!==c.current){var Z=document.body.style.msTouchAction!==void 0;Z?setTimeout(function(){c.current.focus()}):c.current.focus()}},X=function(ee){var Q=O();ee.target!==c.current&&!Q&&p!=="combobox"&&ee.preventDefault(),(p!=="combobox"&&(!m||!Q)||!h)&&(h&&_!==!1&&y("",!0,!1),b())},V={inputRef:c,onInputKeyDown:x,onInputMouseDown:P,onInputChange:N,onInputPaste:F,onInputCompositionStart:k,onInputCompositionEnd:R},H=p==="multiple"||p==="tags"?reactExports.createElement(SelectSelector,_extends$2({},a,V)):reactExports.createElement(SingleSelector,_extends$2({},a,V));return reactExports.createElement("div",{ref:A,className:"".concat(d,"-selector"),onClick:L,onMouseDown:X},H)},ForwardSelector=reactExports.forwardRef(Selector);function Arrow(a){var s=a.prefixCls,c=a.align,u=a.arrow,d=a.arrowPos,h=u||{},p=h.className,m=h.content,f=d.x,_=f===void 0?0:f,y=d.y,E=y===void 0?0:y,b=reactExports.useRef();if(!c||!c.points)return null;var T={position:"absolute"};if(c.autoArrow!==!1){var A=c.points[0],v=c.points[1],S=A[0],O=A[1],I=v[0],x=v[1];S===I||!["t","b"].includes(S)?T.top=E:S==="t"?T.top=0:T.bottom=0,O===x||!["l","r"].includes(O)?T.left=_:O==="l"?T.left=0:T.right=0}return reactExports.createElement("div",{ref:b,className:classNames("".concat(s,"-arrow"),p),style:T},m)}function Mask(a){var s=a.prefixCls,c=a.open,u=a.zIndex,d=a.mask,h=a.motion;return d?reactExports.createElement(CSSMotion,_extends$2({},h,{motionAppear:!0,visible:c,removeOnLeave:!0}),function(p){var m=p.className;return reactExports.createElement("div",{style:{zIndex:u},className:classNames("".concat(s,"-mask"),m)})}):null}var PopupContent=reactExports.memo(function(a){var s=a.children;return s},function(a,s){return s.cache}),Popup$1=reactExports.forwardRef(function(a,s){var c=a.popup,u=a.className,d=a.prefixCls,h=a.style,p=a.target,m=a.onVisibleChanged,f=a.open,_=a.keepDom,y=a.fresh,E=a.onClick,b=a.mask,T=a.arrow,A=a.arrowPos,v=a.align,S=a.motion,O=a.maskMotion,I=a.forceRender,x=a.getPopupContainer,P=a.autoDestroy,w=a.portal,C=a.zIndex,k=a.onMouseEnter,R=a.onMouseLeave,N=a.onPointerEnter,F=a.ready,L=a.offsetX,X=a.offsetY,V=a.offsetR,H=a.offsetB,ee=a.onAlign,Q=a.onPrepare,Z=a.stretch,K=a.targetWidth,se=a.targetHeight,ne=typeof c=="function"?c():c,le=f||_,he=(x==null?void 0:x.length)>0,Y=reactExports.useState(!x||!he),D=_slicedToArray(Y,2),G=D[0],B=D[1];if(useLayoutEffect$1(function(){!G&&he&&p&&B(!0)},[G,he,p]),!G)return null;var U="auto",W={left:"-1000vw",top:"-1000vh",right:U,bottom:U};if(F||!f){var q,J=v.points,ae=v.dynamicInset||((q=v._experimental)===null||q===void 0?void 0:q.dynamicInset),ce=ae&&J[0][1]==="r",ie=ae&&J[0][0]==="b";ce?(W.right=V,W.left=U):(W.left=L,W.right=U),ie?(W.bottom=H,W.top=U):(W.top=X,W.bottom=U)}var ue={};return Z&&(Z.includes("height")&&se?ue.height=se:Z.includes("minHeight")&&se&&(ue.minHeight=se),Z.includes("width")&&K?ue.width=K:Z.includes("minWidth")&&K&&(ue.minWidth=K)),f||(ue.pointerEvents="none"),reactExports.createElement(w,{open:I||le,getContainer:x&&function(){return x(p)},autoDestroy:P},reactExports.createElement(Mask,{prefixCls:d,open:f,zIndex:C,mask:b,motion:O}),reactExports.createElement(RefResizeObserver,{onResize:ee,disabled:!f},function(Ee){return reactExports.createElement(CSSMotion,_extends$2({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:I,leavedClassName:"".concat(d,"-hidden")},S,{onAppearPrepare:Q,onEnterPrepare:Q,visible:f,onVisibleChanged:function(xe){var ve;S==null||(ve=S.onVisibleChanged)===null||ve===void 0||ve.call(S,xe),m(xe)}}),function(xe,ve){var $e=xe.className,_e=xe.style,Be=classNames(d,$e,u);return reactExports.createElement("div",{ref:composeRef(Ee,s,ve),className:Be,style:_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2({"--arrow-x":"".concat(A.x||0,"px"),"--arrow-y":"".concat(A.y||0,"px")},W),ue),_e),{},{boxSizing:"border-box",zIndex:C},h),onMouseEnter:k,onMouseLeave:R,onPointerEnter:N,onClick:E},T&&reactExports.createElement(Arrow,{prefixCls:d,arrow:T,arrowPos:A,align:v}),reactExports.createElement(PopupContent,{cache:!f&&!y},ne))})}))}),TriggerWrapper=reactExports.forwardRef(function(a,s){var c=a.children,u=a.getTriggerDOMNode,d=supportRef(c),h=reactExports.useCallback(function(m){fillRef(s,u?u(m):m)},[u]),p=useComposeRef(h,c.ref);return d?reactExports.cloneElement(c,{ref:p}):c}),TriggerContext=reactExports.createContext(null);function toArray$3(a){return a?Array.isArray(a)?a:[a]:[]}function useAction(a,s,c,u){return reactExports.useMemo(function(){var d=toArray$3(c??s),h=toArray$3(u??s),p=new Set(d),m=new Set(h);return a&&(p.has("hover")&&(p.delete("hover"),p.add("click")),m.has("hover")&&(m.delete("hover"),m.add("click"))),[p,m]},[a,s,c,u])}function isPointsEq(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],c=arguments.length>2?arguments[2]:void 0;return c?a[0]===s[0]:a[0]===s[0]&&a[1]===s[1]}function getAlignPopupClassName(a,s,c,u){for(var d=c.points,h=Object.keys(a),p=0;p<h.length;p+=1){var m,f=h[p];if(isPointsEq((m=a[f])===null||m===void 0?void 0:m.points,d,u))return"".concat(s,"-placement-").concat(f)}return""}function getMotion(a,s,c,u){return s||(c?{motionName:"".concat(a,"-").concat(c)}:u?{motionName:u}:null)}function getWin(a){return a.ownerDocument.defaultView}function collectScroller(a){for(var s=[],c=a==null?void 0:a.parentElement,u=["hidden","scroll","clip","auto"];c;){var d=getWin(c).getComputedStyle(c),h=d.overflowX,p=d.overflowY,m=d.overflow;[h,p,m].some(function(f){return u.includes(f)})&&s.push(c),c=c.parentElement}return s}function toNum(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(a)?s:a}function getPxValue(a){return toNum(parseFloat(a),0)}function getVisibleArea(a,s){var c=_objectSpread2({},a);return(s||[]).forEach(function(u){if(!(u instanceof HTMLBodyElement||u instanceof HTMLHtmlElement)){var d=getWin(u).getComputedStyle(u),h=d.overflow,p=d.overflowClipMargin,m=d.borderTopWidth,f=d.borderBottomWidth,_=d.borderLeftWidth,y=d.borderRightWidth,E=u.getBoundingClientRect(),b=u.offsetHeight,T=u.clientHeight,A=u.offsetWidth,v=u.clientWidth,S=getPxValue(m),O=getPxValue(f),I=getPxValue(_),x=getPxValue(y),P=toNum(Math.round(E.width/A*1e3)/1e3),w=toNum(Math.round(E.height/b*1e3)/1e3),C=(A-v-I-x)*P,k=(b-T-S-O)*w,R=S*w,N=O*w,F=I*P,L=x*P,X=0,V=0;if(h==="clip"){var H=getPxValue(p);X=H*P,V=H*w}var ee=E.x+F-X,Q=E.y+R-V,Z=ee+E.width+2*X-F-L-C,K=Q+E.height+2*V-R-N-k;c.left=Math.max(c.left,ee),c.top=Math.max(c.top,Q),c.right=Math.min(c.right,Z),c.bottom=Math.min(c.bottom,K)}}),c}function getUnitOffset(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,c="".concat(s),u=c.match(/^(.*)\%$/);return u?a*(parseFloat(u[1])/100):parseFloat(c)}function getNumberOffset(a,s){var c=s||[],u=_slicedToArray(c,2),d=u[0],h=u[1];return[getUnitOffset(a.width,d),getUnitOffset(a.height,h)]}function splitPoints(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[a[0],a[1]]}function getAlignPoint(a,s){var c=s[0],u=s[1],d,h;return c==="t"?h=a.y:c==="b"?h=a.y+a.height:h=a.y+a.height/2,u==="l"?d=a.x:u==="r"?d=a.x+a.width:d=a.x+a.width/2,{x:d,y:h}}function reversePoints(a,s){var c={t:"b",b:"t",l:"r",r:"l"};return a.map(function(u,d){return d===s?c[u]||"c":u}).join("")}function useAlign(a,s,c,u,d,h,p){var m=reactExports.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:d[u]||{}}),f=_slicedToArray(m,2),_=f[0],y=f[1],E=reactExports.useRef(0),b=reactExports.useMemo(function(){return s?collectScroller(s):[]},[s]),T=reactExports.useRef({}),A=function(){T.current={}};a||A();var v=useEvent(function(){if(s&&c&&a){let Rt=function(kt,Hn){var en=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Be,tn=ne.x+kt,ln=ne.y+Hn,cn=tn+q,An=ln+W,zn=Math.max(tn,en.left),Wn=Math.max(ln,en.top),Vn=Math.min(cn,en.right),qn=Math.min(An,en.bottom);return Math.max(0,(Vn-zn)*(qn-Wn))},Tn=function(){we=ne.y+Ce,je=we+W,Ve=ne.x+De,Ye=Ve+q};var I,x,P=s,w=P.ownerDocument,C=getWin(P),k=C.getComputedStyle(P),R=k.width,N=k.height,F=k.position,L=P.style.left,X=P.style.top,V=P.style.right,H=P.style.bottom,ee=P.style.overflow,Q=_objectSpread2(_objectSpread2({},d[u]),h),Z=w.createElement("div");(I=P.parentElement)===null||I===void 0||I.appendChild(Z),Z.style.left="".concat(P.offsetLeft,"px"),Z.style.top="".concat(P.offsetTop,"px"),Z.style.position=F,Z.style.height="".concat(P.offsetHeight,"px"),Z.style.width="".concat(P.offsetWidth,"px"),P.style.left="0",P.style.top="0",P.style.right="auto",P.style.bottom="auto",P.style.overflow="hidden";var K;if(Array.isArray(c))K={x:c[0],y:c[1],width:0,height:0};else{var se=c.getBoundingClientRect();K={x:se.x,y:se.y,width:se.width,height:se.height}}var ne=P.getBoundingClientRect(),le=w.documentElement,he=le.clientWidth,Y=le.clientHeight,D=le.scrollWidth,G=le.scrollHeight,B=le.scrollTop,U=le.scrollLeft,W=ne.height,q=ne.width,J=K.height,ae=K.width,ce={left:0,top:0,right:he,bottom:Y},ie={left:-U,top:-B,right:D-U,bottom:G-B},ue=Q.htmlRegion,Ee="visible",xe="visibleFirst";ue!=="scroll"&&ue!==xe&&(ue=Ee);var ve=ue===xe,$e=getVisibleArea(ie,b),_e=getVisibleArea(ce,b),Be=ue===Ee?_e:$e,ze=ve?_e:Be;P.style.left="auto",P.style.top="auto",P.style.right="0",P.style.bottom="0";var Se=P.getBoundingClientRect();P.style.left=L,P.style.top=X,P.style.right=V,P.style.bottom=H,P.style.overflow=ee,(x=P.parentElement)===null||x===void 0||x.removeChild(Z);var pe=toNum(Math.round(q/parseFloat(R)*1e3)/1e3),me=toNum(Math.round(W/parseFloat(N)*1e3)/1e3);if(pe===0||me===0||isDOM(c)&&!isVisible(c))return;var Oe=Q.offset,Le=Q.targetOffset,We=getNumberOffset(ne,Oe),Ze=_slicedToArray(We,2),Qe=Ze[0],Je=Ze[1],tt=getNumberOffset(K,Le),rt=_slicedToArray(tt,2),at=rt[0],it=rt[1];K.x-=at,K.y-=it;var Ne=Q.points||[],ye=_slicedToArray(Ne,2),ge=ye[0],Fe=ye[1],Ue=splitPoints(Fe),dt=splitPoints(ge),pt=getAlignPoint(K,Ue),Ae=getAlignPoint(ne,dt),Pe=_objectSpread2({},Q),De=pt.x-Ae.x+Qe,Ce=pt.y-Ae.y+Je,Xe=Rt(De,Ce),Ge=Rt(De,Ce,_e),et=getAlignPoint(K,["t","l"]),Me=getAlignPoint(ne,["t","l"]),ot=getAlignPoint(K,["b","r"]),ke=getAlignPoint(ne,["b","r"]),re=Q.overflow||{},j=re.adjustX,te=re.adjustY,oe=re.shiftX,fe=re.shiftY,be=function(kt){return typeof kt=="boolean"?kt:kt>=0},we,je,Ve,Ye;Tn();var Ke=be(te),He=dt[0]===Ue[0];if(Ke&&dt[0]==="t"&&(je>ze.bottom||T.current.bt)){var qe=Ce;He?qe-=W-J:qe=et.y-ke.y-Je;var nt=Rt(De,qe),st=Rt(De,qe,_e);nt>Xe||nt===Xe&&(!ve||st>=Ge)?(T.current.bt=!0,Ce=qe,Je=-Je,Pe.points=[reversePoints(dt,0),reversePoints(Ue,0)]):T.current.bt=!1}if(Ke&&dt[0]==="b"&&(we<ze.top||T.current.tb)){var ct=Ce;He?ct+=W-J:ct=ot.y-Me.y-Je;var ht=Rt(De,ct),mt=Rt(De,ct,_e);ht>Xe||ht===Xe&&(!ve||mt>=Ge)?(T.current.tb=!0,Ce=ct,Je=-Je,Pe.points=[reversePoints(dt,0),reversePoints(Ue,0)]):T.current.tb=!1}var _t=be(j),Tt=dt[1]===Ue[1];if(_t&&dt[1]==="l"&&(Ye>ze.right||T.current.rl)){var At=De;Tt?At-=q-ae:At=et.x-ke.x-Qe;var It=Rt(At,Ce),Ht=Rt(At,Ce,_e);It>Xe||It===Xe&&(!ve||Ht>=Ge)?(T.current.rl=!0,De=At,Qe=-Qe,Pe.points=[reversePoints(dt,1),reversePoints(Ue,1)]):T.current.rl=!1}if(_t&&dt[1]==="r"&&(Ve<ze.left||T.current.lr)){var zt=De;Tt?zt+=q-ae:zt=ot.x-Me.x-Qe;var Xt=Rt(zt,Ce),Wt=Rt(zt,Ce,_e);Xt>Xe||Xt===Xe&&(!ve||Wt>=Ge)?(T.current.lr=!0,De=zt,Qe=-Qe,Pe.points=[reversePoints(dt,1),reversePoints(Ue,1)]):T.current.lr=!1}Tn();var $t=oe===!0?0:oe;typeof $t=="number"&&(Ve<_e.left&&(De-=Ve-_e.left-Qe,K.x+ae<_e.left+$t&&(De+=K.x-_e.left+ae-$t)),Ye>_e.right&&(De-=Ye-_e.right-Qe,K.x>_e.right-$t&&(De+=K.x-_e.right+$t)));var Bt=fe===!0?0:fe;typeof Bt=="number"&&(we<_e.top&&(Ce-=we-_e.top-Je,K.y+J<_e.top+Bt&&(Ce+=K.y-_e.top+J-Bt)),je>_e.bottom&&(Ce-=je-_e.bottom-Je,K.y>_e.bottom-Bt&&(Ce+=K.y-_e.bottom+Bt)));var Zt=ne.x+De,Yt=Zt+q,Lt=ne.y+Ce,Jt=Lt+W,Gt=K.x,Ot=Gt+ae,ut=K.y,gt=ut+J,bt=Math.max(Zt,Gt),yt=Math.min(Yt,Ot),vt=(bt+yt)/2,wt=vt-Zt,Pt=Math.max(Lt,ut),xt=Math.min(Jt,gt),jt=(Pt+xt)/2,Nt=jt-Lt;p==null||p(s,Pe);var Vt=Se.right-ne.x-(De+ne.width),Un=Se.bottom-ne.y-(Ce+ne.height);y({ready:!0,offsetX:De/pe,offsetY:Ce/me,offsetR:Vt/pe,offsetB:Un/me,arrowX:wt/pe,arrowY:Nt/me,scaleX:pe,scaleY:me,align:Pe})}}),S=function(){E.current+=1;var I=E.current;Promise.resolve().then(function(){E.current===I&&v()})},O=function(){y(function(I){return _objectSpread2(_objectSpread2({},I),{},{ready:!1})})};return useLayoutEffect$1(O,[u]),useLayoutEffect$1(function(){a||O()},[a]),[_.ready,_.offsetX,_.offsetY,_.offsetR,_.offsetB,_.arrowX,_.arrowY,_.scaleX,_.scaleY,_.align,S]}function useWatch(a,s,c,u,d){useLayoutEffect$1(function(){if(a&&s&&c){let E=function(){u(),d()};var h=s,p=c,m=collectScroller(h),f=collectScroller(p),_=getWin(p),y=new Set([_].concat(_toConsumableArray(m),_toConsumableArray(f)));return y.forEach(function(b){b.addEventListener("scroll",E,{passive:!0})}),_.addEventListener("resize",E,{passive:!0}),u(),function(){y.forEach(function(b){b.removeEventListener("scroll",E),_.removeEventListener("resize",E)})}}},[a,s,c])}function useWinClick(a,s,c,u,d,h,p,m){var f=reactExports.useRef(a);f.current=a,reactExports.useEffect(function(){if(s&&u&&(!d||h)){var _=function(b){var T=b.target;f.current&&!p(T)&&m(!1)},y=getWin(u);y.addEventListener("mousedown",_,!0),y.addEventListener("contextmenu",_,!0);var E=getShadowRoot(c);return E&&(E.addEventListener("mousedown",_,!0),E.addEventListener("contextmenu",_,!0)),function(){y.removeEventListener("mousedown",_,!0),y.removeEventListener("contextmenu",_,!0),E&&(E.removeEventListener("mousedown",_,!0),E.removeEventListener("contextmenu",_,!0))}}},[s,c,u,d,h])}var _excluded$f=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function generateTrigger(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Portal,s=reactExports.forwardRef(function(c,u){var d=c.prefixCls,h=d===void 0?"rc-trigger-popup":d,p=c.children,m=c.action,f=m===void 0?"hover":m,_=c.showAction,y=c.hideAction,E=c.popupVisible,b=c.defaultPopupVisible,T=c.onPopupVisibleChange,A=c.afterPopupVisibleChange,v=c.mouseEnterDelay,S=c.mouseLeaveDelay,O=S===void 0?.1:S,I=c.focusDelay,x=c.blurDelay,P=c.mask,w=c.maskClosable,C=w===void 0?!0:w,k=c.getPopupContainer,R=c.forceRender,N=c.autoDestroy,F=c.destroyPopupOnHide,L=c.popup,X=c.popupClassName,V=c.popupStyle,H=c.popupPlacement,ee=c.builtinPlacements,Q=ee===void 0?{}:ee,Z=c.popupAlign,K=c.zIndex,se=c.stretch,ne=c.getPopupClassNameFromAlign,le=c.fresh,he=c.alignPoint,Y=c.onPopupClick,D=c.onPopupAlign,G=c.arrow,B=c.popupMotion,U=c.maskMotion,W=c.popupTransitionName,q=c.popupAnimation,J=c.maskTransitionName,ae=c.maskAnimation,ce=c.className,ie=c.getTriggerDOMNode,ue=_objectWithoutProperties(c,_excluded$f),Ee=N||F||!1,xe=reactExports.useState(!1),ve=_slicedToArray(xe,2),$e=ve[0],_e=ve[1];useLayoutEffect$1(function(){_e(isMobile())},[]);var Be=reactExports.useRef({}),ze=reactExports.useContext(TriggerContext),Se=reactExports.useMemo(function(){return{registerSubPopup:function(lt,ft){Be.current[lt]=ft,ze==null||ze.registerSubPopup(lt,ft)}}},[ze]),pe=useId$1(),me=reactExports.useState(null),Oe=_slicedToArray(me,2),Le=Oe[0],We=Oe[1],Ze=useEvent(function(lt){isDOM(lt)&&Le!==lt&&We(lt),ze==null||ze.registerSubPopup(pe,lt)}),Qe=reactExports.useState(null),Je=_slicedToArray(Qe,2),tt=Je[0],rt=Je[1],at=reactExports.useRef(null),it=useEvent(function(lt){isDOM(lt)&&tt!==lt&&(rt(lt),at.current=lt)}),Ne=reactExports.Children.only(p),ye=(Ne==null?void 0:Ne.props)||{},ge={},Fe=useEvent(function(lt){var ft,Ct,St=tt;return(St==null?void 0:St.contains(lt))||((ft=getShadowRoot(St))===null||ft===void 0?void 0:ft.host)===lt||lt===St||(Le==null?void 0:Le.contains(lt))||((Ct=getShadowRoot(Le))===null||Ct===void 0?void 0:Ct.host)===lt||lt===Le||Object.values(Be.current).some(function(Et){return(Et==null?void 0:Et.contains(lt))||lt===Et})}),Ue=getMotion(h,B,q,W),dt=getMotion(h,U,ae,J),pt=reactExports.useState(b||!1),Ae=_slicedToArray(pt,2),Pe=Ae[0],De=Ae[1],Ce=E??Pe,Xe=useEvent(function(lt){E===void 0&&De(lt)});useLayoutEffect$1(function(){De(E||!1)},[E]);var Ge=reactExports.useRef(Ce);Ge.current=Ce;var et=reactExports.useRef([]);et.current=[];var Me=useEvent(function(lt){var ft;Xe(lt),((ft=et.current[et.current.length-1])!==null&&ft!==void 0?ft:Ce)!==lt&&(et.current.push(lt),T==null||T(lt))}),ot=reactExports.useRef(),ke=function(){clearTimeout(ot.current)},re=function(lt){var ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;ke(),ft===0?Me(lt):ot.current=setTimeout(function(){Me(lt)},ft*1e3)};reactExports.useEffect(function(){return ke},[]);var j=reactExports.useState(!1),te=_slicedToArray(j,2),oe=te[0],fe=te[1];useLayoutEffect$1(function(lt){(!lt||Ce)&&fe(!0)},[Ce]);var be=reactExports.useState(null),we=_slicedToArray(be,2),je=we[0],Ve=we[1],Ye=reactExports.useState([0,0]),Ke=_slicedToArray(Ye,2),He=Ke[0],qe=Ke[1],nt=function(lt){qe([lt.clientX,lt.clientY])},st=useAlign(Ce,Le,he?He:tt,H,Q,Z,D),ct=_slicedToArray(st,11),ht=ct[0],mt=ct[1],_t=ct[2],Tt=ct[3],At=ct[4],It=ct[5],Ht=ct[6],zt=ct[7],Xt=ct[8],Wt=ct[9],$t=ct[10],Bt=useAction($e,f,_,y),Zt=_slicedToArray(Bt,2),Yt=Zt[0],Lt=Zt[1],Jt=Yt.has("click"),Gt=Lt.has("click")||Lt.has("contextMenu"),Ot=useEvent(function(){oe||$t()}),ut=function(){Ge.current&&he&&Gt&&re(!1)};useWatch(Ce,tt,Le,Ot,ut),useLayoutEffect$1(function(){Ot()},[He,H]),useLayoutEffect$1(function(){Ce&&!(Q!=null&&Q[H])&&Ot()},[JSON.stringify(Z)]);var gt=reactExports.useMemo(function(){var lt=getAlignPopupClassName(Q,h,Wt,he);return classNames(lt,ne==null?void 0:ne(Wt))},[Wt,ne,Q,h,he]);reactExports.useImperativeHandle(u,function(){return{nativeElement:at.current,forceAlign:Ot}});var bt=reactExports.useState(0),yt=_slicedToArray(bt,2),vt=yt[0],wt=yt[1],Pt=reactExports.useState(0),xt=_slicedToArray(Pt,2),jt=xt[0],Nt=xt[1],Vt=function(){if(se&&tt){var lt=tt.getBoundingClientRect();wt(lt.width),Nt(lt.height)}},Un=function(){Vt(),Ot()},Rt=function(lt){fe(!1),$t(),A==null||A(lt)},Tn=function(){return new Promise(function(lt){Vt(),Ve(function(){return lt})})};useLayoutEffect$1(function(){je&&($t(),je(),Ve(null))},[je]);function kt(lt,ft,Ct,St){ge[lt]=function(Et){var vn;St==null||St(Et),re(ft,Ct);for(var Kn=arguments.length,Pr=new Array(Kn>1?Kn-1:0),Sn=1;Sn<Kn;Sn++)Pr[Sn-1]=arguments[Sn];(vn=ye[lt])===null||vn===void 0||vn.call.apply(vn,[ye,Et].concat(Pr))}}(Jt||Gt)&&(ge.onClick=function(lt){var ft;Ge.current&&Gt?re(!1):!Ge.current&&Jt&&(nt(lt),re(!0));for(var Ct=arguments.length,St=new Array(Ct>1?Ct-1:0),Et=1;Et<Ct;Et++)St[Et-1]=arguments[Et];(ft=ye.onClick)===null||ft===void 0||ft.call.apply(ft,[ye,lt].concat(St))}),useWinClick(Ce,Gt,tt,Le,P,C,Fe,re);var Hn=Yt.has("hover"),en=Lt.has("hover"),tn,ln;Hn&&(kt("onMouseEnter",!0,v,function(lt){nt(lt)}),kt("onPointerEnter",!0,v,function(lt){nt(lt)}),tn=function(lt){(Ce||oe)&&Le!==null&&Le!==void 0&&Le.contains(lt.target)&&re(!0,v)},he&&(ge.onMouseMove=function(lt){var ft;(ft=ye.onMouseMove)===null||ft===void 0||ft.call(ye,lt)})),en&&(kt("onMouseLeave",!1,O),kt("onPointerLeave",!1,O),ln=function(){re(!1,O)}),Yt.has("focus")&&kt("onFocus",!0,I),Lt.has("focus")&&kt("onBlur",!1,x),Yt.has("contextMenu")&&(ge.onContextMenu=function(lt){var ft;Ge.current&&Lt.has("contextMenu")?re(!1):(nt(lt),re(!0)),lt.preventDefault();for(var Ct=arguments.length,St=new Array(Ct>1?Ct-1:0),Et=1;Et<Ct;Et++)St[Et-1]=arguments[Et];(ft=ye.onContextMenu)===null||ft===void 0||ft.call.apply(ft,[ye,lt].concat(St))}),ce&&(ge.className=classNames(ye.className,ce));var cn=_objectSpread2(_objectSpread2({},ye),ge),An={},zn=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];zn.forEach(function(lt){ue[lt]&&(An[lt]=function(){for(var ft,Ct=arguments.length,St=new Array(Ct),Et=0;Et<Ct;Et++)St[Et]=arguments[Et];(ft=cn[lt])===null||ft===void 0||ft.call.apply(ft,[cn].concat(St)),ue[lt].apply(ue,St)})});var Wn=reactExports.cloneElement(Ne,_objectSpread2(_objectSpread2({},cn),An)),Vn={x:It,y:Ht},qn=G?_objectSpread2({},G!==!0?G:{}):null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(RefResizeObserver,{disabled:!Ce,ref:it,onResize:Un},reactExports.createElement(TriggerWrapper,{getTriggerDOMNode:ie},Wn)),reactExports.createElement(TriggerContext.Provider,{value:Se},reactExports.createElement(Popup$1,{portal:a,ref:Ze,prefixCls:h,popup:L,className:classNames(X,gt),style:V,target:tt,onMouseEnter:tn,onMouseLeave:ln,onPointerEnter:tn,zIndex:K,open:Ce,keepDom:oe,fresh:le,onClick:Y,mask:P,motion:Ue,maskMotion:dt,onVisibleChanged:Rt,onPrepare:Tn,forceRender:R,autoDestroy:Ee,getPopupContainer:k,align:Wt,arrow:qn,arrowPos:Vn,ready:ht,offsetX:mt,offsetY:_t,offsetR:Tt,offsetB:At,onAlign:Ot,stretch:se,targetWidth:vt/zt,targetHeight:jt/Xt})))});return s}const Trigger=generateTrigger(Portal);var _excluded$e=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],getBuiltInPlacements$1=function(a){var s=a===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:s,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:s,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:s,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:s,adjustY:1},htmlRegion:"scroll"}}},SelectTrigger=function(a,s){var c=a.prefixCls;a.disabled;var u=a.visible,d=a.children,h=a.popupElement,p=a.animation,m=a.transitionName,f=a.dropdownStyle,_=a.dropdownClassName,y=a.direction,E=y===void 0?"ltr":y,b=a.placement,T=a.builtinPlacements,A=a.dropdownMatchSelectWidth,v=a.dropdownRender,S=a.dropdownAlign,O=a.getPopupContainer,I=a.empty,x=a.getTriggerDOMNode,P=a.onPopupVisibleChange,w=a.onPopupMouseEnter,C=_objectWithoutProperties(a,_excluded$e),k="".concat(c,"-dropdown"),R=h;v&&(R=v(h));var N=reactExports.useMemo(function(){return T||getBuiltInPlacements$1(A)},[T,A]),F=p?"".concat(k,"-").concat(p):m,L=typeof A=="number",X=reactExports.useMemo(function(){return L?null:A===!1?"minWidth":"width"},[A,L]),V=f;L&&(V=_objectSpread2(_objectSpread2({},V),{},{width:A}));var H=reactExports.useRef(null);return reactExports.useImperativeHandle(s,function(){return{getPopupElement:function(){return H.current}}}),reactExports.createElement(Trigger,_extends$2({},C,{showAction:P?["click"]:[],hideAction:P?["click"]:[],popupPlacement:b||(E==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:N,prefixCls:k,popupTransitionName:F,popup:reactExports.createElement("div",{ref:H,onMouseEnter:w},R),stretch:X,popupAlign:S,popupVisible:u,getPopupContainer:O,popupClassName:classNames(_,_defineProperty({},"".concat(k,"-empty"),I)),popupStyle:V,getTriggerDOMNode:x,onPopupVisibleChange:P}),d)},RefSelectTrigger=reactExports.forwardRef(SelectTrigger);function getKey(a,s){var c=a.key,u;return"value"in a&&(u=a.value),c??(u!==void 0?u:"rc-index-key-".concat(s))}function isValidCount(a){return typeof a<"u"&&!Number.isNaN(a)}function fillFieldNames(a,s){var c=a||{},u=c.label,d=c.value,h=c.options,p=c.groupLabel,m=u||(s?"children":"label");return{label:m,value:d||"value",options:h||"options",groupLabel:p||m}}function flattenOptions(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=s.fieldNames,u=s.childrenAsData,d=[],h=fillFieldNames(c,!1),p=h.label,m=h.value,f=h.options,_=h.groupLabel;function y(E,b){Array.isArray(E)&&E.forEach(function(T){if(b||!(f in T)){var A=T[m];d.push({key:getKey(T,d.length),groupOption:b,data:T,label:T[p],value:A})}else{var v=T[_];v===void 0&&u&&(v=T.label),d.push({key:getKey(T,d.length),group:!0,data:T,label:v}),y(T[f],!0)}})}return y(a,!1),d}function injectPropsWithOption(a){var s=_objectSpread2({},a);return"props"in s||Object.defineProperty(s,"props",{get:function(){return warningOnce(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),s}}),s}var getSeparatedContent=function(a,s,c){if(!s||!s.length)return null;var u=!1,d=function p(m,f){var _=_toArray(f),y=_[0],E=_.slice(1);if(!y)return[m];var b=m.split(y);return u=u||b.length>1,b.reduce(function(T,A){return[].concat(_toConsumableArray(T),_toConsumableArray(p(A,E)))},[]).filter(Boolean)},h=d(a,s);return u?typeof c<"u"?h.slice(0,c):h:null},SelectContext=reactExports.createContext(null),_excluded$d=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],DEFAULT_OMIT_PROPS=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],isMultiple=function(a){return a==="tags"||a==="multiple"},BaseSelect=reactExports.forwardRef(function(a,s){var c,u=a.id,d=a.prefixCls,h=a.className,p=a.showSearch,m=a.tagRender,f=a.direction,_=a.omitDomProps,y=a.displayValues,E=a.onDisplayValuesChange,b=a.emptyOptions,T=a.notFoundContent,A=T===void 0?"Not Found":T,v=a.onClear,S=a.mode,O=a.disabled,I=a.loading,x=a.getInputElement,P=a.getRawInputElement,w=a.open,C=a.defaultOpen,k=a.onDropdownVisibleChange,R=a.activeValue,N=a.onActiveValueChange,F=a.activeDescendantId,L=a.searchValue,X=a.autoClearSearchValue,V=a.onSearch,H=a.onSearchSplit,ee=a.tokenSeparators,Q=a.allowClear,Z=a.suffixIcon,K=a.clearIcon,se=a.OptionList,ne=a.animation,le=a.transitionName,he=a.dropdownStyle,Y=a.dropdownClassName,D=a.dropdownMatchSelectWidth,G=a.dropdownRender,B=a.dropdownAlign,U=a.placement,W=a.builtinPlacements,q=a.getPopupContainer,J=a.showAction,ae=J===void 0?[]:J,ce=a.onFocus,ie=a.onBlur,ue=a.onKeyUp,Ee=a.onKeyDown,xe=a.onMouseDown,ve=_objectWithoutProperties(a,_excluded$d),$e=isMultiple(S),_e=(p!==void 0?p:$e)||S==="combobox",Be=_objectSpread2({},ve);DEFAULT_OMIT_PROPS.forEach(function(ut){delete Be[ut]}),_==null||_.forEach(function(ut){delete Be[ut]});var ze=reactExports.useState(!1),Se=_slicedToArray(ze,2),pe=Se[0],me=Se[1];reactExports.useEffect(function(){me(isMobile())},[]);var Oe=reactExports.useRef(null),Le=reactExports.useRef(null),We=reactExports.useRef(null),Ze=reactExports.useRef(null),Qe=reactExports.useRef(null),Je=reactExports.useRef(!1),tt=useDelayReset(),rt=_slicedToArray(tt,3),at=rt[0],it=rt[1],Ne=rt[2];reactExports.useImperativeHandle(s,function(){var ut,gt;return{focus:(ut=Ze.current)===null||ut===void 0?void 0:ut.focus,blur:(gt=Ze.current)===null||gt===void 0?void 0:gt.blur,scrollTo:function(bt){var yt;return(yt=Qe.current)===null||yt===void 0?void 0:yt.scrollTo(bt)}}});var ye=reactExports.useMemo(function(){var ut;if(S!=="combobox")return L;var gt=(ut=y[0])===null||ut===void 0?void 0:ut.value;return typeof gt=="string"||typeof gt=="number"?String(gt):""},[L,S,y]),ge=S==="combobox"&&typeof x=="function"&&x()||null,Fe=typeof P=="function"&&P(),Ue=useComposeRef(Le,Fe==null||(c=Fe.props)===null||c===void 0?void 0:c.ref),dt=reactExports.useState(!1),pt=_slicedToArray(dt,2),Ae=pt[0],Pe=pt[1];useLayoutEffect$1(function(){Pe(!0)},[]);var De=useMergedState(!1,{defaultValue:C,value:w}),Ce=_slicedToArray(De,2),Xe=Ce[0],Ge=Ce[1],et=Ae?Xe:!1,Me=!A&&b;(O||Me&&et&&S==="combobox")&&(et=!1);var ot=Me?!1:et,ke=reactExports.useCallback(function(ut){var gt=ut!==void 0?ut:!et;O||(Ge(gt),et!==gt&&(k==null||k(gt)))},[O,et,Ge,k]),re=reactExports.useMemo(function(){return(ee||[]).some(function(ut){return[`
`,`\r
`].includes(ut)})},[ee]),j=reactExports.useContext(SelectContext)||{},te=j.maxCount,oe=j.rawValues,fe=function(ut,gt,bt){if(!($e&&isValidCount(te)&&(oe==null?void 0:oe.size)>=te)){var yt=!0,vt=ut;N==null||N(null);var wt=getSeparatedContent(ut,ee,isValidCount(te)?te-oe.size:void 0),Pt=bt?null:wt;return S!=="combobox"&&Pt&&(vt="",H==null||H(Pt),ke(!1),yt=!1),V&&ye!==vt&&V(vt,{source:gt?"typing":"effect"}),yt}},be=function(ut){!ut||!ut.trim()||V(ut,{source:"submit"})};reactExports.useEffect(function(){!et&&!$e&&S!=="combobox"&&fe("",!1,!1)},[et]),reactExports.useEffect(function(){Xe&&O&&Ge(!1),O&&!Je.current&&it(!1)},[O]);var we=useLock(),je=_slicedToArray(we,2),Ve=je[0],Ye=je[1],Ke=function(ut){var gt=Ve(),bt=ut.which;if(bt===KeyCode.ENTER&&(S!=="combobox"&&ut.preventDefault(),et||ke(!0)),Ye(!!ye),bt===KeyCode.BACKSPACE&&!gt&&$e&&!ye&&y.length){for(var yt=_toConsumableArray(y),vt=null,wt=yt.length-1;wt>=0;wt-=1){var Pt=yt[wt];if(!Pt.disabled){yt.splice(wt,1),vt=Pt;break}}vt&&E(yt,{type:"remove",values:[vt]})}for(var xt=arguments.length,jt=new Array(xt>1?xt-1:0),Nt=1;Nt<xt;Nt++)jt[Nt-1]=arguments[Nt];if(et){var Vt;(Vt=Qe.current)===null||Vt===void 0||Vt.onKeyDown.apply(Vt,[ut].concat(jt))}Ee==null||Ee.apply(void 0,[ut].concat(jt))},He=function(ut){for(var gt=arguments.length,bt=new Array(gt>1?gt-1:0),yt=1;yt<gt;yt++)bt[yt-1]=arguments[yt];if(et){var vt;(vt=Qe.current)===null||vt===void 0||vt.onKeyUp.apply(vt,[ut].concat(bt))}ue==null||ue.apply(void 0,[ut].concat(bt))},qe=function(ut){var gt=y.filter(function(bt){return bt!==ut});E(gt,{type:"remove",values:[ut]})},nt=reactExports.useRef(!1),st=function(){it(!0),O||(ce&&!nt.current&&ce.apply(void 0,arguments),ae.includes("focus")&&ke(!0)),nt.current=!0},ct=function(){Je.current=!0,it(!1,function(){nt.current=!1,Je.current=!1,ke(!1)}),!O&&(ye&&(S==="tags"?V(ye,{source:"submit"}):S==="multiple"&&V("",{source:"blur"})),ie&&ie.apply(void 0,arguments))},ht=[];reactExports.useEffect(function(){return function(){ht.forEach(function(ut){return clearTimeout(ut)}),ht.splice(0,ht.length)}},[]);var mt=function(ut){var gt,bt=ut.target,yt=(gt=We.current)===null||gt===void 0?void 0:gt.getPopupElement();if(yt&&yt.contains(bt)){var vt=setTimeout(function(){var jt=ht.indexOf(vt);if(jt!==-1&&ht.splice(jt,1),Ne(),!pe&&!yt.contains(document.activeElement)){var Nt;(Nt=Ze.current)===null||Nt===void 0||Nt.focus()}});ht.push(vt)}for(var wt=arguments.length,Pt=new Array(wt>1?wt-1:0),xt=1;xt<wt;xt++)Pt[xt-1]=arguments[xt];xe==null||xe.apply(void 0,[ut].concat(Pt))},_t=reactExports.useState({}),Tt=_slicedToArray(_t,2),At=Tt[1];function It(){At({})}var Ht;Fe&&(Ht=function(ut){ke(ut)}),useSelectTriggerControl(function(){var ut;return[Oe.current,(ut=We.current)===null||ut===void 0?void 0:ut.getPopupElement()]},ot,ke,!!Fe);var zt=reactExports.useMemo(function(){return _objectSpread2(_objectSpread2({},a),{},{notFoundContent:A,open:et,triggerOpen:ot,id:u,showSearch:_e,multiple:$e,toggleOpen:ke})},[a,A,ot,et,u,_e,$e,ke]),Xt=!!Z||I,Wt;Xt&&(Wt=reactExports.createElement(TransBtn,{className:classNames("".concat(d,"-arrow"),_defineProperty({},"".concat(d,"-arrow-loading"),I)),customizeIcon:Z,customizeIconProps:{loading:I,searchValue:ye,open:et,focused:at,showSearch:_e}}));var $t=function(){var ut;v==null||v(),(ut=Ze.current)===null||ut===void 0||ut.focus(),E([],{type:"clear",values:y}),fe("",!1,!1)},Bt=useAllowClear(d,$t,y,Q,K,O,ye,S),Zt=Bt.allowClear,Yt=Bt.clearIcon,Lt=reactExports.createElement(se,{ref:Qe}),Jt=classNames(d,h,_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({},"".concat(d,"-focused"),at),"".concat(d,"-multiple"),$e),"".concat(d,"-single"),!$e),"".concat(d,"-allow-clear"),Q),"".concat(d,"-show-arrow"),Xt),"".concat(d,"-disabled"),O),"".concat(d,"-loading"),I),"".concat(d,"-open"),et),"".concat(d,"-customize-input"),ge),"".concat(d,"-show-search"),_e)),Gt=reactExports.createElement(RefSelectTrigger,{ref:We,disabled:O,prefixCls:d,visible:ot,popupElement:Lt,animation:ne,transitionName:le,dropdownStyle:he,dropdownClassName:Y,direction:f,dropdownMatchSelectWidth:D,dropdownRender:G,dropdownAlign:B,placement:U,builtinPlacements:W,getPopupContainer:q,empty:b,getTriggerDOMNode:function(){return Le.current},onPopupVisibleChange:Ht,onPopupMouseEnter:It},Fe?reactExports.cloneElement(Fe,{ref:Ue}):reactExports.createElement(ForwardSelector,_extends$2({},a,{domRef:Le,prefixCls:d,inputElement:ge,ref:Ze,id:u,showSearch:_e,autoClearSearchValue:X,mode:S,activeDescendantId:F,tagRender:m,values:y,open:et,onToggleOpen:ke,activeValue:R,searchValue:ye,onSearch:fe,onSearchSubmit:be,onRemove:qe,tokenWithEnter:re}))),Ot;return Fe?Ot=Gt:Ot=reactExports.createElement("div",_extends$2({className:Jt},Be,{ref:Oe,onMouseDown:mt,onKeyDown:Ke,onKeyUp:He,onFocus:st,onBlur:ct}),at&&!et&&reactExports.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(y.map(function(ut){var gt=ut.label,bt=ut.value;return["number","string"].includes(_typeof(gt))?gt:bt}).join(", "))),Gt,Wt,Zt&&Yt),reactExports.createElement(BaseSelectContext.Provider,{value:zt},Ot)}),OptGroup=function(){return null};OptGroup.isSelectOptGroup=!0;var Option=function(){return null};Option.isSelectOption=!0;var Filler=reactExports.forwardRef(function(a,s){var c=a.height,u=a.offsetY,d=a.offsetX,h=a.children,p=a.prefixCls,m=a.onInnerResize,f=a.innerProps,_=a.rtl,y=a.extra,E={},b={display:"flex",flexDirection:"column"};return u!==void 0&&(E={height:c,position:"relative",overflow:"hidden"},b=_objectSpread2(_objectSpread2({},b),{},_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({transform:"translateY(".concat(u,"px)")},_?"marginRight":"marginLeft",-d),"position","absolute"),"left",0),"right",0),"top",0))),reactExports.createElement("div",{style:E},reactExports.createElement(RefResizeObserver,{onResize:function(T){var A=T.offsetHeight;A&&m&&m()}},reactExports.createElement("div",_extends$2({style:b,className:classNames(_defineProperty({},"".concat(p,"-holder-inner"),p)),ref:s},f),h,y)))});Filler.displayName="Filler";function getPageXY(a,s){var c="touches"in a?a.touches[0]:a;return c[s?"pageX":"pageY"]}var ScrollBar=reactExports.forwardRef(function(a,s){var c=a.prefixCls,u=a.rtl,d=a.scrollOffset,h=a.scrollRange,p=a.onStartMove,m=a.onStopMove,f=a.onScroll,_=a.horizontal,y=a.spinSize,E=a.containerSize,b=a.style,T=a.thumbStyle,A=reactExports.useState(!1),v=_slicedToArray(A,2),S=v[0],O=v[1],I=reactExports.useState(null),x=_slicedToArray(I,2),P=x[0],w=x[1],C=reactExports.useState(null),k=_slicedToArray(C,2),R=k[0],N=k[1],F=!u,L=reactExports.useRef(),X=reactExports.useRef(),V=reactExports.useState(!1),H=_slicedToArray(V,2),ee=H[0],Q=H[1],Z=reactExports.useRef(),K=function(){clearTimeout(Z.current),Q(!0),Z.current=setTimeout(function(){Q(!1)},3e3)},se=h-E||0,ne=E-y||0,le=reactExports.useMemo(function(){if(d===0||se===0)return 0;var J=d/se;return J*ne},[d,se,ne]),he=function(J){J.stopPropagation(),J.preventDefault()},Y=reactExports.useRef({top:le,dragging:S,pageY:P,startTop:R});Y.current={top:le,dragging:S,pageY:P,startTop:R};var D=function(J){O(!0),w(getPageXY(J,_)),N(Y.current.top),p(),J.stopPropagation(),J.preventDefault()};reactExports.useEffect(function(){var J=function(ie){ie.preventDefault()},ae=L.current,ce=X.current;return ae.addEventListener("touchstart",J),ce.addEventListener("touchstart",D),function(){ae.removeEventListener("touchstart",J),ce.removeEventListener("touchstart",D)}},[]);var G=reactExports.useRef();G.current=se;var B=reactExports.useRef();B.current=ne,reactExports.useEffect(function(){if(S){var J,ae=function(ie){var ue=Y.current,Ee=ue.dragging,xe=ue.pageY,ve=ue.startTop;if(wrapperRaf.cancel(J),Ee){var $e=getPageXY(ie,_)-xe,_e=ve;!F&&_?_e-=$e:_e+=$e;var Be=G.current,ze=B.current,Se=ze?_e/ze:0,pe=Math.ceil(Se*Be);pe=Math.max(pe,0),pe=Math.min(pe,Be),J=wrapperRaf(function(){f(pe,_)})}},ce=function(){O(!1),m()};return window.addEventListener("mousemove",ae),window.addEventListener("touchmove",ae),window.addEventListener("mouseup",ce),window.addEventListener("touchend",ce),function(){window.removeEventListener("mousemove",ae),window.removeEventListener("touchmove",ae),window.removeEventListener("mouseup",ce),window.removeEventListener("touchend",ce),wrapperRaf.cancel(J)}}},[S]),reactExports.useEffect(function(){K()},[d]),reactExports.useImperativeHandle(s,function(){return{delayHidden:K}});var U="".concat(c,"-scrollbar"),W={position:"absolute",visibility:ee?null:"hidden"},q={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return _?(W.height=8,W.left=0,W.right=0,W.bottom=0,q.height="100%",q.width=y,F?q.left=le:q.right=le):(W.width=8,W.top=0,W.bottom=0,F?W.right=0:W.left=0,q.width="100%",q.height=y,q.top=le),reactExports.createElement("div",{ref:L,className:classNames(U,_defineProperty(_defineProperty(_defineProperty({},"".concat(U,"-horizontal"),_),"".concat(U,"-vertical"),!_),"".concat(U,"-visible"),ee)),style:_objectSpread2(_objectSpread2({},W),b),onMouseDown:he,onMouseMove:K},reactExports.createElement("div",{ref:X,className:classNames("".concat(U,"-thumb"),_defineProperty({},"".concat(U,"-thumb-moving"),S)),style:_objectSpread2(_objectSpread2({},q),T),onMouseDown:D}))});function Item$3(a){var s=a.children,c=a.setRef,u=reactExports.useCallback(function(d){c(d)},[]);return reactExports.cloneElement(s,{ref:u})}function useChildren$1(a,s,c,u,d,h,p){var m=p.getKey;return a.slice(s,c+1).map(function(f,_){var y=s+_,E=h(f,y,{style:{width:u}}),b=m(f);return reactExports.createElement(Item$3,{key:b,setRef:function(T){return d(f,T)}},E)})}var CacheMap=function(){function a(){_classCallCheck(this,a),_defineProperty(this,"maps",void 0),_defineProperty(this,"id",0),this.maps=Object.create(null)}return _createClass(a,[{key:"set",value:function(s,c){this.maps[s]=c,this.id+=1}},{key:"get",value:function(s){return this.maps[s]}}]),a}();function useHeights(a,s,c){var u=reactExports.useState(0),d=_slicedToArray(u,2),h=d[0],p=d[1],m=reactExports.useRef(new Map),f=reactExports.useRef(new CacheMap),_=reactExports.useRef();function y(){wrapperRaf.cancel(_.current)}function E(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;y();var A=function(){m.current.forEach(function(v,S){if(v&&v.offsetParent){var O=findDOMNode(v),I=O.offsetHeight;f.current.get(S)!==I&&f.current.set(S,O.offsetHeight)}}),p(function(v){return v+1})};T?A():_.current=wrapperRaf(A)}function b(T,A){var v=a(T),S=m.current.get(v);A?(m.current.set(v,A),E()):m.current.delete(v),!S!=!A&&(A?s==null||s(T):c==null||c(T))}return reactExports.useEffect(function(){return y},[]),[b,E,f.current,h]}var MAX_TIMES=10;function useScrollTo(a,s,c,u,d,h,p,m){var f=reactExports.useRef(),_=reactExports.useState(null),y=_slicedToArray(_,2),E=y[0],b=y[1];return useLayoutEffect$1(function(){if(E&&E.times<MAX_TIMES){if(!a.current){b(function(se){return _objectSpread2({},se)});return}h();var T=E.targetAlign,A=E.originAlign,v=E.index,S=E.offset,O=a.current.clientHeight,I=!1,x=T,P=null;if(O){for(var w=T||A,C=0,k=0,R=0,N=Math.min(s.length-1,v),F=0;F<=N;F+=1){var L=d(s[F]);k=C;var X=c.get(L);R=k+(X===void 0?u:X),C=R}for(var V=w==="top"?S:O-S,H=N;H>=0;H-=1){var ee=d(s[H]),Q=c.get(ee);if(Q===void 0){I=!0;break}if(V-=Q,V<=0)break}switch(w){case"top":P=k-S;break;case"bottom":P=R-O+S;break;default:{var Z=a.current.scrollTop,K=Z+O;k<Z?x="top":R>K&&(x="bottom")}}P!==null&&p(P),P!==E.lastTop&&(I=!0)}I&&b(_objectSpread2(_objectSpread2({},E),{},{times:E.times+1,targetAlign:x,lastTop:P}))}},[E,a.current]),function(T){if(T==null){m();return}if(wrapperRaf.cancel(f.current),typeof T=="number")p(T);else if(T&&_typeof(T)==="object"){var A,v=T.align;"index"in T?A=T.index:A=s.findIndex(function(I){return d(I)===T.key});var S=T.offset,O=S===void 0?0:S;b({times:0,index:A,offset:O,originAlign:v})}}}function findListDiffIndex(a,s,c){var u=a.length,d=s.length,h,p;if(u===0&&d===0)return null;u<d?(h=a,p=s):(h=s,p=a);var m={__EMPTY_ITEM__:!0};function f(A){return A!==void 0?c(A):m}for(var _=null,y=Math.abs(u-d)!==1,E=0;E<p.length;E+=1){var b=f(h[E]),T=f(p[E]);if(b!==T){_=E,y=y||b!==f(p[E+1]);break}}return _===null?null:{index:_,multiple:y}}function useDiffItem(a,s,c){var u=reactExports.useState(a),d=_slicedToArray(u,2),h=d[0],p=d[1],m=reactExports.useState(null),f=_slicedToArray(m,2),_=f[0],y=f[1];return reactExports.useEffect(function(){var E=findListDiffIndex(h||[],a||[],s);(E==null?void 0:E.index)!==void 0&&(c==null||c(E.index),y(a[E.index])),p(a)},[a]),[_]}var isFF=(typeof navigator>"u"?"undefined":_typeof(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const useOriginScroll=function(a,s){var c=reactExports.useRef(!1),u=reactExports.useRef(null);function d(){clearTimeout(u.current),c.current=!0,u.current=setTimeout(function(){c.current=!1},50)}var h=reactExports.useRef({top:a,bottom:s});return h.current.top=a,h.current.bottom=s,function(p){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,f=p<0&&h.current.top||p>0&&h.current.bottom;return m&&f?(clearTimeout(u.current),c.current=!1):(!f||c.current)&&d(),!c.current&&f}};function useFrameWheel(a,s,c,u,d){var h=reactExports.useRef(0),p=reactExports.useRef(null),m=reactExports.useRef(null),f=reactExports.useRef(!1),_=useOriginScroll(s,c);function y(S,O){wrapperRaf.cancel(p.current),h.current+=O,m.current=O,!_(O)&&(isFF||S.preventDefault(),p.current=wrapperRaf(function(){var I=f.current?10:1;d(h.current*I),h.current=0}))}function E(S,O){d(O,!0),isFF||S.preventDefault()}var b=reactExports.useRef(null),T=reactExports.useRef(null);function A(S){if(a){wrapperRaf.cancel(T.current),T.current=wrapperRaf(function(){b.current=null},2);var O=S.deltaX,I=S.deltaY,x=S.shiftKey,P=O,w=I;(b.current==="sx"||!b.current&&x&&I&&!O)&&(P=I,w=0,b.current="sx");var C=Math.abs(P),k=Math.abs(w);b.current===null&&(b.current=u&&C>k?"x":"y"),b.current==="y"?y(S,w):E(S,P)}}function v(S){a&&(f.current=S.detail===m.current)}return[A,v]}var SMOOTH_PTG=14/15;function useMobileTouchMove(a,s,c){var u=reactExports.useRef(!1),d=reactExports.useRef(0),h=reactExports.useRef(null),p=reactExports.useRef(null),m,f=function(E){if(u.current){var b=Math.ceil(E.touches[0].pageY),T=d.current-b;d.current=b,c(T)&&E.preventDefault(),clearInterval(p.current),p.current=setInterval(function(){T*=SMOOTH_PTG,(!c(T,!0)||Math.abs(T)<=.1)&&clearInterval(p.current)},16)}},_=function(){u.current=!1,m()},y=function(E){m(),E.touches.length===1&&!u.current&&(u.current=!0,d.current=Math.ceil(E.touches[0].pageY),h.current=E.target,h.current.addEventListener("touchmove",f),h.current.addEventListener("touchend",_))};m=function(){h.current&&(h.current.removeEventListener("touchmove",f),h.current.removeEventListener("touchend",_))},useLayoutEffect$1(function(){return a&&s.current.addEventListener("touchstart",y),function(){var E;(E=s.current)===null||E===void 0||E.removeEventListener("touchstart",y),m(),clearInterval(p.current)}},[a])}var MIN_SIZE=20;function getSpinSize(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,c=a/s*a;return isNaN(c)&&(c=0),c=Math.max(c,MIN_SIZE),Math.floor(c)}function useGetSize(a,s,c,u){var d=reactExports.useMemo(function(){return[new Map,[]]},[a,c.id,u]),h=_slicedToArray(d,2),p=h[0],m=h[1],f=function(_){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_,E=p.get(_),b=p.get(y);if(E===void 0||b===void 0)for(var T=a.length,A=m.length;A<T;A+=1){var v,S=a[A],O=s(S);p.set(O,A);var I=(v=c.get(O))!==null&&v!==void 0?v:u;if(m[A]=(m[A-1]||0)+I,O===_&&(E=A),O===y&&(b=A),E!==void 0&&b!==void 0)break}return{top:m[E-1]||0,bottom:m[b]}};return f}var _excluded$c=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],EMPTY_DATA=[],ScrollStyle={overflowY:"auto",overflowAnchor:"none"};function RawList(a,s){var c=a.prefixCls,u=c===void 0?"rc-virtual-list":c,d=a.className,h=a.height,p=a.itemHeight,m=a.fullHeight,f=m===void 0?!0:m,_=a.style,y=a.data,E=a.children,b=a.itemKey,T=a.virtual,A=a.direction,v=a.scrollWidth,S=a.component,O=S===void 0?"div":S,I=a.onScroll,x=a.onVirtualScroll,P=a.onVisibleChange,w=a.innerProps,C=a.extraRender,k=a.styles,R=_objectWithoutProperties(a,_excluded$c),N=!!(T!==!1&&h&&p),F=N&&y&&(p*y.length>h||!!v),L=A==="rtl",X=classNames(u,_defineProperty({},"".concat(u,"-rtl"),L),d),V=y||EMPTY_DATA,H=reactExports.useRef(),ee=reactExports.useRef(),Q=reactExports.useState(0),Z=_slicedToArray(Q,2),K=Z[0],se=Z[1],ne=reactExports.useState(0),le=_slicedToArray(ne,2),he=le[0],Y=le[1],D=reactExports.useState(!1),G=_slicedToArray(D,2),B=G[0],U=G[1],W=function(){U(!0)},q=function(){U(!1)},J=reactExports.useCallback(function(Ke){return typeof b=="function"?b(Ke):Ke==null?void 0:Ke[b]},[b]),ae={getKey:J};function ce(Ke){se(function(He){var qe;typeof Ke=="function"?qe=Ke(He):qe=Ke;var nt=dt(qe);return H.current.scrollTop=nt,nt})}var ie=reactExports.useRef({start:0,end:V.length}),ue=reactExports.useRef(),Ee=useDiffItem(V,J),xe=_slicedToArray(Ee,1),ve=xe[0];ue.current=ve;var $e=useHeights(J,null,null),_e=_slicedToArray($e,4),Be=_e[0],ze=_e[1],Se=_e[2],pe=_e[3],me=reactExports.useMemo(function(){if(!N)return{scrollHeight:void 0,start:0,end:V.length-1,offset:void 0};if(!F){var Ke;return{scrollHeight:((Ke=ee.current)===null||Ke===void 0?void 0:Ke.offsetHeight)||0,start:0,end:V.length-1,offset:void 0}}for(var He=0,qe,nt,st,ct=V.length,ht=0;ht<ct;ht+=1){var mt=V[ht],_t=J(mt),Tt=Se.get(_t),At=He+(Tt===void 0?p:Tt);At>=K&&qe===void 0&&(qe=ht,nt=He),At>K+h&&st===void 0&&(st=ht),He=At}return qe===void 0&&(qe=0,nt=0,st=Math.ceil(h/p)),st===void 0&&(st=V.length-1),st=Math.min(st+1,V.length-1),{scrollHeight:He,start:qe,end:st,offset:nt}},[F,N,K,V,pe,h]),Oe=me.scrollHeight,Le=me.start,We=me.end,Ze=me.offset;ie.current.start=Le,ie.current.end=We;var Qe=reactExports.useState({width:0,height:h}),Je=_slicedToArray(Qe,2),tt=Je[0],rt=Je[1],at=function(Ke){rt({width:Ke.width||Ke.offsetWidth,height:Ke.height||Ke.offsetHeight})},it=reactExports.useRef(),Ne=reactExports.useRef(),ye=reactExports.useMemo(function(){return getSpinSize(tt.width,v)},[tt.width,v]),ge=reactExports.useMemo(function(){return getSpinSize(tt.height,Oe)},[tt.height,Oe]),Fe=Oe-h,Ue=reactExports.useRef(Fe);Ue.current=Fe;function dt(Ke){var He=Ke;return Number.isNaN(Ue.current)||(He=Math.min(He,Ue.current)),He=Math.max(He,0),He}var pt=K<=0,Ae=K>=Fe,Pe=useOriginScroll(pt,Ae),De=function(){return{x:L?-he:he,y:K}},Ce=reactExports.useRef(De()),Xe=useEvent(function(){if(x){var Ke=De();(Ce.current.x!==Ke.x||Ce.current.y!==Ke.y)&&(x(Ke),Ce.current=Ke)}});function Ge(Ke,He){var qe=Ke;He?(reactDomExports.flushSync(function(){Y(qe)}),Xe()):ce(qe)}function et(Ke){var He=Ke.currentTarget.scrollTop;He!==K&&ce(He),I==null||I(Ke),Xe()}var Me=function(Ke){var He=Ke,qe=v-tt.width;return He=Math.max(He,0),He=Math.min(He,qe),He},ot=useEvent(function(Ke,He){He?(reactDomExports.flushSync(function(){Y(function(qe){var nt=qe+(L?-Ke:Ke);return Me(nt)})}),Xe()):ce(function(qe){var nt=qe+Ke;return nt})}),ke=useFrameWheel(N,pt,Ae,!!v,ot),re=_slicedToArray(ke,2),j=re[0],te=re[1];useMobileTouchMove(N,H,function(Ke,He){return Pe(Ke,He)?!1:(j({preventDefault:function(){},deltaY:Ke}),!0)}),useLayoutEffect$1(function(){function Ke(qe){N&&qe.preventDefault()}var He=H.current;return He.addEventListener("wheel",j),He.addEventListener("DOMMouseScroll",te),He.addEventListener("MozMousePixelScroll",Ke),function(){He.removeEventListener("wheel",j),He.removeEventListener("DOMMouseScroll",te),He.removeEventListener("MozMousePixelScroll",Ke)}},[N]),useLayoutEffect$1(function(){v&&Y(function(Ke){return Me(Ke)})},[tt.width,v]);var oe=function(){var Ke,He;(Ke=it.current)===null||Ke===void 0||Ke.delayHidden(),(He=Ne.current)===null||He===void 0||He.delayHidden()},fe=useScrollTo(H,V,Se,p,J,function(){return ze(!0)},ce,oe);reactExports.useImperativeHandle(s,function(){return{getScrollInfo:De,scrollTo:function(Ke){function He(qe){return qe&&_typeof(qe)==="object"&&("left"in qe||"top"in qe)}He(Ke)?(Ke.left!==void 0&&Y(Me(Ke.left)),fe(Ke.top)):fe(Ke)}}}),useLayoutEffect$1(function(){if(P){var Ke=V.slice(Le,We+1);P(Ke,V)}},[Le,We,V]);var be=useGetSize(V,J,Se,p),we=C==null?void 0:C({start:Le,end:We,virtual:F,offsetX:he,offsetY:Ze,rtl:L,getSize:be}),je=useChildren$1(V,Le,We,v,Be,E,ae),Ve=null;h&&(Ve=_objectSpread2(_defineProperty({},f?"height":"maxHeight",h),ScrollStyle),N&&(Ve.overflowY="hidden",v&&(Ve.overflowX="hidden"),B&&(Ve.pointerEvents="none")));var Ye={};return L&&(Ye.dir="rtl"),reactExports.createElement("div",_extends$2({style:_objectSpread2(_objectSpread2({},_),{},{position:"relative"}),className:X},Ye,R),reactExports.createElement(RefResizeObserver,{onResize:at},reactExports.createElement(O,{className:"".concat(u,"-holder"),style:Ve,ref:H,onScroll:et,onMouseEnter:oe},reactExports.createElement(Filler,{prefixCls:u,height:Oe,offsetX:he,offsetY:Ze,scrollWidth:v,onInnerResize:ze,ref:ee,innerProps:w,rtl:L,extra:we},je))),F&&Oe>h&&reactExports.createElement(ScrollBar,{ref:it,prefixCls:u,scrollOffset:K,scrollRange:Oe,rtl:L,onScroll:Ge,onStartMove:W,onStopMove:q,spinSize:ge,containerSize:tt.height,style:k==null?void 0:k.verticalScrollBar,thumbStyle:k==null?void 0:k.verticalScrollBarThumb}),F&&v>tt.width&&reactExports.createElement(ScrollBar,{ref:Ne,prefixCls:u,scrollOffset:he,scrollRange:v,rtl:L,onScroll:Ge,onStartMove:W,onStopMove:q,spinSize:ye,containerSize:tt.width,horizontal:!0,style:k==null?void 0:k.horizontalScrollBar,thumbStyle:k==null?void 0:k.horizontalScrollBarThumb}))}var List$1=reactExports.forwardRef(RawList);List$1.displayName="List";function isPlatformMac(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var _excluded$b=["disabled","title","children","style","className"];function isTitleType(a){return typeof a=="string"||typeof a=="number"}var OptionList=function(a,s){var c=useBaseProps(),u=c.prefixCls,d=c.id,h=c.open,p=c.multiple,m=c.mode,f=c.searchValue,_=c.toggleOpen,y=c.notFoundContent,E=c.onPopupScroll,b=reactExports.useContext(SelectContext),T=b.maxCount,A=b.flattenOptions,v=b.onActiveValue,S=b.defaultActiveFirstOption,O=b.onSelect,I=b.menuItemSelectedIcon,x=b.rawValues,P=b.fieldNames,w=b.virtual,C=b.direction,k=b.listHeight,R=b.listItemHeight,N=b.optionRender,F="".concat(u,"-item"),L=useMemo(function(){return A},[h,A],function(q,J){return J[0]&&q[1]!==J[1]}),X=reactExports.useRef(null),V=reactExports.useMemo(function(){return p&&isValidCount(T)&&(x==null?void 0:x.size)>=T},[p,T,x==null?void 0:x.size]),H=function(q){q.preventDefault()},ee=function(q){var J;(J=X.current)===null||J===void 0||J.scrollTo(typeof q=="number"?{index:q}:q)},Q=function(q){for(var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,ae=L.length,ce=0;ce<ae;ce+=1){var ie=(q+ce*J+ae)%ae,ue=L[ie]||{},Ee=ue.group,xe=ue.data;if(!Ee&&!(xe!=null&&xe.disabled)&&!V)return ie}return-1},Z=reactExports.useState(function(){return Q(0)}),K=_slicedToArray(Z,2),se=K[0],ne=K[1],le=function(q){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;ne(q);var ae={source:J?"keyboard":"mouse"},ce=L[q];if(!ce){v(null,-1,ae);return}v(ce.value,q,ae)};reactExports.useEffect(function(){le(S!==!1?Q(0):-1)},[L.length,f]);var he=reactExports.useCallback(function(q){return x.has(q)&&m!=="combobox"},[m,_toConsumableArray(x).toString(),x.size]);reactExports.useEffect(function(){var q=setTimeout(function(){if(!p&&h&&x.size===1){var ae=Array.from(x)[0],ce=L.findIndex(function(ie){var ue=ie.data;return ue.value===ae});ce!==-1&&(le(ce),ee(ce))}});if(h){var J;(J=X.current)===null||J===void 0||J.scrollTo(void 0)}return function(){return clearTimeout(q)}},[h,f]);var Y=function(q){q!==void 0&&O(q,{selected:!x.has(q)}),p||_(!1)};if(reactExports.useImperativeHandle(s,function(){return{onKeyDown:function(q){var J=q.which,ae=q.ctrlKey;switch(J){case KeyCode.N:case KeyCode.P:case KeyCode.UP:case KeyCode.DOWN:{var ce=0;if(J===KeyCode.UP?ce=-1:J===KeyCode.DOWN?ce=1:isPlatformMac()&&ae&&(J===KeyCode.N?ce=1:J===KeyCode.P&&(ce=-1)),ce!==0){var ie=Q(se+ce,ce);ee(ie),le(ie,!0)}break}case KeyCode.ENTER:{var ue,Ee=L[se];Ee&&!(Ee!=null&&(ue=Ee.data)!==null&&ue!==void 0&&ue.disabled)&&!V?Y(Ee.value):Y(void 0),h&&q.preventDefault();break}case KeyCode.ESC:_(!1),h&&q.stopPropagation()}},onKeyUp:function(){},scrollTo:function(q){ee(q)}}}),L.length===0)return reactExports.createElement("div",{role:"listbox",id:"".concat(d,"_list"),className:"".concat(F,"-empty"),onMouseDown:H},y);var D=Object.keys(P).map(function(q){return P[q]}),G=function(q){return q.label};function B(q,J){var ae=q.group;return{role:ae?"presentation":"option",id:"".concat(d,"_list_").concat(J)}}var U=function(q){var J=L[q];if(!J)return null;var ae=J.data||{},ce=ae.value,ie=J.group,ue=pickAttrs(ae,!0),Ee=G(J);return J?reactExports.createElement("div",_extends$2({"aria-label":typeof Ee=="string"&&!ie?Ee:null},ue,{key:q},B(J,q),{"aria-selected":he(ce)}),ce):null},W={role:"listbox",id:"".concat(d,"_list")};return reactExports.createElement(reactExports.Fragment,null,w&&reactExports.createElement("div",_extends$2({},W,{style:{height:0,width:0,overflow:"hidden"}}),U(se-1),U(se),U(se+1)),reactExports.createElement(List$1,{itemKey:"key",ref:X,data:L,height:k,itemHeight:R,fullHeight:!1,onMouseDown:H,onScroll:E,virtual:w,direction:C,innerProps:w?null:W},function(q,J){var ae=q.group,ce=q.groupOption,ie=q.data,ue=q.label,Ee=q.value,xe=ie.key;if(ae){var ve,$e=(ve=ie.title)!==null&&ve!==void 0?ve:isTitleType(ue)?ue.toString():void 0;return reactExports.createElement("div",{className:classNames(F,"".concat(F,"-group"),ie.className),title:$e},ue!==void 0?ue:xe)}var _e=ie.disabled,Be=ie.title;ie.children;var ze=ie.style,Se=ie.className,pe=_objectWithoutProperties(ie,_excluded$b),me=omit(pe,D),Oe=he(Ee),Le=_e||!Oe&&V,We="".concat(F,"-option"),Ze=classNames(F,We,Se,_defineProperty(_defineProperty(_defineProperty(_defineProperty({},"".concat(We,"-grouped"),ce),"".concat(We,"-active"),se===J&&!Le),"".concat(We,"-disabled"),Le),"".concat(We,"-selected"),Oe)),Qe=G(q),Je=!I||typeof I=="function"||Oe,tt=typeof Qe=="number"?Qe:Qe||Ee,rt=isTitleType(tt)?tt.toString():void 0;return Be!==void 0&&(rt=Be),reactExports.createElement("div",_extends$2({},pickAttrs(me),w?{}:B(q,J),{"aria-selected":Oe,className:Ze,title:rt,onMouseMove:function(){se===J||Le||le(J)},onClick:function(){Le||Y(Ee)},style:ze}),reactExports.createElement("div",{className:"".concat(We,"-content")},typeof N=="function"?N(q,{index:J}):tt),reactExports.isValidElement(I)||Oe,Je&&reactExports.createElement(TransBtn,{className:"".concat(F,"-option-state"),customizeIcon:I,customizeIconProps:{value:Ee,disabled:Le,isSelected:Oe}},Oe?"\u2713":null))}))},RefOptionList=reactExports.forwardRef(OptionList);const useCache=function(a,s){var c=reactExports.useRef({values:new Map,options:new Map}),u=reactExports.useMemo(function(){var h=c.current,p=h.values,m=h.options,f=a.map(function(E){if(E.label===void 0){var b;return _objectSpread2(_objectSpread2({},E),{},{label:(b=p.get(E.value))===null||b===void 0?void 0:b.label})}return E}),_=new Map,y=new Map;return f.forEach(function(E){_.set(E.value,E),y.set(E.value,s.get(E.value)||m.get(E.value))}),c.current.values=_,c.current.options=y,f},[a,s]),d=reactExports.useCallback(function(h){return s.get(h)||c.current.options.get(h)},[s]);return[u,d]};function includes(a,s){return toArray$4(a).join("").toUpperCase().includes(s)}const useFilterOptions=function(a,s,c,u,d){return reactExports.useMemo(function(){if(!c||u===!1)return a;var h=s.options,p=s.label,m=s.value,f=[],_=typeof u=="function",y=c.toUpperCase(),E=_?u:function(T,A){return d?includes(A[d],y):A[h]?includes(A[p!=="children"?p:"label"],y):includes(A[m],y)},b=_?function(T){return injectPropsWithOption(T)}:function(T){return T};return a.forEach(function(T){if(T[h]){var A=E(c,b(T));if(A)f.push(T);else{var v=T[h].filter(function(S){return E(c,b(S))});v.length&&f.push(_objectSpread2(_objectSpread2({},T),{},_defineProperty({},h,v)))}return}E(c,b(T))&&f.push(T)}),f},[a,u,d,c,s])};var uuid=0,isBrowserClient=canUseDom();function getUUID(){var a;return isBrowserClient?(a=uuid,uuid+=1):a="TEST_OR_SSR",a}function useId(a){var s=reactExports.useState(),c=_slicedToArray(s,2),u=c[0],d=c[1];return reactExports.useEffect(function(){d("rc_select_".concat(getUUID()))},[]),a||u}var _excluded$a=["children","value"],_excluded2$1=["children"];function convertNodeToOption(a){var s=a,c=s.key,u=s.props,d=u.children,h=u.value,p=_objectWithoutProperties(u,_excluded$a);return _objectSpread2({key:c,value:h!==void 0?h:c,children:d},p)}function convertChildrenToData(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return toArray$6(a).map(function(c,u){if(!reactExports.isValidElement(c)||!c.type)return null;var d=c,h=d.type.isSelectOptGroup,p=d.key,m=d.props,f=m.children,_=_objectWithoutProperties(m,_excluded2$1);return s||!h?convertNodeToOption(c):_objectSpread2(_objectSpread2({key:"__RC_SELECT_GRP__".concat(p===null?u:p,"__"),label:p},_),{},{options:convertChildrenToData(f)})}).filter(function(c){return c})}var useOptions=function(a,s,c,u,d){return reactExports.useMemo(function(){var h=a,p=!a;p&&(h=convertChildrenToData(s));var m=new Map,f=new Map,_=function(E,b,T){T&&typeof T=="string"&&E.set(b[T],b)},y=function E(b){for(var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,A=0;A<b.length;A+=1){var v=b[A];!v[c.options]||T?(m.set(v[c.value],v),_(f,v,c.label),_(f,v,u),_(f,v,d)):E(v[c.options],!0)}};return y(h),{options:h,valueOptions:m,labelOptions:f}},[a,s,c,u,d])};function useRefFunc(a){var s=reactExports.useRef();s.current=a;var c=reactExports.useCallback(function(){return s.current.apply(s,arguments)},[]);return c}var _excluded$9=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],OMIT_DOM_PROPS=["inputValue"];function isRawValue(a){return!a||_typeof(a)!=="object"}var Select$2=reactExports.forwardRef(function(a,s){var c=a.id,u=a.mode,d=a.prefixCls,h=d===void 0?"rc-select":d,p=a.backfill,m=a.fieldNames,f=a.inputValue,_=a.searchValue,y=a.onSearch,E=a.autoClearSearchValue,b=E===void 0?!0:E,T=a.onSelect,A=a.onDeselect,v=a.dropdownMatchSelectWidth,S=v===void 0?!0:v,O=a.filterOption,I=a.filterSort,x=a.optionFilterProp,P=a.optionLabelProp,w=a.options,C=a.optionRender,k=a.children,R=a.defaultActiveFirstOption,N=a.menuItemSelectedIcon,F=a.virtual,L=a.direction,X=a.listHeight,V=X===void 0?200:X,H=a.listItemHeight,ee=H===void 0?20:H,Q=a.labelRender,Z=a.value,K=a.defaultValue,se=a.labelInValue,ne=a.onChange,le=a.maxCount,he=_objectWithoutProperties(a,_excluded$9),Y=useId(c),D=isMultiple(u),G=!!(!w&&k),B=reactExports.useMemo(function(){return O===void 0&&u==="combobox"?!1:O},[O,u]),U=reactExports.useMemo(function(){return fillFieldNames(m,G)},[JSON.stringify(m),G]),W=useMergedState("",{value:_!==void 0?_:f,postState:function(ke){return ke||""}}),q=_slicedToArray(W,2),J=q[0],ae=q[1],ce=useOptions(w,k,U,x,P),ie=ce.valueOptions,ue=ce.labelOptions,Ee=ce.options,xe=reactExports.useCallback(function(ke){var re=toArray$4(ke);return re.map(function(j){var te,oe,fe,be,we;if(isRawValue(j))te=j;else{var je;fe=j.key,oe=j.label,te=(je=j.value)!==null&&je!==void 0?je:fe}var Ve=ie.get(te);if(Ve){var Ye;oe===void 0&&(oe=Ve==null?void 0:Ve[P||U.label]),fe===void 0&&(fe=(Ye=Ve==null?void 0:Ve.key)!==null&&Ye!==void 0?Ye:te),be=Ve==null?void 0:Ve.disabled,we=Ve==null?void 0:Ve.title}return{label:oe,value:te,key:fe,disabled:be,title:we}})},[U,P,ie]),ve=useMergedState(K,{value:Z}),$e=_slicedToArray(ve,2),_e=$e[0],Be=$e[1],ze=reactExports.useMemo(function(){var ke,re=D&&_e===null?[]:_e,j=xe(re);return u==="combobox"&&isComboNoValue((ke=j[0])===null||ke===void 0?void 0:ke.value)?[]:j},[_e,xe,u,D]),Se=useCache(ze,ie),pe=_slicedToArray(Se,2),me=pe[0],Oe=pe[1],Le=reactExports.useMemo(function(){if(!u&&me.length===1){var ke=me[0];if(ke.value===null&&(ke.label===null||ke.label===void 0))return[]}return me.map(function(re){var j;return _objectSpread2(_objectSpread2({},re),{},{label:(j=typeof Q=="function"?Q(re):re.label)!==null&&j!==void 0?j:re.value})})},[u,me,Q]),We=reactExports.useMemo(function(){return new Set(me.map(function(ke){return ke.value}))},[me]);reactExports.useEffect(function(){if(u==="combobox"){var ke,re=(ke=me[0])===null||ke===void 0?void 0:ke.value;ae(hasValue(re)?String(re):"")}},[me]);var Ze=useRefFunc(function(ke,re){var j=re??ke;return _defineProperty(_defineProperty({},U.value,ke),U.label,j)}),Qe=reactExports.useMemo(function(){if(u!=="tags")return Ee;var ke=_toConsumableArray(Ee),re=function(j){return ie.has(j)};return _toConsumableArray(me).sort(function(j,te){return j.value<te.value?-1:1}).forEach(function(j){var te=j.value;re(te)||ke.push(Ze(te,j.label))}),ke},[Ze,Ee,ie,me,u]),Je=useFilterOptions(Qe,U,J,B,x),tt=reactExports.useMemo(function(){return u!=="tags"||!J||Je.some(function(ke){return ke[x||"value"]===J})||Je.some(function(ke){return ke[U.value]===J})?Je:[Ze(J)].concat(_toConsumableArray(Je))},[Ze,x,u,Je,J,U]),rt=reactExports.useMemo(function(){return I?_toConsumableArray(tt).sort(function(ke,re){return I(ke,re)}):tt},[tt,I]),at=reactExports.useMemo(function(){return flattenOptions(rt,{fieldNames:U,childrenAsData:G})},[rt,U,G]),it=function(ke){var re=xe(ke);if(Be(re),ne&&(re.length!==me.length||re.some(function(oe,fe){var be;return((be=me[fe])===null||be===void 0?void 0:be.value)!==(oe==null?void 0:oe.value)}))){var j=se?re:re.map(function(oe){return oe.value}),te=re.map(function(oe){return injectPropsWithOption(Oe(oe.value))});ne(D?j:j[0],D?te:te[0])}},Ne=reactExports.useState(null),ye=_slicedToArray(Ne,2),ge=ye[0],Fe=ye[1],Ue=reactExports.useState(0),dt=_slicedToArray(Ue,2),pt=dt[0],Ae=dt[1],Pe=R!==void 0?R:u!=="combobox",De=reactExports.useCallback(function(ke,re){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},te=j.source,oe=te===void 0?"keyboard":te;Ae(re),p&&u==="combobox"&&ke!==null&&oe==="keyboard"&&Fe(String(ke))},[p,u]),Ce=function(ke,re,j){var te=function(){var He,qe=Oe(ke);return[se?{label:qe==null?void 0:qe[U.label],value:ke,key:(He=qe==null?void 0:qe.key)!==null&&He!==void 0?He:ke}:ke,injectPropsWithOption(qe)]};if(re&&T){var oe=te(),fe=_slicedToArray(oe,2),be=fe[0],we=fe[1];T(be,we)}else if(!re&&A&&j!=="clear"){var je=te(),Ve=_slicedToArray(je,2),Ye=Ve[0],Ke=Ve[1];A(Ye,Ke)}},Xe=useRefFunc(function(ke,re){var j,te=D?re.selected:!0;te?j=D?[].concat(_toConsumableArray(me),[ke]):[ke]:j=me.filter(function(oe){return oe.value!==ke}),it(j),Ce(ke,te),u==="combobox"?Fe(""):(!isMultiple||b)&&(ae(""),Fe(""))}),Ge=function(ke,re){it(ke);var j=re.type,te=re.values;(j==="remove"||j==="clear")&&te.forEach(function(oe){Ce(oe.value,!1,j)})},et=function(ke,re){if(ae(ke),Fe(null),re.source==="submit"){var j=(ke||"").trim();if(j){var te=Array.from(new Set([].concat(_toConsumableArray(We),[j])));it(te),Ce(j,!0),ae("")}return}re.source!=="blur"&&(u==="combobox"&&it(ke),y==null||y(ke))},Me=function(ke){var re=ke;u!=="tags"&&(re=ke.map(function(te){var oe=ue.get(te);return oe==null?void 0:oe.value}).filter(function(te){return te!==void 0}));var j=Array.from(new Set([].concat(_toConsumableArray(We),_toConsumableArray(re))));it(j),j.forEach(function(te){Ce(te,!0)})},ot=reactExports.useMemo(function(){var ke=F!==!1&&S!==!1;return _objectSpread2(_objectSpread2({},ce),{},{flattenOptions:at,onActiveValue:De,defaultActiveFirstOption:Pe,onSelect:Xe,menuItemSelectedIcon:N,rawValues:We,fieldNames:U,virtual:ke,direction:L,listHeight:V,listItemHeight:ee,childrenAsData:G,maxCount:le,optionRender:C})},[le,ce,at,De,Pe,Xe,N,We,U,F,S,L,V,ee,G,C]);return reactExports.createElement(SelectContext.Provider,{value:ot},reactExports.createElement(BaseSelect,_extends$2({},he,{id:Y,prefixCls:h,ref:s,omitDomProps:OMIT_DOM_PROPS,mode:u,displayValues:Le,onDisplayValuesChange:Ge,direction:L,searchValue:J,onSearch:et,autoClearSearchValue:b,onSearchSplit:Me,dropdownMatchSelectWidth:S,OptionList:RefOptionList,emptyOptions:!at.length,activeValue:ge,activeDescendantId:"".concat(Y,"_list_").concat(pt)})))}),TypedSelect=Select$2;TypedSelect.Option=Option,TypedSelect.OptGroup=OptGroup;function getStatusClassNames(a,s,c){return classNames({[`${a}-status-success`]:s==="success",[`${a}-status-warning`]:s==="warning",[`${a}-status-error`]:s==="error",[`${a}-status-validating`]:s==="validating",[`${a}-has-feedback`]:c})}const getMergedStatus=(a,s)=>s||a,DefaultRenderEmpty=a=>{const{componentName:s}=a,{getPrefixCls:c}=reactExports.useContext(ConfigContext),u=c("empty");switch(s){case"Table":case"List":return React.createElement(Empty,{image:Empty.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return React.createElement(Empty,{image:Empty.PRESENTED_IMAGE_SIMPLE,className:`${u}-small`});default:return React.createElement(Empty,null)}},DefaultRenderEmpty$1=DefaultRenderEmpty,Variants=["outlined","borderless","filled"],useVariant=function(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;const c=reactExports.useContext(VariantContext);let u;typeof a<"u"?u=a:s===!1?u="borderless":u=c??"outlined";const d=Variants.includes(u);return[u,d]},getBuiltInPlacements=a=>{const s={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:a==="scroll"?"scroll":"visible",dynamicInset:!0};return{bottomLeft:Object.assign(Object.assign({},s),{points:["tl","bl"],offset:[0,4]}),bottomRight:Object.assign(Object.assign({},s),{points:["tr","br"],offset:[0,4]}),topLeft:Object.assign(Object.assign({},s),{points:["bl","tl"],offset:[0,-4]}),topRight:Object.assign(Object.assign({},s),{points:["br","tr"],offset:[0,-4]})}};function mergedBuiltinPlacements(a,s){return a||getBuiltInPlacements(s)}const genItemStyle=a=>{const{optionHeight:s,optionFontSize:c,optionLineHeight:u,optionPadding:d}=a;return{position:"relative",display:"block",minHeight:s,padding:d,color:a.colorText,fontWeight:"normal",fontSize:c,lineHeight:u,boxSizing:"border-box"}},genSingleStyle$1=a=>{const{antCls:s,componentCls:c}=a,u=`${c}-item`,d=`&${s}-slide-up-enter${s}-slide-up-enter-active`,h=`&${s}-slide-up-appear${s}-slide-up-appear-active`,p=`&${s}-slide-up-leave${s}-slide-up-leave-active`,m=`${c}-dropdown-placement-`;return[{[`${c}-dropdown`]:Object.assign(Object.assign({},resetComponent(a)),{position:"absolute",top:-9999,zIndex:a.zIndexPopup,boxSizing:"border-box",padding:a.paddingXXS,overflow:"hidden",fontSize:a.fontSize,fontVariant:"initial",backgroundColor:a.colorBgElevated,borderRadius:a.borderRadiusLG,outline:"none",boxShadow:a.boxShadowSecondary,[`
          ${d}${m}bottomLeft,
          ${h}${m}bottomLeft
        `]:{animationName:slideUpIn},[`
          ${d}${m}topLeft,
          ${h}${m}topLeft,
          ${d}${m}topRight,
          ${h}${m}topRight
        `]:{animationName:slideDownIn},[`${p}${m}bottomLeft`]:{animationName:slideUpOut},[`
          ${p}${m}topLeft,
          ${p}${m}topRight
        `]:{animationName:slideDownOut},"&-hidden":{display:"none"},[`${u}`]:Object.assign(Object.assign({},genItemStyle(a)),{cursor:"pointer",transition:`background ${a.motionDurationSlow} ease`,borderRadius:a.borderRadiusSM,"&-group":{color:a.colorTextDescription,fontSize:a.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign({flex:"auto"},textEllipsis),"&-state":{flex:"none",display:"flex",alignItems:"center"},[`&-active:not(${u}-option-disabled)`]:{backgroundColor:a.optionActiveBg},[`&-selected:not(${u}-option-disabled)`]:{color:a.optionSelectedColor,fontWeight:a.optionSelectedFontWeight,backgroundColor:a.optionSelectedBg,[`${u}-option-state`]:{color:a.colorPrimary},[`&:has(+ ${u}-option-selected:not(${u}-option-disabled))`]:{borderEndStartRadius:0,borderEndEndRadius:0,[`& + ${u}-option-selected:not(${u}-option-disabled)`]:{borderStartStartRadius:0,borderStartEndRadius:0}}},"&-disabled":{[`&${u}-option-selected`]:{backgroundColor:a.colorBgContainerDisabled},color:a.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:a.calc(a.controlPaddingHorizontal).mul(2).equal()}},"&-empty":Object.assign(Object.assign({},genItemStyle(a)),{color:a.colorTextDisabled})}),"&-rtl":{direction:"rtl"}})},initSlideMotion(a,"slide-up"),initSlideMotion(a,"slide-down"),initMoveMotion(a,"move-up"),initMoveMotion(a,"move-down")]},genDropdownStyle=genSingleStyle$1,FIXED_ITEM_MARGIN=2,getMultipleSelectorUnit=a=>{const{multipleSelectItemHeight:s,paddingXXS:c,lineWidth:u}=a,d=a.max(a.calc(c).sub(u).equal(),0),h=a.max(a.calc(d).sub(FIXED_ITEM_MARGIN).equal(),0);return{basePadding:d,containerPadding:h,itemHeight:unit(s),itemLineHeight:unit(a.calc(s).sub(a.calc(a.lineWidth).mul(2)).equal())}},getSelectItemStyle=a=>{const{multipleSelectItemHeight:s,selectHeight:c,lineWidth:u}=a;return a.calc(c).sub(s).div(2).sub(u).equal()},genOverflowStyle=a=>{const{componentCls:s,iconCls:c,borderRadiusSM:u,motionDurationSlow:d,paddingXS:h,multipleItemColorDisabled:p,multipleItemBorderColorDisabled:m,colorIcon:f,colorIconHover:_}=a;return{[`${s}-selection-overflow`]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"},[`${s}-selection-item`]:{display:"flex",alignSelf:"center",flex:"none",boxSizing:"border-box",maxWidth:"100%",marginBlock:FIXED_ITEM_MARGIN,borderRadius:u,cursor:"default",transition:`font-size ${d}, line-height ${d}, height ${d}`,marginInlineEnd:a.calc(FIXED_ITEM_MARGIN).mul(2).equal(),paddingInlineStart:h,paddingInlineEnd:a.calc(h).div(2).equal(),[`${s}-disabled&`]:{color:p,borderColor:m,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:a.calc(h).div(2).equal(),overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},resetIcon()),{display:"inline-flex",alignItems:"center",color:f,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${c}`]:{verticalAlign:"-0.2em"},"&:hover":{color:_}})}}}},genSelectionStyle=(a,s)=>{const{componentCls:c}=a,u=`${c}-selection-overflow`,d=a.multipleSelectItemHeight,h=getSelectItemStyle(a),p=s?`${c}-${s}`:"",m=getMultipleSelectorUnit(a);return{[`${c}-multiple${p}`]:Object.assign(Object.assign({},genOverflowStyle(a)),{[`${c}-selector`]:{display:"flex",flexWrap:"wrap",alignItems:"center",height:"100%",paddingInline:m.basePadding,paddingBlock:m.containerPadding,borderRadius:a.borderRadius,[`${c}-disabled&`]:{background:a.multipleSelectorBgDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${unit(FIXED_ITEM_MARGIN)} 0`,lineHeight:unit(d),visibility:"hidden",content:'"\\a0"'}},[`${c}-selection-item`]:{height:m.itemHeight,lineHeight:unit(m.itemLineHeight)},[`${u}-item + ${u}-item`]:{[`${c}-selection-search`]:{marginInlineStart:0}},[`${u}-item-suffix`]:{height:"100%"},[`${c}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:a.calc(a.inputPaddingHorizontalBase).sub(h).equal(),"\n          &-input,\n          &-mirror\n        ":{height:d,fontFamily:a.fontFamily,lineHeight:unit(d),transition:`all ${a.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${c}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:a.inputPaddingHorizontalBase,insetInlineEnd:a.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${a.motionDurationSlow}`}})}};function genSizeStyle$1(a,s){const{componentCls:c}=a,u=s?`${c}-${s}`:"",d={[`${c}-multiple${u}`]:{fontSize:a.fontSize,[`${c}-selector`]:{[`${c}-show-search&`]:{cursor:"text"}},[`
        &${c}-show-arrow ${c}-selector,
        &${c}-allow-clear ${c}-selector
      `]:{paddingInlineEnd:a.calc(a.fontSizeIcon).add(a.controlPaddingHorizontal).equal()}}};return[genSelectionStyle(a,s),d]}const genMultipleStyle=a=>{const{componentCls:s}=a,c=merge$1(a,{selectHeight:a.controlHeightSM,multipleSelectItemHeight:a.multipleItemHeightSM,borderRadius:a.borderRadiusSM,borderRadiusSM:a.borderRadiusXS}),u=merge$1(a,{fontSize:a.fontSizeLG,selectHeight:a.controlHeightLG,multipleSelectItemHeight:a.multipleItemHeightLG,borderRadius:a.borderRadiusLG,borderRadiusSM:a.borderRadius});return[genSizeStyle$1(a),genSizeStyle$1(c,"sm"),{[`${s}-multiple${s}-sm`]:{[`${s}-selection-placeholder`]:{insetInline:a.calc(a.controlPaddingHorizontalSM).sub(a.lineWidth).equal()},[`${s}-selection-search`]:{marginInlineStart:2}}},genSizeStyle$1(u,"lg")]},genMultipleStyle$1=genMultipleStyle;function genSizeStyle(a,s){const{componentCls:c,inputPaddingHorizontalBase:u,borderRadius:d}=a,h=a.calc(a.controlHeight).sub(a.calc(a.lineWidth).mul(2)).equal(),p=s?`${c}-${s}`:"";return{[`${c}-single${p}`]:{fontSize:a.fontSize,height:a.controlHeight,[`${c}-selector`]:Object.assign(Object.assign({},resetComponent(a,!0)),{display:"flex",borderRadius:d,[`${c}-selection-search`]:{position:"absolute",top:0,insetInlineStart:u,insetInlineEnd:u,bottom:0,"&-input":{width:"100%",WebkitAppearance:"textfield"}},[`
          ${c}-selection-item,
          ${c}-selection-placeholder
        `]:{padding:0,lineHeight:unit(h),transition:`all ${a.motionDurationSlow}, visibility 0s`,alignSelf:"center"},[`${c}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${c}-selection-item:empty:after`,`${c}-selection-placeholder:empty:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`
        &${c}-show-arrow ${c}-selection-item,
        &${c}-show-arrow ${c}-selection-placeholder
      `]:{paddingInlineEnd:a.showArrowPaddingInlineEnd},[`&${c}-open ${c}-selection-item`]:{color:a.colorTextPlaceholder},[`&:not(${c}-customize-input)`]:{[`${c}-selector`]:{width:"100%",height:"100%",padding:`0 ${unit(u)}`,[`${c}-selection-search-input`]:{height:h},"&:after":{lineHeight:unit(h)}}},[`&${c}-customize-input`]:{[`${c}-selector`]:{"&:after":{display:"none"},[`${c}-selection-search`]:{position:"static",width:"100%"},[`${c}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${unit(u)}`,"&:after":{display:"none"}}}}}}}function genSingleStyle(a){const{componentCls:s}=a,c=a.calc(a.controlPaddingHorizontalSM).sub(a.lineWidth).equal();return[genSizeStyle(a),genSizeStyle(merge$1(a,{controlHeight:a.controlHeightSM,borderRadius:a.borderRadiusSM}),"sm"),{[`${s}-single${s}-sm`]:{[`&:not(${s}-customize-input)`]:{[`${s}-selection-search`]:{insetInlineStart:c,insetInlineEnd:c},[`${s}-selector`]:{padding:`0 ${unit(c)}`},[`&${s}-show-arrow ${s}-selection-search`]:{insetInlineEnd:a.calc(c).add(a.calc(a.fontSize).mul(1.5)).equal()},[`
            &${s}-show-arrow ${s}-selection-item,
            &${s}-show-arrow ${s}-selection-placeholder
          `]:{paddingInlineEnd:a.calc(a.fontSize).mul(1.5).equal()}}}},genSizeStyle(merge$1(a,{controlHeight:a.singleItemHeightLG,fontSize:a.fontSizeLG,borderRadius:a.borderRadiusLG}),"lg")]}const prepareComponentToken$8=a=>{const{fontSize:s,lineHeight:c,controlHeight:u,controlHeightSM:d,controlHeightLG:h,paddingXXS:p,controlPaddingHorizontal:m,zIndexPopupBase:f,colorText:_,fontWeightStrong:y,controlItemBgActive:E,controlItemBgHover:b,colorBgContainer:T,colorFillSecondary:A,colorBgContainerDisabled:v,colorTextDisabled:S}=a,O=u-p*2,I=d-p*2,x=h-p*2;return{zIndexPopup:f+50,optionSelectedColor:_,optionSelectedFontWeight:y,optionSelectedBg:E,optionActiveBg:b,optionPadding:`${(u-s*c)/2}px ${m}px`,optionFontSize:s,optionLineHeight:c,optionHeight:u,selectorBg:T,clearBg:T,singleItemHeightLG:h,multipleItemBg:A,multipleItemBorderColor:"transparent",multipleItemHeight:O,multipleItemHeightSM:I,multipleItemHeightLG:x,multipleSelectorBgDisabled:v,multipleItemColorDisabled:S,multipleItemBorderColorDisabled:"transparent",showArrowPaddingInlineEnd:Math.ceil(a.fontSize*1.25)}},genBaseOutlinedStyle$1=(a,s)=>{const{componentCls:c,antCls:u,controlOutlineWidth:d}=a;return{[`&:not(${c}-customize-input) ${c}-selector`]:{border:`${unit(a.lineWidth)} ${a.lineType} ${s.borderColor}`,background:a.selectorBg},[`&:not(${c}-disabled):not(${c}-customize-input):not(${u}-pagination-size-changer)`]:{[`&:hover ${c}-selector`]:{borderColor:s.hoverBorderHover},[`${c}-focused& ${c}-selector`]:{borderColor:s.activeBorderColor,boxShadow:`0 0 0 ${unit(d)} ${s.activeShadowColor}`,outline:0}}}},genOutlinedStatusStyle$1=(a,s)=>({[`&${a.componentCls}-status-${s.status}`]:Object.assign({},genBaseOutlinedStyle$1(a,s))}),genOutlinedStyle$1=a=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign({},genBaseOutlinedStyle$1(a,{borderColor:a.colorBorder,hoverBorderHover:a.colorPrimaryHover,activeBorderColor:a.colorPrimary,activeShadowColor:a.controlOutline})),genOutlinedStatusStyle$1(a,{status:"error",borderColor:a.colorError,hoverBorderHover:a.colorErrorHover,activeBorderColor:a.colorError,activeShadowColor:a.colorErrorOutline})),genOutlinedStatusStyle$1(a,{status:"warning",borderColor:a.colorWarning,hoverBorderHover:a.colorWarningHover,activeBorderColor:a.colorWarning,activeShadowColor:a.colorWarningOutline})),{[`&${a.componentCls}-disabled`]:{[`&:not(${a.componentCls}-customize-input) ${a.componentCls}-selector`]:{background:a.colorBgContainerDisabled,color:a.colorTextDisabled}},[`&${a.componentCls}-multiple ${a.componentCls}-selection-item`]:{background:a.multipleItemBg,border:`${unit(a.lineWidth)} ${a.lineType} ${a.multipleItemBorderColor}`}})}),genBaseFilledStyle$1=(a,s)=>{const{componentCls:c,antCls:u}=a;return{[`&:not(${c}-customize-input) ${c}-selector`]:{background:s.bg,border:`${unit(a.lineWidth)} ${a.lineType} transparent`,color:s.color},[`&:not(${c}-disabled):not(${c}-customize-input):not(${u}-pagination-size-changer)`]:{[`&:hover ${c}-selector`]:{background:s.hoverBg},[`${c}-focused& ${c}-selector`]:{background:a.selectorBg,borderColor:s.activeBorderColor,outline:0}}}},genFilledStatusStyle$1=(a,s)=>({[`&${a.componentCls}-status-${s.status}`]:Object.assign({},genBaseFilledStyle$1(a,s))}),genFilledStyle$1=a=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign({},genBaseFilledStyle$1(a,{bg:a.colorFillTertiary,hoverBg:a.colorFillSecondary,activeBorderColor:a.colorPrimary,color:a.colorText})),genFilledStatusStyle$1(a,{status:"error",bg:a.colorErrorBg,hoverBg:a.colorErrorBgHover,activeBorderColor:a.colorError,color:a.colorError})),genFilledStatusStyle$1(a,{status:"warning",bg:a.colorWarningBg,hoverBg:a.colorWarningBgHover,activeBorderColor:a.colorWarning,color:a.colorWarning})),{[`&${a.componentCls}-disabled`]:{[`&:not(${a.componentCls}-customize-input) ${a.componentCls}-selector`]:{borderColor:a.colorBorder,background:a.colorBgContainerDisabled,color:a.colorTextDisabled}},[`&${a.componentCls}-multiple ${a.componentCls}-selection-item`]:{background:a.colorBgContainer,border:`${unit(a.lineWidth)} ${a.lineType} ${a.colorSplit}`}})}),genBorderlessStyle$2=a=>({"&-borderless":{[`${a.componentCls}-selector`]:{background:"transparent",borderColor:"transparent"},[`&${a.componentCls}-disabled`]:{[`&:not(${a.componentCls}-customize-input) ${a.componentCls}-selector`]:{color:a.colorTextDisabled}},[`&${a.componentCls}-multiple ${a.componentCls}-selection-item`]:{background:a.multipleItemBg,border:`${unit(a.lineWidth)} ${a.lineType} ${a.multipleItemBorderColor}`}}}),genVariantsStyle=a=>({[a.componentCls]:Object.assign(Object.assign(Object.assign({},genOutlinedStyle$1(a)),genFilledStyle$1(a)),genBorderlessStyle$2(a))}),genVariantsStyle$1=genVariantsStyle,genSelectorStyle=a=>{const{componentCls:s}=a;return{position:"relative",transition:`all ${a.motionDurationMid} ${a.motionEaseInOut}`,input:{cursor:"pointer"},[`${s}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit",height:"100%"}},[`${s}-disabled&`]:{cursor:"not-allowed",input:{cursor:"not-allowed"}}}},getSearchInputWithoutBorderStyle=a=>{const{componentCls:s}=a;return{[`${s}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none",fontFamily:"inherit","&::-webkit-search-cancel-button":{display:"none","-webkit-appearance":"none"}}}},genBaseStyle$3=a=>{const{antCls:s,componentCls:c,inputPaddingHorizontalBase:u,iconCls:d}=a;return{[c]:Object.assign(Object.assign({},resetComponent(a)),{position:"relative",display:"inline-block",cursor:"pointer",[`&:not(${c}-customize-input) ${c}-selector`]:Object.assign(Object.assign({},genSelectorStyle(a)),getSearchInputWithoutBorderStyle(a)),[`${c}-selection-item`]:Object.assign(Object.assign({flex:1,fontWeight:"normal",position:"relative",userSelect:"none"},textEllipsis),{[`> ${s}-typography`]:{display:"inline"}}),[`${c}-selection-placeholder`]:Object.assign(Object.assign({},textEllipsis),{flex:1,color:a.colorTextPlaceholder,pointerEvents:"none"}),[`${c}-arrow`]:Object.assign(Object.assign({},resetIcon()),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:u,height:a.fontSizeIcon,marginTop:a.calc(a.fontSizeIcon).mul(-1).div(2).equal(),color:a.colorTextQuaternary,fontSize:a.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",transition:`opacity ${a.motionDurationSlow} ease`,[d]:{verticalAlign:"top",transition:`transform ${a.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${c}-suffix)`]:{pointerEvents:"auto"}},[`${c}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${c}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:u,zIndex:1,display:"inline-block",width:a.fontSizeIcon,height:a.fontSizeIcon,marginTop:a.calc(a.fontSizeIcon).mul(-1).div(2).equal(),color:a.colorTextQuaternary,fontSize:a.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",cursor:"pointer",opacity:0,transition:`color ${a.motionDurationMid} ease, opacity ${a.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:a.colorTextTertiary}},"&:hover":{[`${c}-clear`]:{opacity:1},[`${c}-arrow:not(:last-child)`]:{opacity:0}}}),[`${c}-has-feedback`]:{[`${c}-clear`]:{insetInlineEnd:a.calc(u).add(a.fontSize).add(a.paddingXS).equal()}}}},genSelectStyle=a=>{const{componentCls:s}=a;return[{[s]:{[`&${s}-in-form-item`]:{width:"100%"}}},genBaseStyle$3(a),genSingleStyle(a),genMultipleStyle$1(a),genDropdownStyle(a),{[`${s}-rtl`]:{direction:"rtl"}},genCompactItemStyle(a,{borderElCls:`${s}-selector`,focusElCls:`${s}-focused`})]},useSelectStyle=genStyleHooks("Select",(a,s)=>{let{rootPrefixCls:c}=s;const u=merge$1(a,{rootPrefixCls:c,inputPaddingHorizontalBase:a.calc(a.paddingSM).sub(1).equal(),multipleSelectItemHeight:a.multipleItemHeight,selectHeight:a.controlHeight});return[genSelectStyle(u),genVariantsStyle$1(u)]},prepareComponentToken$8,{unitless:{optionLineHeight:!0,optionSelectedFontWeight:!0}});var CheckOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};const CheckOutlinedSvg=CheckOutlined$2;var CheckOutlined=function(a,s){return reactExports.createElement(AntdIcon,_extends$2({},a,{ref:s,icon:CheckOutlinedSvg}))},RefIcon$9=reactExports.forwardRef(CheckOutlined);const CheckOutlined$1=RefIcon$9;var DownOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};const DownOutlinedSvg=DownOutlined$2;var DownOutlined=function(a,s){return reactExports.createElement(AntdIcon,_extends$2({},a,{ref:s,icon:DownOutlinedSvg}))},RefIcon$8=reactExports.forwardRef(DownOutlined);const DownOutlined$1=RefIcon$8;var SearchOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};const SearchOutlinedSvg=SearchOutlined$2;var SearchOutlined=function(a,s){return reactExports.createElement(AntdIcon,_extends$2({},a,{ref:s,icon:SearchOutlinedSvg}))},RefIcon$7=reactExports.forwardRef(SearchOutlined);const SearchOutlined$1=RefIcon$7;function useIcons(a){let{suffixIcon:s,clearIcon:c,menuItemSelectedIcon:u,removeIcon:d,loading:h,multiple:p,hasFeedback:m,prefixCls:f,showSuffixIcon:_,feedbackIcon:y,showArrow:E,componentName:b}=a;const T=c??reactExports.createElement(CloseCircleFilled$1,null),A=I=>s===null&&!m&&!E?null:reactExports.createElement(reactExports.Fragment,null,_!==!1&&I,m&&y);let v=null;if(s!==void 0)v=A(s);else if(h)v=A(reactExports.createElement(LoadingOutlined$1,{spin:!0}));else{const I=`${f}-suffix`;v=x=>{let{open:P,showSearch:w}=x;return A(P&&w?reactExports.createElement(SearchOutlined$1,{className:I}):reactExports.createElement(DownOutlined$1,{className:I}))}}let S=null;u!==void 0?S=u:p?S=reactExports.createElement(CheckOutlined$1,null):S=null;let O=null;return d!==void 0?O=d:O=reactExports.createElement(CloseOutlined$1,null),{clearIcon:T,suffixIcon:v,itemIcon:S,removeIcon:O}}function useShowArrow(a,s){return s!==void 0?s:a!==null}var __rest$k=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};const SECRET_COMBOBOX_MODE_DO_NOT_USE="SECRET_COMBOBOX_MODE_DO_NOT_USE",InternalSelect=(a,s)=>{var c;const{prefixCls:u,bordered:d,className:h,rootClassName:p,getPopupContainer:m,popupClassName:f,dropdownClassName:_,listHeight:y=256,placement:E,listItemHeight:b,size:T,disabled:A,notFoundContent:v,status:S,builtinPlacements:O,dropdownMatchSelectWidth:I,popupMatchSelectWidth:x,direction:P,style:w,allowClear:C,variant:k,dropdownStyle:R,transitionName:N,tagRender:F,maxCount:L}=a,X=__rest$k(a,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","direction","style","allowClear","variant","dropdownStyle","transitionName","tagRender","maxCount"]),{getPopupContainer:V,getPrefixCls:H,renderEmpty:ee,direction:Q,virtual:Z,popupMatchSelectWidth:K,popupOverflow:se,select:ne}=reactExports.useContext(ConfigContext),[,le]=useToken(),he=b??(le==null?void 0:le.controlHeight),Y=H("select",u),D=H(),G=P??Q,{compactSize:B,compactItemClassnames:U}=useCompactItemContext(Y,G),[W,q]=useVariant(k,d),J=useCSSVarCls(Y),[ae,ce,ie]=useSelectStyle(Y,J),ue=reactExports.useMemo(()=>{const{mode:ge}=a;if(ge!=="combobox")return ge===SECRET_COMBOBOX_MODE_DO_NOT_USE?"combobox":ge},[a.mode]),Ee=ue==="multiple"||ue==="tags",xe=useShowArrow(a.suffixIcon,a.showArrow),ve=(c=x??I)!==null&&c!==void 0?c:K,{status:$e,hasFeedback:_e,isFormItemInput:Be,feedbackIcon:ze}=reactExports.useContext(FormItemInputContext),Se=getMergedStatus($e,S);let pe;v!==void 0?pe=v:ue==="combobox"?pe=null:pe=(ee==null?void 0:ee("Select"))||reactExports.createElement(DefaultRenderEmpty$1,{componentName:"Select"});const{suffixIcon:me,itemIcon:Oe,removeIcon:Le,clearIcon:We}=useIcons(Object.assign(Object.assign({},X),{multiple:Ee,hasFeedback:_e,feedbackIcon:ze,showSuffixIcon:xe,prefixCls:Y,componentName:"Select"})),Ze=C===!0?{clearIcon:We}:C,Qe=omit(X,["suffixIcon","itemIcon"]),Je=classNames(f||_,{[`${Y}-dropdown-${G}`]:G==="rtl"},p,ie,J,ce),tt=useSize(ge=>{var Fe;return(Fe=T??B)!==null&&Fe!==void 0?Fe:ge}),rt=reactExports.useContext(DisabledContext),at=A??rt,it=classNames({[`${Y}-lg`]:tt==="large",[`${Y}-sm`]:tt==="small",[`${Y}-rtl`]:G==="rtl",[`${Y}-${W}`]:q,[`${Y}-in-form-item`]:Be},getStatusClassNames(Y,Se,_e),U,ne==null?void 0:ne.className,h,p,ie,J,ce),Ne=reactExports.useMemo(()=>E!==void 0?E:G==="rtl"?"bottomRight":"bottomLeft",[E,G]),[ye]=useZIndex("SelectLike",R==null?void 0:R.zIndex);return ae(reactExports.createElement(TypedSelect,Object.assign({ref:s,virtual:Z,showSearch:ne==null?void 0:ne.showSearch},Qe,{style:Object.assign(Object.assign({},ne==null?void 0:ne.style),w),dropdownMatchSelectWidth:ve,transitionName:getTransitionName(D,"slide-up",N),builtinPlacements:mergedBuiltinPlacements(O,se),listHeight:y,listItemHeight:he,mode:ue,prefixCls:Y,placement:Ne,direction:G,suffixIcon:me,menuItemSelectedIcon:Oe,removeIcon:Le,allowClear:Ze,notFoundContent:pe,className:it,getPopupContainer:m||V,dropdownClassName:Je,disabled:at,dropdownStyle:Object.assign(Object.assign({},R),{zIndex:ye}),maxCount:Ee?L:void 0,tagRender:Ee?F:void 0})))},Select=reactExports.forwardRef(InternalSelect),PurePanel$4=genPurePanel(Select);Select.SECRET_COMBOBOX_MODE_DO_NOT_USE=SECRET_COMBOBOX_MODE_DO_NOT_USE,Select.Option=Option,Select.OptGroup=OptGroup,Select._InternalPanelDoNotUseOrYouWillBeFired=PurePanel$4;const Select$1=Select,responsiveArray=["xxl","xl","lg","md","sm","xs"],getResponsiveMap=a=>({xs:`(max-width: ${a.screenXSMax}px)`,sm:`(min-width: ${a.screenSM}px)`,md:`(min-width: ${a.screenMD}px)`,lg:`(min-width: ${a.screenLG}px)`,xl:`(min-width: ${a.screenXL}px)`,xxl:`(min-width: ${a.screenXXL}px)`}),validateBreakpoints=a=>{const s=a,c=[].concat(responsiveArray).reverse();return c.forEach((u,d)=>{const h=u.toUpperCase(),p=`screen${h}Min`,m=`screen${h}`;if(!(s[p]<=s[m]))throw new Error(`${p}<=${m} fails : !(${s[p]}<=${s[m]})`);if(d<c.length-1){const f=`screen${h}Max`;if(!(s[m]<=s[f]))throw new Error(`${m}<=${f} fails : !(${s[m]}<=${s[f]})`);const _=`screen${c[d+1].toUpperCase()}Min`;if(!(s[f]<=s[_]))throw new Error(`${f}<=${_} fails : !(${s[f]}<=${s[_]})`)}}),a};function useResponsiveObserver(){const[,a]=useToken(),s=getResponsiveMap(validateBreakpoints(a));return React.useMemo(()=>{const c=new Map;let u=-1,d={};return{matchHandlers:{},dispatch(h){return d=h,c.forEach(p=>p(d)),c.size>=1},subscribe(h){return c.size||this.register(),u+=1,c.set(u,h),h(d),u},unsubscribe(h){c.delete(h),c.size||this.unregister()},unregister(){Object.keys(s).forEach(h=>{const p=s[h],m=this.matchHandlers[p];m==null||m.mql.removeListener(m==null?void 0:m.listener)}),c.clear()},register(){Object.keys(s).forEach(h=>{const p=s[h],m=_=>{let{matches:y}=_;this.dispatch(Object.assign(Object.assign({},d),{[h]:y}))},f=window.matchMedia(p);f.addListener(m),this.matchHandlers[p]={mql:f,listener:m},m(f)})},responsiveMap:s}},[a])}const matchScreen=(a,s)=>{if(s&&typeof s=="object")for(let c=0;c<responsiveArray.length;c++){const u=responsiveArray[c];if(a[u]&&s[u]!==void 0)return s[u]}};function useForceUpdate(){const[,a]=reactExports.useReducer(s=>s+1,0);return a}function useBreakpoint(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const s=reactExports.useRef({}),c=useForceUpdate(),u=useResponsiveObserver();return useLayoutEffect$1(()=>{const d=u.subscribe(h=>{s.current=h,a&&c()});return()=>u.unsubscribe(d)},[]),s.current}function Popup(a){var s=a.children,c=a.prefixCls,u=a.id,d=a.overlayInnerStyle,h=a.className,p=a.style;return reactExports.createElement("div",{className:classNames("".concat(c,"-content"),h),style:p},reactExports.createElement("div",{className:"".concat(c,"-inner"),id:u,role:"tooltip",style:d},typeof s=="function"?s():s))}var autoAdjustOverflowTopBottom={shiftX:64,adjustY:1},autoAdjustOverflowLeftRight={adjustX:1,shiftY:!0},targetOffset=[0,0],placements={left:{points:["cr","cl"],overflow:autoAdjustOverflowLeftRight,offset:[-4,0],targetOffset},right:{points:["cl","cr"],overflow:autoAdjustOverflowLeftRight,offset:[4,0],targetOffset},top:{points:["bc","tc"],overflow:autoAdjustOverflowTopBottom,offset:[0,-4],targetOffset},bottom:{points:["tc","bc"],overflow:autoAdjustOverflowTopBottom,offset:[0,4],targetOffset},topLeft:{points:["bl","tl"],overflow:autoAdjustOverflowTopBottom,offset:[0,-4],targetOffset},leftTop:{points:["tr","tl"],overflow:autoAdjustOverflowLeftRight,offset:[-4,0],targetOffset},topRight:{points:["br","tr"],overflow:autoAdjustOverflowTopBottom,offset:[0,-4],targetOffset},rightTop:{points:["tl","tr"],overflow:autoAdjustOverflowLeftRight,offset:[4,0],targetOffset},bottomRight:{points:["tr","br"],overflow:autoAdjustOverflowTopBottom,offset:[0,4],targetOffset},rightBottom:{points:["bl","br"],overflow:autoAdjustOverflowLeftRight,offset:[4,0],targetOffset},bottomLeft:{points:["tl","bl"],overflow:autoAdjustOverflowTopBottom,offset:[0,4],targetOffset},leftBottom:{points:["br","bl"],overflow:autoAdjustOverflowLeftRight,offset:[-4,0],targetOffset}},_excluded$8=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],Tooltip$2=function(a,s){var c=a.overlayClassName,u=a.trigger,d=u===void 0?["hover"]:u,h=a.mouseEnterDelay,p=h===void 0?0:h,m=a.mouseLeaveDelay,f=m===void 0?.1:m,_=a.overlayStyle,y=a.prefixCls,E=y===void 0?"rc-tooltip":y,b=a.children,T=a.onVisibleChange,A=a.afterVisibleChange,v=a.transitionName,S=a.animation,O=a.motion,I=a.placement,x=I===void 0?"right":I,P=a.align,w=P===void 0?{}:P,C=a.destroyTooltipOnHide,k=C===void 0?!1:C,R=a.defaultVisible,N=a.getTooltipContainer,F=a.overlayInnerStyle;a.arrowContent;var L=a.overlay,X=a.id,V=a.showArrow,H=V===void 0?!0:V,ee=_objectWithoutProperties(a,_excluded$8),Q=reactExports.useRef(null);reactExports.useImperativeHandle(s,function(){return Q.current});var Z=_objectSpread2({},ee);"visible"in a&&(Z.popupVisible=a.visible);var K=function(){return reactExports.createElement(Popup,{key:"content",prefixCls:E,id:X,overlayInnerStyle:F},L)};return reactExports.createElement(Trigger,_extends$2({popupClassName:c,prefixCls:E,popup:K,action:d,builtinPlacements:placements,popupPlacement:x,ref:Q,popupAlign:w,getPopupContainer:N,onPopupVisibleChange:T,afterPopupVisibleChange:A,popupTransitionName:v,popupAnimation:S,popupMotion:O,defaultPopupVisible:R,autoDestroy:k,mouseLeaveDelay:f,popupStyle:_,mouseEnterDelay:p,arrow:H},Z),b)};const Tooltip$3=reactExports.forwardRef(Tooltip$2);function getArrowToken(a){const{sizePopupArrow:s,borderRadiusXS:c,borderRadiusOuter:u}=a,d=s/2,h=0,p=d,m=u*1/Math.sqrt(2),f=d-u*(1-1/Math.sqrt(2)),_=d-c*(1/Math.sqrt(2)),y=u*(Math.sqrt(2)-1)+c*(1/Math.sqrt(2)),E=2*d-_,b=y,T=2*d-m,A=f,v=2*d-h,S=p,O=d*Math.sqrt(2)+u*(Math.sqrt(2)-2),I=u*(Math.sqrt(2)-1),x=`polygon(${I}px 100%, 50% ${I}px, ${2*d-I}px 100%, ${I}px 100%)`,P=`path('M ${h} ${p} A ${u} ${u} 0 0 0 ${m} ${f} L ${_} ${y} A ${c} ${c} 0 0 1 ${E} ${b} L ${T} ${A} A ${u} ${u} 0 0 0 ${v} ${S} Z')`;return{arrowShadowWidth:O,arrowPath:P,arrowPolygon:x}}const genRoundedArrow=(a,s,c)=>{const{sizePopupArrow:u,arrowPolygon:d,arrowPath:h,arrowShadowWidth:p,borderRadiusXS:m,calc:f}=a;return{pointerEvents:"none",width:u,height:u,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:u,height:f(u).div(2).equal(),background:s,clipPath:{_multi_value_:!0,value:[d,h]},content:'""'},"&::after":{content:'""',position:"absolute",width:p,height:p,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${unit(m)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:c,zIndex:0,background:"transparent"}}},MAX_VERTICAL_CONTENT_RADIUS=8;function getArrowOffsetToken(a){const{contentRadius:s,limitVerticalRadius:c}=a,u=s>12?s+2:12;return{arrowOffsetHorizontal:u,arrowOffsetVertical:c?MAX_VERTICAL_CONTENT_RADIUS:u}}function isInject(a,s){return a?s:{}}function getArrowStyle(a,s,c){const{componentCls:u,boxShadowPopoverArrow:d,arrowOffsetVertical:h,arrowOffsetHorizontal:p}=a,{arrowDistance:m=0,arrowPlacement:f={left:!0,right:!0,top:!0,bottom:!0}}=c||{};return{[u]:Object.assign(Object.assign(Object.assign(Object.assign({[`${u}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},genRoundedArrow(a,s,d)),{"&:before":{background:s}})]},isInject(!!f.top,{[[`&-placement-top > ${u}-arrow`,`&-placement-topLeft > ${u}-arrow`,`&-placement-topRight > ${u}-arrow`].join(",")]:{bottom:m,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${u}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft > ${u}-arrow`]:{left:{_skip_check_:!0,value:p}},[`&-placement-topRight > ${u}-arrow`]:{right:{_skip_check_:!0,value:p}}})),isInject(!!f.bottom,{[[`&-placement-bottom > ${u}-arrow`,`&-placement-bottomLeft > ${u}-arrow`,`&-placement-bottomRight > ${u}-arrow`].join(",")]:{top:m,transform:"translateY(-100%)"},[`&-placement-bottom > ${u}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft > ${u}-arrow`]:{left:{_skip_check_:!0,value:p}},[`&-placement-bottomRight > ${u}-arrow`]:{right:{_skip_check_:!0,value:p}}})),isInject(!!f.left,{[[`&-placement-left > ${u}-arrow`,`&-placement-leftTop > ${u}-arrow`,`&-placement-leftBottom > ${u}-arrow`].join(",")]:{right:{_skip_check_:!0,value:m},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${u}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${u}-arrow`]:{top:h},[`&-placement-leftBottom > ${u}-arrow`]:{bottom:h}})),isInject(!!f.right,{[[`&-placement-right > ${u}-arrow`,`&-placement-rightTop > ${u}-arrow`,`&-placement-rightBottom > ${u}-arrow`].join(",")]:{left:{_skip_check_:!0,value:m},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${u}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${u}-arrow`]:{top:h},[`&-placement-rightBottom > ${u}-arrow`]:{bottom:h}}))}}function getOverflowOptions(a,s,c,u){if(u===!1)return{adjustX:!1,adjustY:!1};const d=u&&typeof u=="object"?u:{},h={};switch(a){case"top":case"bottom":h.shiftX=s.arrowOffsetHorizontal*2+c,h.shiftY=!0,h.adjustY=!0;break;case"left":case"right":h.shiftY=s.arrowOffsetVertical*2+c,h.shiftX=!0,h.adjustX=!0;break}const p=Object.assign(Object.assign({},h),d);return p.shiftX||(p.adjustX=!0),p.shiftY||(p.adjustY=!0),p}const PlacementAlignMap={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},ArrowCenterPlacementAlignMap={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},DisableAutoArrowList=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function getPlacements(a){const{arrowWidth:s,autoAdjustOverflow:c,arrowPointAtCenter:u,offset:d,borderRadius:h,visibleFirst:p}=a,m=s/2,f={};return Object.keys(PlacementAlignMap).forEach(_=>{const y=u&&ArrowCenterPlacementAlignMap[_]||PlacementAlignMap[_],E=Object.assign(Object.assign({},y),{offset:[0,0],dynamicInset:!0});switch(f[_]=E,DisableAutoArrowList.has(_)&&(E.autoArrow=!1),_){case"top":case"topLeft":case"topRight":E.offset[1]=-m-d;break;case"bottom":case"bottomLeft":case"bottomRight":E.offset[1]=m+d;break;case"left":case"leftTop":case"leftBottom":E.offset[0]=-m-d;break;case"right":case"rightTop":case"rightBottom":E.offset[0]=m+d;break}const b=getArrowOffsetToken({contentRadius:h,limitVerticalRadius:!0});if(u)switch(_){case"topLeft":case"bottomLeft":E.offset[0]=-b.arrowOffsetHorizontal-m;break;case"topRight":case"bottomRight":E.offset[0]=b.arrowOffsetHorizontal+m;break;case"leftTop":case"rightTop":E.offset[1]=-b.arrowOffsetHorizontal-m;break;case"leftBottom":case"rightBottom":E.offset[1]=b.arrowOffsetHorizontal+m;break}E.overflow=getOverflowOptions(_,b,s,c),p&&(E.htmlRegion="visibleFirst")}),f}const genTooltipStyle=a=>{const{componentCls:s,tooltipMaxWidth:c,tooltipColor:u,tooltipBg:d,tooltipBorderRadius:h,zIndexPopup:p,controlHeight:m,boxShadowSecondary:f,paddingSM:_,paddingXS:y}=a;return[{[s]:Object.assign(Object.assign(Object.assign(Object.assign({},resetComponent(a)),{position:"absolute",zIndex:p,display:"block",width:"max-content",maxWidth:c,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":d,[`${s}-inner`]:{minWidth:m,minHeight:m,padding:`${unit(a.calc(_).div(2).equal())} ${unit(y)}`,color:u,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:d,borderRadius:h,boxShadow:f,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${s}-inner`]:{borderRadius:a.min(h,MAX_VERTICAL_CONTENT_RADIUS)}},[`${s}-content`]:{position:"relative"}}),genPresetColor(a,(E,b)=>{let{darkColor:T}=b;return{[`&${s}-${E}`]:{[`${s}-inner`]:{backgroundColor:T},[`${s}-arrow`]:{"--antd-arrow-background-color":T}}}})),{"&-rtl":{direction:"rtl"}})},getArrowStyle(a,"var(--antd-arrow-background-color)"),{[`${s}-pure`]:{position:"relative",maxWidth:"none",margin:a.sizePopupArrow}}]},prepareComponentToken$7=a=>Object.assign(Object.assign({zIndexPopup:a.zIndexPopupBase+70},getArrowOffsetToken({contentRadius:a.borderRadius,limitVerticalRadius:!0})),getArrowToken(merge$1(a,{borderRadiusOuter:Math.min(a.borderRadiusOuter,4)}))),useStyle$9=function(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return genStyleHooks("Tooltip",c=>{const{borderRadius:u,colorTextLightSolid:d,colorBgSpotlight:h}=c,p=merge$1(c,{tooltipMaxWidth:250,tooltipColor:d,tooltipBorderRadius:u,tooltipBg:h});return[genTooltipStyle(p),initZoomMotion(c,"zoom-big-fast")]},prepareComponentToken$7,{resetStyle:!1,injectStyle:s})(a)},inverseColors=PresetColors.map(a=>`${a}-inverse`),PresetStatusColorTypes=["success","processing","error","default","warning"];function isPresetColor(a){return!(arguments.length>1&&arguments[1]!==void 0)||arguments[1]?[].concat(_toConsumableArray(inverseColors),_toConsumableArray(PresetColors)).includes(a):PresetColors.includes(a)}function isPresetStatusColor(a){return PresetStatusColorTypes.includes(a)}function parseColor(a,s){const c=isPresetColor(s),u=classNames({[`${a}-${s}`]:s&&c}),d={},h={};return s&&!c&&(d.background=s,h["--antd-arrow-background-color"]=s),{className:u,overlayStyle:d,arrowStyle:h}}const PurePanel$2=a=>{const{prefixCls:s,className:c,placement:u="top",title:d,color:h,overlayInnerStyle:p}=a,{getPrefixCls:m}=reactExports.useContext(ConfigContext),f=m("tooltip",s),[_,y,E]=useStyle$9(f),b=parseColor(f,h),T=b.arrowStyle,A=Object.assign(Object.assign({},p),b.overlayStyle),v=classNames(y,E,f,`${f}-pure`,`${f}-placement-${u}`,c,b.className);return _(reactExports.createElement("div",{className:v,style:T},reactExports.createElement("div",{className:`${f}-arrow`}),reactExports.createElement(Popup,Object.assign({},a,{className:y,prefixCls:f,overlayInnerStyle:A}),d)))},PurePanel$3=PurePanel$2;var __rest$j=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};const Tooltip=reactExports.forwardRef((a,s)=>{var c,u;const{prefixCls:d,openClassName:h,getTooltipContainer:p,overlayClassName:m,color:f,overlayInnerStyle:_,children:y,afterOpenChange:E,afterVisibleChange:b,destroyTooltipOnHide:T,arrow:A=!0,title:v,overlay:S,builtinPlacements:O,arrowPointAtCenter:I=!1,autoAdjustOverflow:x=!0}=a,P=!!A,[,w]=useToken(),{getPopupContainer:C,getPrefixCls:k,direction:R}=reactExports.useContext(ConfigContext),N=devUseWarning(),F=reactExports.useRef(null),L=()=>{var pe;(pe=F.current)===null||pe===void 0||pe.forceAlign()};reactExports.useImperativeHandle(s,()=>({forceAlign:L,forcePopupAlign:()=>{N.deprecated(!1,"forcePopupAlign","forceAlign"),L()}}));const[X,V]=useMergedState(!1,{value:(c=a.open)!==null&&c!==void 0?c:a.visible,defaultValue:(u=a.defaultOpen)!==null&&u!==void 0?u:a.defaultVisible}),H=!v&&!S&&v!==0,ee=pe=>{var me,Oe;V(H?!1:pe),H||((me=a.onOpenChange)===null||me===void 0||me.call(a,pe),(Oe=a.onVisibleChange)===null||Oe===void 0||Oe.call(a,pe))},Q=reactExports.useMemo(()=>{var pe,me;let Oe=I;return typeof A=="object"&&(Oe=(me=(pe=A.pointAtCenter)!==null&&pe!==void 0?pe:A.arrowPointAtCenter)!==null&&me!==void 0?me:I),O||getPlacements({arrowPointAtCenter:Oe,autoAdjustOverflow:x,arrowWidth:P?w.sizePopupArrow:0,borderRadius:w.borderRadius,offset:w.marginXXS,visibleFirst:!0})},[I,A,O,w]),Z=reactExports.useMemo(()=>v===0?v:S||v||"",[S,v]),K=reactExports.createElement(NoCompactStyle,null,typeof Z=="function"?Z():Z),{getPopupContainer:se,placement:ne="top",mouseEnterDelay:le=.1,mouseLeaveDelay:he=.1,overlayStyle:Y,rootClassName:D}=a,G=__rest$j(a,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),B=k("tooltip",d),U=k(),W=a["data-popover-inject"];let q=X;!("open"in a)&&!("visible"in a)&&H&&(q=!1);const J=reactExports.isValidElement(y)&&!isFragment(y)?y:reactExports.createElement("span",null,y),ae=J.props,ce=!ae.className||typeof ae.className=="string"?classNames(ae.className,h||`${B}-open`):ae.className,[ie,ue,Ee]=useStyle$9(B,!W),xe=parseColor(B,f),ve=xe.arrowStyle,$e=Object.assign(Object.assign({},_),xe.overlayStyle),_e=classNames(m,{[`${B}-rtl`]:R==="rtl"},xe.className,D,ue,Ee),[Be,ze]=useZIndex("Tooltip",G.zIndex),Se=reactExports.createElement(Tooltip$3,Object.assign({},G,{zIndex:Be,showArrow:P,placement:ne,mouseEnterDelay:le,mouseLeaveDelay:he,prefixCls:B,overlayClassName:_e,overlayStyle:Object.assign(Object.assign({},ve),Y),getTooltipContainer:se||p||C,ref:F,builtinPlacements:Q,overlay:K,visible:q,onVisibleChange:ee,afterVisibleChange:E??b,overlayInnerStyle:$e,arrowContent:reactExports.createElement("span",{className:`${B}-arrow-content`}),motion:{motionName:getTransitionName(U,"zoom-big-fast",a.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!T}),q?cloneElement(J,{className:ce}):J);return ie(reactExports.createElement(zIndexContext$1.Provider,{value:ze},Se))});Tooltip._InternalPanelDoNotUseOrYouWillBeFired=PurePanel$3;const Tooltip$1=Tooltip;var RightOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"};const RightOutlinedSvg=RightOutlined$2;var RightOutlined=function(a,s){return reactExports.createElement(AntdIcon,_extends$2({},a,{ref:s,icon:RightOutlinedSvg}))},RefIcon$6=reactExports.forwardRef(RightOutlined);const RightOutlined$1=RefIcon$6;var LeftOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"};const LeftOutlinedSvg=LeftOutlined$2;var LeftOutlined=function(a,s){return reactExports.createElement(AntdIcon,_extends$2({},a,{ref:s,icon:LeftOutlinedSvg}))},RefIcon$5=reactExports.forwardRef(LeftOutlined);const LeftOutlined$1=RefIcon$5;function initInputToken(a){return merge$1(a,{inputAffixPadding:a.paddingXXS})}const initComponentToken=a=>{const{controlHeight:s,fontSize:c,lineHeight:u,lineWidth:d,controlHeightSM:h,controlHeightLG:p,fontSizeLG:m,lineHeightLG:f,paddingSM:_,controlPaddingHorizontalSM:y,controlPaddingHorizontal:E,colorFillAlter:b,colorPrimaryHover:T,colorPrimary:A,controlOutlineWidth:v,controlOutline:S,colorErrorOutline:O,colorWarningOutline:I,colorBgContainer:x}=a;return{paddingBlock:Math.max(Math.round((s-c*u)/2*10)/10-d,0),paddingBlockSM:Math.max(Math.round((h-c*u)/2*10)/10-d,0),paddingBlockLG:Math.ceil((p-m*f)/2*10)/10-d,paddingInline:_-d,paddingInlineSM:y-d,paddingInlineLG:E-d,addonBg:b,activeBorderColor:A,hoverBorderColor:T,activeShadow:`0 0 0 ${v}px ${S}`,errorActiveShadow:`0 0 0 ${v}px ${O}`,warningActiveShadow:`0 0 0 ${v}px ${I}`,hoverBg:x,activeBg:x,inputFontSize:c,inputFontSizeLG:m,inputFontSizeSM:c}},genHoverStyle=a=>({borderColor:a.hoverBorderColor,backgroundColor:a.hoverBg}),genDisabledStyle=a=>({color:a.colorTextDisabled,backgroundColor:a.colorBgContainerDisabled,borderColor:a.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},genHoverStyle(merge$1(a,{hoverBorderColor:a.colorBorder,hoverBg:a.colorBgContainerDisabled})))}),genBaseOutlinedStyle=(a,s)=>({background:a.colorBgContainer,borderWidth:a.lineWidth,borderStyle:a.lineType,borderColor:s.borderColor,"&:hover":{borderColor:s.hoverBorderColor,backgroundColor:a.hoverBg},"&:focus, &:focus-within":{borderColor:s.activeBorderColor,boxShadow:s.activeShadow,outline:0,backgroundColor:a.activeBg}}),genOutlinedStatusStyle=(a,s)=>({[`&${a.componentCls}-status-${s.status}:not(${a.componentCls}-disabled)`]:Object.assign(Object.assign({},genBaseOutlinedStyle(a,s)),{[`${a.componentCls}-prefix, ${a.componentCls}-suffix`]:{color:s.affixColor}})}),genOutlinedStyle=(a,s)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},genBaseOutlinedStyle(a,{borderColor:a.colorBorder,hoverBorderColor:a.hoverBorderColor,activeBorderColor:a.activeBorderColor,activeShadow:a.activeShadow})),{[`&${a.componentCls}-disabled, &[disabled]`]:Object.assign({},genDisabledStyle(a))}),genOutlinedStatusStyle(a,{status:"error",borderColor:a.colorError,hoverBorderColor:a.colorErrorBorderHover,activeBorderColor:a.colorError,activeShadow:a.errorActiveShadow,affixColor:a.colorError})),genOutlinedStatusStyle(a,{status:"warning",borderColor:a.colorWarning,hoverBorderColor:a.colorWarningBorderHover,activeBorderColor:a.colorWarning,activeShadow:a.warningActiveShadow,affixColor:a.colorWarning})),s)}),genOutlinedGroupStatusStyle=(a,s)=>({[`&${a.componentCls}-group-wrapper-status-${s.status}`]:{[`${a.componentCls}-group-addon`]:{borderColor:s.addonBorderColor,color:s.addonColor}}}),genOutlinedGroupStyle=a=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${a.componentCls}-group`]:{"&-addon":{background:a.addonBg,border:`${unit(a.lineWidth)} ${a.lineType} ${a.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},genOutlinedGroupStatusStyle(a,{status:"error",addonBorderColor:a.colorError,addonColor:a.colorErrorText})),genOutlinedGroupStatusStyle(a,{status:"warning",addonBorderColor:a.colorWarning,addonColor:a.colorWarningText})),{[`&${a.componentCls}-group-wrapper-disabled`]:{[`${a.componentCls}-group-addon`]:Object.assign({},genDisabledStyle(a))}})}),genBorderlessStyle$1=(a,s)=>({"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${a.componentCls}-disabled, &[disabled]`]:{color:a.colorTextDisabled}},s)}),genBaseFilledStyle=(a,s)=>({background:s.bg,borderWidth:a.lineWidth,borderStyle:a.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:s==null?void 0:s.inputColor},"&:hover":{background:s.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:s.activeBorderColor,backgroundColor:a.activeBg}}),genFilledStatusStyle=(a,s)=>({[`&${a.componentCls}-status-${s.status}:not(${a.componentCls}-disabled)`]:Object.assign(Object.assign({},genBaseFilledStyle(a,s)),{[`${a.componentCls}-prefix, ${a.componentCls}-suffix`]:{color:s.affixColor}})}),genFilledStyle=(a,s)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},genBaseFilledStyle(a,{bg:a.colorFillTertiary,hoverBg:a.colorFillSecondary,activeBorderColor:a.colorPrimary})),{[`&${a.componentCls}-disabled, &[disabled]`]:Object.assign({},genDisabledStyle(a))}),genFilledStatusStyle(a,{status:"error",bg:a.colorErrorBg,hoverBg:a.colorErrorBgHover,activeBorderColor:a.colorError,inputColor:a.colorErrorText,affixColor:a.colorError})),genFilledStatusStyle(a,{status:"warning",bg:a.colorWarningBg,hoverBg:a.colorWarningBgHover,activeBorderColor:a.colorWarning,inputColor:a.colorWarningText,affixColor:a.colorWarning})),s)}),genFilledGroupStatusStyle=(a,s)=>({[`&${a.componentCls}-group-wrapper-status-${s.status}`]:{[`${a.componentCls}-group-addon`]:{background:s.addonBg,color:s.addonColor}}}),genFilledGroupStyle=a=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${a.componentCls}-group`]:{"&-addon":{background:a.colorFillTertiary},[`${a.componentCls}-filled:not(:focus):not(:focus-within)`]:{"&:not(:first-child)":{borderInlineStart:`${unit(a.lineWidth)} ${a.lineType} ${a.colorSplit}`},"&:not(:last-child)":{borderInlineEnd:`${unit(a.lineWidth)} ${a.lineType} ${a.colorSplit}`}}}},genFilledGroupStatusStyle(a,{status:"error",addonBg:a.colorErrorBg,addonColor:a.colorErrorText})),genFilledGroupStatusStyle(a,{status:"warning",addonBg:a.colorWarningBg,addonColor:a.colorWarningText})),{[`&${a.componentCls}-group-wrapper-disabled`]:{[`${a.componentCls}-group`]:{"&-addon":{background:a.colorFillTertiary,color:a.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${unit(a.lineWidth)} ${a.lineType} ${a.colorBorder}`,borderTop:`${unit(a.lineWidth)} ${a.lineType} ${a.colorBorder}`,borderBottom:`${unit(a.lineWidth)} ${a.lineType} ${a.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${unit(a.lineWidth)} ${a.lineType} ${a.colorBorder}`,borderTop:`${unit(a.lineWidth)} ${a.lineType} ${a.colorBorder}`,borderBottom:`${unit(a.lineWidth)} ${a.lineType} ${a.colorBorder}`}}}})}),genPlaceholderStyle=a=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:a,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),genInputLargeStyle=a=>{const{paddingBlockLG:s,lineHeightLG:c,borderRadiusLG:u,paddingInlineLG:d}=a;return{padding:`${unit(s)} ${unit(d)}`,fontSize:a.inputFontSizeLG,lineHeight:c,borderRadius:u}},genInputSmallStyle=a=>({padding:`${unit(a.paddingBlockSM)} ${unit(a.paddingInlineSM)}`,fontSize:a.inputFontSizeSM,borderRadius:a.borderRadiusSM}),genBasicInputStyle=a=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${unit(a.paddingBlock)} ${unit(a.paddingInline)}`,color:a.colorText,fontSize:a.inputFontSize,lineHeight:a.lineHeight,borderRadius:a.borderRadius,transition:`all ${a.motionDurationMid}`},genPlaceholderStyle(a.colorTextPlaceholder)),{"textarea&":{maxWidth:"100%",height:"auto",minHeight:a.controlHeight,lineHeight:a.lineHeight,verticalAlign:"bottom",transition:`all ${a.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},genInputLargeStyle(a)),"&-sm":Object.assign({},genInputSmallStyle(a)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}}),genInputGroupStyle=a=>{const{componentCls:s,antCls:c}=a;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:a.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${s}, &-lg > ${s}-group-addon`]:Object.assign({},genInputLargeStyle(a)),[`&-sm ${s}, &-sm > ${s}-group-addon`]:Object.assign({},genInputSmallStyle(a)),[`&-lg ${c}-select-single ${c}-select-selector`]:{height:a.controlHeightLG},[`&-sm ${c}-select-single ${c}-select-selector`]:{height:a.controlHeightSM},[`> ${s}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${s}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${unit(a.paddingInline)}`,color:a.colorText,fontWeight:"normal",fontSize:a.inputFontSize,textAlign:"center",borderRadius:a.borderRadius,transition:`all ${a.motionDurationSlow}`,lineHeight:1,[`${c}-select`]:{margin:`${unit(a.calc(a.paddingBlock).add(1).mul(-1).equal())} ${unit(a.calc(a.paddingInline).mul(-1).equal())}`,[`&${c}-select-single:not(${c}-select-customize-input):not(${c}-pagination-size-changer)`]:{[`${c}-select-selector`]:{backgroundColor:"inherit",border:`${unit(a.lineWidth)} ${a.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${c}-select-selector`]:{color:a.colorPrimary}}},[`${c}-cascader-picker`]:{margin:`-9px ${unit(a.calc(a.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${c}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[`${s}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${s}-search-with-button &`]:{zIndex:0}}},[`> ${s}:first-child, ${s}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${c}-select ${c}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${s}-affix-wrapper`]:{[`&:not(:first-child) ${s}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${s}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${s}:last-child, ${s}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${c}-select ${c}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${s}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${s}-search &`]:{borderStartStartRadius:a.borderRadius,borderEndStartRadius:a.borderRadius}},[`&:not(:first-child), ${s}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${s}-group-compact`]:Object.assign(Object.assign({display:"block"},clearFix()),{[`${s}-group-addon, ${s}-group-wrap, > ${s}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:a.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}},"& > *":{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${s}-affix-wrapper,
        & > ${s}-number-affix-wrapper,
        & > ${c}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:a.calc(a.lineWidth).mul(-1).equal(),borderInlineEndWidth:a.lineWidth},[`${s}`]:{float:"none"},[`& > ${c}-select > ${c}-select-selector,
      & > ${c}-select-auto-complete ${s},
      & > ${c}-cascader-picker ${s},
      & > ${s}-group-wrapper ${s}`]:{borderInlineEndWidth:a.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}},[`& > ${c}-select-focused`]:{zIndex:1},[`& > ${c}-select > ${c}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${c}-select:first-child > ${c}-select-selector,
      & > ${c}-select-auto-complete:first-child ${s},
      & > ${c}-cascader-picker:first-child ${s}`]:{borderStartStartRadius:a.borderRadius,borderEndStartRadius:a.borderRadius},[`& > *:last-child,
      & > ${c}-select:last-child > ${c}-select-selector,
      & > ${c}-cascader-picker:last-child ${s},
      & > ${c}-cascader-picker-focused:last-child ${s}`]:{borderInlineEndWidth:a.lineWidth,borderStartEndRadius:a.borderRadius,borderEndEndRadius:a.borderRadius},[`& > ${c}-select-auto-complete ${s}`]:{verticalAlign:"top"},[`${s}-group-wrapper + ${s}-group-wrapper`]:{marginInlineStart:a.calc(a.lineWidth).mul(-1).equal(),[`${s}-affix-wrapper`]:{borderRadius:0}},[`${s}-group-wrapper:not(:last-child)`]:{[`&${s}-search > ${s}-group`]:{[`& > ${s}-group-addon > ${s}-search-button`]:{borderRadius:0},[`& > ${s}`]:{borderStartStartRadius:a.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:a.borderRadius}}}})}},genInputStyle=a=>{const{componentCls:s,controlHeightSM:c,lineWidth:u,calc:d}=a,h=d(c).sub(d(u).mul(2)).sub(16).div(2).equal();return{[s]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},resetComponent(a)),genBasicInputStyle(a)),genOutlinedStyle(a)),genFilledStyle(a)),genBorderlessStyle$1(a)),{'&[type="color"]':{height:a.controlHeight,[`&${s}-lg`]:{height:a.controlHeightLG},[`&${s}-sm`]:{height:c,paddingTop:h,paddingBottom:h}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},genAllowClearStyle=a=>{const{componentCls:s}=a;return{[`${s}-clear-icon`]:{margin:0,color:a.colorTextQuaternary,fontSize:a.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${a.motionDurationSlow}`,"&:hover":{color:a.colorTextTertiary},"&:active":{color:a.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${unit(a.inputAffixPadding)}`}}}},genAffixStyle=a=>{const{componentCls:s,inputAffixPadding:c,colorTextDescription:u,motionDurationSlow:d,colorIcon:h,colorIconHover:p,iconCls:m}=a;return{[`${s}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign({},genBasicInputStyle(a)),{display:"inline-flex",[`&:not(${s}-disabled):hover`]:{zIndex:1,[`${s}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${s}`]:{padding:0,fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${s}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:a.paddingXS}},"&-show-count-suffix":{color:u},"&-show-count-has-suffix":{marginInlineEnd:a.paddingXXS},"&-prefix":{marginInlineEnd:c},"&-suffix":{marginInlineStart:c}}}),genAllowClearStyle(a)),{[`${m}${s}-password-icon`]:{color:h,cursor:"pointer",transition:`all ${d}`,"&:hover":{color:p}}})}},genGroupStyle=a=>{const{componentCls:s,borderRadiusLG:c,borderRadiusSM:u}=a;return{[`${s}-group`]:Object.assign(Object.assign(Object.assign({},resetComponent(a)),genInputGroupStyle(a)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${s}-group-addon`]:{borderRadius:c,fontSize:a.inputFontSizeLG}},"&-sm":{[`${s}-group-addon`]:{borderRadius:u}}},genOutlinedGroupStyle(a)),genFilledGroupStyle(a)),{[`&:not(${s}-compact-first-item):not(${s}-compact-last-item)${s}-compact-item`]:{[`${s}, ${s}-group-addon`]:{borderRadius:0}},[`&:not(${s}-compact-last-item)${s}-compact-first-item`]:{[`${s}, ${s}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${s}-compact-first-item)${s}-compact-last-item`]:{[`${s}, ${s}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${s}-compact-last-item)${s}-compact-item`]:{[`${s}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}}})})}},genSearchInputStyle=a=>{const{componentCls:s,antCls:c}=a,u=`${s}-search`;return{[u]:{[`${s}`]:{"&:hover, &:focus":{borderColor:a.colorPrimaryHover,[`+ ${s}-group-addon ${u}-button:not(${c}-btn-primary)`]:{borderInlineStartColor:a.colorPrimaryHover}}},[`${s}-affix-wrapper`]:{borderRadius:0},[`${s}-lg`]:{lineHeight:a.calc(a.lineHeightLG).sub(2e-4).equal({unit:!1})},[`> ${s}-group`]:{[`> ${s}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${u}-button`]:{marginInlineEnd:-1,paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:a.borderRadius,borderEndEndRadius:a.borderRadius,borderEndStartRadius:0,boxShadow:"none"},[`${u}-button:not(${c}-btn-primary)`]:{color:a.colorTextDescription,"&:hover":{color:a.colorPrimaryHover},"&:active":{color:a.colorPrimaryActive},[`&${c}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${u}-button`]:{height:a.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${u}-button`]:{height:a.controlHeightLG},[`&-small ${u}-button`]:{height:a.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${s}-compact-item`]:{[`&:not(${s}-compact-last-item)`]:{[`${s}-group-addon`]:{[`${s}-search-button`]:{marginInlineEnd:a.calc(a.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${s}-compact-first-item)`]:{[`${s},${s}-affix-wrapper`]:{borderRadius:0}},[`> ${s}-group-addon ${s}-search-button,
        > ${s},
        ${s}-affix-wrapper`]:{"&:hover,&:focus,&:active":{zIndex:2}},[`> ${s}-affix-wrapper-focused`]:{zIndex:2}}}}},genTextAreaStyle=a=>{const{componentCls:s,paddingLG:c}=a,u=`${s}-textarea`;return{[u]:{position:"relative","&-show-count":{[`> ${s}`]:{height:"100%"},[`${s}-data-count`]:{position:"absolute",bottom:a.calc(a.fontSize).mul(a.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:a.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},"&-allow-clear":{[`> ${s}`]:{paddingInlineEnd:c}},[`&-affix-wrapper${u}-has-feedback`]:{[`${s}`]:{paddingInlineEnd:c}},[`&-affix-wrapper${s}-affix-wrapper`]:{padding:0,[`> textarea${s}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent","&:focus":{boxShadow:"none !important"}},[`${s}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${s}-clear-icon`]:{position:"absolute",insetInlineEnd:a.paddingXS,insetBlockStart:a.paddingXS},[`${u}-suffix`]:{position:"absolute",top:0,insetInlineEnd:a.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}},genRangeStyle=a=>{const{componentCls:s}=a;return{[`${s}-out-of-range`]:{[`&, & input, & textarea, ${s}-show-count-suffix, ${s}-data-count`]:{color:a.colorError}}}},useStyle$8=genStyleHooks("Input",a=>{const s=merge$1(a,initInputToken(a));return[genInputStyle(s),genTextAreaStyle(s),genAffixStyle(s),genGroupStyle(s),genSearchInputStyle(s),genRangeStyle(s),genCompactItemStyle(s)]},initComponentToken),Element$2=a=>{const{prefixCls:s,className:c,style:u,size:d,shape:h}=a,p=classNames({[`${s}-lg`]:d==="large",[`${s}-sm`]:d==="small"}),m=classNames({[`${s}-circle`]:h==="circle",[`${s}-square`]:h==="square",[`${s}-round`]:h==="round"}),f=reactExports.useMemo(()=>typeof d=="number"?{width:d,height:d,lineHeight:`${d}px`}:{},[d]);return reactExports.createElement("span",{className:classNames(s,p,m,c),style:Object.assign(Object.assign({},f),u)})},Element$3=Element$2,skeletonClsLoading=new Keyframe("ant-skeleton-loading",{"0%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),genSkeletonElementCommonSize=a=>({height:a,lineHeight:unit(a)}),genSkeletonElementAvatarSize=a=>Object.assign({width:a},genSkeletonElementCommonSize(a)),genSkeletonColor=a=>({background:a.skeletonLoadingBackground,backgroundSize:"400% 100%",animationName:skeletonClsLoading,animationDuration:a.skeletonLoadingMotionDuration,animationTimingFunction:"ease",animationIterationCount:"infinite"}),genSkeletonElementInputSize=(a,s)=>Object.assign({width:s(a).mul(5).equal(),minWidth:s(a).mul(5).equal()},genSkeletonElementCommonSize(a)),genSkeletonElementAvatar=a=>{const{skeletonAvatarCls:s,gradientFromColor:c,controlHeight:u,controlHeightLG:d,controlHeightSM:h}=a;return{[`${s}`]:Object.assign({display:"inline-block",verticalAlign:"top",background:c},genSkeletonElementAvatarSize(u)),[`${s}${s}-circle`]:{borderRadius:"50%"},[`${s}${s}-lg`]:Object.assign({},genSkeletonElementAvatarSize(d)),[`${s}${s}-sm`]:Object.assign({},genSkeletonElementAvatarSize(h))}},genSkeletonElementInput=a=>{const{controlHeight:s,borderRadiusSM:c,skeletonInputCls:u,controlHeightLG:d,controlHeightSM:h,gradientFromColor:p,calc:m}=a;return{[`${u}`]:Object.assign({display:"inline-block",verticalAlign:"top",background:p,borderRadius:c},genSkeletonElementInputSize(s,m)),[`${u}-lg`]:Object.assign({},genSkeletonElementInputSize(d,m)),[`${u}-sm`]:Object.assign({},genSkeletonElementInputSize(h,m))}},genSkeletonElementImageSize=a=>Object.assign({width:a},genSkeletonElementCommonSize(a)),genSkeletonElementImage=a=>{const{skeletonImageCls:s,imageSizeBase:c,gradientFromColor:u,borderRadiusSM:d,calc:h}=a;return{[`${s}`]:Object.assign(Object.assign({display:"flex",alignItems:"center",justifyContent:"center",verticalAlign:"top",background:u,borderRadius:d},genSkeletonElementImageSize(h(c).mul(2).equal())),{[`${s}-path`]:{fill:"#bfbfbf"},[`${s}-svg`]:Object.assign(Object.assign({},genSkeletonElementImageSize(c)),{maxWidth:h(c).mul(4).equal(),maxHeight:h(c).mul(4).equal()}),[`${s}-svg${s}-svg-circle`]:{borderRadius:"50%"}}),[`${s}${s}-circle`]:{borderRadius:"50%"}}},genSkeletonElementButtonShape=(a,s,c)=>{const{skeletonButtonCls:u}=a;return{[`${c}${u}-circle`]:{width:s,minWidth:s,borderRadius:"50%"},[`${c}${u}-round`]:{borderRadius:s}}},genSkeletonElementButtonSize=(a,s)=>Object.assign({width:s(a).mul(2).equal(),minWidth:s(a).mul(2).equal()},genSkeletonElementCommonSize(a)),genSkeletonElementButton=a=>{const{borderRadiusSM:s,skeletonButtonCls:c,controlHeight:u,controlHeightLG:d,controlHeightSM:h,gradientFromColor:p,calc:m}=a;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({[`${c}`]:Object.assign({display:"inline-block",verticalAlign:"top",background:p,borderRadius:s,width:m(u).mul(2).equal(),minWidth:m(u).mul(2).equal()},genSkeletonElementButtonSize(u,m))},genSkeletonElementButtonShape(a,u,c)),{[`${c}-lg`]:Object.assign({},genSkeletonElementButtonSize(d,m))}),genSkeletonElementButtonShape(a,d,`${c}-lg`)),{[`${c}-sm`]:Object.assign({},genSkeletonElementButtonSize(h,m))}),genSkeletonElementButtonShape(a,h,`${c}-sm`))},genBaseStyle$2=a=>{const{componentCls:s,skeletonAvatarCls:c,skeletonTitleCls:u,skeletonParagraphCls:d,skeletonButtonCls:h,skeletonInputCls:p,skeletonImageCls:m,controlHeight:f,controlHeightLG:_,controlHeightSM:y,gradientFromColor:E,padding:b,marginSM:T,borderRadius:A,titleHeight:v,blockRadius:S,paragraphLiHeight:O,controlHeightXS:I,paragraphMarginTop:x}=a;return{[`${s}`]:{display:"table",width:"100%",[`${s}-header`]:{display:"table-cell",paddingInlineEnd:b,verticalAlign:"top",[`${c}`]:Object.assign({display:"inline-block",verticalAlign:"top",background:E},genSkeletonElementAvatarSize(f)),[`${c}-circle`]:{borderRadius:"50%"},[`${c}-lg`]:Object.assign({},genSkeletonElementAvatarSize(_)),[`${c}-sm`]:Object.assign({},genSkeletonElementAvatarSize(y))},[`${s}-content`]:{display:"table-cell",width:"100%",verticalAlign:"top",[`${u}`]:{width:"100%",height:v,background:E,borderRadius:S,[`+ ${d}`]:{marginBlockStart:y}},[`${d}`]:{padding:0,"> li":{width:"100%",height:O,listStyle:"none",background:E,borderRadius:S,"+ li":{marginBlockStart:I}}},[`${d}> li:last-child:not(:first-child):not(:nth-child(2))`]:{width:"61%"}},[`&-round ${s}-content`]:{[`${u}, ${d} > li`]:{borderRadius:A}}},[`${s}-with-avatar ${s}-content`]:{[`${u}`]:{marginBlockStart:T,[`+ ${d}`]:{marginBlockStart:x}}},[`${s}${s}-element`]:Object.assign(Object.assign(Object.assign(Object.assign({display:"inline-block",width:"auto"},genSkeletonElementButton(a)),genSkeletonElementAvatar(a)),genSkeletonElementInput(a)),genSkeletonElementImage(a)),[`${s}${s}-block`]:{width:"100%",[`${h}`]:{width:"100%"},[`${p}`]:{width:"100%"}},[`${s}${s}-active`]:{[`
        ${u},
        ${d} > li,
        ${c},
        ${h},
        ${p},
        ${m}
      `]:Object.assign({},genSkeletonColor(a))}}},prepareComponentToken$6=a=>{const{colorFillContent:s,colorFill:c}=a,u=s,d=c;return{color:u,colorGradientEnd:d,gradientFromColor:u,gradientToColor:d,titleHeight:a.controlHeight/2,blockRadius:a.borderRadiusSM,paragraphMarginTop:a.marginLG+a.marginXXS,paragraphLiHeight:a.controlHeight/2}},useStyle$7=genStyleHooks("Skeleton",a=>{const{componentCls:s,calc:c}=a,u=merge$1(a,{skeletonAvatarCls:`${s}-avatar`,skeletonTitleCls:`${s}-title`,skeletonParagraphCls:`${s}-paragraph`,skeletonButtonCls:`${s}-button`,skeletonInputCls:`${s}-input`,skeletonImageCls:`${s}-image`,imageSizeBase:c(a.controlHeight).mul(1.5).equal(),borderRadius:100,skeletonLoadingBackground:`linear-gradient(90deg, ${a.gradientFromColor} 25%, ${a.gradientToColor} 37%, ${a.gradientFromColor} 63%)`,skeletonLoadingMotionDuration:"1.4s"});return[genBaseStyle$2(u)]},prepareComponentToken$6,{deprecatedTokens:[["color","gradientFromColor"],["colorGradientEnd","gradientToColor"]]}),SkeletonAvatar=a=>{const{prefixCls:s,className:c,rootClassName:u,active:d,shape:h="circle",size:p="default"}=a,{getPrefixCls:m}=reactExports.useContext(ConfigContext),f=m("skeleton",s),[_,y,E]=useStyle$7(f),b=omit(a,["prefixCls","className"]),T=classNames(f,`${f}-element`,{[`${f}-active`]:d},c,u,y,E);return _(reactExports.createElement("div",{className:T},reactExports.createElement(Element$3,Object.assign({prefixCls:`${f}-avatar`,shape:h,size:p},b))))},SkeletonAvatar$1=SkeletonAvatar,SkeletonButton=a=>{const{prefixCls:s,className:c,rootClassName:u,active:d,block:h=!1,size:p="default"}=a,{getPrefixCls:m}=reactExports.useContext(ConfigContext),f=m("skeleton",s),[_,y,E]=useStyle$7(f),b=omit(a,["prefixCls"]),T=classNames(f,`${f}-element`,{[`${f}-active`]:d,[`${f}-block`]:h},c,u,y,E);return _(reactExports.createElement("div",{className:T},reactExports.createElement(Element$3,Object.assign({prefixCls:`${f}-button`,size:p},b))))},SkeletonButton$1=SkeletonButton,path="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",SkeletonImage=a=>{const{prefixCls:s,className:c,rootClassName:u,style:d,active:h}=a,{getPrefixCls:p}=reactExports.useContext(ConfigContext),m=p("skeleton",s),[f,_,y]=useStyle$7(m),E=classNames(m,`${m}-element`,{[`${m}-active`]:h},c,u,_,y);return f(reactExports.createElement("div",{className:E},reactExports.createElement("div",{className:classNames(`${m}-image`,c),style:d},reactExports.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:`${m}-image-svg`},reactExports.createElement("path",{d:path,className:`${m}-image-path`})))))},SkeletonImage$1=SkeletonImage,SkeletonInput=a=>{const{prefixCls:s,className:c,rootClassName:u,active:d,block:h,size:p="default"}=a,{getPrefixCls:m}=reactExports.useContext(ConfigContext),f=m("skeleton",s),[_,y,E]=useStyle$7(f),b=omit(a,["prefixCls"]),T=classNames(f,`${f}-element`,{[`${f}-active`]:d,[`${f}-block`]:h},c,u,y,E);return _(reactExports.createElement("div",{className:T},reactExports.createElement(Element$3,Object.assign({prefixCls:`${f}-input`,size:p},b))))},SkeletonInput$1=SkeletonInput;var DotChartOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM288 604a64 64 0 10128 0 64 64 0 10-128 0zm118-224a48 48 0 1096 0 48 48 0 10-96 0zm158 228a96 96 0 10192 0 96 96 0 10-192 0zm148-314a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"dot-chart",theme:"outlined"};const DotChartOutlinedSvg=DotChartOutlined$2;var DotChartOutlined=function(a,s){return reactExports.createElement(AntdIcon,_extends$2({},a,{ref:s,icon:DotChartOutlinedSvg}))},RefIcon$4=reactExports.forwardRef(DotChartOutlined);const DotChartOutlined$1=RefIcon$4,SkeletonNode=a=>{const{prefixCls:s,className:c,rootClassName:u,style:d,active:h,children:p}=a,{getPrefixCls:m}=reactExports.useContext(ConfigContext),f=m("skeleton",s),[_,y,E]=useStyle$7(f),b=classNames(f,`${f}-element`,{[`${f}-active`]:h},y,c,u,E),T=p??reactExports.createElement(DotChartOutlined$1,null);return _(reactExports.createElement("div",{className:b},reactExports.createElement("div",{className:classNames(`${f}-image`,c),style:d},T)))},SkeletonNode$1=SkeletonNode,getWidth=(a,s)=>{const{width:c,rows:u=2}=s;if(Array.isArray(c))return c[a];if(u-1===a)return c},Paragraph=a=>{const{prefixCls:s,className:c,style:u,rows:d}=a,h=_toConsumableArray(Array(d)).map((p,m)=>reactExports.createElement("li",{key:m,style:{width:getWidth(m,a)}}));return reactExports.createElement("ul",{className:classNames(s,c),style:u},h)},Paragraph$1=Paragraph,Title=a=>{let{prefixCls:s,className:c,width:u,style:d}=a;return reactExports.createElement("h3",{className:classNames(s,c),style:Object.assign({width:u},d)})},Title$1=Title;function getComponentProps(a){return a&&typeof a=="object"?a:{}}function getAvatarBasicProps(a,s){return a&&!s?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function getTitleBasicProps(a,s){return!a&&s?{width:"38%"}:a&&s?{width:"50%"}:{}}function getParagraphBasicProps(a,s){const c={};return(!a||!s)&&(c.width="61%"),!a&&s?c.rows=3:c.rows=2,c}const Skeleton=a=>{const{prefixCls:s,loading:c,className:u,rootClassName:d,style:h,children:p,avatar:m=!1,title:f=!0,paragraph:_=!0,active:y,round:E}=a,{getPrefixCls:b,direction:T,skeleton:A}=reactExports.useContext(ConfigContext),v=b("skeleton",s),[S,O,I]=useStyle$7(v);if(c||!("loading"in a)){const x=!!m,P=!!f,w=!!_;let C;if(x){const N=Object.assign(Object.assign({prefixCls:`${v}-avatar`},getAvatarBasicProps(P,w)),getComponentProps(m));C=reactExports.createElement("div",{className:`${v}-header`},reactExports.createElement(Element$3,Object.assign({},N)))}let k;if(P||w){let N;if(P){const L=Object.assign(Object.assign({prefixCls:`${v}-title`},getTitleBasicProps(x,w)),getComponentProps(f));N=reactExports.createElement(Title$1,Object.assign({},L))}let F;if(w){const L=Object.assign(Object.assign({prefixCls:`${v}-paragraph`},getParagraphBasicProps(x,P)),getComponentProps(_));F=reactExports.createElement(Paragraph$1,Object.assign({},L))}k=reactExports.createElement("div",{className:`${v}-content`},N,F)}const R=classNames(v,{[`${v}-with-avatar`]:x,[`${v}-active`]:y,[`${v}-rtl`]:T==="rtl",[`${v}-round`]:E},A==null?void 0:A.className,u,d,O,I);return S(reactExports.createElement("div",{className:R,style:Object.assign(Object.assign({},A==null?void 0:A.style),h)},C,k))}return p??null};Skeleton.Button=SkeletonButton$1,Skeleton.Avatar=SkeletonAvatar$1,Skeleton.Input=SkeletonInput$1,Skeleton.Image=SkeletonImage$1,Skeleton.Node=SkeletonNode$1;const Skeleton$1=Skeleton,RowContext=reactExports.createContext({}),RowContext$1=RowContext,genGridRowStyle=a=>{const{componentCls:s}=a;return{[s]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},genGridColStyle=a=>{const{componentCls:s}=a;return{[s]:{position:"relative",maxWidth:"100%",minHeight:1}}},genLoopGridColumnsStyle=(a,s)=>{const{prefixCls:c,componentCls:u,gridColumns:d}=a,h={};for(let p=d;p>=0;p--)p===0?(h[`${u}${s}-${p}`]={display:"none"},h[`${u}-push-${p}`]={insetInlineStart:"auto"},h[`${u}-pull-${p}`]={insetInlineEnd:"auto"},h[`${u}${s}-push-${p}`]={insetInlineStart:"auto"},h[`${u}${s}-pull-${p}`]={insetInlineEnd:"auto"},h[`${u}${s}-offset-${p}`]={marginInlineStart:0},h[`${u}${s}-order-${p}`]={order:0}):(h[`${u}${s}-${p}`]=[{"--ant-display":"block",display:"block"},{display:"var(--ant-display)",flex:`0 0 ${p/d*100}%`,maxWidth:`${p/d*100}%`}],h[`${u}${s}-push-${p}`]={insetInlineStart:`${p/d*100}%`},h[`${u}${s}-pull-${p}`]={insetInlineEnd:`${p/d*100}%`},h[`${u}${s}-offset-${p}`]={marginInlineStart:`${p/d*100}%`},h[`${u}${s}-order-${p}`]={order:p});return h[`${u}${s}-flex`]={flex:`var(--${c}${s}-flex)`},h},genGridStyle=(a,s)=>genLoopGridColumnsStyle(a,s),genGridMediaStyle=(a,s,c)=>({[`@media (min-width: ${unit(s)})`]:Object.assign({},genGridStyle(a,c))}),prepareRowComponentToken=()=>({}),prepareColComponentToken=()=>({}),useRowStyle=genStyleHooks("Grid",genGridRowStyle,prepareRowComponentToken),useColStyle=genStyleHooks("Grid",a=>{const s=merge$1(a,{gridColumns:24}),c={"-sm":s.screenSMMin,"-md":s.screenMDMin,"-lg":s.screenLGMin,"-xl":s.screenXLMin,"-xxl":s.screenXXLMin};return[genGridColStyle(s),genGridStyle(s,""),genGridStyle(s,"-xs"),Object.keys(c).map(u=>genGridMediaStyle(s,c[u],u)).reduce((u,d)=>Object.assign(Object.assign({},u),d),{})]},prepareColComponentToken);var __rest$i=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};function parseFlex(a){return typeof a=="number"?`${a} ${a} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(a)?`0 0 ${a}`:a}const sizes=["xs","sm","md","lg","xl","xxl"],Col=reactExports.forwardRef((a,s)=>{const{getPrefixCls:c,direction:u}=reactExports.useContext(ConfigContext),{gutter:d,wrap:h}=reactExports.useContext(RowContext$1),{prefixCls:p,span:m,order:f,offset:_,push:y,pull:E,className:b,children:T,flex:A,style:v}=a,S=__rest$i(a,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),O=c("col",p),[I,x,P]=useColStyle(O),w={};let C={};sizes.forEach(N=>{let F={};const L=a[N];typeof L=="number"?F.span=L:typeof L=="object"&&(F=L||{}),delete S[N],C=Object.assign(Object.assign({},C),{[`${O}-${N}-${F.span}`]:F.span!==void 0,[`${O}-${N}-order-${F.order}`]:F.order||F.order===0,[`${O}-${N}-offset-${F.offset}`]:F.offset||F.offset===0,[`${O}-${N}-push-${F.push}`]:F.push||F.push===0,[`${O}-${N}-pull-${F.pull}`]:F.pull||F.pull===0,[`${O}-rtl`]:u==="rtl"}),F.flex&&(C[`${O}-${N}-flex`]=!0,w[`--${O}-${N}-flex`]=parseFlex(F.flex))});const k=classNames(O,{[`${O}-${m}`]:m!==void 0,[`${O}-order-${f}`]:f,[`${O}-offset-${_}`]:_,[`${O}-push-${y}`]:y,[`${O}-pull-${E}`]:E},b,C,x,P),R={};if(d&&d[0]>0){const N=d[0]/2;R.paddingLeft=N,R.paddingRight=N}return A&&(R.flex=parseFlex(A),h===!1&&!R.minWidth&&(R.minWidth=0)),I(reactExports.createElement("div",Object.assign({},S,{style:Object.assign(Object.assign(Object.assign({},R),v),w),className:k,ref:s}),T))}),Col$1=Col;var __rest$h=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};function useMergedPropByScreen(a,s){const[c,u]=reactExports.useState(typeof a=="string"?a:""),d=()=>{if(typeof a=="string"&&u(a),typeof a=="object")for(let h=0;h<responsiveArray.length;h++){const p=responsiveArray[h];if(!s[p])continue;const m=a[p];if(m!==void 0){u(m);return}}};return reactExports.useEffect(()=>{d()},[JSON.stringify(a),s]),c}const Row=reactExports.forwardRef((a,s)=>{const{prefixCls:c,justify:u,align:d,className:h,style:p,children:m,gutter:f=0,wrap:_}=a,y=__rest$h(a,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:E,direction:b}=reactExports.useContext(ConfigContext),[T,A]=reactExports.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),[v,S]=reactExports.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),O=useMergedPropByScreen(d,v),I=useMergedPropByScreen(u,v),x=reactExports.useRef(f),P=useResponsiveObserver();reactExports.useEffect(()=>{const Z=P.subscribe(K=>{S(K);const se=x.current||0;(!Array.isArray(se)&&typeof se=="object"||Array.isArray(se)&&(typeof se[0]=="object"||typeof se[1]=="object"))&&A(K)});return()=>P.unsubscribe(Z)},[]);const w=()=>{const Z=[void 0,void 0];return(Array.isArray(f)?f:[f,void 0]).forEach((K,se)=>{if(typeof K=="object")for(let ne=0;ne<responsiveArray.length;ne++){const le=responsiveArray[ne];if(T[le]&&K[le]!==void 0){Z[se]=K[le];break}}else Z[se]=K}),Z},C=E("row",c),[k,R,N]=useRowStyle(C),F=w(),L=classNames(C,{[`${C}-no-wrap`]:_===!1,[`${C}-${I}`]:I,[`${C}-${O}`]:O,[`${C}-rtl`]:b==="rtl"},h,R,N),X={},V=F[0]!=null&&F[0]>0?F[0]/-2:void 0;V&&(X.marginLeft=V,X.marginRight=V);const[H,ee]=F;X.rowGap=ee;const Q=reactExports.useMemo(()=>({gutter:[H,ee],wrap:_}),[H,ee,_]);return k(reactExports.createElement(RowContext$1.Provider,{value:Q},reactExports.createElement("div",Object.assign({},y,{className:L,style:Object.assign(Object.assign({},X),p),ref:s}),m)))}),Row$1=Row;var PanelContent=React.forwardRef(function(a,s){var c=a.prefixCls,u=a.forceRender,d=a.className,h=a.style,p=a.children,m=a.isActive,f=a.role,_=React.useState(m||u),y=_slicedToArray(_,2),E=y[0],b=y[1];return React.useEffect(function(){(u||m)&&b(!0)},[u,m]),E?React.createElement("div",{ref:s,className:classNames("".concat(c,"-content"),_defineProperty(_defineProperty({},"".concat(c,"-content-active"),m),"".concat(c,"-content-inactive"),!m),d),style:h,role:f},React.createElement("div",{className:"".concat(c,"-content-box")},p)):null});PanelContent.displayName="PanelContent";var _excluded$7=["showArrow","headerClass","isActive","onItemClick","forceRender","className","prefixCls","collapsible","accordion","panelKey","extra","header","expandIcon","openMotion","destroyInactivePanel","children"],CollapsePanel$2=React.forwardRef(function(a,s){var c=a.showArrow,u=c===void 0?!0:c,d=a.headerClass,h=a.isActive,p=a.onItemClick,m=a.forceRender,f=a.className,_=a.prefixCls,y=a.collapsible,E=a.accordion,b=a.panelKey,T=a.extra,A=a.header,v=a.expandIcon,S=a.openMotion,O=a.destroyInactivePanel,I=a.children,x=_objectWithoutProperties(a,_excluded$7),P=y==="disabled",w=y==="header",C=y==="icon",k=T!=null&&typeof T!="boolean",R=function(){p==null||p(b)},N=function(H){(H.key==="Enter"||H.keyCode===KeyCode.ENTER||H.which===KeyCode.ENTER)&&R()},F=typeof v=="function"?v(a):React.createElement("i",{className:"arrow"});F&&(F=React.createElement("div",{className:"".concat(_,"-expand-icon"),onClick:["header","icon"].includes(y)?R:void 0},F));var L=classNames(_defineProperty(_defineProperty(_defineProperty({},"".concat(_,"-item"),!0),"".concat(_,"-item-active"),h),"".concat(_,"-item-disabled"),P),f),X=classNames(d,_defineProperty(_defineProperty(_defineProperty({},"".concat(_,"-header"),!0),"".concat(_,"-header-collapsible-only"),w),"".concat(_,"-icon-collapsible-only"),C)),V={className:X,"aria-expanded":h,"aria-disabled":P,onKeyDown:N};return!w&&!C&&(V.onClick=R,V.role=E?"tab":"button",V.tabIndex=P?-1:0),React.createElement("div",_extends$2({},x,{ref:s,className:L}),React.createElement("div",V,u&&F,React.createElement("span",{className:"".concat(_,"-header-text"),onClick:y==="header"?R:void 0},A),k&&React.createElement("div",{className:"".concat(_,"-extra")},T)),React.createElement(CSSMotion,_extends$2({visible:h,leavedClassName:"".concat(_,"-content-hidden")},S,{forceRender:m,removeOnLeave:O}),function(H,ee){var Q=H.className,Z=H.style;return React.createElement(PanelContent,{ref:ee,prefixCls:_,className:Q,style:Z,isActive:h,forceRender:m,role:E?"tabpanel":void 0},I)}))}),_excluded$6=["children","label","key","collapsible","onItemClick","destroyInactivePanel"],convertItemsToNodes=function(a,s){var c=s.prefixCls,u=s.accordion,d=s.collapsible,h=s.destroyInactivePanel,p=s.onItemClick,m=s.activeKey,f=s.openMotion,_=s.expandIcon;return a.map(function(y,E){var b=y.children,T=y.label,A=y.key,v=y.collapsible,S=y.onItemClick,O=y.destroyInactivePanel,I=_objectWithoutProperties(y,_excluded$6),x=String(A??E),P=v??d,w=O??h,C=function(R){P!=="disabled"&&(p(R),S==null||S(R))},k=!1;return u?k=m[0]===x:k=m.indexOf(x)>-1,React.createElement(CollapsePanel$2,_extends$2({},I,{prefixCls:c,key:x,panelKey:x,isActive:k,accordion:u,openMotion:f,expandIcon:_,header:T,collapsible:P,onItemClick:C,destroyInactivePanel:w}),b)})},getNewChild=function(a,s,c){if(!a)return null;var u=c.prefixCls,d=c.accordion,h=c.collapsible,p=c.destroyInactivePanel,m=c.onItemClick,f=c.activeKey,_=c.openMotion,y=c.expandIcon,E=a.key||String(s),b=a.props,T=b.header,A=b.headerClass,v=b.destroyInactivePanel,S=b.collapsible,O=b.onItemClick,I=!1;d?I=f[0]===E:I=f.indexOf(E)>-1;var x=S??h,P=function(C){x!=="disabled"&&(m(C),O==null||O(C))},w={key:E,panelKey:E,header:T,headerClass:A,isActive:I,prefixCls:u,destroyInactivePanel:v??p,openMotion:_,accordion:d,children:a.props.children,onItemClick:P,expandIcon:y,collapsible:x};return typeof a.type=="string"?a:(Object.keys(w).forEach(function(C){typeof w[C]>"u"&&delete w[C]}),React.cloneElement(a,w))};function useItems(a,s,c){return Array.isArray(a)?convertItemsToNodes(a,c):toArray$6(s).map(function(u,d){return getNewChild(u,d,c)})}function getActiveKeysArray(a){var s=a;if(!Array.isArray(s)){var c=_typeof(s);s=c==="number"||c==="string"?[s]:[]}return s.map(function(u){return String(u)})}var Collapse$2=React.forwardRef(function(a,s){var c=a.prefixCls,u=c===void 0?"rc-collapse":c,d=a.destroyInactivePanel,h=d===void 0?!1:d,p=a.style,m=a.accordion,f=a.className,_=a.children,y=a.collapsible,E=a.openMotion,b=a.expandIcon,T=a.activeKey,A=a.defaultActiveKey,v=a.onChange,S=a.items,O=classNames(u,f),I=useMergedState([],{value:T,onChange:function(R){return v==null?void 0:v(R)},defaultValue:A,postState:getActiveKeysArray}),x=_slicedToArray(I,2),P=x[0],w=x[1],C=function(R){return w(function(){if(m)return P[0]===R?[]:[R];var N=P.indexOf(R),F=N>-1;return F?P.filter(function(L){return L!==R}):[].concat(_toConsumableArray(P),[R])})};warningOnce(!_,"[rc-collapse] `children` will be removed in next major version. Please use `items` instead.");var k=useItems(S,_,{prefixCls:u,accordion:m,openMotion:E,expandIcon:b,collapsible:y,destroyInactivePanel:h,onItemClick:C,activeKey:P});return React.createElement("div",_extends$2({ref:s,className:O,style:p,role:m?"tablist":void 0},pickAttrs(a,{aria:!0,data:!0})),k)});const Collapse$3=Object.assign(Collapse$2,{Panel:CollapsePanel$2});Collapse$3.Panel;const CollapsePanel=reactExports.forwardRef((a,s)=>{const{getPrefixCls:c}=reactExports.useContext(ConfigContext),{prefixCls:u,className:d,showArrow:h=!0}=a,p=c("collapse",u),m=classNames({[`${p}-no-arrow`]:!h},d);return reactExports.createElement(Collapse$3.Panel,Object.assign({ref:s},a,{prefixCls:p,className:m}))}),CollapsePanel$1=CollapsePanel,genBaseStyle$1=a=>{const{componentCls:s,contentBg:c,padding:u,headerBg:d,headerPadding:h,collapseHeaderPaddingSM:p,collapseHeaderPaddingLG:m,collapsePanelBorderRadius:f,lineWidth:_,lineType:y,colorBorder:E,colorText:b,colorTextHeading:T,colorTextDisabled:A,fontSizeLG:v,lineHeight:S,lineHeightLG:O,marginSM:I,paddingSM:x,paddingLG:P,paddingXS:w,motionDurationSlow:C,fontSizeIcon:k,contentPadding:R,fontHeight:N,fontHeightLG:F}=a,L=`${unit(_)} ${y} ${E}`;return{[s]:Object.assign(Object.assign({},resetComponent(a)),{backgroundColor:d,border:L,borderBottom:0,borderRadius:f,"&-rtl":{direction:"rtl"},[`& > ${s}-item`]:{borderBottom:L,"&:last-child":{[`
            &,
            & > ${s}-header`]:{borderRadius:`0 0 ${unit(f)} ${unit(f)}`}},[`> ${s}-header`]:{position:"relative",display:"flex",flexWrap:"nowrap",alignItems:"flex-start",padding:h,color:T,lineHeight:S,cursor:"pointer",transition:`all ${C}, visibility 0s`,[`> ${s}-header-text`]:{flex:"auto"},"&:focus":{outline:"none"},[`${s}-expand-icon`]:{height:N,display:"flex",alignItems:"center",paddingInlineEnd:I},[`${s}-arrow`]:Object.assign(Object.assign({},resetIcon()),{fontSize:k,svg:{transition:`transform ${C}`}}),[`${s}-header-text`]:{marginInlineEnd:"auto"}},[`${s}-icon-collapsible-only`]:{cursor:"unset",[`${s}-expand-icon`]:{cursor:"pointer"}}},[`${s}-content`]:{color:b,backgroundColor:c,borderTop:L,[`& > ${s}-content-box`]:{padding:R},"&-hidden":{display:"none"}},"&-small":{[`> ${s}-item`]:{[`> ${s}-header`]:{padding:p,paddingInlineStart:w,[`> ${s}-expand-icon`]:{marginInlineStart:a.calc(x).sub(w).equal()}},[`> ${s}-content > ${s}-content-box`]:{padding:x}}},"&-large":{[`> ${s}-item`]:{fontSize:v,lineHeight:O,[`> ${s}-header`]:{padding:m,paddingInlineStart:u,[`> ${s}-expand-icon`]:{height:F,marginInlineStart:a.calc(P).sub(u).equal()}},[`> ${s}-content > ${s}-content-box`]:{padding:P}}},[`${s}-item:last-child`]:{[`> ${s}-content`]:{borderRadius:`0 0 ${unit(f)} ${unit(f)}`}},[`& ${s}-item-disabled > ${s}-header`]:{"\n          &,\n          & > .arrow\n        ":{color:A,cursor:"not-allowed"}},[`&${s}-icon-position-end`]:{[`& > ${s}-item`]:{[`> ${s}-header`]:{[`${s}-expand-icon`]:{order:1,paddingInlineEnd:0,paddingInlineStart:I}}}}})}},genArrowStyle=a=>{const{componentCls:s}=a,c=`> ${s}-item > ${s}-header ${s}-arrow svg`;return{[`${s}-rtl`]:{[c]:{transform:"rotate(180deg)"}}}},genBorderlessStyle=a=>{const{componentCls:s,headerBg:c,paddingXXS:u,colorBorder:d}=a;return{[`${s}-borderless`]:{backgroundColor:c,border:0,[`> ${s}-item`]:{borderBottom:`1px solid ${d}`},[`
        > ${s}-item:last-child,
        > ${s}-item:last-child ${s}-header
      `]:{borderRadius:0},[`> ${s}-item:last-child`]:{borderBottom:0},[`> ${s}-item > ${s}-content`]:{backgroundColor:"transparent",borderTop:0},[`> ${s}-item > ${s}-content > ${s}-content-box`]:{paddingTop:u}}}},genGhostStyle=a=>{const{componentCls:s,paddingSM:c}=a;return{[`${s}-ghost`]:{backgroundColor:"transparent",border:0,[`> ${s}-item`]:{borderBottom:0,[`> ${s}-content`]:{backgroundColor:"transparent",border:0,[`> ${s}-content-box`]:{paddingBlock:c}}}}}},prepareComponentToken$5=a=>({headerPadding:`${a.paddingSM}px ${a.padding}px`,headerBg:a.colorFillAlter,contentPadding:`${a.padding}px 16px`,contentBg:a.colorBgContainer}),useStyle$6=genStyleHooks("Collapse",a=>{const s=merge$1(a,{collapseHeaderPaddingSM:`${unit(a.paddingXS)} ${unit(a.paddingSM)}`,collapseHeaderPaddingLG:`${unit(a.padding)} ${unit(a.paddingLG)}`,collapsePanelBorderRadius:a.borderRadiusLG});return[genBaseStyle$1(s),genBorderlessStyle(s),genGhostStyle(s),genArrowStyle(s),genCollapseMotion$1(s)]},prepareComponentToken$5),Collapse=reactExports.forwardRef((a,s)=>{const{getPrefixCls:c,direction:u,collapse:d}=reactExports.useContext(ConfigContext),{prefixCls:h,className:p,rootClassName:m,style:f,bordered:_=!0,ghost:y,size:E,expandIconPosition:b="start",children:T,expandIcon:A}=a,v=useSize(L=>{var X;return(X=E??L)!==null&&X!==void 0?X:"middle"}),S=c("collapse",h),O=c(),[I,x,P]=useStyle$6(S),w=reactExports.useMemo(()=>b==="left"?"start":b==="right"?"end":b,[b]),C=A??(d==null?void 0:d.expandIcon),k=reactExports.useCallback(function(){let L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const X=typeof C=="function"?C(L):reactExports.createElement(RightOutlined$1,{rotate:L.isActive?90:void 0});return cloneElement(X,()=>{var V;return{className:classNames((V=X==null?void 0:X.props)===null||V===void 0?void 0:V.className,`${S}-arrow`)}})},[C,S]),R=classNames(`${S}-icon-position-${w}`,{[`${S}-borderless`]:!_,[`${S}-rtl`]:u==="rtl",[`${S}-ghost`]:!!y,[`${S}-${v}`]:v!=="middle"},d==null?void 0:d.className,p,m,x,P),N=Object.assign(Object.assign({},initCollapseMotion(O)),{motionAppear:!1,leavedClassName:`${S}-content-hidden`}),F=reactExports.useMemo(()=>T?toArray$6(T).map((L,X)=>{var V,H;if(!((V=L.props)===null||V===void 0)&&V.disabled){const ee=(H=L.key)!==null&&H!==void 0?H:String(X),{disabled:Q,collapsible:Z}=L.props,K=Object.assign(Object.assign({},omit(L.props,["disabled"])),{key:ee,collapsible:Z??(Q?"disabled":void 0)});return cloneElement(L,K)}return L}):null,[T]);return I(reactExports.createElement(Collapse$3,Object.assign({ref:s,openMotion:N},omit(a,["rootClassName"]),{expandIcon:k,prefixCls:S,className:R,style:Object.assign(Object.assign({},d==null?void 0:d.style),f)}),F))}),Collapse$1=Object.assign(Collapse,{Panel:CollapsePanel$1}),genSharedDividerStyle=a=>{const{componentCls:s,sizePaddingEdgeHorizontal:c,colorSplit:u,lineWidth:d,textPaddingInline:h,orientationMargin:p,verticalMarginInline:m}=a;return{[s]:Object.assign(Object.assign({},resetComponent(a)),{borderBlockStart:`${unit(d)} solid ${u}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:m,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:`${unit(d)} solid ${u}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${unit(a.dividerHorizontalGutterMargin)} 0`},[`&-horizontal${s}-with-text`]:{display:"flex",alignItems:"center",margin:`${unit(a.dividerHorizontalWithTextGutterMargin)} 0`,color:a.colorTextHeading,fontWeight:500,fontSize:a.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${u}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${unit(d)} solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${s}-with-text-left`]:{"&::before":{width:`calc(${p} * 100%)`},"&::after":{width:`calc(100% - ${p} * 100%)`}},[`&-horizontal${s}-with-text-right`]:{"&::before":{width:`calc(100% - ${p} * 100%)`},"&::after":{width:`calc(${p} * 100%)`}},[`${s}-inner-text`]:{display:"inline-block",paddingBlock:0,paddingInline:h},"&-dashed":{background:"none",borderColor:u,borderStyle:"dashed",borderWidth:`${unit(d)} 0 0`},[`&-horizontal${s}-with-text${s}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${s}-dashed`]:{borderInlineStartWidth:d,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${s}-with-text`]:{color:a.colorText,fontWeight:"normal",fontSize:a.fontSize},[`&-horizontal${s}-with-text-left${s}-no-default-orientation-margin-left`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${s}-inner-text`]:{paddingInlineStart:c}},[`&-horizontal${s}-with-text-right${s}-no-default-orientation-margin-right`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${s}-inner-text`]:{paddingInlineEnd:c}}})}},prepareComponentToken$4=a=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:a.marginXS}),useStyle$5=genStyleHooks("Divider",a=>{const s=merge$1(a,{dividerHorizontalWithTextGutterMargin:a.margin,dividerHorizontalGutterMargin:a.marginLG,sizePaddingEdgeHorizontal:0});return[genSharedDividerStyle(s)]},prepareComponentToken$4,{unitless:{orientationMargin:!0}});var __rest$g=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};const Divider=a=>{const{getPrefixCls:s,direction:c,divider:u}=reactExports.useContext(ConfigContext),{prefixCls:d,type:h="horizontal",orientation:p="center",orientationMargin:m,className:f,rootClassName:_,children:y,dashed:E,plain:b,style:T}=a,A=__rest$g(a,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","plain","style"]),v=s("divider",d),[S,O,I]=useStyle$5(v),x=p.length>0?`-${p}`:p,P=!!y,w=p==="left"&&m!=null,C=p==="right"&&m!=null,k=classNames(v,u==null?void 0:u.className,O,I,`${v}-${h}`,{[`${v}-with-text`]:P,[`${v}-with-text${x}`]:P,[`${v}-dashed`]:!!E,[`${v}-plain`]:!!b,[`${v}-rtl`]:c==="rtl",[`${v}-no-default-orientation-margin-left`]:w,[`${v}-no-default-orientation-margin-right`]:C},f,_),R=reactExports.useMemo(()=>typeof m=="number"?m:/^\d+$/.test(m)?Number(m):m,[m]),N=Object.assign(Object.assign({},w&&{marginLeft:R}),C&&{marginRight:R});return S(reactExports.createElement("div",Object.assign({className:k,style:Object.assign(Object.assign({},u==null?void 0:u.style),T)},A,{role:"separator"}),y&&h!=="vertical"&&reactExports.createElement("span",{className:`${v}-inner-text`,style:N},y)))},Divider$1=Divider;var UpOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"};const UpOutlinedSvg=UpOutlined$2;var UpOutlined=function(a,s){return reactExports.createElement(AntdIcon,_extends$2({},a,{ref:s,icon:UpOutlinedSvg}))},RefIcon$3=reactExports.forwardRef(UpOutlined);const UpOutlined$1=RefIcon$3;function supportBigInt(){return typeof BigInt=="function"}function isEmpty(a){return!a&&a!==0&&!Number.isNaN(a)||!String(a).trim()}function trimNumber(a){var s=a.trim(),c=s.startsWith("-");c&&(s=s.slice(1)),s=s.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),s.startsWith(".")&&(s="0".concat(s));var u=s||"0",d=u.split("."),h=d[0]||"0",p=d[1]||"0";h==="0"&&p==="0"&&(c=!1);var m=c?"-":"";return{negative:c,negativeStr:m,trimStr:u,integerStr:h,decimalStr:p,fullStr:"".concat(m).concat(u)}}function isE(a){var s=String(a);return!Number.isNaN(Number(s))&&s.includes("e")}function getNumberPrecision(a){var s=String(a);if(isE(a)){var c=Number(s.slice(s.indexOf("e-")+2)),u=s.match(/\.(\d+)/);return u!=null&&u[1]&&(c+=u[1].length),c}return s.includes(".")&&validateNumber(s)?s.length-s.indexOf(".")-1:0}function num2str(a){var s=String(a);if(isE(a)){if(a>Number.MAX_SAFE_INTEGER)return String(supportBigInt()?BigInt(a).toString():Number.MAX_SAFE_INTEGER);if(a<Number.MIN_SAFE_INTEGER)return String(supportBigInt()?BigInt(a).toString():Number.MIN_SAFE_INTEGER);s=a.toFixed(getNumberPrecision(s))}return trimNumber(s).fullStr}function validateNumber(a){return typeof a=="number"?!Number.isNaN(a):a?/^\s*-?\d+(\.\d+)?\s*$/.test(a)||/^\s*-?\d+\.\s*$/.test(a)||/^\s*-?\.\d+\s*$/.test(a):!1}var BigIntDecimal=function(){function a(s){if(_classCallCheck(this,a),_defineProperty(this,"origin",""),_defineProperty(this,"negative",void 0),_defineProperty(this,"integer",void 0),_defineProperty(this,"decimal",void 0),_defineProperty(this,"decimalLen",void 0),_defineProperty(this,"empty",void 0),_defineProperty(this,"nan",void 0),isEmpty(s)){this.empty=!0;return}if(this.origin=String(s),s==="-"||Number.isNaN(s)){this.nan=!0;return}var c=s;if(isE(c)&&(c=Number(c)),c=typeof c=="string"?c:num2str(c),validateNumber(c)){var u=trimNumber(c);this.negative=u.negative;var d=u.trimStr.split(".");this.integer=BigInt(d[0]);var h=d[1]||"0";this.decimal=BigInt(h),this.decimalLen=h.length}else this.nan=!0}return _createClass(a,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(s){var c="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(s,"0"));return BigInt(c)}},{key:"negate",value:function(){var s=new a(this.toString());return s.negative=!s.negative,s}},{key:"cal",value:function(s,c,u){var d=Math.max(this.getDecimalStr().length,s.getDecimalStr().length),h=this.alignDecimal(d),p=s.alignDecimal(d),m=c(h,p).toString(),f=u(d),_=trimNumber(m),y=_.negativeStr,E=_.trimStr,b="".concat(y).concat(E.padStart(f+1,"0"));return new a("".concat(b.slice(0,-f),".").concat(b.slice(-f)))}},{key:"add",value:function(s){if(this.isInvalidate())return new a(s);var c=new a(s);return c.isInvalidate()?this:this.cal(c,function(u,d){return u+d},function(u){return u})}},{key:"multi",value:function(s){var c=new a(s);return this.isInvalidate()||c.isInvalidate()?new a(NaN):this.cal(c,function(u,d){return u*d},function(u){return u*2})}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(s){return this.toString()===(s==null?void 0:s.toString())}},{key:"lessEquals",value:function(s){return this.add(s.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return s?this.isInvalidate()?"":trimNumber("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),a}(),NumberDecimal=function(){function a(s){if(_classCallCheck(this,a),_defineProperty(this,"origin",""),_defineProperty(this,"number",void 0),_defineProperty(this,"empty",void 0),isEmpty(s)){this.empty=!0;return}this.origin=String(s),this.number=Number(s)}return _createClass(a,[{key:"negate",value:function(){return new a(-this.toNumber())}},{key:"add",value:function(s){if(this.isInvalidate())return new a(s);var c=Number(s);if(Number.isNaN(c))return this;var u=this.number+c;if(u>Number.MAX_SAFE_INTEGER)return new a(Number.MAX_SAFE_INTEGER);if(u<Number.MIN_SAFE_INTEGER)return new a(Number.MIN_SAFE_INTEGER);var d=Math.max(getNumberPrecision(this.number),getNumberPrecision(c));return new a(u.toFixed(d))}},{key:"multi",value:function(s){var c=Number(s);if(this.isInvalidate()||Number.isNaN(c))return new a(NaN);var u=this.number*c;if(u>Number.MAX_SAFE_INTEGER)return new a(Number.MAX_SAFE_INTEGER);if(u<Number.MIN_SAFE_INTEGER)return new a(Number.MIN_SAFE_INTEGER);var d=Math.max(getNumberPrecision(this.number),getNumberPrecision(c));return new a(u.toFixed(d))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(s){return this.toNumber()===(s==null?void 0:s.toNumber())}},{key:"lessEquals",value:function(s){return this.add(s.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return s?this.isInvalidate()?"":num2str(this.number):this.origin}}]),a}();function getMiniDecimal(a){return supportBigInt()?new BigIntDecimal(a):new NumberDecimal(a)}function toFixed(a,s,c){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(a==="")return"";var d=trimNumber(a),h=d.negativeStr,p=d.integerStr,m=d.decimalStr,f="".concat(s).concat(m),_="".concat(h).concat(p);if(c>=0){var y=Number(m[c]);if(y>=5&&!u){var E=getMiniDecimal(a).add("".concat(h,"0.").concat("0".repeat(c)).concat(10-y));return toFixed(E.toString(),s,c,u)}return c===0?_:"".concat(_).concat(s).concat(m.padEnd(c,"0").slice(0,c))}return f===".0"?_:"".concat(_).concat(f)}function hasAddon(a){return!!(a.addonBefore||a.addonAfter)}function hasPrefixSuffix$1(a){return!!(a.prefix||a.suffix||a.allowClear)}function cloneEvent(a,s,c){var u=s.cloneNode(!0),d=Object.create(a,{target:{value:u},currentTarget:{value:u}});return u.value=c,typeof s.selectionStart=="number"&&typeof s.selectionEnd=="number"&&(u.selectionStart=s.selectionStart,u.selectionEnd=s.selectionEnd),d}function resolveOnChange(a,s,c,u){if(c){var d=s;if(s.type==="click"){d=cloneEvent(s,a,""),c(d);return}if(a.type!=="file"&&u!==void 0){d=cloneEvent(s,a,u),c(d);return}c(d)}}function triggerFocus$1(a,s){if(a){a.focus(s);var c=s||{},u=c.cursor;if(u){var d=a.value.length;switch(u){case"start":a.setSelectionRange(0,0);break;case"end":a.setSelectionRange(d,d);break;default:a.setSelectionRange(0,d)}}}}var BaseInput=function(a){var s,c,u=a.inputElement,d=a.children,h=a.prefixCls,p=a.prefix,m=a.suffix,f=a.addonBefore,_=a.addonAfter,y=a.className,E=a.style,b=a.disabled,T=a.readOnly,A=a.focused,v=a.triggerFocus,S=a.allowClear,O=a.value,I=a.handleReset,x=a.hidden,P=a.classes,w=a.classNames,C=a.dataAttrs,k=a.styles,R=a.components,N=d??u,F=(R==null?void 0:R.affixWrapper)||"span",L=(R==null?void 0:R.groupWrapper)||"span",X=(R==null?void 0:R.wrapper)||"span",V=(R==null?void 0:R.groupAddon)||"span",H=reactExports.useRef(null),ee=function(ce){var ie;(ie=H.current)!==null&&ie!==void 0&&ie.contains(ce.target)&&(v==null||v())},Q=hasPrefixSuffix$1(a),Z=reactExports.cloneElement(N,{value:O,className:classNames(N.props.className,!Q&&(w==null?void 0:w.variant))||null});if(Q){var K,se=null;if(S){var ne,le=!b&&!T&&O,he="".concat(h,"-clear-icon"),Y=_typeof(S)==="object"&&S!==null&&S!==void 0&&S.clearIcon?S.clearIcon:"\u2716";se=React.createElement("span",{onClick:I,onMouseDown:function(ce){return ce.preventDefault()},className:classNames(he,(ne={},_defineProperty(ne,"".concat(he,"-hidden"),!le),_defineProperty(ne,"".concat(he,"-has-suffix"),!!m),ne)),role:"button",tabIndex:-1},Y)}var D="".concat(h,"-affix-wrapper"),G=classNames(D,(K={},_defineProperty(K,"".concat(h,"-disabled"),b),_defineProperty(K,"".concat(D,"-disabled"),b),_defineProperty(K,"".concat(D,"-focused"),A),_defineProperty(K,"".concat(D,"-readonly"),T),_defineProperty(K,"".concat(D,"-input-with-clear-btn"),m&&S&&O),K),P==null?void 0:P.affixWrapper,w==null?void 0:w.affixWrapper,w==null?void 0:w.variant),B=(m||S)&&React.createElement("span",{className:classNames("".concat(h,"-suffix"),w==null?void 0:w.suffix),style:k==null?void 0:k.suffix},se,m);Z=React.createElement(F,_extends$2({className:G,style:k==null?void 0:k.affixWrapper,onClick:ee},C==null?void 0:C.affixWrapper,{ref:H}),p&&React.createElement("span",{className:classNames("".concat(h,"-prefix"),w==null?void 0:w.prefix),style:k==null?void 0:k.prefix},p),Z,B)}if(hasAddon(a)){var U="".concat(h,"-group"),W="".concat(U,"-addon"),q="".concat(U,"-wrapper"),J=classNames("".concat(h,"-wrapper"),U,P==null?void 0:P.wrapper,w==null?void 0:w.wrapper),ae=classNames(q,_defineProperty({},"".concat(q,"-disabled"),b),P==null?void 0:P.group,w==null?void 0:w.groupWrapper);Z=React.createElement(L,{className:ae},React.createElement(X,{className:J},f&&React.createElement(V,{className:W},f),Z,_&&React.createElement(V,{className:W},_)))}return React.cloneElement(Z,{className:classNames((s=Z.props)===null||s===void 0?void 0:s.className,y)||null,style:_objectSpread2(_objectSpread2({},(c=Z.props)===null||c===void 0?void 0:c.style),E),hidden:x})},_excluded$5=["show"];function useCount(a,s){return reactExports.useMemo(function(){var c={};s&&(c.show=_typeof(s)==="object"&&s.formatter?s.formatter:!!s),c=_objectSpread2(_objectSpread2({},c),a);var u=c,d=u.show,h=_objectWithoutProperties(u,_excluded$5);return _objectSpread2(_objectSpread2({},h),{},{show:!!d,showFormatter:typeof d=="function"?d:void 0,strategy:h.strategy||function(p){return p.length}})},[a,s])}var _excluded$4=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],Input$3=reactExports.forwardRef(function(a,s){var c=a.autoComplete,u=a.onChange,d=a.onFocus,h=a.onBlur,p=a.onPressEnter,m=a.onKeyDown,f=a.prefixCls,_=f===void 0?"rc-input":f,y=a.disabled,E=a.htmlSize,b=a.className,T=a.maxLength,A=a.suffix,v=a.showCount,S=a.count,O=a.type,I=O===void 0?"text":O,x=a.classes,P=a.classNames,w=a.styles,C=a.onCompositionStart,k=a.onCompositionEnd,R=_objectWithoutProperties(a,_excluded$4),N=reactExports.useState(!1),F=_slicedToArray(N,2),L=F[0],X=F[1],V=reactExports.useRef(!1),H=reactExports.useRef(null),ee=function(_e){H.current&&triggerFocus$1(H.current,_e)},Q=useMergedState(a.defaultValue,{value:a.value}),Z=_slicedToArray(Q,2),K=Z[0],se=Z[1],ne=K==null?"":String(K),le=reactExports.useState(null),he=_slicedToArray(le,2),Y=he[0],D=he[1],G=useCount(S,v),B=G.max||T,U=G.strategy(ne),W=!!B&&U>B;reactExports.useImperativeHandle(s,function(){return{focus:ee,blur:function(){var _e;(_e=H.current)===null||_e===void 0||_e.blur()},setSelectionRange:function(_e,Be,ze){var Se;(Se=H.current)===null||Se===void 0||Se.setSelectionRange(_e,Be,ze)},select:function(){var _e;(_e=H.current)===null||_e===void 0||_e.select()},input:H.current}}),reactExports.useEffect(function(){X(function(_e){return _e&&y?!1:_e})},[y]);var q=function(_e,Be,ze){var Se=Be;if(!V.current&&G.exceedFormatter&&G.max&&G.strategy(Be)>G.max){if(Se=G.exceedFormatter(Be,{max:G.max}),Be!==Se){var pe,me;D([((pe=H.current)===null||pe===void 0?void 0:pe.selectionStart)||0,((me=H.current)===null||me===void 0?void 0:me.selectionEnd)||0])}}else if(ze.source==="compositionEnd")return;se(Se),H.current&&resolveOnChange(H.current,_e,u,Se)};reactExports.useEffect(function(){if(Y){var _e;(_e=H.current)===null||_e===void 0||_e.setSelectionRange.apply(_e,_toConsumableArray(Y))}},[Y]);var J=function(_e){q(_e,_e.target.value,{source:"change"})},ae=function(_e){V.current=!1,q(_e,_e.currentTarget.value,{source:"compositionEnd"}),k==null||k(_e)},ce=function(_e){p&&_e.key==="Enter"&&p(_e),m==null||m(_e)},ie=function(_e){X(!0),d==null||d(_e)},ue=function(_e){X(!1),h==null||h(_e)},Ee=function(_e){se(""),ee(),H.current&&resolveOnChange(H.current,_e,u)},xe=W&&"".concat(_,"-out-of-range"),ve=function(){var _e=omit(a,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames"]);return React.createElement("input",_extends$2({autoComplete:c},_e,{onChange:J,onFocus:ie,onBlur:ue,onKeyDown:ce,className:classNames(_,_defineProperty({},"".concat(_,"-disabled"),y),P==null?void 0:P.input),style:w==null?void 0:w.input,ref:H,size:E,type:I,onCompositionStart:function(Be){V.current=!0,C==null||C(Be)},onCompositionEnd:ae}))},$e=function(){var _e=Number(B)>0;if(A||G.show){var Be=G.showFormatter?G.showFormatter({value:ne,count:U,maxLength:B}):"".concat(U).concat(_e?" / ".concat(B):"");return React.createElement(React.Fragment,null,G.show&&React.createElement("span",{className:classNames("".concat(_,"-show-count-suffix"),_defineProperty({},"".concat(_,"-show-count-has-suffix"),!!A),P==null?void 0:P.count),style:_objectSpread2({},w==null?void 0:w.count)},Be),A)}return null};return React.createElement(BaseInput,_extends$2({},R,{prefixCls:_,className:classNames(b,xe),handleReset:Ee,value:ne,focused:L,triggerFocus:ee,suffix:$e(),disabled:y,classes:x,classNames:P,styles:w}),ve())});function useCursor(a,s){var c=reactExports.useRef(null);function u(){try{var h=a.selectionStart,p=a.selectionEnd,m=a.value,f=m.substring(0,h),_=m.substring(p);c.current={start:h,end:p,value:m,beforeTxt:f,afterTxt:_}}catch{}}function d(){if(a&&c.current&&s)try{var h=a.value,p=c.current,m=p.beforeTxt,f=p.afterTxt,_=p.start,y=h.length;if(h.endsWith(f))y=h.length-c.current.afterTxt.length;else if(h.startsWith(m))y=m.length;else{var E=m[_-1],b=h.indexOf(E,_-1);b!==-1&&(y=b+1)}a.setSelectionRange(y,y)}catch(T){warningOnce(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(T.message))}}return[u,d]}var useMobile=function(){var a=reactExports.useState(!1),s=_slicedToArray(a,2),c=s[0],u=s[1];return useLayoutEffect$1(function(){u(isMobile())},[]),c},STEP_INTERVAL=200,STEP_DELAY=600;function StepHandler(a){var s=a.prefixCls,c=a.upNode,u=a.downNode,d=a.upDisabled,h=a.downDisabled,p=a.onStep,m=reactExports.useRef(),f=reactExports.useRef([]),_=reactExports.useRef();_.current=p;var y=function(){clearTimeout(m.current)},E=function(I,x){I.preventDefault(),y(),_.current(x);function P(){_.current(x),m.current=setTimeout(P,STEP_INTERVAL)}m.current=setTimeout(P,STEP_DELAY)};reactExports.useEffect(function(){return function(){y(),f.current.forEach(function(I){return wrapperRaf.cancel(I)})}},[]);var b=useMobile();if(b)return null;var T="".concat(s,"-handler"),A=classNames(T,"".concat(T,"-up"),_defineProperty({},"".concat(T,"-up-disabled"),d)),v=classNames(T,"".concat(T,"-down"),_defineProperty({},"".concat(T,"-down-disabled"),h)),S=function(){return f.current.push(wrapperRaf(y))},O={unselectable:"on",role:"button",onMouseUp:S,onMouseLeave:S};return reactExports.createElement("div",{className:"".concat(T,"-wrap")},reactExports.createElement("span",_extends$2({},O,{onMouseDown:function(I){E(I,!0)},"aria-label":"Increase Value","aria-disabled":d,className:A}),c||reactExports.createElement("span",{unselectable:"on",className:"".concat(s,"-handler-up-inner")})),reactExports.createElement("span",_extends$2({},O,{onMouseDown:function(I){E(I,!1)},"aria-label":"Decrease Value","aria-disabled":h,className:v}),u||reactExports.createElement("span",{unselectable:"on",className:"".concat(s,"-handler-down-inner")})))}function getDecupleSteps(a){var s=typeof a=="number"?num2str(a):trimNumber(a).fullStr,c=s.includes(".");return c?trimNumber(s.replace(/(\d)\.(\d)/g,"$1$2.")).fullStr:a+"0"}const useFrame=function(){var a=reactExports.useRef(0),s=function(){wrapperRaf.cancel(a.current)};return reactExports.useEffect(function(){return s},[]),function(c){s(),a.current=wrapperRaf(function(){c()})}};var _excluded$3=["prefixCls","className","style","min","max","step","defaultValue","value","disabled","readOnly","upHandler","downHandler","keyboard","changeOnWheel","controls","classNames","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","changeOnBlur"],_excluded2=["disabled","style","prefixCls","value","prefix","suffix","addonBefore","addonAfter","className","classNames"],getDecimalValue=function(a,s){return a||s.isEmpty()?s.toString():s.toNumber()},getDecimalIfValidate=function(a){var s=getMiniDecimal(a);return s.isInvalidate()?null:s},InternalInputNumber=reactExports.forwardRef(function(a,s){var c,u=a.prefixCls,d=u===void 0?"rc-input-number":u,h=a.className,p=a.style,m=a.min,f=a.max,_=a.step,y=_===void 0?1:_,E=a.defaultValue,b=a.value,T=a.disabled,A=a.readOnly,v=a.upHandler,S=a.downHandler,O=a.keyboard,I=a.changeOnWheel,x=I===void 0?!1:I,P=a.controls,w=P===void 0?!0:P;a.classNames;var C=a.stringMode,k=a.parser,R=a.formatter,N=a.precision,F=a.decimalSeparator,L=a.onChange,X=a.onInput,V=a.onPressEnter,H=a.onStep,ee=a.changeOnBlur,Q=ee===void 0?!0:ee,Z=_objectWithoutProperties(a,_excluded$3),K="".concat(d,"-input"),se=reactExports.useRef(null),ne=reactExports.useState(!1),le=_slicedToArray(ne,2),he=le[0],Y=le[1],D=reactExports.useRef(!1),G=reactExports.useRef(!1),B=reactExports.useRef(!1),U=reactExports.useState(function(){return getMiniDecimal(b??E)}),W=_slicedToArray(U,2),q=W[0],J=W[1];function ae(Pe){b===void 0&&J(Pe)}var ce=reactExports.useCallback(function(Pe,De){if(!De)return N>=0?N:Math.max(getNumberPrecision(Pe),getNumberPrecision(y))},[N,y]),ie=reactExports.useCallback(function(Pe){var De=String(Pe);if(k)return k(De);var Ce=De;return F&&(Ce=Ce.replace(F,".")),Ce.replace(/[^\w.-]+/g,"")},[k,F]),ue=reactExports.useRef(""),Ee=reactExports.useCallback(function(Pe,De){if(R)return R(Pe,{userTyping:De,input:String(ue.current)});var Ce=typeof Pe=="number"?num2str(Pe):Pe;if(!De){var Xe=ce(Ce,De);if(validateNumber(Ce)&&(F||Xe>=0)){var Ge=F||".";Ce=toFixed(Ce,Ge,Xe)}}return Ce},[R,ce,F]),xe=reactExports.useState(function(){var Pe=E??b;return q.isInvalidate()&&["string","number"].includes(_typeof(Pe))?Number.isNaN(Pe)?"":Pe:Ee(q.toString(),!1)}),ve=_slicedToArray(xe,2),$e=ve[0],_e=ve[1];ue.current=$e;function Be(Pe,De){_e(Ee(Pe.isInvalidate()?Pe.toString(!1):Pe.toString(!De),De))}var ze=reactExports.useMemo(function(){return getDecimalIfValidate(f)},[f,N]),Se=reactExports.useMemo(function(){return getDecimalIfValidate(m)},[m,N]),pe=reactExports.useMemo(function(){return!ze||!q||q.isInvalidate()?!1:ze.lessEquals(q)},[ze,q]),me=reactExports.useMemo(function(){return!Se||!q||q.isInvalidate()?!1:q.lessEquals(Se)},[Se,q]),Oe=useCursor(se.current,he),Le=_slicedToArray(Oe,2),We=Le[0],Ze=Le[1],Qe=function(Pe){return ze&&!Pe.lessEquals(ze)?ze:Se&&!Se.lessEquals(Pe)?Se:null},Je=function(Pe){return!Qe(Pe)},tt=function(Pe,De){var Ce=Pe,Xe=Je(Ce)||Ce.isEmpty();if(!Ce.isEmpty()&&!De&&(Ce=Qe(Ce)||Ce,Xe=!0),!A&&!T&&Xe){var Ge=Ce.toString(),et=ce(Ge,De);return et>=0&&(Ce=getMiniDecimal(toFixed(Ge,".",et)),Je(Ce)||(Ce=getMiniDecimal(toFixed(Ge,".",et,!0)))),Ce.equals(q)||(ae(Ce),L==null||L(Ce.isEmpty()?null:getDecimalValue(C,Ce)),b===void 0&&Be(Ce,De)),Ce}return q},rt=useFrame(),at=function Pe(De){if(We(),ue.current=De,_e(De),!G.current){var Ce=ie(De),Xe=getMiniDecimal(Ce);Xe.isNaN()||tt(Xe,!0)}X==null||X(De),rt(function(){var Ge=De;k||(Ge=De.replace(//g,".")),Ge!==De&&Pe(Ge)})},it=function(){G.current=!0},Ne=function(){G.current=!1,at(se.current.value)},ye=function(Pe){at(Pe.target.value)},ge=function(Pe){var De;if(!(Pe&&pe||!Pe&&me)){D.current=!1;var Ce=getMiniDecimal(B.current?getDecupleSteps(y):y);Pe||(Ce=Ce.negate());var Xe=(q||getMiniDecimal(0)).add(Ce.toString()),Ge=tt(Xe,!1);H==null||H(getDecimalValue(C,Ge),{offset:B.current?getDecupleSteps(y):y,type:Pe?"up":"down"}),(De=se.current)===null||De===void 0||De.focus()}},Fe=function(Pe){var De=getMiniDecimal(ie($e)),Ce=De;De.isNaN()?Ce=tt(q,Pe):Ce=tt(De,Pe),b!==void 0?Be(q,!1):Ce.isNaN()||Be(Ce,!1)},Ue=function(){D.current=!0},dt=function(Pe){var De=Pe.key,Ce=Pe.shiftKey;D.current=!0,B.current=Ce,De==="Enter"&&(G.current||(D.current=!1),Fe(!1),V==null||V(Pe)),O!==!1&&!G.current&&["Up","ArrowUp","Down","ArrowDown"].includes(De)&&(ge(De==="Up"||De==="ArrowUp"),Pe.preventDefault())},pt=function(){D.current=!1,B.current=!1};reactExports.useEffect(function(){if(x&&he){var Pe=function(Ce){ge(Ce.deltaY<0),Ce.preventDefault()},De=se.current;if(De)return De.addEventListener("wheel",Pe,{passive:!1}),function(){return De.removeEventListener("wheel",Pe)}}});var Ae=function(){Q&&Fe(!1),Y(!1),D.current=!1};return useLayoutUpdateEffect(function(){q.isInvalidate()||Be(q,!1)},[N,R]),useLayoutUpdateEffect(function(){var Pe=getMiniDecimal(b);J(Pe);var De=getMiniDecimal(ie($e));(!Pe.equals(De)||!D.current||R)&&Be(Pe,D.current)},[b]),useLayoutUpdateEffect(function(){R&&Ze()},[$e]),reactExports.createElement("div",{className:classNames(d,h,(c={},_defineProperty(c,"".concat(d,"-focused"),he),_defineProperty(c,"".concat(d,"-disabled"),T),_defineProperty(c,"".concat(d,"-readonly"),A),_defineProperty(c,"".concat(d,"-not-a-number"),q.isNaN()),_defineProperty(c,"".concat(d,"-out-of-range"),!q.isInvalidate()&&!Je(q)),c)),style:p,onFocus:function(){Y(!0)},onBlur:Ae,onKeyDown:dt,onKeyUp:pt,onCompositionStart:it,onCompositionEnd:Ne,onBeforeInput:Ue},w&&reactExports.createElement(StepHandler,{prefixCls:d,upNode:v,downNode:S,upDisabled:pe,downDisabled:me,onStep:ge}),reactExports.createElement("div",{className:"".concat(K,"-wrap")},reactExports.createElement("input",_extends$2({autoComplete:"off",role:"spinbutton","aria-valuemin":m,"aria-valuemax":f,"aria-valuenow":q.isInvalidate()?null:q.toString(),step:y},Z,{ref:composeRef(se,s),className:K,value:$e,onChange:ye,disabled:T,readOnly:A}))))}),InputNumber$2=reactExports.forwardRef(function(a,s){var c=a.disabled,u=a.style,d=a.prefixCls,h=a.value,p=a.prefix,m=a.suffix,f=a.addonBefore,_=a.addonAfter,y=a.className,E=a.classNames,b=_objectWithoutProperties(a,_excluded2),T=reactExports.useRef(null),A=function(v){T.current&&triggerFocus$1(T.current,v)};return reactExports.createElement(BaseInput,{className:y,triggerFocus:A,prefixCls:d,value:h,disabled:c,style:u,prefix:p,suffix:m,addonAfter:_,addonBefore:f,classNames:E,components:{affixWrapper:"div",groupWrapper:"div",wrapper:"div",groupAddon:"div"}},reactExports.createElement(InternalInputNumber,_extends$2({prefixCls:d,disabled:c,ref:composeRef(T,s),className:E==null?void 0:E.input},b)))});InputNumber$2.displayName="InputNumber";const prepareComponentToken$3=a=>{var s;const c=(s=a.handleVisible)!==null&&s!==void 0?s:"auto";return Object.assign(Object.assign({},initComponentToken(a)),{controlWidth:90,handleWidth:a.controlHeightSM-a.lineWidth*2,handleFontSize:a.fontSize/2,handleVisible:c,handleActiveBg:a.colorFillAlter,handleBg:a.colorBgContainer,filledHandleBg:new TinyColor(a.colorFillSecondary).onBackground(a.colorBgContainer).toHexString(),handleHoverColor:a.colorPrimary,handleBorderColor:a.colorBorder,handleOpacity:c===!0?1:0})},genRadiusStyle=(a,s)=>{let{componentCls:c,borderRadiusSM:u,borderRadiusLG:d}=a;const h=s==="lg"?d:u;return{[`&-${s}`]:{[`${c}-handler-wrap`]:{borderStartEndRadius:h,borderEndEndRadius:h},[`${c}-handler-up`]:{borderStartEndRadius:h},[`${c}-handler-down`]:{borderEndEndRadius:h}}}},genInputNumberStyles=a=>{const{componentCls:s,lineWidth:c,lineType:u,borderRadius:d,fontSizeLG:h,controlHeightLG:p,controlHeightSM:m,colorError:f,paddingInlineSM:_,paddingBlockSM:y,paddingBlockLG:E,paddingInlineLG:b,colorTextDescription:T,motionDurationMid:A,handleHoverColor:v,paddingInline:S,paddingBlock:O,handleBg:I,handleActiveBg:x,colorTextDisabled:P,borderRadiusSM:w,borderRadiusLG:C,controlWidth:k,handleOpacity:R,handleBorderColor:N,filledHandleBg:F,lineHeightLG:L,calc:X}=a;return[{[s]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},resetComponent(a)),genBasicInputStyle(a)),{display:"inline-block",width:k,margin:0,padding:0,borderRadius:d}),genOutlinedStyle(a,{[`${s}-handler-wrap`]:{background:I,[`${s}-handler-down`]:{borderBlockStart:`${unit(c)} ${u} ${N}`}}})),genFilledStyle(a,{[`${s}-handler-wrap`]:{background:F,[`${s}-handler-down`]:{borderBlockStart:`${unit(c)} ${u} ${N}`}},"&:focus-within":{[`${s}-handler-wrap`]:{background:I}}})),genBorderlessStyle$1(a)),{"&-rtl":{direction:"rtl",[`${s}-input`]:{direction:"rtl"}},"&-lg":{padding:0,fontSize:h,lineHeight:L,borderRadius:C,[`input${s}-input`]:{height:X(p).sub(X(c).mul(2)).equal(),padding:`${unit(E)} ${unit(b)}`}},"&-sm":{padding:0,borderRadius:w,[`input${s}-input`]:{height:X(m).sub(X(c).mul(2)).equal(),padding:`${unit(y)} ${unit(_)}`}},"&-out-of-range":{[`${s}-input-wrap`]:{input:{color:f}}},"&-group":Object.assign(Object.assign(Object.assign({},resetComponent(a)),genInputGroupStyle(a)),{"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",textAlign:"start",verticalAlign:"top",[`${s}-affix-wrapper`]:{width:"100%"},"&-lg":{[`${s}-group-addon`]:{borderRadius:C,fontSize:a.fontSizeLG}},"&-sm":{[`${s}-group-addon`]:{borderRadius:w}}},genOutlinedGroupStyle(a)),genFilledGroupStyle(a)),{[`&:not(${s}-compact-first-item):not(${s}-compact-last-item)${s}-compact-item`]:{[`${s}, ${s}-group-addon`]:{borderRadius:0}},[`&:not(${s}-compact-last-item)${s}-compact-first-item`]:{[`${s}, ${s}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${s}-compact-first-item)${s}-compact-last-item`]:{[`${s}, ${s}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})}),[`&-disabled ${s}-input`]:{cursor:"not-allowed"},[s]:{"&-input":Object.assign(Object.assign(Object.assign(Object.assign({},resetComponent(a)),{width:"100%",padding:`${unit(O)} ${unit(S)}`,textAlign:"start",backgroundColor:"transparent",border:0,borderRadius:d,outline:0,transition:`all ${A} linear`,appearance:"textfield",fontSize:"inherit"}),genPlaceholderStyle(a.colorTextPlaceholder)),{'&[type="number"]::-webkit-inner-spin-button, &[type="number"]::-webkit-outer-spin-button':{margin:0,webkitAppearance:"none",appearance:"none"}})}})},{[s]:Object.assign(Object.assign(Object.assign({[`&:hover ${s}-handler-wrap, &-focused ${s}-handler-wrap`]:{opacity:1},[`${s}-handler-wrap`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,width:a.handleWidth,height:"100%",borderStartStartRadius:0,borderStartEndRadius:d,borderEndEndRadius:d,borderEndStartRadius:0,opacity:R,display:"flex",flexDirection:"column",alignItems:"stretch",transition:`opacity ${A} linear ${A}`,[`${s}-handler`]:{display:"flex",alignItems:"center",justifyContent:"center",flex:"auto",height:"40%",[`
              ${s}-handler-up-inner,
              ${s}-handler-down-inner
            `]:{marginInlineEnd:0,fontSize:a.handleFontSize}}},[`${s}-handler`]:{height:"50%",overflow:"hidden",color:T,fontWeight:"bold",lineHeight:0,textAlign:"center",cursor:"pointer",borderInlineStart:`${unit(c)} ${u} ${N}`,transition:`all ${A} linear`,"&:active":{background:x},"&:hover":{height:"60%",[`
              ${s}-handler-up-inner,
              ${s}-handler-down-inner
            `]:{color:v}},"&-up-inner, &-down-inner":Object.assign(Object.assign({},resetIcon()),{color:T,transition:`all ${A} linear`,userSelect:"none"})},[`${s}-handler-up`]:{borderStartEndRadius:d},[`${s}-handler-down`]:{borderEndEndRadius:d}},genRadiusStyle(a,"lg")),genRadiusStyle(a,"sm")),{"&-disabled, &-readonly":{[`${s}-handler-wrap`]:{display:"none"},[`${s}-input`]:{color:"inherit"}},[`
          ${s}-handler-up-disabled,
          ${s}-handler-down-disabled
        `]:{cursor:"not-allowed"},[`
          ${s}-handler-up-disabled:hover &-handler-up-inner,
          ${s}-handler-down-disabled:hover &-handler-down-inner
        `]:{color:P}})}]},genAffixWrapperStyles=a=>{const{componentCls:s,paddingBlock:c,paddingInline:u,inputAffixPadding:d,controlWidth:h,borderRadiusLG:p,borderRadiusSM:m,paddingInlineLG:f,paddingInlineSM:_,paddingBlockLG:y,paddingBlockSM:E}=a;return{[`${s}-affix-wrapper`]:Object.assign(Object.assign({[`input${s}-input`]:{padding:`${unit(c)} 0`}},genBasicInputStyle(a)),{position:"relative",display:"inline-flex",width:h,padding:0,paddingInlineStart:u,"&-lg":{borderRadius:p,paddingInlineStart:f,[`input${s}-input`]:{padding:`${unit(y)} 0`}},"&-sm":{borderRadius:m,paddingInlineStart:_,[`input${s}-input`]:{padding:`${unit(E)} 0`}},[`&:not(${s}-disabled):hover`]:{zIndex:1},"&-focused, &:focus":{zIndex:1},[`&-disabled > ${s}-disabled`]:{background:"transparent"},[`> div${s}`]:{width:"100%",border:"none",outline:"none",[`&${s}-focused`]:{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${s}-handler-wrap`]:{zIndex:2},[s]:{color:"inherit","&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center",pointerEvents:"none"},"&-prefix":{marginInlineEnd:d},"&-suffix":{position:"absolute",insetBlockStart:0,insetInlineEnd:0,zIndex:1,height:"100%",marginInlineEnd:u,marginInlineStart:d}}})}},useStyle$4=genStyleHooks("InputNumber",a=>{const s=merge$1(a,initInputToken(a));return[genInputNumberStyles(s),genAffixWrapperStyles(s),genCompactItemStyle(s)]},prepareComponentToken$3,{unitless:{handleOpacity:!0}});var __rest$f=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};const InputNumber=reactExports.forwardRef((a,s)=>{const{getPrefixCls:c,direction:u}=reactExports.useContext(ConfigContext),d=reactExports.useRef(null);reactExports.useImperativeHandle(s,()=>d.current);const{className:h,rootClassName:p,size:m,disabled:f,prefixCls:_,addonBefore:y,addonAfter:E,prefix:b,bordered:T,readOnly:A,status:v,controls:S,variant:O}=a,I=__rest$f(a,["className","rootClassName","size","disabled","prefixCls","addonBefore","addonAfter","prefix","bordered","readOnly","status","controls","variant"]),x=c("input-number",_),P=useCSSVarCls(x),[w,C,k]=useStyle$4(x,P),{compactSize:R,compactItemClassnames:N}=useCompactItemContext(x,u);let F=reactExports.createElement(UpOutlined$1,{className:`${x}-handler-up-inner`}),L=reactExports.createElement(DownOutlined$1,{className:`${x}-handler-down-inner`});const X=typeof S=="boolean"?S:void 0;typeof S=="object"&&(F=typeof S.upIcon>"u"?F:reactExports.createElement("span",{className:`${x}-handler-up-inner`},S.upIcon),L=typeof S.downIcon>"u"?L:reactExports.createElement("span",{className:`${x}-handler-down-inner`},S.downIcon));const{hasFeedback:V,status:H,isFormItemInput:ee,feedbackIcon:Q}=reactExports.useContext(FormItemInputContext),Z=getMergedStatus(H,v),K=useSize(U=>{var W;return(W=m??R)!==null&&W!==void 0?W:U}),se=reactExports.useContext(DisabledContext),ne=f??se,[le,he]=useVariant(O,T),Y=V&&reactExports.createElement(reactExports.Fragment,null,Q),D=classNames({[`${x}-lg`]:K==="large",[`${x}-sm`]:K==="small",[`${x}-rtl`]:u==="rtl",[`${x}-in-form-item`]:ee},C),G=`${x}-group`,B=reactExports.createElement(InputNumber$2,Object.assign({ref:d,disabled:ne,className:classNames(k,P,h,p,N),upHandler:F,downHandler:L,prefixCls:x,readOnly:A,controls:X,prefix:b,suffix:Y,addonAfter:E&&reactExports.createElement(NoCompactStyle,null,reactExports.createElement(NoFormStyle,{override:!0,status:!0},E)),addonBefore:y&&reactExports.createElement(NoCompactStyle,null,reactExports.createElement(NoFormStyle,{override:!0,status:!0},y)),classNames:{input:D,variant:classNames({[`${x}-${le}`]:he},getStatusClassNames(x,Z,V)),affixWrapper:classNames({[`${x}-affix-wrapper-sm`]:K==="small",[`${x}-affix-wrapper-lg`]:K==="large",[`${x}-affix-wrapper-rtl`]:u==="rtl"},C),wrapper:classNames({[`${G}-rtl`]:u==="rtl"},C),groupWrapper:classNames({[`${x}-group-wrapper-sm`]:K==="small",[`${x}-group-wrapper-lg`]:K==="large",[`${x}-group-wrapper-rtl`]:u==="rtl",[`${x}-group-wrapper-${le}`]:he},getStatusClassNames(`${x}-group-wrapper`,Z,V),C)}},I));return w(B)}),TypedInputNumber=InputNumber,PureInputNumber=a=>reactExports.createElement(ConfigProvider,{theme:{components:{InputNumber:{handleVisible:!0}}}},reactExports.createElement(InputNumber,Object.assign({},a)));TypedInputNumber._InternalPanelDoNotUseOrYouWillBeFired=PureInputNumber;const InputNumber$1=TypedInputNumber,Group=a=>{const{getPrefixCls:s,direction:c}=reactExports.useContext(ConfigContext),{prefixCls:u,className:d}=a,h=s("input-group",u),p=s("input"),[m,f]=useStyle$8(p),_=classNames(h,{[`${h}-lg`]:a.size==="large",[`${h}-sm`]:a.size==="small",[`${h}-compact`]:a.compact,[`${h}-rtl`]:c==="rtl"},f,d),y=reactExports.useContext(FormItemInputContext),E=reactExports.useMemo(()=>Object.assign(Object.assign({},y),{isFormItemInput:!1}),[y]);return m(reactExports.createElement("span",{className:_,style:a.style,onMouseEnter:a.onMouseEnter,onMouseLeave:a.onMouseLeave,onFocus:a.onFocus,onBlur:a.onBlur},reactExports.createElement(FormItemInputContext.Provider,{value:E},a.children)))},Group$1=Group,getAllowClear=a=>{let s;return typeof a=="object"&&(a!=null&&a.clearIcon)?s=a:a&&(s={clearIcon:React.createElement(CloseCircleFilled$1,null)}),s},getAllowClear$1=getAllowClear;function useRemovePasswordTimeout(a,s){const c=reactExports.useRef([]),u=()=>{c.current.push(setTimeout(()=>{var d,h,p,m;!((d=a.current)===null||d===void 0)&&d.input&&((h=a.current)===null||h===void 0?void 0:h.input.getAttribute("type"))==="password"&&!((p=a.current)===null||p===void 0)&&p.input.hasAttribute("value")&&((m=a.current)===null||m===void 0||m.input.removeAttribute("value"))}))};return reactExports.useEffect(()=>(s&&u(),()=>c.current.forEach(d=>{d&&clearTimeout(d)})),[]),u}function hasPrefixSuffix(a){return!!(a.prefix||a.suffix||a.allowClear||a.showCount)}var __rest$e=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};function triggerFocus(a,s){if(!a)return;a.focus(s);const{cursor:c}=s||{};if(c){const u=a.value.length;switch(c){case"start":a.setSelectionRange(0,0);break;case"end":a.setSelectionRange(u,u);break;default:a.setSelectionRange(0,u);break}}}const Input$2=reactExports.forwardRef((a,s)=>{var c;const{prefixCls:u,bordered:d=!0,status:h,size:p,disabled:m,onBlur:f,onFocus:_,suffix:y,allowClear:E,addonAfter:b,addonBefore:T,className:A,style:v,styles:S,rootClassName:O,onChange:I,classNames:x,variant:P}=a,w=__rest$e(a,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:C,direction:k,input:R}=React.useContext(ConfigContext),N=C("input",u),F=reactExports.useRef(null),L=useCSSVarCls(N),[X,V,H]=useStyle$8(N,L),{compactSize:ee,compactItemClassnames:Q}=useCompactItemContext(N,k),Z=useSize(ie=>{var ue;return(ue=p??ee)!==null&&ue!==void 0?ue:ie}),K=React.useContext(DisabledContext),se=m??K,{status:ne,hasFeedback:le,feedbackIcon:he}=reactExports.useContext(FormItemInputContext),Y=getMergedStatus(ne,h),D=hasPrefixSuffix(a)||!!le;reactExports.useRef(D);const G=useRemovePasswordTimeout(F,!0),B=ie=>{G(),f==null||f(ie)},U=ie=>{G(),_==null||_(ie)},W=ie=>{G(),I==null||I(ie)},q=(le||y)&&React.createElement(React.Fragment,null,y,le&&he),J=getAllowClear$1(E??(R==null?void 0:R.allowClear)),[ae,ce]=useVariant(P,d);return X(React.createElement(Input$3,Object.assign({ref:composeRef(s,F),prefixCls:N,autoComplete:R==null?void 0:R.autoComplete},w,{disabled:se,onBlur:B,onFocus:U,style:Object.assign(Object.assign({},R==null?void 0:R.style),v),styles:Object.assign(Object.assign({},R==null?void 0:R.styles),S),suffix:q,allowClear:J,className:classNames(A,O,H,L,Q,R==null?void 0:R.className),onChange:W,addonAfter:b&&React.createElement(NoCompactStyle,null,React.createElement(NoFormStyle,{override:!0,status:!0},b)),addonBefore:T&&React.createElement(NoCompactStyle,null,React.createElement(NoFormStyle,{override:!0,status:!0},T)),classNames:Object.assign(Object.assign(Object.assign({},x),R==null?void 0:R.classNames),{input:classNames({[`${N}-sm`]:Z==="small",[`${N}-lg`]:Z==="large",[`${N}-rtl`]:k==="rtl"},x==null?void 0:x.input,(c=R==null?void 0:R.classNames)===null||c===void 0?void 0:c.input,V),variant:classNames({[`${N}-${ae}`]:ce},getStatusClassNames(N,Y)),affixWrapper:classNames({[`${N}-affix-wrapper-sm`]:Z==="small",[`${N}-affix-wrapper-lg`]:Z==="large",[`${N}-affix-wrapper-rtl`]:k==="rtl"},V),wrapper:classNames({[`${N}-group-rtl`]:k==="rtl"},V),groupWrapper:classNames({[`${N}-group-wrapper-sm`]:Z==="small",[`${N}-group-wrapper-lg`]:Z==="large",[`${N}-group-wrapper-rtl`]:k==="rtl",[`${N}-group-wrapper-${ae}`]:ce},getStatusClassNames(`${N}-group-wrapper`,Y,le),V)})})))}),InternalInput=Input$2,genOTPStyle=a=>{const{componentCls:s,paddingXS:c}=a;return{[`${s}`]:{display:"inline-flex",alignItems:"center",flexWrap:"nowrap",columnGap:c,"&-rtl":{direction:"rtl"},[`${s}-input`]:{textAlign:"center",paddingInline:a.paddingXXS},[`&${s}-sm ${s}-input`]:{paddingInline:a.calc(a.paddingXXS).div(2).equal()},[`&${s}-lg ${s}-input`]:{paddingInline:a.paddingXS}}}},useStyle$3=genStyleHooks(["Input","OTP"],a=>{const s=merge$1(a,initInputToken(a));return[genOTPStyle(s)]},initComponentToken);var __rest$d=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};const OTPInput=reactExports.forwardRef((a,s)=>{const{value:c,onChange:u,onActiveChange:d,index:h}=a,p=__rest$d(a,["value","onChange","onActiveChange","index"]),m=b=>{u(h,b.target.value)},f=reactExports.useRef(null);reactExports.useImperativeHandle(s,()=>f.current);const _=()=>{wrapperRaf(()=>{var b;const T=(b=f.current)===null||b===void 0?void 0:b.input;document.activeElement===T&&T&&T.select()})},y=b=>{let{key:T}=b;T==="ArrowLeft"?d(h-1):T==="ArrowRight"&&d(h+1),_()},E=b=>{b.key==="Backspace"&&!c&&d(h-1),_()};return reactExports.createElement(InternalInput,Object.assign({},p,{ref:f,value:c,onInput:m,onFocus:_,onKeyDown:y,onKeyUp:E,onMouseDown:_,onMouseUp:_}))}),OTPInput$1=OTPInput;var __rest$c=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};function strToArr(a){return a.split("")}const OTP=reactExports.forwardRef((a,s)=>{const{prefixCls:c,length:u=6,size:d,defaultValue:h,value:p,onChange:m,formatter:f,variant:_,disabled:y,status:E,autoFocus:b}=a,T=__rest$c(a,["prefixCls","length","size","defaultValue","value","onChange","formatter","variant","disabled","status","autoFocus"]),{getPrefixCls:A,direction:v}=reactExports.useContext(ConfigContext),S=A("otp",c),O=pickAttrs(T,{aria:!0,data:!0,attr:!0}),I=useCSSVarCls(S),[x,P,w]=useStyle$3(S,I),C=useSize(ne=>d??ne),k=reactExports.useContext(FormItemInputContext),R=getMergedStatus(k.status,E),N=reactExports.useMemo(()=>Object.assign(Object.assign({},k),{status:R,hasFeedback:!1,feedbackIcon:null}),[k,R]),F=reactExports.useRef(null),L=reactExports.useRef({});reactExports.useImperativeHandle(s,()=>({focus:()=>{var ne;(ne=L.current[0])===null||ne===void 0||ne.focus()},blur:()=>{var ne;for(let le=0;le<u;le+=1)(ne=L.current[le])===null||ne===void 0||ne.blur()},nativeElement:F.current}));const X=ne=>f?f(ne):ne,[V,H]=reactExports.useState(strToArr(X(h||"")));reactExports.useEffect(()=>{p&&H(strToArr(p))},[p]);const ee=useEvent(ne=>{H(ne),m&&ne.length===u&&ne.every(le=>le)&&ne.some((le,he)=>V[he]!==le)&&m(ne.join(""))}),Q=useEvent((ne,le)=>{let he=_toConsumableArray(V);for(let D=0;D<ne;D+=1)he[D]||(he[D]="");le.length<=1?he[ne]=le:he=he.slice(0,ne).concat(strToArr(le)),he=he.slice(0,u);for(let D=he.length-1;D>=0&&!he[D];D-=1)he.pop();const Y=X(he.map(D=>D||" ").join(""));return he=strToArr(Y).map((D,G)=>D===" "&&!he[G]?he[G]:D),he}),Z=(ne,le)=>{var he;const Y=Q(ne,le),D=Math.min(ne+le.length,u-1);D!==ne&&((he=L.current[D])===null||he===void 0||he.focus()),ee(Y)},K=ne=>{var le;(le=L.current[ne])===null||le===void 0||le.focus()},se={variant:_,disabled:y,status:R};return x(reactExports.createElement("div",Object.assign({},O,{ref:F,className:classNames(S,{[`${S}-sm`]:C==="small",[`${S}-lg`]:C==="large",[`${S}-rtl`]:v==="rtl"},w,P)}),reactExports.createElement(FormItemInputContext.Provider,{value:N},new Array(u).fill(0).map((ne,le)=>{const he=`otp-${le}`,Y=V[le]||"";return reactExports.createElement(OTPInput$1,Object.assign({ref:D=>{L.current[le]=D},key:he,index:le,size:C,htmlSize:1,className:`${S}-input`,onChange:Z,value:Y,onActiveChange:K,autoFocus:le===0&&b},se))}))))}),OTP$1=OTP;var EyeInvisibleOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};const EyeInvisibleOutlinedSvg=EyeInvisibleOutlined$2;var EyeInvisibleOutlined=function(a,s){return reactExports.createElement(AntdIcon,_extends$2({},a,{ref:s,icon:EyeInvisibleOutlinedSvg}))},RefIcon$2=reactExports.forwardRef(EyeInvisibleOutlined);const EyeInvisibleOutlined$1=RefIcon$2;var EyeOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};const EyeOutlinedSvg=EyeOutlined$2;var EyeOutlined=function(a,s){return reactExports.createElement(AntdIcon,_extends$2({},a,{ref:s,icon:EyeOutlinedSvg}))},RefIcon$1=reactExports.forwardRef(EyeOutlined);const EyeOutlined$1=RefIcon$1;var __rest$b=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};const defaultIconRender=a=>a?reactExports.createElement(EyeOutlined$1,null):reactExports.createElement(EyeInvisibleOutlined$1,null),actionMap={click:"onClick",hover:"onMouseOver"},Password=reactExports.forwardRef((a,s)=>{const{visibilityToggle:c=!0}=a,u=typeof c=="object"&&c.visible!==void 0,[d,h]=reactExports.useState(()=>u?c.visible:!1),p=reactExports.useRef(null);reactExports.useEffect(()=>{u&&h(c.visible)},[u,c]);const m=useRemovePasswordTimeout(p),f=()=>{const{disabled:w}=a;w||(d&&m(),h(C=>{var k;const R=!C;return typeof c=="object"&&((k=c.onVisibleChange)===null||k===void 0||k.call(c,R)),R}))},_=w=>{const{action:C="click",iconRender:k=defaultIconRender}=a,R=actionMap[C]||"",N=k(d),F={[R]:f,className:`${w}-icon`,key:"passwordIcon",onMouseDown:L=>{L.preventDefault()},onMouseUp:L=>{L.preventDefault()}};return reactExports.cloneElement(reactExports.isValidElement(N)?N:reactExports.createElement("span",null,N),F)},{className:y,prefixCls:E,inputPrefixCls:b,size:T}=a,A=__rest$b(a,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:v}=reactExports.useContext(ConfigContext),S=v("input",b),O=v("input-password",E),I=c&&_(O),x=classNames(O,y,{[`${O}-${T}`]:!!T}),P=Object.assign(Object.assign({},omit(A,["suffix","iconRender","visibilityToggle"])),{type:d?"text":"password",className:x,prefixCls:S,suffix:I});return T&&(P.size=T),reactExports.createElement(InternalInput,Object.assign({ref:composeRef(s,p)},P))}),Password$1=Password;var __rest$a=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};const Search=reactExports.forwardRef((a,s)=>{const{prefixCls:c,inputPrefixCls:u,className:d,size:h,suffix:p,enterButton:m=!1,addonAfter:f,loading:_,disabled:y,onSearch:E,onChange:b,onCompositionStart:T,onCompositionEnd:A}=a,v=__rest$a(a,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:S,direction:O}=reactExports.useContext(ConfigContext),I=reactExports.useRef(!1),x=S("input-search",c),P=S("input",u),{compactSize:w}=useCompactItemContext(x,O),C=useSize(ne=>{var le;return(le=h??w)!==null&&le!==void 0?le:ne}),k=reactExports.useRef(null),R=ne=>{ne&&ne.target&&ne.type==="click"&&E&&E(ne.target.value,ne,{source:"clear"}),b&&b(ne)},N=ne=>{var le;document.activeElement===((le=k.current)===null||le===void 0?void 0:le.input)&&ne.preventDefault()},F=ne=>{var le,he;E&&E((he=(le=k.current)===null||le===void 0?void 0:le.input)===null||he===void 0?void 0:he.value,ne,{source:"input"})},L=ne=>{I.current||_||F(ne)},X=typeof m=="boolean"?reactExports.createElement(SearchOutlined$1,null):null,V=`${x}-button`;let H;const ee=m||{},Q=ee.type&&ee.type.__ANT_BUTTON===!0;Q||ee.type==="button"?H=cloneElement(ee,Object.assign({onMouseDown:N,onClick:ne=>{var le,he;(he=(le=ee==null?void 0:ee.props)===null||le===void 0?void 0:le.onClick)===null||he===void 0||he.call(le,ne),F(ne)},key:"enterButton"},Q?{className:V,size:C}:{})):H=reactExports.createElement(Button$1,{className:V,type:m?"primary":void 0,size:C,disabled:y,key:"enterButton",onMouseDown:N,onClick:F,loading:_,icon:X},m),f&&(H=[H,cloneElement(f,{key:"addonAfter"})]);const Z=classNames(x,{[`${x}-rtl`]:O==="rtl",[`${x}-${C}`]:!!C,[`${x}-with-button`]:!!m},d),K=ne=>{I.current=!0,T==null||T(ne)},se=ne=>{I.current=!1,A==null||A(ne)};return reactExports.createElement(InternalInput,Object.assign({ref:composeRef(k,s),onPressEnter:L},v,{size:C,onCompositionStart:K,onCompositionEnd:se,prefixCls:P,addonAfter:H,suffix:p,onChange:R,className:Z,disabled:y}))}),Search$1=Search;var HIDDEN_TEXTAREA_STYLE=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,SIZING_STYLE=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],computedStyleCache={},hiddenTextarea;function calculateNodeStyling(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=a.getAttribute("id")||a.getAttribute("data-reactid")||a.getAttribute("name");if(s&&computedStyleCache[c])return computedStyleCache[c];var u=window.getComputedStyle(a),d=u.getPropertyValue("box-sizing")||u.getPropertyValue("-moz-box-sizing")||u.getPropertyValue("-webkit-box-sizing"),h=parseFloat(u.getPropertyValue("padding-bottom"))+parseFloat(u.getPropertyValue("padding-top")),p=parseFloat(u.getPropertyValue("border-bottom-width"))+parseFloat(u.getPropertyValue("border-top-width")),m=SIZING_STYLE.map(function(_){return"".concat(_,":").concat(u.getPropertyValue(_))}).join(";"),f={sizingStyle:m,paddingSize:h,borderSize:p,boxSizing:d};return s&&c&&(computedStyleCache[c]=f),f}function calculateAutoSizeStyle(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;hiddenTextarea||(hiddenTextarea=document.createElement("textarea"),hiddenTextarea.setAttribute("tab-index","-1"),hiddenTextarea.setAttribute("aria-hidden","true"),document.body.appendChild(hiddenTextarea)),a.getAttribute("wrap")?hiddenTextarea.setAttribute("wrap",a.getAttribute("wrap")):hiddenTextarea.removeAttribute("wrap");var d=calculateNodeStyling(a,s),h=d.paddingSize,p=d.borderSize,m=d.boxSizing,f=d.sizingStyle;hiddenTextarea.setAttribute("style","".concat(f,";").concat(HIDDEN_TEXTAREA_STYLE)),hiddenTextarea.value=a.value||a.placeholder||"";var _=void 0,y=void 0,E,b=hiddenTextarea.scrollHeight;if(m==="border-box"?b+=p:m==="content-box"&&(b-=h),c!==null||u!==null){hiddenTextarea.value=" ";var T=hiddenTextarea.scrollHeight-h;c!==null&&(_=T*c,m==="border-box"&&(_=_+h+p),b=Math.max(_,b)),u!==null&&(y=T*u,m==="border-box"&&(y=y+h+p),E=b>y?"":"hidden",b=Math.min(y,b))}var A={height:b,overflowY:E,resize:"none"};return _&&(A.minHeight=_),y&&(A.maxHeight=y),A}var _excluded$2=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],RESIZE_START=0,RESIZE_MEASURING=1,RESIZE_STABLE=2,ResizableTextArea=reactExports.forwardRef(function(a,s){var c=a,u=c.prefixCls;c.onPressEnter;var d=c.defaultValue,h=c.value,p=c.autoSize,m=c.onResize,f=c.className,_=c.style,y=c.disabled,E=c.onChange;c.onInternalAutoSize;var b=_objectWithoutProperties(c,_excluded$2),T=useMergedState(d,{value:h,postState:function(Y){return Y??""}}),A=_slicedToArray(T,2),v=A[0],S=A[1],O=function(Y){S(Y.target.value),E==null||E(Y)},I=reactExports.useRef();reactExports.useImperativeHandle(s,function(){return{textArea:I.current}});var x=reactExports.useMemo(function(){return p&&_typeof(p)==="object"?[p.minRows,p.maxRows]:[]},[p]),P=_slicedToArray(x,2),w=P[0],C=P[1],k=!!p,R=function(){try{if(document.activeElement===I.current){var Y=I.current,D=Y.selectionStart,G=Y.selectionEnd,B=Y.scrollTop;I.current.setSelectionRange(D,G),I.current.scrollTop=B}}catch{}},N=reactExports.useState(RESIZE_STABLE),F=_slicedToArray(N,2),L=F[0],X=F[1],V=reactExports.useState(),H=_slicedToArray(V,2),ee=H[0],Q=H[1],Z=function(){X(RESIZE_START)};useLayoutEffect$1(function(){k&&Z()},[h,w,C,k]),useLayoutEffect$1(function(){if(L===RESIZE_START)X(RESIZE_MEASURING);else if(L===RESIZE_MEASURING){var Y=calculateAutoSizeStyle(I.current,!1,w,C);X(RESIZE_STABLE),Q(Y)}else R()},[L]);var K=reactExports.useRef(),se=function(){wrapperRaf.cancel(K.current)},ne=function(Y){L===RESIZE_STABLE&&(m==null||m(Y),p&&(se(),K.current=wrapperRaf(function(){Z()})))};reactExports.useEffect(function(){return se},[]);var le=k?ee:null,he=_objectSpread2(_objectSpread2({},_),le);return(L===RESIZE_START||L===RESIZE_MEASURING)&&(he.overflowY="hidden",he.overflowX="hidden"),reactExports.createElement(RefResizeObserver,{onResize:ne,disabled:!(p||m)},reactExports.createElement("textarea",_extends$2({},b,{ref:I,style:he,className:classNames(u,f,_defineProperty({},"".concat(u,"-disabled"),y)),disabled:y,value:v,onChange:O})))}),_excluded$1=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize"],TextArea$2=React.forwardRef(function(a,s){var c,u,d=a.defaultValue,h=a.value,p=a.onFocus,m=a.onBlur,f=a.onChange,_=a.allowClear,y=a.maxLength,E=a.onCompositionStart,b=a.onCompositionEnd,T=a.suffix,A=a.prefixCls,v=A===void 0?"rc-textarea":A,S=a.showCount,O=a.count,I=a.className,x=a.style,P=a.disabled,w=a.hidden,C=a.classNames,k=a.styles,R=a.onResize,N=_objectWithoutProperties(a,_excluded$1),F=useMergedState(d,{value:h,defaultValue:d}),L=_slicedToArray(F,2),X=L[0],V=L[1],H=X==null?"":String(X),ee=React.useState(!1),Q=_slicedToArray(ee,2),Z=Q[0],K=Q[1],se=React.useRef(!1),ne=React.useState(null),le=_slicedToArray(ne,2),he=le[0],Y=le[1],D=reactExports.useRef(null),G=function(){var Ze;return(Ze=D.current)===null||Ze===void 0?void 0:Ze.textArea},B=function(){G().focus()};reactExports.useImperativeHandle(s,function(){return{resizableTextArea:D.current,focus:B,blur:function(){G().blur()}}}),reactExports.useEffect(function(){K(function(Ze){return!P&&Ze})},[P]);var U=React.useState(null),W=_slicedToArray(U,2),q=W[0],J=W[1];React.useEffect(function(){if(q){var Ze;(Ze=G()).setSelectionRange.apply(Ze,_toConsumableArray(q))}},[q]);var ae=useCount(O,S),ce=(c=ae.max)!==null&&c!==void 0?c:y,ie=Number(ce)>0,ue=ae.strategy(H),Ee=!!ce&&ue>ce,xe=function(Ze,Qe){var Je=Qe;!se.current&&ae.exceedFormatter&&ae.max&&ae.strategy(Qe)>ae.max&&(Je=ae.exceedFormatter(Qe,{max:ae.max}),Qe!==Je&&J([G().selectionStart||0,G().selectionEnd||0])),V(Je),resolveOnChange(Ze.currentTarget,Ze,f,Je)},ve=function(Ze){se.current=!0,E==null||E(Ze)},$e=function(Ze){se.current=!1,xe(Ze,Ze.currentTarget.value),b==null||b(Ze)},_e=function(Ze){xe(Ze,Ze.target.value)},Be=function(Ze){var Qe=N.onPressEnter,Je=N.onKeyDown;Ze.key==="Enter"&&Qe&&Qe(Ze),Je==null||Je(Ze)},ze=function(Ze){K(!0),p==null||p(Ze)},Se=function(Ze){K(!1),m==null||m(Ze)},pe=function(Ze){V(""),B(),resolveOnChange(G(),Ze,f)},me=T,Oe;ae.show&&(ae.showFormatter?Oe=ae.showFormatter({value:H,count:ue,maxLength:ce}):Oe="".concat(ue).concat(ie?" / ".concat(ce):""),me=React.createElement(React.Fragment,null,me,React.createElement("span",{className:classNames("".concat(v,"-data-count"),C==null?void 0:C.count),style:k==null?void 0:k.count},Oe)));var Le=function(Ze){var Qe;R==null||R(Ze),(Qe=G())!==null&&Qe!==void 0&&Qe.style.height&&Y(!0)},We=!N.autoSize&&!S&&!_;return React.createElement(BaseInput,{value:H,allowClear:_,handleReset:pe,suffix:me,prefixCls:v,classNames:_objectSpread2(_objectSpread2({},C),{},{affixWrapper:classNames(C==null?void 0:C.affixWrapper,(u={},_defineProperty(u,"".concat(v,"-show-count"),S),_defineProperty(u,"".concat(v,"-textarea-allow-clear"),_),u))}),disabled:P,focused:Z,className:classNames(I,Ee&&"".concat(v,"-out-of-range")),style:_objectSpread2(_objectSpread2({},x),he&&!We?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof Oe=="string"?Oe:void 0}},hidden:w},React.createElement(ResizableTextArea,_extends$2({},N,{maxLength:y,onKeyDown:Be,onChange:_e,onFocus:ze,onBlur:Se,onCompositionStart:ve,onCompositionEnd:$e,className:classNames(C==null?void 0:C.textarea),style:_objectSpread2(_objectSpread2({},k==null?void 0:k.textarea),{},{resize:x==null?void 0:x.resize}),disabled:P,prefixCls:v,onResize:Le,ref:D})))}),__rest$9=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};const TextArea=reactExports.forwardRef((a,s)=>{var c,u;const{prefixCls:d,bordered:h=!0,size:p,disabled:m,status:f,allowClear:_,classNames:y,rootClassName:E,className:b,style:T,styles:A,variant:v}=a,S=__rest$9(a,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant"]),{getPrefixCls:O,direction:I,textArea:x}=reactExports.useContext(ConfigContext),P=useSize(p),w=reactExports.useContext(DisabledContext),C=m??w,{status:k,hasFeedback:R,feedbackIcon:N}=reactExports.useContext(FormItemInputContext),F=getMergedStatus(k,f),L=reactExports.useRef(null);reactExports.useImperativeHandle(s,()=>{var ne;return{resizableTextArea:(ne=L.current)===null||ne===void 0?void 0:ne.resizableTextArea,focus:le=>{var he,Y;triggerFocus((Y=(he=L.current)===null||he===void 0?void 0:he.resizableTextArea)===null||Y===void 0?void 0:Y.textArea,le)},blur:()=>{var le;return(le=L.current)===null||le===void 0?void 0:le.blur()}}});const X=O("input",d),V=useCSSVarCls(X),[H,ee,Q]=useStyle$8(X,V),[Z,K]=useVariant(v,h),se=getAllowClear$1(_??(x==null?void 0:x.allowClear));return H(reactExports.createElement(TextArea$2,Object.assign({autoComplete:x==null?void 0:x.autoComplete},S,{style:Object.assign(Object.assign({},x==null?void 0:x.style),T),styles:Object.assign(Object.assign({},x==null?void 0:x.styles),A),disabled:C,allowClear:se,className:classNames(Q,V,b,E,x==null?void 0:x.className),classNames:Object.assign(Object.assign(Object.assign({},y),x==null?void 0:x.classNames),{textarea:classNames({[`${X}-sm`]:P==="small",[`${X}-lg`]:P==="large"},ee,y==null?void 0:y.textarea,(c=x==null?void 0:x.classNames)===null||c===void 0?void 0:c.textarea),variant:classNames({[`${X}-${Z}`]:K},getStatusClassNames(X,F)),affixWrapper:classNames(`${X}-textarea-affix-wrapper`,{[`${X}-affix-wrapper-rtl`]:I==="rtl",[`${X}-affix-wrapper-sm`]:P==="small",[`${X}-affix-wrapper-lg`]:P==="large",[`${X}-textarea-show-count`]:a.showCount||((u=a.count)===null||u===void 0?void 0:u.show)},ee)}),prefixCls:X,suffix:R&&reactExports.createElement("span",{className:`${X}-textarea-suffix`},N),ref:L})))}),TextArea$1=TextArea,Input=InternalInput;Input.Group=Group$1,Input.Search=Search$1,Input.TextArea=TextArea$1,Input.Password=Password$1,Input.OTP=OTP$1;const Input$1=Input;function isPresetSize(a){return["small","middle","large"].includes(a)}function isValidGapNumber(a){return a?typeof a=="number"&&!Number.isNaN(a):!1}const SpaceContext=React.createContext({latestIndex:0}),SpaceContextProvider=SpaceContext.Provider,Item$1=a=>{let{className:s,index:c,children:u,split:d,style:h}=a;const{latestIndex:p}=reactExports.useContext(SpaceContext);return u==null?null:reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("div",{className:s,style:h},u),c<p&&d&&reactExports.createElement("span",{className:`${s}-split`},d))},Item$2=Item$1;var __rest$8=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};const Space=reactExports.forwardRef((a,s)=>{var c,u;const{getPrefixCls:d,space:h,direction:p}=reactExports.useContext(ConfigContext),{size:m=(h==null?void 0:h.size)||"small",align:f,className:_,rootClassName:y,children:E,direction:b="horizontal",prefixCls:T,split:A,style:v,wrap:S=!1,classNames:O,styles:I}=a,x=__rest$8(a,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[P,w]=Array.isArray(m)?m:[m,m],C=isPresetSize(w),k=isPresetSize(P),R=isValidGapNumber(w),N=isValidGapNumber(P),F=toArray$6(E,{keepEmpty:!0}),L=f===void 0&&b==="horizontal"?"center":f,X=d("space",T),[V,H,ee]=useStyle$c(X),Q=classNames(X,h==null?void 0:h.className,H,`${X}-${b}`,{[`${X}-rtl`]:p==="rtl",[`${X}-align-${L}`]:L,[`${X}-gap-row-${w}`]:C,[`${X}-gap-col-${P}`]:k},_,y,ee),Z=classNames(`${X}-item`,(c=O==null?void 0:O.item)!==null&&c!==void 0?c:(u=h==null?void 0:h.classNames)===null||u===void 0?void 0:u.item);let K=0;const se=F.map((he,Y)=>{var D,G;he!=null&&(K=Y);const B=he&&he.key||`${Z}-${Y}`;return reactExports.createElement(Item$2,{className:Z,key:B,index:Y,split:A,style:(D=I==null?void 0:I.item)!==null&&D!==void 0?D:(G=h==null?void 0:h.styles)===null||G===void 0?void 0:G.item},he)}),ne=reactExports.useMemo(()=>({latestIndex:K}),[K]);if(F.length===0)return null;const le={};return S&&(le.flexWrap="wrap"),!k&&N&&(le.columnGap=P),!C&&R&&(le.rowGap=w),V(reactExports.createElement("div",Object.assign({ref:s,className:Q,style:Object.assign(Object.assign(Object.assign({},le),h==null?void 0:h.style),v)},x),reactExports.createElement(SpaceContextProvider,{value:ne},se)))}),CompoundedSpace=Space;CompoundedSpace.Compact=Compact;const Space$1=CompoundedSpace;function useDebounce(a){const[s,c]=reactExports.useState(a);return reactExports.useEffect(()=>{const u=setTimeout(()=>{c(a)},a.length?0:10);return()=>{clearTimeout(u)}},[a]),s}const genFormValidateMotionStyle=a=>{const{componentCls:s}=a,c=`${s}-show-help`,u=`${s}-show-help-item`;return{[c]:{transition:`opacity ${a.motionDurationSlow} ${a.motionEaseInOut}`,"&-appear, &-enter":{opacity:0,"&-active":{opacity:1}},"&-leave":{opacity:1,"&-active":{opacity:0}},[u]:{overflow:"hidden",transition:`height ${a.motionDurationSlow} ${a.motionEaseInOut},
                     opacity ${a.motionDurationSlow} ${a.motionEaseInOut},
                     transform ${a.motionDurationSlow} ${a.motionEaseInOut} !important`,[`&${u}-appear, &${u}-enter`]:{transform:"translateY(-5px)",opacity:0,"&-active":{transform:"translateY(0)",opacity:1}},[`&${u}-leave-active`]:{transform:"translateY(-5px)"}}}}},genFormValidateMotionStyle$1=genFormValidateMotionStyle,resetForm=a=>({legend:{display:"block",width:"100%",marginBottom:a.marginLG,padding:0,color:a.colorTextDescription,fontSize:a.fontSizeLG,lineHeight:"inherit",border:0,borderBottom:`${unit(a.lineWidth)} ${a.lineType} ${a.colorBorder}`},'input[type="search"]':{boxSizing:"border-box"},'input[type="radio"], input[type="checkbox"]':{lineHeight:"normal"},'input[type="file"]':{display:"block"},'input[type="range"]':{display:"block",width:"100%"},"select[multiple], select[size]":{height:"auto"},"input[type='file']:focus,\n  input[type='radio']:focus,\n  input[type='checkbox']:focus":{outline:0,boxShadow:`0 0 0 ${unit(a.controlOutlineWidth)} ${a.controlOutline}`},output:{display:"block",paddingTop:15,color:a.colorText,fontSize:a.fontSize,lineHeight:a.lineHeight}}),genFormSize=(a,s)=>{const{formItemCls:c}=a;return{[c]:{[`${c}-label > label`]:{height:s},[`${c}-control-input`]:{minHeight:s}}}},genFormStyle=a=>{const{componentCls:s}=a;return{[a.componentCls]:Object.assign(Object.assign(Object.assign({},resetComponent(a)),resetForm(a)),{[`${s}-text`]:{display:"inline-block",paddingInlineEnd:a.paddingSM},"&-small":Object.assign({},genFormSize(a,a.controlHeightSM)),"&-large":Object.assign({},genFormSize(a,a.controlHeightLG))})}},genFormItemStyle=a=>{const{formItemCls:s,iconCls:c,componentCls:u,rootPrefixCls:d,labelRequiredMarkColor:h,labelColor:p,labelFontSize:m,labelHeight:f,labelColonMarginInlineStart:_,labelColonMarginInlineEnd:y,itemMarginBottom:E}=a;return{[s]:Object.assign(Object.assign({},resetComponent(a)),{marginBottom:E,verticalAlign:"top","&-with-help":{transition:"none"},[`&-hidden,
        &-hidden.${d}-row`]:{display:"none"},"&-has-warning":{[`${s}-split`]:{color:a.colorError}},"&-has-error":{[`${s}-split`]:{color:a.colorWarning}},[`${s}-label`]:{flexGrow:0,overflow:"hidden",whiteSpace:"nowrap",textAlign:"end",verticalAlign:"middle","&-left":{textAlign:"start"},"&-wrap":{overflow:"unset",lineHeight:a.lineHeight,whiteSpace:"unset"},"> label":{position:"relative",display:"inline-flex",alignItems:"center",maxWidth:"100%",height:f,color:p,fontSize:m,[`> ${c}`]:{fontSize:a.fontSize,verticalAlign:"top"},[`&${s}-required:not(${s}-required-mark-optional)::before`]:{display:"inline-block",marginInlineEnd:a.marginXXS,color:h,fontSize:a.fontSize,fontFamily:"SimSun, sans-serif",lineHeight:1,content:'"*"',[`${u}-hide-required-mark &`]:{display:"none"}},[`${s}-optional`]:{display:"inline-block",marginInlineStart:a.marginXXS,color:a.colorTextDescription,[`${u}-hide-required-mark &`]:{display:"none"}},[`${s}-tooltip`]:{color:a.colorTextDescription,cursor:"help",writingMode:"horizontal-tb",marginInlineStart:a.marginXXS},"&::after":{content:'":"',position:"relative",marginBlock:0,marginInlineStart:_,marginInlineEnd:y},[`&${s}-no-colon::after`]:{content:'"\\a0"'}}},[`${s}-control`]:{"--ant-display":"flex",flexDirection:"column",flexGrow:1,[`&:first-child:not([class^="'${d}-col-'"]):not([class*="' ${d}-col-'"])`]:{width:"100%"},"&-input":{position:"relative",display:"flex",alignItems:"center",minHeight:a.controlHeight,"&-content":{flex:"auto",maxWidth:"100%"}}},[s]:{"&-explain, &-extra":{clear:"both",color:a.colorTextDescription,fontSize:a.fontSize,lineHeight:a.lineHeight},"&-explain-connected":{width:"100%"},"&-extra":{minHeight:a.controlHeightSM,transition:`color ${a.motionDurationMid} ${a.motionEaseOut}`},"&-explain":{"&-error":{color:a.colorError},"&-warning":{color:a.colorWarning}}},[`&-with-help ${s}-explain`]:{height:"auto",opacity:1},[`${s}-feedback-icon`]:{fontSize:a.fontSize,textAlign:"center",visibility:"visible",animationName:zoomIn,animationDuration:a.motionDurationMid,animationTimingFunction:a.motionEaseOutBack,pointerEvents:"none","&-success":{color:a.colorSuccess},"&-error":{color:a.colorError},"&-warning":{color:a.colorWarning},"&-validating":{color:a.colorPrimary}}})}},genHorizontalStyle=a=>{const{componentCls:s,formItemCls:c}=a;return{[`${s}-horizontal`]:{[`${c}-label`]:{flexGrow:0},[`${c}-control`]:{flex:"1 1 0",minWidth:0},[`${c}-label[class$='-24'], ${c}-label[class*='-24 ']`]:{[`& + ${c}-control`]:{minWidth:"unset"}}}}},genInlineStyle=a=>{const{componentCls:s,formItemCls:c}=a;return{[`${s}-inline`]:{display:"flex",flexWrap:"wrap",[c]:{flex:"none",marginInlineEnd:a.margin,marginBottom:0,"&-row":{flexWrap:"nowrap"},[`> ${c}-label,
        > ${c}-control`]:{display:"inline-block",verticalAlign:"top"},[`> ${c}-label`]:{flex:"none"},[`${s}-text`]:{display:"inline-block"},[`${c}-has-feedback`]:{display:"inline-block"}}}}},makeVerticalLayoutLabel=a=>({padding:a.verticalLabelPadding,margin:a.verticalLabelMargin,whiteSpace:"initial",textAlign:"start","> label":{margin:0,"&::after":{visibility:"hidden"}}}),makeVerticalLayout=a=>{const{componentCls:s,formItemCls:c,rootPrefixCls:u}=a;return{[`${c} ${c}-label`]:makeVerticalLayoutLabel(a),[`${s}:not(${s}-inline)`]:{[c]:{flexWrap:"wrap",[`${c}-label, ${c}-control`]:{[`&:not([class*=" ${u}-col-xs"])`]:{flex:"0 0 100%",maxWidth:"100%"}}}}}},genVerticalStyle=a=>{const{componentCls:s,formItemCls:c,rootPrefixCls:u}=a;return{[`${s}-vertical`]:{[c]:{"&-row":{flexDirection:"column"},"&-label > label":{height:"auto"},[`${s}-item-control`]:{width:"100%"}}},[`${s}-vertical ${c}-label,
      .${u}-col-24${c}-label,
      .${u}-col-xl-24${c}-label`]:makeVerticalLayoutLabel(a),[`@media (max-width: ${unit(a.screenXSMax)})`]:[makeVerticalLayout(a),{[s]:{[`.${u}-col-xs-24${c}-label`]:makeVerticalLayoutLabel(a)}}],[`@media (max-width: ${unit(a.screenSMMax)})`]:{[s]:{[`.${u}-col-sm-24${c}-label`]:makeVerticalLayoutLabel(a)}},[`@media (max-width: ${unit(a.screenMDMax)})`]:{[s]:{[`.${u}-col-md-24${c}-label`]:makeVerticalLayoutLabel(a)}},[`@media (max-width: ${unit(a.screenLGMax)})`]:{[s]:{[`.${u}-col-lg-24${c}-label`]:makeVerticalLayoutLabel(a)}}}},prepareComponentToken$2=a=>({labelRequiredMarkColor:a.colorError,labelColor:a.colorTextHeading,labelFontSize:a.fontSize,labelHeight:a.controlHeight,labelColonMarginInlineStart:a.marginXXS/2,labelColonMarginInlineEnd:a.marginXS,itemMarginBottom:a.marginLG,verticalLabelPadding:`0 0 ${a.paddingXS}px`,verticalLabelMargin:0}),prepareToken$1=(a,s)=>merge$1(a,{formItemCls:`${a.componentCls}-item`,rootPrefixCls:s}),useStyle$2=genStyleHooks("Form",(a,s)=>{let{rootPrefixCls:c}=s;const u=prepareToken$1(a,c);return[genFormStyle(u),genFormItemStyle(u),genFormValidateMotionStyle$1(u),genHorizontalStyle(u),genInlineStyle(u),genVerticalStyle(u),genCollapseMotion$1(u),zoomIn]},prepareComponentToken$2,{order:-1e3}),EMPTY_LIST=[];function toErrorEntity(a,s,c){let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return{key:typeof a=="string"?a:`${s}-${u}`,error:a,errorStatus:c}}const ErrorList=a=>{let{help:s,helpStatus:c,errors:u=EMPTY_LIST,warnings:d=EMPTY_LIST,className:h,fieldId:p,onVisibleChanged:m}=a;const{prefixCls:f}=reactExports.useContext(FormItemPrefixContext),_=`${f}-item-explain`,y=useCSSVarCls(f),[E,b,T]=useStyle$2(f,y),A=reactExports.useMemo(()=>initCollapseMotion(f),[f]),v=useDebounce(u),S=useDebounce(d),O=reactExports.useMemo(()=>s!=null?[toErrorEntity(s,"help",c)]:[].concat(_toConsumableArray(v.map((x,P)=>toErrorEntity(x,"error","error",P))),_toConsumableArray(S.map((x,P)=>toErrorEntity(x,"warning","warning",P)))),[s,c,v,S]),I={};return p&&(I.id=`${p}_help`),E(reactExports.createElement(CSSMotion,{motionDeadline:A.motionDeadline,motionName:`${f}-show-help`,visible:!!O.length,onVisibleChanged:m},x=>{const{className:P,style:w}=x;return reactExports.createElement("div",Object.assign({},I,{className:classNames(_,P,T,y,h,b),style:w,role:"alert"}),reactExports.createElement(CSSMotionList,Object.assign({keys:O},initCollapseMotion(f),{motionName:`${f}-show-help-item`,component:!1}),C=>{const{key:k,error:R,errorStatus:N,className:F,style:L}=C;return reactExports.createElement("div",{key:k,className:classNames(F,{[`${_}-${N}`]:N}),style:L},R)}))}))},ErrorList$1=ErrorList,formItemNameBlackList=["parentNode"],defaultItemNamePrefixCls="form_item";function toArray$2(a){return a===void 0||a===!1?[]:Array.isArray(a)?a:[a]}function getFieldId(a,s){if(!a.length)return;const c=a.join("_");return s?`${s}_${c}`:formItemNameBlackList.includes(c)?`${defaultItemNamePrefixCls}_${c}`:c}function getStatus(a,s,c,u,d,h){let p=u;return h!==void 0?p=h:c.validating?p="validating":a.length?p="error":s.length?p="warning":(c.touched||d&&c.validated)&&(p="success"),p}function toNamePathStr(a){return toArray$2(a).join("_")}function useForm(a){const[s]=useForm$1(),c=reactExports.useRef({}),u=reactExports.useMemo(()=>a??Object.assign(Object.assign({},s),{__INTERNAL__:{itemRef:d=>h=>{const p=toNamePathStr(d);h?c.current[p]=h:delete c.current[p]}},scrollToField:function(d){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const p=toArray$2(d),m=getFieldId(p,u.__INTERNAL__.name),f=m?document.getElementById(m):null;f&&e(f,Object.assign({scrollMode:"if-needed",block:"nearest"},h))},getFieldInstance:d=>{const h=toNamePathStr(d);return c.current[h]}}),[a,s]);return[u]}var __rest$7=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};const InternalForm=(a,s)=>{const c=reactExports.useContext(DisabledContext),{getPrefixCls:u,direction:d,form:h}=reactExports.useContext(ConfigContext),{prefixCls:p,className:m,rootClassName:f,size:_,disabled:y=c,form:E,colon:b,labelAlign:T,labelWrap:A,labelCol:v,wrapperCol:S,hideRequiredMark:O,layout:I="horizontal",scrollToFirstError:x,requiredMark:P,onFinishFailed:w,name:C,style:k,feedbackIcons:R,variant:N}=a,F=__rest$7(a,["prefixCls","className","rootClassName","size","disabled","form","colon","labelAlign","labelWrap","labelCol","wrapperCol","hideRequiredMark","layout","scrollToFirstError","requiredMark","onFinishFailed","name","style","feedbackIcons","variant"]),L=useSize(_),X=reactExports.useContext(ValidateMessagesContext),V=reactExports.useMemo(()=>P!==void 0?P:O?!1:h&&h.requiredMark!==void 0?h.requiredMark:!0,[O,P,h]),H=b??(h==null?void 0:h.colon),ee=u("form",p),Q=useCSSVarCls(ee),[Z,K,se]=useStyle$2(ee,Q),ne=classNames(ee,`${ee}-${I}`,{[`${ee}-hide-required-mark`]:V===!1,[`${ee}-rtl`]:d==="rtl",[`${ee}-${L}`]:L},se,Q,K,h==null?void 0:h.className,m,f),[le]=useForm(E),{__INTERNAL__:he}=le;he.name=C;const Y=reactExports.useMemo(()=>({name:C,labelAlign:T,labelCol:v,labelWrap:A,wrapperCol:S,vertical:I==="vertical",colon:H,requiredMark:V,itemRef:he.itemRef,form:le,feedbackIcons:R}),[C,T,v,S,I,H,V,le,R]);reactExports.useImperativeHandle(s,()=>le);const D=(B,U)=>{if(B){let W={block:"nearest"};typeof B=="object"&&(W=B),le.scrollToField(U,W)}},G=B=>{if(w==null||w(B),B.errorFields.length){const U=B.errorFields[0].name;if(x!==void 0){D(x,U);return}h&&h.scrollToFirstError!==void 0&&D(h.scrollToFirstError,U)}};return Z(reactExports.createElement(VariantContext.Provider,{value:N},reactExports.createElement(DisabledContextProvider,{disabled:y},reactExports.createElement(SizeContext.Provider,{value:L},reactExports.createElement(FormProvider,{validateMessages:X},reactExports.createElement(FormContext.Provider,{value:Y},reactExports.createElement(RefForm,Object.assign({id:C},F,{name:C,onFinishFailed:G,form:le,style:Object.assign(Object.assign({},h==null?void 0:h.style),k),className:ne}))))))))},Form$1=reactExports.forwardRef(InternalForm);function useChildren(a){if(typeof a=="function")return a;const s=toArray$6(a);return s.length<=1?s[0]:s}const useFormItemStatus=()=>{const{status:a,errors:s=[],warnings:c=[]}=reactExports.useContext(FormItemInputContext);return{status:a,errors:s,warnings:c}};useFormItemStatus.Context=FormItemInputContext;const useFormItemStatus$1=useFormItemStatus;function useFrameState(a){const[s,c]=reactExports.useState(a),u=reactExports.useRef(null),d=reactExports.useRef([]),h=reactExports.useRef(!1);reactExports.useEffect(()=>(h.current=!1,()=>{h.current=!0,wrapperRaf.cancel(u.current),u.current=null}),[]);function p(m){h.current||(u.current===null&&(d.current=[],u.current=wrapperRaf(()=>{u.current=null,c(f=>{let _=f;return d.current.forEach(y=>{_=y(_)}),_})})),d.current.push(m))}return[s,p]}function useItemRef(){const{itemRef:a}=reactExports.useContext(FormContext),s=reactExports.useRef({});function c(u,d){const h=d&&typeof d=="object"&&d.ref,p=u.join("_");return(s.current.name!==p||s.current.originRef!==h)&&(s.current.name=p,s.current.originRef=h,s.current.ref=composeRef(a(u),h)),s.current.ref}return c}const genFallbackStyle=a=>{const{formItemCls:s}=a;return{"@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none)":{[`${s}-control`]:{display:"flex"}}}},FallbackCmp=genSubStyleComponent(["Form","item-item"],(a,s)=>{let{rootPrefixCls:c}=s;const u=prepareToken$1(a,c);return[genFallbackStyle(u)]}),FormItemInput=a=>{const{prefixCls:s,status:c,wrapperCol:u,children:d,errors:h,warnings:p,_internalItemRender:m,extra:f,help:_,fieldId:y,marginBottom:E,onErrorVisibleChanged:b}=a,T=`${s}-item`,A=reactExports.useContext(FormContext),v=u||A.wrapperCol||{},S=classNames(`${T}-control`,v.className),O=reactExports.useMemo(()=>Object.assign({},A),[A]);delete O.labelCol,delete O.wrapperCol;const I=reactExports.createElement("div",{className:`${T}-control-input`},reactExports.createElement("div",{className:`${T}-control-input-content`},d)),x=reactExports.useMemo(()=>({prefixCls:s,status:c}),[s,c]),P=E!==null||h.length||p.length?reactExports.createElement("div",{style:{display:"flex",flexWrap:"nowrap"}},reactExports.createElement(FormItemPrefixContext.Provider,{value:x},reactExports.createElement(ErrorList$1,{fieldId:y,errors:h,warnings:p,help:_,helpStatus:c,className:`${T}-explain-connected`,onVisibleChanged:b})),!!E&&reactExports.createElement("div",{style:{width:0,height:E}})):null,w={};y&&(w.id=`${y}_extra`);const C=f?reactExports.createElement("div",Object.assign({},w,{className:`${T}-extra`}),f):null,k=m&&m.mark==="pro_table_render"&&m.render?m.render(a,{input:I,errorList:P,extra:C}):reactExports.createElement(reactExports.Fragment,null,I,P,C);return reactExports.createElement(FormContext.Provider,{value:O},reactExports.createElement(Col$1,Object.assign({},v,{className:S}),k),reactExports.createElement(FallbackCmp,{prefixCls:s}))},FormItemInput$1=FormItemInput;var QuestionCircleOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"};const QuestionCircleOutlinedSvg=QuestionCircleOutlined$2;var QuestionCircleOutlined=function(a,s){return reactExports.createElement(AntdIcon,_extends$2({},a,{ref:s,icon:QuestionCircleOutlinedSvg}))},RefIcon=reactExports.forwardRef(QuestionCircleOutlined);const QuestionCircleOutlined$1=RefIcon;var __rest$6=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};function toTooltipProps(a){return a?typeof a=="object"&&!reactExports.isValidElement(a)?a:{title:a}:null}const FormItemLabel=a=>{let{prefixCls:s,label:c,htmlFor:u,labelCol:d,labelAlign:h,colon:p,required:m,requiredMark:f,tooltip:_}=a;var y;const[E]=useLocale("Form"),{vertical:b,labelAlign:T,labelCol:A,labelWrap:v,colon:S}=reactExports.useContext(FormContext);if(!c)return null;const O=d||A||{},I=h||T,x=`${s}-item-label`,P=classNames(x,I==="left"&&`${x}-left`,O.className,{[`${x}-wrap`]:!!v});let w=c;const C=p===!0||S!==!1&&p!==!1;C&&!b&&typeof c=="string"&&c.trim()!==""&&(w=c.replace(/[:|]\s*$/,""));const k=toTooltipProps(_);if(k){const{icon:L=reactExports.createElement(QuestionCircleOutlined$1,null)}=k,X=__rest$6(k,["icon"]),V=reactExports.createElement(Tooltip$1,Object.assign({},X),reactExports.cloneElement(L,{className:`${s}-item-tooltip`,title:"",onClick:H=>{H.preventDefault()},tabIndex:null}));w=reactExports.createElement(reactExports.Fragment,null,w,V)}const R=f==="optional",N=typeof f=="function";N?w=f(w,{required:!!m}):R&&!m&&(w=reactExports.createElement(reactExports.Fragment,null,w,reactExports.createElement("span",{className:`${s}-item-optional`,title:""},(E==null?void 0:E.optional)||((y=defaultLocale.Form)===null||y===void 0?void 0:y.optional))));const F=classNames({[`${s}-item-required`]:m,[`${s}-item-required-mark-optional`]:R||N,[`${s}-item-no-colon`]:!C});return reactExports.createElement(Col$1,Object.assign({},O,{className:P}),reactExports.createElement("label",{htmlFor:u,className:F,title:typeof c=="string"?c:""},w))},FormItemLabel$1=FormItemLabel,iconMap={success:CheckCircleFilled$1,warning:ExclamationCircleFilled$1,error:CloseCircleFilled$1,validating:LoadingOutlined$1};function StatusProvider(a){let{children:s,errors:c,warnings:u,hasFeedback:d,validateStatus:h,prefixCls:p,meta:m,noStyle:f}=a;const _=`${p}-item`,{feedbackIcons:y}=reactExports.useContext(FormContext),E=getStatus(c,u,m,null,!!d,h),{isFormItemInput:b,status:T,hasFeedback:A,feedbackIcon:v}=reactExports.useContext(FormItemInputContext),S=reactExports.useMemo(()=>{var O;let I;if(d){const P=d!==!0&&d.icons||y,w=E&&((O=P==null?void 0:P({status:E,errors:c,warnings:u}))===null||O===void 0?void 0:O[E]),C=E&&iconMap[E];I=w!==!1&&C?reactExports.createElement("span",{className:classNames(`${_}-feedback-icon`,`${_}-feedback-icon-${E}`)},w||reactExports.createElement(C,null)):null}const x={status:E||"",errors:c,warnings:u,hasFeedback:!!d,feedbackIcon:I,isFormItemInput:!0};return f&&(x.status=(E??T)||"",x.isFormItemInput=b,x.hasFeedback=!!(d??A),x.feedbackIcon=d!==void 0?x.feedbackIcon:v),x},[E,d,f,b,T]);return reactExports.createElement(FormItemInputContext.Provider,{value:S},s)}var __rest$5=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};function ItemHolder(a){const{prefixCls:s,className:c,rootClassName:u,style:d,help:h,errors:p,warnings:m,validateStatus:f,meta:_,hasFeedback:y,hidden:E,children:b,fieldId:T,required:A,isRequired:v,onSubItemMetaChange:S}=a,O=__rest$5(a,["prefixCls","className","rootClassName","style","help","errors","warnings","validateStatus","meta","hasFeedback","hidden","children","fieldId","required","isRequired","onSubItemMetaChange"]),I=`${s}-item`,{requiredMark:x}=reactExports.useContext(FormContext),P=reactExports.useRef(null),w=useDebounce(p),C=useDebounce(m),k=h!=null,R=!!(k||p.length||m.length),N=!!P.current&&isVisible(P.current),[F,L]=reactExports.useState(null);useLayoutEffect$1(()=>{if(R&&P.current){const ee=getComputedStyle(P.current);L(parseInt(ee.marginBottom,10))}},[R,N]);const X=ee=>{ee||L(null)},V=function(){let ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const Q=ee?w:_.errors,Z=ee?C:_.warnings;return getStatus(Q,Z,_,"",!!y,f)}(),H=classNames(I,c,u,{[`${I}-with-help`]:k||w.length||C.length,[`${I}-has-feedback`]:V&&y,[`${I}-has-success`]:V==="success",[`${I}-has-warning`]:V==="warning",[`${I}-has-error`]:V==="error",[`${I}-is-validating`]:V==="validating",[`${I}-hidden`]:E});return reactExports.createElement("div",{className:H,style:d,ref:P},reactExports.createElement(Row$1,Object.assign({className:`${I}-row`},omit(O,["_internalItemRender","colon","dependencies","extra","fieldKey","getValueFromEvent","getValueProps","htmlFor","id","initialValue","isListField","label","labelAlign","labelCol","labelWrap","messageVariables","name","normalize","noStyle","preserve","requiredMark","rules","shouldUpdate","trigger","tooltip","validateFirst","validateTrigger","valuePropName","wrapperCol","validateDebounce"])),reactExports.createElement(FormItemLabel$1,Object.assign({htmlFor:T},a,{requiredMark:x,required:A??v,prefixCls:s})),reactExports.createElement(FormItemInput$1,Object.assign({},a,_,{errors:w,warnings:C,prefixCls:s,status:V,help:h,marginBottom:F,onErrorVisibleChanged:X}),reactExports.createElement(NoStyleItemContext.Provider,{value:S},reactExports.createElement(StatusProvider,{prefixCls:s,meta:_,errors:_.errors,warnings:_.warnings,hasFeedback:y,validateStatus:V},b)))),!!F&&reactExports.createElement("div",{className:`${I}-margin-offset`,style:{marginBottom:-F}}))}const NAME_SPLIT="__SPLIT__";function isSimilarControl(a,s){const c=Object.keys(a),u=Object.keys(s);return c.length===u.length&&c.every(d=>{const h=a[d],p=s[d];return h===p||typeof h=="function"||typeof p=="function"})}const MemoInput=reactExports.memo(a=>{let{children:s}=a;return s},(a,s)=>isSimilarControl(a.control,s.control)&&a.update===s.update&&a.childProps.length===s.childProps.length&&a.childProps.every((c,u)=>c===s.childProps[u]));function genEmptyMeta(){return{errors:[],warnings:[],touched:!1,validating:!1,name:[],validated:!1}}function InternalFormItem(a){const{name:s,noStyle:c,className:u,dependencies:d,prefixCls:h,shouldUpdate:p,rules:m,children:f,required:_,label:y,messageVariables:E,trigger:b="onChange",validateTrigger:T,hidden:A,help:v}=a,{getPrefixCls:S}=reactExports.useContext(ConfigContext),{name:O}=reactExports.useContext(FormContext),I=useChildren(f),x=typeof I=="function",P=reactExports.useContext(NoStyleItemContext),{validateTrigger:w}=reactExports.useContext(Context),C=T!==void 0?T:w,k=s!=null,R=S("form",h),N=useCSSVarCls(R),[F,L,X]=useStyle$2(R,N);devUseWarning();const V=reactExports.useContext(ListContext),H=reactExports.useRef(),[ee,Q]=useFrameState({}),[Z,K]=useSafeState(()=>genEmptyMeta()),se=B=>{const U=V==null?void 0:V.getKey(B.name);if(K(B.destroy?genEmptyMeta():B,!0),c&&v!==!1&&P){let W=B.name;if(B.destroy)W=H.current||W;else if(U!==void 0){const[q,J]=U;W=[q].concat(_toConsumableArray(J)),H.current=W}P(B,W)}},ne=(B,U)=>{Q(W=>{const q=Object.assign({},W),J=[].concat(_toConsumableArray(B.name.slice(0,-1)),_toConsumableArray(U)).join(NAME_SPLIT);return B.destroy?delete q[J]:q[J]=B,q})},[le,he]=reactExports.useMemo(()=>{const B=_toConsumableArray(Z.errors),U=_toConsumableArray(Z.warnings);return Object.values(ee).forEach(W=>{B.push.apply(B,_toConsumableArray(W.errors||[])),U.push.apply(U,_toConsumableArray(W.warnings||[]))}),[B,U]},[ee,Z.errors,Z.warnings]),Y=useItemRef();function D(B,U,W){return c&&!A?reactExports.createElement(StatusProvider,{prefixCls:R,hasFeedback:a.hasFeedback,validateStatus:a.validateStatus,meta:Z,errors:le,warnings:he,noStyle:!0},B):reactExports.createElement(ItemHolder,Object.assign({key:"row"},a,{className:classNames(u,X,N,L),prefixCls:R,fieldId:U,isRequired:W,errors:le,warnings:he,meta:Z,onSubItemMetaChange:ne}),B)}if(!k&&!x&&!d)return F(D(I));let G={};return typeof y=="string"?G.label=y:s&&(G.label=String(s)),E&&(G=Object.assign(Object.assign({},G),E)),F(reactExports.createElement(WrapperField,Object.assign({},a,{messageVariables:G,trigger:b,validateTrigger:C,onMetaChange:se}),(B,U,W)=>{const q=toArray$2(s).length&&U?U.name:[],J=getFieldId(q,O),ae=_!==void 0?_:!!(m&&m.some(ue=>{if(ue&&typeof ue=="object"&&ue.required&&!ue.warningOnly)return!0;if(typeof ue=="function"){const Ee=ue(W);return Ee&&Ee.required&&!Ee.warningOnly}return!1})),ce=Object.assign({},B);let ie=null;if(Array.isArray(I)&&k)ie=I;else if(!(x&&(!(p||d)||k))&&!(d&&!x&&!k))if(reactExports.isValidElement(I)){const ue=Object.assign(Object.assign({},I.props),ce);if(ue.id||(ue.id=J),v||le.length>0||he.length>0||a.extra){const xe=[];(v||le.length>0)&&xe.push(`${J}_help`),a.extra&&xe.push(`${J}_extra`),ue["aria-describedby"]=xe.join(" ")}le.length>0&&(ue["aria-invalid"]="true"),ae&&(ue["aria-required"]="true"),supportRef(I)&&(ue.ref=Y(q,I)),new Set([].concat(_toConsumableArray(toArray$2(b)),_toConsumableArray(toArray$2(C)))).forEach(xe=>{ue[xe]=function(){for(var ve,$e,_e,Be,ze,Se=arguments.length,pe=new Array(Se),me=0;me<Se;me++)pe[me]=arguments[me];(_e=ce[xe])===null||_e===void 0||(ve=_e).call.apply(ve,[ce].concat(pe)),(ze=(Be=I.props)[xe])===null||ze===void 0||($e=ze).call.apply($e,[Be].concat(pe))}});const Ee=[ue["aria-required"],ue["aria-invalid"],ue["aria-describedby"]];ie=reactExports.createElement(MemoInput,{control:ce,update:I,childProps:Ee},cloneElement(I,ue))}else x&&(p||d)&&!k?ie=I(W):ie=I;return D(ie,J,ae)}))}const FormItem=InternalFormItem;FormItem.useStatus=useFormItemStatus$1;const Item=FormItem;var __rest$4=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};const FormList=a=>{var{prefixCls:s,children:c}=a,u=__rest$4(a,["prefixCls","children"]);const{getPrefixCls:d}=reactExports.useContext(ConfigContext),h=d("form",s),p=reactExports.useMemo(()=>({prefixCls:h,status:"error"}),[h]);return reactExports.createElement(List$2,Object.assign({},u),(m,f,_)=>reactExports.createElement(FormItemPrefixContext.Provider,{value:p},c(m.map(y=>Object.assign(Object.assign({},y),{fieldKey:y.key})),f,{errors:_.errors,warnings:_.warnings})))},List=FormList;function useFormInstance(){const{form:a}=reactExports.useContext(FormContext);return a}const Form=Form$1;Form.Item=Item,Form.List=List,Form.ErrorList=ErrorList$1,Form.useForm=useForm,Form.useFormInstance=useFormInstance,Form.useWatch=useWatch$1,Form.Provider=FormProvider,Form.create=()=>{};var __rest$3=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};const PurePanel=a=>{const{prefixCls:s,className:c,closeIcon:u,closable:d,type:h,title:p,children:m,footer:f}=a,_=__rest$3(a,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:y}=reactExports.useContext(ConfigContext),E=y(),b=s||y("modal"),T=useCSSVarCls(E),[A,v,S]=useStyle$a(b,T),O=`${b}-confirm`;let I={};return h?I={closable:d??!1,title:"",footer:"",children:reactExports.createElement(ConfirmContent,Object.assign({},a,{prefixCls:b,confirmPrefixCls:O,rootPrefixCls:E,content:m}))}:I={closable:d??!0,title:p,footer:f!==null&&reactExports.createElement(Footer,Object.assign({},a)),children:m},A(reactExports.createElement(Panel,Object.assign({prefixCls:b,className:classNames(v,`${b}-pure-panel`,h&&O,h&&`${O}-${h}`,c,S,T)},_,{closeIcon:renderCloseIcon(b,u),closable:d},I)))},PurePanel$1=withPureRenderTheme(PurePanel);function modalWarn(a){return confirm(withWarn(a))}const Modal=OriginModal;Modal.useModal=useModal,Modal.info=function(a){return confirm(withInfo(a))},Modal.success=function(a){return confirm(withSuccess(a))},Modal.error=function(a){return confirm(withError(a))},Modal.warning=modalWarn,Modal.warn=modalWarn,Modal.confirm=function(a){return confirm(withConfirm(a))},Modal.destroyAll=function(){for(;destroyFns.length;){const a=destroyFns.pop();a&&a()}},Modal.config=modalGlobalConfig,Modal._InternalPanelDoNotUseOrYouWillBeFired=PurePanel$1;const Modal$1=Modal;var _excluded=["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"],Switch$2=reactExports.forwardRef(function(a,s){var c,u=a.prefixCls,d=u===void 0?"rc-switch":u,h=a.className,p=a.checked,m=a.defaultChecked,f=a.disabled,_=a.loadingIcon,y=a.checkedChildren,E=a.unCheckedChildren,b=a.onClick,T=a.onChange,A=a.onKeyDown,v=_objectWithoutProperties(a,_excluded),S=useMergedState(!1,{value:p,defaultValue:m}),O=_slicedToArray(S,2),I=O[0],x=O[1];function P(R,N){var F=I;return f||(F=R,x(F),T==null||T(F,N)),F}function w(R){R.which===KeyCode.LEFT?P(!1,R):R.which===KeyCode.RIGHT&&P(!0,R),A==null||A(R)}function C(R){var N=P(!I,R);b==null||b(N,R)}var k=classNames(d,h,(c={},_defineProperty(c,"".concat(d,"-checked"),I),_defineProperty(c,"".concat(d,"-disabled"),f),c));return reactExports.createElement("button",_extends$2({},v,{type:"button",role:"switch","aria-checked":I,disabled:f,className:k,ref:s,onKeyDown:w,onClick:C}),_,reactExports.createElement("span",{className:"".concat(d,"-inner")},reactExports.createElement("span",{className:"".concat(d,"-inner-checked")},y),reactExports.createElement("span",{className:"".concat(d,"-inner-unchecked")},E)))});Switch$2.displayName="Switch";const genSwitchSmallStyle=a=>{const{componentCls:s,trackHeightSM:c,trackPadding:u,trackMinWidthSM:d,innerMinMarginSM:h,innerMaxMarginSM:p,handleSizeSM:m,calc:f}=a,_=`${s}-inner`,y=unit(f(m).add(f(u).mul(2)).equal()),E=unit(f(p).mul(2).equal());return{[s]:{[`&${s}-small`]:{minWidth:d,height:c,lineHeight:unit(c),[`${s}-inner`]:{paddingInlineStart:p,paddingInlineEnd:h,[`${_}-checked`]:{marginInlineStart:`calc(-100% + ${y} - ${E})`,marginInlineEnd:`calc(100% - ${y} + ${E})`},[`${_}-unchecked`]:{marginTop:f(c).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`${s}-handle`]:{width:m,height:m},[`${s}-loading-icon`]:{top:f(f(m).sub(a.switchLoadingIconSize)).div(2).equal(),fontSize:a.switchLoadingIconSize},[`&${s}-checked`]:{[`${s}-inner`]:{paddingInlineStart:h,paddingInlineEnd:p,[`${_}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${_}-unchecked`]:{marginInlineStart:`calc(100% - ${y} + ${E})`,marginInlineEnd:`calc(-100% + ${y} - ${E})`}},[`${s}-handle`]:{insetInlineStart:`calc(100% - ${unit(f(m).add(u).equal())})`}},[`&:not(${s}-disabled):active`]:{[`&:not(${s}-checked) ${_}`]:{[`${_}-unchecked`]:{marginInlineStart:f(a.marginXXS).div(2).equal(),marginInlineEnd:f(a.marginXXS).mul(-1).div(2).equal()}},[`&${s}-checked ${_}`]:{[`${_}-checked`]:{marginInlineStart:f(a.marginXXS).mul(-1).div(2).equal(),marginInlineEnd:f(a.marginXXS).div(2).equal()}}}}}}},genSwitchLoadingStyle=a=>{const{componentCls:s,handleSize:c,calc:u}=a;return{[s]:{[`${s}-loading-icon${a.iconCls}`]:{position:"relative",top:u(u(c).sub(a.fontSize)).div(2).equal(),color:a.switchLoadingIconColor,verticalAlign:"top"},[`&${s}-checked ${s}-loading-icon`]:{color:a.switchColor}}}},genSwitchHandleStyle=a=>{const{componentCls:s,trackPadding:c,handleBg:u,handleShadow:d,handleSize:h,calc:p}=a,m=`${s}-handle`;return{[s]:{[m]:{position:"absolute",top:c,insetInlineStart:c,width:h,height:h,transition:`all ${a.switchDuration} ease-in-out`,"&::before":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,backgroundColor:u,borderRadius:p(h).div(2).equal(),boxShadow:d,transition:`all ${a.switchDuration} ease-in-out`,content:'""'}},[`&${s}-checked ${m}`]:{insetInlineStart:`calc(100% - ${unit(p(h).add(c).equal())})`},[`&:not(${s}-disabled):active`]:{[`${m}::before`]:{insetInlineEnd:a.switchHandleActiveInset,insetInlineStart:0},[`&${s}-checked ${m}::before`]:{insetInlineEnd:0,insetInlineStart:a.switchHandleActiveInset}}}}},genSwitchInnerStyle=a=>{const{componentCls:s,trackHeight:c,trackPadding:u,innerMinMargin:d,innerMaxMargin:h,handleSize:p,calc:m}=a,f=`${s}-inner`,_=unit(m(p).add(m(u).mul(2)).equal()),y=unit(m(h).mul(2).equal());return{[s]:{[f]:{display:"block",overflow:"hidden",borderRadius:100,height:"100%",paddingInlineStart:h,paddingInlineEnd:d,transition:`padding-inline-start ${a.switchDuration} ease-in-out, padding-inline-end ${a.switchDuration} ease-in-out`,[`${f}-checked, ${f}-unchecked`]:{display:"block",color:a.colorTextLightSolid,fontSize:a.fontSizeSM,transition:`margin-inline-start ${a.switchDuration} ease-in-out, margin-inline-end ${a.switchDuration} ease-in-out`,pointerEvents:"none"},[`${f}-checked`]:{marginInlineStart:`calc(-100% + ${_} - ${y})`,marginInlineEnd:`calc(100% - ${_} + ${y})`},[`${f}-unchecked`]:{marginTop:m(c).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`&${s}-checked ${f}`]:{paddingInlineStart:d,paddingInlineEnd:h,[`${f}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${f}-unchecked`]:{marginInlineStart:`calc(100% - ${_} + ${y})`,marginInlineEnd:`calc(-100% + ${_} - ${y})`}},[`&:not(${s}-disabled):active`]:{[`&:not(${s}-checked) ${f}`]:{[`${f}-unchecked`]:{marginInlineStart:m(u).mul(2).equal(),marginInlineEnd:m(u).mul(-1).mul(2).equal()}},[`&${s}-checked ${f}`]:{[`${f}-checked`]:{marginInlineStart:m(u).mul(-1).mul(2).equal(),marginInlineEnd:m(u).mul(2).equal()}}}}}},genSwitchStyle=a=>{const{componentCls:s,trackHeight:c,trackMinWidth:u}=a;return{[s]:Object.assign(Object.assign(Object.assign(Object.assign({},resetComponent(a)),{position:"relative",display:"inline-block",boxSizing:"border-box",minWidth:u,height:c,lineHeight:`${unit(c)}`,verticalAlign:"middle",background:a.colorTextQuaternary,border:"0",borderRadius:100,cursor:"pointer",transition:`all ${a.motionDurationMid}`,userSelect:"none",[`&:hover:not(${s}-disabled)`]:{background:a.colorTextTertiary}}),genFocusStyle(a)),{[`&${s}-checked`]:{background:a.switchColor,[`&:hover:not(${s}-disabled)`]:{background:a.colorPrimaryHover}},[`&${s}-loading, &${s}-disabled`]:{cursor:"not-allowed",opacity:a.switchDisabledOpacity,"*":{boxShadow:"none",cursor:"not-allowed"}},[`&${s}-rtl`]:{direction:"rtl"}})}},prepareComponentToken$1=a=>{const{fontSize:s,lineHeight:c,controlHeight:u,colorWhite:d}=a,h=s*c,p=u/2,m=2,f=h-m*2,_=p-m*2;return{trackHeight:h,trackHeightSM:p,trackMinWidth:f*2+m*4,trackMinWidthSM:_*2+m*2,trackPadding:m,handleBg:d,handleSize:f,handleSizeSM:_,handleShadow:`0 2px 4px 0 ${new TinyColor("#00230b").setAlpha(.2).toRgbString()}`,innerMinMargin:f/2,innerMaxMargin:f+m+m*2,innerMinMarginSM:_/2,innerMaxMarginSM:_+m+m*2}},useStyle$1=genStyleHooks("Switch",a=>{const s=merge$1(a,{switchDuration:a.motionDurationMid,switchColor:a.colorPrimary,switchDisabledOpacity:a.opacityLoading,switchLoadingIconSize:a.calc(a.fontSizeIcon).mul(.75).equal(),switchLoadingIconColor:`rgba(0, 0, 0, ${a.opacityLoading})`,switchHandleActiveInset:"-30%"});return[genSwitchStyle(s),genSwitchInnerStyle(s),genSwitchHandleStyle(s),genSwitchLoadingStyle(s),genSwitchSmallStyle(s)]},prepareComponentToken$1);var __rest$2=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};const Switch=reactExports.forwardRef((a,s)=>{const{prefixCls:c,size:u,disabled:d,loading:h,className:p,rootClassName:m,style:f,checked:_,value:y,defaultChecked:E,defaultValue:b,onChange:T}=a,A=__rest$2(a,["prefixCls","size","disabled","loading","className","rootClassName","style","checked","value","defaultChecked","defaultValue","onChange"]),[v,S]=useMergedState(!1,{value:_??y,defaultValue:E??b}),{getPrefixCls:O,direction:I,switch:x}=reactExports.useContext(ConfigContext),P=reactExports.useContext(DisabledContext),w=(d??P)||h,C=O("switch",c),k=reactExports.createElement("div",{className:`${C}-handle`},h&&reactExports.createElement(LoadingOutlined$1,{className:`${C}-loading-icon`})),[R,N,F]=useStyle$1(C),L=useSize(u),X=classNames(x==null?void 0:x.className,{[`${C}-small`]:L==="small",[`${C}-loading`]:h,[`${C}-rtl`]:I==="rtl"},p,m,N,F),V=Object.assign(Object.assign({},x==null?void 0:x.style),f),H=function(){S(arguments.length<=0?void 0:arguments[0]),T==null||T.apply(void 0,arguments)};return R(reactExports.createElement(Wave$1,{component:"Switch"},reactExports.createElement(Switch$2,Object.assign({},A,{checked:v,onChange:H,prefixCls:C,className:X,style:V,disabled:w,ref:s,loadingIcon:k}))))});Switch.__ANT_SWITCH=!0;const Switch$1=Switch,genBaseStyle=a=>{const{paddingXXS:s,lineWidth:c,tagPaddingHorizontal:u,componentCls:d,calc:h}=a,p=h(u).sub(c).equal(),m=h(s).sub(c).equal();return{[d]:Object.assign(Object.assign({},resetComponent(a)),{display:"inline-block",height:"auto",marginInlineEnd:a.marginXS,paddingInline:p,fontSize:a.tagFontSize,lineHeight:a.tagLineHeight,whiteSpace:"nowrap",background:a.defaultBg,border:`${unit(a.lineWidth)} ${a.lineType} ${a.colorBorder}`,borderRadius:a.borderRadiusSM,opacity:1,transition:`all ${a.motionDurationMid}`,textAlign:"start",position:"relative",[`&${d}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:a.defaultColor},[`${d}-close-icon`]:{marginInlineStart:m,fontSize:a.tagIconSize,color:a.colorTextDescription,cursor:"pointer",transition:`all ${a.motionDurationMid}`,"&:hover":{color:a.colorTextHeading}},[`&${d}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${a.iconCls}-close, ${a.iconCls}-close:hover`]:{color:a.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${d}-checkable-checked):hover`]:{color:a.colorPrimary,backgroundColor:a.colorFillSecondary},"&:active, &-checked":{color:a.colorTextLightSolid},"&-checked":{backgroundColor:a.colorPrimary,"&:hover":{backgroundColor:a.colorPrimaryHover}},"&:active":{backgroundColor:a.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${a.iconCls} + span, > span + ${a.iconCls}`]:{marginInlineStart:p}}),[`${d}-borderless`]:{borderColor:"transparent",background:a.tagBorderlessBg}}},prepareToken=a=>{const{lineWidth:s,fontSizeIcon:c,calc:u}=a,d=a.fontSizeSM;return merge$1(a,{tagFontSize:d,tagLineHeight:unit(u(a.lineHeightSM).mul(d).equal()),tagIconSize:u(c).sub(u(s).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:a.defaultBg})},prepareComponentToken=a=>({defaultBg:new TinyColor(a.colorFillQuaternary).onBackground(a.colorBgContainer).toHexString(),defaultColor:a.colorText}),useStyle=genStyleHooks("Tag",a=>{const s=prepareToken(a);return genBaseStyle(s)},prepareComponentToken);var __rest$1=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};const CheckableTag=reactExports.forwardRef((a,s)=>{const{prefixCls:c,style:u,className:d,checked:h,onChange:p,onClick:m}=a,f=__rest$1(a,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:_,tag:y}=reactExports.useContext(ConfigContext),E=O=>{p==null||p(!h),m==null||m(O)},b=_("tag",c),[T,A,v]=useStyle(b),S=classNames(b,`${b}-checkable`,{[`${b}-checkable-checked`]:h},y==null?void 0:y.className,d,A,v);return T(reactExports.createElement("span",Object.assign({},f,{ref:s,style:Object.assign(Object.assign({},u),y==null?void 0:y.style),className:S,onClick:E})))}),CheckableTag$1=CheckableTag,genPresetStyle=a=>genPresetColor(a,(s,c)=>{let{textColor:u,lightBorderColor:d,lightColor:h,darkColor:p}=c;return{[`${a.componentCls}${a.componentCls}-${s}`]:{color:u,background:h,borderColor:d,"&-inverse":{color:a.colorTextLightSolid,background:p,borderColor:p},[`&${a.componentCls}-borderless`]:{borderColor:"transparent"}}}}),PresetCmp=genSubStyleComponent(["Tag","preset"],a=>{const s=prepareToken(a);return genPresetStyle(s)},prepareComponentToken);function capitalize(a){return typeof a!="string"?a:a.charAt(0).toUpperCase()+a.slice(1)}const genTagStatusStyle=(a,s,c)=>{const u=capitalize(c);return{[`${a.componentCls}${a.componentCls}-${s}`]:{color:a[`color${c}`],background:a[`color${u}Bg`],borderColor:a[`color${u}Border`],[`&${a.componentCls}-borderless`]:{borderColor:"transparent"}}}},StatusCmp=genSubStyleComponent(["Tag","status"],a=>{const s=prepareToken(a);return[genTagStatusStyle(s,"success","Success"),genTagStatusStyle(s,"processing","Info"),genTagStatusStyle(s,"error","Error"),genTagStatusStyle(s,"warning","Warning")]},prepareComponentToken);var __rest=function(a,s){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&s.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)s.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};const InternalTag=(a,s)=>{const{prefixCls:c,className:u,rootClassName:d,style:h,children:p,icon:m,color:f,onClose:_,bordered:y=!0,visible:E}=a,b=__rest(a,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:T,direction:A,tag:v}=reactExports.useContext(ConfigContext),[S,O]=reactExports.useState(!0),I=omit(b,["closeIcon","closable"]);reactExports.useEffect(()=>{E!==void 0&&O(E)},[E]);const x=isPresetColor(f),P=isPresetStatusColor(f),w=x||P,C=Object.assign(Object.assign({backgroundColor:f&&!w?f:void 0},v==null?void 0:v.style),h),k=T("tag",c),[R,N,F]=useStyle(k),L=classNames(k,v==null?void 0:v.className,{[`${k}-${f}`]:w,[`${k}-has-color`]:f&&!w,[`${k}-hidden`]:!S,[`${k}-rtl`]:A==="rtl",[`${k}-borderless`]:!y},u,d,N,F),X=K=>{K.stopPropagation(),_==null||_(K),!K.defaultPrevented&&O(!1)},[,V]=useClosable(pickClosable(a),pickClosable(v),{closable:!1,closeIconRender:K=>{const se=reactExports.createElement("span",{className:`${k}-close-icon`,onClick:X},K);return replaceElement$1(K,se,ne=>({onClick:le=>{var he;(he=ne==null?void 0:ne.onClick)===null||he===void 0||he.call(ne,le),X(le)},className:classNames(ne==null?void 0:ne.className,`${k}-close-icon`)}))}}),H=typeof b.onClick=="function"||p&&p.type==="a",ee=m||null,Q=ee?reactExports.createElement(reactExports.Fragment,null,ee,p&&reactExports.createElement("span",null,p)):p,Z=reactExports.createElement("span",Object.assign({},I,{ref:s,className:L,style:C}),Q,V,x&&reactExports.createElement(PresetCmp,{key:"preset",prefixCls:k}),P&&reactExports.createElement(StatusCmp,{key:"status",prefixCls:k}));return R(H?reactExports.createElement(Wave$1,{component:"Tag"},Z):Z)},Tag$1=reactExports.forwardRef(InternalTag);Tag$1.CheckableTag=CheckableTag$1;const Tag$2=Tag$1;let currentLogLevel=1;const setLogLevel=a=>{currentLogLevel=a},formatLogMessage=(a,s,c)=>{const u=`[${new Date().toISOString()}] [${a}] [Page-Assist]`;if(c!==void 0)try{const d=typeof c=="object"?JSON.stringify(c):String(c);return`${u} ${s} - ${d}`}catch{return`${u} ${s} - [\u65E0\u6CD5\u5E8F\u5217\u5316\u7684\u6570\u636E]`}return`${u} ${s}`},debug$1=(a,s)=>{currentLogLevel<=0&&console.debug(formatLogMessage("DEBUG",a,s))},info=(a,s)=>{currentLogLevel<=1&&console.info(formatLogMessage("INFO",a,s))},warn=(a,s)=>{currentLogLevel<=2&&console.warn(formatLogMessage("WARN",a,s))},error=(a,s)=>{currentLogLevel<=3&&(s instanceof Error?console.error(formatLogMessage("ERROR",a,{message:s.message,stack:s.stack,name:s.name})):console.error(formatLogMessage("ERROR",a,s)))},performance=(a,s)=>{currentLogLevel<=0&&(s==="start"?console.time(`\u23F1\uFE0F ${a}`):console.timeEnd(`\u23F1\uFE0F ${a}`))};setLogLevel(2);const logger={debug:debug$1,info,warn,error,performance,setLogLevel};var l=()=>{var a,s,c;try{let u=((a=globalThis.navigator)==null?void 0:a.userAgent).match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(u[1]==="Chrome")return parseInt(u[2])<100||((c=(s=globalThis.chrome.runtime)==null?void 0:s.getManifest())==null?void 0:c.manifest_version)===2}catch{return!1}return!1},o=(Nr=class{constructor({area:a="sync",allCopied:s=!1,copiedKeyList:c=[]}={}){de(this,Gn);de(this,jn);de(this,Kt,void 0);de(this,Mt,void 0);de(this,Ft,void 0);de(this,yn,void 0);de(this,Ut,new Map);de(this,En,void 0);Re(this,"isCopied",a=>this.hasWebApi&&(this.allCopied||this.copiedKeySet.has(a)));de(this,bn,!1);Re(this,"getExtStorageApi",()=>{var a,s;return((a=globalThis.browser)==null?void 0:a.storage)||((s=globalThis.chrome)==null?void 0:s.storage)});Re(this,"isWatchSupported",()=>this.hasExtensionApi);Re(this,"keyNamespace","");Re(this,"isValidKey",a=>a.startsWith(this.keyNamespace));Re(this,"getNamespacedKey",a=>`${this.keyNamespace}${a}`);Re(this,"getUnnamespacedKey",a=>a.slice(this.keyNamespace.length));Re(this,"rawGetAll",()=>{var a;return(a=M(this,Mt))==null?void 0:a.get()});Re(this,"getAll",async()=>{let a=await this.rawGetAll();return Object.entries(a).filter(([s])=>this.isValidKey(s)).reduce((s,[c,u])=>(s[this.getUnnamespacedKey(c)]=u,s),{})});Re(this,"copy",async a=>{var d,h;let s=a===void 0;if(!s&&!this.copiedKeySet.has(a)||!this.allCopied||!this.hasExtensionApi)return!1;let c=this.allCopied?await this.rawGetAll():await M(this,Mt).get((s?[...this.copiedKeySet]:[a]).map(this.getNamespacedKey));if(!c)return!1;let u=!1;for(let p in c){let m=c[p],f=(d=M(this,Ft))==null?void 0:d.getItem(p);(h=M(this,Ft))==null||h.setItem(p,m),u||(u=m!==f)}return u});Re(this,"rawGet",async a=>{var s;return this.hasExtensionApi?(await M(this,Mt).get(a))[a]:this.isCopied(a)?(s=M(this,Ft))==null?void 0:s.getItem(a):null});Re(this,"rawSet",async(a,s)=>{var c;return this.isCopied(a)&&((c=M(this,Ft))==null||c.setItem(a,s)),this.hasExtensionApi&&await M(this,Mt).set({[a]:s}),null});Re(this,"clear",async(a=!1)=>{var s;a&&((s=M(this,Ft))==null||s.clear()),await M(this,Mt).clear()});Re(this,"rawRemove",async a=>{var s;this.isCopied(a)&&((s=M(this,Ft))==null||s.removeItem(a)),this.hasExtensionApi&&await M(this,Mt).remove(a)});Re(this,"removeAll",async()=>{let a=await this.rawGetAll(),s=Object.keys(a);await Promise.all(s.map(this.rawRemove))});Re(this,"watch",a=>{let s=this.isWatchSupported();return s&&M(this,Bn).call(this,a),s});de(this,Bn,a=>{var s;for(let c in a){let u=this.getNamespacedKey(c),d=((s=M(this,Ut).get(u))==null?void 0:s.callbackSet)||new Set;if(d.add(a[c]),d.size>1)continue;let h=(p,m)=>{if(m!==this.area||!p[u])return;let f=M(this,Ut).get(u);if(!f)throw new Error(`Storage comms does not exist for nsKey: ${u}`);Promise.all([this.parseValue(p[u].newValue),this.parseValue(p[u].oldValue)]).then(([_,y])=>{for(let E of f.callbackSet)E({newValue:_,oldValue:y},m)})};M(this,Kt).onChanged.addListener(h),M(this,Ut).set(u,{callbackSet:d,listener:h})}});Re(this,"unwatch",a=>{let s=this.isWatchSupported();return s&&Te(this,Gn,Rr).call(this,a),s});Re(this,"unwatchAll",()=>Te(this,jn,kr).call(this));this.setCopiedKeySet(c),Ie(this,yn,a),Ie(this,bn,s);try{this.hasWebApi&&(s||c.length>0)&&Ie(this,Ft,window.localStorage)}catch{}try{this.hasExtensionApi&&(Ie(this,Kt,this.getExtStorageApi()),l()?Ie(this,Mt,pify(M(this,Kt)[this.area],{exclude:["getBytesInUse"],errorFirst:!1})):Ie(this,Mt,M(this,Kt)[this.area]))}catch{}}get primaryClient(){return M(this,Mt)}get secondaryClient(){return M(this,Ft)}get area(){return M(this,yn)}get hasWebApi(){try{return typeof window<"u"&&!!window.localStorage}catch(a){return console.error(a),!1}}get copiedKeySet(){return M(this,En)}get allCopied(){return M(this,bn)}get hasExtensionApi(){try{return!!this.getExtStorageApi()}catch(a){return console.error(a),!1}}setCopiedKeySet(a){Ie(this,En,new Set(a))}async getItem(a){return this.get(a)}async setItem(a,s){await this.set(a,s)}async removeItem(a){return this.remove(a)}},Kt=new WeakMap,Mt=new WeakMap,Ft=new WeakMap,yn=new WeakMap,Ut=new WeakMap,En=new WeakMap,bn=new WeakMap,Bn=new WeakMap,Gn=new WeakSet,Rr=function(a){for(let s in a){let c=this.getNamespacedKey(s),u=a[s],d=M(this,Ut).get(c);d&&(d.callbackSet.delete(u),d.callbackSet.size===0&&(M(this,Ut).delete(c),M(this,Kt).onChanged.removeListener(d.listener)))}},jn=new WeakSet,kr=function(){M(this,Ut).forEach(({listener:a})=>M(this,Kt).onChanged.removeListener(a)),M(this,Ut).clear()},Nr),g=class extends o{constructor(){super(...arguments);Re(this,"get",async s=>{let c=this.getNamespacedKey(s),u=await this.rawGet(c);return this.parseValue(u)});Re(this,"set",async(s,c)=>{let u=this.getNamespacedKey(s),d=JSON.stringify(c);return this.rawSet(u,d)});Re(this,"remove",async s=>{let c=this.getNamespacedKey(s);return this.rawRemove(c)});Re(this,"setNamespace",s=>{this.keyNamespace=s});Re(this,"parseValue",async s=>{try{if(s!==void 0)return JSON.parse(s)}catch(c){console.error(c)}})}};class ModelNickname{constructor(){Re(this,"db");Re(this,"KEY","modelNickname");this.db=new g({area:"local"})}async saveModelNickname(s,c,u){const d=await this.db.get(this.KEY)||{};d[s]={model_name:c,...u&&{model_avatar:u}},await this.db.set(this.KEY,d)}async getModelNicknameByID(s){return(await this.db.get(this.KEY)||{})[s]}async getAllModelNicknames(){return await this.db.get(this.KEY)||{}}}const getAllModelNicknames=async()=>await new ModelNickname().getAllModelNicknames(),getModelNicknameByID=async a=>await new ModelNickname().getModelNicknameByID(a),saveModelNickname=async({model_id:a,model_name:s,model_avatar:c})=>await new ModelNickname().saveModelNickname(a,s,c);var browserPolyfill={exports:{}};(function(a,s){(function(c,u){u(a)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:commonjsGlobal,function(c){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)c.exports=globalThis.browser;else{const u="The message port closed before a response was received.",d=h=>{const p={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(p).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class m extends WeakMap{constructor(k,R=void 0){super(R),this.createItem=k}get(k){return this.has(k)||this.set(k,this.createItem(k)),super.get(k)}}const f=C=>C&&typeof C=="object"&&typeof C.then=="function",_=(C,k)=>(...R)=>{h.runtime.lastError?C.reject(new Error(h.runtime.lastError.message)):k.singleCallbackArg||R.length<=1&&k.singleCallbackArg!==!1?C.resolve(R[0]):C.resolve(R)},y=C=>C==1?"argument":"arguments",E=(C,k)=>function(R,...N){if(N.length<k.minArgs)throw new Error(`Expected at least ${k.minArgs} ${y(k.minArgs)} for ${C}(), got ${N.length}`);if(N.length>k.maxArgs)throw new Error(`Expected at most ${k.maxArgs} ${y(k.maxArgs)} for ${C}(), got ${N.length}`);return new Promise((F,L)=>{if(k.fallbackToNoCallback)try{R[C](...N,_({resolve:F,reject:L},k))}catch(X){console.warn(`${C} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,X),R[C](...N),k.fallbackToNoCallback=!1,k.noCallback=!0,F()}else k.noCallback?(R[C](...N),F()):R[C](...N,_({resolve:F,reject:L},k))})},b=(C,k,R)=>new Proxy(k,{apply(N,F,L){return R.call(F,C,...L)}});let T=Function.call.bind(Object.prototype.hasOwnProperty);const A=(C,k={},R={})=>{let N=Object.create(null),F={has(X,V){return V in C||V in N},get(X,V,H){if(V in N)return N[V];if(!(V in C))return;let ee=C[V];if(typeof ee=="function")if(typeof k[V]=="function")ee=b(C,C[V],k[V]);else if(T(R,V)){let Q=E(V,R[V]);ee=b(C,C[V],Q)}else ee=ee.bind(C);else if(typeof ee=="object"&&ee!==null&&(T(k,V)||T(R,V)))ee=A(ee,k[V],R[V]);else if(T(R,"*"))ee=A(ee,k[V],R["*"]);else return Object.defineProperty(N,V,{configurable:!0,enumerable:!0,get(){return C[V]},set(Q){C[V]=Q}}),ee;return N[V]=ee,ee},set(X,V,H,ee){return V in N?N[V]=H:C[V]=H,!0},defineProperty(X,V,H){return Reflect.defineProperty(N,V,H)},deleteProperty(X,V){return Reflect.deleteProperty(N,V)}},L=Object.create(C);return new Proxy(L,F)},v=C=>({addListener(k,R,...N){k.addListener(C.get(R),...N)},hasListener(k,R){return k.hasListener(C.get(R))},removeListener(k,R){k.removeListener(C.get(R))}}),S=new m(C=>typeof C!="function"?C:function(k){const R=A(k,{},{getContent:{minArgs:0,maxArgs:0}});C(R)}),O=new m(C=>typeof C!="function"?C:function(k,R,N){let F=!1,L,X=new Promise(Q=>{L=function(Z){F=!0,Q(Z)}}),V;try{V=C(k,R,L)}catch(Q){V=Promise.reject(Q)}const H=V!==!0&&f(V);return V!==!0&&!H&&!F?!1:((Q=>{Q.then(Z=>{N(Z)},Z=>{let K;Z&&(Z instanceof Error||typeof Z.message=="string")?K=Z.message:K="An unexpected error occurred",N({__mozWebExtensionPolyfillReject__:!0,message:K})}).catch(Z=>{console.error("Failed to send onMessage rejected reply",Z)})})(H?V:X),!0)}),I=({reject:C,resolve:k},R)=>{h.runtime.lastError?h.runtime.lastError.message===u?k():C(new Error(h.runtime.lastError.message)):R&&R.__mozWebExtensionPolyfillReject__?C(new Error(R.message)):k(R)},x=(C,k,R,...N)=>{if(N.length<k.minArgs)throw new Error(`Expected at least ${k.minArgs} ${y(k.minArgs)} for ${C}(), got ${N.length}`);if(N.length>k.maxArgs)throw new Error(`Expected at most ${k.maxArgs} ${y(k.maxArgs)} for ${C}(), got ${N.length}`);return new Promise((F,L)=>{const X=I.bind(null,{resolve:F,reject:L});N.push(X),R.sendMessage(...N)})},P={devtools:{network:{onRequestFinished:v(S)}},runtime:{onMessage:v(O),onMessageExternal:v(O),sendMessage:x.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:x.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},w={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return p.privacy={network:{"*":w},services:{"*":w},websites:{"*":w}},A(h,P,p)};c.exports=d(chrome)}})})(browserPolyfill);var browserPolyfillExports=browserPolyfill.exports;const originalBrowser=getDefaultExportFromCjs(browserPolyfillExports),browser=originalBrowser,storage$2=new g,storage2=new g({area:"local"}),DEFAULT_URL_REWRITE_URL="http://127.0.0.1:11434",isUrlRewriteEnabled=async()=>await storage$2.get("urlRewriteEnabled")??!1,setUrlRewriteEnabled=async a=>{await storage$2.set("urlRewriteEnabled",a)},getIsAutoCORSFix=async()=>{try{return await storage2.get("autoCORSFix")??!0}catch{return!0}},setAutoCORSFix=async a=>{await storage2.set("autoCORSFix",a)},getOllamaEnabled=async()=>{try{return await storage$2.get("ollamaEnabledStatus")??!0}catch{return!0}},getRewriteUrl=async()=>{const a=await storage$2.get("rewriteUrl");return!a||a.trim()===""?DEFAULT_URL_REWRITE_URL:a},setRewriteUrl=async a=>{await storage$2.set("rewriteUrl",a)},getAdvancedOllamaSettings=async()=>{const[a,s,c]=await Promise.all([isUrlRewriteEnabled(),getRewriteUrl(),getIsAutoCORSFix()]);return{isEnableRewriteUrl:a,rewriteUrl:s,autoCORSFix:c}},copilotResumeLastChat=async()=>await storage$2.get("copilotResumeLastChat"),webUIResumeLastChat=async()=>await storage$2.get("webUIResumeLastChat"),customOllamaHeaders=async()=>await storage$2.get("customOllamaHeaders")||[],setCustomOllamaHeaders=async a=>{await storage$2.set("customOllamaHeaders",a)},getCustomOllamaHeaders=async()=>{const a=await customOllamaHeaders(),s={};for(const c of a)s[c.key]=c.value;return s},getTotalFilePerKB=async()=>await storage$2.get("totalFilePerKB")||5,setTotalFilePerKB=async a=>{await storage$2.set("totalFilePerKB",a)},getNoOfRetrievedDocs=async()=>await storage$2.get("noOfRetrievedDocs")||4,setNoOfRetrievedDocs=async a=>{await storage$2.set("noOfRetrievedDocs",a)};/**
* @license lucide-react v0.350.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
* @license lucide-react v0.350.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const toKebabCase=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
* @license lucide-react v0.350.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const createLucideIcon=(a,s)=>{const c=reactExports.forwardRef(({color:u="currentColor",size:d=24,strokeWidth:h=2,absoluteStrokeWidth:p,className:m="",children:f,..._},y)=>reactExports.createElement("svg",{ref:y,...defaultAttributes,width:d,height:d,stroke:u,strokeWidth:p?Number(h)*24/Number(d):h,className:["lucide",`lucide-${toKebabCase(a)}`,m].join(" "),..._},[...s.map(([E,b])=>reactExports.createElement(E,b)),...Array.isArray(f)?f:[f]]));return c.displayName=`${a}`,c},getCustomHeaders=({headers:a})=>{try{if(!a)return{};if(a=={})return{};if(!Array.isArray(a))return{};const s={};for(const c of a)c&&typeof c.key=="string"&&c.value!==void 0&&(s[c.key]=c.value);return s}catch(s){return console.error(s,a),{}}},getAllOpenAIModels=async({baseUrl:a,apiKey:s,customHeaders:c=[]})=>{try{const u=`${a}/models`,d=s?{Authorization:`Bearer ${s}`,...getCustomHeaders({headers:c})}:{...getCustomHeaders({headers:c})},h=new AbortController,p=setTimeout(()=>h.abort(),1e4),m=await fetch(u,{headers:d,signal:h.signal});if(clearTimeout(p),m.url=="https://generativelanguage.googleapis.com/v1beta/openai/models"){const f=`https://generativelanguage.googleapis.com/v1beta/models?key=${s}`;return(await(await fetch(f,{signal:h.signal})).json()).models.map(_=>({id:_.name.replace(/^models\//,""),name:_.name.replace(/^models\//,"")}))}return m.ok?a==="https://api.together.xyz/v1"?(await m.json()).map(f=>({id:f.id,name:f.display_name})):(await m.json()).data:[]}catch(u){return u instanceof DOMException&&u.name==="AbortError"?console.error("Request timed out"):console.error(u),[]}},cleanUrl=a=>a.endsWith("/")?a.slice(0,-1):a,generateID$1=()=>"openai-xxxx-xxx-xxxx".replace(/[x]/g,()=>Math.floor(Math.random()*16).toString(16));class OpenAIModelDb{constructor(){Re(this,"db");Re(this,"getAll",async()=>new Promise((s,c)=>{this.db.get(null,u=>{if(chrome.runtime.lastError)c(chrome.runtime.lastError);else{const d=Object.keys(u).map(h=>u[h]);s(d)}})}));Re(this,"create",async s=>new Promise((c,u)=>{this.db.set({[s.id]:s},()=>{chrome.runtime.lastError?u(chrome.runtime.lastError):c()})}));Re(this,"getById",async s=>new Promise((c,u)=>{this.db.get(s,d=>{chrome.runtime.lastError?u(chrome.runtime.lastError):c(d[s])})}));Re(this,"update",async s=>new Promise((c,u)=>{this.db.set({[s.id]:s},()=>{chrome.runtime.lastError?u(chrome.runtime.lastError):c()})}));Re(this,"delete",async s=>new Promise((c,u)=>{this.db.remove(s,()=>{chrome.runtime.lastError?u(chrome.runtime.lastError):c()})}));this.db=chrome.storage.local}}const addOpenAICofig=async({name:a,baseUrl:s,apiKey:c,provider:u,headers:d})=>{const h=new OpenAIModelDb,p=generateID$1(),m={id:p,name:a,baseUrl:cleanUrl(s),apiKey:c,createdAt:Date.now(),db_type:"openai",provider:u,headers:d};return await h.create(m),p},getAllOpenAIConfig=async()=>(await new OpenAIModelDb().getAll()).filter(a=>(a==null?void 0:a.db_type)==="openai"),updateOpenAIConfig=async({id:a,name:s,baseUrl:c,apiKey:u,headers:d})=>{const h=new OpenAIModelDb,p={...await h.getById(a),id:a,name:s,baseUrl:cleanUrl(c),apiKey:u,createdAt:Date.now(),db_type:"openai",headers:d||[]};return await h.update(p),p},deleteOpenAIConfig=async a=>{await new OpenAIModelDb().delete(a),await deleteAllModelsByProviderId(a)},getOpenAIConfigById=async a=>await new OpenAIModelDb().getById(a),DEFAULT_SYNC_CONFIG={enabled:!0,proxyEndpoint:"",retry:{maxRetries:5,initialDelay:1e3,maxDelay:6e4},retention:{expirationTime:14*24*60*60*1e3},batch:{enabled:!0,maxSize:10,batchWindow:2e3},network:{wifiOnly:!1}};async function getSyncConfig(){return new Promise(a=>{chrome.storage.local.get("syncConfig",s=>{a(s.syncConfig||DEFAULT_SYNC_CONFIG)})})}async function updateSyncConfig(a){return new Promise(s=>{chrome.storage.local.get("syncConfig",c=>{const u={...c.syncConfig||DEFAULT_SYNC_CONFIG,...a};chrome.storage.local.set({syncConfig:u},()=>{s()})})})}var SyncEventType=(a=>(a.DATA_CHANGE="data-change",a.SYNC_SUCCESS="sync-success",a.SYNC_ERROR="sync-error",a.SYNC_QUEUE_UPDATED="sync-queue-updated",a.CONNECTIVITY_CHANGE="connectivity-change",a))(SyncEventType||{});class SyncEventManager{constructor(){Re(this,"listeners",{})}addEventListener(s,c){this.listeners[s]||(this.listeners[s]=[]),this.listeners[s].push(c)}removeEventListener(s,c){this.listeners[s]&&(this.listeners[s]=this.listeners[s].filter(u=>u!==c))}dispatchEvent(s){this.listeners[s.type]&&this.listeners[s.type].forEach(c=>{try{c(s.payload)}catch(u){console.error(`Error in sync event listener for ${s.type}:`,u)}})}}const syncEventManager=new SyncEventManager;class SyncQueue{constructor(){Re(this,"queue",[]);Re(this,"isInitialized",!1);this.initialize()}async initialize(){if(!this.isInitialized)try{const s=await new Promise(c=>{chrome.storage.local.get("syncQueue",u=>{c(u)})});this.queue=s.syncQueue||[],this.isInitialized=!0,await this.cleanExpiredItems(),this.notifyQueueUpdated()}catch(s){console.error("Error initializing sync queue:",s),this.isInitialized=!0,this.queue=[]}}async addItem(s){await this.ensureInitialized();const c={...s,id:this.generateId(),createdAt:Date.now(),retryCount:0,priority:this.getPriorityForEntityType(s.entityType)};return this.queue.push(c),await this.persistQueue(),c.id}async getNextBatch(){await this.ensureInitialized();const s=await getSyncConfig(),c=s.batch.enabled?s.batch.maxSize:1;return[...this.queue].sort((u,d)=>u.priority-d.priority).slice(0,c)}async markSuccess(s){await this.ensureInitialized(),this.queue=this.queue.filter(c=>!s.includes(c.id)),await this.persistQueue()}async markFailure(s){await this.ensureInitialized();const c=this.queue.find(u=>u.id===s);c&&(c.retryCount++,await this.persistQueue())}async getStats(){return await this.ensureInitialized(),{total:this.queue.length,pending:this.queue.filter(s=>s.retryCount===0).length,retry:this.queue.filter(s=>s.retryCount>0).length}}async cleanExpiredItems(){await this.ensureInitialized();const s=await getSyncConfig(),c=Date.now(),u=s.retention.expirationTime,d=this.queue.length;return this.queue=this.queue.filter(h=>c-h.createdAt<u),d!==this.queue.length&&await this.persistQueue(),d-this.queue.length}async persistQueue(){return new Promise(s=>{chrome.storage.local.set({syncQueue:this.queue},()=>{this.notifyQueueUpdated(),s()})})}async ensureInitialized(){this.isInitialized||await this.initialize()}generateId(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}getPriorityForEntityType(s){switch(s){case"document":return 1;case"knowledge":return 2;case"page":return 2;case"message":return 3;case"model":return 4;case"vector":return 5;default:return 10}}notifyQueueUpdated(){syncEventManager.dispatchEvent({type:SyncEventType.SYNC_QUEUE_UPDATED,payload:{queueLength:this.queue.length},timestamp:Date.now()})}}const syncQueue=new SyncQueue;class SyncWorker{constructor(){Re(this,"isSyncing",!1);Re(this,"abortController",null);Re(this,"networkOnline",!0);this.initNetworkListeners(),this.networkOnline=this.isOnline()}initNetworkListeners(){typeof window<"u"?(window.addEventListener("online",this.handleNetworkChange.bind(this)),window.addEventListener("offline",this.handleNetworkChange.bind(this))):typeof self<"u"&&(self.addEventListener("online",this.handleNetworkChange.bind(this)),self.addEventListener("offline",this.handleNetworkChange.bind(this)))}isOnline(){return typeof navigator<"u"&&"onLine"in navigator?navigator.onLine:!0}async startSync(){if(!(this.isSyncing||!(await getSyncConfig()).enabled)&&this.networkOnline){this.isSyncing=!0,this.abortController=new AbortController;try{const s=await syncQueue.getNextBatch();if(s.length===0){this.isSyncing=!1;return}await this.processBatch(s)}catch(s){console.error("Error in sync process:",s),syncEventManager.dispatchEvent({type:SyncEventType.SYNC_ERROR,payload:{error:s},timestamp:Date.now()})}finally{this.isSyncing=!1,this.abortController=null}}}stopSync(){this.abortController&&(this.abortController.abort(),this.isSyncing=!1,this.abortController=null)}async processBatch(s){var d;const c=await getSyncConfig(),u=[];for(const h of s)try{if((d=this.abortController)!=null&&d.signal.aborted)break;if(h.retryCount>=c.retry.maxRetries){await syncQueue.markSuccess([h.id]);continue}await this.syncItem(h),u.push(h.id),syncEventManager.dispatchEvent({type:SyncEventType.SYNC_SUCCESS,payload:{item:h},timestamp:Date.now()})}catch(p){console.error(`Error syncing item ${h.id}:`,p),await syncQueue.markFailure(h.id),syncEventManager.dispatchEvent({type:SyncEventType.SYNC_ERROR,payload:{error:p,item:h},timestamp:Date.now()});const m=this.calculateRetryDelay(h.retryCount,c);setTimeout(()=>{this.startSync()},m)}u.length>0&&await syncQueue.markSuccess(u),(await syncQueue.getStats()).total>0&&this.startSync()}async syncItem(s){var u;const c=await getSyncConfig();if(!c.proxyEndpoint)throw new Error("Proxy endpoint not configured");try{const d=await fetch(c.proxyEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operation:s.operation,entityType:s.entityType,data:s.data,timestamp:Date.now(),syncId:s.id}),signal:(u=this.abortController)==null?void 0:u.signal});if(!d.ok)throw new Error(`Sync failed with status: ${d.status}`);return}catch(d){throw d.name==="AbortError"?new Error("Sync aborted"):d}}calculateRetryDelay(s,c){const{initialDelay:u,maxDelay:d}=c.retry,h=u*Math.pow(2,s);return Math.min(h,d)}handleNetworkChange(){const s=this.networkOnline;this.networkOnline=this.isOnline(),syncEventManager.dispatchEvent({type:SyncEventType.CONNECTIVITY_CHANGE,payload:{online:this.networkOnline},timestamp:Date.now()}),!s&&this.networkOnline&&this.startSync()}}const syncWorker=new SyncWorker;var SyncServiceStatus=(a=>(a.DISABLED="disabled",a.IDLE="idle",a.SYNCING="syncing",a.ERROR="error",a))(SyncServiceStatus||{});class SyncService{constructor(){Re(this,"status","idle");Re(this,"statusListeners",[]);Re(this,"initialized",!1);Re(this,"syncInterval",null);this.initialize()}async initialize(){if(this.initialized)return;const s=await getSyncConfig();this.status=s.enabled?"idle":"disabled",syncEventManager.addEventListener(SyncEventType.SYNC_SUCCESS,this.handleSyncSuccess.bind(this)),syncEventManager.addEventListener(SyncEventType.SYNC_ERROR,this.handleSyncError.bind(this)),syncEventManager.addEventListener(SyncEventType.CONNECTIVITY_CHANGE,this.handleConnectivityChange.bind(this)),this.setupPeriodicSync(),this.initialized=!0}setupPeriodicSync(){this.syncInterval!==null&&(clearInterval(this.syncInterval),this.syncInterval=null),this.syncInterval=Number(setInterval(()=>{this.synchronize()},15*60*1e3))}async trackChange(s){await syncQueue.addItem({operation:s.operation,entityType:s.entityType,data:s.data}),syncEventManager.dispatchEvent({type:SyncEventType.DATA_CHANGE,payload:s,timestamp:Date.now()}),this.synchronize()}async synchronize(){try{if(!(await getSyncConfig()).enabled)return;this.setStatus("syncing"),syncWorker.startSync()}catch(s){console.error("Error starting synchronization:",s),this.setStatus("error")}}stopSync(){try{syncWorker.stopSync(),this.setStatus("idle")}catch(s){console.error("Error stopping synchronization:",s)}}async setEnabled(s){try{await updateSyncConfig({enabled:s}),this.setStatus(s?"idle":"disabled"),s?this.synchronize():this.stopSync()}catch(c){console.error("Error setting sync enabled state:",c)}}async setProxyEndpoint(s){try{await updateSyncConfig({proxyEndpoint:s})}catch(c){console.error("Error setting proxy endpoint:",c)}}getStatus(){return this.status}addStatusListener(s){this.statusListeners.push(s),s(this.status)}removeStatusListener(s){this.statusListeners=this.statusListeners.filter(c=>c!==s)}async getQueueStats(){return syncQueue.getStats()}async cleanExpiredItems(){return syncQueue.cleanExpiredItems()}setStatus(s){this.status!==s&&(this.status=s,this.statusListeners.forEach(c=>{try{c(s)}catch(u){console.error("Error in sync status listener:",u)}}))}handleSyncSuccess(){this.setStatus("idle")}handleSyncError(){this.setStatus("error")}handleConnectivityChange(s){!s.online&&this.status==="syncing"&&this.setStatus("idle")}}const syncService=new SyncService,syncHooks={document:{afterCreate:a=>{syncService.trackChange({entityType:"document",operation:"create",data:a})},afterUpdate:a=>{syncService.trackChange({entityType:"document",operation:"update",data:a})},afterDelete:a=>{syncService.trackChange({entityType:"document",operation:"delete",data:{id:a}})}},model:{afterCreate:a=>{syncService.trackChange({entityType:"model",operation:"create",data:a})},afterUpdate:a=>{syncService.trackChange({entityType:"model",operation:"update",data:a})},afterDelete:a=>{syncService.trackChange({entityType:"model",operation:"delete",data:{id:a}})}},knowledge:{afterCreate:a=>{syncService.trackChange({entityType:"knowledge",operation:"create",data:a})},afterUpdate:a=>{syncService.trackChange({entityType:"knowledge",operation:"update",data:a})},afterDelete:a=>{syncService.trackChange({entityType:"knowledge",operation:"delete",data:{id:a}})}},vector:{afterCreate:a=>{syncService.trackChange({entityType:"vector",operation:"create",data:a})},afterUpdate:a=>{syncService.trackChange({entityType:"vector",operation:"update",data:a})},afterDelete:a=>{syncService.trackChange({entityType:"vector",operation:"delete",data:{id:a}})}},message:{afterCreate:a=>{syncService.trackChange({entityType:"message",operation:"create",data:a})},afterUpdate:a=>{syncService.trackChange({entityType:"message",operation:"update",data:a})},afterDelete:a=>{syncService.trackChange({entityType:"message",operation:"delete",data:{id:a}})}},page:{afterCreate:a=>{syncService.trackChange({entityType:"page",operation:"create",data:a})},afterUpdate:a=>{syncService.trackChange({entityType:"page",operation:"update",data:a})},afterDelete:a=>{syncService.trackChange({entityType:"page",operation:"delete",data:{id:a}})}}},generateID=()=>"model-xxxx-xxxx-xxx-xxxx".replace(/[x]/g,()=>Math.floor(Math.random()*16).toString(16)),removeModelSuffix=a=>a.replace(/_model-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{3,4}-[a-f0-9]{4}/,"").replace(/_lmstudio_openai-[a-f0-9]{4}-[a-f0-9]{3}-[a-f0-9]{4}/,"").replace(/_llamafile_openai-[a-f0-9]{4}-[a-f0-9]{3}-[a-f0-9]{4}/,"").replace(/_ollama2_openai-[a-f0-9]{4}-[a-f0-9]{3}-[a-f0-9]{4}/,"").replace(/_llamacpp_openai-[a-f0-9]{4}-[a-f0-9]{3}-[a-f0-9]{4}/,""),isLMStudioModel=a=>/_lmstudio_openai-[a-f0-9]{4}-[a-f0-9]{3}-[a-f0-9]{4}/.test(a),isLlamafileModel=a=>/_llamafile_openai-[a-f0-9]{4}-[a-f0-9]{3}-[a-f0-9]{4}/.test(a),isLLamaCppModel=a=>/_llamacpp_openai-[a-f0-9]{4}-[a-f0-9]{3}-[a-f0-9]{4}/.test(a),isOllamaModel=a=>/_ollama2_openai-[a-f0-9]{4}-[a-f0-9]{3}-[a-f0-9]{4}/.test(a),getLMStudioModelId=a=>{const s=/_lmstudio_openai-[a-f0-9]{4}-[a-f0-9]{3}-[a-f0-9]{4}/,c=a.match(s);if(c){const u=c[0],d=c[0].replace("_lmstudio_openai-","");return{model_id:u,provider_id:d}}return null},getOllamaModelId=a=>{const s=/_ollama2_openai-[a-f0-9]{4}-[a-f0-9]{3}-[a-f0-9]{4}/,c=a.match(s);if(c){const u=c[0],d=c[0].replace("_ollama2_openai-","");return{model_id:u,provider_id:d}}return null},getLlamafileModelId=a=>{const s=/_llamafile_openai-[a-f0-9]{4}-[a-f0-9]{3}-[a-f0-9]{4}/,c=a.match(s);if(c){const u=c[0],d=c[0].replace("_llamafile_openai-","");return{model_id:u,provider_id:d}}return null},getLLamaCppModelId=a=>{const s=/_llamacpp_openai-[a-f0-9]{4}-[a-f0-9]{3}-[a-f0-9]{4}/,c=a.match(s);if(c){const u=c[0],d=c[0].replace("_llamacpp_openai-","");return{model_id:u,provider_id:d}}return null},isCustomModel=a=>isLMStudioModel(a)||isLlamafileModel(a)||isOllamaModel(a)||isLLamaCppModel(a)?!0:/_model-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{3,4}-[a-f0-9]{4}/.test(a);class ModelDb{constructor(){Re(this,"db");Re(this,"getAll",async()=>new Promise((s,c)=>{this.db.get(null,u=>{if(chrome.runtime.lastError)c(chrome.runtime.lastError);else{const d=Object.keys(u).map(h=>u[h]);s(d)}})}));Re(this,"create",async s=>new Promise((c,u)=>{this.db.set({[s.id]:s},()=>{chrome.runtime.lastError?u(chrome.runtime.lastError):(syncHooks.model.afterCreate(s),c())})}));Re(this,"getById",async s=>new Promise((c,u)=>{this.db.get(s,d=>{chrome.runtime.lastError?u(chrome.runtime.lastError):c(d[s])})}));Re(this,"update",async s=>new Promise((c,u)=>{this.db.set({[s.id]:s},()=>{chrome.runtime.lastError?u(chrome.runtime.lastError):(syncHooks.model.afterUpdate(s),c())})}));Re(this,"delete",async s=>new Promise((c,u)=>{this.db.remove(s,()=>{chrome.runtime.lastError?u(chrome.runtime.lastError):(syncHooks.model.afterDelete(s),c())})}));Re(this,"deleteAll",async()=>new Promise((s,c)=>{this.db.clear(()=>{chrome.runtime.lastError?c(chrome.runtime.lastError):s()})}));this.db=chrome.storage.local}}const createManyModels=async a=>{const s=new ModelDb,c=a.map(u=>({...u,lookup:`${u.model_id}_${u.provider_id}`,id:`${u.model_id}_${generateID()}`,db_type:"openai_model",name:u.name.replaceAll(/accounts\/[^\/]+\/models\//g,"")}));for(const u of c)await isLookupExist(u.lookup)||await s.create(u)},createModel=async(a,s,c,u)=>{const d=new ModelDb,h=generateID(),p={id:`${a}_${h}`,model_id:a,name:s,provider_id:c,lookup:`${a}_${c}`,db_type:"openai_model",model_type:u};return await d.create(p),p},getModelInfo=async a=>{const s=new ModelDb;if(isLMStudioModel(a)){const c=getLMStudioModelId(a);if(!c)throw new Error("Invalid LMStudio model ID");return{model_id:a.replace(/_lmstudio_openai-[a-f0-9]{4}-[a-f0-9]{3}-[a-f0-9]{4}/,""),provider_id:`openai-${c.provider_id}`,name:a.replace(/_lmstudio_openai-[a-f0-9]{4}-[a-f0-9]{3}-[a-f0-9]{4}/,"")}}if(isLlamafileModel(a)){const c=getLlamafileModelId(a);if(!c)throw new Error("Invalid LMStudio model ID");return{model_id:a.replace(/_llamafile_openai-[a-f0-9]{4}-[a-f0-9]{3}-[a-f0-9]{4}/,""),provider_id:`openai-${c.provider_id}`,name:a.replace(/_llamafile_openai-[a-f0-9]{4}-[a-f0-9]{3}-[a-f0-9]{4}/,"")}}if(isLLamaCppModel(a)){const c=getLLamaCppModelId(a);if(!c)throw new Error("Invalid LMStudio model ID");return{model_id:a.replace(/_llamacpp_openai-[a-f0-9]{4}-[a-f0-9]{3}-[a-f0-9]{4}/,""),provider_id:`openai-${c.provider_id}`,name:a.replace(/_llamacpp_openai-[a-f0-9]{4}-[a-f0-9]{3}-[a-f0-9]{4}/,"")}}if(isOllamaModel(a)){const c=getOllamaModelId(a);if(!c)throw new Error("Invalid LMStudio model ID");return{model_id:a.replace(/_ollama2_openai-[a-f0-9]{4}-[a-f0-9]{3}-[a-f0-9]{4}/,""),provider_id:`openai-${c.provider_id}`,name:a.replace(/_ollama2_openai-[a-f0-9]{4}-[a-f0-9]{3}-[a-f0-9]{4}/,"")}}return await s.getById(a)},getAllCustomModels=async()=>{const a=new ModelDb,s=await getAllModelNicknames(),c=(await a.getAll()).filter(u=>(u==null?void 0:u.db_type)==="openai_model");return(await Promise.all(c.map(async u=>{const d=await getOpenAIConfigById(u.provider_id);return{...u,provider:d}}))).map(u=>{var d,h;return{...u,nickname:((d=s[u.id])==null?void 0:d.model_name)||u.model_id,avatar:((h=s[u.id])==null?void 0:h.model_avatar)||void 0}})},deleteModel$1=async a=>{await new ModelDb().delete(a)},deleteAllModelsByProviderId=async a=>{const s=new ModelDb,c=(await s.getAll()).filter(u=>u.provider_id===a);for(const u of c)await s.delete(u.id)},isLookupExist=async a=>!!(await new ModelDb().getAll()).find(s=>(s==null?void 0:s.lookup)===a),dynamicFetchLMStudio=async({baseUrl:a,providerId:s,customHeaders:c=[]})=>(await getAllOpenAIModels({baseUrl:a,customHeaders:c})).map(u=>({name:(u==null?void 0:u.name)||(u==null?void 0:u.id),id:`${u==null?void 0:u.id}_lmstudio_${s}`,provider:s,lookup:`${u==null?void 0:u.id}_${s}`,provider_id:s})),dynamicFetchLLamaCpp=async({baseUrl:a,providerId:s,customHeaders:c=[]})=>(await getAllOpenAIModels({baseUrl:a,customHeaders:c})).map(u=>({name:(u==null?void 0:u.name)||(u==null?void 0:u.id),id:`${u==null?void 0:u.id}_llamacpp_${s}`,provider:s,lookup:`${u==null?void 0:u.id}_${s}`,provider_id:s})),dynamicFetchOllama2=async({baseUrl:a,providerId:s,customHeaders:c=[]})=>(await getAllOpenAIModels({baseUrl:a,customHeaders:c})).map(u=>({name:(u==null?void 0:u.name)||(u==null?void 0:u.id),id:`${u==null?void 0:u.id}_ollama2_${s}`,provider:s,lookup:`${u==null?void 0:u.id}_${s}`,provider_id:s})),dynamicFetchLlamafile=async({baseUrl:a,providerId:s,customHeaders:c=[]})=>(await getAllOpenAIModels({baseUrl:a,customHeaders:c})).map(u=>({name:(u==null?void 0:u.name)||(u==null?void 0:u.id),id:`${u==null?void 0:u.id}_llamafile_${s}`,provider:s,lookup:`${u==null?void 0:u.id}_${s}`,provider_id:s})),ollamaFormatAllCustomModels=async(a="all")=>{try{const[s,c]=await Promise.all([getAllCustomModels(),getAllOpenAIConfig()]),u=await getAllModelNicknames(),d=c.filter(P=>P.provider==="lmstudio"),h=c.filter(P=>P.provider==="llamafile"),p=c.filter(P=>P.provider==="ollama2"),m=c.filter(P=>P.provider==="llamacpp"),f=d.map(P=>dynamicFetchLMStudio({baseUrl:P.baseUrl,providerId:P.id,customHeaders:P.headers})),_=h.map(P=>dynamicFetchLlamafile({baseUrl:P.baseUrl,providerId:P.id,customHeaders:P.headers})),y=p.map(P=>dynamicFetchOllama2({baseUrl:P.baseUrl,providerId:P.id,customHeaders:P.headers})),E=m.map(P=>dynamicFetchLLamaCpp({baseUrl:P.baseUrl,providerId:P.id,customHeaders:P.headers})),b=await Promise.all(f),T=await Promise.all(_),A=await Promise.all(y),v=await Promise.all(E),S=b.flat(),O=T.flat(),I=A.flat(),x=v.flat();return[...a!=="all"?s.filter(P=>P.model_type===a):s,...S,...O,...I,...x].map(P=>{var w;return{name:P.name,model:P.id,modified_at:"",provider:((w=c.find(C=>C.id===P.provider_id))==null?void 0:w.provider)||"custom",size:0,digest:"",details:{parent_model:"",format:"",family:"",families:[],parameter_size:"",quantization_level:""}}}).map(P=>{var w,C;return{...P,nickname:((w=u[P.model])==null?void 0:w.model_name)||P.name,avatar:((C=u[P.model])==null?void 0:C.model_avatar)||void 0}})}catch(s){return console.error(s),[]}};var decamelize=function(a,s){if(typeof a!="string")throw new TypeError("Expected a string");return s=typeof s>"u"?"_":s,a.replace(/([a-z\d])([A-Z])/g,"$1"+s+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+s+"$2").toLowerCase()};const snakeCase=getDefaultExportFromCjs(decamelize);var camelcase={exports:{}};const UPPERCASE=/[\p{Lu}]/u,LOWERCASE=/[\p{Ll}]/u,LEADING_CAPITAL=/^[\p{Lu}](?![\p{Lu}])/gu,IDENTIFIER=/([\p{Alpha}\p{N}_]|$)/u,SEPARATORS=/[_.\- ]+/,LEADING_SEPARATORS=new RegExp("^"+SEPARATORS.source),SEPARATORS_AND_IDENTIFIER=new RegExp(SEPARATORS.source+IDENTIFIER.source,"gu"),NUMBERS_AND_IDENTIFIER=new RegExp("\\d+"+IDENTIFIER.source,"gu"),preserveCamelCase=(a,s,c)=>{let u=!1,d=!1,h=!1;for(let p=0;p<a.length;p++){const m=a[p];u&&UPPERCASE.test(m)?(a=a.slice(0,p)+"-"+a.slice(p),u=!1,h=d,d=!0,p++):d&&h&&LOWERCASE.test(m)?(a=a.slice(0,p-1)+"-"+a.slice(p-1),h=d,d=!1,u=!0):(u=s(m)===m&&c(m)!==m,h=d,d=c(m)===m&&s(m)!==m)}return a},preserveConsecutiveUppercase=(a,s)=>(LEADING_CAPITAL.lastIndex=0,a.replace(LEADING_CAPITAL,c=>s(c))),postProcess=(a,s)=>(SEPARATORS_AND_IDENTIFIER.lastIndex=0,NUMBERS_AND_IDENTIFIER.lastIndex=0,a.replace(SEPARATORS_AND_IDENTIFIER,(c,u)=>s(u)).replace(NUMBERS_AND_IDENTIFIER,c=>s(c))),camelCase$1=(a,s)=>{if(!(typeof a=="string"||Array.isArray(a)))throw new TypeError("Expected the input to be `string | string[]`");if(s={pascalCase:!1,preserveConsecutiveUppercase:!1,...s},Array.isArray(a)?a=a.map(d=>d.trim()).filter(d=>d.length).join("-"):a=a.trim(),a.length===0)return"";const c=s.locale===!1?d=>d.toLowerCase():d=>d.toLocaleLowerCase(s.locale),u=s.locale===!1?d=>d.toUpperCase():d=>d.toLocaleUpperCase(s.locale);return a.length===1?s.pascalCase?u(a):c(a):(a!==c(a)&&(a=preserveCamelCase(a,c,u)),a=a.replace(LEADING_SEPARATORS,""),s.preserveConsecutiveUppercase?a=preserveConsecutiveUppercase(a,c):a=c(a),s.pascalCase&&(a=u(a.charAt(0))+a.slice(1)),postProcess(a,u))};camelcase.exports=camelCase$1,camelcase.exports.default=camelCase$1;function keyToJson(a,s){return(s==null?void 0:s[a])||snakeCase(a)}function mapKeys(a,s,c){const u={};for(const d in a)Object.hasOwn(a,d)&&(u[s(d,c)]=a[d]);return u}function shallowCopy(a){return Array.isArray(a)?[...a]:{...a}}function replaceSecrets(a,s){const c=shallowCopy(a);for(const[u,d]of Object.entries(s)){const[h,...p]=u.split(".").reverse();let m=c;for(const f of p.reverse()){if(m[f]===void 0)break;m[f]=shallowCopy(m[f]),m=m[f]}m[h]!==void 0&&(m[h]={lc:1,type:"secret",id:[d]})}return c}function get_lc_unique_name(a){const s=Object.getPrototypeOf(a);return typeof a.lc_name=="function"&&(typeof s.lc_name!="function"||a.lc_name()!==s.lc_name())?a.lc_name():a.name}class Serializable{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,get_lc_unique_name(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(s,...c){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_kwargs=s||{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof Serializable||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const s={},c={},u=Object.keys(this.lc_kwargs).reduce((d,h)=>(d[h]=h in this?this[h]:this.lc_kwargs[h],d),{});for(let d=Object.getPrototypeOf(this);d;d=Object.getPrototypeOf(d))Object.assign(s,Reflect.get(d,"lc_aliases",this)),Object.assign(c,Reflect.get(d,"lc_secrets",this)),Object.assign(u,Reflect.get(d,"lc_attributes",this));return Object.keys(c).forEach(d=>{let h=this,p=u;const[m,...f]=d.split(".").reverse();for(const _ of f.reverse()){if(!(_ in h)||h[_]===void 0)return;(!(_ in p)||p[_]===void 0)&&(typeof h[_]=="object"&&h[_]!=null?p[_]={}:Array.isArray(h[_])&&(p[_]=[])),h=h[_],p=p[_]}m in h&&h[m]!==void 0&&(p[m]=p[m]||h[m])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:mapKeys(Object.keys(c).length?replaceSecrets(u,c):u,keyToJson,s)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}function mergeContent(a,s){return typeof a=="string"?typeof s=="string"?a+s:[{type:"text",text:a},...s]:Array.isArray(s)?[...a,...s]:[...a,{type:"text",text:s}]}class BaseMessage extends Serializable{get lc_aliases(){return{additional_kwargs:"additional_kwargs"}}get text(){return typeof this.content=="string"?this.content:""}constructor(s,c){typeof s=="string"&&(s={content:s,additional_kwargs:c}),s.additional_kwargs||(s.additional_kwargs={}),super(s),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=s.name,this.content=s.content,this.additional_kwargs=s.additional_kwargs}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}toChunk(){const s=this._getType();if(s==="human")return new HumanMessageChunk({...this});if(s==="ai")return new AIMessageChunk({...this});if(s==="system")return new SystemMessageChunk({...this});if(s==="function")return new FunctionMessageChunk({...this});if(ChatMessage.isInstance(this))return new ChatMessageChunk({...this});throw new Error("Unknown message type.")}}function isOpenAIToolCallArray(a){return Array.isArray(a)&&a.every(s=>typeof s.index=="number")}class BaseMessageChunk extends BaseMessage{static _mergeAdditionalKwargs(s,c){var d,h;const u={...s};for(const[p,m]of Object.entries(c))if(u[p]===void 0)u[p]=m;else{if(typeof u[p]!=typeof m)throw new Error(`additional_kwargs[${p}] already exists in the message chunk, but with a different type.`);if(typeof u[p]=="string")u[p]=u[p]+m;else if(!Array.isArray(u[p])&&typeof u[p]=="object")u[p]=this._mergeAdditionalKwargs(u[p],m);else if(p==="tool_calls"&&isOpenAIToolCallArray(u[p])&&isOpenAIToolCallArray(m))for(const f of m)((d=u[p])==null?void 0:d[f.index])!==void 0?u[p]=(h=u[p])==null?void 0:h.map((_,y)=>y!==f.index?_:{..._,...f,function:{name:f.function.name??_.function.name,arguments:(_.function.arguments??"")+(f.function.arguments??"")}}):u[p][f.index]=f;else throw new Error(`additional_kwargs[${p}] already exists in this message chunk.`)}return u}}class HumanMessage extends BaseMessage{static lc_name(){return"HumanMessage"}_getType(){return"human"}}class HumanMessageChunk extends BaseMessageChunk{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}concat(s){return new HumanMessageChunk({content:mergeContent(this.content,s.content),additional_kwargs:HumanMessageChunk._mergeAdditionalKwargs(this.additional_kwargs,s.additional_kwargs)})}}class AIMessage extends BaseMessage{static lc_name(){return"AIMessage"}_getType(){return"ai"}}class AIMessageChunk extends BaseMessageChunk{static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}concat(s){return new AIMessageChunk({content:mergeContent(this.content,s.content),additional_kwargs:AIMessageChunk._mergeAdditionalKwargs(this.additional_kwargs,s.additional_kwargs)})}}class SystemMessage extends BaseMessage{static lc_name(){return"SystemMessage"}_getType(){return"system"}}class SystemMessageChunk extends BaseMessageChunk{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}concat(s){return new SystemMessageChunk({content:mergeContent(this.content,s.content),additional_kwargs:SystemMessageChunk._mergeAdditionalKwargs(this.additional_kwargs,s.additional_kwargs)})}}class FunctionMessageChunk extends BaseMessageChunk{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(s){return new FunctionMessageChunk({content:mergeContent(this.content,s.content),additional_kwargs:FunctionMessageChunk._mergeAdditionalKwargs(this.additional_kwargs,s.additional_kwargs),name:this.name??""})}}class ToolMessageChunk extends BaseMessageChunk{constructor(s){super(s),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=s.tool_call_id}static lc_name(){return"ToolMessageChunk"}_getType(){return"tool"}concat(s){return new ToolMessageChunk({content:mergeContent(this.content,s.content),additional_kwargs:ToolMessageChunk._mergeAdditionalKwargs(this.additional_kwargs,s.additional_kwargs),tool_call_id:this.tool_call_id})}}class ChatMessage extends BaseMessage{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return ChatMessage}constructor(s,c){typeof s=="string"&&(s={content:s,role:c}),super(s),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=s.role}_getType(){return"generic"}static isInstance(s){return s._getType()==="generic"}}function isBaseMessage(a){return typeof(a==null?void 0:a._getType)=="function"}function isBaseMessageChunk(a){return isBaseMessage(a)&&typeof a.concat=="function"}function coerceMessageLikeToMessage(a){if(typeof a=="string")return new HumanMessage(a);if(isBaseMessage(a))return a;const[s,c]=a;if(s==="human"||s==="user")return new HumanMessage({content:c});if(s==="ai"||s==="assistant")return new AIMessage({content:c});if(s==="system")return new SystemMessage({content:c});throw new Error("Unable to coerce message from array: only human, AI, or system message coercion is currently supported.")}class ChatMessageChunk extends BaseMessageChunk{static lc_name(){return"ChatMessageChunk"}constructor(s,c){typeof s=="string"&&(s={content:s,role:c}),super(s),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=s.role}_getType(){return"generic"}concat(s){return new ChatMessageChunk({content:mergeContent(this.content,s.content),additional_kwargs:ChatMessageChunk._mergeAdditionalKwargs(this.additional_kwargs,s.additional_kwargs),role:this.role})}}function getBufferString(a,s="Human",c="AI"){const u=[];for(const d of a){let h;if(d._getType()==="human")h=s;else if(d._getType()==="ai")h=c;else if(d._getType()==="system")h="System";else if(d._getType()==="function")h="Function";else if(d._getType()==="tool")h="Tool";else if(d._getType()==="generic")h=d.role;else throw new Error(`Got unsupported message type: ${d._getType()}`);const p=d.name?`${d.name}, `:"";u.push(`${h}: ${p}${d.content}`)}return u.join(`
`)}const urlRewriteRuntime=async function(a,s="ollama"){if(browser.runtime&&browser.runtime.id){const{isEnableRewriteUrl:c,rewriteUrl:u,autoCORSFix:d}=await getAdvancedOllamaSettings();if(!d){try{browser.webRequest.onBeforeSendHeaders.removeListener(()=>{})}catch{}return}{const h=new URL(a),p=[`*://${h.hostname}/*`];browser.webRequest.onBeforeSendHeaders.addListener(m=>{let f=`${h.protocol}//${h.hostname}`;c&&u&&s==="ollama"&&(f=u);for(let _=0;_<m.requestHeaders.length;_++)m.requestHeaders[_].name==="Origin"&&(m.requestHeaders[_].value=f);return{requestHeaders:m.requestHeaders}},{urls:p},["blocking","requestHeaders"])}}},storage$1=new g,DEFAULT_CHROME_AI_MODEL={name:"Gemini Nano",model:"chrome::gemini-nano::page-assist",modified_at:"",provider:"chrome",size:0,digest:"",nickname:"Gemini Nano",avatar:void 0,details:{parent_model:"",format:"",family:"",families:[],parameter_size:"",quantization_level:""}},getChromeAIStatus=async()=>await storage$1.get("chromeAIStatus")??!1,getChromeAIModel=async()=>await getChromeAIStatus()?[DEFAULT_CHROME_AI_MODEL]:[],fetcher=async(a,s)=>{const c={...s},u=await getCustomOllamaHeaders();return c.headers={...u,...c==null?void 0:c.headers},fetch(a,c)},storage=new g;new g({area:"local"});const DEFAULT_OLLAMA_URL="http://127.0.0.1:11434",DEFAULT_PAGE_SHARE_URL="https://pageassist.xyz",DEFAULT_RAG_QUESTION_PROMPT="Given the following conversation and a follow up question, rephrase the follow up question to be a standalone question.   Chat History: {chat_history} Follow Up Input: {question} Standalone question:",DEFAUTL_RAG_SYSTEM_PROMPT="You are a helpful AI assistant. Use the following pieces of context to answer the question at the end. If you don't know the answer, just say you don't know. DO NOT try to make up an answer. If the question is not related to the context, politely respond that you are tuned to only answer questions that are related to the context.  {context}  Question: {question} Helpful answer:",DEFAULT_WEBSEARCH_PROMPT=`You are an AI model who is expert at searching the web and answering user's queries.

Generate a response that is informative and relevant to the user's query based on provided search results. the current date and time are {current_date_time}.

\`search-results\` block provides knowledge from the web search results. You can use this information to generate a meaningful response.

<search-results>
 {search_results}
</search-results>
`,DEFAULT_WEBSEARCH_FOLLOWUP_PROMPT=`You will give a follow-up question.  You need to rephrase the follow-up question if needed so it is a standalone question that can be used by the AI model to search the internet.

Example:

Follow-up question: What are the symptoms of a heart attack?

Rephrased question: Symptoms of a heart attack.

Follow-up question: Where is the upcoming Olympics being held?

Rephrased question: Location of the upcoming Olympics.

Follow-up question: Taylor Swift's latest album?

Rephrased question: Name of Taylor Swift's latest album.


Previous Conversation:

{chat_history}

Follow-up question: {question}

Rephrased question:
`,getOllamaURL=async()=>{const a=await storage.get("ollamaURL");return!a||a.length===0?(await urlRewriteRuntime(DEFAULT_OLLAMA_URL),DEFAULT_OLLAMA_URL):(await urlRewriteRuntime(cleanUrl(a)),a)},isOllamaRunning=async()=>{try{const a=await getOllamaURL(),s=await fetcher(`${cleanUrl(a)}`);if(!s.ok)throw new Error(s.statusText);return!0}catch(a){return console.error(a),!1}},getAllModels=async({returnEmpty:a=!1})=>{try{const s=await getAllModelNicknames();if(!await getOllamaEnabled())return[];const c=await getOllamaURL(),u=await fetcher(`${cleanUrl(c)}/api/tags`);if(!u.ok){if(a)return[];throw new Error(u.statusText)}return(await u.json()).models.map(d=>{var h,p;return{...d,nickname:((h=s[d.name])==null?void 0:h.model_name)||d.name,avatar:((p=s[d.name])==null?void 0:p.model_avatar)||void 0}})}catch(s){return console.error(s),[]}},getSelectedModel=async()=>await storage.get("selectedModel"),getEmbeddingModels=async({returnEmpty:a})=>{try{const s=await getAllModels({returnEmpty:a}),c=await ollamaFormatAllCustomModels("embedding");return[...s.map(u=>({...u,provider:"ollama"})),...c]}catch(s){return console.error(s),[]}},deleteModel=async a=>{const s=await getOllamaURL(),c=await fetcher(`${cleanUrl(s)}/api/delete`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a})});if(!c.ok)throw new Error(c.statusText);return"ok"},fetchChatModels=async({returnEmpty:a=!1})=>{var s;try{const c=(s=await getAllModels({returnEmpty:a}))==null?void 0:s.filter(h=>{var p,m,f,_;return!((m=(p=h==null?void 0:h.details)==null?void 0:p.families)!=null&&m.includes("bert"))&&!((_=(f=h==null?void 0:h.details)==null?void 0:f.families)!=null&&_.includes("nomic-bert"))}).map(h=>({...h,provider:"ollama"})),u=await getChromeAIModel(),d=await ollamaFormatAllCustomModels("chat");return[...c,...u,...d]}catch(c){console.error(c);const u=(await getAllModels({returnEmpty:a})).map(p=>({...p,provider:"ollama"})),d=await getChromeAIModel(),h=await ollamaFormatAllCustomModels("chat");return[...u,...d,...h]}},setOllamaURL=async a=>{let s=a;s.startsWith("http://localhost:")&&(s=s.replace("http://localhost:","http://127.0.0.1:")),await storage.set("ollamaURL",cleanUrl(s)),await urlRewriteRuntime(cleanUrl(s))},systemPromptForNonRag=async()=>await storage.get("systemPromptForNonRag"),promptForRag=async()=>{const a=await storage.get("systemPromptForRag"),s=await storage.get("questionPromptForRag");let c=a,u=s;return(!c||c.length===0)&&(c=DEFAUTL_RAG_SYSTEM_PROMPT),(!u||u.length===0)&&(u=DEFAULT_RAG_QUESTION_PROMPT),{ragPrompt:c,ragQuestionPrompt:u}},setSystemPromptForNonRag=async a=>{await storage.set("systemPromptForNonRag",a)},setPromptForRag=async(a,s)=>{await storage.set("systemPromptForRag",a),await storage.set("questionPromptForRag",s)},systemPromptForNonRagOption=async()=>await storage.get("systemPromptForNonRagOption"),defaultEmbeddingModelForRag=async()=>{const a=await storage.get("defaultEmbeddingModel");return!a||a.length===0?null:a},defaultEmbeddingChunkSize=async()=>{const a=await storage.get("defaultEmbeddingChunkSize");return!a||a.length===0?1e3:parseInt(a)},defaultSplittingStrategy=async()=>{const a=await storage.get("defaultSplittingStrategy");return!a||a.length===0?"RecursiveCharacterTextSplitter":a},defaultSsplttingSeparator=async()=>{const a=await storage.get("defaultSplittingSeparator");return!a||a.length===0?"\\n\\n":a},defaultEmbeddingChunkOverlap=async()=>{const a=await storage.get("defaultEmbeddingChunkOverlap");return!a||a.length===0?200:parseInt(a)},setDefaultSplittingStrategy=async a=>{await storage.set("defaultSplittingStrategy",a)},setDefaultSplittingSeparator=async a=>{await storage.set("defaultSplittingSeparator",a)},setDefaultEmbeddingModelForRag=async a=>{await storage.set("defaultEmbeddingModel",a)},setDefaultEmbeddingChunkSize=async a=>{await storage.set("defaultEmbeddingChunkSize",a.toString())},setDefaultEmbeddingChunkOverlap=async a=>{await storage.set("defaultEmbeddingChunkOverlap",a.toString())},saveForRag=async(a,s,c,u,d,h,p)=>{await setDefaultEmbeddingModelForRag(a),await setDefaultEmbeddingChunkSize(s),await setDefaultEmbeddingChunkOverlap(c),await setTotalFilePerKB(u),d&&await setNoOfRetrievedDocs(d),h&&await setDefaultSplittingStrategy(h),p&&await setDefaultSplittingSeparator(p)},getWebSearchPrompt=async()=>{const a=await storage.get("webSearchPrompt");return!a||a.length===0?DEFAULT_WEBSEARCH_PROMPT:a},setWebSearchPrompt=async a=>{await storage.set("webSearchPrompt",a)},geWebSearchFollowUpPrompt=async()=>{const a=await storage.get("webSearchFollowUpPrompt");return!a||a.length===0?DEFAULT_WEBSEARCH_FOLLOWUP_PROMPT:a},setWebSearchFollowUpPrompt=async a=>{await storage.set("webSearchFollowUpPrompt",a)},setWebPrompts=async(a,s)=>{await setWebSearchPrompt(a),await setWebSearchFollowUpPrompt(s)},getPageShareUrl=async()=>{const a=await storage.get("pageShareUrl");return!a||a.length===0?DEFAULT_PAGE_SHARE_URL:a},setPageShareUrl=async a=>{await storage.set("pageShareUrl",a)},defaultOpts$2={xml:!1,decodeEntities:!0},xmlModeDefault={_useHtmlParser2:!0,xmlMode:!0};function flatten(a){return a!=null&&a.xml?typeof a.xml=="boolean"?xmlModeDefault:{...xmlModeDefault,...a.xml}:a??void 0}var ElementType;(function(a){a.Root="root",a.Text="text",a.Directive="directive",a.Comment="comment",a.Script="script",a.Style="style",a.Tag="tag",a.CDATA="cdata",a.Doctype="doctype"})(ElementType||(ElementType={}));function isTag$1(a){return a.type===ElementType.Tag||a.type===ElementType.Script||a.type===ElementType.Style}const Root=ElementType.Root,Text$1=ElementType.Text,Directive=ElementType.Directive,Comment$1=ElementType.Comment,Script=ElementType.Script,Style=ElementType.Style,Tag=ElementType.Tag,CDATA$1=ElementType.CDATA,Doctype=ElementType.Doctype;class Node{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(s){this.parent=s}get previousSibling(){return this.prev}set previousSibling(s){this.prev=s}get nextSibling(){return this.next}set nextSibling(s){this.next=s}cloneNode(s=!1){return cloneNode(this,s)}}class DataNode extends Node{constructor(s){super(),this.data=s}get nodeValue(){return this.data}set nodeValue(s){this.data=s}}class Text extends DataNode{constructor(){super(...arguments),this.type=ElementType.Text}get nodeType(){return 3}}class Comment extends DataNode{constructor(){super(...arguments),this.type=ElementType.Comment}get nodeType(){return 8}}class ProcessingInstruction extends DataNode{constructor(s,c){super(c),this.name=s,this.type=ElementType.Directive}get nodeType(){return 1}}class NodeWithChildren extends Node{constructor(s){super(),this.children=s}get firstChild(){var s;return(s=this.children[0])!==null&&s!==void 0?s:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(s){this.children=s}}class CDATA extends NodeWithChildren{constructor(){super(...arguments),this.type=ElementType.CDATA}get nodeType(){return 4}}class Document extends NodeWithChildren{constructor(){super(...arguments),this.type=ElementType.Root}get nodeType(){return 9}}let Element$1=class extends NodeWithChildren{constructor(a,s,c=[],u=a==="script"?ElementType.Script:a==="style"?ElementType.Style:ElementType.Tag){super(c),this.name=a,this.attribs=s,this.type=u}get nodeType(){return 1}get tagName(){return this.name}set tagName(a){this.name=a}get attributes(){return Object.keys(this.attribs).map(a=>{var s,c;return{name:a,value:this.attribs[a],namespace:(s=this["x-attribsNamespace"])===null||s===void 0?void 0:s[a],prefix:(c=this["x-attribsPrefix"])===null||c===void 0?void 0:c[a]}})}};function isTag(a){return isTag$1(a)}function isCDATA(a){return a.type===ElementType.CDATA}function isText(a){return a.type===ElementType.Text}function isComment(a){return a.type===ElementType.Comment}function isDirective(a){return a.type===ElementType.Directive}function isDocument(a){return a.type===ElementType.Root}function hasChildren(a){return Object.prototype.hasOwnProperty.call(a,"children")}function cloneNode(a,s=!1){let c;if(isText(a))c=new Text(a.data);else if(isComment(a))c=new Comment(a.data);else if(isTag(a)){const u=s?cloneChildren(a.children):[],d=new Element$1(a.name,{...a.attribs},u);u.forEach(h=>h.parent=d),a.namespace!=null&&(d.namespace=a.namespace),a["x-attribsNamespace"]&&(d["x-attribsNamespace"]={...a["x-attribsNamespace"]}),a["x-attribsPrefix"]&&(d["x-attribsPrefix"]={...a["x-attribsPrefix"]}),c=d}else if(isCDATA(a)){const u=s?cloneChildren(a.children):[],d=new CDATA(u);u.forEach(h=>h.parent=d),c=d}else if(isDocument(a)){const u=s?cloneChildren(a.children):[],d=new Document(u);u.forEach(h=>h.parent=d),a["x-mode"]&&(d["x-mode"]=a["x-mode"]),c=d}else if(isDirective(a)){const u=new ProcessingInstruction(a.name,a.data);a["x-name"]!=null&&(u["x-name"]=a["x-name"],u["x-publicId"]=a["x-publicId"],u["x-systemId"]=a["x-systemId"]),c=u}else throw new Error(`Not implemented yet: ${a.type}`);return c.startIndex=a.startIndex,c.endIndex=a.endIndex,a.sourceCodeLocation!=null&&(c.sourceCodeLocation=a.sourceCodeLocation),c}function cloneChildren(a){const s=a.map(c=>cloneNode(c,!0));for(let c=1;c<s.length;c++)s[c].prev=s[c-1],s[c-1].next=s[c];return s}const defaultOpts$1={withStartIndices:!1,withEndIndices:!1,xmlMode:!1};class DomHandler{constructor(s,c,u){this.dom=[],this.root=new Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof c=="function"&&(u=c,c=defaultOpts$1),typeof s=="object"&&(c=s,s=void 0),this.callback=s??null,this.options=c??defaultOpts$1,this.elementCB=u??null}onparserinit(s){this.parser=s}onreset(){this.dom=[],this.root=new Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(s){this.handleCallback(s)}onclosetag(){this.lastNode=null;const s=this.tagStack.pop();this.options.withEndIndices&&(s.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(s)}onopentag(s,c){const u=this.options.xmlMode?ElementType.Tag:void 0,d=new Element$1(s,c,void 0,u);this.addNode(d),this.tagStack.push(d)}ontext(s){const{lastNode:c}=this;if(c&&c.type===ElementType.Text)c.data+=s,this.options.withEndIndices&&(c.endIndex=this.parser.endIndex);else{const u=new Text(s);this.addNode(u),this.lastNode=u}}oncomment(s){if(this.lastNode&&this.lastNode.type===ElementType.Comment){this.lastNode.data+=s;return}const c=new Comment(s);this.addNode(c),this.lastNode=c}oncommentend(){this.lastNode=null}oncdatastart(){const s=new Text(""),c=new CDATA([s]);this.addNode(c),s.parent=c,this.lastNode=s}oncdataend(){this.lastNode=null}onprocessinginstruction(s,c){const u=new ProcessingInstruction(s,c);this.addNode(u)}handleCallback(s){if(typeof this.callback=="function")this.callback(s,this.dom);else if(s)throw s}addNode(s){const c=this.tagStack[this.tagStack.length-1],u=c.children[c.children.length-1];this.options.withStartIndices&&(s.startIndex=this.parser.startIndex),this.options.withEndIndices&&(s.endIndex=this.parser.endIndex),c.children.push(s),u&&(s.prev=u,u.next=s),s.parent=c,this.lastNode=null}}const htmlDecodeTree=new Uint16Array('\u1D41<\xD5\u0131\u028A\u049D\u057B\u05D0\u0675\u06DE\u07A2\u07D6\u080F\u0A4A\u0A91\u0DA1\u0E6D\u0F09\u0F26\u10CA\u1228\u12E1\u1415\u149D\u14C3\u14DF\u1525\0\0\0\0\0\0\u156B\u16CD\u198D\u1C12\u1DDD\u1F7E\u2060\u21B0\u228D\u23C0\u23FB\u2442\u2824\u2912\u2D08\u2E48\u2FCE\u3016\u32BA\u3639\u37AC\u38FE\u3A28\u3A71\u3AE0\u3B2E\u0800EMabcfglmnoprstu\\bfms\x7F\x84\x8B\x90\x95\x98\xA6\xB3\xB9\xC8\xCFlig\u803B\xC6\u40C6P\u803B&\u4026cute\u803B\xC1\u40C1reve;\u4102\u0100iyx}rc\u803B\xC2\u40C2;\u4410r;\uC000\u{1D504}rave\u803B\xC0\u40C0pha;\u4391acr;\u4100d;\u6A53\u0100gp\x9D\xA1on;\u4104f;\uC000\u{1D538}plyFunction;\u6061ing\u803B\xC5\u40C5\u0100cs\xBE\xC3r;\uC000\u{1D49C}ign;\u6254ilde\u803B\xC3\u40C3ml\u803B\xC4\u40C4\u0400aceforsu\xE5\xFB\xFE\u0117\u011C\u0122\u0127\u012A\u0100cr\xEA\xF2kslash;\u6216\u0176\xF6\xF8;\u6AE7ed;\u6306y;\u4411\u0180crt\u0105\u010B\u0114ause;\u6235noullis;\u612Ca;\u4392r;\uC000\u{1D505}pf;\uC000\u{1D539}eve;\u42D8c\xF2\u0113mpeq;\u624E\u0700HOacdefhilorsu\u014D\u0151\u0156\u0180\u019E\u01A2\u01B5\u01B7\u01BA\u01DC\u0215\u0273\u0278\u027Ecy;\u4427PY\u803B\xA9\u40A9\u0180cpy\u015D\u0162\u017Aute;\u4106\u0100;i\u0167\u0168\u62D2talDifferentialD;\u6145leys;\u612D\u0200aeio\u0189\u018E\u0194\u0198ron;\u410Cdil\u803B\xC7\u40C7rc;\u4108nint;\u6230ot;\u410A\u0100dn\u01A7\u01ADilla;\u40B8terDot;\u40B7\xF2\u017Fi;\u43A7rcle\u0200DMPT\u01C7\u01CB\u01D1\u01D6ot;\u6299inus;\u6296lus;\u6295imes;\u6297o\u0100cs\u01E2\u01F8kwiseContourIntegral;\u6232eCurly\u0100DQ\u0203\u020FoubleQuote;\u601Duote;\u6019\u0200lnpu\u021E\u0228\u0247\u0255on\u0100;e\u0225\u0226\u6237;\u6A74\u0180git\u022F\u0236\u023Aruent;\u6261nt;\u622FourIntegral;\u622E\u0100fr\u024C\u024E;\u6102oduct;\u6210nterClockwiseContourIntegral;\u6233oss;\u6A2Fcr;\uC000\u{1D49E}p\u0100;C\u0284\u0285\u62D3ap;\u624D\u0580DJSZacefios\u02A0\u02AC\u02B0\u02B4\u02B8\u02CB\u02D7\u02E1\u02E6\u0333\u048D\u0100;o\u0179\u02A5trahd;\u6911cy;\u4402cy;\u4405cy;\u440F\u0180grs\u02BF\u02C4\u02C7ger;\u6021r;\u61A1hv;\u6AE4\u0100ay\u02D0\u02D5ron;\u410E;\u4414l\u0100;t\u02DD\u02DE\u6207a;\u4394r;\uC000\u{1D507}\u0100af\u02EB\u0327\u0100cm\u02F0\u0322ritical\u0200ADGT\u0300\u0306\u0316\u031Ccute;\u40B4o\u0174\u030B\u030D;\u42D9bleAcute;\u42DDrave;\u4060ilde;\u42DCond;\u62C4ferentialD;\u6146\u0470\u033D\0\0\0\u0342\u0354\0\u0405f;\uC000\u{1D53B}\u0180;DE\u0348\u0349\u034D\u40A8ot;\u60DCqual;\u6250ble\u0300CDLRUV\u0363\u0372\u0382\u03CF\u03E2\u03F8ontourIntegra\xEC\u0239o\u0274\u0379\0\0\u037B\xBB\u0349nArrow;\u61D3\u0100eo\u0387\u03A4ft\u0180ART\u0390\u0396\u03A1rrow;\u61D0ightArrow;\u61D4e\xE5\u02CAng\u0100LR\u03AB\u03C4eft\u0100AR\u03B3\u03B9rrow;\u67F8ightArrow;\u67FAightArrow;\u67F9ight\u0100AT\u03D8\u03DErrow;\u61D2ee;\u62A8p\u0241\u03E9\0\0\u03EFrrow;\u61D1ownArrow;\u61D5erticalBar;\u6225n\u0300ABLRTa\u0412\u042A\u0430\u045E\u047F\u037Crrow\u0180;BU\u041D\u041E\u0422\u6193ar;\u6913pArrow;\u61F5reve;\u4311eft\u02D2\u043A\0\u0446\0\u0450ightVector;\u6950eeVector;\u695Eector\u0100;B\u0459\u045A\u61BDar;\u6956ight\u01D4\u0467\0\u0471eeVector;\u695Fector\u0100;B\u047A\u047B\u61C1ar;\u6957ee\u0100;A\u0486\u0487\u62A4rrow;\u61A7\u0100ct\u0492\u0497r;\uC000\u{1D49F}rok;\u4110\u0800NTacdfglmopqstux\u04BD\u04C0\u04C4\u04CB\u04DE\u04E2\u04E7\u04EE\u04F5\u0521\u052F\u0536\u0552\u055D\u0560\u0565G;\u414AH\u803B\xD0\u40D0cute\u803B\xC9\u40C9\u0180aiy\u04D2\u04D7\u04DCron;\u411Arc\u803B\xCA\u40CA;\u442Dot;\u4116r;\uC000\u{1D508}rave\u803B\xC8\u40C8ement;\u6208\u0100ap\u04FA\u04FEcr;\u4112ty\u0253\u0506\0\0\u0512mallSquare;\u65FBerySmallSquare;\u65AB\u0100gp\u0526\u052Aon;\u4118f;\uC000\u{1D53C}silon;\u4395u\u0100ai\u053C\u0549l\u0100;T\u0542\u0543\u6A75ilde;\u6242librium;\u61CC\u0100ci\u0557\u055Ar;\u6130m;\u6A73a;\u4397ml\u803B\xCB\u40CB\u0100ip\u056A\u056Fsts;\u6203onentialE;\u6147\u0280cfios\u0585\u0588\u058D\u05B2\u05CCy;\u4424r;\uC000\u{1D509}lled\u0253\u0597\0\0\u05A3mallSquare;\u65FCerySmallSquare;\u65AA\u0370\u05BA\0\u05BF\0\0\u05C4f;\uC000\u{1D53D}All;\u6200riertrf;\u6131c\xF2\u05CB\u0600JTabcdfgorst\u05E8\u05EC\u05EF\u05FA\u0600\u0612\u0616\u061B\u061D\u0623\u066C\u0672cy;\u4403\u803B>\u403Emma\u0100;d\u05F7\u05F8\u4393;\u43DCreve;\u411E\u0180eiy\u0607\u060C\u0610dil;\u4122rc;\u411C;\u4413ot;\u4120r;\uC000\u{1D50A};\u62D9pf;\uC000\u{1D53E}eater\u0300EFGLST\u0635\u0644\u064E\u0656\u065B\u0666qual\u0100;L\u063E\u063F\u6265ess;\u62DBullEqual;\u6267reater;\u6AA2ess;\u6277lantEqual;\u6A7Eilde;\u6273cr;\uC000\u{1D4A2};\u626B\u0400Aacfiosu\u0685\u068B\u0696\u069B\u069E\u06AA\u06BE\u06CARDcy;\u442A\u0100ct\u0690\u0694ek;\u42C7;\u405Eirc;\u4124r;\u610ClbertSpace;\u610B\u01F0\u06AF\0\u06B2f;\u610DizontalLine;\u6500\u0100ct\u06C3\u06C5\xF2\u06A9rok;\u4126mp\u0144\u06D0\u06D8ownHum\xF0\u012Fqual;\u624F\u0700EJOacdfgmnostu\u06FA\u06FE\u0703\u0707\u070E\u071A\u071E\u0721\u0728\u0744\u0778\u078B\u078F\u0795cy;\u4415lig;\u4132cy;\u4401cute\u803B\xCD\u40CD\u0100iy\u0713\u0718rc\u803B\xCE\u40CE;\u4418ot;\u4130r;\u6111rave\u803B\xCC\u40CC\u0180;ap\u0720\u072F\u073F\u0100cg\u0734\u0737r;\u412AinaryI;\u6148lie\xF3\u03DD\u01F4\u0749\0\u0762\u0100;e\u074D\u074E\u622C\u0100gr\u0753\u0758ral;\u622Bsection;\u62C2isible\u0100CT\u076C\u0772omma;\u6063imes;\u6062\u0180gpt\u077F\u0783\u0788on;\u412Ef;\uC000\u{1D540}a;\u4399cr;\u6110ilde;\u4128\u01EB\u079A\0\u079Ecy;\u4406l\u803B\xCF\u40CF\u0280cfosu\u07AC\u07B7\u07BC\u07C2\u07D0\u0100iy\u07B1\u07B5rc;\u4134;\u4419r;\uC000\u{1D50D}pf;\uC000\u{1D541}\u01E3\u07C7\0\u07CCr;\uC000\u{1D4A5}rcy;\u4408kcy;\u4404\u0380HJacfos\u07E4\u07E8\u07EC\u07F1\u07FD\u0802\u0808cy;\u4425cy;\u440Cppa;\u439A\u0100ey\u07F6\u07FBdil;\u4136;\u441Ar;\uC000\u{1D50E}pf;\uC000\u{1D542}cr;\uC000\u{1D4A6}\u0580JTaceflmost\u0825\u0829\u082C\u0850\u0863\u09B3\u09B8\u09C7\u09CD\u0A37\u0A47cy;\u4409\u803B<\u403C\u0280cmnpr\u0837\u083C\u0841\u0844\u084Dute;\u4139bda;\u439Bg;\u67EAlacetrf;\u6112r;\u619E\u0180aey\u0857\u085C\u0861ron;\u413Ddil;\u413B;\u441B\u0100fs\u0868\u0970t\u0500ACDFRTUVar\u087E\u08A9\u08B1\u08E0\u08E6\u08FC\u092F\u095B\u0390\u096A\u0100nr\u0883\u088FgleBracket;\u67E8row\u0180;BR\u0899\u089A\u089E\u6190ar;\u61E4ightArrow;\u61C6eiling;\u6308o\u01F5\u08B7\0\u08C3bleBracket;\u67E6n\u01D4\u08C8\0\u08D2eeVector;\u6961ector\u0100;B\u08DB\u08DC\u61C3ar;\u6959loor;\u630Aight\u0100AV\u08EF\u08F5rrow;\u6194ector;\u694E\u0100er\u0901\u0917e\u0180;AV\u0909\u090A\u0910\u62A3rrow;\u61A4ector;\u695Aiangle\u0180;BE\u0924\u0925\u0929\u62B2ar;\u69CFqual;\u62B4p\u0180DTV\u0937\u0942\u094CownVector;\u6951eeVector;\u6960ector\u0100;B\u0956\u0957\u61BFar;\u6958ector\u0100;B\u0965\u0966\u61BCar;\u6952ight\xE1\u039Cs\u0300EFGLST\u097E\u098B\u0995\u099D\u09A2\u09ADqualGreater;\u62DAullEqual;\u6266reater;\u6276ess;\u6AA1lantEqual;\u6A7Dilde;\u6272r;\uC000\u{1D50F}\u0100;e\u09BD\u09BE\u62D8ftarrow;\u61DAidot;\u413F\u0180npw\u09D4\u0A16\u0A1Bg\u0200LRlr\u09DE\u09F7\u0A02\u0A10eft\u0100AR\u09E6\u09ECrrow;\u67F5ightArrow;\u67F7ightArrow;\u67F6eft\u0100ar\u03B3\u0A0Aight\xE1\u03BFight\xE1\u03CAf;\uC000\u{1D543}er\u0100LR\u0A22\u0A2CeftArrow;\u6199ightArrow;\u6198\u0180cht\u0A3E\u0A40\u0A42\xF2\u084C;\u61B0rok;\u4141;\u626A\u0400acefiosu\u0A5A\u0A5D\u0A60\u0A77\u0A7C\u0A85\u0A8B\u0A8Ep;\u6905y;\u441C\u0100dl\u0A65\u0A6FiumSpace;\u605Flintrf;\u6133r;\uC000\u{1D510}nusPlus;\u6213pf;\uC000\u{1D544}c\xF2\u0A76;\u439C\u0480Jacefostu\u0AA3\u0AA7\u0AAD\u0AC0\u0B14\u0B19\u0D91\u0D97\u0D9Ecy;\u440Acute;\u4143\u0180aey\u0AB4\u0AB9\u0ABEron;\u4147dil;\u4145;\u441D\u0180gsw\u0AC7\u0AF0\u0B0Eative\u0180MTV\u0AD3\u0ADF\u0AE8ediumSpace;\u600Bhi\u0100cn\u0AE6\u0AD8\xEB\u0AD9eryThi\xEE\u0AD9ted\u0100GL\u0AF8\u0B06reaterGreate\xF2\u0673essLes\xF3\u0A48Line;\u400Ar;\uC000\u{1D511}\u0200Bnpt\u0B22\u0B28\u0B37\u0B3Areak;\u6060BreakingSpace;\u40A0f;\u6115\u0680;CDEGHLNPRSTV\u0B55\u0B56\u0B6A\u0B7C\u0BA1\u0BEB\u0C04\u0C5E\u0C84\u0CA6\u0CD8\u0D61\u0D85\u6AEC\u0100ou\u0B5B\u0B64ngruent;\u6262pCap;\u626DoubleVerticalBar;\u6226\u0180lqx\u0B83\u0B8A\u0B9Bement;\u6209ual\u0100;T\u0B92\u0B93\u6260ilde;\uC000\u2242\u0338ists;\u6204reater\u0380;EFGLST\u0BB6\u0BB7\u0BBD\u0BC9\u0BD3\u0BD8\u0BE5\u626Fqual;\u6271ullEqual;\uC000\u2267\u0338reater;\uC000\u226B\u0338ess;\u6279lantEqual;\uC000\u2A7E\u0338ilde;\u6275ump\u0144\u0BF2\u0BFDownHump;\uC000\u224E\u0338qual;\uC000\u224F\u0338e\u0100fs\u0C0A\u0C27tTriangle\u0180;BE\u0C1A\u0C1B\u0C21\u62EAar;\uC000\u29CF\u0338qual;\u62ECs\u0300;EGLST\u0C35\u0C36\u0C3C\u0C44\u0C4B\u0C58\u626Equal;\u6270reater;\u6278ess;\uC000\u226A\u0338lantEqual;\uC000\u2A7D\u0338ilde;\u6274ested\u0100GL\u0C68\u0C79reaterGreater;\uC000\u2AA2\u0338essLess;\uC000\u2AA1\u0338recedes\u0180;ES\u0C92\u0C93\u0C9B\u6280qual;\uC000\u2AAF\u0338lantEqual;\u62E0\u0100ei\u0CAB\u0CB9verseElement;\u620CghtTriangle\u0180;BE\u0CCB\u0CCC\u0CD2\u62EBar;\uC000\u29D0\u0338qual;\u62ED\u0100qu\u0CDD\u0D0CuareSu\u0100bp\u0CE8\u0CF9set\u0100;E\u0CF0\u0CF3\uC000\u228F\u0338qual;\u62E2erset\u0100;E\u0D03\u0D06\uC000\u2290\u0338qual;\u62E3\u0180bcp\u0D13\u0D24\u0D4Eset\u0100;E\u0D1B\u0D1E\uC000\u2282\u20D2qual;\u6288ceeds\u0200;EST\u0D32\u0D33\u0D3B\u0D46\u6281qual;\uC000\u2AB0\u0338lantEqual;\u62E1ilde;\uC000\u227F\u0338erset\u0100;E\u0D58\u0D5B\uC000\u2283\u20D2qual;\u6289ilde\u0200;EFT\u0D6E\u0D6F\u0D75\u0D7F\u6241qual;\u6244ullEqual;\u6247ilde;\u6249erticalBar;\u6224cr;\uC000\u{1D4A9}ilde\u803B\xD1\u40D1;\u439D\u0700Eacdfgmoprstuv\u0DBD\u0DC2\u0DC9\u0DD5\u0DDB\u0DE0\u0DE7\u0DFC\u0E02\u0E20\u0E22\u0E32\u0E3F\u0E44lig;\u4152cute\u803B\xD3\u40D3\u0100iy\u0DCE\u0DD3rc\u803B\xD4\u40D4;\u441Eblac;\u4150r;\uC000\u{1D512}rave\u803B\xD2\u40D2\u0180aei\u0DEE\u0DF2\u0DF6cr;\u414Cga;\u43A9cron;\u439Fpf;\uC000\u{1D546}enCurly\u0100DQ\u0E0E\u0E1AoubleQuote;\u601Cuote;\u6018;\u6A54\u0100cl\u0E27\u0E2Cr;\uC000\u{1D4AA}ash\u803B\xD8\u40D8i\u016C\u0E37\u0E3Cde\u803B\xD5\u40D5es;\u6A37ml\u803B\xD6\u40D6er\u0100BP\u0E4B\u0E60\u0100ar\u0E50\u0E53r;\u603Eac\u0100ek\u0E5A\u0E5C;\u63DEet;\u63B4arenthesis;\u63DC\u0480acfhilors\u0E7F\u0E87\u0E8A\u0E8F\u0E92\u0E94\u0E9D\u0EB0\u0EFCrtialD;\u6202y;\u441Fr;\uC000\u{1D513}i;\u43A6;\u43A0usMinus;\u40B1\u0100ip\u0EA2\u0EADncareplan\xE5\u069Df;\u6119\u0200;eio\u0EB9\u0EBA\u0EE0\u0EE4\u6ABBcedes\u0200;EST\u0EC8\u0EC9\u0ECF\u0EDA\u627Aqual;\u6AAFlantEqual;\u627Cilde;\u627Eme;\u6033\u0100dp\u0EE9\u0EEEuct;\u620Fortion\u0100;a\u0225\u0EF9l;\u621D\u0100ci\u0F01\u0F06r;\uC000\u{1D4AB};\u43A8\u0200Ufos\u0F11\u0F16\u0F1B\u0F1FOT\u803B"\u4022r;\uC000\u{1D514}pf;\u611Acr;\uC000\u{1D4AC}\u0600BEacefhiorsu\u0F3E\u0F43\u0F47\u0F60\u0F73\u0FA7\u0FAA\u0FAD\u1096\u10A9\u10B4\u10BEarr;\u6910G\u803B\xAE\u40AE\u0180cnr\u0F4E\u0F53\u0F56ute;\u4154g;\u67EBr\u0100;t\u0F5C\u0F5D\u61A0l;\u6916\u0180aey\u0F67\u0F6C\u0F71ron;\u4158dil;\u4156;\u4420\u0100;v\u0F78\u0F79\u611Cerse\u0100EU\u0F82\u0F99\u0100lq\u0F87\u0F8Eement;\u620Builibrium;\u61CBpEquilibrium;\u696Fr\xBB\u0F79o;\u43A1ght\u0400ACDFTUVa\u0FC1\u0FEB\u0FF3\u1022\u1028\u105B\u1087\u03D8\u0100nr\u0FC6\u0FD2gleBracket;\u67E9row\u0180;BL\u0FDC\u0FDD\u0FE1\u6192ar;\u61E5eftArrow;\u61C4eiling;\u6309o\u01F5\u0FF9\0\u1005bleBracket;\u67E7n\u01D4\u100A\0\u1014eeVector;\u695Dector\u0100;B\u101D\u101E\u61C2ar;\u6955loor;\u630B\u0100er\u102D\u1043e\u0180;AV\u1035\u1036\u103C\u62A2rrow;\u61A6ector;\u695Biangle\u0180;BE\u1050\u1051\u1055\u62B3ar;\u69D0qual;\u62B5p\u0180DTV\u1063\u106E\u1078ownVector;\u694FeeVector;\u695Cector\u0100;B\u1082\u1083\u61BEar;\u6954ector\u0100;B\u1091\u1092\u61C0ar;\u6953\u0100pu\u109B\u109Ef;\u611DndImplies;\u6970ightarrow;\u61DB\u0100ch\u10B9\u10BCr;\u611B;\u61B1leDelayed;\u69F4\u0680HOacfhimoqstu\u10E4\u10F1\u10F7\u10FD\u1119\u111E\u1151\u1156\u1161\u1167\u11B5\u11BB\u11BF\u0100Cc\u10E9\u10EEHcy;\u4429y;\u4428FTcy;\u442Ccute;\u415A\u0280;aeiy\u1108\u1109\u110E\u1113\u1117\u6ABCron;\u4160dil;\u415Erc;\u415C;\u4421r;\uC000\u{1D516}ort\u0200DLRU\u112A\u1134\u113E\u1149ownArrow\xBB\u041EeftArrow\xBB\u089AightArrow\xBB\u0FDDpArrow;\u6191gma;\u43A3allCircle;\u6218pf;\uC000\u{1D54A}\u0272\u116D\0\0\u1170t;\u621Aare\u0200;ISU\u117B\u117C\u1189\u11AF\u65A1ntersection;\u6293u\u0100bp\u118F\u119Eset\u0100;E\u1197\u1198\u628Fqual;\u6291erset\u0100;E\u11A8\u11A9\u6290qual;\u6292nion;\u6294cr;\uC000\u{1D4AE}ar;\u62C6\u0200bcmp\u11C8\u11DB\u1209\u120B\u0100;s\u11CD\u11CE\u62D0et\u0100;E\u11CD\u11D5qual;\u6286\u0100ch\u11E0\u1205eeds\u0200;EST\u11ED\u11EE\u11F4\u11FF\u627Bqual;\u6AB0lantEqual;\u627Dilde;\u627FTh\xE1\u0F8C;\u6211\u0180;es\u1212\u1213\u1223\u62D1rset\u0100;E\u121C\u121D\u6283qual;\u6287et\xBB\u1213\u0580HRSacfhiors\u123E\u1244\u1249\u1255\u125E\u1271\u1276\u129F\u12C2\u12C8\u12D1ORN\u803B\xDE\u40DEADE;\u6122\u0100Hc\u124E\u1252cy;\u440By;\u4426\u0100bu\u125A\u125C;\u4009;\u43A4\u0180aey\u1265\u126A\u126Fron;\u4164dil;\u4162;\u4422r;\uC000\u{1D517}\u0100ei\u127B\u1289\u01F2\u1280\0\u1287efore;\u6234a;\u4398\u0100cn\u128E\u1298kSpace;\uC000\u205F\u200ASpace;\u6009lde\u0200;EFT\u12AB\u12AC\u12B2\u12BC\u623Cqual;\u6243ullEqual;\u6245ilde;\u6248pf;\uC000\u{1D54B}ipleDot;\u60DB\u0100ct\u12D6\u12DBr;\uC000\u{1D4AF}rok;\u4166\u0AE1\u12F7\u130E\u131A\u1326\0\u132C\u1331\0\0\0\0\0\u1338\u133D\u1377\u1385\0\u13FF\u1404\u140A\u1410\u0100cr\u12FB\u1301ute\u803B\xDA\u40DAr\u0100;o\u1307\u1308\u619Fcir;\u6949r\u01E3\u1313\0\u1316y;\u440Eve;\u416C\u0100iy\u131E\u1323rc\u803B\xDB\u40DB;\u4423blac;\u4170r;\uC000\u{1D518}rave\u803B\xD9\u40D9acr;\u416A\u0100di\u1341\u1369er\u0100BP\u1348\u135D\u0100ar\u134D\u1350r;\u405Fac\u0100ek\u1357\u1359;\u63DFet;\u63B5arenthesis;\u63DDon\u0100;P\u1370\u1371\u62C3lus;\u628E\u0100gp\u137B\u137Fon;\u4172f;\uC000\u{1D54C}\u0400ADETadps\u1395\u13AE\u13B8\u13C4\u03E8\u13D2\u13D7\u13F3rrow\u0180;BD\u1150\u13A0\u13A4ar;\u6912ownArrow;\u61C5ownArrow;\u6195quilibrium;\u696Eee\u0100;A\u13CB\u13CC\u62A5rrow;\u61A5own\xE1\u03F3er\u0100LR\u13DE\u13E8eftArrow;\u6196ightArrow;\u6197i\u0100;l\u13F9\u13FA\u43D2on;\u43A5ing;\u416Ecr;\uC000\u{1D4B0}ilde;\u4168ml\u803B\xDC\u40DC\u0480Dbcdefosv\u1427\u142C\u1430\u1433\u143E\u1485\u148A\u1490\u1496ash;\u62ABar;\u6AEBy;\u4412ash\u0100;l\u143B\u143C\u62A9;\u6AE6\u0100er\u1443\u1445;\u62C1\u0180bty\u144C\u1450\u147Aar;\u6016\u0100;i\u144F\u1455cal\u0200BLST\u1461\u1465\u146A\u1474ar;\u6223ine;\u407Ceparator;\u6758ilde;\u6240ThinSpace;\u600Ar;\uC000\u{1D519}pf;\uC000\u{1D54D}cr;\uC000\u{1D4B1}dash;\u62AA\u0280cefos\u14A7\u14AC\u14B1\u14B6\u14BCirc;\u4174dge;\u62C0r;\uC000\u{1D51A}pf;\uC000\u{1D54E}cr;\uC000\u{1D4B2}\u0200fios\u14CB\u14D0\u14D2\u14D8r;\uC000\u{1D51B};\u439Epf;\uC000\u{1D54F}cr;\uC000\u{1D4B3}\u0480AIUacfosu\u14F1\u14F5\u14F9\u14FD\u1504\u150F\u1514\u151A\u1520cy;\u442Fcy;\u4407cy;\u442Ecute\u803B\xDD\u40DD\u0100iy\u1509\u150Drc;\u4176;\u442Br;\uC000\u{1D51C}pf;\uC000\u{1D550}cr;\uC000\u{1D4B4}ml;\u4178\u0400Hacdefos\u1535\u1539\u153F\u154B\u154F\u155D\u1560\u1564cy;\u4416cute;\u4179\u0100ay\u1544\u1549ron;\u417D;\u4417ot;\u417B\u01F2\u1554\0\u155BoWidt\xE8\u0AD9a;\u4396r;\u6128pf;\u6124cr;\uC000\u{1D4B5}\u0BE1\u1583\u158A\u1590\0\u15B0\u15B6\u15BF\0\0\0\0\u15C6\u15DB\u15EB\u165F\u166D\0\u1695\u169B\u16B2\u16B9\0\u16BEcute\u803B\xE1\u40E1reve;\u4103\u0300;Ediuy\u159C\u159D\u15A1\u15A3\u15A8\u15AD\u623E;\uC000\u223E\u0333;\u623Frc\u803B\xE2\u40E2te\u80BB\xB4\u0306;\u4430lig\u803B\xE6\u40E6\u0100;r\xB2\u15BA;\uC000\u{1D51E}rave\u803B\xE0\u40E0\u0100ep\u15CA\u15D6\u0100fp\u15CF\u15D4sym;\u6135\xE8\u15D3ha;\u43B1\u0100ap\u15DFc\u0100cl\u15E4\u15E7r;\u4101g;\u6A3F\u0264\u15F0\0\0\u160A\u0280;adsv\u15FA\u15FB\u15FF\u1601\u1607\u6227nd;\u6A55;\u6A5Clope;\u6A58;\u6A5A\u0380;elmrsz\u1618\u1619\u161B\u161E\u163F\u164F\u1659\u6220;\u69A4e\xBB\u1619sd\u0100;a\u1625\u1626\u6221\u0461\u1630\u1632\u1634\u1636\u1638\u163A\u163C\u163E;\u69A8;\u69A9;\u69AA;\u69AB;\u69AC;\u69AD;\u69AE;\u69AFt\u0100;v\u1645\u1646\u621Fb\u0100;d\u164C\u164D\u62BE;\u699D\u0100pt\u1654\u1657h;\u6222\xBB\xB9arr;\u637C\u0100gp\u1663\u1667on;\u4105f;\uC000\u{1D552}\u0380;Eaeiop\u12C1\u167B\u167D\u1682\u1684\u1687\u168A;\u6A70cir;\u6A6F;\u624Ad;\u624Bs;\u4027rox\u0100;e\u12C1\u1692\xF1\u1683ing\u803B\xE5\u40E5\u0180cty\u16A1\u16A6\u16A8r;\uC000\u{1D4B6};\u402Amp\u0100;e\u12C1\u16AF\xF1\u0288ilde\u803B\xE3\u40E3ml\u803B\xE4\u40E4\u0100ci\u16C2\u16C8onin\xF4\u0272nt;\u6A11\u0800Nabcdefiklnoprsu\u16ED\u16F1\u1730\u173C\u1743\u1748\u1778\u177D\u17E0\u17E6\u1839\u1850\u170D\u193D\u1948\u1970ot;\u6AED\u0100cr\u16F6\u171Ek\u0200ceps\u1700\u1705\u170D\u1713ong;\u624Cpsilon;\u43F6rime;\u6035im\u0100;e\u171A\u171B\u623Dq;\u62CD\u0176\u1722\u1726ee;\u62BDed\u0100;g\u172C\u172D\u6305e\xBB\u172Drk\u0100;t\u135C\u1737brk;\u63B6\u0100oy\u1701\u1741;\u4431quo;\u601E\u0280cmprt\u1753\u175B\u1761\u1764\u1768aus\u0100;e\u010A\u0109ptyv;\u69B0s\xE9\u170Cno\xF5\u0113\u0180ahw\u176F\u1771\u1773;\u43B2;\u6136een;\u626Cr;\uC000\u{1D51F}g\u0380costuvw\u178D\u179D\u17B3\u17C1\u17D5\u17DB\u17DE\u0180aiu\u1794\u1796\u179A\xF0\u0760rc;\u65EFp\xBB\u1371\u0180dpt\u17A4\u17A8\u17ADot;\u6A00lus;\u6A01imes;\u6A02\u0271\u17B9\0\0\u17BEcup;\u6A06ar;\u6605riangle\u0100du\u17CD\u17D2own;\u65BDp;\u65B3plus;\u6A04e\xE5\u1444\xE5\u14ADarow;\u690D\u0180ako\u17ED\u1826\u1835\u0100cn\u17F2\u1823k\u0180lst\u17FA\u05AB\u1802ozenge;\u69EBriangle\u0200;dlr\u1812\u1813\u1818\u181D\u65B4own;\u65BEeft;\u65C2ight;\u65B8k;\u6423\u01B1\u182B\0\u1833\u01B2\u182F\0\u1831;\u6592;\u65914;\u6593ck;\u6588\u0100eo\u183E\u184D\u0100;q\u1843\u1846\uC000=\u20E5uiv;\uC000\u2261\u20E5t;\u6310\u0200ptwx\u1859\u185E\u1867\u186Cf;\uC000\u{1D553}\u0100;t\u13CB\u1863om\xBB\u13CCtie;\u62C8\u0600DHUVbdhmptuv\u1885\u1896\u18AA\u18BB\u18D7\u18DB\u18EC\u18FF\u1905\u190A\u1910\u1921\u0200LRlr\u188E\u1890\u1892\u1894;\u6557;\u6554;\u6556;\u6553\u0280;DUdu\u18A1\u18A2\u18A4\u18A6\u18A8\u6550;\u6566;\u6569;\u6564;\u6567\u0200LRlr\u18B3\u18B5\u18B7\u18B9;\u655D;\u655A;\u655C;\u6559\u0380;HLRhlr\u18CA\u18CB\u18CD\u18CF\u18D1\u18D3\u18D5\u6551;\u656C;\u6563;\u6560;\u656B;\u6562;\u655Fox;\u69C9\u0200LRlr\u18E4\u18E6\u18E8\u18EA;\u6555;\u6552;\u6510;\u650C\u0280;DUdu\u06BD\u18F7\u18F9\u18FB\u18FD;\u6565;\u6568;\u652C;\u6534inus;\u629Flus;\u629Eimes;\u62A0\u0200LRlr\u1919\u191B\u191D\u191F;\u655B;\u6558;\u6518;\u6514\u0380;HLRhlr\u1930\u1931\u1933\u1935\u1937\u1939\u193B\u6502;\u656A;\u6561;\u655E;\u653C;\u6524;\u651C\u0100ev\u0123\u1942bar\u803B\xA6\u40A6\u0200ceio\u1951\u1956\u195A\u1960r;\uC000\u{1D4B7}mi;\u604Fm\u0100;e\u171A\u171Cl\u0180;bh\u1968\u1969\u196B\u405C;\u69C5sub;\u67C8\u016C\u1974\u197El\u0100;e\u1979\u197A\u6022t\xBB\u197Ap\u0180;Ee\u012F\u1985\u1987;\u6AAE\u0100;q\u06DC\u06DB\u0CE1\u19A7\0\u19E8\u1A11\u1A15\u1A32\0\u1A37\u1A50\0\0\u1AB4\0\0\u1AC1\0\0\u1B21\u1B2E\u1B4D\u1B52\0\u1BFD\0\u1C0C\u0180cpr\u19AD\u19B2\u19DDute;\u4107\u0300;abcds\u19BF\u19C0\u19C4\u19CA\u19D5\u19D9\u6229nd;\u6A44rcup;\u6A49\u0100au\u19CF\u19D2p;\u6A4Bp;\u6A47ot;\u6A40;\uC000\u2229\uFE00\u0100eo\u19E2\u19E5t;\u6041\xEE\u0693\u0200aeiu\u19F0\u19FB\u1A01\u1A05\u01F0\u19F5\0\u19F8s;\u6A4Don;\u410Ddil\u803B\xE7\u40E7rc;\u4109ps\u0100;s\u1A0C\u1A0D\u6A4Cm;\u6A50ot;\u410B\u0180dmn\u1A1B\u1A20\u1A26il\u80BB\xB8\u01ADptyv;\u69B2t\u8100\xA2;e\u1A2D\u1A2E\u40A2r\xE4\u01B2r;\uC000\u{1D520}\u0180cei\u1A3D\u1A40\u1A4Dy;\u4447ck\u0100;m\u1A47\u1A48\u6713ark\xBB\u1A48;\u43C7r\u0380;Ecefms\u1A5F\u1A60\u1A62\u1A6B\u1AA4\u1AAA\u1AAE\u65CB;\u69C3\u0180;el\u1A69\u1A6A\u1A6D\u42C6q;\u6257e\u0261\u1A74\0\0\u1A88rrow\u0100lr\u1A7C\u1A81eft;\u61BAight;\u61BB\u0280RSacd\u1A92\u1A94\u1A96\u1A9A\u1A9F\xBB\u0F47;\u64C8st;\u629Birc;\u629Aash;\u629Dnint;\u6A10id;\u6AEFcir;\u69C2ubs\u0100;u\u1ABB\u1ABC\u6663it\xBB\u1ABC\u02EC\u1AC7\u1AD4\u1AFA\0\u1B0Aon\u0100;e\u1ACD\u1ACE\u403A\u0100;q\xC7\xC6\u026D\u1AD9\0\0\u1AE2a\u0100;t\u1ADE\u1ADF\u402C;\u4040\u0180;fl\u1AE8\u1AE9\u1AEB\u6201\xEE\u1160e\u0100mx\u1AF1\u1AF6ent\xBB\u1AE9e\xF3\u024D\u01E7\u1AFE\0\u1B07\u0100;d\u12BB\u1B02ot;\u6A6Dn\xF4\u0246\u0180fry\u1B10\u1B14\u1B17;\uC000\u{1D554}o\xE4\u0254\u8100\xA9;s\u0155\u1B1Dr;\u6117\u0100ao\u1B25\u1B29rr;\u61B5ss;\u6717\u0100cu\u1B32\u1B37r;\uC000\u{1D4B8}\u0100bp\u1B3C\u1B44\u0100;e\u1B41\u1B42\u6ACF;\u6AD1\u0100;e\u1B49\u1B4A\u6AD0;\u6AD2dot;\u62EF\u0380delprvw\u1B60\u1B6C\u1B77\u1B82\u1BAC\u1BD4\u1BF9arr\u0100lr\u1B68\u1B6A;\u6938;\u6935\u0270\u1B72\0\0\u1B75r;\u62DEc;\u62DFarr\u0100;p\u1B7F\u1B80\u61B6;\u693D\u0300;bcdos\u1B8F\u1B90\u1B96\u1BA1\u1BA5\u1BA8\u622Arcap;\u6A48\u0100au\u1B9B\u1B9Ep;\u6A46p;\u6A4Aot;\u628Dr;\u6A45;\uC000\u222A\uFE00\u0200alrv\u1BB5\u1BBF\u1BDE\u1BE3rr\u0100;m\u1BBC\u1BBD\u61B7;\u693Cy\u0180evw\u1BC7\u1BD4\u1BD8q\u0270\u1BCE\0\0\u1BD2re\xE3\u1B73u\xE3\u1B75ee;\u62CEedge;\u62CFen\u803B\xA4\u40A4earrow\u0100lr\u1BEE\u1BF3eft\xBB\u1B80ight\xBB\u1BBDe\xE4\u1BDD\u0100ci\u1C01\u1C07onin\xF4\u01F7nt;\u6231lcty;\u632D\u0980AHabcdefhijlorstuwz\u1C38\u1C3B\u1C3F\u1C5D\u1C69\u1C75\u1C8A\u1C9E\u1CAC\u1CB7\u1CFB\u1CFF\u1D0D\u1D7B\u1D91\u1DAB\u1DBB\u1DC6\u1DCDr\xF2\u0381ar;\u6965\u0200glrs\u1C48\u1C4D\u1C52\u1C54ger;\u6020eth;\u6138\xF2\u1133h\u0100;v\u1C5A\u1C5B\u6010\xBB\u090A\u016B\u1C61\u1C67arow;\u690Fa\xE3\u0315\u0100ay\u1C6E\u1C73ron;\u410F;\u4434\u0180;ao\u0332\u1C7C\u1C84\u0100gr\u02BF\u1C81r;\u61CAtseq;\u6A77\u0180glm\u1C91\u1C94\u1C98\u803B\xB0\u40B0ta;\u43B4ptyv;\u69B1\u0100ir\u1CA3\u1CA8sht;\u697F;\uC000\u{1D521}ar\u0100lr\u1CB3\u1CB5\xBB\u08DC\xBB\u101E\u0280aegsv\u1CC2\u0378\u1CD6\u1CDC\u1CE0m\u0180;os\u0326\u1CCA\u1CD4nd\u0100;s\u0326\u1CD1uit;\u6666amma;\u43DDin;\u62F2\u0180;io\u1CE7\u1CE8\u1CF8\u40F7de\u8100\xF7;o\u1CE7\u1CF0ntimes;\u62C7n\xF8\u1CF7cy;\u4452c\u026F\u1D06\0\0\u1D0Arn;\u631Eop;\u630D\u0280lptuw\u1D18\u1D1D\u1D22\u1D49\u1D55lar;\u4024f;\uC000\u{1D555}\u0280;emps\u030B\u1D2D\u1D37\u1D3D\u1D42q\u0100;d\u0352\u1D33ot;\u6251inus;\u6238lus;\u6214quare;\u62A1blebarwedg\xE5\xFAn\u0180adh\u112E\u1D5D\u1D67ownarrow\xF3\u1C83arpoon\u0100lr\u1D72\u1D76ef\xF4\u1CB4igh\xF4\u1CB6\u0162\u1D7F\u1D85karo\xF7\u0F42\u026F\u1D8A\0\0\u1D8Ern;\u631Fop;\u630C\u0180cot\u1D98\u1DA3\u1DA6\u0100ry\u1D9D\u1DA1;\uC000\u{1D4B9};\u4455l;\u69F6rok;\u4111\u0100dr\u1DB0\u1DB4ot;\u62F1i\u0100;f\u1DBA\u1816\u65BF\u0100ah\u1DC0\u1DC3r\xF2\u0429a\xF2\u0FA6angle;\u69A6\u0100ci\u1DD2\u1DD5y;\u445Fgrarr;\u67FF\u0900Dacdefglmnopqrstux\u1E01\u1E09\u1E19\u1E38\u0578\u1E3C\u1E49\u1E61\u1E7E\u1EA5\u1EAF\u1EBD\u1EE1\u1F2A\u1F37\u1F44\u1F4E\u1F5A\u0100Do\u1E06\u1D34o\xF4\u1C89\u0100cs\u1E0E\u1E14ute\u803B\xE9\u40E9ter;\u6A6E\u0200aioy\u1E22\u1E27\u1E31\u1E36ron;\u411Br\u0100;c\u1E2D\u1E2E\u6256\u803B\xEA\u40EAlon;\u6255;\u444Dot;\u4117\u0100Dr\u1E41\u1E45ot;\u6252;\uC000\u{1D522}\u0180;rs\u1E50\u1E51\u1E57\u6A9Aave\u803B\xE8\u40E8\u0100;d\u1E5C\u1E5D\u6A96ot;\u6A98\u0200;ils\u1E6A\u1E6B\u1E72\u1E74\u6A99nters;\u63E7;\u6113\u0100;d\u1E79\u1E7A\u6A95ot;\u6A97\u0180aps\u1E85\u1E89\u1E97cr;\u4113ty\u0180;sv\u1E92\u1E93\u1E95\u6205et\xBB\u1E93p\u01001;\u1E9D\u1EA4\u0133\u1EA1\u1EA3;\u6004;\u6005\u6003\u0100gs\u1EAA\u1EAC;\u414Bp;\u6002\u0100gp\u1EB4\u1EB8on;\u4119f;\uC000\u{1D556}\u0180als\u1EC4\u1ECE\u1ED2r\u0100;s\u1ECA\u1ECB\u62D5l;\u69E3us;\u6A71i\u0180;lv\u1EDA\u1EDB\u1EDF\u43B5on\xBB\u1EDB;\u43F5\u0200csuv\u1EEA\u1EF3\u1F0B\u1F23\u0100io\u1EEF\u1E31rc\xBB\u1E2E\u0269\u1EF9\0\0\u1EFB\xED\u0548ant\u0100gl\u1F02\u1F06tr\xBB\u1E5Dess\xBB\u1E7A\u0180aei\u1F12\u1F16\u1F1Als;\u403Dst;\u625Fv\u0100;D\u0235\u1F20D;\u6A78parsl;\u69E5\u0100Da\u1F2F\u1F33ot;\u6253rr;\u6971\u0180cdi\u1F3E\u1F41\u1EF8r;\u612Fo\xF4\u0352\u0100ah\u1F49\u1F4B;\u43B7\u803B\xF0\u40F0\u0100mr\u1F53\u1F57l\u803B\xEB\u40EBo;\u60AC\u0180cip\u1F61\u1F64\u1F67l;\u4021s\xF4\u056E\u0100eo\u1F6C\u1F74ctatio\xEE\u0559nential\xE5\u0579\u09E1\u1F92\0\u1F9E\0\u1FA1\u1FA7\0\0\u1FC6\u1FCC\0\u1FD3\0\u1FE6\u1FEA\u2000\0\u2008\u205Allingdotse\xF1\u1E44y;\u4444male;\u6640\u0180ilr\u1FAD\u1FB3\u1FC1lig;\u8000\uFB03\u0269\u1FB9\0\0\u1FBDg;\u8000\uFB00ig;\u8000\uFB04;\uC000\u{1D523}lig;\u8000\uFB01lig;\uC000fj\u0180alt\u1FD9\u1FDC\u1FE1t;\u666Dig;\u8000\uFB02ns;\u65B1of;\u4192\u01F0\u1FEE\0\u1FF3f;\uC000\u{1D557}\u0100ak\u05BF\u1FF7\u0100;v\u1FFC\u1FFD\u62D4;\u6AD9artint;\u6A0D\u0100ao\u200C\u2055\u0100cs\u2011\u2052\u03B1\u201A\u2030\u2038\u2045\u2048\0\u2050\u03B2\u2022\u2025\u2027\u202A\u202C\0\u202E\u803B\xBD\u40BD;\u6153\u803B\xBC\u40BC;\u6155;\u6159;\u615B\u01B3\u2034\0\u2036;\u6154;\u6156\u02B4\u203E\u2041\0\0\u2043\u803B\xBE\u40BE;\u6157;\u615C5;\u6158\u01B6\u204C\0\u204E;\u615A;\u615D8;\u615El;\u6044wn;\u6322cr;\uC000\u{1D4BB}\u0880Eabcdefgijlnorstv\u2082\u2089\u209F\u20A5\u20B0\u20B4\u20F0\u20F5\u20FA\u20FF\u2103\u2112\u2138\u0317\u213E\u2152\u219E\u0100;l\u064D\u2087;\u6A8C\u0180cmp\u2090\u2095\u209Dute;\u41F5ma\u0100;d\u209C\u1CDA\u43B3;\u6A86reve;\u411F\u0100iy\u20AA\u20AErc;\u411D;\u4433ot;\u4121\u0200;lqs\u063E\u0642\u20BD\u20C9\u0180;qs\u063E\u064C\u20C4lan\xF4\u0665\u0200;cdl\u0665\u20D2\u20D5\u20E5c;\u6AA9ot\u0100;o\u20DC\u20DD\u6A80\u0100;l\u20E2\u20E3\u6A82;\u6A84\u0100;e\u20EA\u20ED\uC000\u22DB\uFE00s;\u6A94r;\uC000\u{1D524}\u0100;g\u0673\u061Bmel;\u6137cy;\u4453\u0200;Eaj\u065A\u210C\u210E\u2110;\u6A92;\u6AA5;\u6AA4\u0200Eaes\u211B\u211D\u2129\u2134;\u6269p\u0100;p\u2123\u2124\u6A8Arox\xBB\u2124\u0100;q\u212E\u212F\u6A88\u0100;q\u212E\u211Bim;\u62E7pf;\uC000\u{1D558}\u0100ci\u2143\u2146r;\u610Am\u0180;el\u066B\u214E\u2150;\u6A8E;\u6A90\u8300>;cdlqr\u05EE\u2160\u216A\u216E\u2173\u2179\u0100ci\u2165\u2167;\u6AA7r;\u6A7Aot;\u62D7Par;\u6995uest;\u6A7C\u0280adels\u2184\u216A\u2190\u0656\u219B\u01F0\u2189\0\u218Epro\xF8\u209Er;\u6978q\u0100lq\u063F\u2196les\xF3\u2088i\xED\u066B\u0100en\u21A3\u21ADrtneqq;\uC000\u2269\uFE00\xC5\u21AA\u0500Aabcefkosy\u21C4\u21C7\u21F1\u21F5\u21FA\u2218\u221D\u222F\u2268\u227Dr\xF2\u03A0\u0200ilmr\u21D0\u21D4\u21D7\u21DBrs\xF0\u1484f\xBB\u2024il\xF4\u06A9\u0100dr\u21E0\u21E4cy;\u444A\u0180;cw\u08F4\u21EB\u21EFir;\u6948;\u61ADar;\u610Firc;\u4125\u0180alr\u2201\u220E\u2213rts\u0100;u\u2209\u220A\u6665it\xBB\u220Alip;\u6026con;\u62B9r;\uC000\u{1D525}s\u0100ew\u2223\u2229arow;\u6925arow;\u6926\u0280amopr\u223A\u223E\u2243\u225E\u2263rr;\u61FFtht;\u623Bk\u0100lr\u2249\u2253eftarrow;\u61A9ightarrow;\u61AAf;\uC000\u{1D559}bar;\u6015\u0180clt\u226F\u2274\u2278r;\uC000\u{1D4BD}as\xE8\u21F4rok;\u4127\u0100bp\u2282\u2287ull;\u6043hen\xBB\u1C5B\u0AE1\u22A3\0\u22AA\0\u22B8\u22C5\u22CE\0\u22D5\u22F3\0\0\u22F8\u2322\u2367\u2362\u237F\0\u2386\u23AA\u23B4cute\u803B\xED\u40ED\u0180;iy\u0771\u22B0\u22B5rc\u803B\xEE\u40EE;\u4438\u0100cx\u22BC\u22BFy;\u4435cl\u803B\xA1\u40A1\u0100fr\u039F\u22C9;\uC000\u{1D526}rave\u803B\xEC\u40EC\u0200;ino\u073E\u22DD\u22E9\u22EE\u0100in\u22E2\u22E6nt;\u6A0Ct;\u622Dfin;\u69DCta;\u6129lig;\u4133\u0180aop\u22FE\u231A\u231D\u0180cgt\u2305\u2308\u2317r;\u412B\u0180elp\u071F\u230F\u2313in\xE5\u078Ear\xF4\u0720h;\u4131f;\u62B7ed;\u41B5\u0280;cfot\u04F4\u232C\u2331\u233D\u2341are;\u6105in\u0100;t\u2338\u2339\u621Eie;\u69DDdo\xF4\u2319\u0280;celp\u0757\u234C\u2350\u235B\u2361al;\u62BA\u0100gr\u2355\u2359er\xF3\u1563\xE3\u234Darhk;\u6A17rod;\u6A3C\u0200cgpt\u236F\u2372\u2376\u237By;\u4451on;\u412Ff;\uC000\u{1D55A}a;\u43B9uest\u803B\xBF\u40BF\u0100ci\u238A\u238Fr;\uC000\u{1D4BE}n\u0280;Edsv\u04F4\u239B\u239D\u23A1\u04F3;\u62F9ot;\u62F5\u0100;v\u23A6\u23A7\u62F4;\u62F3\u0100;i\u0777\u23AElde;\u4129\u01EB\u23B8\0\u23BCcy;\u4456l\u803B\xEF\u40EF\u0300cfmosu\u23CC\u23D7\u23DC\u23E1\u23E7\u23F5\u0100iy\u23D1\u23D5rc;\u4135;\u4439r;\uC000\u{1D527}ath;\u4237pf;\uC000\u{1D55B}\u01E3\u23EC\0\u23F1r;\uC000\u{1D4BF}rcy;\u4458kcy;\u4454\u0400acfghjos\u240B\u2416\u2422\u2427\u242D\u2431\u2435\u243Bppa\u0100;v\u2413\u2414\u43BA;\u43F0\u0100ey\u241B\u2420dil;\u4137;\u443Ar;\uC000\u{1D528}reen;\u4138cy;\u4445cy;\u445Cpf;\uC000\u{1D55C}cr;\uC000\u{1D4C0}\u0B80ABEHabcdefghjlmnoprstuv\u2470\u2481\u2486\u248D\u2491\u250E\u253D\u255A\u2580\u264E\u265E\u2665\u2679\u267D\u269A\u26B2\u26D8\u275D\u2768\u278B\u27C0\u2801\u2812\u0180art\u2477\u247A\u247Cr\xF2\u09C6\xF2\u0395ail;\u691Barr;\u690E\u0100;g\u0994\u248B;\u6A8Bar;\u6962\u0963\u24A5\0\u24AA\0\u24B1\0\0\0\0\0\u24B5\u24BA\0\u24C6\u24C8\u24CD\0\u24F9ute;\u413Amptyv;\u69B4ra\xEE\u084Cbda;\u43BBg\u0180;dl\u088E\u24C1\u24C3;\u6991\xE5\u088E;\u6A85uo\u803B\xAB\u40ABr\u0400;bfhlpst\u0899\u24DE\u24E6\u24E9\u24EB\u24EE\u24F1\u24F5\u0100;f\u089D\u24E3s;\u691Fs;\u691D\xEB\u2252p;\u61ABl;\u6939im;\u6973l;\u61A2\u0180;ae\u24FF\u2500\u2504\u6AABil;\u6919\u0100;s\u2509\u250A\u6AAD;\uC000\u2AAD\uFE00\u0180abr\u2515\u2519\u251Drr;\u690Crk;\u6772\u0100ak\u2522\u252Cc\u0100ek\u2528\u252A;\u407B;\u405B\u0100es\u2531\u2533;\u698Bl\u0100du\u2539\u253B;\u698F;\u698D\u0200aeuy\u2546\u254B\u2556\u2558ron;\u413E\u0100di\u2550\u2554il;\u413C\xEC\u08B0\xE2\u2529;\u443B\u0200cqrs\u2563\u2566\u256D\u257Da;\u6936uo\u0100;r\u0E19\u1746\u0100du\u2572\u2577har;\u6967shar;\u694Bh;\u61B2\u0280;fgqs\u258B\u258C\u0989\u25F3\u25FF\u6264t\u0280ahlrt\u2598\u25A4\u25B7\u25C2\u25E8rrow\u0100;t\u0899\u25A1a\xE9\u24F6arpoon\u0100du\u25AF\u25B4own\xBB\u045Ap\xBB\u0966eftarrows;\u61C7ight\u0180ahs\u25CD\u25D6\u25DErrow\u0100;s\u08F4\u08A7arpoon\xF3\u0F98quigarro\xF7\u21F0hreetimes;\u62CB\u0180;qs\u258B\u0993\u25FAlan\xF4\u09AC\u0280;cdgs\u09AC\u260A\u260D\u261D\u2628c;\u6AA8ot\u0100;o\u2614\u2615\u6A7F\u0100;r\u261A\u261B\u6A81;\u6A83\u0100;e\u2622\u2625\uC000\u22DA\uFE00s;\u6A93\u0280adegs\u2633\u2639\u263D\u2649\u264Bppro\xF8\u24C6ot;\u62D6q\u0100gq\u2643\u2645\xF4\u0989gt\xF2\u248C\xF4\u099Bi\xED\u09B2\u0180ilr\u2655\u08E1\u265Asht;\u697C;\uC000\u{1D529}\u0100;E\u099C\u2663;\u6A91\u0161\u2669\u2676r\u0100du\u25B2\u266E\u0100;l\u0965\u2673;\u696Alk;\u6584cy;\u4459\u0280;acht\u0A48\u2688\u268B\u2691\u2696r\xF2\u25C1orne\xF2\u1D08ard;\u696Bri;\u65FA\u0100io\u269F\u26A4dot;\u4140ust\u0100;a\u26AC\u26AD\u63B0che\xBB\u26AD\u0200Eaes\u26BB\u26BD\u26C9\u26D4;\u6268p\u0100;p\u26C3\u26C4\u6A89rox\xBB\u26C4\u0100;q\u26CE\u26CF\u6A87\u0100;q\u26CE\u26BBim;\u62E6\u0400abnoptwz\u26E9\u26F4\u26F7\u271A\u272F\u2741\u2747\u2750\u0100nr\u26EE\u26F1g;\u67ECr;\u61FDr\xEB\u08C1g\u0180lmr\u26FF\u270D\u2714eft\u0100ar\u09E6\u2707ight\xE1\u09F2apsto;\u67FCight\xE1\u09FDparrow\u0100lr\u2725\u2729ef\xF4\u24EDight;\u61AC\u0180afl\u2736\u2739\u273Dr;\u6985;\uC000\u{1D55D}us;\u6A2Dimes;\u6A34\u0161\u274B\u274Fst;\u6217\xE1\u134E\u0180;ef\u2757\u2758\u1800\u65CAnge\xBB\u2758ar\u0100;l\u2764\u2765\u4028t;\u6993\u0280achmt\u2773\u2776\u277C\u2785\u2787r\xF2\u08A8orne\xF2\u1D8Car\u0100;d\u0F98\u2783;\u696D;\u600Eri;\u62BF\u0300achiqt\u2798\u279D\u0A40\u27A2\u27AE\u27BBquo;\u6039r;\uC000\u{1D4C1}m\u0180;eg\u09B2\u27AA\u27AC;\u6A8D;\u6A8F\u0100bu\u252A\u27B3o\u0100;r\u0E1F\u27B9;\u601Arok;\u4142\u8400<;cdhilqr\u082B\u27D2\u2639\u27DC\u27E0\u27E5\u27EA\u27F0\u0100ci\u27D7\u27D9;\u6AA6r;\u6A79re\xE5\u25F2mes;\u62C9arr;\u6976uest;\u6A7B\u0100Pi\u27F5\u27F9ar;\u6996\u0180;ef\u2800\u092D\u181B\u65C3r\u0100du\u2807\u280Dshar;\u694Ahar;\u6966\u0100en\u2817\u2821rtneqq;\uC000\u2268\uFE00\xC5\u281E\u0700Dacdefhilnopsu\u2840\u2845\u2882\u288E\u2893\u28A0\u28A5\u28A8\u28DA\u28E2\u28E4\u0A83\u28F3\u2902Dot;\u623A\u0200clpr\u284E\u2852\u2863\u287Dr\u803B\xAF\u40AF\u0100et\u2857\u2859;\u6642\u0100;e\u285E\u285F\u6720se\xBB\u285F\u0100;s\u103B\u2868to\u0200;dlu\u103B\u2873\u2877\u287Bow\xEE\u048Cef\xF4\u090F\xF0\u13D1ker;\u65AE\u0100oy\u2887\u288Cmma;\u6A29;\u443Cash;\u6014asuredangle\xBB\u1626r;\uC000\u{1D52A}o;\u6127\u0180cdn\u28AF\u28B4\u28C9ro\u803B\xB5\u40B5\u0200;acd\u1464\u28BD\u28C0\u28C4s\xF4\u16A7ir;\u6AF0ot\u80BB\xB7\u01B5us\u0180;bd\u28D2\u1903\u28D3\u6212\u0100;u\u1D3C\u28D8;\u6A2A\u0163\u28DE\u28E1p;\u6ADB\xF2\u2212\xF0\u0A81\u0100dp\u28E9\u28EEels;\u62A7f;\uC000\u{1D55E}\u0100ct\u28F8\u28FDr;\uC000\u{1D4C2}pos\xBB\u159D\u0180;lm\u2909\u290A\u290D\u43BCtimap;\u62B8\u0C00GLRVabcdefghijlmoprstuvw\u2942\u2953\u297E\u2989\u2998\u29DA\u29E9\u2A15\u2A1A\u2A58\u2A5D\u2A83\u2A95\u2AA4\u2AA8\u2B04\u2B07\u2B44\u2B7F\u2BAE\u2C34\u2C67\u2C7C\u2CE9\u0100gt\u2947\u294B;\uC000\u22D9\u0338\u0100;v\u2950\u0BCF\uC000\u226B\u20D2\u0180elt\u295A\u2972\u2976ft\u0100ar\u2961\u2967rrow;\u61CDightarrow;\u61CE;\uC000\u22D8\u0338\u0100;v\u297B\u0C47\uC000\u226A\u20D2ightarrow;\u61CF\u0100Dd\u298E\u2993ash;\u62AFash;\u62AE\u0280bcnpt\u29A3\u29A7\u29AC\u29B1\u29CCla\xBB\u02DEute;\u4144g;\uC000\u2220\u20D2\u0280;Eiop\u0D84\u29BC\u29C0\u29C5\u29C8;\uC000\u2A70\u0338d;\uC000\u224B\u0338s;\u4149ro\xF8\u0D84ur\u0100;a\u29D3\u29D4\u666El\u0100;s\u29D3\u0B38\u01F3\u29DF\0\u29E3p\u80BB\xA0\u0B37mp\u0100;e\u0BF9\u0C00\u0280aeouy\u29F4\u29FE\u2A03\u2A10\u2A13\u01F0\u29F9\0\u29FB;\u6A43on;\u4148dil;\u4146ng\u0100;d\u0D7E\u2A0Aot;\uC000\u2A6D\u0338p;\u6A42;\u443Dash;\u6013\u0380;Aadqsx\u0B92\u2A29\u2A2D\u2A3B\u2A41\u2A45\u2A50rr;\u61D7r\u0100hr\u2A33\u2A36k;\u6924\u0100;o\u13F2\u13F0ot;\uC000\u2250\u0338ui\xF6\u0B63\u0100ei\u2A4A\u2A4Ear;\u6928\xED\u0B98ist\u0100;s\u0BA0\u0B9Fr;\uC000\u{1D52B}\u0200Eest\u0BC5\u2A66\u2A79\u2A7C\u0180;qs\u0BBC\u2A6D\u0BE1\u0180;qs\u0BBC\u0BC5\u2A74lan\xF4\u0BE2i\xED\u0BEA\u0100;r\u0BB6\u2A81\xBB\u0BB7\u0180Aap\u2A8A\u2A8D\u2A91r\xF2\u2971rr;\u61AEar;\u6AF2\u0180;sv\u0F8D\u2A9C\u0F8C\u0100;d\u2AA1\u2AA2\u62FC;\u62FAcy;\u445A\u0380AEadest\u2AB7\u2ABA\u2ABE\u2AC2\u2AC5\u2AF6\u2AF9r\xF2\u2966;\uC000\u2266\u0338rr;\u619Ar;\u6025\u0200;fqs\u0C3B\u2ACE\u2AE3\u2AEFt\u0100ar\u2AD4\u2AD9rro\xF7\u2AC1ightarro\xF7\u2A90\u0180;qs\u0C3B\u2ABA\u2AEAlan\xF4\u0C55\u0100;s\u0C55\u2AF4\xBB\u0C36i\xED\u0C5D\u0100;r\u0C35\u2AFEi\u0100;e\u0C1A\u0C25i\xE4\u0D90\u0100pt\u2B0C\u2B11f;\uC000\u{1D55F}\u8180\xAC;in\u2B19\u2B1A\u2B36\u40ACn\u0200;Edv\u0B89\u2B24\u2B28\u2B2E;\uC000\u22F9\u0338ot;\uC000\u22F5\u0338\u01E1\u0B89\u2B33\u2B35;\u62F7;\u62F6i\u0100;v\u0CB8\u2B3C\u01E1\u0CB8\u2B41\u2B43;\u62FE;\u62FD\u0180aor\u2B4B\u2B63\u2B69r\u0200;ast\u0B7B\u2B55\u2B5A\u2B5Flle\xEC\u0B7Bl;\uC000\u2AFD\u20E5;\uC000\u2202\u0338lint;\u6A14\u0180;ce\u0C92\u2B70\u2B73u\xE5\u0CA5\u0100;c\u0C98\u2B78\u0100;e\u0C92\u2B7D\xF1\u0C98\u0200Aait\u2B88\u2B8B\u2B9D\u2BA7r\xF2\u2988rr\u0180;cw\u2B94\u2B95\u2B99\u619B;\uC000\u2933\u0338;\uC000\u219D\u0338ghtarrow\xBB\u2B95ri\u0100;e\u0CCB\u0CD6\u0380chimpqu\u2BBD\u2BCD\u2BD9\u2B04\u0B78\u2BE4\u2BEF\u0200;cer\u0D32\u2BC6\u0D37\u2BC9u\xE5\u0D45;\uC000\u{1D4C3}ort\u026D\u2B05\0\0\u2BD6ar\xE1\u2B56m\u0100;e\u0D6E\u2BDF\u0100;q\u0D74\u0D73su\u0100bp\u2BEB\u2BED\xE5\u0CF8\xE5\u0D0B\u0180bcp\u2BF6\u2C11\u2C19\u0200;Ees\u2BFF\u2C00\u0D22\u2C04\u6284;\uC000\u2AC5\u0338et\u0100;e\u0D1B\u2C0Bq\u0100;q\u0D23\u2C00c\u0100;e\u0D32\u2C17\xF1\u0D38\u0200;Ees\u2C22\u2C23\u0D5F\u2C27\u6285;\uC000\u2AC6\u0338et\u0100;e\u0D58\u2C2Eq\u0100;q\u0D60\u2C23\u0200gilr\u2C3D\u2C3F\u2C45\u2C47\xEC\u0BD7lde\u803B\xF1\u40F1\xE7\u0C43iangle\u0100lr\u2C52\u2C5Ceft\u0100;e\u0C1A\u2C5A\xF1\u0C26ight\u0100;e\u0CCB\u2C65\xF1\u0CD7\u0100;m\u2C6C\u2C6D\u43BD\u0180;es\u2C74\u2C75\u2C79\u4023ro;\u6116p;\u6007\u0480DHadgilrs\u2C8F\u2C94\u2C99\u2C9E\u2CA3\u2CB0\u2CB6\u2CD3\u2CE3ash;\u62ADarr;\u6904p;\uC000\u224D\u20D2ash;\u62AC\u0100et\u2CA8\u2CAC;\uC000\u2265\u20D2;\uC000>\u20D2nfin;\u69DE\u0180Aet\u2CBD\u2CC1\u2CC5rr;\u6902;\uC000\u2264\u20D2\u0100;r\u2CCA\u2CCD\uC000<\u20D2ie;\uC000\u22B4\u20D2\u0100At\u2CD8\u2CDCrr;\u6903rie;\uC000\u22B5\u20D2im;\uC000\u223C\u20D2\u0180Aan\u2CF0\u2CF4\u2D02rr;\u61D6r\u0100hr\u2CFA\u2CFDk;\u6923\u0100;o\u13E7\u13E5ear;\u6927\u1253\u1A95\0\0\0\0\0\0\0\0\0\0\0\0\0\u2D2D\0\u2D38\u2D48\u2D60\u2D65\u2D72\u2D84\u1B07\0\0\u2D8D\u2DAB\0\u2DC8\u2DCE\0\u2DDC\u2E19\u2E2B\u2E3E\u2E43\u0100cs\u2D31\u1A97ute\u803B\xF3\u40F3\u0100iy\u2D3C\u2D45r\u0100;c\u1A9E\u2D42\u803B\xF4\u40F4;\u443E\u0280abios\u1AA0\u2D52\u2D57\u01C8\u2D5Alac;\u4151v;\u6A38old;\u69BClig;\u4153\u0100cr\u2D69\u2D6Dir;\u69BF;\uC000\u{1D52C}\u036F\u2D79\0\0\u2D7C\0\u2D82n;\u42DBave\u803B\xF2\u40F2;\u69C1\u0100bm\u2D88\u0DF4ar;\u69B5\u0200acit\u2D95\u2D98\u2DA5\u2DA8r\xF2\u1A80\u0100ir\u2D9D\u2DA0r;\u69BEoss;\u69BBn\xE5\u0E52;\u69C0\u0180aei\u2DB1\u2DB5\u2DB9cr;\u414Dga;\u43C9\u0180cdn\u2DC0\u2DC5\u01CDron;\u43BF;\u69B6pf;\uC000\u{1D560}\u0180ael\u2DD4\u2DD7\u01D2r;\u69B7rp;\u69B9\u0380;adiosv\u2DEA\u2DEB\u2DEE\u2E08\u2E0D\u2E10\u2E16\u6228r\xF2\u1A86\u0200;efm\u2DF7\u2DF8\u2E02\u2E05\u6A5Dr\u0100;o\u2DFE\u2DFF\u6134f\xBB\u2DFF\u803B\xAA\u40AA\u803B\xBA\u40BAgof;\u62B6r;\u6A56lope;\u6A57;\u6A5B\u0180clo\u2E1F\u2E21\u2E27\xF2\u2E01ash\u803B\xF8\u40F8l;\u6298i\u016C\u2E2F\u2E34de\u803B\xF5\u40F5es\u0100;a\u01DB\u2E3As;\u6A36ml\u803B\xF6\u40F6bar;\u633D\u0AE1\u2E5E\0\u2E7D\0\u2E80\u2E9D\0\u2EA2\u2EB9\0\0\u2ECB\u0E9C\0\u2F13\0\0\u2F2B\u2FBC\0\u2FC8r\u0200;ast\u0403\u2E67\u2E72\u0E85\u8100\xB6;l\u2E6D\u2E6E\u40B6le\xEC\u0403\u0269\u2E78\0\0\u2E7Bm;\u6AF3;\u6AFDy;\u443Fr\u0280cimpt\u2E8B\u2E8F\u2E93\u1865\u2E97nt;\u4025od;\u402Eil;\u6030enk;\u6031r;\uC000\u{1D52D}\u0180imo\u2EA8\u2EB0\u2EB4\u0100;v\u2EAD\u2EAE\u43C6;\u43D5ma\xF4\u0A76ne;\u660E\u0180;tv\u2EBF\u2EC0\u2EC8\u43C0chfork\xBB\u1FFD;\u43D6\u0100au\u2ECF\u2EDFn\u0100ck\u2ED5\u2EDDk\u0100;h\u21F4\u2EDB;\u610E\xF6\u21F4s\u0480;abcdemst\u2EF3\u2EF4\u1908\u2EF9\u2EFD\u2F04\u2F06\u2F0A\u2F0E\u402Bcir;\u6A23ir;\u6A22\u0100ou\u1D40\u2F02;\u6A25;\u6A72n\u80BB\xB1\u0E9Dim;\u6A26wo;\u6A27\u0180ipu\u2F19\u2F20\u2F25ntint;\u6A15f;\uC000\u{1D561}nd\u803B\xA3\u40A3\u0500;Eaceinosu\u0EC8\u2F3F\u2F41\u2F44\u2F47\u2F81\u2F89\u2F92\u2F7E\u2FB6;\u6AB3p;\u6AB7u\xE5\u0ED9\u0100;c\u0ECE\u2F4C\u0300;acens\u0EC8\u2F59\u2F5F\u2F66\u2F68\u2F7Eppro\xF8\u2F43urlye\xF1\u0ED9\xF1\u0ECE\u0180aes\u2F6F\u2F76\u2F7Approx;\u6AB9qq;\u6AB5im;\u62E8i\xED\u0EDFme\u0100;s\u2F88\u0EAE\u6032\u0180Eas\u2F78\u2F90\u2F7A\xF0\u2F75\u0180dfp\u0EEC\u2F99\u2FAF\u0180als\u2FA0\u2FA5\u2FAAlar;\u632Eine;\u6312urf;\u6313\u0100;t\u0EFB\u2FB4\xEF\u0EFBrel;\u62B0\u0100ci\u2FC0\u2FC5r;\uC000\u{1D4C5};\u43C8ncsp;\u6008\u0300fiopsu\u2FDA\u22E2\u2FDF\u2FE5\u2FEB\u2FF1r;\uC000\u{1D52E}pf;\uC000\u{1D562}rime;\u6057cr;\uC000\u{1D4C6}\u0180aeo\u2FF8\u3009\u3013t\u0100ei\u2FFE\u3005rnion\xF3\u06B0nt;\u6A16st\u0100;e\u3010\u3011\u403F\xF1\u1F19\xF4\u0F14\u0A80ABHabcdefhilmnoprstux\u3040\u3051\u3055\u3059\u30E0\u310E\u312B\u3147\u3162\u3172\u318E\u3206\u3215\u3224\u3229\u3258\u326E\u3272\u3290\u32B0\u32B7\u0180art\u3047\u304A\u304Cr\xF2\u10B3\xF2\u03DDail;\u691Car\xF2\u1C65ar;\u6964\u0380cdenqrt\u3068\u3075\u3078\u307F\u308F\u3094\u30CC\u0100eu\u306D\u3071;\uC000\u223D\u0331te;\u4155i\xE3\u116Emptyv;\u69B3g\u0200;del\u0FD1\u3089\u308B\u308D;\u6992;\u69A5\xE5\u0FD1uo\u803B\xBB\u40BBr\u0580;abcfhlpstw\u0FDC\u30AC\u30AF\u30B7\u30B9\u30BC\u30BE\u30C0\u30C3\u30C7\u30CAp;\u6975\u0100;f\u0FE0\u30B4s;\u6920;\u6933s;\u691E\xEB\u225D\xF0\u272El;\u6945im;\u6974l;\u61A3;\u619D\u0100ai\u30D1\u30D5il;\u691Ao\u0100;n\u30DB\u30DC\u6236al\xF3\u0F1E\u0180abr\u30E7\u30EA\u30EEr\xF2\u17E5rk;\u6773\u0100ak\u30F3\u30FDc\u0100ek\u30F9\u30FB;\u407D;\u405D\u0100es\u3102\u3104;\u698Cl\u0100du\u310A\u310C;\u698E;\u6990\u0200aeuy\u3117\u311C\u3127\u3129ron;\u4159\u0100di\u3121\u3125il;\u4157\xEC\u0FF2\xE2\u30FA;\u4440\u0200clqs\u3134\u3137\u313D\u3144a;\u6937dhar;\u6969uo\u0100;r\u020E\u020Dh;\u61B3\u0180acg\u314E\u315F\u0F44l\u0200;ips\u0F78\u3158\u315B\u109Cn\xE5\u10BBar\xF4\u0FA9t;\u65AD\u0180ilr\u3169\u1023\u316Esht;\u697D;\uC000\u{1D52F}\u0100ao\u3177\u3186r\u0100du\u317D\u317F\xBB\u047B\u0100;l\u1091\u3184;\u696C\u0100;v\u318B\u318C\u43C1;\u43F1\u0180gns\u3195\u31F9\u31FCht\u0300ahlrst\u31A4\u31B0\u31C2\u31D8\u31E4\u31EErrow\u0100;t\u0FDC\u31ADa\xE9\u30C8arpoon\u0100du\u31BB\u31BFow\xEE\u317Ep\xBB\u1092eft\u0100ah\u31CA\u31D0rrow\xF3\u0FEAarpoon\xF3\u0551ightarrows;\u61C9quigarro\xF7\u30CBhreetimes;\u62CCg;\u42DAingdotse\xF1\u1F32\u0180ahm\u320D\u3210\u3213r\xF2\u0FEAa\xF2\u0551;\u600Foust\u0100;a\u321E\u321F\u63B1che\xBB\u321Fmid;\u6AEE\u0200abpt\u3232\u323D\u3240\u3252\u0100nr\u3237\u323Ag;\u67EDr;\u61FEr\xEB\u1003\u0180afl\u3247\u324A\u324Er;\u6986;\uC000\u{1D563}us;\u6A2Eimes;\u6A35\u0100ap\u325D\u3267r\u0100;g\u3263\u3264\u4029t;\u6994olint;\u6A12ar\xF2\u31E3\u0200achq\u327B\u3280\u10BC\u3285quo;\u603Ar;\uC000\u{1D4C7}\u0100bu\u30FB\u328Ao\u0100;r\u0214\u0213\u0180hir\u3297\u329B\u32A0re\xE5\u31F8mes;\u62CAi\u0200;efl\u32AA\u1059\u1821\u32AB\u65B9tri;\u69CEluhar;\u6968;\u611E\u0D61\u32D5\u32DB\u32DF\u332C\u3338\u3371\0\u337A\u33A4\0\0\u33EC\u33F0\0\u3428\u3448\u345A\u34AD\u34B1\u34CA\u34F1\0\u3616\0\0\u3633cute;\u415Bqu\xEF\u27BA\u0500;Eaceinpsy\u11ED\u32F3\u32F5\u32FF\u3302\u330B\u330F\u331F\u3326\u3329;\u6AB4\u01F0\u32FA\0\u32FC;\u6AB8on;\u4161u\xE5\u11FE\u0100;d\u11F3\u3307il;\u415Frc;\u415D\u0180Eas\u3316\u3318\u331B;\u6AB6p;\u6ABAim;\u62E9olint;\u6A13i\xED\u1204;\u4441ot\u0180;be\u3334\u1D47\u3335\u62C5;\u6A66\u0380Aacmstx\u3346\u334A\u3357\u335B\u335E\u3363\u336Drr;\u61D8r\u0100hr\u3350\u3352\xEB\u2228\u0100;o\u0A36\u0A34t\u803B\xA7\u40A7i;\u403Bwar;\u6929m\u0100in\u3369\xF0nu\xF3\xF1t;\u6736r\u0100;o\u3376\u2055\uC000\u{1D530}\u0200acoy\u3382\u3386\u3391\u33A0rp;\u666F\u0100hy\u338B\u338Fcy;\u4449;\u4448rt\u026D\u3399\0\0\u339Ci\xE4\u1464ara\xEC\u2E6F\u803B\xAD\u40AD\u0100gm\u33A8\u33B4ma\u0180;fv\u33B1\u33B2\u33B2\u43C3;\u43C2\u0400;deglnpr\u12AB\u33C5\u33C9\u33CE\u33D6\u33DE\u33E1\u33E6ot;\u6A6A\u0100;q\u12B1\u12B0\u0100;E\u33D3\u33D4\u6A9E;\u6AA0\u0100;E\u33DB\u33DC\u6A9D;\u6A9Fe;\u6246lus;\u6A24arr;\u6972ar\xF2\u113D\u0200aeit\u33F8\u3408\u340F\u3417\u0100ls\u33FD\u3404lsetm\xE9\u336Ahp;\u6A33parsl;\u69E4\u0100dl\u1463\u3414e;\u6323\u0100;e\u341C\u341D\u6AAA\u0100;s\u3422\u3423\u6AAC;\uC000\u2AAC\uFE00\u0180flp\u342E\u3433\u3442tcy;\u444C\u0100;b\u3438\u3439\u402F\u0100;a\u343E\u343F\u69C4r;\u633Ff;\uC000\u{1D564}a\u0100dr\u344D\u0402es\u0100;u\u3454\u3455\u6660it\xBB\u3455\u0180csu\u3460\u3479\u349F\u0100au\u3465\u346Fp\u0100;s\u1188\u346B;\uC000\u2293\uFE00p\u0100;s\u11B4\u3475;\uC000\u2294\uFE00u\u0100bp\u347F\u348F\u0180;es\u1197\u119C\u3486et\u0100;e\u1197\u348D\xF1\u119D\u0180;es\u11A8\u11AD\u3496et\u0100;e\u11A8\u349D\xF1\u11AE\u0180;af\u117B\u34A6\u05B0r\u0165\u34AB\u05B1\xBB\u117Car\xF2\u1148\u0200cemt\u34B9\u34BE\u34C2\u34C5r;\uC000\u{1D4C8}tm\xEE\xF1i\xEC\u3415ar\xE6\u11BE\u0100ar\u34CE\u34D5r\u0100;f\u34D4\u17BF\u6606\u0100an\u34DA\u34EDight\u0100ep\u34E3\u34EApsilo\xEE\u1EE0h\xE9\u2EAFs\xBB\u2852\u0280bcmnp\u34FB\u355E\u1209\u358B\u358E\u0480;Edemnprs\u350E\u350F\u3511\u3515\u351E\u3523\u352C\u3531\u3536\u6282;\u6AC5ot;\u6ABD\u0100;d\u11DA\u351Aot;\u6AC3ult;\u6AC1\u0100Ee\u3528\u352A;\u6ACB;\u628Alus;\u6ABFarr;\u6979\u0180eiu\u353D\u3552\u3555t\u0180;en\u350E\u3545\u354Bq\u0100;q\u11DA\u350Feq\u0100;q\u352B\u3528m;\u6AC7\u0100bp\u355A\u355C;\u6AD5;\u6AD3c\u0300;acens\u11ED\u356C\u3572\u3579\u357B\u3326ppro\xF8\u32FAurlye\xF1\u11FE\xF1\u11F3\u0180aes\u3582\u3588\u331Bppro\xF8\u331Aq\xF1\u3317g;\u666A\u0680123;Edehlmnps\u35A9\u35AC\u35AF\u121C\u35B2\u35B4\u35C0\u35C9\u35D5\u35DA\u35DF\u35E8\u35ED\u803B\xB9\u40B9\u803B\xB2\u40B2\u803B\xB3\u40B3;\u6AC6\u0100os\u35B9\u35BCt;\u6ABEub;\u6AD8\u0100;d\u1222\u35C5ot;\u6AC4s\u0100ou\u35CF\u35D2l;\u67C9b;\u6AD7arr;\u697Bult;\u6AC2\u0100Ee\u35E4\u35E6;\u6ACC;\u628Blus;\u6AC0\u0180eiu\u35F4\u3609\u360Ct\u0180;en\u121C\u35FC\u3602q\u0100;q\u1222\u35B2eq\u0100;q\u35E7\u35E4m;\u6AC8\u0100bp\u3611\u3613;\u6AD4;\u6AD6\u0180Aan\u361C\u3620\u362Drr;\u61D9r\u0100hr\u3626\u3628\xEB\u222E\u0100;o\u0A2B\u0A29war;\u692Alig\u803B\xDF\u40DF\u0BE1\u3651\u365D\u3660\u12CE\u3673\u3679\0\u367E\u36C2\0\0\0\0\0\u36DB\u3703\0\u3709\u376C\0\0\0\u3787\u0272\u3656\0\0\u365Bget;\u6316;\u43C4r\xEB\u0E5F\u0180aey\u3666\u366B\u3670ron;\u4165dil;\u4163;\u4442lrec;\u6315r;\uC000\u{1D531}\u0200eiko\u3686\u369D\u36B5\u36BC\u01F2\u368B\0\u3691e\u01004f\u1284\u1281a\u0180;sv\u3698\u3699\u369B\u43B8ym;\u43D1\u0100cn\u36A2\u36B2k\u0100as\u36A8\u36AEppro\xF8\u12C1im\xBB\u12ACs\xF0\u129E\u0100as\u36BA\u36AE\xF0\u12C1rn\u803B\xFE\u40FE\u01EC\u031F\u36C6\u22E7es\u8180\xD7;bd\u36CF\u36D0\u36D8\u40D7\u0100;a\u190F\u36D5r;\u6A31;\u6A30\u0180eps\u36E1\u36E3\u3700\xE1\u2A4D\u0200;bcf\u0486\u36EC\u36F0\u36F4ot;\u6336ir;\u6AF1\u0100;o\u36F9\u36FC\uC000\u{1D565}rk;\u6ADA\xE1\u3362rime;\u6034\u0180aip\u370F\u3712\u3764d\xE5\u1248\u0380adempst\u3721\u374D\u3740\u3751\u3757\u375C\u375Fngle\u0280;dlqr\u3730\u3731\u3736\u3740\u3742\u65B5own\xBB\u1DBBeft\u0100;e\u2800\u373E\xF1\u092E;\u625Cight\u0100;e\u32AA\u374B\xF1\u105Aot;\u65ECinus;\u6A3Alus;\u6A39b;\u69CDime;\u6A3Bezium;\u63E2\u0180cht\u3772\u377D\u3781\u0100ry\u3777\u377B;\uC000\u{1D4C9};\u4446cy;\u445Brok;\u4167\u0100io\u378B\u378Ex\xF4\u1777head\u0100lr\u3797\u37A0eftarro\xF7\u084Fightarrow\xBB\u0F5D\u0900AHabcdfghlmoprstuw\u37D0\u37D3\u37D7\u37E4\u37F0\u37FC\u380E\u381C\u3823\u3834\u3851\u385D\u386B\u38A9\u38CC\u38D2\u38EA\u38F6r\xF2\u03EDar;\u6963\u0100cr\u37DC\u37E2ute\u803B\xFA\u40FA\xF2\u1150r\u01E3\u37EA\0\u37EDy;\u445Eve;\u416D\u0100iy\u37F5\u37FArc\u803B\xFB\u40FB;\u4443\u0180abh\u3803\u3806\u380Br\xF2\u13ADlac;\u4171a\xF2\u13C3\u0100ir\u3813\u3818sht;\u697E;\uC000\u{1D532}rave\u803B\xF9\u40F9\u0161\u3827\u3831r\u0100lr\u382C\u382E\xBB\u0957\xBB\u1083lk;\u6580\u0100ct\u3839\u384D\u026F\u383F\0\0\u384Arn\u0100;e\u3845\u3846\u631Cr\xBB\u3846op;\u630Fri;\u65F8\u0100al\u3856\u385Acr;\u416B\u80BB\xA8\u0349\u0100gp\u3862\u3866on;\u4173f;\uC000\u{1D566}\u0300adhlsu\u114B\u3878\u387D\u1372\u3891\u38A0own\xE1\u13B3arpoon\u0100lr\u3888\u388Cef\xF4\u382Digh\xF4\u382Fi\u0180;hl\u3899\u389A\u389C\u43C5\xBB\u13FAon\xBB\u389Aparrows;\u61C8\u0180cit\u38B0\u38C4\u38C8\u026F\u38B6\0\0\u38C1rn\u0100;e\u38BC\u38BD\u631Dr\xBB\u38BDop;\u630Eng;\u416Fri;\u65F9cr;\uC000\u{1D4CA}\u0180dir\u38D9\u38DD\u38E2ot;\u62F0lde;\u4169i\u0100;f\u3730\u38E8\xBB\u1813\u0100am\u38EF\u38F2r\xF2\u38A8l\u803B\xFC\u40FCangle;\u69A7\u0780ABDacdeflnoprsz\u391C\u391F\u3929\u392D\u39B5\u39B8\u39BD\u39DF\u39E4\u39E8\u39F3\u39F9\u39FD\u3A01\u3A20r\xF2\u03F7ar\u0100;v\u3926\u3927\u6AE8;\u6AE9as\xE8\u03E1\u0100nr\u3932\u3937grt;\u699C\u0380eknprst\u34E3\u3946\u394B\u3952\u395D\u3964\u3996app\xE1\u2415othin\xE7\u1E96\u0180hir\u34EB\u2EC8\u3959op\xF4\u2FB5\u0100;h\u13B7\u3962\xEF\u318D\u0100iu\u3969\u396Dgm\xE1\u33B3\u0100bp\u3972\u3984setneq\u0100;q\u397D\u3980\uC000\u228A\uFE00;\uC000\u2ACB\uFE00setneq\u0100;q\u398F\u3992\uC000\u228B\uFE00;\uC000\u2ACC\uFE00\u0100hr\u399B\u399Fet\xE1\u369Ciangle\u0100lr\u39AA\u39AFeft\xBB\u0925ight\xBB\u1051y;\u4432ash\xBB\u1036\u0180elr\u39C4\u39D2\u39D7\u0180;be\u2DEA\u39CB\u39CFar;\u62BBq;\u625Alip;\u62EE\u0100bt\u39DC\u1468a\xF2\u1469r;\uC000\u{1D533}tr\xE9\u39AEsu\u0100bp\u39EF\u39F1\xBB\u0D1C\xBB\u0D59pf;\uC000\u{1D567}ro\xF0\u0EFBtr\xE9\u39B4\u0100cu\u3A06\u3A0Br;\uC000\u{1D4CB}\u0100bp\u3A10\u3A18n\u0100Ee\u3980\u3A16\xBB\u397En\u0100Ee\u3992\u3A1E\xBB\u3990igzag;\u699A\u0380cefoprs\u3A36\u3A3B\u3A56\u3A5B\u3A54\u3A61\u3A6Airc;\u4175\u0100di\u3A40\u3A51\u0100bg\u3A45\u3A49ar;\u6A5Fe\u0100;q\u15FA\u3A4F;\u6259erp;\u6118r;\uC000\u{1D534}pf;\uC000\u{1D568}\u0100;e\u1479\u3A66at\xE8\u1479cr;\uC000\u{1D4CC}\u0AE3\u178E\u3A87\0\u3A8B\0\u3A90\u3A9B\0\0\u3A9D\u3AA8\u3AAB\u3AAF\0\0\u3AC3\u3ACE\0\u3AD8\u17DC\u17DFtr\xE9\u17D1r;\uC000\u{1D535}\u0100Aa\u3A94\u3A97r\xF2\u03C3r\xF2\u09F6;\u43BE\u0100Aa\u3AA1\u3AA4r\xF2\u03B8r\xF2\u09EBa\xF0\u2713is;\u62FB\u0180dpt\u17A4\u3AB5\u3ABE\u0100fl\u3ABA\u17A9;\uC000\u{1D569}im\xE5\u17B2\u0100Aa\u3AC7\u3ACAr\xF2\u03CEr\xF2\u0A01\u0100cq\u3AD2\u17B8r;\uC000\u{1D4CD}\u0100pt\u17D6\u3ADCr\xE9\u17D4\u0400acefiosu\u3AF0\u3AFD\u3B08\u3B0C\u3B11\u3B15\u3B1B\u3B21c\u0100uy\u3AF6\u3AFBte\u803B\xFD\u40FD;\u444F\u0100iy\u3B02\u3B06rc;\u4177;\u444Bn\u803B\xA5\u40A5r;\uC000\u{1D536}cy;\u4457pf;\uC000\u{1D56A}cr;\uC000\u{1D4CE}\u0100cm\u3B26\u3B29y;\u444El\u803B\xFF\u40FF\u0500acdefhiosw\u3B42\u3B48\u3B54\u3B58\u3B64\u3B69\u3B6D\u3B74\u3B7A\u3B80cute;\u417A\u0100ay\u3B4D\u3B52ron;\u417E;\u4437ot;\u417C\u0100et\u3B5D\u3B61tr\xE6\u155Fa;\u43B6r;\uC000\u{1D537}cy;\u4436grarr;\u61DDpf;\uC000\u{1D56B}cr;\uC000\u{1D4CF}\u0100jn\u3B85\u3B87;\u600Dj;\u600C'.split("").map(a=>a.charCodeAt(0))),xmlDecodeTree=new Uint16Array("\u0200aglq	\x1B\u026D\0\0p;\u4026os;\u4027t;\u403Et;\u403Cuot;\u4022".split("").map(a=>a.charCodeAt(0)));var _a$1;const decodeMap=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),fromCodePoint=(_a$1=String.fromCodePoint)!==null&&_a$1!==void 0?_a$1:function(a){let s="";return a>65535&&(a-=65536,s+=String.fromCharCode(a>>>10&1023|55296),a=56320|a&1023),s+=String.fromCharCode(a),s};function replaceCodePoint(a){var s;return a>=55296&&a<=57343||a>1114111?65533:(s=decodeMap.get(a))!==null&&s!==void 0?s:a}var CharCodes$1;(function(a){a[a.NUM=35]="NUM",a[a.SEMI=59]="SEMI",a[a.EQUALS=61]="EQUALS",a[a.ZERO=48]="ZERO",a[a.NINE=57]="NINE",a[a.LOWER_A=97]="LOWER_A",a[a.LOWER_F=102]="LOWER_F",a[a.LOWER_X=120]="LOWER_X",a[a.LOWER_Z=122]="LOWER_Z",a[a.UPPER_A=65]="UPPER_A",a[a.UPPER_F=70]="UPPER_F",a[a.UPPER_Z=90]="UPPER_Z"})(CharCodes$1||(CharCodes$1={}));const TO_LOWER_BIT=32;var BinTrieFlags;(function(a){a[a.VALUE_LENGTH=49152]="VALUE_LENGTH",a[a.BRANCH_LENGTH=16256]="BRANCH_LENGTH",a[a.JUMP_TABLE=127]="JUMP_TABLE"})(BinTrieFlags||(BinTrieFlags={}));function isNumber$1(a){return a>=CharCodes$1.ZERO&&a<=CharCodes$1.NINE}function isHexadecimalCharacter(a){return a>=CharCodes$1.UPPER_A&&a<=CharCodes$1.UPPER_F||a>=CharCodes$1.LOWER_A&&a<=CharCodes$1.LOWER_F}function isAsciiAlphaNumeric$1(a){return a>=CharCodes$1.UPPER_A&&a<=CharCodes$1.UPPER_Z||a>=CharCodes$1.LOWER_A&&a<=CharCodes$1.LOWER_Z||isNumber$1(a)}function isEntityInAttributeInvalidEnd$1(a){return a===CharCodes$1.EQUALS||isAsciiAlphaNumeric$1(a)}var EntityDecoderState;(function(a){a[a.EntityStart=0]="EntityStart",a[a.NumericStart=1]="NumericStart",a[a.NumericDecimal=2]="NumericDecimal",a[a.NumericHex=3]="NumericHex",a[a.NamedEntity=4]="NamedEntity"})(EntityDecoderState||(EntityDecoderState={}));var DecodingMode;(function(a){a[a.Legacy=0]="Legacy",a[a.Strict=1]="Strict",a[a.Attribute=2]="Attribute"})(DecodingMode||(DecodingMode={}));class EntityDecoder{constructor(s,c,u){this.decodeTree=s,this.emitCodePoint=c,this.errors=u,this.state=EntityDecoderState.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=DecodingMode.Strict}startEntity(s){this.decodeMode=s,this.state=EntityDecoderState.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(s,c){switch(this.state){case EntityDecoderState.EntityStart:return s.charCodeAt(c)===CharCodes$1.NUM?(this.state=EntityDecoderState.NumericStart,this.consumed+=1,this.stateNumericStart(s,c+1)):(this.state=EntityDecoderState.NamedEntity,this.stateNamedEntity(s,c));case EntityDecoderState.NumericStart:return this.stateNumericStart(s,c);case EntityDecoderState.NumericDecimal:return this.stateNumericDecimal(s,c);case EntityDecoderState.NumericHex:return this.stateNumericHex(s,c);case EntityDecoderState.NamedEntity:return this.stateNamedEntity(s,c)}}stateNumericStart(s,c){return c>=s.length?-1:(s.charCodeAt(c)|TO_LOWER_BIT)===CharCodes$1.LOWER_X?(this.state=EntityDecoderState.NumericHex,this.consumed+=1,this.stateNumericHex(s,c+1)):(this.state=EntityDecoderState.NumericDecimal,this.stateNumericDecimal(s,c))}addToNumericResult(s,c,u,d){if(c!==u){const h=u-c;this.result=this.result*Math.pow(d,h)+parseInt(s.substr(c,h),d),this.consumed+=h}}stateNumericHex(s,c){const u=c;for(;c<s.length;){const d=s.charCodeAt(c);if(isNumber$1(d)||isHexadecimalCharacter(d))c+=1;else return this.addToNumericResult(s,u,c,16),this.emitNumericEntity(d,3)}return this.addToNumericResult(s,u,c,16),-1}stateNumericDecimal(s,c){const u=c;for(;c<s.length;){const d=s.charCodeAt(c);if(isNumber$1(d))c+=1;else return this.addToNumericResult(s,u,c,10),this.emitNumericEntity(d,2)}return this.addToNumericResult(s,u,c,10),-1}emitNumericEntity(s,c){var u;if(this.consumed<=c)return(u=this.errors)===null||u===void 0||u.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(s===CharCodes$1.SEMI)this.consumed+=1;else if(this.decodeMode===DecodingMode.Strict)return 0;return this.emitCodePoint(replaceCodePoint(this.result),this.consumed),this.errors&&(s!==CharCodes$1.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(s,c){const{decodeTree:u}=this;let d=u[this.treeIndex],h=(d&BinTrieFlags.VALUE_LENGTH)>>14;for(;c<s.length;c++,this.excess++){const p=s.charCodeAt(c);if(this.treeIndex=determineBranch(u,d,this.treeIndex+Math.max(1,h),p),this.treeIndex<0)return this.result===0||this.decodeMode===DecodingMode.Attribute&&(h===0||isEntityInAttributeInvalidEnd$1(p))?0:this.emitNotTerminatedNamedEntity();if(d=u[this.treeIndex],h=(d&BinTrieFlags.VALUE_LENGTH)>>14,h!==0){if(p===CharCodes$1.SEMI)return this.emitNamedEntityData(this.treeIndex,h,this.consumed+this.excess);this.decodeMode!==DecodingMode.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var s;const{result:c,decodeTree:u}=this,d=(u[c]&BinTrieFlags.VALUE_LENGTH)>>14;return this.emitNamedEntityData(c,d,this.consumed),(s=this.errors)===null||s===void 0||s.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(s,c,u){const{decodeTree:d}=this;return this.emitCodePoint(c===1?d[s]&~BinTrieFlags.VALUE_LENGTH:d[s+1],u),c===3&&this.emitCodePoint(d[s+2],u),u}end(){var s;switch(this.state){case EntityDecoderState.NamedEntity:return this.result!==0&&(this.decodeMode!==DecodingMode.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case EntityDecoderState.NumericDecimal:return this.emitNumericEntity(0,2);case EntityDecoderState.NumericHex:return this.emitNumericEntity(0,3);case EntityDecoderState.NumericStart:return(s=this.errors)===null||s===void 0||s.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case EntityDecoderState.EntityStart:return 0}}}function getDecoder(a){let s="";const c=new EntityDecoder(a,u=>s+=fromCodePoint(u));return function(u,d){let h=0,p=0;for(;(p=u.indexOf("&",p))>=0;){s+=u.slice(h,p),c.startEntity(d);const f=c.write(u,p+1);if(f<0){h=p+c.end();break}h=p+f,p=f===0?h+1:h}const m=s+u.slice(h);return s="",m}}function determineBranch(a,s,c,u){const d=(s&BinTrieFlags.BRANCH_LENGTH)>>7,h=s&BinTrieFlags.JUMP_TABLE;if(d===0)return h!==0&&u===h?c:-1;if(h){const f=u-h;return f<0||f>=d?-1:a[c+f]-1}let p=c,m=p+d-1;for(;p<=m;){const f=p+m>>>1,_=a[f];if(_<u)p=f+1;else if(_>u)m=f-1;else return a[f+d]}return-1}getDecoder(htmlDecodeTree),getDecoder(xmlDecodeTree);const xmlReplacer=/["&'<>$\x80-\uFFFF]/g,xmlCodeMap=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),getCodePoint=String.prototype.codePointAt!=null?(a,s)=>a.codePointAt(s):(a,s)=>(a.charCodeAt(s)&64512)===55296?(a.charCodeAt(s)-55296)*1024+a.charCodeAt(s+1)-56320+65536:a.charCodeAt(s);function encodeXML(a){let s="",c=0,u;for(;(u=xmlReplacer.exec(a))!==null;){const d=u.index,h=a.charCodeAt(d),p=xmlCodeMap.get(h);p!==void 0?(s+=a.substring(c,d)+p,c=d+1):(s+=`${a.substring(c,d)}&#x${getCodePoint(a,d).toString(16)};`,c=xmlReplacer.lastIndex+=+((h&64512)===55296))}return s+a.substr(c)}function getEscaper(a,s){return function(c){let u,d=0,h="";for(;u=a.exec(c);)d!==u.index&&(h+=c.substring(d,u.index)),h+=s.get(u[0].charCodeAt(0)),d=u.index+1;return h+c.substring(d)}}const escapeAttribute=getEscaper(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),escapeText=getEscaper(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(a=>[a.toLowerCase(),a])),attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(a=>[a.toLowerCase(),a])),unencodedElements=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function replaceQuotes(a){return a.replace(/"/g,"&quot;")}function formatAttributes(a,s){var c;if(!a)return;const u=((c=s.encodeEntities)!==null&&c!==void 0?c:s.decodeEntities)===!1?replaceQuotes:s.xmlMode||s.encodeEntities!=="utf8"?encodeXML:escapeAttribute;return Object.keys(a).map(d=>{var h,p;const m=(h=a[d])!==null&&h!==void 0?h:"";return s.xmlMode==="foreign"&&(d=(p=attributeNames.get(d))!==null&&p!==void 0?p:d),!s.emptyAttrs&&!s.xmlMode&&m===""?d:`${d}="${u(m)}"`}).join(" ")}const singleTag=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function render$1(a,s={}){const c="length"in a?a:[a];let u="";for(let d=0;d<c.length;d++)u+=renderNode(c[d],s);return u}function renderNode(a,s){switch(a.type){case Root:return render$1(a.children,s);case Doctype:case Directive:return renderDirective(a);case Comment$1:return renderComment(a);case CDATA$1:return renderCdata(a);case Script:case Style:case Tag:return renderTag(a,s);case Text$1:return renderText(a,s)}}const foreignModeIntegrationPoints=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),foreignElements=new Set(["svg","math"]);function renderTag(a,s){var c;s.xmlMode==="foreign"&&(a.name=(c=elementNames.get(a.name))!==null&&c!==void 0?c:a.name,a.parent&&foreignModeIntegrationPoints.has(a.parent.name)&&(s={...s,xmlMode:!1})),!s.xmlMode&&foreignElements.has(a.name)&&(s={...s,xmlMode:"foreign"});let u=`<${a.name}`;const d=formatAttributes(a.attribs,s);return d&&(u+=` ${d}`),a.children.length===0&&(s.xmlMode?s.selfClosingTags!==!1:s.selfClosingTags&&singleTag.has(a.name))?(s.xmlMode||(u+=" "),u+="/>"):(u+=">",a.children.length>0&&(u+=render$1(a.children,s)),(s.xmlMode||!singleTag.has(a.name))&&(u+=`</${a.name}>`)),u}function renderDirective(a){return`<${a.data}>`}function renderText(a,s){var c;let u=a.data||"";return((c=s.encodeEntities)!==null&&c!==void 0?c:s.decodeEntities)!==!1&&!(!s.xmlMode&&a.parent&&unencodedElements.has(a.parent.name))&&(u=s.xmlMode||s.encodeEntities!=="utf8"?encodeXML(u):escapeText(u)),u}function renderCdata(a){return`<![CDATA[${a.children[0].data}]]>`}function renderComment(a){return`<!--${a.data}-->`}function getOuterHTML(a,s){return render$1(a,s)}function getInnerHTML(a,s){return hasChildren(a)?a.children.map(c=>getOuterHTML(c,s)).join(""):""}function getText(a){return Array.isArray(a)?a.map(getText).join(""):isTag(a)?a.name==="br"?`
`:getText(a.children):isCDATA(a)?getText(a.children):isText(a)?a.data:""}function textContent(a){return Array.isArray(a)?a.map(textContent).join(""):hasChildren(a)&&!isComment(a)?textContent(a.children):isText(a)?a.data:""}function innerText(a){return Array.isArray(a)?a.map(innerText).join(""):hasChildren(a)&&(a.type===ElementType.Tag||isCDATA(a))?innerText(a.children):isText(a)?a.data:""}function getChildren(a){return hasChildren(a)?a.children:[]}function getParent(a){return a.parent||null}function getSiblings(a){const s=getParent(a);if(s!=null)return getChildren(s);const c=[a];let{prev:u,next:d}=a;for(;u!=null;)c.unshift(u),{prev:u}=u;for(;d!=null;)c.push(d),{next:d}=d;return c}function getAttributeValue(a,s){var c;return(c=a.attribs)===null||c===void 0?void 0:c[s]}function hasAttrib(a,s){return a.attribs!=null&&Object.prototype.hasOwnProperty.call(a.attribs,s)&&a.attribs[s]!=null}function getName$1(a){return a.name}function nextElementSibling(a){let{next:s}=a;for(;s!==null&&!isTag(s);)({next:s}=s);return s}function prevElementSibling(a){let{prev:s}=a;for(;s!==null&&!isTag(s);)({prev:s}=s);return s}function removeElement(a){if(a.prev&&(a.prev.next=a.next),a.next&&(a.next.prev=a.prev),a.parent){const s=a.parent.children,c=s.lastIndexOf(a);c>=0&&s.splice(c,1)}a.next=null,a.prev=null,a.parent=null}function replaceElement(a,s){const c=s.prev=a.prev;c&&(c.next=s);const u=s.next=a.next;u&&(u.prev=s);const d=s.parent=a.parent;if(d){const h=d.children;h[h.lastIndexOf(a)]=s,a.parent=null}}function appendChild(a,s){if(removeElement(s),s.next=null,s.parent=a,a.children.push(s)>1){const c=a.children[a.children.length-2];c.next=s,s.prev=c}else s.prev=null}function append$1(a,s){removeElement(s);const{parent:c}=a,u=a.next;if(s.next=u,s.prev=a,a.next=s,s.parent=c,u){if(u.prev=s,c){const d=c.children;d.splice(d.lastIndexOf(u),0,s)}}else c&&c.children.push(s)}function prependChild(a,s){if(removeElement(s),s.parent=a,s.prev=null,a.children.unshift(s)!==1){const c=a.children[1];c.prev=s,s.next=c}else s.next=null}function prepend$1(a,s){removeElement(s);const{parent:c}=a;if(c){const u=c.children;u.splice(u.indexOf(a),0,s)}a.prev&&(a.prev.next=s),s.parent=c,s.prev=a.prev,s.next=a,a.prev=s}function filter$2(a,s,c=!0,u=1/0){return find$2(a,Array.isArray(s)?s:[s],c,u)}function find$2(a,s,c,u){const d=[],h=[s],p=[0];for(;;){if(p[0]>=h[0].length){if(p.length===1)return d;h.shift(),p.shift();continue}const m=h[0][p[0]++];if(a(m)&&(d.push(m),--u<=0))return d;c&&hasChildren(m)&&m.children.length>0&&(p.unshift(0),h.unshift(m.children))}}function findOneChild(a,s){return s.find(a)}function findOne(a,s,c=!0){let u=null;for(let d=0;d<s.length&&!u;d++){const h=s[d];if(isTag(h))a(h)?u=h:c&&h.children.length>0&&(u=findOne(a,h.children,!0));else continue}return u}function existsOne(a,s){return s.some(c=>isTag(c)&&(a(c)||existsOne(a,c.children)))}function findAll(a,s){const c=[],u=[s],d=[0];for(;;){if(d[0]>=u[0].length){if(u.length===1)return c;u.shift(),d.shift();continue}const h=u[0][d[0]++];isTag(h)&&(a(h)&&c.push(h),h.children.length>0&&(d.unshift(0),u.unshift(h.children)))}}const Checks={tag_name(a){return typeof a=="function"?s=>isTag(s)&&a(s.name):a==="*"?isTag:s=>isTag(s)&&s.name===a},tag_type(a){return typeof a=="function"?s=>a(s.type):s=>s.type===a},tag_contains(a){return typeof a=="function"?s=>isText(s)&&a(s.data):s=>isText(s)&&s.data===a}};function getAttribCheck(a,s){return typeof s=="function"?c=>isTag(c)&&s(c.attribs[a]):c=>isTag(c)&&c.attribs[a]===s}function combineFuncs(a,s){return c=>a(c)||s(c)}function compileTest(a){const s=Object.keys(a).map(c=>{const u=a[c];return Object.prototype.hasOwnProperty.call(Checks,c)?Checks[c](u):getAttribCheck(c,u)});return s.length===0?null:s.reduce(combineFuncs)}function testElement(a,s){const c=compileTest(a);return c?c(s):!0}function getElements(a,s,c,u=1/0){const d=compileTest(a);return d?filter$2(d,s,c,u):[]}function getElementById(a,s,c=!0){return Array.isArray(s)||(s=[s]),findOne(getAttribCheck("id",a),s,c)}function getElementsByTagName(a,s,c=!0,u=1/0){return filter$2(Checks.tag_name(a),s,c,u)}function getElementsByTagType(a,s,c=!0,u=1/0){return filter$2(Checks.tag_type(a),s,c,u)}function removeSubsets(a){let s=a.length;for(;--s>=0;){const c=a[s];if(s>0&&a.lastIndexOf(c,s-1)>=0){a.splice(s,1);continue}for(let u=c.parent;u;u=u.parent)if(a.includes(u)){a.splice(s,1);break}}return a}var DocumentPosition;(function(a){a[a.DISCONNECTED=1]="DISCONNECTED",a[a.PRECEDING=2]="PRECEDING",a[a.FOLLOWING=4]="FOLLOWING",a[a.CONTAINS=8]="CONTAINS",a[a.CONTAINED_BY=16]="CONTAINED_BY"})(DocumentPosition||(DocumentPosition={}));function compareDocumentPosition(a,s){const c=[],u=[];if(a===s)return 0;let d=hasChildren(a)?a:a.parent;for(;d;)c.unshift(d),d=d.parent;for(d=hasChildren(s)?s:s.parent;d;)u.unshift(d),d=d.parent;const h=Math.min(c.length,u.length);let p=0;for(;p<h&&c[p]===u[p];)p++;if(p===0)return DocumentPosition.DISCONNECTED;const m=c[p-1],f=m.children,_=c[p],y=u[p];return f.indexOf(_)>f.indexOf(y)?m===s?DocumentPosition.FOLLOWING|DocumentPosition.CONTAINED_BY:DocumentPosition.FOLLOWING:m===a?DocumentPosition.PRECEDING|DocumentPosition.CONTAINS:DocumentPosition.PRECEDING}function uniqueSort(a){return a=a.filter((s,c,u)=>!u.includes(s,c+1)),a.sort((s,c)=>{const u=compareDocumentPosition(s,c);return u&DocumentPosition.PRECEDING?-1:u&DocumentPosition.FOLLOWING?1:0}),a}function getFeed(a){const s=getOneElement(isValidFeed,a);return s?s.name==="feed"?getAtomFeed(s):getRssFeed(s):null}function getAtomFeed(a){var s;const c=a.children,u={type:"atom",items:getElementsByTagName("entry",c).map(p=>{var m;const{children:f}=p,_={media:getMediaElements(f)};addConditionally(_,"id","id",f),addConditionally(_,"title","title",f);const y=(m=getOneElement("link",f))===null||m===void 0?void 0:m.attribs.href;y&&(_.link=y);const E=fetch$2("summary",f)||fetch$2("content",f);E&&(_.description=E);const b=fetch$2("updated",f);return b&&(_.pubDate=new Date(b)),_})};addConditionally(u,"id","id",c),addConditionally(u,"title","title",c);const d=(s=getOneElement("link",c))===null||s===void 0?void 0:s.attribs.href;d&&(u.link=d),addConditionally(u,"description","subtitle",c);const h=fetch$2("updated",c);return h&&(u.updated=new Date(h)),addConditionally(u,"author","email",c,!0),u}function getRssFeed(a){var s,c;const u=(c=(s=getOneElement("channel",a.children))===null||s===void 0?void 0:s.children)!==null&&c!==void 0?c:[],d={type:a.name.substr(0,3),id:"",items:getElementsByTagName("item",a.children).map(p=>{const{children:m}=p,f={media:getMediaElements(m)};addConditionally(f,"id","guid",m),addConditionally(f,"title","title",m),addConditionally(f,"link","link",m),addConditionally(f,"description","description",m);const _=fetch$2("pubDate",m)||fetch$2("dc:date",m);return _&&(f.pubDate=new Date(_)),f})};addConditionally(d,"title","title",u),addConditionally(d,"link","link",u),addConditionally(d,"description","description",u);const h=fetch$2("lastBuildDate",u);return h&&(d.updated=new Date(h)),addConditionally(d,"author","managingEditor",u,!0),d}const MEDIA_KEYS_STRING=["url","type","lang"],MEDIA_KEYS_INT=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function getMediaElements(a){return getElementsByTagName("media:content",a).map(s=>{const{attribs:c}=s,u={medium:c.medium,isDefault:!!c.isDefault};for(const d of MEDIA_KEYS_STRING)c[d]&&(u[d]=c[d]);for(const d of MEDIA_KEYS_INT)c[d]&&(u[d]=parseInt(c[d],10));return c.expression&&(u.expression=c.expression),u})}function getOneElement(a,s){return getElementsByTagName(a,s,!0,1)[0]}function fetch$2(a,s,c=!1){return textContent(getElementsByTagName(a,s,c,1)).trim()}function addConditionally(a,s,c,u,d=!1){const h=fetch$2(c,u,d);h&&(a[s]=h)}function isValidFeed(a){return a==="rss"||a==="feed"||a==="rdf:RDF"}const DomUtils=Object.freeze(Object.defineProperty({__proto__:null,get DocumentPosition(){return DocumentPosition},append:append$1,appendChild,compareDocumentPosition,existsOne,filter:filter$2,find:find$2,findAll,findOne,findOneChild,getAttributeValue,getChildren,getElementById,getElements,getElementsByTagName,getElementsByTagType,getFeed,getInnerHTML,getName:getName$1,getOuterHTML,getParent,getSiblings,getText,hasAttrib,hasChildren,innerText,isCDATA,isComment,isDocument,isTag,isText,nextElementSibling,prepend:prepend$1,prependChild,prevElementSibling,removeElement,removeSubsets,replaceElement,testElement,textContent,uniqueSort},Symbol.toStringTag,{value:"Module"}));function render(a,s,c){return a?a(s??a._root.children,null,void 0,c).toString():""}function isOptions(a,s){return!s&&typeof a=="object"&&a!=null&&!("length"in a)&&!("type"in a)}function html$1(a,s){const c=isOptions(a)?(s=a,void 0):a,u={...defaultOpts$2,...this===null||this===void 0?void 0:this._options,...flatten(s??{})};return render(this,c,u)}function xml(a){const s={...this._options,xmlMode:!0};return render(this,a,s)}function text$1(a){const s=a||(this?this.root():[]);let c="";for(let u=0;u<s.length;u++)c+=textContent(s[u]);return c}function parseHTML(a,s,c=typeof s=="boolean"?s:!1){if(!a||typeof a!="string")return null;typeof s=="boolean"&&(c=s);const u=this.load(a,defaultOpts$2,!1);return c||u("script").remove(),u.root()[0].children.slice()}function root$1(){return this(this._root)}function contains(a,s){if(s===a)return!1;let c=s;for(;c&&c!==c.parent;)if(c=c.parent,c===a)return!0;return!1}function merge(a,s){if(!isArrayLike(a)||!isArrayLike(s))return;let c=a.length;const u=+s.length;for(let d=0;d<u;d++)a[c++]=s[d];return a.length=c,a}function isArrayLike(a){if(Array.isArray(a))return!0;if(typeof a!="object"||!Object.prototype.hasOwnProperty.call(a,"length")||typeof a.length!="number"||a.length<0)return!1;for(let s=0;s<a.length;s++)if(!(s in a))return!1;return!0}const staticMethods=Object.freeze(Object.defineProperty({__proto__:null,contains,html:html$1,merge,parseHTML,root:root$1,text:text$1,xml},Symbol.toStringTag,{value:"Module"}));function isCheerio(a){return a.cheerio!=null}function camelCase(a){return a.replace(/[_.-](\w|$)/g,(s,c)=>c.toUpperCase())}function cssCase(a){return a.replace(/[A-Z]/g,"-$&").toLowerCase()}function domEach(a,s){const c=a.length;for(let u=0;u<c;u++)s(a[u],u);return a}function cloneDom(a){const s="length"in a?Array.prototype.map.call(a,u=>cloneNode(u,!0)):[cloneNode(a,!0)],c=new Document(s);return s.forEach(u=>{u.parent=c}),s}var CharacterCodes;(function(a){a[a.LowerA=97]="LowerA",a[a.LowerZ=122]="LowerZ",a[a.UpperA=65]="UpperA",a[a.UpperZ=90]="UpperZ",a[a.Exclamation=33]="Exclamation"})(CharacterCodes||(CharacterCodes={}));function isHtml(a){const s=a.indexOf("<");if(s<0||s>a.length-3)return!1;const c=a.charCodeAt(s+1);return(c>=CharacterCodes.LowerA&&c<=CharacterCodes.LowerZ||c>=CharacterCodes.UpperA&&c<=CharacterCodes.UpperZ||c===CharacterCodes.Exclamation)&&a.includes(">",s+2)}const hasOwn$1=Object.prototype.hasOwnProperty,rspace=/\s+/,dataAttrPrefix="data-",primitives={null:null,true:!0,false:!1},rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,rbrace=/^{[^]*}$|^\[[^]*]$/;function getAttr(a,s,c){var u;if(!(!a||!isTag(a))){if((u=a.attribs)!==null&&u!==void 0||(a.attribs={}),!s)return a.attribs;if(hasOwn$1.call(a.attribs,s))return!c&&rboolean.test(s)?s:a.attribs[s];if(a.name==="option"&&s==="value")return text$1(a.children);if(a.name==="input"&&(a.attribs.type==="radio"||a.attribs.type==="checkbox")&&s==="value")return"on"}}function setAttr(a,s,c){c===null?removeAttribute(a,s):a.attribs[s]=`${c}`}function attr(a,s){if(typeof a=="object"||s!==void 0){if(typeof s=="function"){if(typeof a!="string")throw new Error("Bad combination of arguments.");return domEach(this,(c,u)=>{isTag(c)&&setAttr(c,a,s.call(c,u,c.attribs[a]))})}return domEach(this,c=>{isTag(c)&&(typeof a=="object"?Object.keys(a).forEach(u=>{const d=a[u];setAttr(c,u,d)}):setAttr(c,a,s))})}return arguments.length>1?this:getAttr(this[0],a,this.options.xmlMode)}function getProp(a,s,c){return s in a?a[s]:!c&&rboolean.test(s)?getAttr(a,s,!1)!==void 0:getAttr(a,s,c)}function setProp(a,s,c,u){s in a?a[s]=c:setAttr(a,s,!u&&rboolean.test(s)?c?"":null:`${c}`)}function prop(a,s){var c;if(typeof a=="string"&&s===void 0){const u=this[0];if(!u||!isTag(u))return;switch(a){case"style":{const d=this.css(),h=Object.keys(d);return h.forEach((p,m)=>{d[m]=p}),d.length=h.length,d}case"tagName":case"nodeName":return u.name.toUpperCase();case"href":case"src":{const d=(c=u.attribs)===null||c===void 0?void 0:c[a];return typeof URL<"u"&&(a==="href"&&(u.tagName==="a"||u.name==="link")||a==="src"&&(u.tagName==="img"||u.tagName==="iframe"||u.tagName==="audio"||u.tagName==="video"||u.tagName==="source"))&&d!==void 0&&this.options.baseURI?new URL(d,this.options.baseURI).href:d}case"innerText":return innerText(u);case"textContent":return textContent(u);case"outerHTML":return this.clone().wrap("<container />").parent().html();case"innerHTML":return this.html();default:return getProp(u,a,this.options.xmlMode)}}if(typeof a=="object"||s!==void 0){if(typeof s=="function"){if(typeof a=="object")throw new Error("Bad combination of arguments.");return domEach(this,(u,d)=>{isTag(u)&&setProp(u,a,s.call(u,d,getProp(u,a,this.options.xmlMode)),this.options.xmlMode)})}return domEach(this,u=>{isTag(u)&&(typeof a=="object"?Object.keys(a).forEach(d=>{const h=a[d];setProp(u,d,h,this.options.xmlMode)}):setProp(u,a,s,this.options.xmlMode))})}}function setData(a,s,c){var u;const d=a;(u=d.data)!==null&&u!==void 0||(d.data={}),typeof s=="object"?Object.assign(d.data,s):typeof s=="string"&&c!==void 0&&(d.data[s]=c)}function readData(a,s){let c,u,d;s==null?(c=Object.keys(a.attribs).filter(h=>h.startsWith(dataAttrPrefix)),u=c.map(h=>camelCase(h.slice(dataAttrPrefix.length)))):(c=[dataAttrPrefix+cssCase(s)],u=[s]);for(let h=0;h<c.length;++h){const p=c[h],m=u[h];if(hasOwn$1.call(a.attribs,p)&&!hasOwn$1.call(a.data,m)){if(d=a.attribs[p],hasOwn$1.call(primitives,d))d=primitives[d];else if(d===String(Number(d)))d=Number(d);else if(rbrace.test(d))try{d=JSON.parse(d)}catch{}a.data[m]=d}}return s==null?a.data:d}function data(a,s){var c;const u=this[0];if(!u||!isTag(u))return;const d=u;return(c=d.data)!==null&&c!==void 0||(d.data={}),a?typeof a=="object"||s!==void 0?(domEach(this,h=>{isTag(h)&&(typeof a=="object"?setData(h,a):setData(h,a,s))}),this):hasOwn$1.call(d.data,a)?d.data[a]:readData(d,a):readData(d)}function val(a){const s=arguments.length===0,c=this[0];if(!c||!isTag(c))return s?void 0:this;switch(c.name){case"textarea":return this.text(a);case"select":{const u=this.find("option:selected");if(!s){if(this.attr("multiple")==null&&typeof a=="object")return this;this.find("option").removeAttr("selected");const d=typeof a!="object"?[a]:a;for(let h=0;h<d.length;h++)this.find(`option[value="${d[h]}"]`).attr("selected","");return this}return this.attr("multiple")?u.toArray().map(d=>text$1(d.children)):u.attr("value")}case"input":case"option":return s?this.attr("value"):this.attr("value",a)}}function removeAttribute(a,s){!a.attribs||!hasOwn$1.call(a.attribs,s)||delete a.attribs[s]}function splitNames(a){return a?a.trim().split(rspace):[]}function removeAttr(a){const s=splitNames(a);for(let c=0;c<s.length;c++)domEach(this,u=>{isTag(u)&&removeAttribute(u,s[c])});return this}function hasClass(a){return this.toArray().some(s=>{const c=isTag(s)&&s.attribs.class;let u=-1;if(c&&a.length)for(;(u=c.indexOf(a,u+1))>-1;){const d=u+a.length;if((u===0||rspace.test(c[u-1]))&&(d===c.length||rspace.test(c[d])))return!0}return!1})}function addClass(a){if(typeof a=="function")return domEach(this,(u,d)=>{if(isTag(u)){const h=u.attribs.class||"";addClass.call([u],a.call(u,d,h))}});if(!a||typeof a!="string")return this;const s=a.split(rspace),c=this.length;for(let u=0;u<c;u++){const d=this[u];if(!isTag(d))continue;const h=getAttr(d,"class",!1);if(!h)setAttr(d,"class",s.join(" ").trim());else{let p=` ${h} `;for(let m=0;m<s.length;m++){const f=`${s[m]} `;p.includes(` ${f}`)||(p+=f)}setAttr(d,"class",p.trim())}}return this}function removeClass(a){if(typeof a=="function")return domEach(this,(d,h)=>{isTag(d)&&removeClass.call([d],a.call(d,h,d.attribs.class||""))});const s=splitNames(a),c=s.length,u=arguments.length===0;return domEach(this,d=>{if(isTag(d))if(u)d.attribs.class="";else{const h=splitNames(d.attribs.class);let p=!1;for(let m=0;m<c;m++){const f=h.indexOf(s[m]);f>=0&&(h.splice(f,1),p=!0,m--)}p&&(d.attribs.class=h.join(" "))}})}function toggleClass(a,s){if(typeof a=="function")return domEach(this,(p,m)=>{isTag(p)&&toggleClass.call([p],a.call(p,m,p.attribs.class||"",s),s)});if(!a||typeof a!="string")return this;const c=a.split(rspace),u=c.length,d=typeof s=="boolean"?s?1:-1:0,h=this.length;for(let p=0;p<h;p++){const m=this[p];if(!isTag(m))continue;const f=splitNames(m.attribs.class);for(let _=0;_<u;_++){const y=f.indexOf(c[_]);d>=0&&y<0?f.push(c[_]):d<=0&&y>=0&&f.splice(y,1)}m.attribs.class=f.join(" ")}return this}const Attributes=Object.freeze(Object.defineProperty({__proto__:null,addClass,attr,data,hasClass,prop,removeAttr,removeClass,toggleClass,val},Symbol.toStringTag,{value:"Module"}));var SelectorType;(function(a){a.Attribute="attribute",a.Pseudo="pseudo",a.PseudoElement="pseudo-element",a.Tag="tag",a.Universal="universal",a.Adjacent="adjacent",a.Child="child",a.Descendant="descendant",a.Parent="parent",a.Sibling="sibling",a.ColumnCombinator="column-combinator"})(SelectorType||(SelectorType={}));var AttributeAction;(function(a){a.Any="any",a.Element="element",a.End="end",a.Equals="equals",a.Exists="exists",a.Hyphen="hyphen",a.Not="not",a.Start="start"})(AttributeAction||(AttributeAction={}));const reName=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,reEscape=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,actionTypes=new Map([[126,AttributeAction.Element],[94,AttributeAction.Start],[36,AttributeAction.End],[42,AttributeAction.Any],[33,AttributeAction.Not],[124,AttributeAction.Hyphen]]),unpackPseudos=new Set(["has","not","matches","is","where","host","host-context"]);function isTraversal$1(a){switch(a.type){case SelectorType.Adjacent:case SelectorType.Child:case SelectorType.Descendant:case SelectorType.Parent:case SelectorType.Sibling:case SelectorType.ColumnCombinator:return!0;default:return!1}}const stripQuotesFromPseudos=new Set(["contains","icontains"]);function funescape(a,s,c){const u=parseInt(s,16)-65536;return u!==u||c?s:u<0?String.fromCharCode(u+65536):String.fromCharCode(u>>10|55296,u&1023|56320)}function unescapeCSS(a){return a.replace(reEscape,funescape)}function isQuote(a){return a===39||a===34}function isWhitespace$2(a){return a===32||a===9||a===10||a===12||a===13}function parse$4(a){const s=[],c=parseSelector(s,`${a}`,0);if(c<a.length)throw new Error(`Unmatched selector: ${a.slice(c)}`);return s}function parseSelector(a,s,c){let u=[];function d(b){const T=s.slice(c+b).match(reName);if(!T)throw new Error(`Expected name, found ${s.slice(c)}`);const[A]=T;return c+=b+A.length,unescapeCSS(A)}function h(b){for(c+=b;c<s.length&&isWhitespace$2(s.charCodeAt(c));)c++}function p(){c+=1;const b=c;let T=1;for(;T>0&&c<s.length;c++)s.charCodeAt(c)===40&&!m(c)?T++:s.charCodeAt(c)===41&&!m(c)&&T--;if(T)throw new Error("Parenthesis not matched");return unescapeCSS(s.slice(b,c-1))}function m(b){let T=0;for(;s.charCodeAt(--b)===92;)T++;return(T&1)===1}function f(){if(u.length>0&&isTraversal$1(u[u.length-1]))throw new Error("Did not expect successive traversals.")}function _(b){if(u.length>0&&u[u.length-1].type===SelectorType.Descendant){u[u.length-1].type=b;return}f(),u.push({type:b})}function y(b,T){u.push({type:SelectorType.Attribute,name:b,action:T,value:d(1),namespace:null,ignoreCase:"quirks"})}function E(){if(u.length&&u[u.length-1].type===SelectorType.Descendant&&u.pop(),u.length===0)throw new Error("Empty sub-selector");a.push(u)}if(h(0),s.length===c)return c;e:for(;c<s.length;){const b=s.charCodeAt(c);switch(b){case 32:case 9:case 10:case 12:case 13:{(u.length===0||u[0].type!==SelectorType.Descendant)&&(f(),u.push({type:SelectorType.Descendant})),h(1);break}case 62:{_(SelectorType.Child),h(1);break}case 60:{_(SelectorType.Parent),h(1);break}case 126:{_(SelectorType.Sibling),h(1);break}case 43:{_(SelectorType.Adjacent),h(1);break}case 46:{y("class",AttributeAction.Element);break}case 35:{y("id",AttributeAction.Equals);break}case 91:{h(1);let T,A=null;s.charCodeAt(c)===124?T=d(1):s.startsWith("*|",c)?(A="*",T=d(2)):(T=d(0),s.charCodeAt(c)===124&&s.charCodeAt(c+1)!==61&&(A=T,T=d(1))),h(0);let v=AttributeAction.Exists;const S=actionTypes.get(s.charCodeAt(c));if(S){if(v=S,s.charCodeAt(c+1)!==61)throw new Error("Expected `=`");h(2)}else s.charCodeAt(c)===61&&(v=AttributeAction.Equals,h(1));let O="",I=null;if(v!=="exists"){if(isQuote(s.charCodeAt(c))){const w=s.charCodeAt(c);let C=c+1;for(;C<s.length&&(s.charCodeAt(C)!==w||m(C));)C+=1;if(s.charCodeAt(C)!==w)throw new Error("Attribute value didn't end");O=unescapeCSS(s.slice(c+1,C)),c=C+1}else{const w=c;for(;c<s.length&&(!isWhitespace$2(s.charCodeAt(c))&&s.charCodeAt(c)!==93||m(c));)c+=1;O=unescapeCSS(s.slice(w,c))}h(0);const P=s.charCodeAt(c)|32;P===115?(I=!1,h(1)):P===105&&(I=!0,h(1))}if(s.charCodeAt(c)!==93)throw new Error("Attribute selector didn't terminate");c+=1;const x={type:SelectorType.Attribute,name:T,action:v,value:O,namespace:A,ignoreCase:I};u.push(x);break}case 58:{if(s.charCodeAt(c+1)===58){u.push({type:SelectorType.PseudoElement,name:d(2).toLowerCase(),data:s.charCodeAt(c)===40?p():null});continue}const T=d(1).toLowerCase();let A=null;if(s.charCodeAt(c)===40)if(unpackPseudos.has(T)){if(isQuote(s.charCodeAt(c+1)))throw new Error(`Pseudo-selector ${T} cannot be quoted`);if(A=[],c=parseSelector(A,s,c+1),s.charCodeAt(c)!==41)throw new Error(`Missing closing parenthesis in :${T} (${s})`);c+=1}else{if(A=p(),stripQuotesFromPseudos.has(T)){const v=A.charCodeAt(0);v===A.charCodeAt(A.length-1)&&isQuote(v)&&(A=A.slice(1,-1))}A=unescapeCSS(A)}u.push({type:SelectorType.Pseudo,name:T,data:A});break}case 44:{E(),u=[],h(1);break}default:{if(s.startsWith("/*",c)){const v=s.indexOf("*/",c+2);if(v<0)throw new Error("Comment was not terminated");c=v+2,u.length===0&&h(0);break}let T=null,A;if(b===42)c+=1,A="*";else if(b===124){if(A="",s.charCodeAt(c+1)===124){_(SelectorType.ColumnCombinator),h(2);break}}else if(reName.test(s.slice(c)))A=d(0);else break e;s.charCodeAt(c)===124&&s.charCodeAt(c+1)!==124&&(T=A,s.charCodeAt(c+1)===42?(A="*",c+=2):A=d(1)),u.push(A==="*"?{type:SelectorType.Universal,namespace:T}:{type:SelectorType.Tag,name:A,namespace:T})}}}return E(),c}var boolbase={trueFunc:function(){return!0},falseFunc:function(){return!1}};const boolbase$1=getDefaultExportFromCjs(boolbase),procedure=new Map([[SelectorType.Universal,50],[SelectorType.Tag,30],[SelectorType.Attribute,1],[SelectorType.Pseudo,0]]);function isTraversal(a){return!procedure.has(a.type)}const attributes=new Map([[AttributeAction.Exists,10],[AttributeAction.Equals,8],[AttributeAction.Not,7],[AttributeAction.Start,6],[AttributeAction.End,6],[AttributeAction.Any,5]]);function sortByProcedure(a){const s=a.map(getProcedure);for(let c=1;c<a.length;c++){const u=s[c];if(!(u<0))for(let d=c-1;d>=0&&u<s[d];d--){const h=a[d+1];a[d+1]=a[d],a[d]=h,s[d+1]=s[d],s[d]=u}}}function getProcedure(a){var s,c;let u=(s=procedure.get(a.type))!==null&&s!==void 0?s:-1;return a.type===SelectorType.Attribute?(u=(c=attributes.get(a.action))!==null&&c!==void 0?c:4,a.action===AttributeAction.Equals&&a.name==="id"&&(u=9),a.ignoreCase&&(u>>=1)):a.type===SelectorType.Pseudo&&(a.data?a.name==="has"||a.name==="contains"?u=0:Array.isArray(a.data)?(u=Math.min(...a.data.map(d=>Math.min(...d.map(getProcedure)))),u<0&&(u=0)):u=2:u=3),u}const reChars=/[-[\]{}()*+?.,\\^$|#\s]/g;function escapeRegex$1(a){return a.replace(reChars,"\\$&")}const caseInsensitiveAttributes=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function shouldIgnoreCase(a,s){return typeof a.ignoreCase=="boolean"?a.ignoreCase:a.ignoreCase==="quirks"?!!s.quirksMode:!s.xmlMode&&caseInsensitiveAttributes.has(a.name)}const attributeRules={equals(a,s,c){const{adapter:u}=c,{name:d}=s;let{value:h}=s;return shouldIgnoreCase(s,c)?(h=h.toLowerCase(),p=>{const m=u.getAttributeValue(p,d);return m!=null&&m.length===h.length&&m.toLowerCase()===h&&a(p)}):p=>u.getAttributeValue(p,d)===h&&a(p)},hyphen(a,s,c){const{adapter:u}=c,{name:d}=s;let{value:h}=s;const p=h.length;return shouldIgnoreCase(s,c)?(h=h.toLowerCase(),function(m){const f=u.getAttributeValue(m,d);return f!=null&&(f.length===p||f.charAt(p)==="-")&&f.substr(0,p).toLowerCase()===h&&a(m)}):function(m){const f=u.getAttributeValue(m,d);return f!=null&&(f.length===p||f.charAt(p)==="-")&&f.substr(0,p)===h&&a(m)}},element(a,s,c){const{adapter:u}=c,{name:d,value:h}=s;if(/\s/.test(h))return boolbase$1.falseFunc;const p=new RegExp(`(?:^|\\s)${escapeRegex$1(h)}(?:$|\\s)`,shouldIgnoreCase(s,c)?"i":"");return function(m){const f=u.getAttributeValue(m,d);return f!=null&&f.length>=h.length&&p.test(f)&&a(m)}},exists(a,{name:s},{adapter:c}){return u=>c.hasAttrib(u,s)&&a(u)},start(a,s,c){const{adapter:u}=c,{name:d}=s;let{value:h}=s;const p=h.length;return p===0?boolbase$1.falseFunc:shouldIgnoreCase(s,c)?(h=h.toLowerCase(),m=>{const f=u.getAttributeValue(m,d);return f!=null&&f.length>=p&&f.substr(0,p).toLowerCase()===h&&a(m)}):m=>{var f;return!!(!((f=u.getAttributeValue(m,d))===null||f===void 0)&&f.startsWith(h))&&a(m)}},end(a,s,c){const{adapter:u}=c,{name:d}=s;let{value:h}=s;const p=-h.length;return p===0?boolbase$1.falseFunc:shouldIgnoreCase(s,c)?(h=h.toLowerCase(),m=>{var f;return((f=u.getAttributeValue(m,d))===null||f===void 0?void 0:f.substr(p).toLowerCase())===h&&a(m)}):m=>{var f;return!!(!((f=u.getAttributeValue(m,d))===null||f===void 0)&&f.endsWith(h))&&a(m)}},any(a,s,c){const{adapter:u}=c,{name:d,value:h}=s;if(h==="")return boolbase$1.falseFunc;if(shouldIgnoreCase(s,c)){const p=new RegExp(escapeRegex$1(h),"i");return function(m){const f=u.getAttributeValue(m,d);return f!=null&&f.length>=h.length&&p.test(f)&&a(m)}}return p=>{var m;return!!(!((m=u.getAttributeValue(p,d))===null||m===void 0)&&m.includes(h))&&a(p)}},not(a,s,c){const{adapter:u}=c,{name:d}=s;let{value:h}=s;return h===""?p=>!!u.getAttributeValue(p,d)&&a(p):shouldIgnoreCase(s,c)?(h=h.toLowerCase(),p=>{const m=u.getAttributeValue(p,d);return(m==null||m.length!==h.length||m.toLowerCase()!==h)&&a(p)}):p=>u.getAttributeValue(p,d)!==h&&a(p)}},whitespace=new Set([9,10,12,13,32]),ZERO=48,NINE=57;function parse$3(a){if(a=a.trim().toLowerCase(),a==="even")return[2,0];if(a==="odd")return[2,1];let s=0,c=0,u=h(),d=p();if(s<a.length&&a.charAt(s)==="n"&&(s++,c=u*(d??1),m(),s<a.length?(u=h(),m(),d=p()):u=d=0),d===null||s<a.length)throw new Error(`n-th rule couldn't be parsed ('${a}')`);return[c,u*d];function h(){return a.charAt(s)==="-"?(s++,-1):(a.charAt(s)==="+"&&s++,1)}function p(){const f=s;let _=0;for(;s<a.length&&a.charCodeAt(s)>=ZERO&&a.charCodeAt(s)<=NINE;)_=_*10+(a.charCodeAt(s)-ZERO),s++;return s===f?null:_}function m(){for(;s<a.length&&whitespace.has(a.charCodeAt(s));)s++}}function compile(a){const s=a[0],c=a[1]-1;if(c<0&&s<=0)return boolbase$1.falseFunc;if(s===-1)return h=>h<=c;if(s===0)return h=>h===c;if(s===1)return c<0?boolbase$1.trueFunc:h=>h>=c;const u=Math.abs(s),d=(c%u+u)%u;return s>1?h=>h>=c&&h%u===d:h=>h<=c&&h%u===d}function nthCheck(a){return compile(parse$3(a))}function getChildFunc(a,s){return c=>{const u=s.getParent(c);return u!=null&&s.isTag(u)&&a(c)}}const filters={contains(a,s,{adapter:c}){return function(u){return a(u)&&c.getText(u).includes(s)}},icontains(a,s,{adapter:c}){const u=s.toLowerCase();return function(d){return a(d)&&c.getText(d).toLowerCase().includes(u)}},"nth-child"(a,s,{adapter:c,equals:u}){const d=nthCheck(s);return d===boolbase$1.falseFunc?boolbase$1.falseFunc:d===boolbase$1.trueFunc?getChildFunc(a,c):function(h){const p=c.getSiblings(h);let m=0;for(let f=0;f<p.length&&!u(h,p[f]);f++)c.isTag(p[f])&&m++;return d(m)&&a(h)}},"nth-last-child"(a,s,{adapter:c,equals:u}){const d=nthCheck(s);return d===boolbase$1.falseFunc?boolbase$1.falseFunc:d===boolbase$1.trueFunc?getChildFunc(a,c):function(h){const p=c.getSiblings(h);let m=0;for(let f=p.length-1;f>=0&&!u(h,p[f]);f--)c.isTag(p[f])&&m++;return d(m)&&a(h)}},"nth-of-type"(a,s,{adapter:c,equals:u}){const d=nthCheck(s);return d===boolbase$1.falseFunc?boolbase$1.falseFunc:d===boolbase$1.trueFunc?getChildFunc(a,c):function(h){const p=c.getSiblings(h);let m=0;for(let f=0;f<p.length;f++){const _=p[f];if(u(h,_))break;c.isTag(_)&&c.getName(_)===c.getName(h)&&m++}return d(m)&&a(h)}},"nth-last-of-type"(a,s,{adapter:c,equals:u}){const d=nthCheck(s);return d===boolbase$1.falseFunc?boolbase$1.falseFunc:d===boolbase$1.trueFunc?getChildFunc(a,c):function(h){const p=c.getSiblings(h);let m=0;for(let f=p.length-1;f>=0;f--){const _=p[f];if(u(h,_))break;c.isTag(_)&&c.getName(_)===c.getName(h)&&m++}return d(m)&&a(h)}},root(a,s,{adapter:c}){return u=>{const d=c.getParent(u);return(d==null||!c.isTag(d))&&a(u)}},scope(a,s,c,u){const{equals:d}=c;return!u||u.length===0?filters.root(a,s,c):u.length===1?h=>d(u[0],h)&&a(h):h=>u.includes(h)&&a(h)},hover:dynamicStatePseudo("isHovered"),visited:dynamicStatePseudo("isVisited"),active:dynamicStatePseudo("isActive")};function dynamicStatePseudo(a){return function(s,c,{adapter:u}){const d=u[a];return typeof d!="function"?boolbase$1.falseFunc:function(h){return d(h)&&s(h)}}}const pseudos={empty(a,{adapter:s}){return!s.getChildren(a).some(c=>s.isTag(c)||s.getText(c)!=="")},"first-child"(a,{adapter:s,equals:c}){if(s.prevElementSibling)return s.prevElementSibling(a)==null;const u=s.getSiblings(a).find(d=>s.isTag(d));return u!=null&&c(a,u)},"last-child"(a,{adapter:s,equals:c}){const u=s.getSiblings(a);for(let d=u.length-1;d>=0;d--){if(c(a,u[d]))return!0;if(s.isTag(u[d]))break}return!1},"first-of-type"(a,{adapter:s,equals:c}){const u=s.getSiblings(a),d=s.getName(a);for(let h=0;h<u.length;h++){const p=u[h];if(c(a,p))return!0;if(s.isTag(p)&&s.getName(p)===d)break}return!1},"last-of-type"(a,{adapter:s,equals:c}){const u=s.getSiblings(a),d=s.getName(a);for(let h=u.length-1;h>=0;h--){const p=u[h];if(c(a,p))return!0;if(s.isTag(p)&&s.getName(p)===d)break}return!1},"only-of-type"(a,{adapter:s,equals:c}){const u=s.getName(a);return s.getSiblings(a).every(d=>c(a,d)||!s.isTag(d)||s.getName(d)!==u)},"only-child"(a,{adapter:s,equals:c}){return s.getSiblings(a).every(u=>c(a,u)||!s.isTag(u))}};function verifyPseudoArgs(a,s,c,u){if(c===null){if(a.length>u)throw new Error(`Pseudo-class :${s} requires an argument`)}else if(a.length===u)throw new Error(`Pseudo-class :${s} doesn't have any arguments`)}const aliases={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:`:is(
        :is(button, input, select, textarea, optgroup, option)[disabled],
        optgroup[disabled] > option,
        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)
    )`,enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"},PLACEHOLDER_ELEMENT={};function ensureIsTag(a,s){return a===boolbase$1.falseFunc?boolbase$1.falseFunc:c=>s.isTag(c)&&a(c)}function getNextSiblings(a,s){const c=s.getSiblings(a);if(c.length<=1)return[];const u=c.indexOf(a);return u<0||u===c.length-1?[]:c.slice(u+1).filter(s.isTag)}function copyOptions(a){return{xmlMode:!!a.xmlMode,lowerCaseAttributeNames:!!a.lowerCaseAttributeNames,lowerCaseTags:!!a.lowerCaseTags,quirksMode:!!a.quirksMode,cacheResults:!!a.cacheResults,pseudos:a.pseudos,adapter:a.adapter,equals:a.equals}}const is$2=(a,s,c,u,d)=>{const h=d(s,copyOptions(c),u);return h===boolbase$1.trueFunc?a:h===boolbase$1.falseFunc?boolbase$1.falseFunc:p=>h(p)&&a(p)},subselects={is:is$2,matches:is$2,where:is$2,not(a,s,c,u,d){const h=d(s,copyOptions(c),u);return h===boolbase$1.falseFunc?a:h===boolbase$1.trueFunc?boolbase$1.falseFunc:p=>!h(p)&&a(p)},has(a,s,c,u,d){const{adapter:h}=c,p=copyOptions(c);p.relativeSelector=!0;const m=s.some(y=>y.some(isTraversal))?[PLACEHOLDER_ELEMENT]:void 0,f=d(s,p,m);if(f===boolbase$1.falseFunc)return boolbase$1.falseFunc;const _=ensureIsTag(f,h);if(m&&f!==boolbase$1.trueFunc){const{shouldTestNextSiblings:y=!1}=f;return E=>{if(!a(E))return!1;m[0]=E;const b=h.getChildren(E),T=y?[...b,...getNextSiblings(E,h)]:b;return h.existsOne(_,T)}}return y=>a(y)&&h.existsOne(_,h.getChildren(y))}};function compilePseudoSelector(a,s,c,u,d){var h;const{name:p,data:m}=s;if(Array.isArray(m)){if(!(p in subselects))throw new Error(`Unknown pseudo-class :${p}(${m})`);return subselects[p](a,m,c,u,d)}const f=(h=c.pseudos)===null||h===void 0?void 0:h[p],_=typeof f=="string"?f:aliases[p];if(typeof _=="string"){if(m!=null)throw new Error(`Pseudo ${p} doesn't have any arguments`);const y=parse$4(_);return subselects.is(a,y,c,u,d)}if(typeof f=="function")return verifyPseudoArgs(f,p,m,1),y=>f(y,m)&&a(y);if(p in filters)return filters[p](a,m,c,u);if(p in pseudos){const y=pseudos[p];return verifyPseudoArgs(y,p,m,2),E=>y(E,c,m)&&a(E)}throw new Error(`Unknown pseudo-class :${p}`)}function getElementParent(a,s){const c=s.getParent(a);return c&&s.isTag(c)?c:null}function compileGeneralSelector(a,s,c,u,d){const{adapter:h,equals:p}=c;switch(s.type){case SelectorType.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case SelectorType.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case SelectorType.Attribute:{if(s.namespace!=null)throw new Error("Namespaced attributes are not yet supported by css-select");return(!c.xmlMode||c.lowerCaseAttributeNames)&&(s.name=s.name.toLowerCase()),attributeRules[s.action](a,s,c)}case SelectorType.Pseudo:return compilePseudoSelector(a,s,c,u,d);case SelectorType.Tag:{if(s.namespace!=null)throw new Error("Namespaced tag names are not yet supported by css-select");let{name:m}=s;return(!c.xmlMode||c.lowerCaseTags)&&(m=m.toLowerCase()),function(f){return h.getName(f)===m&&a(f)}}case SelectorType.Descendant:{if(c.cacheResults===!1||typeof WeakSet>"u")return function(f){let _=f;for(;_=getElementParent(_,h);)if(a(_))return!0;return!1};const m=new WeakSet;return function(f){let _=f;for(;_=getElementParent(_,h);)if(!m.has(_)){if(h.isTag(_)&&a(_))return!0;m.add(_)}return!1}}case"_flexibleDescendant":return function(m){let f=m;do if(a(f))return!0;while(f=getElementParent(f,h));return!1};case SelectorType.Parent:return function(m){return h.getChildren(m).some(f=>h.isTag(f)&&a(f))};case SelectorType.Child:return function(m){const f=h.getParent(m);return f!=null&&h.isTag(f)&&a(f)};case SelectorType.Sibling:return function(m){const f=h.getSiblings(m);for(let _=0;_<f.length;_++){const y=f[_];if(p(m,y))break;if(h.isTag(y)&&a(y))return!0}return!1};case SelectorType.Adjacent:return h.prevElementSibling?function(m){const f=h.prevElementSibling(m);return f!=null&&a(f)}:function(m){const f=h.getSiblings(m);let _;for(let y=0;y<f.length;y++){const E=f[y];if(p(m,E))break;h.isTag(E)&&(_=E)}return!!_&&a(_)};case SelectorType.Universal:{if(s.namespace!=null&&s.namespace!=="*")throw new Error("Namespaced universal selectors are not yet supported by css-select");return a}}}function includesScopePseudo(a){return a.type===SelectorType.Pseudo&&(a.name==="scope"||Array.isArray(a.data)&&a.data.some(s=>s.some(includesScopePseudo)))}const DESCENDANT_TOKEN={type:SelectorType.Descendant},FLEXIBLE_DESCENDANT_TOKEN={type:"_flexibleDescendant"},SCOPE_TOKEN={type:SelectorType.Pseudo,name:"scope",data:null};function absolutize(a,{adapter:s},c){const u=!!(c!=null&&c.every(d=>{const h=s.isTag(d)&&s.getParent(d);return d===PLACEHOLDER_ELEMENT||h&&s.isTag(h)}));for(const d of a){if(!(d.length>0&&isTraversal(d[0])&&d[0].type!==SelectorType.Descendant))if(u&&!d.some(includesScopePseudo))d.unshift(DESCENDANT_TOKEN);else continue;d.unshift(SCOPE_TOKEN)}}function compileToken(a,s,c){var u;a.forEach(sortByProcedure),c=(u=s.context)!==null&&u!==void 0?u:c;const d=Array.isArray(c),h=c&&(Array.isArray(c)?c:[c]);if(s.relativeSelector!==!1)absolutize(a,s,h);else if(a.some(f=>f.length>0&&isTraversal(f[0])))throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");let p=!1;const m=a.map(f=>{if(f.length>=2){const[_,y]=f;_.type!==SelectorType.Pseudo||_.name!=="scope"||(d&&y.type===SelectorType.Descendant?f[1]=FLEXIBLE_DESCENDANT_TOKEN:(y.type===SelectorType.Adjacent||y.type===SelectorType.Sibling)&&(p=!0))}return compileRules(f,s,h)}).reduce(reduceRules,boolbase$1.falseFunc);return m.shouldTestNextSiblings=p,m}function compileRules(a,s,c){var u;return a.reduce((d,h)=>d===boolbase$1.falseFunc?boolbase$1.falseFunc:compileGeneralSelector(d,h,s,c,compileToken),(u=s.rootFunc)!==null&&u!==void 0?u:boolbase$1.trueFunc)}function reduceRules(a,s){return s===boolbase$1.falseFunc||a===boolbase$1.trueFunc?a:a===boolbase$1.falseFunc||s===boolbase$1.trueFunc?s:function(c){return a(c)||s(c)}}const defaultEquals=(a,s)=>a===s,defaultOptions$1={adapter:DomUtils,equals:defaultEquals};function convertOptionFormats(a){var s,c,u,d;const h=a??defaultOptions$1;return(s=h.adapter)!==null&&s!==void 0||(h.adapter=DomUtils),(c=h.equals)!==null&&c!==void 0||(h.equals=(d=(u=h.adapter)===null||u===void 0?void 0:u.equals)!==null&&d!==void 0?d:defaultEquals),h}function wrapCompile(a){return function(s,c,u){const d=convertOptionFormats(c);return a(s,d,u)}}const _compileToken=wrapCompile(compileToken);function prepareContext(a,s,c=!1){return c&&(a=appendNextSiblings(a,s)),Array.isArray(a)?s.removeSubsets(a):s.getChildren(a)}function appendNextSiblings(a,s){const c=Array.isArray(a)?a.slice(0):[a],u=c.length;for(let d=0;d<u;d++){const h=getNextSiblings(c[d],s);c.push(...h)}return c}const filterNames=new Set(["first","last","eq","gt","nth","lt","even","odd"]);function isFilter(a){return a.type!=="pseudo"?!1:filterNames.has(a.name)?!0:a.name==="not"&&Array.isArray(a.data)?a.data.some(s=>s.some(isFilter)):!1}function getLimit(a,s,c){const u=s!=null?parseInt(s,10):NaN;switch(a){case"first":return 1;case"nth":case"eq":return isFinite(u)?u>=0?u+1:1/0:0;case"lt":return isFinite(u)?u>=0?Math.min(u,c):1/0:0;case"gt":return isFinite(u)?1/0:0;case"odd":return 2*c;case"even":return 2*c-1;case"last":case"not":return 1/0}}function getDocumentRoot(a){for(;a.parent;)a=a.parent;return a}function groupSelectors(a){const s=[],c=[];for(const u of a)u.some(isFilter)?s.push(u):c.push(u);return[c,s]}const UNIVERSAL_SELECTOR={type:SelectorType.Universal,namespace:null},SCOPE_PSEUDO={type:SelectorType.Pseudo,name:"scope",data:null};function is$1(a,s,c={}){return some([a],s,c)}function some(a,s,c={}){if(typeof s=="function")return a.some(s);const[u,d]=groupSelectors(parse$4(s));return u.length>0&&a.some(_compileToken(u,c))||d.some(h=>filterBySelector(h,a,c).length>0)}function filterByPosition(a,s,c,u){const d=typeof c=="string"?parseInt(c,10):NaN;switch(a){case"first":case"lt":return s;case"last":return s.length>0?[s[s.length-1]]:s;case"nth":case"eq":return isFinite(d)&&Math.abs(d)<s.length?[d<0?s[s.length+d]:s[d]]:[];case"gt":return isFinite(d)?s.slice(d+1):[];case"even":return s.filter((h,p)=>p%2===0);case"odd":return s.filter((h,p)=>p%2===1);case"not":{const h=new Set(filterParsed(c,s,u));return s.filter(p=>!h.has(p))}}}function filter$1(a,s,c={}){return filterParsed(parse$4(a),s,c)}function filterParsed(a,s,c){if(s.length===0)return[];const[u,d]=groupSelectors(a);let h;if(u.length){const p=filterElements(s,u,c);if(d.length===0)return p;p.length&&(h=new Set(p))}for(let p=0;p<d.length&&(h==null?void 0:h.size)!==s.length;p++){const m=d[p];if((h?s.filter(_=>isTag(_)&&!h.has(_)):s).length===0)break;const f=filterBySelector(m,s,c);if(f.length)if(h)f.forEach(_=>h.add(_));else{if(p===d.length-1)return f;h=new Set(f)}}return typeof h<"u"?h.size===s.length?s:s.filter(p=>h.has(p)):[]}function filterBySelector(a,s,c){var u;if(a.some(isTraversal$1)){const d=(u=c.root)!==null&&u!==void 0?u:getDocumentRoot(s[0]),h={...c,context:s,relativeSelector:!1};return a.push(SCOPE_PSEUDO),findFilterElements(d,a,h,!0,s.length)}return findFilterElements(s,a,c,!1,s.length)}function select(a,s,c={},u=1/0){if(typeof a=="function")return find$1(s,a);const[d,h]=groupSelectors(parse$4(a)),p=h.map(m=>findFilterElements(s,m,c,!0,u));return d.length&&p.push(findElements(s,d,c,u)),p.length===0?[]:p.length===1?p[0]:uniqueSort(p.reduce((m,f)=>[...m,...f]))}function findFilterElements(a,s,c,u,d){const h=s.findIndex(isFilter),p=s.slice(0,h),m=s[h],f=s.length-1===h?d:1/0,_=getLimit(m.name,m.data,f);if(_===0)return[];const y=(p.length===0&&!Array.isArray(a)?getChildren(a).filter(isTag):p.length===0?(Array.isArray(a)?a:[a]).filter(isTag):u||p.some(isTraversal$1)?findElements(a,[p],c,_):filterElements(a,[p],c)).slice(0,_);let E=filterByPosition(m.name,y,m.data,c);if(E.length===0||s.length===h+1)return E;const b=s.slice(h+1),T=b.some(isTraversal$1);if(T){if(isTraversal$1(b[0])){const{type:A}=b[0];(A===SelectorType.Sibling||A===SelectorType.Adjacent)&&(E=prepareContext(E,DomUtils,!0)),b.unshift(UNIVERSAL_SELECTOR)}c={...c,relativeSelector:!1,rootFunc:A=>E.includes(A)}}else c.rootFunc&&c.rootFunc!==boolbase.trueFunc&&(c={...c,rootFunc:boolbase.trueFunc});return b.some(isFilter)?findFilterElements(E,b,c,!1,d):T?findElements(E,[b],c,d):filterElements(E,[b],c)}function findElements(a,s,c,u){const d=_compileToken(s,c,a);return find$1(a,d,u)}function find$1(a,s,c=1/0){const u=prepareContext(a,DomUtils,s.shouldTestNextSiblings);return find$2(d=>isTag(d)&&s(d),u,!0,c)}function filterElements(a,s,c){const u=(Array.isArray(a)?a:[a]).filter(isTag);if(u.length===0)return u;const d=_compileToken(s,c);return d===boolbase.trueFunc?u:u.filter(d)}const reSiblingSelector=/^\s*[~+]/;function find(a){var s;if(!a)return this._make([]);const c=this.toArray();if(typeof a!="string"){const h=isCheerio(a)?a.toArray():[a];return this._make(h.filter(p=>c.some(m=>contains(m,p))))}const u=reSiblingSelector.test(a)?c:this.children().toArray(),d={context:c,root:(s=this._root)===null||s===void 0?void 0:s[0],xmlMode:this.options.xmlMode,lowerCaseTags:this.options.lowerCaseTags,lowerCaseAttributeNames:this.options.lowerCaseAttributeNames,pseudos:this.options.pseudos,quirksMode:this.options.quirksMode};return this._make(select(a,u,d))}function _getMatcher(a){return function(s,...c){return function(u){var d;let h=a(s,this);return u&&(h=filterArray(h,u,this.options.xmlMode,(d=this._root)===null||d===void 0?void 0:d[0])),this._make(this.length>1&&h.length>1?c.reduce((p,m)=>m(p),h):h)}}}const _matcher=_getMatcher((a,s)=>{const c=[];for(let u=0;u<s.length;u++){const d=a(s[u]);c.push(d)}return new Array().concat(...c)}),_singleMatcher=_getMatcher((a,s)=>{const c=[];for(let u=0;u<s.length;u++){const d=a(s[u]);d!==null&&c.push(d)}return c});function _matchUntil(a,...s){let c=null;const u=_getMatcher((d,h)=>{const p=[];return domEach(h,m=>{for(let f;(f=d(m))&&!(c!=null&&c(f,p.length));m=f)p.push(f)}),p})(a,...s);return function(d,h){c=typeof d=="string"?m=>is$1(m,d,this.options):d?getFilterFn(d):null;const p=u.call(this,h);return c=null,p}}function _removeDuplicates(a){return Array.from(new Set(a))}const parent=_singleMatcher(({parent:a})=>a&&!isDocument(a)?a:null,_removeDuplicates),parents=_matcher(a=>{const s=[];for(;a.parent&&!isDocument(a.parent);)s.push(a.parent),a=a.parent;return s},uniqueSort,a=>a.reverse()),parentsUntil=_matchUntil(({parent:a})=>a&&!isDocument(a)?a:null,uniqueSort,a=>a.reverse());function closest(a){var s;const c=[];if(!a)return this._make(c);const u={xmlMode:this.options.xmlMode,root:(s=this._root)===null||s===void 0?void 0:s[0]},d=typeof a=="string"?h=>is$1(h,a,u):getFilterFn(a);return domEach(this,h=>{for(;h&&isTag(h);){if(d(h,0)){c.includes(h)||c.push(h);break}h=h.parent}}),this._make(c)}const next=_singleMatcher(a=>nextElementSibling(a)),nextAll=_matcher(a=>{const s=[];for(;a.next;)a=a.next,isTag(a)&&s.push(a);return s},_removeDuplicates),nextUntil=_matchUntil(a=>nextElementSibling(a),_removeDuplicates),prev=_singleMatcher(a=>prevElementSibling(a)),prevAll=_matcher(a=>{const s=[];for(;a.prev;)a=a.prev,isTag(a)&&s.push(a);return s},_removeDuplicates),prevUntil=_matchUntil(a=>prevElementSibling(a),_removeDuplicates),siblings=_matcher(a=>getSiblings(a).filter(s=>isTag(s)&&s!==a),uniqueSort),children=_matcher(a=>getChildren(a).filter(isTag),_removeDuplicates);function contents(){const a=this.toArray().reduce((s,c)=>hasChildren(c)?s.concat(c.children):s,[]);return this._make(a)}function each(a){let s=0;const c=this.length;for(;s<c&&a.call(this[s],s,this[s])!==!1;)++s;return this}function map(a){let s=[];for(let c=0;c<this.length;c++){const u=this[c],d=a.call(u,c,u);d!=null&&(s=s.concat(d))}return this._make(s)}function getFilterFn(a){return typeof a=="function"?(s,c)=>a.call(s,c,s):isCheerio(a)?s=>Array.prototype.includes.call(a,s):function(s){return a===s}}function filter(a){var s;return this._make(filterArray(this.toArray(),a,this.options.xmlMode,(s=this._root)===null||s===void 0?void 0:s[0]))}function filterArray(a,s,c,u){return typeof s=="string"?filter$1(s,a,{xmlMode:c,root:u}):a.filter(getFilterFn(s))}function is(a){const s=this.toArray();return typeof a=="string"?some(s.filter(isTag),a,this.options):a?s.some(getFilterFn(a)):!1}function not(a){let s=this.toArray();if(typeof a=="string"){const c=new Set(filter$1(a,s,this.options));s=s.filter(u=>!c.has(u))}else{const c=getFilterFn(a);s=s.filter((u,d)=>!c(u,d))}return this._make(s)}function has$1(a){return this.filter(typeof a=="string"?`:has(${a})`:(s,c)=>this._make(c).find(a).length>0)}function first(){return this.length>1?this._make(this[0]):this}function last(){return this.length>0?this._make(this[this.length-1]):this}function eq(a){var s;return a=+a,a===0&&this.length<=1?this:(a<0&&(a=this.length+a),this._make((s=this[a])!==null&&s!==void 0?s:[]))}function get(a){return a==null?this.toArray():this[a<0?this.length+a:a]}function toArray$1(){return Array.prototype.slice.call(this)}function index(a){let s,c;return a==null?(s=this.parent().children(),c=this[0]):typeof a=="string"?(s=this._make(a),c=this[0]):(s=this,c=isCheerio(a)?a[0]:a),Array.prototype.indexOf.call(s,c)}function slice(a,s){return this._make(Array.prototype.slice.call(this,a,s))}function end(){var a;return(a=this.prevObject)!==null&&a!==void 0?a:this._make([])}function add(a,s){const c=this._make(a,s),u=uniqueSort([...this.get(),...c.get()]);return this._make(u)}function addBack(a){return this.prevObject?this.add(a?this.prevObject.filter(a):this.prevObject):this}const Traversing=Object.freeze(Object.defineProperty({__proto__:null,add,addBack,children,closest,contents,each,end,eq,filter,filterArray,find,first,get,has:has$1,index,is,last,map,next,nextAll,nextUntil,not,parent,parents,parentsUntil,prev,prevAll,prevUntil,siblings,slice,toArray:toArray$1},Symbol.toStringTag,{value:"Module"}));function getParse(a){return function(s,c,u,d){if(typeof Buffer<"u"&&Buffer.isBuffer(s)&&(s=s.toString()),typeof s=="string")return a(s,c,u,d);const h=s;if(!Array.isArray(h)&&isDocument(h))return h;const p=new Document([]);return update(h,p),p}}function update(a,s){const c=Array.isArray(a)?a:[a];s?s.children=c:s=null;for(let u=0;u<c.length;u++){const d=c[u];d.parent&&d.parent.children!==c&&removeElement(d),s?(d.prev=c[u-1]||null,d.next=c[u+1]||null):d.prev=d.next=null,d.parent=s}return s}function _makeDomArray(a,s){return a==null?[]:isCheerio(a)?s?cloneDom(a.get()):a.get():Array.isArray(a)?a.reduce((c,u)=>c.concat(this._makeDomArray(u,s)),[]):typeof a=="string"?this._parse(a,this.options,!1,null).children:s?cloneDom([a]):[a]}function _insert(a){return function(...s){const c=this.length-1;return domEach(this,(u,d)=>{if(!hasChildren(u))return;const h=typeof s[0]=="function"?s[0].call(u,d,this._render(u.children)):s,p=this._makeDomArray(h,d<c);a(p,u.children,u)})}}function uniqueSplice(a,s,c,u,d){var h,p;const m=[s,c,...u],f=s===0?null:a[s-1],_=s+c>=a.length?null:a[s+c];for(let y=0;y<u.length;++y){const E=u[y],b=E.parent;if(b){const T=b.children.indexOf(E);T>-1&&(b.children.splice(T,1),d===b&&s>T&&m[0]--)}E.parent=d,E.prev&&(E.prev.next=(h=E.next)!==null&&h!==void 0?h:null),E.next&&(E.next.prev=(p=E.prev)!==null&&p!==void 0?p:null),E.prev=y===0?f:u[y-1],E.next=y===u.length-1?_:u[y+1]}return f&&(f.next=u[0]),_&&(_.prev=u[u.length-1]),a.splice(...m)}function appendTo(a){return(isCheerio(a)?a:this._make(a)).append(this),this}function prependTo(a){return(isCheerio(a)?a:this._make(a)).prepend(this),this}const append=_insert((a,s,c)=>{uniqueSplice(s,s.length,0,a,c)}),prepend=_insert((a,s,c)=>{uniqueSplice(s,0,0,a,c)});function _wrap(a){return function(s){const c=this.length-1,u=this.parents().last();for(let d=0;d<this.length;d++){const h=this[d],p=typeof s=="function"?s.call(h,d,h):typeof s=="string"&&!isHtml(s)?u.find(s).clone():s,[m]=this._makeDomArray(p,d<c);if(!m||!hasChildren(m))continue;let f=m,_=0;for(;_<f.children.length;){const y=f.children[_];isTag(y)?(f=y,_=0):_++}a(h,f,[m])}return this}}const wrap$1=_wrap((a,s,c)=>{const{parent:u}=a;if(!u)return;const d=u.children,h=d.indexOf(a);update([a],s),uniqueSplice(d,h,0,c,u)}),wrapInner=_wrap((a,s,c)=>{hasChildren(a)&&(update(a.children,s),update(c,a))});function unwrap(a){return this.parent(a).not("body").each((s,c)=>{this._make(c).replaceWith(c.children)}),this}function wrapAll(a){const s=this[0];if(s){const c=this._make(typeof a=="function"?a.call(s,0,s):a).insertBefore(s);let u;for(let h=0;h<c.length;h++)c[h].type==="tag"&&(u=c[h]);let d=0;for(;u&&d<u.children.length;){const h=u.children[d];h.type==="tag"?(u=h,d=0):d++}u&&this._make(u).append(this)}return this}function after(...a){const s=this.length-1;return domEach(this,(c,u)=>{const{parent:d}=c;if(!hasChildren(c)||!d)return;const h=d.children,p=h.indexOf(c);if(p<0)return;const m=typeof a[0]=="function"?a[0].call(c,u,this._render(c.children)):a,f=this._makeDomArray(m,u<s);uniqueSplice(h,p+1,0,f,d)})}function insertAfter(a){typeof a=="string"&&(a=this._make(a)),this.remove();const s=[];return this._makeDomArray(a).forEach(c=>{const u=this.clone().toArray(),{parent:d}=c;if(!d)return;const h=d.children,p=h.indexOf(c);p<0||(uniqueSplice(h,p+1,0,u,d),s.push(...u))}),this._make(s)}function before(...a){const s=this.length-1;return domEach(this,(c,u)=>{const{parent:d}=c;if(!hasChildren(c)||!d)return;const h=d.children,p=h.indexOf(c);if(p<0)return;const m=typeof a[0]=="function"?a[0].call(c,u,this._render(c.children)):a,f=this._makeDomArray(m,u<s);uniqueSplice(h,p,0,f,d)})}function insertBefore(a){const s=this._make(a);this.remove();const c=[];return domEach(s,u=>{const d=this.clone().toArray(),{parent:h}=u;if(!h)return;const p=h.children,m=p.indexOf(u);m<0||(uniqueSplice(p,m,0,d,h),c.push(...d))}),this._make(c)}function remove(a){const s=a?this.filter(a):this;return domEach(s,c=>{removeElement(c),c.prev=c.next=c.parent=null}),this}function replaceWith(a){return domEach(this,(s,c)=>{const{parent:u}=s;if(!u)return;const d=u.children,h=typeof a=="function"?a.call(s,c,s):a,p=this._makeDomArray(h);update(p,null);const m=d.indexOf(s);uniqueSplice(d,m,1,p,u),p.includes(s)||(s.parent=s.prev=s.next=null)})}function empty$1(){return domEach(this,a=>{hasChildren(a)&&(a.children.forEach(s=>{s.next=s.prev=s.parent=null}),a.children.length=0)})}function html(a){if(a===void 0){const s=this[0];return!s||!hasChildren(s)?null:this._render(s.children)}return domEach(this,s=>{if(!hasChildren(s))return;s.children.forEach(u=>{u.next=u.prev=u.parent=null});const c=isCheerio(a)?a.toArray():this._parse(`${a}`,this.options,!1,s).children;update(c,s)})}function toString(){return this._render(this)}function text(a){return a===void 0?text$1(this):typeof a=="function"?domEach(this,(s,c)=>this._make(s).text(a.call(s,c,text$1([s])))):domEach(this,s=>{if(!hasChildren(s))return;s.children.forEach(u=>{u.next=u.prev=u.parent=null});const c=new Text(`${a}`);update(c,s)})}function clone(){return this._make(cloneDom(this.get()))}const Manipulation=Object.freeze(Object.defineProperty({__proto__:null,_makeDomArray,after,append,appendTo,before,clone,empty:empty$1,html,insertAfter,insertBefore,prepend,prependTo,remove,replaceWith,text,toString,unwrap,wrap:wrap$1,wrapAll,wrapInner},Symbol.toStringTag,{value:"Module"}));function css(a,s){if(a!=null&&s!=null||typeof a=="object"&&!Array.isArray(a))return domEach(this,(c,u)=>{isTag(c)&&setCss(c,a,s,u)});if(this.length!==0)return getCss(this[0],a)}function setCss(a,s,c,u){if(typeof s=="string"){const d=getCss(a),h=typeof c=="function"?c.call(a,u,d[s]):c;h===""?delete d[s]:h!=null&&(d[s]=h),a.attribs.style=stringify$1(d)}else typeof s=="object"&&Object.keys(s).forEach((d,h)=>{setCss(a,d,s[d],h)})}function getCss(a,s){if(!a||!isTag(a))return;const c=parse$2(a.attribs.style);if(typeof s=="string")return c[s];if(Array.isArray(s)){const u={};return s.forEach(d=>{c[d]!=null&&(u[d]=c[d])}),u}return c}function stringify$1(a){return Object.keys(a).reduce((s,c)=>`${s}${s?" ":""}${c}: ${a[c]};`,"")}function parse$2(a){if(a=(a||"").trim(),!a)return{};const s={};let c;for(const u of a.split(";")){const d=u.indexOf(":");if(d<1||d===u.length-1){const h=u.trimEnd();h.length>0&&c!==void 0&&(s[c]+=`;${h}`)}else c=u.slice(0,d).trim(),s[c]=u.slice(d+1).trim()}return s}const Css=Object.freeze(Object.defineProperty({__proto__:null,css},Symbol.toStringTag,{value:"Module"})),submittableSelector="input,select,textarea,keygen",r20=/%20/g,rCRLF=/\r?\n/g;function serialize(){return this.serializeArray().map(a=>`${encodeURIComponent(a.name)}=${encodeURIComponent(a.value)}`).join("&").replace(r20,"+")}function serializeArray(){return this.map((a,s)=>{const c=this._make(s);return isTag(s)&&s.name==="form"?c.find(submittableSelector).toArray():c.filter(submittableSelector).toArray()}).filter('[name!=""]:enabled:not(:submit, :button, :image, :reset, :file):matches([checked], :not(:checkbox, :radio))').map((a,s)=>{var c;const u=this._make(s),d=u.attr("name"),h=(c=u.val())!==null&&c!==void 0?c:"";return Array.isArray(h)?h.map(p=>({name:d,value:p.replace(rCRLF,`\r
`)})):{name:d,value:h.replace(rCRLF,`\r
`)}}).toArray()}const Forms=Object.freeze(Object.defineProperty({__proto__:null,serialize,serializeArray},Symbol.toStringTag,{value:"Module"}));class Cheerio{constructor(s,c,u){if(this.length=0,this.options=u,this._root=c,s){for(let d=0;d<s.length;d++)this[d]=s[d];this.length=s.length}}}Cheerio.prototype.cheerio="[cheerio object]",Cheerio.prototype.splice=Array.prototype.splice,Cheerio.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator],Object.assign(Cheerio.prototype,Attributes,Traversing,Manipulation,Css,Forms);function getLoad(a,s){return function c(u,d,h=!0){if(u==null)throw new Error("cheerio.load() expects a string");const p={...defaultOpts$2,...flatten(d)},m=a(u,p,h,null);class f extends Cheerio{_make(E,b){const T=_(E,b);return T.prevObject=this,T}_parse(E,b,T,A){return a(E,b,T,A)}_render(E){return s(E,this.options)}}function _(y,E,b=m,T){if(y&&isCheerio(y))return y;const A={...p,...flatten(T)},v=typeof b=="string"?[a(b,A,!1,null)]:"length"in b?b:[b],S=isCheerio(v)?v:new f(v,null,A);if(S._root=S,!y)return new f(void 0,S,A);const O=typeof y=="string"&&isHtml(y)?a(y,A,!1,null).children:isNode$2(y)?[y]:Array.isArray(y)?y:void 0,I=new f(O,S,A);if(O)return I;if(typeof y!="string")throw new Error("Unexpected type of selector");let x=y;const P=E?typeof E=="string"?isHtml(E)?new f([a(E,A,!1,null)],S,A):(x=`${E} ${x}`,S):isCheerio(E)?E:new f(Array.isArray(E)?E:[E],S,A):S;return P?P.find(x):I}return Object.assign(_,staticMethods,{load:c,_root:m,_options:p,fn:f.prototype,prototype:f.prototype}),_}}function isNode$2(a){return!!a.name||a.type==="root"||a.type==="text"||a.type==="comment"}const UNDEFINED_CODE_POINTS=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),REPLACEMENT_CHARACTER="\uFFFD";var CODE_POINTS;(function(a){a[a.EOF=-1]="EOF",a[a.NULL=0]="NULL",a[a.TABULATION=9]="TABULATION",a[a.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",a[a.LINE_FEED=10]="LINE_FEED",a[a.FORM_FEED=12]="FORM_FEED",a[a.SPACE=32]="SPACE",a[a.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",a[a.QUOTATION_MARK=34]="QUOTATION_MARK",a[a.NUMBER_SIGN=35]="NUMBER_SIGN",a[a.AMPERSAND=38]="AMPERSAND",a[a.APOSTROPHE=39]="APOSTROPHE",a[a.HYPHEN_MINUS=45]="HYPHEN_MINUS",a[a.SOLIDUS=47]="SOLIDUS",a[a.DIGIT_0=48]="DIGIT_0",a[a.DIGIT_9=57]="DIGIT_9",a[a.SEMICOLON=59]="SEMICOLON",a[a.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",a[a.EQUALS_SIGN=61]="EQUALS_SIGN",a[a.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",a[a.QUESTION_MARK=63]="QUESTION_MARK",a[a.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",a[a.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",a[a.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",a[a.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",a[a.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",a[a.GRAVE_ACCENT=96]="GRAVE_ACCENT",a[a.LATIN_SMALL_A=97]="LATIN_SMALL_A",a[a.LATIN_SMALL_F=102]="LATIN_SMALL_F",a[a.LATIN_SMALL_X=120]="LATIN_SMALL_X",a[a.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",a[a.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(CODE_POINTS=CODE_POINTS||(CODE_POINTS={}));const SEQUENCES={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function isSurrogate(a){return a>=55296&&a<=57343}function isSurrogatePair(a){return a>=56320&&a<=57343}function getSurrogatePairCodePoint(a,s){return(a-55296)*1024+9216+s}function isControlCodePoint(a){return a!==32&&a!==10&&a!==13&&a!==9&&a!==12&&a>=1&&a<=31||a>=127&&a<=159}function isUndefinedCodePoint(a){return a>=64976&&a<=65007||UNDEFINED_CODE_POINTS.has(a)}var ERR;(function(a){a.controlCharacterInInputStream="control-character-in-input-stream",a.noncharacterInInputStream="noncharacter-in-input-stream",a.surrogateInInputStream="surrogate-in-input-stream",a.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",a.endTagWithAttributes="end-tag-with-attributes",a.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",a.unexpectedSolidusInTag="unexpected-solidus-in-tag",a.unexpectedNullCharacter="unexpected-null-character",a.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",a.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",a.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",a.missingEndTagName="missing-end-tag-name",a.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",a.unknownNamedCharacterReference="unknown-named-character-reference",a.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",a.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",a.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",a.eofBeforeTagName="eof-before-tag-name",a.eofInTag="eof-in-tag",a.missingAttributeValue="missing-attribute-value",a.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",a.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",a.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",a.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",a.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",a.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",a.missingDoctypePublicIdentifier="missing-doctype-public-identifier",a.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",a.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",a.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",a.cdataInHtmlContent="cdata-in-html-content",a.incorrectlyOpenedComment="incorrectly-opened-comment",a.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",a.eofInDoctype="eof-in-doctype",a.nestedComment="nested-comment",a.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",a.eofInComment="eof-in-comment",a.incorrectlyClosedComment="incorrectly-closed-comment",a.eofInCdata="eof-in-cdata",a.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",a.nullCharacterReference="null-character-reference",a.surrogateCharacterReference="surrogate-character-reference",a.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",a.controlCharacterReference="control-character-reference",a.noncharacterCharacterReference="noncharacter-character-reference",a.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",a.missingDoctypeName="missing-doctype-name",a.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",a.duplicateAttribute="duplicate-attribute",a.nonConformingDoctype="non-conforming-doctype",a.missingDoctype="missing-doctype",a.misplacedDoctype="misplaced-doctype",a.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",a.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",a.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",a.openElementsLeftAfterEof="open-elements-left-after-eof",a.abandonedHeadElementChild="abandoned-head-element-child",a.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",a.nestedNoscriptInHead="nested-noscript-in-head",a.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(ERR=ERR||(ERR={}));const DEFAULT_BUFFER_WATERLINE=65536;class Preprocessor{constructor(s){this.handler=s,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=DEFAULT_BUFFER_WATERLINE,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(s){const{line:c,col:u,offset:d}=this;return{code:s,startLine:c,endLine:c,startCol:u,endCol:u,startOffset:d,endOffset:d}}_err(s){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(s)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(s){if(this.pos!==this.html.length-1){const c=this.html.charCodeAt(this.pos+1);if(isSurrogatePair(c))return this.pos++,this._addGap(),getSurrogatePairCodePoint(s,c)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,CODE_POINTS.EOF;return this._err(ERR.surrogateInInputStream),s}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(s,c){this.html.length>0?this.html+=s:this.html=s,this.endOfChunkHit=!1,this.lastChunkWritten=c}insertHtmlAtCurrentPos(s){this.html=this.html.substring(0,this.pos+1)+s+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(s,c){if(this.pos+s.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(c)return this.html.startsWith(s,this.pos);for(let u=0;u<s.length;u++)if((this.html.charCodeAt(this.pos+u)|32)!==s.charCodeAt(u))return!1;return!0}peek(s){const c=this.pos+s;if(c>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,CODE_POINTS.EOF;const u=this.html.charCodeAt(c);return u===CODE_POINTS.CARRIAGE_RETURN?CODE_POINTS.LINE_FEED:u}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,CODE_POINTS.EOF;let s=this.html.charCodeAt(this.pos);return s===CODE_POINTS.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,CODE_POINTS.LINE_FEED):s===CODE_POINTS.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,isSurrogate(s)&&(s=this._processSurrogate(s)),this.handler.onParseError===null||s>31&&s<127||s===CODE_POINTS.LINE_FEED||s===CODE_POINTS.CARRIAGE_RETURN||s>159&&s<64976||this._checkForProblematicCharacters(s),s)}_checkForProblematicCharacters(s){isControlCodePoint(s)?this._err(ERR.controlCharacterInInputStream):isUndefinedCodePoint(s)&&this._err(ERR.noncharacterInInputStream)}retreat(s){for(this.pos-=s;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var TokenType;(function(a){a[a.CHARACTER=0]="CHARACTER",a[a.NULL_CHARACTER=1]="NULL_CHARACTER",a[a.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",a[a.START_TAG=3]="START_TAG",a[a.END_TAG=4]="END_TAG",a[a.COMMENT=5]="COMMENT",a[a.DOCTYPE=6]="DOCTYPE",a[a.EOF=7]="EOF",a[a.HIBERNATION=8]="HIBERNATION"})(TokenType=TokenType||(TokenType={}));function getTokenAttr(a,s){for(let c=a.attrs.length-1;c>=0;c--)if(a.attrs[c].name===s)return a.attrs[c].value;return null}var NS;(function(a){a.HTML="http://www.w3.org/1999/xhtml",a.MATHML="http://www.w3.org/1998/Math/MathML",a.SVG="http://www.w3.org/2000/svg",a.XLINK="http://www.w3.org/1999/xlink",a.XML="http://www.w3.org/XML/1998/namespace",a.XMLNS="http://www.w3.org/2000/xmlns/"})(NS=NS||(NS={}));var ATTRS;(function(a){a.TYPE="type",a.ACTION="action",a.ENCODING="encoding",a.PROMPT="prompt",a.NAME="name",a.COLOR="color",a.FACE="face",a.SIZE="size"})(ATTRS=ATTRS||(ATTRS={}));var DOCUMENT_MODE;(function(a){a.NO_QUIRKS="no-quirks",a.QUIRKS="quirks",a.LIMITED_QUIRKS="limited-quirks"})(DOCUMENT_MODE=DOCUMENT_MODE||(DOCUMENT_MODE={}));var TAG_NAMES;(function(a){a.A="a",a.ADDRESS="address",a.ANNOTATION_XML="annotation-xml",a.APPLET="applet",a.AREA="area",a.ARTICLE="article",a.ASIDE="aside",a.B="b",a.BASE="base",a.BASEFONT="basefont",a.BGSOUND="bgsound",a.BIG="big",a.BLOCKQUOTE="blockquote",a.BODY="body",a.BR="br",a.BUTTON="button",a.CAPTION="caption",a.CENTER="center",a.CODE="code",a.COL="col",a.COLGROUP="colgroup",a.DD="dd",a.DESC="desc",a.DETAILS="details",a.DIALOG="dialog",a.DIR="dir",a.DIV="div",a.DL="dl",a.DT="dt",a.EM="em",a.EMBED="embed",a.FIELDSET="fieldset",a.FIGCAPTION="figcaption",a.FIGURE="figure",a.FONT="font",a.FOOTER="footer",a.FOREIGN_OBJECT="foreignObject",a.FORM="form",a.FRAME="frame",a.FRAMESET="frameset",a.H1="h1",a.H2="h2",a.H3="h3",a.H4="h4",a.H5="h5",a.H6="h6",a.HEAD="head",a.HEADER="header",a.HGROUP="hgroup",a.HR="hr",a.HTML="html",a.I="i",a.IMG="img",a.IMAGE="image",a.INPUT="input",a.IFRAME="iframe",a.KEYGEN="keygen",a.LABEL="label",a.LI="li",a.LINK="link",a.LISTING="listing",a.MAIN="main",a.MALIGNMARK="malignmark",a.MARQUEE="marquee",a.MATH="math",a.MENU="menu",a.META="meta",a.MGLYPH="mglyph",a.MI="mi",a.MO="mo",a.MN="mn",a.MS="ms",a.MTEXT="mtext",a.NAV="nav",a.NOBR="nobr",a.NOFRAMES="noframes",a.NOEMBED="noembed",a.NOSCRIPT="noscript",a.OBJECT="object",a.OL="ol",a.OPTGROUP="optgroup",a.OPTION="option",a.P="p",a.PARAM="param",a.PLAINTEXT="plaintext",a.PRE="pre",a.RB="rb",a.RP="rp",a.RT="rt",a.RTC="rtc",a.RUBY="ruby",a.S="s",a.SCRIPT="script",a.SECTION="section",a.SELECT="select",a.SOURCE="source",a.SMALL="small",a.SPAN="span",a.STRIKE="strike",a.STRONG="strong",a.STYLE="style",a.SUB="sub",a.SUMMARY="summary",a.SUP="sup",a.TABLE="table",a.TBODY="tbody",a.TEMPLATE="template",a.TEXTAREA="textarea",a.TFOOT="tfoot",a.TD="td",a.TH="th",a.THEAD="thead",a.TITLE="title",a.TR="tr",a.TRACK="track",a.TT="tt",a.U="u",a.UL="ul",a.SVG="svg",a.VAR="var",a.WBR="wbr",a.XMP="xmp"})(TAG_NAMES=TAG_NAMES||(TAG_NAMES={}));var TAG_ID;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.A=1]="A",a[a.ADDRESS=2]="ADDRESS",a[a.ANNOTATION_XML=3]="ANNOTATION_XML",a[a.APPLET=4]="APPLET",a[a.AREA=5]="AREA",a[a.ARTICLE=6]="ARTICLE",a[a.ASIDE=7]="ASIDE",a[a.B=8]="B",a[a.BASE=9]="BASE",a[a.BASEFONT=10]="BASEFONT",a[a.BGSOUND=11]="BGSOUND",a[a.BIG=12]="BIG",a[a.BLOCKQUOTE=13]="BLOCKQUOTE",a[a.BODY=14]="BODY",a[a.BR=15]="BR",a[a.BUTTON=16]="BUTTON",a[a.CAPTION=17]="CAPTION",a[a.CENTER=18]="CENTER",a[a.CODE=19]="CODE",a[a.COL=20]="COL",a[a.COLGROUP=21]="COLGROUP",a[a.DD=22]="DD",a[a.DESC=23]="DESC",a[a.DETAILS=24]="DETAILS",a[a.DIALOG=25]="DIALOG",a[a.DIR=26]="DIR",a[a.DIV=27]="DIV",a[a.DL=28]="DL",a[a.DT=29]="DT",a[a.EM=30]="EM",a[a.EMBED=31]="EMBED",a[a.FIELDSET=32]="FIELDSET",a[a.FIGCAPTION=33]="FIGCAPTION",a[a.FIGURE=34]="FIGURE",a[a.FONT=35]="FONT",a[a.FOOTER=36]="FOOTER",a[a.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",a[a.FORM=38]="FORM",a[a.FRAME=39]="FRAME",a[a.FRAMESET=40]="FRAMESET",a[a.H1=41]="H1",a[a.H2=42]="H2",a[a.H3=43]="H3",a[a.H4=44]="H4",a[a.H5=45]="H5",a[a.H6=46]="H6",a[a.HEAD=47]="HEAD",a[a.HEADER=48]="HEADER",a[a.HGROUP=49]="HGROUP",a[a.HR=50]="HR",a[a.HTML=51]="HTML",a[a.I=52]="I",a[a.IMG=53]="IMG",a[a.IMAGE=54]="IMAGE",a[a.INPUT=55]="INPUT",a[a.IFRAME=56]="IFRAME",a[a.KEYGEN=57]="KEYGEN",a[a.LABEL=58]="LABEL",a[a.LI=59]="LI",a[a.LINK=60]="LINK",a[a.LISTING=61]="LISTING",a[a.MAIN=62]="MAIN",a[a.MALIGNMARK=63]="MALIGNMARK",a[a.MARQUEE=64]="MARQUEE",a[a.MATH=65]="MATH",a[a.MENU=66]="MENU",a[a.META=67]="META",a[a.MGLYPH=68]="MGLYPH",a[a.MI=69]="MI",a[a.MO=70]="MO",a[a.MN=71]="MN",a[a.MS=72]="MS",a[a.MTEXT=73]="MTEXT",a[a.NAV=74]="NAV",a[a.NOBR=75]="NOBR",a[a.NOFRAMES=76]="NOFRAMES",a[a.NOEMBED=77]="NOEMBED",a[a.NOSCRIPT=78]="NOSCRIPT",a[a.OBJECT=79]="OBJECT",a[a.OL=80]="OL",a[a.OPTGROUP=81]="OPTGROUP",a[a.OPTION=82]="OPTION",a[a.P=83]="P",a[a.PARAM=84]="PARAM",a[a.PLAINTEXT=85]="PLAINTEXT",a[a.PRE=86]="PRE",a[a.RB=87]="RB",a[a.RP=88]="RP",a[a.RT=89]="RT",a[a.RTC=90]="RTC",a[a.RUBY=91]="RUBY",a[a.S=92]="S",a[a.SCRIPT=93]="SCRIPT",a[a.SECTION=94]="SECTION",a[a.SELECT=95]="SELECT",a[a.SOURCE=96]="SOURCE",a[a.SMALL=97]="SMALL",a[a.SPAN=98]="SPAN",a[a.STRIKE=99]="STRIKE",a[a.STRONG=100]="STRONG",a[a.STYLE=101]="STYLE",a[a.SUB=102]="SUB",a[a.SUMMARY=103]="SUMMARY",a[a.SUP=104]="SUP",a[a.TABLE=105]="TABLE",a[a.TBODY=106]="TBODY",a[a.TEMPLATE=107]="TEMPLATE",a[a.TEXTAREA=108]="TEXTAREA",a[a.TFOOT=109]="TFOOT",a[a.TD=110]="TD",a[a.TH=111]="TH",a[a.THEAD=112]="THEAD",a[a.TITLE=113]="TITLE",a[a.TR=114]="TR",a[a.TRACK=115]="TRACK",a[a.TT=116]="TT",a[a.U=117]="U",a[a.UL=118]="UL",a[a.SVG=119]="SVG",a[a.VAR=120]="VAR",a[a.WBR=121]="WBR",a[a.XMP=122]="XMP"})(TAG_ID=TAG_ID||(TAG_ID={}));const TAG_NAME_TO_ID=new Map([[TAG_NAMES.A,TAG_ID.A],[TAG_NAMES.ADDRESS,TAG_ID.ADDRESS],[TAG_NAMES.ANNOTATION_XML,TAG_ID.ANNOTATION_XML],[TAG_NAMES.APPLET,TAG_ID.APPLET],[TAG_NAMES.AREA,TAG_ID.AREA],[TAG_NAMES.ARTICLE,TAG_ID.ARTICLE],[TAG_NAMES.ASIDE,TAG_ID.ASIDE],[TAG_NAMES.B,TAG_ID.B],[TAG_NAMES.BASE,TAG_ID.BASE],[TAG_NAMES.BASEFONT,TAG_ID.BASEFONT],[TAG_NAMES.BGSOUND,TAG_ID.BGSOUND],[TAG_NAMES.BIG,TAG_ID.BIG],[TAG_NAMES.BLOCKQUOTE,TAG_ID.BLOCKQUOTE],[TAG_NAMES.BODY,TAG_ID.BODY],[TAG_NAMES.BR,TAG_ID.BR],[TAG_NAMES.BUTTON,TAG_ID.BUTTON],[TAG_NAMES.CAPTION,TAG_ID.CAPTION],[TAG_NAMES.CENTER,TAG_ID.CENTER],[TAG_NAMES.CODE,TAG_ID.CODE],[TAG_NAMES.COL,TAG_ID.COL],[TAG_NAMES.COLGROUP,TAG_ID.COLGROUP],[TAG_NAMES.DD,TAG_ID.DD],[TAG_NAMES.DESC,TAG_ID.DESC],[TAG_NAMES.DETAILS,TAG_ID.DETAILS],[TAG_NAMES.DIALOG,TAG_ID.DIALOG],[TAG_NAMES.DIR,TAG_ID.DIR],[TAG_NAMES.DIV,TAG_ID.DIV],[TAG_NAMES.DL,TAG_ID.DL],[TAG_NAMES.DT,TAG_ID.DT],[TAG_NAMES.EM,TAG_ID.EM],[TAG_NAMES.EMBED,TAG_ID.EMBED],[TAG_NAMES.FIELDSET,TAG_ID.FIELDSET],[TAG_NAMES.FIGCAPTION,TAG_ID.FIGCAPTION],[TAG_NAMES.FIGURE,TAG_ID.FIGURE],[TAG_NAMES.FONT,TAG_ID.FONT],[TAG_NAMES.FOOTER,TAG_ID.FOOTER],[TAG_NAMES.FOREIGN_OBJECT,TAG_ID.FOREIGN_OBJECT],[TAG_NAMES.FORM,TAG_ID.FORM],[TAG_NAMES.FRAME,TAG_ID.FRAME],[TAG_NAMES.FRAMESET,TAG_ID.FRAMESET],[TAG_NAMES.H1,TAG_ID.H1],[TAG_NAMES.H2,TAG_ID.H2],[TAG_NAMES.H3,TAG_ID.H3],[TAG_NAMES.H4,TAG_ID.H4],[TAG_NAMES.H5,TAG_ID.H5],[TAG_NAMES.H6,TAG_ID.H6],[TAG_NAMES.HEAD,TAG_ID.HEAD],[TAG_NAMES.HEADER,TAG_ID.HEADER],[TAG_NAMES.HGROUP,TAG_ID.HGROUP],[TAG_NAMES.HR,TAG_ID.HR],[TAG_NAMES.HTML,TAG_ID.HTML],[TAG_NAMES.I,TAG_ID.I],[TAG_NAMES.IMG,TAG_ID.IMG],[TAG_NAMES.IMAGE,TAG_ID.IMAGE],[TAG_NAMES.INPUT,TAG_ID.INPUT],[TAG_NAMES.IFRAME,TAG_ID.IFRAME],[TAG_NAMES.KEYGEN,TAG_ID.KEYGEN],[TAG_NAMES.LABEL,TAG_ID.LABEL],[TAG_NAMES.LI,TAG_ID.LI],[TAG_NAMES.LINK,TAG_ID.LINK],[TAG_NAMES.LISTING,TAG_ID.LISTING],[TAG_NAMES.MAIN,TAG_ID.MAIN],[TAG_NAMES.MALIGNMARK,TAG_ID.MALIGNMARK],[TAG_NAMES.MARQUEE,TAG_ID.MARQUEE],[TAG_NAMES.MATH,TAG_ID.MATH],[TAG_NAMES.MENU,TAG_ID.MENU],[TAG_NAMES.META,TAG_ID.META],[TAG_NAMES.MGLYPH,TAG_ID.MGLYPH],[TAG_NAMES.MI,TAG_ID.MI],[TAG_NAMES.MO,TAG_ID.MO],[TAG_NAMES.MN,TAG_ID.MN],[TAG_NAMES.MS,TAG_ID.MS],[TAG_NAMES.MTEXT,TAG_ID.MTEXT],[TAG_NAMES.NAV,TAG_ID.NAV],[TAG_NAMES.NOBR,TAG_ID.NOBR],[TAG_NAMES.NOFRAMES,TAG_ID.NOFRAMES],[TAG_NAMES.NOEMBED,TAG_ID.NOEMBED],[TAG_NAMES.NOSCRIPT,TAG_ID.NOSCRIPT],[TAG_NAMES.OBJECT,TAG_ID.OBJECT],[TAG_NAMES.OL,TAG_ID.OL],[TAG_NAMES.OPTGROUP,TAG_ID.OPTGROUP],[TAG_NAMES.OPTION,TAG_ID.OPTION],[TAG_NAMES.P,TAG_ID.P],[TAG_NAMES.PARAM,TAG_ID.PARAM],[TAG_NAMES.PLAINTEXT,TAG_ID.PLAINTEXT],[TAG_NAMES.PRE,TAG_ID.PRE],[TAG_NAMES.RB,TAG_ID.RB],[TAG_NAMES.RP,TAG_ID.RP],[TAG_NAMES.RT,TAG_ID.RT],[TAG_NAMES.RTC,TAG_ID.RTC],[TAG_NAMES.RUBY,TAG_ID.RUBY],[TAG_NAMES.S,TAG_ID.S],[TAG_NAMES.SCRIPT,TAG_ID.SCRIPT],[TAG_NAMES.SECTION,TAG_ID.SECTION],[TAG_NAMES.SELECT,TAG_ID.SELECT],[TAG_NAMES.SOURCE,TAG_ID.SOURCE],[TAG_NAMES.SMALL,TAG_ID.SMALL],[TAG_NAMES.SPAN,TAG_ID.SPAN],[TAG_NAMES.STRIKE,TAG_ID.STRIKE],[TAG_NAMES.STRONG,TAG_ID.STRONG],[TAG_NAMES.STYLE,TAG_ID.STYLE],[TAG_NAMES.SUB,TAG_ID.SUB],[TAG_NAMES.SUMMARY,TAG_ID.SUMMARY],[TAG_NAMES.SUP,TAG_ID.SUP],[TAG_NAMES.TABLE,TAG_ID.TABLE],[TAG_NAMES.TBODY,TAG_ID.TBODY],[TAG_NAMES.TEMPLATE,TAG_ID.TEMPLATE],[TAG_NAMES.TEXTAREA,TAG_ID.TEXTAREA],[TAG_NAMES.TFOOT,TAG_ID.TFOOT],[TAG_NAMES.TD,TAG_ID.TD],[TAG_NAMES.TH,TAG_ID.TH],[TAG_NAMES.THEAD,TAG_ID.THEAD],[TAG_NAMES.TITLE,TAG_ID.TITLE],[TAG_NAMES.TR,TAG_ID.TR],[TAG_NAMES.TRACK,TAG_ID.TRACK],[TAG_NAMES.TT,TAG_ID.TT],[TAG_NAMES.U,TAG_ID.U],[TAG_NAMES.UL,TAG_ID.UL],[TAG_NAMES.SVG,TAG_ID.SVG],[TAG_NAMES.VAR,TAG_ID.VAR],[TAG_NAMES.WBR,TAG_ID.WBR],[TAG_NAMES.XMP,TAG_ID.XMP]]);function getTagID(a){var s;return(s=TAG_NAME_TO_ID.get(a))!==null&&s!==void 0?s:TAG_ID.UNKNOWN}const $=TAG_ID,SPECIAL_ELEMENTS={[NS.HTML]:new Set([$.ADDRESS,$.APPLET,$.AREA,$.ARTICLE,$.ASIDE,$.BASE,$.BASEFONT,$.BGSOUND,$.BLOCKQUOTE,$.BODY,$.BR,$.BUTTON,$.CAPTION,$.CENTER,$.COL,$.COLGROUP,$.DD,$.DETAILS,$.DIR,$.DIV,$.DL,$.DT,$.EMBED,$.FIELDSET,$.FIGCAPTION,$.FIGURE,$.FOOTER,$.FORM,$.FRAME,$.FRAMESET,$.H1,$.H2,$.H3,$.H4,$.H5,$.H6,$.HEAD,$.HEADER,$.HGROUP,$.HR,$.HTML,$.IFRAME,$.IMG,$.INPUT,$.LI,$.LINK,$.LISTING,$.MAIN,$.MARQUEE,$.MENU,$.META,$.NAV,$.NOEMBED,$.NOFRAMES,$.NOSCRIPT,$.OBJECT,$.OL,$.P,$.PARAM,$.PLAINTEXT,$.PRE,$.SCRIPT,$.SECTION,$.SELECT,$.SOURCE,$.STYLE,$.SUMMARY,$.TABLE,$.TBODY,$.TD,$.TEMPLATE,$.TEXTAREA,$.TFOOT,$.TH,$.THEAD,$.TITLE,$.TR,$.TRACK,$.UL,$.WBR,$.XMP]),[NS.MATHML]:new Set([$.MI,$.MO,$.MN,$.MS,$.MTEXT,$.ANNOTATION_XML]),[NS.SVG]:new Set([$.TITLE,$.FOREIGN_OBJECT,$.DESC]),[NS.XLINK]:new Set,[NS.XML]:new Set,[NS.XMLNS]:new Set};function isNumberedHeader(a){return a===$.H1||a===$.H2||a===$.H3||a===$.H4||a===$.H5||a===$.H6}const UNESCAPED_TEXT=new Set([TAG_NAMES.STYLE,TAG_NAMES.SCRIPT,TAG_NAMES.XMP,TAG_NAMES.IFRAME,TAG_NAMES.NOEMBED,TAG_NAMES.NOFRAMES,TAG_NAMES.PLAINTEXT]);function hasUnescapedText(a,s){return UNESCAPED_TEXT.has(a)||s&&a===TAG_NAMES.NOSCRIPT}const C1_CONTROLS_REFERENCE_REPLACEMENTS=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var State$1;(function(a){a[a.DATA=0]="DATA",a[a.RCDATA=1]="RCDATA",a[a.RAWTEXT=2]="RAWTEXT",a[a.SCRIPT_DATA=3]="SCRIPT_DATA",a[a.PLAINTEXT=4]="PLAINTEXT",a[a.TAG_OPEN=5]="TAG_OPEN",a[a.END_TAG_OPEN=6]="END_TAG_OPEN",a[a.TAG_NAME=7]="TAG_NAME",a[a.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",a[a.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",a[a.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",a[a.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",a[a.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",a[a.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",a[a.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",a[a.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",a[a.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",a[a.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",a[a.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",a[a.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",a[a.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",a[a.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",a[a.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",a[a.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",a[a.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",a[a.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",a[a.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",a[a.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",a[a.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",a[a.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",a[a.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",a[a.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",a[a.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",a[a.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",a[a.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",a[a.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",a[a.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",a[a.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",a[a.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",a[a.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",a[a.BOGUS_COMMENT=40]="BOGUS_COMMENT",a[a.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",a[a.COMMENT_START=42]="COMMENT_START",a[a.COMMENT_START_DASH=43]="COMMENT_START_DASH",a[a.COMMENT=44]="COMMENT",a[a.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",a[a.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",a[a.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",a[a.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",a[a.COMMENT_END_DASH=49]="COMMENT_END_DASH",a[a.COMMENT_END=50]="COMMENT_END",a[a.COMMENT_END_BANG=51]="COMMENT_END_BANG",a[a.DOCTYPE=52]="DOCTYPE",a[a.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",a[a.DOCTYPE_NAME=54]="DOCTYPE_NAME",a[a.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",a[a.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",a[a.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",a[a.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",a[a.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",a[a.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",a[a.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",a[a.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",a[a.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",a[a.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",a[a.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",a[a.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",a[a.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",a[a.CDATA_SECTION=68]="CDATA_SECTION",a[a.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",a[a.CDATA_SECTION_END=70]="CDATA_SECTION_END",a[a.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",a[a.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",a[a.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",a[a.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",a[a.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",a[a.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",a[a.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",a[a.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(State$1||(State$1={}));const TokenizerMode={DATA:State$1.DATA,RCDATA:State$1.RCDATA,RAWTEXT:State$1.RAWTEXT,SCRIPT_DATA:State$1.SCRIPT_DATA,PLAINTEXT:State$1.PLAINTEXT,CDATA_SECTION:State$1.CDATA_SECTION};function isAsciiDigit(a){return a>=CODE_POINTS.DIGIT_0&&a<=CODE_POINTS.DIGIT_9}function isAsciiUpper(a){return a>=CODE_POINTS.LATIN_CAPITAL_A&&a<=CODE_POINTS.LATIN_CAPITAL_Z}function isAsciiLower(a){return a>=CODE_POINTS.LATIN_SMALL_A&&a<=CODE_POINTS.LATIN_SMALL_Z}function isAsciiLetter(a){return isAsciiLower(a)||isAsciiUpper(a)}function isAsciiAlphaNumeric(a){return isAsciiLetter(a)||isAsciiDigit(a)}function isAsciiUpperHexDigit(a){return a>=CODE_POINTS.LATIN_CAPITAL_A&&a<=CODE_POINTS.LATIN_CAPITAL_F}function isAsciiLowerHexDigit(a){return a>=CODE_POINTS.LATIN_SMALL_A&&a<=CODE_POINTS.LATIN_SMALL_F}function isAsciiHexDigit(a){return isAsciiDigit(a)||isAsciiUpperHexDigit(a)||isAsciiLowerHexDigit(a)}function toAsciiLower(a){return a+32}function isWhitespace$1(a){return a===CODE_POINTS.SPACE||a===CODE_POINTS.LINE_FEED||a===CODE_POINTS.TABULATION||a===CODE_POINTS.FORM_FEED}function isEntityInAttributeInvalidEnd(a){return a===CODE_POINTS.EQUALS_SIGN||isAsciiAlphaNumeric(a)}function isScriptDataDoubleEscapeSequenceEnd(a){return isWhitespace$1(a)||a===CODE_POINTS.SOLIDUS||a===CODE_POINTS.GREATER_THAN_SIGN}let Tokenizer$1=class{constructor(a,s){this.options=a,this.handler=s,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=State$1.DATA,this.returnState=State$1.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Preprocessor(s),this.currentLocation=this.getCurrentLocation(-1)}_err(a){var s,c;(c=(s=this.handler).onParseError)===null||c===void 0||c.call(s,this.preprocessor.getError(a))}getCurrentLocation(a){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-a,startOffset:this.preprocessor.offset-a,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const a=this._consume();this._ensureHibernation()||this._callState(a)}this.inLoop=!1}}pause(){this.paused=!0}resume(a){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||(a==null||a()))}write(a,s,c){this.active=!0,this.preprocessor.write(a,s),this._runParsingLoop(),this.paused||(c==null||c())}insertHtmlAtCurrentPos(a){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(a),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(a){this.consumedAfterSnapshot-=a,this.preprocessor.retreat(a)}_reconsumeInState(a,s){this.state=a,this._callState(s)}_advanceBy(a){this.consumedAfterSnapshot+=a;for(let s=0;s<a;s++)this.preprocessor.advance()}_consumeSequenceIfMatch(a,s){return this.preprocessor.startsWith(a,s)?(this._advanceBy(a.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:TokenType.START_TAG,tagName:"",tagID:TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:TokenType.END_TAG,tagName:"",tagID:TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(a){this.currentToken={type:TokenType.COMMENT,data:"",location:this.getCurrentLocation(a)}}_createDoctypeToken(a){this.currentToken={type:TokenType.DOCTYPE,name:a,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(a,s){this.currentCharacterToken={type:a,chars:s,location:this.currentLocation}}_createAttr(a){this.currentAttr={name:a,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var a,s;const c=this.currentToken;if(getTokenAttr(c,this.currentAttr.name)===null){if(c.attrs.push(this.currentAttr),c.location&&this.currentLocation){const u=(a=(s=c.location).attrs)!==null&&a!==void 0?a:s.attrs=Object.create(null);u[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(ERR.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(a){this._emitCurrentCharacterToken(a.location),this.currentToken=null,a.location&&(a.location.endLine=this.preprocessor.line,a.location.endCol=this.preprocessor.col+1,a.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const a=this.currentToken;this.prepareToken(a),a.tagID=getTagID(a.tagName),a.type===TokenType.START_TAG?(this.lastStartTagName=a.tagName,this.handler.onStartTag(a)):(a.attrs.length>0&&this._err(ERR.endTagWithAttributes),a.selfClosing&&this._err(ERR.endTagWithTrailingSolidus),this.handler.onEndTag(a)),this.preprocessor.dropParsedChunk()}emitCurrentComment(a){this.prepareToken(a),this.handler.onComment(a),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(a){this.prepareToken(a),this.handler.onDoctype(a),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(a){if(this.currentCharacterToken){switch(a&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=a.startLine,this.currentCharacterToken.location.endCol=a.startCol,this.currentCharacterToken.location.endOffset=a.startOffset),this.currentCharacterToken.type){case TokenType.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case TokenType.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case TokenType.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const a=this.getCurrentLocation(0);a&&(a.endLine=a.startLine,a.endCol=a.startCol,a.endOffset=a.startOffset),this._emitCurrentCharacterToken(a),this.handler.onEof({type:TokenType.EOF,location:a}),this.active=!1}_appendCharToCurrentCharacterToken(a,s){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==a)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=s;return}this._createCharacterToken(a,s)}_emitCodePoint(a){const s=isWhitespace$1(a)?TokenType.WHITESPACE_CHARACTER:a===CODE_POINTS.NULL?TokenType.NULL_CHARACTER:TokenType.CHARACTER;this._appendCharToCurrentCharacterToken(s,String.fromCodePoint(a))}_emitChars(a){this._appendCharToCurrentCharacterToken(TokenType.CHARACTER,a)}_matchNamedCharacterReference(a){let s=null,c=0,u=!1;for(let d=0,h=htmlDecodeTree[0];d>=0&&(d=determineBranch(htmlDecodeTree,h,d+1,a),!(d<0));a=this._consume()){c+=1,h=htmlDecodeTree[d];const p=h&BinTrieFlags.VALUE_LENGTH;if(p){const m=(p>>14)-1;if(a!==CODE_POINTS.SEMICOLON&&this._isCharacterReferenceInAttribute()&&isEntityInAttributeInvalidEnd(this.preprocessor.peek(1))?(s=[CODE_POINTS.AMPERSAND],d+=m):(s=m===0?[htmlDecodeTree[d]&~BinTrieFlags.VALUE_LENGTH]:m===1?[htmlDecodeTree[++d]]:[htmlDecodeTree[++d],htmlDecodeTree[++d]],c=0,u=a!==CODE_POINTS.SEMICOLON),m===0){this._consume();break}}}return this._unconsume(c),u&&!this.preprocessor.endOfChunkHit&&this._err(ERR.missingSemicolonAfterCharacterReference),this._unconsume(1),s}_isCharacterReferenceInAttribute(){return this.returnState===State$1.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===State$1.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===State$1.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(a){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(a):this._emitCodePoint(a)}_callState(a){switch(this.state){case State$1.DATA:{this._stateData(a);break}case State$1.RCDATA:{this._stateRcdata(a);break}case State$1.RAWTEXT:{this._stateRawtext(a);break}case State$1.SCRIPT_DATA:{this._stateScriptData(a);break}case State$1.PLAINTEXT:{this._statePlaintext(a);break}case State$1.TAG_OPEN:{this._stateTagOpen(a);break}case State$1.END_TAG_OPEN:{this._stateEndTagOpen(a);break}case State$1.TAG_NAME:{this._stateTagName(a);break}case State$1.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(a);break}case State$1.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(a);break}case State$1.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(a);break}case State$1.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(a);break}case State$1.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(a);break}case State$1.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(a);break}case State$1.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(a);break}case State$1.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(a);break}case State$1.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(a);break}case State$1.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(a);break}case State$1.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(a);break}case State$1.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(a);break}case State$1.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(a);break}case State$1.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(a);break}case State$1.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(a);break}case State$1.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(a);break}case State$1.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(a);break}case State$1.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(a);break}case State$1.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(a);break}case State$1.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(a);break}case State$1.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(a);break}case State$1.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(a);break}case State$1.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(a);break}case State$1.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(a);break}case State$1.ATTRIBUTE_NAME:{this._stateAttributeName(a);break}case State$1.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(a);break}case State$1.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(a);break}case State$1.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(a);break}case State$1.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(a);break}case State$1.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(a);break}case State$1.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(a);break}case State$1.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(a);break}case State$1.BOGUS_COMMENT:{this._stateBogusComment(a);break}case State$1.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(a);break}case State$1.COMMENT_START:{this._stateCommentStart(a);break}case State$1.COMMENT_START_DASH:{this._stateCommentStartDash(a);break}case State$1.COMMENT:{this._stateComment(a);break}case State$1.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(a);break}case State$1.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(a);break}case State$1.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(a);break}case State$1.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(a);break}case State$1.COMMENT_END_DASH:{this._stateCommentEndDash(a);break}case State$1.COMMENT_END:{this._stateCommentEnd(a);break}case State$1.COMMENT_END_BANG:{this._stateCommentEndBang(a);break}case State$1.DOCTYPE:{this._stateDoctype(a);break}case State$1.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(a);break}case State$1.DOCTYPE_NAME:{this._stateDoctypeName(a);break}case State$1.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(a);break}case State$1.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(a);break}case State$1.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(a);break}case State$1.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(a);break}case State$1.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(a);break}case State$1.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(a);break}case State$1.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(a);break}case State$1.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(a);break}case State$1.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(a);break}case State$1.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(a);break}case State$1.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(a);break}case State$1.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(a);break}case State$1.BOGUS_DOCTYPE:{this._stateBogusDoctype(a);break}case State$1.CDATA_SECTION:{this._stateCdataSection(a);break}case State$1.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(a);break}case State$1.CDATA_SECTION_END:{this._stateCdataSectionEnd(a);break}case State$1.CHARACTER_REFERENCE:{this._stateCharacterReference(a);break}case State$1.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(a);break}case State$1.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(a);break}case State$1.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(a);break}case State$1.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(a);break}case State$1.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(a);break}case State$1.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(a);break}case State$1.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(a);break}default:throw new Error("Unknown state")}}_stateData(a){switch(a){case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.TAG_OPEN;break}case CODE_POINTS.AMPERSAND:{this.returnState=State$1.DATA,this.state=State$1.CHARACTER_REFERENCE;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitCodePoint(a);break}case CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(a)}}_stateRcdata(a){switch(a){case CODE_POINTS.AMPERSAND:{this.returnState=State$1.RCDATA,this.state=State$1.CHARACTER_REFERENCE;break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.RCDATA_LESS_THAN_SIGN;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(a)}}_stateRawtext(a){switch(a){case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.RAWTEXT_LESS_THAN_SIGN;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(a)}}_stateScriptData(a){switch(a){case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.SCRIPT_DATA_LESS_THAN_SIGN;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(a)}}_statePlaintext(a){switch(a){case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(a)}}_stateTagOpen(a){if(isAsciiLetter(a))this._createStartTagToken(),this.state=State$1.TAG_NAME,this._stateTagName(a);else switch(a){case CODE_POINTS.EXCLAMATION_MARK:{this.state=State$1.MARKUP_DECLARATION_OPEN;break}case CODE_POINTS.SOLIDUS:{this.state=State$1.END_TAG_OPEN;break}case CODE_POINTS.QUESTION_MARK:{this._err(ERR.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=State$1.BOGUS_COMMENT,this._stateBogusComment(a);break}case CODE_POINTS.EOF:{this._err(ERR.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(ERR.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=State$1.DATA,this._stateData(a)}}_stateEndTagOpen(a){if(isAsciiLetter(a))this._createEndTagToken(),this.state=State$1.TAG_NAME,this._stateTagName(a);else switch(a){case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingEndTagName),this.state=State$1.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(ERR.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=State$1.BOGUS_COMMENT,this._stateBogusComment(a)}}_stateTagName(a){const s=this.currentToken;switch(a){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this.state=State$1.BEFORE_ATTRIBUTE_NAME;break}case CODE_POINTS.SOLIDUS:{this.state=State$1.SELF_CLOSING_START_TAG;break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.DATA,this.emitCurrentTagToken();break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),s.tagName+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:s.tagName+=String.fromCodePoint(isAsciiUpper(a)?toAsciiLower(a):a)}}_stateRcdataLessThanSign(a){a===CODE_POINTS.SOLIDUS?this.state=State$1.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=State$1.RCDATA,this._stateRcdata(a))}_stateRcdataEndTagOpen(a){isAsciiLetter(a)?(this.state=State$1.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(a)):(this._emitChars("</"),this.state=State$1.RCDATA,this._stateRcdata(a))}handleSpecialEndTag(a){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const s=this.currentToken;switch(s.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=State$1.BEFORE_ATTRIBUTE_NAME,!1;case CODE_POINTS.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=State$1.SELF_CLOSING_START_TAG,!1;case CODE_POINTS.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=State$1.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(a){this.handleSpecialEndTag(a)&&(this._emitChars("</"),this.state=State$1.RCDATA,this._stateRcdata(a))}_stateRawtextLessThanSign(a){a===CODE_POINTS.SOLIDUS?this.state=State$1.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=State$1.RAWTEXT,this._stateRawtext(a))}_stateRawtextEndTagOpen(a){isAsciiLetter(a)?(this.state=State$1.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(a)):(this._emitChars("</"),this.state=State$1.RAWTEXT,this._stateRawtext(a))}_stateRawtextEndTagName(a){this.handleSpecialEndTag(a)&&(this._emitChars("</"),this.state=State$1.RAWTEXT,this._stateRawtext(a))}_stateScriptDataLessThanSign(a){switch(a){case CODE_POINTS.SOLIDUS:{this.state=State$1.SCRIPT_DATA_END_TAG_OPEN;break}case CODE_POINTS.EXCLAMATION_MARK:{this.state=State$1.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=State$1.SCRIPT_DATA,this._stateScriptData(a)}}_stateScriptDataEndTagOpen(a){isAsciiLetter(a)?(this.state=State$1.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(a)):(this._emitChars("</"),this.state=State$1.SCRIPT_DATA,this._stateScriptData(a))}_stateScriptDataEndTagName(a){this.handleSpecialEndTag(a)&&(this._emitChars("</"),this.state=State$1.SCRIPT_DATA,this._stateScriptData(a))}_stateScriptDataEscapeStart(a){a===CODE_POINTS.HYPHEN_MINUS?(this.state=State$1.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=State$1.SCRIPT_DATA,this._stateScriptData(a))}_stateScriptDataEscapeStartDash(a){a===CODE_POINTS.HYPHEN_MINUS?(this.state=State$1.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=State$1.SCRIPT_DATA,this._stateScriptData(a))}_stateScriptDataEscaped(a){switch(a){case CODE_POINTS.HYPHEN_MINUS:{this.state=State$1.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(a)}}_stateScriptDataEscapedDash(a){switch(a){case CODE_POINTS.HYPHEN_MINUS:{this.state=State$1.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.state=State$1.SCRIPT_DATA_ESCAPED,this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=State$1.SCRIPT_DATA_ESCAPED,this._emitCodePoint(a)}}_stateScriptDataEscapedDashDash(a){switch(a){case CODE_POINTS.HYPHEN_MINUS:{this._emitChars("-");break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.SCRIPT_DATA,this._emitChars(">");break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.state=State$1.SCRIPT_DATA_ESCAPED,this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=State$1.SCRIPT_DATA_ESCAPED,this._emitCodePoint(a)}}_stateScriptDataEscapedLessThanSign(a){a===CODE_POINTS.SOLIDUS?this.state=State$1.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:isAsciiLetter(a)?(this._emitChars("<"),this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(a)):(this._emitChars("<"),this.state=State$1.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(a))}_stateScriptDataEscapedEndTagOpen(a){isAsciiLetter(a)?(this.state=State$1.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(a)):(this._emitChars("</"),this.state=State$1.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(a))}_stateScriptDataEscapedEndTagName(a){this.handleSpecialEndTag(a)&&(this._emitChars("</"),this.state=State$1.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(a))}_stateScriptDataDoubleEscapeStart(a){if(this.preprocessor.startsWith(SEQUENCES.SCRIPT,!1)&&isScriptDataDoubleEscapeSequenceEnd(this.preprocessor.peek(SEQUENCES.SCRIPT.length))){this._emitCodePoint(a);for(let s=0;s<SEQUENCES.SCRIPT.length;s++)this._emitCodePoint(this._consume());this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=State$1.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(a))}_stateScriptDataDoubleEscaped(a){switch(a){case CODE_POINTS.HYPHEN_MINUS:{this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(a)}}_stateScriptDataDoubleEscapedDash(a){switch(a){case CODE_POINTS.HYPHEN_MINUS:{this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(a)}}_stateScriptDataDoubleEscapedDashDash(a){switch(a){case CODE_POINTS.HYPHEN_MINUS:{this._emitChars("-");break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.SCRIPT_DATA,this._emitChars(">");break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(a)}}_stateScriptDataDoubleEscapedLessThanSign(a){a===CODE_POINTS.SOLIDUS?(this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(a))}_stateScriptDataDoubleEscapeEnd(a){if(this.preprocessor.startsWith(SEQUENCES.SCRIPT,!1)&&isScriptDataDoubleEscapeSequenceEnd(this.preprocessor.peek(SEQUENCES.SCRIPT.length))){this._emitCodePoint(a);for(let s=0;s<SEQUENCES.SCRIPT.length;s++)this._emitCodePoint(this._consume());this.state=State$1.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(a))}_stateBeforeAttributeName(a){switch(a){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.SOLIDUS:case CODE_POINTS.GREATER_THAN_SIGN:case CODE_POINTS.EOF:{this.state=State$1.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(a);break}case CODE_POINTS.EQUALS_SIGN:{this._err(ERR.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=State$1.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=State$1.ATTRIBUTE_NAME,this._stateAttributeName(a)}}_stateAttributeName(a){switch(a){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:case CODE_POINTS.SOLIDUS:case CODE_POINTS.GREATER_THAN_SIGN:case CODE_POINTS.EOF:{this._leaveAttrName(),this.state=State$1.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(a);break}case CODE_POINTS.EQUALS_SIGN:{this._leaveAttrName(),this.state=State$1.BEFORE_ATTRIBUTE_VALUE;break}case CODE_POINTS.QUOTATION_MARK:case CODE_POINTS.APOSTROPHE:case CODE_POINTS.LESS_THAN_SIGN:{this._err(ERR.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(a);break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.currentAttr.name+=REPLACEMENT_CHARACTER;break}default:this.currentAttr.name+=String.fromCodePoint(isAsciiUpper(a)?toAsciiLower(a):a)}}_stateAfterAttributeName(a){switch(a){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.SOLIDUS:{this.state=State$1.SELF_CLOSING_START_TAG;break}case CODE_POINTS.EQUALS_SIGN:{this.state=State$1.BEFORE_ATTRIBUTE_VALUE;break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.DATA,this.emitCurrentTagToken();break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=State$1.ATTRIBUTE_NAME,this._stateAttributeName(a)}}_stateBeforeAttributeValue(a){switch(a){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.QUOTATION_MARK:{this.state=State$1.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{this.state=State$1.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingAttributeValue),this.state=State$1.DATA,this.emitCurrentTagToken();break}default:this.state=State$1.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(a)}}_stateAttributeValueDoubleQuoted(a){switch(a){case CODE_POINTS.QUOTATION_MARK:{this.state=State$1.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case CODE_POINTS.AMPERSAND:{this.returnState=State$1.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=State$1.CHARACTER_REFERENCE;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.currentAttr.value+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(a)}}_stateAttributeValueSingleQuoted(a){switch(a){case CODE_POINTS.APOSTROPHE:{this.state=State$1.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case CODE_POINTS.AMPERSAND:{this.returnState=State$1.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=State$1.CHARACTER_REFERENCE;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.currentAttr.value+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(a)}}_stateAttributeValueUnquoted(a){switch(a){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this._leaveAttrValue(),this.state=State$1.BEFORE_ATTRIBUTE_NAME;break}case CODE_POINTS.AMPERSAND:{this.returnState=State$1.ATTRIBUTE_VALUE_UNQUOTED,this.state=State$1.CHARACTER_REFERENCE;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=State$1.DATA,this.emitCurrentTagToken();break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.currentAttr.value+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.QUOTATION_MARK:case CODE_POINTS.APOSTROPHE:case CODE_POINTS.LESS_THAN_SIGN:case CODE_POINTS.EQUALS_SIGN:case CODE_POINTS.GRAVE_ACCENT:{this._err(ERR.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(a);break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(a)}}_stateAfterAttributeValueQuoted(a){switch(a){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this._leaveAttrValue(),this.state=State$1.BEFORE_ATTRIBUTE_NAME;break}case CODE_POINTS.SOLIDUS:{this._leaveAttrValue(),this.state=State$1.SELF_CLOSING_START_TAG;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=State$1.DATA,this.emitCurrentTagToken();break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:this._err(ERR.missingWhitespaceBetweenAttributes),this.state=State$1.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(a)}}_stateSelfClosingStartTag(a){switch(a){case CODE_POINTS.GREATER_THAN_SIGN:{const s=this.currentToken;s.selfClosing=!0,this.state=State$1.DATA,this.emitCurrentTagToken();break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:this._err(ERR.unexpectedSolidusInTag),this.state=State$1.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(a)}}_stateBogusComment(a){const s=this.currentToken;switch(a){case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.DATA,this.emitCurrentComment(s);break}case CODE_POINTS.EOF:{this.emitCurrentComment(s),this._emitEOFToken();break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),s.data+=REPLACEMENT_CHARACTER;break}default:s.data+=String.fromCodePoint(a)}}_stateMarkupDeclarationOpen(a){this._consumeSequenceIfMatch(SEQUENCES.DASH_DASH,!0)?(this._createCommentToken(SEQUENCES.DASH_DASH.length+1),this.state=State$1.COMMENT_START):this._consumeSequenceIfMatch(SEQUENCES.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(SEQUENCES.DOCTYPE.length+1),this.state=State$1.DOCTYPE):this._consumeSequenceIfMatch(SEQUENCES.CDATA_START,!0)?this.inForeignNode?this.state=State$1.CDATA_SECTION:(this._err(ERR.cdataInHtmlContent),this._createCommentToken(SEQUENCES.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=State$1.BOGUS_COMMENT):this._ensureHibernation()||(this._err(ERR.incorrectlyOpenedComment),this._createCommentToken(2),this.state=State$1.BOGUS_COMMENT,this._stateBogusComment(a))}_stateCommentStart(a){switch(a){case CODE_POINTS.HYPHEN_MINUS:{this.state=State$1.COMMENT_START_DASH;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptClosingOfEmptyComment),this.state=State$1.DATA;const s=this.currentToken;this.emitCurrentComment(s);break}default:this.state=State$1.COMMENT,this._stateComment(a)}}_stateCommentStartDash(a){const s=this.currentToken;switch(a){case CODE_POINTS.HYPHEN_MINUS:{this.state=State$1.COMMENT_END;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptClosingOfEmptyComment),this.state=State$1.DATA,this.emitCurrentComment(s);break}case CODE_POINTS.EOF:{this._err(ERR.eofInComment),this.emitCurrentComment(s),this._emitEOFToken();break}default:s.data+="-",this.state=State$1.COMMENT,this._stateComment(a)}}_stateComment(a){const s=this.currentToken;switch(a){case CODE_POINTS.HYPHEN_MINUS:{this.state=State$1.COMMENT_END_DASH;break}case CODE_POINTS.LESS_THAN_SIGN:{s.data+="<",this.state=State$1.COMMENT_LESS_THAN_SIGN;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),s.data+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.EOF:{this._err(ERR.eofInComment),this.emitCurrentComment(s),this._emitEOFToken();break}default:s.data+=String.fromCodePoint(a)}}_stateCommentLessThanSign(a){const s=this.currentToken;switch(a){case CODE_POINTS.EXCLAMATION_MARK:{s.data+="!",this.state=State$1.COMMENT_LESS_THAN_SIGN_BANG;break}case CODE_POINTS.LESS_THAN_SIGN:{s.data+="<";break}default:this.state=State$1.COMMENT,this._stateComment(a)}}_stateCommentLessThanSignBang(a){a===CODE_POINTS.HYPHEN_MINUS?this.state=State$1.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=State$1.COMMENT,this._stateComment(a))}_stateCommentLessThanSignBangDash(a){a===CODE_POINTS.HYPHEN_MINUS?this.state=State$1.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=State$1.COMMENT_END_DASH,this._stateCommentEndDash(a))}_stateCommentLessThanSignBangDashDash(a){a!==CODE_POINTS.GREATER_THAN_SIGN&&a!==CODE_POINTS.EOF&&this._err(ERR.nestedComment),this.state=State$1.COMMENT_END,this._stateCommentEnd(a)}_stateCommentEndDash(a){const s=this.currentToken;switch(a){case CODE_POINTS.HYPHEN_MINUS:{this.state=State$1.COMMENT_END;break}case CODE_POINTS.EOF:{this._err(ERR.eofInComment),this.emitCurrentComment(s),this._emitEOFToken();break}default:s.data+="-",this.state=State$1.COMMENT,this._stateComment(a)}}_stateCommentEnd(a){const s=this.currentToken;switch(a){case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.DATA,this.emitCurrentComment(s);break}case CODE_POINTS.EXCLAMATION_MARK:{this.state=State$1.COMMENT_END_BANG;break}case CODE_POINTS.HYPHEN_MINUS:{s.data+="-";break}case CODE_POINTS.EOF:{this._err(ERR.eofInComment),this.emitCurrentComment(s),this._emitEOFToken();break}default:s.data+="--",this.state=State$1.COMMENT,this._stateComment(a)}}_stateCommentEndBang(a){const s=this.currentToken;switch(a){case CODE_POINTS.HYPHEN_MINUS:{s.data+="--!",this.state=State$1.COMMENT_END_DASH;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.incorrectlyClosedComment),this.state=State$1.DATA,this.emitCurrentComment(s);break}case CODE_POINTS.EOF:{this._err(ERR.eofInComment),this.emitCurrentComment(s),this._emitEOFToken();break}default:s.data+="--!",this.state=State$1.COMMENT,this._stateComment(a)}}_stateDoctype(a){switch(a){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this.state=State$1.BEFORE_DOCTYPE_NAME;break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(a);break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),this._createDoctypeToken(null);const s=this.currentToken;s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:this._err(ERR.missingWhitespaceBeforeDoctypeName),this.state=State$1.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(a)}}_stateBeforeDoctypeName(a){if(isAsciiUpper(a))this._createDoctypeToken(String.fromCharCode(toAsciiLower(a))),this.state=State$1.DOCTYPE_NAME;else switch(a){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._createDoctypeToken(REPLACEMENT_CHARACTER),this.state=State$1.DOCTYPE_NAME;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingDoctypeName),this._createDoctypeToken(null);const s=this.currentToken;s.forceQuirks=!0,this.emitCurrentDoctype(s),this.state=State$1.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),this._createDoctypeToken(null);const s=this.currentToken;s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(a)),this.state=State$1.DOCTYPE_NAME}}_stateDoctypeName(a){const s=this.currentToken;switch(a){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this.state=State$1.AFTER_DOCTYPE_NAME;break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.DATA,this.emitCurrentDoctype(s);break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),s.name+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:s.name+=String.fromCodePoint(isAsciiUpper(a)?toAsciiLower(a):a)}}_stateAfterDoctypeName(a){const s=this.currentToken;switch(a){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.DATA,this.emitCurrentDoctype(s);break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(SEQUENCES.PUBLIC,!1)?this.state=State$1.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(SEQUENCES.SYSTEM,!1)?this.state=State$1.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(ERR.invalidCharacterSequenceAfterDoctypeName),s.forceQuirks=!0,this.state=State$1.BOGUS_DOCTYPE,this._stateBogusDoctype(a))}}_stateAfterDoctypePublicKeyword(a){const s=this.currentToken;switch(a){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this.state=State$1.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case CODE_POINTS.QUOTATION_MARK:{this._err(ERR.missingWhitespaceAfterDoctypePublicKeyword),s.publicId="",this.state=State$1.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{this._err(ERR.missingWhitespaceAfterDoctypePublicKeyword),s.publicId="",this.state=State$1.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingDoctypePublicIdentifier),s.forceQuirks=!0,this.state=State$1.DATA,this.emitCurrentDoctype(s);break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:this._err(ERR.missingQuoteBeforeDoctypePublicIdentifier),s.forceQuirks=!0,this.state=State$1.BOGUS_DOCTYPE,this._stateBogusDoctype(a)}}_stateBeforeDoctypePublicIdentifier(a){const s=this.currentToken;switch(a){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.QUOTATION_MARK:{s.publicId="",this.state=State$1.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{s.publicId="",this.state=State$1.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingDoctypePublicIdentifier),s.forceQuirks=!0,this.state=State$1.DATA,this.emitCurrentDoctype(s);break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:this._err(ERR.missingQuoteBeforeDoctypePublicIdentifier),s.forceQuirks=!0,this.state=State$1.BOGUS_DOCTYPE,this._stateBogusDoctype(a)}}_stateDoctypePublicIdentifierDoubleQuoted(a){const s=this.currentToken;switch(a){case CODE_POINTS.QUOTATION_MARK:{this.state=State$1.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),s.publicId+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptDoctypePublicIdentifier),s.forceQuirks=!0,this.emitCurrentDoctype(s),this.state=State$1.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:s.publicId+=String.fromCodePoint(a)}}_stateDoctypePublicIdentifierSingleQuoted(a){const s=this.currentToken;switch(a){case CODE_POINTS.APOSTROPHE:{this.state=State$1.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),s.publicId+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptDoctypePublicIdentifier),s.forceQuirks=!0,this.emitCurrentDoctype(s),this.state=State$1.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:s.publicId+=String.fromCodePoint(a)}}_stateAfterDoctypePublicIdentifier(a){const s=this.currentToken;switch(a){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this.state=State$1.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.DATA,this.emitCurrentDoctype(s);break}case CODE_POINTS.QUOTATION_MARK:{this._err(ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),s.systemId="",this.state=State$1.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{this._err(ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),s.systemId="",this.state=State$1.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:this._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier),s.forceQuirks=!0,this.state=State$1.BOGUS_DOCTYPE,this._stateBogusDoctype(a)}}_stateBetweenDoctypePublicAndSystemIdentifiers(a){const s=this.currentToken;switch(a){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(s),this.state=State$1.DATA;break}case CODE_POINTS.QUOTATION_MARK:{s.systemId="",this.state=State$1.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{s.systemId="",this.state=State$1.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:this._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier),s.forceQuirks=!0,this.state=State$1.BOGUS_DOCTYPE,this._stateBogusDoctype(a)}}_stateAfterDoctypeSystemKeyword(a){const s=this.currentToken;switch(a){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this.state=State$1.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case CODE_POINTS.QUOTATION_MARK:{this._err(ERR.missingWhitespaceAfterDoctypeSystemKeyword),s.systemId="",this.state=State$1.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{this._err(ERR.missingWhitespaceAfterDoctypeSystemKeyword),s.systemId="",this.state=State$1.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingDoctypeSystemIdentifier),s.forceQuirks=!0,this.state=State$1.DATA,this.emitCurrentDoctype(s);break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:this._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier),s.forceQuirks=!0,this.state=State$1.BOGUS_DOCTYPE,this._stateBogusDoctype(a)}}_stateBeforeDoctypeSystemIdentifier(a){const s=this.currentToken;switch(a){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.QUOTATION_MARK:{s.systemId="",this.state=State$1.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{s.systemId="",this.state=State$1.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingDoctypeSystemIdentifier),s.forceQuirks=!0,this.state=State$1.DATA,this.emitCurrentDoctype(s);break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:this._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier),s.forceQuirks=!0,this.state=State$1.BOGUS_DOCTYPE,this._stateBogusDoctype(a)}}_stateDoctypeSystemIdentifierDoubleQuoted(a){const s=this.currentToken;switch(a){case CODE_POINTS.QUOTATION_MARK:{this.state=State$1.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),s.systemId+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptDoctypeSystemIdentifier),s.forceQuirks=!0,this.emitCurrentDoctype(s),this.state=State$1.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:s.systemId+=String.fromCodePoint(a)}}_stateDoctypeSystemIdentifierSingleQuoted(a){const s=this.currentToken;switch(a){case CODE_POINTS.APOSTROPHE:{this.state=State$1.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),s.systemId+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptDoctypeSystemIdentifier),s.forceQuirks=!0,this.emitCurrentDoctype(s),this.state=State$1.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:s.systemId+=String.fromCodePoint(a)}}_stateAfterDoctypeSystemIdentifier(a){const s=this.currentToken;switch(a){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(s),this.state=State$1.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),s.forceQuirks=!0,this.emitCurrentDoctype(s),this._emitEOFToken();break}default:this._err(ERR.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=State$1.BOGUS_DOCTYPE,this._stateBogusDoctype(a)}}_stateBogusDoctype(a){const s=this.currentToken;switch(a){case CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(s),this.state=State$1.DATA;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter);break}case CODE_POINTS.EOF:{this.emitCurrentDoctype(s),this._emitEOFToken();break}}}_stateCdataSection(a){switch(a){case CODE_POINTS.RIGHT_SQUARE_BRACKET:{this.state=State$1.CDATA_SECTION_BRACKET;break}case CODE_POINTS.EOF:{this._err(ERR.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(a)}}_stateCdataSectionBracket(a){a===CODE_POINTS.RIGHT_SQUARE_BRACKET?this.state=State$1.CDATA_SECTION_END:(this._emitChars("]"),this.state=State$1.CDATA_SECTION,this._stateCdataSection(a))}_stateCdataSectionEnd(a){switch(a){case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.DATA;break}case CODE_POINTS.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=State$1.CDATA_SECTION,this._stateCdataSection(a)}}_stateCharacterReference(a){a===CODE_POINTS.NUMBER_SIGN?this.state=State$1.NUMERIC_CHARACTER_REFERENCE:isAsciiAlphaNumeric(a)?(this.state=State$1.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(a)):(this._flushCodePointConsumedAsCharacterReference(CODE_POINTS.AMPERSAND),this._reconsumeInState(this.returnState,a))}_stateNamedCharacterReference(a){const s=this._matchNamedCharacterReference(a);if(!this._ensureHibernation())if(s){for(let c=0;c<s.length;c++)this._flushCodePointConsumedAsCharacterReference(s[c]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(CODE_POINTS.AMPERSAND),this.state=State$1.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(a){isAsciiAlphaNumeric(a)?this._flushCodePointConsumedAsCharacterReference(a):(a===CODE_POINTS.SEMICOLON&&this._err(ERR.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,a))}_stateNumericCharacterReference(a){this.charRefCode=0,a===CODE_POINTS.LATIN_SMALL_X||a===CODE_POINTS.LATIN_CAPITAL_X?this.state=State$1.HEXADEMICAL_CHARACTER_REFERENCE_START:isAsciiDigit(a)?(this.state=State$1.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(a)):(this._err(ERR.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(CODE_POINTS.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(CODE_POINTS.NUMBER_SIGN),this._reconsumeInState(this.returnState,a))}_stateHexademicalCharacterReferenceStart(a){isAsciiHexDigit(a)?(this.state=State$1.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(a)):(this._err(ERR.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(CODE_POINTS.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(CODE_POINTS.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(a){isAsciiUpperHexDigit(a)?this.charRefCode=this.charRefCode*16+a-55:isAsciiLowerHexDigit(a)?this.charRefCode=this.charRefCode*16+a-87:isAsciiDigit(a)?this.charRefCode=this.charRefCode*16+a-48:a===CODE_POINTS.SEMICOLON?this.state=State$1.NUMERIC_CHARACTER_REFERENCE_END:(this._err(ERR.missingSemicolonAfterCharacterReference),this.state=State$1.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(a))}_stateDecimalCharacterReference(a){isAsciiDigit(a)?this.charRefCode=this.charRefCode*10+a-48:a===CODE_POINTS.SEMICOLON?this.state=State$1.NUMERIC_CHARACTER_REFERENCE_END:(this._err(ERR.missingSemicolonAfterCharacterReference),this.state=State$1.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(a))}_stateNumericCharacterReferenceEnd(a){if(this.charRefCode===CODE_POINTS.NULL)this._err(ERR.nullCharacterReference),this.charRefCode=CODE_POINTS.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(ERR.characterReferenceOutsideUnicodeRange),this.charRefCode=CODE_POINTS.REPLACEMENT_CHARACTER;else if(isSurrogate(this.charRefCode))this._err(ERR.surrogateCharacterReference),this.charRefCode=CODE_POINTS.REPLACEMENT_CHARACTER;else if(isUndefinedCodePoint(this.charRefCode))this._err(ERR.noncharacterCharacterReference);else if(isControlCodePoint(this.charRefCode)||this.charRefCode===CODE_POINTS.CARRIAGE_RETURN){this._err(ERR.controlCharacterReference);const s=C1_CONTROLS_REFERENCE_REPLACEMENTS.get(this.charRefCode);s!==void 0&&(this.charRefCode=s)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,a)}};const IMPLICIT_END_TAG_REQUIRED=new Set([TAG_ID.DD,TAG_ID.DT,TAG_ID.LI,TAG_ID.OPTGROUP,TAG_ID.OPTION,TAG_ID.P,TAG_ID.RB,TAG_ID.RP,TAG_ID.RT,TAG_ID.RTC]),IMPLICIT_END_TAG_REQUIRED_THOROUGHLY=new Set([...IMPLICIT_END_TAG_REQUIRED,TAG_ID.CAPTION,TAG_ID.COLGROUP,TAG_ID.TBODY,TAG_ID.TD,TAG_ID.TFOOT,TAG_ID.TH,TAG_ID.THEAD,TAG_ID.TR]),SCOPING_ELEMENT_NS=new Map([[TAG_ID.APPLET,NS.HTML],[TAG_ID.CAPTION,NS.HTML],[TAG_ID.HTML,NS.HTML],[TAG_ID.MARQUEE,NS.HTML],[TAG_ID.OBJECT,NS.HTML],[TAG_ID.TABLE,NS.HTML],[TAG_ID.TD,NS.HTML],[TAG_ID.TEMPLATE,NS.HTML],[TAG_ID.TH,NS.HTML],[TAG_ID.ANNOTATION_XML,NS.MATHML],[TAG_ID.MI,NS.MATHML],[TAG_ID.MN,NS.MATHML],[TAG_ID.MO,NS.MATHML],[TAG_ID.MS,NS.MATHML],[TAG_ID.MTEXT,NS.MATHML],[TAG_ID.DESC,NS.SVG],[TAG_ID.FOREIGN_OBJECT,NS.SVG],[TAG_ID.TITLE,NS.SVG]]),NAMED_HEADERS=[TAG_ID.H1,TAG_ID.H2,TAG_ID.H3,TAG_ID.H4,TAG_ID.H5,TAG_ID.H6],TABLE_ROW_CONTEXT=[TAG_ID.TR,TAG_ID.TEMPLATE,TAG_ID.HTML],TABLE_BODY_CONTEXT=[TAG_ID.TBODY,TAG_ID.TFOOT,TAG_ID.THEAD,TAG_ID.TEMPLATE,TAG_ID.HTML],TABLE_CONTEXT=[TAG_ID.TABLE,TAG_ID.TEMPLATE,TAG_ID.HTML],TABLE_CELLS=[TAG_ID.TD,TAG_ID.TH];class OpenElementStack{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(s,c,u){this.treeAdapter=c,this.handler=u,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=TAG_ID.UNKNOWN,this.current=s}_indexOf(s){return this.items.lastIndexOf(s,this.stackTop)}_isInTemplate(){return this.currentTagId===TAG_ID.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===NS.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(s,c){this.stackTop++,this.items[this.stackTop]=s,this.current=s,this.tagIDs[this.stackTop]=c,this.currentTagId=c,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(s,c,!0)}pop(){const s=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(s,!0)}replace(s,c){const u=this._indexOf(s);this.items[u]=c,u===this.stackTop&&(this.current=c)}insertAfter(s,c,u){const d=this._indexOf(s)+1;this.items.splice(d,0,c),this.tagIDs.splice(d,0,u),this.stackTop++,d===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,d===this.stackTop)}popUntilTagNamePopped(s){let c=this.stackTop+1;do c=this.tagIDs.lastIndexOf(s,c-1);while(c>0&&this.treeAdapter.getNamespaceURI(this.items[c])!==NS.HTML);this.shortenToLength(c<0?0:c)}shortenToLength(s){for(;this.stackTop>=s;){const c=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(c,this.stackTop<s)}}popUntilElementPopped(s){const c=this._indexOf(s);this.shortenToLength(c<0?0:c)}popUntilPopped(s,c){const u=this._indexOfTagNames(s,c);this.shortenToLength(u<0?0:u)}popUntilNumberedHeaderPopped(){this.popUntilPopped(NAMED_HEADERS,NS.HTML)}popUntilTableCellPopped(){this.popUntilPopped(TABLE_CELLS,NS.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(s,c){for(let u=this.stackTop;u>=0;u--)if(s.includes(this.tagIDs[u])&&this.treeAdapter.getNamespaceURI(this.items[u])===c)return u;return-1}clearBackTo(s,c){const u=this._indexOfTagNames(s,c);this.shortenToLength(u+1)}clearBackToTableContext(){this.clearBackTo(TABLE_CONTEXT,NS.HTML)}clearBackToTableBodyContext(){this.clearBackTo(TABLE_BODY_CONTEXT,NS.HTML)}clearBackToTableRowContext(){this.clearBackTo(TABLE_ROW_CONTEXT,NS.HTML)}remove(s){const c=this._indexOf(s);c>=0&&(c===this.stackTop?this.pop():(this.items.splice(c,1),this.tagIDs.splice(c,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(s,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===TAG_ID.BODY?this.items[1]:null}contains(s){return this._indexOf(s)>-1}getCommonAncestor(s){const c=this._indexOf(s)-1;return c>=0?this.items[c]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===TAG_ID.HTML}hasInScope(s){for(let c=this.stackTop;c>=0;c--){const u=this.tagIDs[c],d=this.treeAdapter.getNamespaceURI(this.items[c]);if(u===s&&d===NS.HTML)return!0;if(SCOPING_ELEMENT_NS.get(u)===d)return!1}return!0}hasNumberedHeaderInScope(){for(let s=this.stackTop;s>=0;s--){const c=this.tagIDs[s],u=this.treeAdapter.getNamespaceURI(this.items[s]);if(isNumberedHeader(c)&&u===NS.HTML)return!0;if(SCOPING_ELEMENT_NS.get(c)===u)return!1}return!0}hasInListItemScope(s){for(let c=this.stackTop;c>=0;c--){const u=this.tagIDs[c],d=this.treeAdapter.getNamespaceURI(this.items[c]);if(u===s&&d===NS.HTML)return!0;if((u===TAG_ID.UL||u===TAG_ID.OL)&&d===NS.HTML||SCOPING_ELEMENT_NS.get(u)===d)return!1}return!0}hasInButtonScope(s){for(let c=this.stackTop;c>=0;c--){const u=this.tagIDs[c],d=this.treeAdapter.getNamespaceURI(this.items[c]);if(u===s&&d===NS.HTML)return!0;if(u===TAG_ID.BUTTON&&d===NS.HTML||SCOPING_ELEMENT_NS.get(u)===d)return!1}return!0}hasInTableScope(s){for(let c=this.stackTop;c>=0;c--){const u=this.tagIDs[c];if(this.treeAdapter.getNamespaceURI(this.items[c])===NS.HTML){if(u===s)return!0;if(u===TAG_ID.TABLE||u===TAG_ID.TEMPLATE||u===TAG_ID.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let s=this.stackTop;s>=0;s--){const c=this.tagIDs[s];if(this.treeAdapter.getNamespaceURI(this.items[s])===NS.HTML){if(c===TAG_ID.TBODY||c===TAG_ID.THEAD||c===TAG_ID.TFOOT)return!0;if(c===TAG_ID.TABLE||c===TAG_ID.HTML)return!1}}return!0}hasInSelectScope(s){for(let c=this.stackTop;c>=0;c--){const u=this.tagIDs[c];if(this.treeAdapter.getNamespaceURI(this.items[c])===NS.HTML){if(u===s)return!0;if(u!==TAG_ID.OPTION&&u!==TAG_ID.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;IMPLICIT_END_TAG_REQUIRED.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;IMPLICIT_END_TAG_REQUIRED_THOROUGHLY.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(s){for(;this.currentTagId!==s&&IMPLICIT_END_TAG_REQUIRED_THOROUGHLY.has(this.currentTagId);)this.pop()}}const NOAH_ARK_CAPACITY=3;var EntryType;(function(a){a[a.Marker=0]="Marker",a[a.Element=1]="Element"})(EntryType=EntryType||(EntryType={}));const MARKER={type:EntryType.Marker};class FormattingElementList{constructor(s){this.treeAdapter=s,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(s,c){const u=[],d=c.length,h=this.treeAdapter.getTagName(s),p=this.treeAdapter.getNamespaceURI(s);for(let m=0;m<this.entries.length;m++){const f=this.entries[m];if(f.type===EntryType.Marker)break;const{element:_}=f;if(this.treeAdapter.getTagName(_)===h&&this.treeAdapter.getNamespaceURI(_)===p){const y=this.treeAdapter.getAttrList(_);y.length===d&&u.push({idx:m,attrs:y})}}return u}_ensureNoahArkCondition(s){if(this.entries.length<NOAH_ARK_CAPACITY)return;const c=this.treeAdapter.getAttrList(s),u=this._getNoahArkConditionCandidates(s,c);if(u.length<NOAH_ARK_CAPACITY)return;const d=new Map(c.map(p=>[p.name,p.value]));let h=0;for(let p=0;p<u.length;p++){const m=u[p];m.attrs.every(f=>d.get(f.name)===f.value)&&(h+=1,h>=NOAH_ARK_CAPACITY&&this.entries.splice(m.idx,1))}}insertMarker(){this.entries.unshift(MARKER)}pushElement(s,c){this._ensureNoahArkCondition(s),this.entries.unshift({type:EntryType.Element,element:s,token:c})}insertElementAfterBookmark(s,c){const u=this.entries.indexOf(this.bookmark);this.entries.splice(u,0,{type:EntryType.Element,element:s,token:c})}removeEntry(s){const c=this.entries.indexOf(s);c>=0&&this.entries.splice(c,1)}clearToLastMarker(){const s=this.entries.indexOf(MARKER);s>=0?this.entries.splice(0,s+1):this.entries.length=0}getElementEntryInScopeWithTagName(s){const c=this.entries.find(u=>u.type===EntryType.Marker||this.treeAdapter.getTagName(u.element)===s);return c&&c.type===EntryType.Element?c:null}getElementEntry(s){return this.entries.find(c=>c.type===EntryType.Element&&c.element===s)}}function createTextNode$1(a){return{nodeName:"#text",value:a,parentNode:null}}const defaultTreeAdapter={createDocument(){return{nodeName:"#document",mode:DOCUMENT_MODE.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(a,s,c){return{nodeName:a,tagName:a,attrs:c,namespaceURI:s,childNodes:[],parentNode:null}},createCommentNode(a){return{nodeName:"#comment",data:a,parentNode:null}},appendChild(a,s){a.childNodes.push(s),s.parentNode=a},insertBefore(a,s,c){const u=a.childNodes.indexOf(c);a.childNodes.splice(u,0,s),s.parentNode=a},setTemplateContent(a,s){a.content=s},getTemplateContent(a){return a.content},setDocumentType(a,s,c,u){const d=a.childNodes.find(h=>h.nodeName==="#documentType");if(d)d.name=s,d.publicId=c,d.systemId=u;else{const h={nodeName:"#documentType",name:s,publicId:c,systemId:u,parentNode:null};defaultTreeAdapter.appendChild(a,h)}},setDocumentMode(a,s){a.mode=s},getDocumentMode(a){return a.mode},detachNode(a){if(a.parentNode){const s=a.parentNode.childNodes.indexOf(a);a.parentNode.childNodes.splice(s,1),a.parentNode=null}},insertText(a,s){if(a.childNodes.length>0){const c=a.childNodes[a.childNodes.length-1];if(defaultTreeAdapter.isTextNode(c)){c.value+=s;return}}defaultTreeAdapter.appendChild(a,createTextNode$1(s))},insertTextBefore(a,s,c){const u=a.childNodes[a.childNodes.indexOf(c)-1];u&&defaultTreeAdapter.isTextNode(u)?u.value+=s:defaultTreeAdapter.insertBefore(a,createTextNode$1(s),c)},adoptAttributes(a,s){const c=new Set(a.attrs.map(u=>u.name));for(let u=0;u<s.length;u++)c.has(s[u].name)||a.attrs.push(s[u])},getFirstChild(a){return a.childNodes[0]},getChildNodes(a){return a.childNodes},getParentNode(a){return a.parentNode},getAttrList(a){return a.attrs},getTagName(a){return a.tagName},getNamespaceURI(a){return a.namespaceURI},getTextNodeContent(a){return a.value},getCommentNodeContent(a){return a.data},getDocumentTypeNodeName(a){return a.name},getDocumentTypeNodePublicId(a){return a.publicId},getDocumentTypeNodeSystemId(a){return a.systemId},isTextNode(a){return a.nodeName==="#text"},isCommentNode(a){return a.nodeName==="#comment"},isDocumentTypeNode(a){return a.nodeName==="#documentType"},isElementNode(a){return Object.prototype.hasOwnProperty.call(a,"tagName")},setNodeSourceCodeLocation(a,s){a.sourceCodeLocation=s},getNodeSourceCodeLocation(a){return a.sourceCodeLocation},updateNodeSourceCodeLocation(a,s){a.sourceCodeLocation={...a.sourceCodeLocation,...s}}},VALID_DOCTYPE_NAME="html",VALID_SYSTEM_ID="about:legacy-compat",QUIRKS_MODE_SYSTEM_ID="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",QUIRKS_MODE_PUBLIC_ID_PREFIXES=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],QUIRKS_MODE_NO_SYSTEM_ID_PUBLIC_ID_PREFIXES=[...QUIRKS_MODE_PUBLIC_ID_PREFIXES,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],QUIRKS_MODE_PUBLIC_IDS=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),LIMITED_QUIRKS_PUBLIC_ID_PREFIXES=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],LIMITED_QUIRKS_WITH_SYSTEM_ID_PUBLIC_ID_PREFIXES=[...LIMITED_QUIRKS_PUBLIC_ID_PREFIXES,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function hasPrefix(a,s){return s.some(c=>a.startsWith(c))}function isConforming(a){return a.name===VALID_DOCTYPE_NAME&&a.publicId===null&&(a.systemId===null||a.systemId===VALID_SYSTEM_ID)}function getDocumentMode(a){if(a.name!==VALID_DOCTYPE_NAME)return DOCUMENT_MODE.QUIRKS;const{systemId:s}=a;if(s&&s.toLowerCase()===QUIRKS_MODE_SYSTEM_ID)return DOCUMENT_MODE.QUIRKS;let{publicId:c}=a;if(c!==null){if(c=c.toLowerCase(),QUIRKS_MODE_PUBLIC_IDS.has(c))return DOCUMENT_MODE.QUIRKS;let u=s===null?QUIRKS_MODE_NO_SYSTEM_ID_PUBLIC_ID_PREFIXES:QUIRKS_MODE_PUBLIC_ID_PREFIXES;if(hasPrefix(c,u))return DOCUMENT_MODE.QUIRKS;if(u=s===null?LIMITED_QUIRKS_PUBLIC_ID_PREFIXES:LIMITED_QUIRKS_WITH_SYSTEM_ID_PUBLIC_ID_PREFIXES,hasPrefix(c,u))return DOCUMENT_MODE.LIMITED_QUIRKS}return DOCUMENT_MODE.NO_QUIRKS}const MIME_TYPES={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},DEFINITION_URL_ATTR="definitionurl",ADJUSTED_DEFINITION_URL_ATTR="definitionURL",SVG_ATTRS_ADJUSTMENT_MAP=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(a=>[a.toLowerCase(),a])),XML_ATTRS_ADJUSTMENT_MAP=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:NS.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:NS.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:NS.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:NS.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:NS.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:NS.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:NS.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:NS.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:NS.XML}],["xml:space",{prefix:"xml",name:"space",namespace:NS.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:NS.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:NS.XMLNS}]]),SVG_TAG_NAMES_ADJUSTMENT_MAP=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(a=>[a.toLowerCase(),a])),EXITS_FOREIGN_CONTENT=new Set([TAG_ID.B,TAG_ID.BIG,TAG_ID.BLOCKQUOTE,TAG_ID.BODY,TAG_ID.BR,TAG_ID.CENTER,TAG_ID.CODE,TAG_ID.DD,TAG_ID.DIV,TAG_ID.DL,TAG_ID.DT,TAG_ID.EM,TAG_ID.EMBED,TAG_ID.H1,TAG_ID.H2,TAG_ID.H3,TAG_ID.H4,TAG_ID.H5,TAG_ID.H6,TAG_ID.HEAD,TAG_ID.HR,TAG_ID.I,TAG_ID.IMG,TAG_ID.LI,TAG_ID.LISTING,TAG_ID.MENU,TAG_ID.META,TAG_ID.NOBR,TAG_ID.OL,TAG_ID.P,TAG_ID.PRE,TAG_ID.RUBY,TAG_ID.S,TAG_ID.SMALL,TAG_ID.SPAN,TAG_ID.STRONG,TAG_ID.STRIKE,TAG_ID.SUB,TAG_ID.SUP,TAG_ID.TABLE,TAG_ID.TT,TAG_ID.U,TAG_ID.UL,TAG_ID.VAR]);function causesExit(a){const s=a.tagID;return s===TAG_ID.FONT&&a.attrs.some(({name:c})=>c===ATTRS.COLOR||c===ATTRS.SIZE||c===ATTRS.FACE)||EXITS_FOREIGN_CONTENT.has(s)}function adjustTokenMathMLAttrs(a){for(let s=0;s<a.attrs.length;s++)if(a.attrs[s].name===DEFINITION_URL_ATTR){a.attrs[s].name=ADJUSTED_DEFINITION_URL_ATTR;break}}function adjustTokenSVGAttrs(a){for(let s=0;s<a.attrs.length;s++){const c=SVG_ATTRS_ADJUSTMENT_MAP.get(a.attrs[s].name);c!=null&&(a.attrs[s].name=c)}}function adjustTokenXMLAttrs(a){for(let s=0;s<a.attrs.length;s++){const c=XML_ATTRS_ADJUSTMENT_MAP.get(a.attrs[s].name);c&&(a.attrs[s].prefix=c.prefix,a.attrs[s].name=c.name,a.attrs[s].namespace=c.namespace)}}function adjustTokenSVGTagName(a){const s=SVG_TAG_NAMES_ADJUSTMENT_MAP.get(a.tagName);s!=null&&(a.tagName=s,a.tagID=getTagID(a.tagName))}function isMathMLTextIntegrationPoint(a,s){return s===NS.MATHML&&(a===TAG_ID.MI||a===TAG_ID.MO||a===TAG_ID.MN||a===TAG_ID.MS||a===TAG_ID.MTEXT)}function isHtmlIntegrationPoint(a,s,c){if(s===NS.MATHML&&a===TAG_ID.ANNOTATION_XML){for(let u=0;u<c.length;u++)if(c[u].name===ATTRS.ENCODING){const d=c[u].value.toLowerCase();return d===MIME_TYPES.TEXT_HTML||d===MIME_TYPES.APPLICATION_XML}}return s===NS.SVG&&(a===TAG_ID.FOREIGN_OBJECT||a===TAG_ID.DESC||a===TAG_ID.TITLE)}function isIntegrationPoint(a,s,c,u){return(!u||u===NS.HTML)&&isHtmlIntegrationPoint(a,s,c)||(!u||u===NS.MATHML)&&isMathMLTextIntegrationPoint(a,s)}const HIDDEN_INPUT_TYPE="hidden",AA_OUTER_LOOP_ITER=8,AA_INNER_LOOP_ITER=3;var InsertionMode;(function(a){a[a.INITIAL=0]="INITIAL",a[a.BEFORE_HTML=1]="BEFORE_HTML",a[a.BEFORE_HEAD=2]="BEFORE_HEAD",a[a.IN_HEAD=3]="IN_HEAD",a[a.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",a[a.AFTER_HEAD=5]="AFTER_HEAD",a[a.IN_BODY=6]="IN_BODY",a[a.TEXT=7]="TEXT",a[a.IN_TABLE=8]="IN_TABLE",a[a.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",a[a.IN_CAPTION=10]="IN_CAPTION",a[a.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",a[a.IN_TABLE_BODY=12]="IN_TABLE_BODY",a[a.IN_ROW=13]="IN_ROW",a[a.IN_CELL=14]="IN_CELL",a[a.IN_SELECT=15]="IN_SELECT",a[a.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",a[a.IN_TEMPLATE=17]="IN_TEMPLATE",a[a.AFTER_BODY=18]="AFTER_BODY",a[a.IN_FRAMESET=19]="IN_FRAMESET",a[a.AFTER_FRAMESET=20]="AFTER_FRAMESET",a[a.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",a[a.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(InsertionMode||(InsertionMode={}));const BASE_LOC={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},TABLE_STRUCTURE_TAGS=new Set([TAG_ID.TABLE,TAG_ID.TBODY,TAG_ID.TFOOT,TAG_ID.THEAD,TAG_ID.TR]),defaultParserOptions={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:defaultTreeAdapter,onParseError:null};let Parser$1=class{constructor(a,s,c=null,u=null){this.fragmentContext=c,this.scriptHandler=u,this.currentToken=null,this.stopped=!1,this.insertionMode=InsertionMode.INITIAL,this.originalInsertionMode=InsertionMode.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...defaultParserOptions,...a},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=s??this.treeAdapter.createDocument(),this.tokenizer=new Tokenizer$1(this.options,this),this.activeFormattingElements=new FormattingElementList(this.treeAdapter),this.fragmentContextID=c?getTagID(this.treeAdapter.getTagName(c)):TAG_ID.UNKNOWN,this._setContextModes(c??this.document,this.fragmentContextID),this.openElements=new OpenElementStack(this.document,this.treeAdapter,this)}static parse(a,s){const c=new this(s);return c.tokenizer.write(a,!0),c.document}static getFragmentParser(a,s){const c={...defaultParserOptions,...s};a??(a=c.treeAdapter.createElement(TAG_NAMES.TEMPLATE,NS.HTML,[]));const u=c.treeAdapter.createElement("documentmock",NS.HTML,[]),d=new this(c,u,a);return d.fragmentContextID===TAG_ID.TEMPLATE&&d.tmplInsertionModeStack.unshift(InsertionMode.IN_TEMPLATE),d._initTokenizerForFragmentParsing(),d._insertFakeRootElement(),d._resetInsertionMode(),d._findFormInFragmentContext(),d}getFragment(){const a=this.treeAdapter.getFirstChild(this.document),s=this.treeAdapter.createDocumentFragment();return this._adoptNodes(a,s),s}_err(a,s,c){var u;if(!this.onParseError)return;const d=(u=a.location)!==null&&u!==void 0?u:BASE_LOC,h={code:s,startLine:d.startLine,startCol:d.startCol,startOffset:d.startOffset,endLine:c?d.startLine:d.endLine,endCol:c?d.startCol:d.endCol,endOffset:c?d.startOffset:d.endOffset};this.onParseError(h)}onItemPush(a,s,c){var u,d;(d=(u=this.treeAdapter).onItemPush)===null||d===void 0||d.call(u,a),c&&this.openElements.stackTop>0&&this._setContextModes(a,s)}onItemPop(a,s){var c,u;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(a,this.currentToken),(u=(c=this.treeAdapter).onItemPop)===null||u===void 0||u.call(c,a,this.openElements.current),s){let d,h;this.openElements.stackTop===0&&this.fragmentContext?(d=this.fragmentContext,h=this.fragmentContextID):{current:d,currentTagId:h}=this.openElements,this._setContextModes(d,h)}}_setContextModes(a,s){const c=a===this.document||this.treeAdapter.getNamespaceURI(a)===NS.HTML;this.currentNotInHTML=!c,this.tokenizer.inForeignNode=!c&&!this._isIntegrationPoint(s,a)}_switchToTextParsing(a,s){this._insertElement(a,NS.HTML),this.tokenizer.state=s,this.originalInsertionMode=this.insertionMode,this.insertionMode=InsertionMode.TEXT}switchToPlaintextParsing(){this.insertionMode=InsertionMode.TEXT,this.originalInsertionMode=InsertionMode.IN_BODY,this.tokenizer.state=TokenizerMode.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let a=this.fragmentContext;for(;a;){if(this.treeAdapter.getTagName(a)===TAG_NAMES.FORM){this.formElement=a;break}a=this.treeAdapter.getParentNode(a)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==NS.HTML))switch(this.fragmentContextID){case TAG_ID.TITLE:case TAG_ID.TEXTAREA:{this.tokenizer.state=TokenizerMode.RCDATA;break}case TAG_ID.STYLE:case TAG_ID.XMP:case TAG_ID.IFRAME:case TAG_ID.NOEMBED:case TAG_ID.NOFRAMES:case TAG_ID.NOSCRIPT:{this.tokenizer.state=TokenizerMode.RAWTEXT;break}case TAG_ID.SCRIPT:{this.tokenizer.state=TokenizerMode.SCRIPT_DATA;break}case TAG_ID.PLAINTEXT:{this.tokenizer.state=TokenizerMode.PLAINTEXT;break}}}_setDocumentType(a){const s=a.name||"",c=a.publicId||"",u=a.systemId||"";if(this.treeAdapter.setDocumentType(this.document,s,c,u),a.location){const d=this.treeAdapter.getChildNodes(this.document).find(h=>this.treeAdapter.isDocumentTypeNode(h));d&&this.treeAdapter.setNodeSourceCodeLocation(d,a.location)}}_attachElementToTree(a,s){if(this.options.sourceCodeLocationInfo){const c=s&&{...s,startTag:s};this.treeAdapter.setNodeSourceCodeLocation(a,c)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(a);else{const c=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(c,a)}}_appendElement(a,s){const c=this.treeAdapter.createElement(a.tagName,s,a.attrs);this._attachElementToTree(c,a.location)}_insertElement(a,s){const c=this.treeAdapter.createElement(a.tagName,s,a.attrs);this._attachElementToTree(c,a.location),this.openElements.push(c,a.tagID)}_insertFakeElement(a,s){const c=this.treeAdapter.createElement(a,NS.HTML,[]);this._attachElementToTree(c,null),this.openElements.push(c,s)}_insertTemplate(a){const s=this.treeAdapter.createElement(a.tagName,NS.HTML,a.attrs),c=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(s,c),this._attachElementToTree(s,a.location),this.openElements.push(s,a.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(c,null)}_insertFakeRootElement(){const a=this.treeAdapter.createElement(TAG_NAMES.HTML,NS.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(a,null),this.treeAdapter.appendChild(this.openElements.current,a),this.openElements.push(a,TAG_ID.HTML)}_appendCommentNode(a,s){const c=this.treeAdapter.createCommentNode(a.data);this.treeAdapter.appendChild(s,c),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(c,a.location)}_insertCharacters(a){let s,c;if(this._shouldFosterParentOnInsertion()?({parent:s,beforeElement:c}=this._findFosterParentingLocation(),c?this.treeAdapter.insertTextBefore(s,a.chars,c):this.treeAdapter.insertText(s,a.chars)):(s=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(s,a.chars)),!a.location)return;const u=this.treeAdapter.getChildNodes(s),d=c?u.lastIndexOf(c):u.length,h=u[d-1];if(this.treeAdapter.getNodeSourceCodeLocation(h)){const{endLine:p,endCol:m,endOffset:f}=a.location;this.treeAdapter.updateNodeSourceCodeLocation(h,{endLine:p,endCol:m,endOffset:f})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(h,a.location)}_adoptNodes(a,s){for(let c=this.treeAdapter.getFirstChild(a);c;c=this.treeAdapter.getFirstChild(a))this.treeAdapter.detachNode(c),this.treeAdapter.appendChild(s,c)}_setEndLocation(a,s){if(this.treeAdapter.getNodeSourceCodeLocation(a)&&s.location){const c=s.location,u=this.treeAdapter.getTagName(a),d=s.type===TokenType.END_TAG&&u===s.tagName?{endTag:{...c},endLine:c.endLine,endCol:c.endCol,endOffset:c.endOffset}:{endLine:c.startLine,endCol:c.startCol,endOffset:c.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(a,d)}}shouldProcessStartTagTokenInForeignContent(a){if(!this.currentNotInHTML)return!1;let s,c;return this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,c=this.fragmentContextID):{current:s,currentTagId:c}=this.openElements,a.tagID===TAG_ID.SVG&&this.treeAdapter.getTagName(s)===TAG_NAMES.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(s)===NS.MATHML?!1:this.tokenizer.inForeignNode||(a.tagID===TAG_ID.MGLYPH||a.tagID===TAG_ID.MALIGNMARK)&&!this._isIntegrationPoint(c,s,NS.HTML)}_processToken(a){switch(a.type){case TokenType.CHARACTER:{this.onCharacter(a);break}case TokenType.NULL_CHARACTER:{this.onNullCharacter(a);break}case TokenType.COMMENT:{this.onComment(a);break}case TokenType.DOCTYPE:{this.onDoctype(a);break}case TokenType.START_TAG:{this._processStartTag(a);break}case TokenType.END_TAG:{this.onEndTag(a);break}case TokenType.EOF:{this.onEof(a);break}case TokenType.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(a);break}}}_isIntegrationPoint(a,s,c){const u=this.treeAdapter.getNamespaceURI(s),d=this.treeAdapter.getAttrList(s);return isIntegrationPoint(a,u,d,c)}_reconstructActiveFormattingElements(){const a=this.activeFormattingElements.entries.length;if(a){const s=this.activeFormattingElements.entries.findIndex(u=>u.type===EntryType.Marker||this.openElements.contains(u.element)),c=s<0?a-1:s-1;for(let u=c;u>=0;u--){const d=this.activeFormattingElements.entries[u];this._insertElement(d.token,this.treeAdapter.getNamespaceURI(d.element)),d.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=InsertionMode.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(TAG_ID.P),this.openElements.popUntilTagNamePopped(TAG_ID.P)}_resetInsertionMode(){for(let a=this.openElements.stackTop;a>=0;a--)switch(a===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[a]){case TAG_ID.TR:{this.insertionMode=InsertionMode.IN_ROW;return}case TAG_ID.TBODY:case TAG_ID.THEAD:case TAG_ID.TFOOT:{this.insertionMode=InsertionMode.IN_TABLE_BODY;return}case TAG_ID.CAPTION:{this.insertionMode=InsertionMode.IN_CAPTION;return}case TAG_ID.COLGROUP:{this.insertionMode=InsertionMode.IN_COLUMN_GROUP;return}case TAG_ID.TABLE:{this.insertionMode=InsertionMode.IN_TABLE;return}case TAG_ID.BODY:{this.insertionMode=InsertionMode.IN_BODY;return}case TAG_ID.FRAMESET:{this.insertionMode=InsertionMode.IN_FRAMESET;return}case TAG_ID.SELECT:{this._resetInsertionModeForSelect(a);return}case TAG_ID.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case TAG_ID.HTML:{this.insertionMode=this.headElement?InsertionMode.AFTER_HEAD:InsertionMode.BEFORE_HEAD;return}case TAG_ID.TD:case TAG_ID.TH:{if(a>0){this.insertionMode=InsertionMode.IN_CELL;return}break}case TAG_ID.HEAD:{if(a>0){this.insertionMode=InsertionMode.IN_HEAD;return}break}}this.insertionMode=InsertionMode.IN_BODY}_resetInsertionModeForSelect(a){if(a>0)for(let s=a-1;s>0;s--){const c=this.openElements.tagIDs[s];if(c===TAG_ID.TEMPLATE)break;if(c===TAG_ID.TABLE){this.insertionMode=InsertionMode.IN_SELECT_IN_TABLE;return}}this.insertionMode=InsertionMode.IN_SELECT}_isElementCausesFosterParenting(a){return TABLE_STRUCTURE_TAGS.has(a)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let a=this.openElements.stackTop;a>=0;a--){const s=this.openElements.items[a];switch(this.openElements.tagIDs[a]){case TAG_ID.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(s)===NS.HTML)return{parent:this.treeAdapter.getTemplateContent(s),beforeElement:null};break}case TAG_ID.TABLE:{const c=this.treeAdapter.getParentNode(s);return c?{parent:c,beforeElement:s}:{parent:this.openElements.items[a-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(a){const s=this._findFosterParentingLocation();s.beforeElement?this.treeAdapter.insertBefore(s.parent,a,s.beforeElement):this.treeAdapter.appendChild(s.parent,a)}_isSpecialElement(a,s){const c=this.treeAdapter.getNamespaceURI(a);return SPECIAL_ELEMENTS[c].has(s)}onCharacter(a){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){characterInForeignContent(this,a);return}switch(this.insertionMode){case InsertionMode.INITIAL:{tokenInInitialMode(this,a);break}case InsertionMode.BEFORE_HTML:{tokenBeforeHtml(this,a);break}case InsertionMode.BEFORE_HEAD:{tokenBeforeHead(this,a);break}case InsertionMode.IN_HEAD:{tokenInHead(this,a);break}case InsertionMode.IN_HEAD_NO_SCRIPT:{tokenInHeadNoScript(this,a);break}case InsertionMode.AFTER_HEAD:{tokenAfterHead(this,a);break}case InsertionMode.IN_BODY:case InsertionMode.IN_CAPTION:case InsertionMode.IN_CELL:case InsertionMode.IN_TEMPLATE:{characterInBody(this,a);break}case InsertionMode.TEXT:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:{this._insertCharacters(a);break}case InsertionMode.IN_TABLE:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:{characterInTable(this,a);break}case InsertionMode.IN_TABLE_TEXT:{characterInTableText(this,a);break}case InsertionMode.IN_COLUMN_GROUP:{tokenInColumnGroup(this,a);break}case InsertionMode.AFTER_BODY:{tokenAfterBody(this,a);break}case InsertionMode.AFTER_AFTER_BODY:{tokenAfterAfterBody(this,a);break}}}onNullCharacter(a){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){nullCharacterInForeignContent(this,a);return}switch(this.insertionMode){case InsertionMode.INITIAL:{tokenInInitialMode(this,a);break}case InsertionMode.BEFORE_HTML:{tokenBeforeHtml(this,a);break}case InsertionMode.BEFORE_HEAD:{tokenBeforeHead(this,a);break}case InsertionMode.IN_HEAD:{tokenInHead(this,a);break}case InsertionMode.IN_HEAD_NO_SCRIPT:{tokenInHeadNoScript(this,a);break}case InsertionMode.AFTER_HEAD:{tokenAfterHead(this,a);break}case InsertionMode.TEXT:{this._insertCharacters(a);break}case InsertionMode.IN_TABLE:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:{characterInTable(this,a);break}case InsertionMode.IN_COLUMN_GROUP:{tokenInColumnGroup(this,a);break}case InsertionMode.AFTER_BODY:{tokenAfterBody(this,a);break}case InsertionMode.AFTER_AFTER_BODY:{tokenAfterAfterBody(this,a);break}}}onComment(a){if(this.skipNextNewLine=!1,this.currentNotInHTML){appendComment(this,a);return}switch(this.insertionMode){case InsertionMode.INITIAL:case InsertionMode.BEFORE_HTML:case InsertionMode.BEFORE_HEAD:case InsertionMode.IN_HEAD:case InsertionMode.IN_HEAD_NO_SCRIPT:case InsertionMode.AFTER_HEAD:case InsertionMode.IN_BODY:case InsertionMode.IN_TABLE:case InsertionMode.IN_CAPTION:case InsertionMode.IN_COLUMN_GROUP:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:case InsertionMode.IN_CELL:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:case InsertionMode.IN_TEMPLATE:case InsertionMode.IN_FRAMESET:case InsertionMode.AFTER_FRAMESET:{appendComment(this,a);break}case InsertionMode.IN_TABLE_TEXT:{tokenInTableText(this,a);break}case InsertionMode.AFTER_BODY:{appendCommentToRootHtmlElement(this,a);break}case InsertionMode.AFTER_AFTER_BODY:case InsertionMode.AFTER_AFTER_FRAMESET:{appendCommentToDocument(this,a);break}}}onDoctype(a){switch(this.skipNextNewLine=!1,this.insertionMode){case InsertionMode.INITIAL:{doctypeInInitialMode(this,a);break}case InsertionMode.BEFORE_HEAD:case InsertionMode.IN_HEAD:case InsertionMode.IN_HEAD_NO_SCRIPT:case InsertionMode.AFTER_HEAD:{this._err(a,ERR.misplacedDoctype);break}case InsertionMode.IN_TABLE_TEXT:{tokenInTableText(this,a);break}}}onStartTag(a){this.skipNextNewLine=!1,this.currentToken=a,this._processStartTag(a),a.selfClosing&&!a.ackSelfClosing&&this._err(a,ERR.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(a){this.shouldProcessStartTagTokenInForeignContent(a)?startTagInForeignContent(this,a):this._startTagOutsideForeignContent(a)}_startTagOutsideForeignContent(a){switch(this.insertionMode){case InsertionMode.INITIAL:{tokenInInitialMode(this,a);break}case InsertionMode.BEFORE_HTML:{startTagBeforeHtml(this,a);break}case InsertionMode.BEFORE_HEAD:{startTagBeforeHead(this,a);break}case InsertionMode.IN_HEAD:{startTagInHead(this,a);break}case InsertionMode.IN_HEAD_NO_SCRIPT:{startTagInHeadNoScript(this,a);break}case InsertionMode.AFTER_HEAD:{startTagAfterHead(this,a);break}case InsertionMode.IN_BODY:{startTagInBody(this,a);break}case InsertionMode.IN_TABLE:{startTagInTable(this,a);break}case InsertionMode.IN_TABLE_TEXT:{tokenInTableText(this,a);break}case InsertionMode.IN_CAPTION:{startTagInCaption(this,a);break}case InsertionMode.IN_COLUMN_GROUP:{startTagInColumnGroup(this,a);break}case InsertionMode.IN_TABLE_BODY:{startTagInTableBody(this,a);break}case InsertionMode.IN_ROW:{startTagInRow(this,a);break}case InsertionMode.IN_CELL:{startTagInCell(this,a);break}case InsertionMode.IN_SELECT:{startTagInSelect(this,a);break}case InsertionMode.IN_SELECT_IN_TABLE:{startTagInSelectInTable(this,a);break}case InsertionMode.IN_TEMPLATE:{startTagInTemplate(this,a);break}case InsertionMode.AFTER_BODY:{startTagAfterBody(this,a);break}case InsertionMode.IN_FRAMESET:{startTagInFrameset(this,a);break}case InsertionMode.AFTER_FRAMESET:{startTagAfterFrameset(this,a);break}case InsertionMode.AFTER_AFTER_BODY:{startTagAfterAfterBody(this,a);break}case InsertionMode.AFTER_AFTER_FRAMESET:{startTagAfterAfterFrameset(this,a);break}}}onEndTag(a){this.skipNextNewLine=!1,this.currentToken=a,this.currentNotInHTML?endTagInForeignContent(this,a):this._endTagOutsideForeignContent(a)}_endTagOutsideForeignContent(a){switch(this.insertionMode){case InsertionMode.INITIAL:{tokenInInitialMode(this,a);break}case InsertionMode.BEFORE_HTML:{endTagBeforeHtml(this,a);break}case InsertionMode.BEFORE_HEAD:{endTagBeforeHead(this,a);break}case InsertionMode.IN_HEAD:{endTagInHead(this,a);break}case InsertionMode.IN_HEAD_NO_SCRIPT:{endTagInHeadNoScript(this,a);break}case InsertionMode.AFTER_HEAD:{endTagAfterHead(this,a);break}case InsertionMode.IN_BODY:{endTagInBody(this,a);break}case InsertionMode.TEXT:{endTagInText(this,a);break}case InsertionMode.IN_TABLE:{endTagInTable(this,a);break}case InsertionMode.IN_TABLE_TEXT:{tokenInTableText(this,a);break}case InsertionMode.IN_CAPTION:{endTagInCaption(this,a);break}case InsertionMode.IN_COLUMN_GROUP:{endTagInColumnGroup(this,a);break}case InsertionMode.IN_TABLE_BODY:{endTagInTableBody(this,a);break}case InsertionMode.IN_ROW:{endTagInRow(this,a);break}case InsertionMode.IN_CELL:{endTagInCell(this,a);break}case InsertionMode.IN_SELECT:{endTagInSelect(this,a);break}case InsertionMode.IN_SELECT_IN_TABLE:{endTagInSelectInTable(this,a);break}case InsertionMode.IN_TEMPLATE:{endTagInTemplate(this,a);break}case InsertionMode.AFTER_BODY:{endTagAfterBody(this,a);break}case InsertionMode.IN_FRAMESET:{endTagInFrameset(this,a);break}case InsertionMode.AFTER_FRAMESET:{endTagAfterFrameset(this,a);break}case InsertionMode.AFTER_AFTER_BODY:{tokenAfterAfterBody(this,a);break}}}onEof(a){switch(this.insertionMode){case InsertionMode.INITIAL:{tokenInInitialMode(this,a);break}case InsertionMode.BEFORE_HTML:{tokenBeforeHtml(this,a);break}case InsertionMode.BEFORE_HEAD:{tokenBeforeHead(this,a);break}case InsertionMode.IN_HEAD:{tokenInHead(this,a);break}case InsertionMode.IN_HEAD_NO_SCRIPT:{tokenInHeadNoScript(this,a);break}case InsertionMode.AFTER_HEAD:{tokenAfterHead(this,a);break}case InsertionMode.IN_BODY:case InsertionMode.IN_TABLE:case InsertionMode.IN_CAPTION:case InsertionMode.IN_COLUMN_GROUP:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:case InsertionMode.IN_CELL:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:{eofInBody(this,a);break}case InsertionMode.TEXT:{eofInText(this,a);break}case InsertionMode.IN_TABLE_TEXT:{tokenInTableText(this,a);break}case InsertionMode.IN_TEMPLATE:{eofInTemplate(this,a);break}case InsertionMode.AFTER_BODY:case InsertionMode.IN_FRAMESET:case InsertionMode.AFTER_FRAMESET:case InsertionMode.AFTER_AFTER_BODY:case InsertionMode.AFTER_AFTER_FRAMESET:{stopParsing(this,a);break}}}onWhitespaceCharacter(a){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,a.chars.charCodeAt(0)===CODE_POINTS.LINE_FEED)){if(a.chars.length===1)return;a.chars=a.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(a);return}switch(this.insertionMode){case InsertionMode.IN_HEAD:case InsertionMode.IN_HEAD_NO_SCRIPT:case InsertionMode.AFTER_HEAD:case InsertionMode.TEXT:case InsertionMode.IN_COLUMN_GROUP:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:case InsertionMode.IN_FRAMESET:case InsertionMode.AFTER_FRAMESET:{this._insertCharacters(a);break}case InsertionMode.IN_BODY:case InsertionMode.IN_CAPTION:case InsertionMode.IN_CELL:case InsertionMode.IN_TEMPLATE:case InsertionMode.AFTER_BODY:case InsertionMode.AFTER_AFTER_BODY:case InsertionMode.AFTER_AFTER_FRAMESET:{whitespaceCharacterInBody(this,a);break}case InsertionMode.IN_TABLE:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:{characterInTable(this,a);break}case InsertionMode.IN_TABLE_TEXT:{whitespaceCharacterInTableText(this,a);break}}}};function aaObtainFormattingElementEntry(a,s){let c=a.activeFormattingElements.getElementEntryInScopeWithTagName(s.tagName);return c?a.openElements.contains(c.element)?a.openElements.hasInScope(s.tagID)||(c=null):(a.activeFormattingElements.removeEntry(c),c=null):genericEndTagInBody(a,s),c}function aaObtainFurthestBlock(a,s){let c=null,u=a.openElements.stackTop;for(;u>=0;u--){const d=a.openElements.items[u];if(d===s.element)break;a._isSpecialElement(d,a.openElements.tagIDs[u])&&(c=d)}return c||(a.openElements.shortenToLength(u<0?0:u),a.activeFormattingElements.removeEntry(s)),c}function aaInnerLoop(a,s,c){let u=s,d=a.openElements.getCommonAncestor(s);for(let h=0,p=d;p!==c;h++,p=d){d=a.openElements.getCommonAncestor(p);const m=a.activeFormattingElements.getElementEntry(p),f=m&&h>=AA_INNER_LOOP_ITER;!m||f?(f&&a.activeFormattingElements.removeEntry(m),a.openElements.remove(p)):(p=aaRecreateElementFromEntry(a,m),u===s&&(a.activeFormattingElements.bookmark=m),a.treeAdapter.detachNode(u),a.treeAdapter.appendChild(p,u),u=p)}return u}function aaRecreateElementFromEntry(a,s){const c=a.treeAdapter.getNamespaceURI(s.element),u=a.treeAdapter.createElement(s.token.tagName,c,s.token.attrs);return a.openElements.replace(s.element,u),s.element=u,u}function aaInsertLastNodeInCommonAncestor(a,s,c){const u=a.treeAdapter.getTagName(s),d=getTagID(u);if(a._isElementCausesFosterParenting(d))a._fosterParentElement(c);else{const h=a.treeAdapter.getNamespaceURI(s);d===TAG_ID.TEMPLATE&&h===NS.HTML&&(s=a.treeAdapter.getTemplateContent(s)),a.treeAdapter.appendChild(s,c)}}function aaReplaceFormattingElement(a,s,c){const u=a.treeAdapter.getNamespaceURI(c.element),{token:d}=c,h=a.treeAdapter.createElement(d.tagName,u,d.attrs);a._adoptNodes(s,h),a.treeAdapter.appendChild(s,h),a.activeFormattingElements.insertElementAfterBookmark(h,d),a.activeFormattingElements.removeEntry(c),a.openElements.remove(c.element),a.openElements.insertAfter(s,h,d.tagID)}function callAdoptionAgency(a,s){for(let c=0;c<AA_OUTER_LOOP_ITER;c++){const u=aaObtainFormattingElementEntry(a,s);if(!u)break;const d=aaObtainFurthestBlock(a,u);if(!d)break;a.activeFormattingElements.bookmark=u;const h=aaInnerLoop(a,d,u.element),p=a.openElements.getCommonAncestor(u.element);a.treeAdapter.detachNode(h),p&&aaInsertLastNodeInCommonAncestor(a,p,h),aaReplaceFormattingElement(a,d,u)}}function appendComment(a,s){a._appendCommentNode(s,a.openElements.currentTmplContentOrNode)}function appendCommentToRootHtmlElement(a,s){a._appendCommentNode(s,a.openElements.items[0])}function appendCommentToDocument(a,s){a._appendCommentNode(s,a.document)}function stopParsing(a,s){if(a.stopped=!0,s.location){const c=a.fragmentContext?0:2;for(let u=a.openElements.stackTop;u>=c;u--)a._setEndLocation(a.openElements.items[u],s);if(!a.fragmentContext&&a.openElements.stackTop>=0){const u=a.openElements.items[0],d=a.treeAdapter.getNodeSourceCodeLocation(u);if(d&&!d.endTag&&(a._setEndLocation(u,s),a.openElements.stackTop>=1)){const h=a.openElements.items[1],p=a.treeAdapter.getNodeSourceCodeLocation(h);p&&!p.endTag&&a._setEndLocation(h,s)}}}}function doctypeInInitialMode(a,s){a._setDocumentType(s);const c=s.forceQuirks?DOCUMENT_MODE.QUIRKS:getDocumentMode(s);isConforming(s)||a._err(s,ERR.nonConformingDoctype),a.treeAdapter.setDocumentMode(a.document,c),a.insertionMode=InsertionMode.BEFORE_HTML}function tokenInInitialMode(a,s){a._err(s,ERR.missingDoctype,!0),a.treeAdapter.setDocumentMode(a.document,DOCUMENT_MODE.QUIRKS),a.insertionMode=InsertionMode.BEFORE_HTML,a._processToken(s)}function startTagBeforeHtml(a,s){s.tagID===TAG_ID.HTML?(a._insertElement(s,NS.HTML),a.insertionMode=InsertionMode.BEFORE_HEAD):tokenBeforeHtml(a,s)}function endTagBeforeHtml(a,s){const c=s.tagID;(c===TAG_ID.HTML||c===TAG_ID.HEAD||c===TAG_ID.BODY||c===TAG_ID.BR)&&tokenBeforeHtml(a,s)}function tokenBeforeHtml(a,s){a._insertFakeRootElement(),a.insertionMode=InsertionMode.BEFORE_HEAD,a._processToken(s)}function startTagBeforeHead(a,s){switch(s.tagID){case TAG_ID.HTML:{startTagInBody(a,s);break}case TAG_ID.HEAD:{a._insertElement(s,NS.HTML),a.headElement=a.openElements.current,a.insertionMode=InsertionMode.IN_HEAD;break}default:tokenBeforeHead(a,s)}}function endTagBeforeHead(a,s){const c=s.tagID;c===TAG_ID.HEAD||c===TAG_ID.BODY||c===TAG_ID.HTML||c===TAG_ID.BR?tokenBeforeHead(a,s):a._err(s,ERR.endTagWithoutMatchingOpenElement)}function tokenBeforeHead(a,s){a._insertFakeElement(TAG_NAMES.HEAD,TAG_ID.HEAD),a.headElement=a.openElements.current,a.insertionMode=InsertionMode.IN_HEAD,a._processToken(s)}function startTagInHead(a,s){switch(s.tagID){case TAG_ID.HTML:{startTagInBody(a,s);break}case TAG_ID.BASE:case TAG_ID.BASEFONT:case TAG_ID.BGSOUND:case TAG_ID.LINK:case TAG_ID.META:{a._appendElement(s,NS.HTML),s.ackSelfClosing=!0;break}case TAG_ID.TITLE:{a._switchToTextParsing(s,TokenizerMode.RCDATA);break}case TAG_ID.NOSCRIPT:{a.options.scriptingEnabled?a._switchToTextParsing(s,TokenizerMode.RAWTEXT):(a._insertElement(s,NS.HTML),a.insertionMode=InsertionMode.IN_HEAD_NO_SCRIPT);break}case TAG_ID.NOFRAMES:case TAG_ID.STYLE:{a._switchToTextParsing(s,TokenizerMode.RAWTEXT);break}case TAG_ID.SCRIPT:{a._switchToTextParsing(s,TokenizerMode.SCRIPT_DATA);break}case TAG_ID.TEMPLATE:{a._insertTemplate(s),a.activeFormattingElements.insertMarker(),a.framesetOk=!1,a.insertionMode=InsertionMode.IN_TEMPLATE,a.tmplInsertionModeStack.unshift(InsertionMode.IN_TEMPLATE);break}case TAG_ID.HEAD:{a._err(s,ERR.misplacedStartTagForHeadElement);break}default:tokenInHead(a,s)}}function endTagInHead(a,s){switch(s.tagID){case TAG_ID.HEAD:{a.openElements.pop(),a.insertionMode=InsertionMode.AFTER_HEAD;break}case TAG_ID.BODY:case TAG_ID.BR:case TAG_ID.HTML:{tokenInHead(a,s);break}case TAG_ID.TEMPLATE:{templateEndTagInHead(a,s);break}default:a._err(s,ERR.endTagWithoutMatchingOpenElement)}}function templateEndTagInHead(a,s){a.openElements.tmplCount>0?(a.openElements.generateImpliedEndTagsThoroughly(),a.openElements.currentTagId!==TAG_ID.TEMPLATE&&a._err(s,ERR.closingOfElementWithOpenChildElements),a.openElements.popUntilTagNamePopped(TAG_ID.TEMPLATE),a.activeFormattingElements.clearToLastMarker(),a.tmplInsertionModeStack.shift(),a._resetInsertionMode()):a._err(s,ERR.endTagWithoutMatchingOpenElement)}function tokenInHead(a,s){a.openElements.pop(),a.insertionMode=InsertionMode.AFTER_HEAD,a._processToken(s)}function startTagInHeadNoScript(a,s){switch(s.tagID){case TAG_ID.HTML:{startTagInBody(a,s);break}case TAG_ID.BASEFONT:case TAG_ID.BGSOUND:case TAG_ID.HEAD:case TAG_ID.LINK:case TAG_ID.META:case TAG_ID.NOFRAMES:case TAG_ID.STYLE:{startTagInHead(a,s);break}case TAG_ID.NOSCRIPT:{a._err(s,ERR.nestedNoscriptInHead);break}default:tokenInHeadNoScript(a,s)}}function endTagInHeadNoScript(a,s){switch(s.tagID){case TAG_ID.NOSCRIPT:{a.openElements.pop(),a.insertionMode=InsertionMode.IN_HEAD;break}case TAG_ID.BR:{tokenInHeadNoScript(a,s);break}default:a._err(s,ERR.endTagWithoutMatchingOpenElement)}}function tokenInHeadNoScript(a,s){const c=s.type===TokenType.EOF?ERR.openElementsLeftAfterEof:ERR.disallowedContentInNoscriptInHead;a._err(s,c),a.openElements.pop(),a.insertionMode=InsertionMode.IN_HEAD,a._processToken(s)}function startTagAfterHead(a,s){switch(s.tagID){case TAG_ID.HTML:{startTagInBody(a,s);break}case TAG_ID.BODY:{a._insertElement(s,NS.HTML),a.framesetOk=!1,a.insertionMode=InsertionMode.IN_BODY;break}case TAG_ID.FRAMESET:{a._insertElement(s,NS.HTML),a.insertionMode=InsertionMode.IN_FRAMESET;break}case TAG_ID.BASE:case TAG_ID.BASEFONT:case TAG_ID.BGSOUND:case TAG_ID.LINK:case TAG_ID.META:case TAG_ID.NOFRAMES:case TAG_ID.SCRIPT:case TAG_ID.STYLE:case TAG_ID.TEMPLATE:case TAG_ID.TITLE:{a._err(s,ERR.abandonedHeadElementChild),a.openElements.push(a.headElement,TAG_ID.HEAD),startTagInHead(a,s),a.openElements.remove(a.headElement);break}case TAG_ID.HEAD:{a._err(s,ERR.misplacedStartTagForHeadElement);break}default:tokenAfterHead(a,s)}}function endTagAfterHead(a,s){switch(s.tagID){case TAG_ID.BODY:case TAG_ID.HTML:case TAG_ID.BR:{tokenAfterHead(a,s);break}case TAG_ID.TEMPLATE:{templateEndTagInHead(a,s);break}default:a._err(s,ERR.endTagWithoutMatchingOpenElement)}}function tokenAfterHead(a,s){a._insertFakeElement(TAG_NAMES.BODY,TAG_ID.BODY),a.insertionMode=InsertionMode.IN_BODY,modeInBody(a,s)}function modeInBody(a,s){switch(s.type){case TokenType.CHARACTER:{characterInBody(a,s);break}case TokenType.WHITESPACE_CHARACTER:{whitespaceCharacterInBody(a,s);break}case TokenType.COMMENT:{appendComment(a,s);break}case TokenType.START_TAG:{startTagInBody(a,s);break}case TokenType.END_TAG:{endTagInBody(a,s);break}case TokenType.EOF:{eofInBody(a,s);break}}}function whitespaceCharacterInBody(a,s){a._reconstructActiveFormattingElements(),a._insertCharacters(s)}function characterInBody(a,s){a._reconstructActiveFormattingElements(),a._insertCharacters(s),a.framesetOk=!1}function htmlStartTagInBody(a,s){a.openElements.tmplCount===0&&a.treeAdapter.adoptAttributes(a.openElements.items[0],s.attrs)}function bodyStartTagInBody(a,s){const c=a.openElements.tryPeekProperlyNestedBodyElement();c&&a.openElements.tmplCount===0&&(a.framesetOk=!1,a.treeAdapter.adoptAttributes(c,s.attrs))}function framesetStartTagInBody(a,s){const c=a.openElements.tryPeekProperlyNestedBodyElement();a.framesetOk&&c&&(a.treeAdapter.detachNode(c),a.openElements.popAllUpToHtmlElement(),a._insertElement(s,NS.HTML),a.insertionMode=InsertionMode.IN_FRAMESET)}function addressStartTagInBody(a,s){a.openElements.hasInButtonScope(TAG_ID.P)&&a._closePElement(),a._insertElement(s,NS.HTML)}function numberedHeaderStartTagInBody(a,s){a.openElements.hasInButtonScope(TAG_ID.P)&&a._closePElement(),isNumberedHeader(a.openElements.currentTagId)&&a.openElements.pop(),a._insertElement(s,NS.HTML)}function preStartTagInBody(a,s){a.openElements.hasInButtonScope(TAG_ID.P)&&a._closePElement(),a._insertElement(s,NS.HTML),a.skipNextNewLine=!0,a.framesetOk=!1}function formStartTagInBody(a,s){const c=a.openElements.tmplCount>0;(!a.formElement||c)&&(a.openElements.hasInButtonScope(TAG_ID.P)&&a._closePElement(),a._insertElement(s,NS.HTML),c||(a.formElement=a.openElements.current))}function listItemStartTagInBody(a,s){a.framesetOk=!1;const c=s.tagID;for(let u=a.openElements.stackTop;u>=0;u--){const d=a.openElements.tagIDs[u];if(c===TAG_ID.LI&&d===TAG_ID.LI||(c===TAG_ID.DD||c===TAG_ID.DT)&&(d===TAG_ID.DD||d===TAG_ID.DT)){a.openElements.generateImpliedEndTagsWithExclusion(d),a.openElements.popUntilTagNamePopped(d);break}if(d!==TAG_ID.ADDRESS&&d!==TAG_ID.DIV&&d!==TAG_ID.P&&a._isSpecialElement(a.openElements.items[u],d))break}a.openElements.hasInButtonScope(TAG_ID.P)&&a._closePElement(),a._insertElement(s,NS.HTML)}function plaintextStartTagInBody(a,s){a.openElements.hasInButtonScope(TAG_ID.P)&&a._closePElement(),a._insertElement(s,NS.HTML),a.tokenizer.state=TokenizerMode.PLAINTEXT}function buttonStartTagInBody(a,s){a.openElements.hasInScope(TAG_ID.BUTTON)&&(a.openElements.generateImpliedEndTags(),a.openElements.popUntilTagNamePopped(TAG_ID.BUTTON)),a._reconstructActiveFormattingElements(),a._insertElement(s,NS.HTML),a.framesetOk=!1}function aStartTagInBody(a,s){const c=a.activeFormattingElements.getElementEntryInScopeWithTagName(TAG_NAMES.A);c&&(callAdoptionAgency(a,s),a.openElements.remove(c.element),a.activeFormattingElements.removeEntry(c)),a._reconstructActiveFormattingElements(),a._insertElement(s,NS.HTML),a.activeFormattingElements.pushElement(a.openElements.current,s)}function bStartTagInBody(a,s){a._reconstructActiveFormattingElements(),a._insertElement(s,NS.HTML),a.activeFormattingElements.pushElement(a.openElements.current,s)}function nobrStartTagInBody(a,s){a._reconstructActiveFormattingElements(),a.openElements.hasInScope(TAG_ID.NOBR)&&(callAdoptionAgency(a,s),a._reconstructActiveFormattingElements()),a._insertElement(s,NS.HTML),a.activeFormattingElements.pushElement(a.openElements.current,s)}function appletStartTagInBody(a,s){a._reconstructActiveFormattingElements(),a._insertElement(s,NS.HTML),a.activeFormattingElements.insertMarker(),a.framesetOk=!1}function tableStartTagInBody(a,s){a.treeAdapter.getDocumentMode(a.document)!==DOCUMENT_MODE.QUIRKS&&a.openElements.hasInButtonScope(TAG_ID.P)&&a._closePElement(),a._insertElement(s,NS.HTML),a.framesetOk=!1,a.insertionMode=InsertionMode.IN_TABLE}function areaStartTagInBody(a,s){a._reconstructActiveFormattingElements(),a._appendElement(s,NS.HTML),a.framesetOk=!1,s.ackSelfClosing=!0}function isHiddenInput(a){const s=getTokenAttr(a,ATTRS.TYPE);return s!=null&&s.toLowerCase()===HIDDEN_INPUT_TYPE}function inputStartTagInBody(a,s){a._reconstructActiveFormattingElements(),a._appendElement(s,NS.HTML),isHiddenInput(s)||(a.framesetOk=!1),s.ackSelfClosing=!0}function paramStartTagInBody(a,s){a._appendElement(s,NS.HTML),s.ackSelfClosing=!0}function hrStartTagInBody(a,s){a.openElements.hasInButtonScope(TAG_ID.P)&&a._closePElement(),a._appendElement(s,NS.HTML),a.framesetOk=!1,s.ackSelfClosing=!0}function imageStartTagInBody(a,s){s.tagName=TAG_NAMES.IMG,s.tagID=TAG_ID.IMG,areaStartTagInBody(a,s)}function textareaStartTagInBody(a,s){a._insertElement(s,NS.HTML),a.skipNextNewLine=!0,a.tokenizer.state=TokenizerMode.RCDATA,a.originalInsertionMode=a.insertionMode,a.framesetOk=!1,a.insertionMode=InsertionMode.TEXT}function xmpStartTagInBody(a,s){a.openElements.hasInButtonScope(TAG_ID.P)&&a._closePElement(),a._reconstructActiveFormattingElements(),a.framesetOk=!1,a._switchToTextParsing(s,TokenizerMode.RAWTEXT)}function iframeStartTagInBody(a,s){a.framesetOk=!1,a._switchToTextParsing(s,TokenizerMode.RAWTEXT)}function noembedStartTagInBody(a,s){a._switchToTextParsing(s,TokenizerMode.RAWTEXT)}function selectStartTagInBody(a,s){a._reconstructActiveFormattingElements(),a._insertElement(s,NS.HTML),a.framesetOk=!1,a.insertionMode=a.insertionMode===InsertionMode.IN_TABLE||a.insertionMode===InsertionMode.IN_CAPTION||a.insertionMode===InsertionMode.IN_TABLE_BODY||a.insertionMode===InsertionMode.IN_ROW||a.insertionMode===InsertionMode.IN_CELL?InsertionMode.IN_SELECT_IN_TABLE:InsertionMode.IN_SELECT}function optgroupStartTagInBody(a,s){a.openElements.currentTagId===TAG_ID.OPTION&&a.openElements.pop(),a._reconstructActiveFormattingElements(),a._insertElement(s,NS.HTML)}function rbStartTagInBody(a,s){a.openElements.hasInScope(TAG_ID.RUBY)&&a.openElements.generateImpliedEndTags(),a._insertElement(s,NS.HTML)}function rtStartTagInBody(a,s){a.openElements.hasInScope(TAG_ID.RUBY)&&a.openElements.generateImpliedEndTagsWithExclusion(TAG_ID.RTC),a._insertElement(s,NS.HTML)}function mathStartTagInBody(a,s){a._reconstructActiveFormattingElements(),adjustTokenMathMLAttrs(s),adjustTokenXMLAttrs(s),s.selfClosing?a._appendElement(s,NS.MATHML):a._insertElement(s,NS.MATHML),s.ackSelfClosing=!0}function svgStartTagInBody(a,s){a._reconstructActiveFormattingElements(),adjustTokenSVGAttrs(s),adjustTokenXMLAttrs(s),s.selfClosing?a._appendElement(s,NS.SVG):a._insertElement(s,NS.SVG),s.ackSelfClosing=!0}function genericStartTagInBody(a,s){a._reconstructActiveFormattingElements(),a._insertElement(s,NS.HTML)}function startTagInBody(a,s){switch(s.tagID){case TAG_ID.I:case TAG_ID.S:case TAG_ID.B:case TAG_ID.U:case TAG_ID.EM:case TAG_ID.TT:case TAG_ID.BIG:case TAG_ID.CODE:case TAG_ID.FONT:case TAG_ID.SMALL:case TAG_ID.STRIKE:case TAG_ID.STRONG:{bStartTagInBody(a,s);break}case TAG_ID.A:{aStartTagInBody(a,s);break}case TAG_ID.H1:case TAG_ID.H2:case TAG_ID.H3:case TAG_ID.H4:case TAG_ID.H5:case TAG_ID.H6:{numberedHeaderStartTagInBody(a,s);break}case TAG_ID.P:case TAG_ID.DL:case TAG_ID.OL:case TAG_ID.UL:case TAG_ID.DIV:case TAG_ID.DIR:case TAG_ID.NAV:case TAG_ID.MAIN:case TAG_ID.MENU:case TAG_ID.ASIDE:case TAG_ID.CENTER:case TAG_ID.FIGURE:case TAG_ID.FOOTER:case TAG_ID.HEADER:case TAG_ID.HGROUP:case TAG_ID.DIALOG:case TAG_ID.DETAILS:case TAG_ID.ADDRESS:case TAG_ID.ARTICLE:case TAG_ID.SECTION:case TAG_ID.SUMMARY:case TAG_ID.FIELDSET:case TAG_ID.BLOCKQUOTE:case TAG_ID.FIGCAPTION:{addressStartTagInBody(a,s);break}case TAG_ID.LI:case TAG_ID.DD:case TAG_ID.DT:{listItemStartTagInBody(a,s);break}case TAG_ID.BR:case TAG_ID.IMG:case TAG_ID.WBR:case TAG_ID.AREA:case TAG_ID.EMBED:case TAG_ID.KEYGEN:{areaStartTagInBody(a,s);break}case TAG_ID.HR:{hrStartTagInBody(a,s);break}case TAG_ID.RB:case TAG_ID.RTC:{rbStartTagInBody(a,s);break}case TAG_ID.RT:case TAG_ID.RP:{rtStartTagInBody(a,s);break}case TAG_ID.PRE:case TAG_ID.LISTING:{preStartTagInBody(a,s);break}case TAG_ID.XMP:{xmpStartTagInBody(a,s);break}case TAG_ID.SVG:{svgStartTagInBody(a,s);break}case TAG_ID.HTML:{htmlStartTagInBody(a,s);break}case TAG_ID.BASE:case TAG_ID.LINK:case TAG_ID.META:case TAG_ID.STYLE:case TAG_ID.TITLE:case TAG_ID.SCRIPT:case TAG_ID.BGSOUND:case TAG_ID.BASEFONT:case TAG_ID.TEMPLATE:{startTagInHead(a,s);break}case TAG_ID.BODY:{bodyStartTagInBody(a,s);break}case TAG_ID.FORM:{formStartTagInBody(a,s);break}case TAG_ID.NOBR:{nobrStartTagInBody(a,s);break}case TAG_ID.MATH:{mathStartTagInBody(a,s);break}case TAG_ID.TABLE:{tableStartTagInBody(a,s);break}case TAG_ID.INPUT:{inputStartTagInBody(a,s);break}case TAG_ID.PARAM:case TAG_ID.TRACK:case TAG_ID.SOURCE:{paramStartTagInBody(a,s);break}case TAG_ID.IMAGE:{imageStartTagInBody(a,s);break}case TAG_ID.BUTTON:{buttonStartTagInBody(a,s);break}case TAG_ID.APPLET:case TAG_ID.OBJECT:case TAG_ID.MARQUEE:{appletStartTagInBody(a,s);break}case TAG_ID.IFRAME:{iframeStartTagInBody(a,s);break}case TAG_ID.SELECT:{selectStartTagInBody(a,s);break}case TAG_ID.OPTION:case TAG_ID.OPTGROUP:{optgroupStartTagInBody(a,s);break}case TAG_ID.NOEMBED:{noembedStartTagInBody(a,s);break}case TAG_ID.FRAMESET:{framesetStartTagInBody(a,s);break}case TAG_ID.TEXTAREA:{textareaStartTagInBody(a,s);break}case TAG_ID.NOSCRIPT:{a.options.scriptingEnabled?noembedStartTagInBody(a,s):genericStartTagInBody(a,s);break}case TAG_ID.PLAINTEXT:{plaintextStartTagInBody(a,s);break}case TAG_ID.COL:case TAG_ID.TH:case TAG_ID.TD:case TAG_ID.TR:case TAG_ID.HEAD:case TAG_ID.FRAME:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:case TAG_ID.CAPTION:case TAG_ID.COLGROUP:break;default:genericStartTagInBody(a,s)}}function bodyEndTagInBody(a,s){if(a.openElements.hasInScope(TAG_ID.BODY)&&(a.insertionMode=InsertionMode.AFTER_BODY,a.options.sourceCodeLocationInfo)){const c=a.openElements.tryPeekProperlyNestedBodyElement();c&&a._setEndLocation(c,s)}}function htmlEndTagInBody(a,s){a.openElements.hasInScope(TAG_ID.BODY)&&(a.insertionMode=InsertionMode.AFTER_BODY,endTagAfterBody(a,s))}function addressEndTagInBody(a,s){const c=s.tagID;a.openElements.hasInScope(c)&&(a.openElements.generateImpliedEndTags(),a.openElements.popUntilTagNamePopped(c))}function formEndTagInBody(a){const s=a.openElements.tmplCount>0,{formElement:c}=a;s||(a.formElement=null),(c||s)&&a.openElements.hasInScope(TAG_ID.FORM)&&(a.openElements.generateImpliedEndTags(),s?a.openElements.popUntilTagNamePopped(TAG_ID.FORM):c&&a.openElements.remove(c))}function pEndTagInBody(a){a.openElements.hasInButtonScope(TAG_ID.P)||a._insertFakeElement(TAG_NAMES.P,TAG_ID.P),a._closePElement()}function liEndTagInBody(a){a.openElements.hasInListItemScope(TAG_ID.LI)&&(a.openElements.generateImpliedEndTagsWithExclusion(TAG_ID.LI),a.openElements.popUntilTagNamePopped(TAG_ID.LI))}function ddEndTagInBody(a,s){const c=s.tagID;a.openElements.hasInScope(c)&&(a.openElements.generateImpliedEndTagsWithExclusion(c),a.openElements.popUntilTagNamePopped(c))}function numberedHeaderEndTagInBody(a){a.openElements.hasNumberedHeaderInScope()&&(a.openElements.generateImpliedEndTags(),a.openElements.popUntilNumberedHeaderPopped())}function appletEndTagInBody(a,s){const c=s.tagID;a.openElements.hasInScope(c)&&(a.openElements.generateImpliedEndTags(),a.openElements.popUntilTagNamePopped(c),a.activeFormattingElements.clearToLastMarker())}function brEndTagInBody(a){a._reconstructActiveFormattingElements(),a._insertFakeElement(TAG_NAMES.BR,TAG_ID.BR),a.openElements.pop(),a.framesetOk=!1}function genericEndTagInBody(a,s){const c=s.tagName,u=s.tagID;for(let d=a.openElements.stackTop;d>0;d--){const h=a.openElements.items[d],p=a.openElements.tagIDs[d];if(u===p&&(u!==TAG_ID.UNKNOWN||a.treeAdapter.getTagName(h)===c)){a.openElements.generateImpliedEndTagsWithExclusion(u),a.openElements.stackTop>=d&&a.openElements.shortenToLength(d);break}if(a._isSpecialElement(h,p))break}}function endTagInBody(a,s){switch(s.tagID){case TAG_ID.A:case TAG_ID.B:case TAG_ID.I:case TAG_ID.S:case TAG_ID.U:case TAG_ID.EM:case TAG_ID.TT:case TAG_ID.BIG:case TAG_ID.CODE:case TAG_ID.FONT:case TAG_ID.NOBR:case TAG_ID.SMALL:case TAG_ID.STRIKE:case TAG_ID.STRONG:{callAdoptionAgency(a,s);break}case TAG_ID.P:{pEndTagInBody(a);break}case TAG_ID.DL:case TAG_ID.UL:case TAG_ID.OL:case TAG_ID.DIR:case TAG_ID.DIV:case TAG_ID.NAV:case TAG_ID.PRE:case TAG_ID.MAIN:case TAG_ID.MENU:case TAG_ID.ASIDE:case TAG_ID.BUTTON:case TAG_ID.CENTER:case TAG_ID.FIGURE:case TAG_ID.FOOTER:case TAG_ID.HEADER:case TAG_ID.HGROUP:case TAG_ID.DIALOG:case TAG_ID.ADDRESS:case TAG_ID.ARTICLE:case TAG_ID.DETAILS:case TAG_ID.SECTION:case TAG_ID.SUMMARY:case TAG_ID.LISTING:case TAG_ID.FIELDSET:case TAG_ID.BLOCKQUOTE:case TAG_ID.FIGCAPTION:{addressEndTagInBody(a,s);break}case TAG_ID.LI:{liEndTagInBody(a);break}case TAG_ID.DD:case TAG_ID.DT:{ddEndTagInBody(a,s);break}case TAG_ID.H1:case TAG_ID.H2:case TAG_ID.H3:case TAG_ID.H4:case TAG_ID.H5:case TAG_ID.H6:{numberedHeaderEndTagInBody(a);break}case TAG_ID.BR:{brEndTagInBody(a);break}case TAG_ID.BODY:{bodyEndTagInBody(a,s);break}case TAG_ID.HTML:{htmlEndTagInBody(a,s);break}case TAG_ID.FORM:{formEndTagInBody(a);break}case TAG_ID.APPLET:case TAG_ID.OBJECT:case TAG_ID.MARQUEE:{appletEndTagInBody(a,s);break}case TAG_ID.TEMPLATE:{templateEndTagInHead(a,s);break}default:genericEndTagInBody(a,s)}}function eofInBody(a,s){a.tmplInsertionModeStack.length>0?eofInTemplate(a,s):stopParsing(a,s)}function endTagInText(a,s){var c;s.tagID===TAG_ID.SCRIPT&&((c=a.scriptHandler)===null||c===void 0||c.call(a,a.openElements.current)),a.openElements.pop(),a.insertionMode=a.originalInsertionMode}function eofInText(a,s){a._err(s,ERR.eofInElementThatCanContainOnlyText),a.openElements.pop(),a.insertionMode=a.originalInsertionMode,a.onEof(s)}function characterInTable(a,s){if(TABLE_STRUCTURE_TAGS.has(a.openElements.currentTagId))switch(a.pendingCharacterTokens.length=0,a.hasNonWhitespacePendingCharacterToken=!1,a.originalInsertionMode=a.insertionMode,a.insertionMode=InsertionMode.IN_TABLE_TEXT,s.type){case TokenType.CHARACTER:{characterInTableText(a,s);break}case TokenType.WHITESPACE_CHARACTER:{whitespaceCharacterInTableText(a,s);break}}else tokenInTable(a,s)}function captionStartTagInTable(a,s){a.openElements.clearBackToTableContext(),a.activeFormattingElements.insertMarker(),a._insertElement(s,NS.HTML),a.insertionMode=InsertionMode.IN_CAPTION}function colgroupStartTagInTable(a,s){a.openElements.clearBackToTableContext(),a._insertElement(s,NS.HTML),a.insertionMode=InsertionMode.IN_COLUMN_GROUP}function colStartTagInTable(a,s){a.openElements.clearBackToTableContext(),a._insertFakeElement(TAG_NAMES.COLGROUP,TAG_ID.COLGROUP),a.insertionMode=InsertionMode.IN_COLUMN_GROUP,startTagInColumnGroup(a,s)}function tbodyStartTagInTable(a,s){a.openElements.clearBackToTableContext(),a._insertElement(s,NS.HTML),a.insertionMode=InsertionMode.IN_TABLE_BODY}function tdStartTagInTable(a,s){a.openElements.clearBackToTableContext(),a._insertFakeElement(TAG_NAMES.TBODY,TAG_ID.TBODY),a.insertionMode=InsertionMode.IN_TABLE_BODY,startTagInTableBody(a,s)}function tableStartTagInTable(a,s){a.openElements.hasInTableScope(TAG_ID.TABLE)&&(a.openElements.popUntilTagNamePopped(TAG_ID.TABLE),a._resetInsertionMode(),a._processStartTag(s))}function inputStartTagInTable(a,s){isHiddenInput(s)?a._appendElement(s,NS.HTML):tokenInTable(a,s),s.ackSelfClosing=!0}function formStartTagInTable(a,s){!a.formElement&&a.openElements.tmplCount===0&&(a._insertElement(s,NS.HTML),a.formElement=a.openElements.current,a.openElements.pop())}function startTagInTable(a,s){switch(s.tagID){case TAG_ID.TD:case TAG_ID.TH:case TAG_ID.TR:{tdStartTagInTable(a,s);break}case TAG_ID.STYLE:case TAG_ID.SCRIPT:case TAG_ID.TEMPLATE:{startTagInHead(a,s);break}case TAG_ID.COL:{colStartTagInTable(a,s);break}case TAG_ID.FORM:{formStartTagInTable(a,s);break}case TAG_ID.TABLE:{tableStartTagInTable(a,s);break}case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:{tbodyStartTagInTable(a,s);break}case TAG_ID.INPUT:{inputStartTagInTable(a,s);break}case TAG_ID.CAPTION:{captionStartTagInTable(a,s);break}case TAG_ID.COLGROUP:{colgroupStartTagInTable(a,s);break}default:tokenInTable(a,s)}}function endTagInTable(a,s){switch(s.tagID){case TAG_ID.TABLE:{a.openElements.hasInTableScope(TAG_ID.TABLE)&&(a.openElements.popUntilTagNamePopped(TAG_ID.TABLE),a._resetInsertionMode());break}case TAG_ID.TEMPLATE:{templateEndTagInHead(a,s);break}case TAG_ID.BODY:case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:case TAG_ID.TBODY:case TAG_ID.TD:case TAG_ID.TFOOT:case TAG_ID.TH:case TAG_ID.THEAD:case TAG_ID.TR:break;default:tokenInTable(a,s)}}function tokenInTable(a,s){const c=a.fosterParentingEnabled;a.fosterParentingEnabled=!0,modeInBody(a,s),a.fosterParentingEnabled=c}function whitespaceCharacterInTableText(a,s){a.pendingCharacterTokens.push(s)}function characterInTableText(a,s){a.pendingCharacterTokens.push(s),a.hasNonWhitespacePendingCharacterToken=!0}function tokenInTableText(a,s){let c=0;if(a.hasNonWhitespacePendingCharacterToken)for(;c<a.pendingCharacterTokens.length;c++)tokenInTable(a,a.pendingCharacterTokens[c]);else for(;c<a.pendingCharacterTokens.length;c++)a._insertCharacters(a.pendingCharacterTokens[c]);a.insertionMode=a.originalInsertionMode,a._processToken(s)}const TABLE_VOID_ELEMENTS=new Set([TAG_ID.CAPTION,TAG_ID.COL,TAG_ID.COLGROUP,TAG_ID.TBODY,TAG_ID.TD,TAG_ID.TFOOT,TAG_ID.TH,TAG_ID.THEAD,TAG_ID.TR]);function startTagInCaption(a,s){const c=s.tagID;TABLE_VOID_ELEMENTS.has(c)?a.openElements.hasInTableScope(TAG_ID.CAPTION)&&(a.openElements.generateImpliedEndTags(),a.openElements.popUntilTagNamePopped(TAG_ID.CAPTION),a.activeFormattingElements.clearToLastMarker(),a.insertionMode=InsertionMode.IN_TABLE,startTagInTable(a,s)):startTagInBody(a,s)}function endTagInCaption(a,s){const c=s.tagID;switch(c){case TAG_ID.CAPTION:case TAG_ID.TABLE:{a.openElements.hasInTableScope(TAG_ID.CAPTION)&&(a.openElements.generateImpliedEndTags(),a.openElements.popUntilTagNamePopped(TAG_ID.CAPTION),a.activeFormattingElements.clearToLastMarker(),a.insertionMode=InsertionMode.IN_TABLE,c===TAG_ID.TABLE&&endTagInTable(a,s));break}case TAG_ID.BODY:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:case TAG_ID.TBODY:case TAG_ID.TD:case TAG_ID.TFOOT:case TAG_ID.TH:case TAG_ID.THEAD:case TAG_ID.TR:break;default:endTagInBody(a,s)}}function startTagInColumnGroup(a,s){switch(s.tagID){case TAG_ID.HTML:{startTagInBody(a,s);break}case TAG_ID.COL:{a._appendElement(s,NS.HTML),s.ackSelfClosing=!0;break}case TAG_ID.TEMPLATE:{startTagInHead(a,s);break}default:tokenInColumnGroup(a,s)}}function endTagInColumnGroup(a,s){switch(s.tagID){case TAG_ID.COLGROUP:{a.openElements.currentTagId===TAG_ID.COLGROUP&&(a.openElements.pop(),a.insertionMode=InsertionMode.IN_TABLE);break}case TAG_ID.TEMPLATE:{templateEndTagInHead(a,s);break}case TAG_ID.COL:break;default:tokenInColumnGroup(a,s)}}function tokenInColumnGroup(a,s){a.openElements.currentTagId===TAG_ID.COLGROUP&&(a.openElements.pop(),a.insertionMode=InsertionMode.IN_TABLE,a._processToken(s))}function startTagInTableBody(a,s){switch(s.tagID){case TAG_ID.TR:{a.openElements.clearBackToTableBodyContext(),a._insertElement(s,NS.HTML),a.insertionMode=InsertionMode.IN_ROW;break}case TAG_ID.TH:case TAG_ID.TD:{a.openElements.clearBackToTableBodyContext(),a._insertFakeElement(TAG_NAMES.TR,TAG_ID.TR),a.insertionMode=InsertionMode.IN_ROW,startTagInRow(a,s);break}case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:{a.openElements.hasTableBodyContextInTableScope()&&(a.openElements.clearBackToTableBodyContext(),a.openElements.pop(),a.insertionMode=InsertionMode.IN_TABLE,startTagInTable(a,s));break}default:startTagInTable(a,s)}}function endTagInTableBody(a,s){const c=s.tagID;switch(s.tagID){case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:{a.openElements.hasInTableScope(c)&&(a.openElements.clearBackToTableBodyContext(),a.openElements.pop(),a.insertionMode=InsertionMode.IN_TABLE);break}case TAG_ID.TABLE:{a.openElements.hasTableBodyContextInTableScope()&&(a.openElements.clearBackToTableBodyContext(),a.openElements.pop(),a.insertionMode=InsertionMode.IN_TABLE,endTagInTable(a,s));break}case TAG_ID.BODY:case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:case TAG_ID.TD:case TAG_ID.TH:case TAG_ID.TR:break;default:endTagInTable(a,s)}}function startTagInRow(a,s){switch(s.tagID){case TAG_ID.TH:case TAG_ID.TD:{a.openElements.clearBackToTableRowContext(),a._insertElement(s,NS.HTML),a.insertionMode=InsertionMode.IN_CELL,a.activeFormattingElements.insertMarker();break}case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:case TAG_ID.TR:{a.openElements.hasInTableScope(TAG_ID.TR)&&(a.openElements.clearBackToTableRowContext(),a.openElements.pop(),a.insertionMode=InsertionMode.IN_TABLE_BODY,startTagInTableBody(a,s));break}default:startTagInTable(a,s)}}function endTagInRow(a,s){switch(s.tagID){case TAG_ID.TR:{a.openElements.hasInTableScope(TAG_ID.TR)&&(a.openElements.clearBackToTableRowContext(),a.openElements.pop(),a.insertionMode=InsertionMode.IN_TABLE_BODY);break}case TAG_ID.TABLE:{a.openElements.hasInTableScope(TAG_ID.TR)&&(a.openElements.clearBackToTableRowContext(),a.openElements.pop(),a.insertionMode=InsertionMode.IN_TABLE_BODY,endTagInTableBody(a,s));break}case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:{(a.openElements.hasInTableScope(s.tagID)||a.openElements.hasInTableScope(TAG_ID.TR))&&(a.openElements.clearBackToTableRowContext(),a.openElements.pop(),a.insertionMode=InsertionMode.IN_TABLE_BODY,endTagInTableBody(a,s));break}case TAG_ID.BODY:case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:case TAG_ID.TD:case TAG_ID.TH:break;default:endTagInTable(a,s)}}function startTagInCell(a,s){const c=s.tagID;TABLE_VOID_ELEMENTS.has(c)?(a.openElements.hasInTableScope(TAG_ID.TD)||a.openElements.hasInTableScope(TAG_ID.TH))&&(a._closeTableCell(),startTagInRow(a,s)):startTagInBody(a,s)}function endTagInCell(a,s){const c=s.tagID;switch(c){case TAG_ID.TD:case TAG_ID.TH:{a.openElements.hasInTableScope(c)&&(a.openElements.generateImpliedEndTags(),a.openElements.popUntilTagNamePopped(c),a.activeFormattingElements.clearToLastMarker(),a.insertionMode=InsertionMode.IN_ROW);break}case TAG_ID.TABLE:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:case TAG_ID.TR:{a.openElements.hasInTableScope(c)&&(a._closeTableCell(),endTagInRow(a,s));break}case TAG_ID.BODY:case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:break;default:endTagInBody(a,s)}}function startTagInSelect(a,s){switch(s.tagID){case TAG_ID.HTML:{startTagInBody(a,s);break}case TAG_ID.OPTION:{a.openElements.currentTagId===TAG_ID.OPTION&&a.openElements.pop(),a._insertElement(s,NS.HTML);break}case TAG_ID.OPTGROUP:{a.openElements.currentTagId===TAG_ID.OPTION&&a.openElements.pop(),a.openElements.currentTagId===TAG_ID.OPTGROUP&&a.openElements.pop(),a._insertElement(s,NS.HTML);break}case TAG_ID.INPUT:case TAG_ID.KEYGEN:case TAG_ID.TEXTAREA:case TAG_ID.SELECT:{a.openElements.hasInSelectScope(TAG_ID.SELECT)&&(a.openElements.popUntilTagNamePopped(TAG_ID.SELECT),a._resetInsertionMode(),s.tagID!==TAG_ID.SELECT&&a._processStartTag(s));break}case TAG_ID.SCRIPT:case TAG_ID.TEMPLATE:{startTagInHead(a,s);break}}}function endTagInSelect(a,s){switch(s.tagID){case TAG_ID.OPTGROUP:{a.openElements.stackTop>0&&a.openElements.currentTagId===TAG_ID.OPTION&&a.openElements.tagIDs[a.openElements.stackTop-1]===TAG_ID.OPTGROUP&&a.openElements.pop(),a.openElements.currentTagId===TAG_ID.OPTGROUP&&a.openElements.pop();break}case TAG_ID.OPTION:{a.openElements.currentTagId===TAG_ID.OPTION&&a.openElements.pop();break}case TAG_ID.SELECT:{a.openElements.hasInSelectScope(TAG_ID.SELECT)&&(a.openElements.popUntilTagNamePopped(TAG_ID.SELECT),a._resetInsertionMode());break}case TAG_ID.TEMPLATE:{templateEndTagInHead(a,s);break}}}function startTagInSelectInTable(a,s){const c=s.tagID;c===TAG_ID.CAPTION||c===TAG_ID.TABLE||c===TAG_ID.TBODY||c===TAG_ID.TFOOT||c===TAG_ID.THEAD||c===TAG_ID.TR||c===TAG_ID.TD||c===TAG_ID.TH?(a.openElements.popUntilTagNamePopped(TAG_ID.SELECT),a._resetInsertionMode(),a._processStartTag(s)):startTagInSelect(a,s)}function endTagInSelectInTable(a,s){const c=s.tagID;c===TAG_ID.CAPTION||c===TAG_ID.TABLE||c===TAG_ID.TBODY||c===TAG_ID.TFOOT||c===TAG_ID.THEAD||c===TAG_ID.TR||c===TAG_ID.TD||c===TAG_ID.TH?a.openElements.hasInTableScope(c)&&(a.openElements.popUntilTagNamePopped(TAG_ID.SELECT),a._resetInsertionMode(),a.onEndTag(s)):endTagInSelect(a,s)}function startTagInTemplate(a,s){switch(s.tagID){case TAG_ID.BASE:case TAG_ID.BASEFONT:case TAG_ID.BGSOUND:case TAG_ID.LINK:case TAG_ID.META:case TAG_ID.NOFRAMES:case TAG_ID.SCRIPT:case TAG_ID.STYLE:case TAG_ID.TEMPLATE:case TAG_ID.TITLE:{startTagInHead(a,s);break}case TAG_ID.CAPTION:case TAG_ID.COLGROUP:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:{a.tmplInsertionModeStack[0]=InsertionMode.IN_TABLE,a.insertionMode=InsertionMode.IN_TABLE,startTagInTable(a,s);break}case TAG_ID.COL:{a.tmplInsertionModeStack[0]=InsertionMode.IN_COLUMN_GROUP,a.insertionMode=InsertionMode.IN_COLUMN_GROUP,startTagInColumnGroup(a,s);break}case TAG_ID.TR:{a.tmplInsertionModeStack[0]=InsertionMode.IN_TABLE_BODY,a.insertionMode=InsertionMode.IN_TABLE_BODY,startTagInTableBody(a,s);break}case TAG_ID.TD:case TAG_ID.TH:{a.tmplInsertionModeStack[0]=InsertionMode.IN_ROW,a.insertionMode=InsertionMode.IN_ROW,startTagInRow(a,s);break}default:a.tmplInsertionModeStack[0]=InsertionMode.IN_BODY,a.insertionMode=InsertionMode.IN_BODY,startTagInBody(a,s)}}function endTagInTemplate(a,s){s.tagID===TAG_ID.TEMPLATE&&templateEndTagInHead(a,s)}function eofInTemplate(a,s){a.openElements.tmplCount>0?(a.openElements.popUntilTagNamePopped(TAG_ID.TEMPLATE),a.activeFormattingElements.clearToLastMarker(),a.tmplInsertionModeStack.shift(),a._resetInsertionMode(),a.onEof(s)):stopParsing(a,s)}function startTagAfterBody(a,s){s.tagID===TAG_ID.HTML?startTagInBody(a,s):tokenAfterBody(a,s)}function endTagAfterBody(a,s){var c;if(s.tagID===TAG_ID.HTML){if(a.fragmentContext||(a.insertionMode=InsertionMode.AFTER_AFTER_BODY),a.options.sourceCodeLocationInfo&&a.openElements.tagIDs[0]===TAG_ID.HTML){a._setEndLocation(a.openElements.items[0],s);const u=a.openElements.items[1];u&&!(!((c=a.treeAdapter.getNodeSourceCodeLocation(u))===null||c===void 0)&&c.endTag)&&a._setEndLocation(u,s)}}else tokenAfterBody(a,s)}function tokenAfterBody(a,s){a.insertionMode=InsertionMode.IN_BODY,modeInBody(a,s)}function startTagInFrameset(a,s){switch(s.tagID){case TAG_ID.HTML:{startTagInBody(a,s);break}case TAG_ID.FRAMESET:{a._insertElement(s,NS.HTML);break}case TAG_ID.FRAME:{a._appendElement(s,NS.HTML),s.ackSelfClosing=!0;break}case TAG_ID.NOFRAMES:{startTagInHead(a,s);break}}}function endTagInFrameset(a,s){s.tagID===TAG_ID.FRAMESET&&!a.openElements.isRootHtmlElementCurrent()&&(a.openElements.pop(),!a.fragmentContext&&a.openElements.currentTagId!==TAG_ID.FRAMESET&&(a.insertionMode=InsertionMode.AFTER_FRAMESET))}function startTagAfterFrameset(a,s){switch(s.tagID){case TAG_ID.HTML:{startTagInBody(a,s);break}case TAG_ID.NOFRAMES:{startTagInHead(a,s);break}}}function endTagAfterFrameset(a,s){s.tagID===TAG_ID.HTML&&(a.insertionMode=InsertionMode.AFTER_AFTER_FRAMESET)}function startTagAfterAfterBody(a,s){s.tagID===TAG_ID.HTML?startTagInBody(a,s):tokenAfterAfterBody(a,s)}function tokenAfterAfterBody(a,s){a.insertionMode=InsertionMode.IN_BODY,modeInBody(a,s)}function startTagAfterAfterFrameset(a,s){switch(s.tagID){case TAG_ID.HTML:{startTagInBody(a,s);break}case TAG_ID.NOFRAMES:{startTagInHead(a,s);break}}}function nullCharacterInForeignContent(a,s){s.chars=REPLACEMENT_CHARACTER,a._insertCharacters(s)}function characterInForeignContent(a,s){a._insertCharacters(s),a.framesetOk=!1}function popUntilHtmlOrIntegrationPoint(a){for(;a.treeAdapter.getNamespaceURI(a.openElements.current)!==NS.HTML&&!a._isIntegrationPoint(a.openElements.currentTagId,a.openElements.current);)a.openElements.pop()}function startTagInForeignContent(a,s){if(causesExit(s))popUntilHtmlOrIntegrationPoint(a),a._startTagOutsideForeignContent(s);else{const c=a._getAdjustedCurrentElement(),u=a.treeAdapter.getNamespaceURI(c);u===NS.MATHML?adjustTokenMathMLAttrs(s):u===NS.SVG&&(adjustTokenSVGTagName(s),adjustTokenSVGAttrs(s)),adjustTokenXMLAttrs(s),s.selfClosing?a._appendElement(s,u):a._insertElement(s,u),s.ackSelfClosing=!0}}function endTagInForeignContent(a,s){if(s.tagID===TAG_ID.P||s.tagID===TAG_ID.BR){popUntilHtmlOrIntegrationPoint(a),a._endTagOutsideForeignContent(s);return}for(let c=a.openElements.stackTop;c>0;c--){const u=a.openElements.items[c];if(a.treeAdapter.getNamespaceURI(u)===NS.HTML){a._endTagOutsideForeignContent(s);break}const d=a.treeAdapter.getTagName(u);if(d.toLowerCase()===s.tagName){s.tagName=d,a.openElements.shortenToLength(c);break}}}const VOID_ELEMENTS=new Set([TAG_NAMES.AREA,TAG_NAMES.BASE,TAG_NAMES.BASEFONT,TAG_NAMES.BGSOUND,TAG_NAMES.BR,TAG_NAMES.COL,TAG_NAMES.EMBED,TAG_NAMES.FRAME,TAG_NAMES.HR,TAG_NAMES.IMG,TAG_NAMES.INPUT,TAG_NAMES.KEYGEN,TAG_NAMES.LINK,TAG_NAMES.META,TAG_NAMES.PARAM,TAG_NAMES.SOURCE,TAG_NAMES.TRACK,TAG_NAMES.WBR]);function isVoidElement(a,s){return s.treeAdapter.isElementNode(a)&&s.treeAdapter.getNamespaceURI(a)===NS.HTML&&VOID_ELEMENTS.has(s.treeAdapter.getTagName(a))}const defaultOpts={treeAdapter:defaultTreeAdapter,scriptingEnabled:!0};function serializeOuter(a,s){const c={...defaultOpts,...s};return serializeNode(a,c)}function serializeChildNodes(a,s){let c="";const u=s.treeAdapter.isElementNode(a)&&s.treeAdapter.getTagName(a)===TAG_NAMES.TEMPLATE&&s.treeAdapter.getNamespaceURI(a)===NS.HTML?s.treeAdapter.getTemplateContent(a):a,d=s.treeAdapter.getChildNodes(u);if(d)for(const h of d)c+=serializeNode(h,s);return c}function serializeNode(a,s){return s.treeAdapter.isElementNode(a)?serializeElement(a,s):s.treeAdapter.isTextNode(a)?serializeTextNode(a,s):s.treeAdapter.isCommentNode(a)?serializeCommentNode(a,s):s.treeAdapter.isDocumentTypeNode(a)?serializeDocumentTypeNode(a,s):""}function serializeElement(a,s){const c=s.treeAdapter.getTagName(a);return`<${c}${serializeAttributes(a,s)}>${isVoidElement(a,s)?"":`${serializeChildNodes(a,s)}</${c}>`}`}function serializeAttributes(a,{treeAdapter:s}){let c="";for(const u of s.getAttrList(a)){if(c+=" ",!u.namespace)c+=u.name;else switch(u.namespace){case NS.XML:{c+=`xml:${u.name}`;break}case NS.XMLNS:{u.name!=="xmlns"&&(c+="xmlns:"),c+=u.name;break}case NS.XLINK:{c+=`xlink:${u.name}`;break}default:c+=`${u.prefix}:${u.name}`}c+=`="${escapeAttribute(u.value)}"`}return c}function serializeTextNode(a,s){const{treeAdapter:c}=s,u=c.getTextNodeContent(a),d=c.getParentNode(a),h=d&&c.isElementNode(d)&&c.getTagName(d);return h&&c.getNamespaceURI(d)===NS.HTML&&hasUnescapedText(h,s.scriptingEnabled)?u:escapeText(u)}function serializeCommentNode(a,{treeAdapter:s}){return`<!--${s.getCommentNodeContent(a)}-->`}function serializeDocumentTypeNode(a,{treeAdapter:s}){return`<!DOCTYPE ${s.getDocumentTypeNodeName(a)}>`}function parse$1(a,s){return Parser$1.parse(a,s)}function parseFragment(a,s,c){typeof a=="string"&&(c=s,s=a,a=null);const u=Parser$1.getFragmentParser(a,c);return u.tokenizer.write(s,!0),u.getFragment()}function createTextNode(a){return new Text(a)}function enquoteDoctypeId(a){const s=a.includes('"')?"'":'"';return s+a+s}function serializeDoctypeContent(a,s,c){let u="!DOCTYPE ";return a&&(u+=a),s?u+=` PUBLIC ${enquoteDoctypeId(s)}`:c&&(u+=" SYSTEM"),c&&(u+=` ${enquoteDoctypeId(c)}`),u}const adapter={isCommentNode:isComment,isElementNode:isTag,isTextNode:isText,createDocument(){const a=new Document([]);return a["x-mode"]=DOCUMENT_MODE.NO_QUIRKS,a},createDocumentFragment(){return new Document([])},createElement(a,s,c){const u=Object.create(null),d=Object.create(null),h=Object.create(null);for(let m=0;m<c.length;m++){const f=c[m].name;u[f]=c[m].value,d[f]=c[m].namespace,h[f]=c[m].prefix}const p=new Element$1(a,u,[]);return p.namespace=s,p["x-attribsNamespace"]=d,p["x-attribsPrefix"]=h,p},createCommentNode(a){return new Comment(a)},appendChild(a,s){const c=a.children[a.children.length-1];c&&(c.next=s,s.prev=c),a.children.push(s),s.parent=a},insertBefore(a,s,c){const u=a.children.indexOf(c),{prev:d}=c;d&&(d.next=s,s.prev=d),c.prev=s,s.next=c,a.children.splice(u,0,s),s.parent=a},setTemplateContent(a,s){adapter.appendChild(a,s)},getTemplateContent(a){return a.children[0]},setDocumentType(a,s,c,u){const d=serializeDoctypeContent(s,c,u);let h=a.children.find(p=>isDirective(p)&&p.name==="!doctype");h?h.data=d??null:(h=new ProcessingInstruction("!doctype",d),adapter.appendChild(a,h)),h["x-name"]=s??void 0,h["x-publicId"]=c??void 0,h["x-systemId"]=u??void 0},setDocumentMode(a,s){a["x-mode"]=s},getDocumentMode(a){return a["x-mode"]},detachNode(a){if(a.parent){const s=a.parent.children.indexOf(a),{prev:c,next:u}=a;a.prev=null,a.next=null,c&&(c.next=u),u&&(u.prev=c),a.parent.children.splice(s,1),a.parent=null}},insertText(a,s){const c=a.children[a.children.length-1];c&&isText(c)?c.data+=s:adapter.appendChild(a,createTextNode(s))},insertTextBefore(a,s,c){const u=a.children[a.children.indexOf(c)-1];u&&isText(u)?u.data+=s:adapter.insertBefore(a,createTextNode(s),c)},adoptAttributes(a,s){for(let c=0;c<s.length;c++){const u=s[c].name;typeof a.attribs[u]>"u"&&(a.attribs[u]=s[c].value,a["x-attribsNamespace"][u]=s[c].namespace,a["x-attribsPrefix"][u]=s[c].prefix)}},getFirstChild(a){return a.children[0]},getChildNodes(a){return a.children},getParentNode(a){return a.parent},getAttrList(a){return a.attributes},getTagName(a){return a.name},getNamespaceURI(a){return a.namespace},getTextNodeContent(a){return a.data},getCommentNodeContent(a){return a.data},getDocumentTypeNodeName(a){var s;return(s=a["x-name"])!==null&&s!==void 0?s:""},getDocumentTypeNodePublicId(a){var s;return(s=a["x-publicId"])!==null&&s!==void 0?s:""},getDocumentTypeNodeSystemId(a){var s;return(s=a["x-systemId"])!==null&&s!==void 0?s:""},isDocumentTypeNode(a){return isDirective(a)&&a.name==="!doctype"},setNodeSourceCodeLocation(a,s){s&&(a.startIndex=s.startOffset,a.endIndex=s.endOffset),a.sourceCodeLocation=s},getNodeSourceCodeLocation(a){return a.sourceCodeLocation},updateNodeSourceCodeLocation(a,s){s.endOffset!=null&&(a.endIndex=s.endOffset),a.sourceCodeLocation={...a.sourceCodeLocation,...s}}};function parseWithParse5(a,s,c,u){const d={scriptingEnabled:typeof s.scriptingEnabled=="boolean"?s.scriptingEnabled:!0,treeAdapter:adapter,sourceCodeLocationInfo:s.sourceCodeLocationInfo};return c?parse$1(a,d):parseFragment(u,a,d)}const renderOpts={treeAdapter:adapter};function renderWithParse5(a){const s="length"in a?a:[a];for(let u=0;u<s.length;u+=1){const d=s[u];isDocument(d)&&Array.prototype.splice.call(s,u,1,...d.children)}let c="";for(let u=0;u<s.length;u+=1){const d=s[u];c+=serializeOuter(d,renderOpts)}return c}var CharCodes;(function(a){a[a.Tab=9]="Tab",a[a.NewLine=10]="NewLine",a[a.FormFeed=12]="FormFeed",a[a.CarriageReturn=13]="CarriageReturn",a[a.Space=32]="Space",a[a.ExclamationMark=33]="ExclamationMark",a[a.Number=35]="Number",a[a.Amp=38]="Amp",a[a.SingleQuote=39]="SingleQuote",a[a.DoubleQuote=34]="DoubleQuote",a[a.Dash=45]="Dash",a[a.Slash=47]="Slash",a[a.Zero=48]="Zero",a[a.Nine=57]="Nine",a[a.Semi=59]="Semi",a[a.Lt=60]="Lt",a[a.Eq=61]="Eq",a[a.Gt=62]="Gt",a[a.Questionmark=63]="Questionmark",a[a.UpperA=65]="UpperA",a[a.LowerA=97]="LowerA",a[a.UpperF=70]="UpperF",a[a.LowerF=102]="LowerF",a[a.UpperZ=90]="UpperZ",a[a.LowerZ=122]="LowerZ",a[a.LowerX=120]="LowerX",a[a.OpeningSquareBracket=91]="OpeningSquareBracket"})(CharCodes||(CharCodes={}));var State;(function(a){a[a.Text=1]="Text",a[a.BeforeTagName=2]="BeforeTagName",a[a.InTagName=3]="InTagName",a[a.InSelfClosingTag=4]="InSelfClosingTag",a[a.BeforeClosingTagName=5]="BeforeClosingTagName",a[a.InClosingTagName=6]="InClosingTagName",a[a.AfterClosingTagName=7]="AfterClosingTagName",a[a.BeforeAttributeName=8]="BeforeAttributeName",a[a.InAttributeName=9]="InAttributeName",a[a.AfterAttributeName=10]="AfterAttributeName",a[a.BeforeAttributeValue=11]="BeforeAttributeValue",a[a.InAttributeValueDq=12]="InAttributeValueDq",a[a.InAttributeValueSq=13]="InAttributeValueSq",a[a.InAttributeValueNq=14]="InAttributeValueNq",a[a.BeforeDeclaration=15]="BeforeDeclaration",a[a.InDeclaration=16]="InDeclaration",a[a.InProcessingInstruction=17]="InProcessingInstruction",a[a.BeforeComment=18]="BeforeComment",a[a.CDATASequence=19]="CDATASequence",a[a.InSpecialComment=20]="InSpecialComment",a[a.InCommentLike=21]="InCommentLike",a[a.BeforeSpecialS=22]="BeforeSpecialS",a[a.SpecialStartSequence=23]="SpecialStartSequence",a[a.InSpecialTag=24]="InSpecialTag",a[a.BeforeEntity=25]="BeforeEntity",a[a.BeforeNumericEntity=26]="BeforeNumericEntity",a[a.InNamedEntity=27]="InNamedEntity",a[a.InNumericEntity=28]="InNumericEntity",a[a.InHexEntity=29]="InHexEntity"})(State||(State={}));function isWhitespace(a){return a===CharCodes.Space||a===CharCodes.NewLine||a===CharCodes.Tab||a===CharCodes.FormFeed||a===CharCodes.CarriageReturn}function isEndOfTagSection(a){return a===CharCodes.Slash||a===CharCodes.Gt||isWhitespace(a)}function isNumber(a){return a>=CharCodes.Zero&&a<=CharCodes.Nine}function isASCIIAlpha(a){return a>=CharCodes.LowerA&&a<=CharCodes.LowerZ||a>=CharCodes.UpperA&&a<=CharCodes.UpperZ}function isHexDigit(a){return a>=CharCodes.UpperA&&a<=CharCodes.UpperF||a>=CharCodes.LowerA&&a<=CharCodes.LowerF}var QuoteType;(function(a){a[a.NoValue=0]="NoValue",a[a.Unquoted=1]="Unquoted",a[a.Single=2]="Single",a[a.Double=3]="Double"})(QuoteType||(QuoteType={}));const Sequences={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])};class Tokenizer{constructor({xmlMode:s=!1,decodeEntities:c=!0},u){this.cbs=u,this.state=State.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=State.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=s,this.decodeEntities=c,this.entityTrie=s?xmlDecodeTree:htmlDecodeTree}reset(){this.state=State.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=State.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(s){this.offset+=this.buffer.length,this.buffer=s,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}getIndex(){return this.index}getSectionStart(){return this.sectionStart}stateText(s){s===CharCodes.Lt||!this.decodeEntities&&this.fastForwardTo(CharCodes.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=State.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&s===CharCodes.Amp&&(this.state=State.BeforeEntity)}stateSpecialStartSequence(s){const c=this.sequenceIndex===this.currentSequence.length;if(!(c?isEndOfTagSection(s):(s|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!c){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=State.InTagName,this.stateInTagName(s)}stateInSpecialTag(s){if(this.sequenceIndex===this.currentSequence.length){if(s===CharCodes.Gt||isWhitespace(s)){const c=this.index-this.currentSequence.length;if(this.sectionStart<c){const u=this.index;this.index=c,this.cbs.ontext(this.sectionStart,c),this.index=u}this.isSpecial=!1,this.sectionStart=c+2,this.stateInClosingTagName(s);return}this.sequenceIndex=0}(s|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===Sequences.TitleEnd?this.decodeEntities&&s===CharCodes.Amp&&(this.state=State.BeforeEntity):this.fastForwardTo(CharCodes.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(s===CharCodes.Lt)}stateCDATASequence(s){s===Sequences.Cdata[this.sequenceIndex]?++this.sequenceIndex===Sequences.Cdata.length&&(this.state=State.InCommentLike,this.currentSequence=Sequences.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=State.InDeclaration,this.stateInDeclaration(s))}fastForwardTo(s){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===s)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(s){s===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===Sequences.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=State.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):s!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(s){return this.xmlMode?!isEndOfTagSection(s):isASCIIAlpha(s)}startSpecial(s,c){this.isSpecial=!0,this.currentSequence=s,this.sequenceIndex=c,this.state=State.SpecialStartSequence}stateBeforeTagName(s){if(s===CharCodes.ExclamationMark)this.state=State.BeforeDeclaration,this.sectionStart=this.index+1;else if(s===CharCodes.Questionmark)this.state=State.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(s)){const c=s|32;this.sectionStart=this.index,!this.xmlMode&&c===Sequences.TitleEnd[2]?this.startSpecial(Sequences.TitleEnd,3):this.state=!this.xmlMode&&c===Sequences.ScriptEnd[2]?State.BeforeSpecialS:State.InTagName}else s===CharCodes.Slash?this.state=State.BeforeClosingTagName:(this.state=State.Text,this.stateText(s))}stateInTagName(s){isEndOfTagSection(s)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=State.BeforeAttributeName,this.stateBeforeAttributeName(s))}stateBeforeClosingTagName(s){isWhitespace(s)||(s===CharCodes.Gt?this.state=State.Text:(this.state=this.isTagStartChar(s)?State.InClosingTagName:State.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(s){(s===CharCodes.Gt||isWhitespace(s))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=State.AfterClosingTagName,this.stateAfterClosingTagName(s))}stateAfterClosingTagName(s){(s===CharCodes.Gt||this.fastForwardTo(CharCodes.Gt))&&(this.state=State.Text,this.baseState=State.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(s){s===CharCodes.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=State.InSpecialTag,this.sequenceIndex=0):this.state=State.Text,this.baseState=this.state,this.sectionStart=this.index+1):s===CharCodes.Slash?this.state=State.InSelfClosingTag:isWhitespace(s)||(this.state=State.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(s){s===CharCodes.Gt?(this.cbs.onselfclosingtag(this.index),this.state=State.Text,this.baseState=State.Text,this.sectionStart=this.index+1,this.isSpecial=!1):isWhitespace(s)||(this.state=State.BeforeAttributeName,this.stateBeforeAttributeName(s))}stateInAttributeName(s){(s===CharCodes.Eq||isEndOfTagSection(s))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=State.AfterAttributeName,this.stateAfterAttributeName(s))}stateAfterAttributeName(s){s===CharCodes.Eq?this.state=State.BeforeAttributeValue:s===CharCodes.Slash||s===CharCodes.Gt?(this.cbs.onattribend(QuoteType.NoValue,this.index),this.state=State.BeforeAttributeName,this.stateBeforeAttributeName(s)):isWhitespace(s)||(this.cbs.onattribend(QuoteType.NoValue,this.index),this.state=State.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(s){s===CharCodes.DoubleQuote?(this.state=State.InAttributeValueDq,this.sectionStart=this.index+1):s===CharCodes.SingleQuote?(this.state=State.InAttributeValueSq,this.sectionStart=this.index+1):isWhitespace(s)||(this.sectionStart=this.index,this.state=State.InAttributeValueNq,this.stateInAttributeValueNoQuotes(s))}handleInAttributeValue(s,c){s===c||!this.decodeEntities&&this.fastForwardTo(c)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(c===CharCodes.DoubleQuote?QuoteType.Double:QuoteType.Single,this.index),this.state=State.BeforeAttributeName):this.decodeEntities&&s===CharCodes.Amp&&(this.baseState=this.state,this.state=State.BeforeEntity)}stateInAttributeValueDoubleQuotes(s){this.handleInAttributeValue(s,CharCodes.DoubleQuote)}stateInAttributeValueSingleQuotes(s){this.handleInAttributeValue(s,CharCodes.SingleQuote)}stateInAttributeValueNoQuotes(s){isWhitespace(s)||s===CharCodes.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(QuoteType.Unquoted,this.index),this.state=State.BeforeAttributeName,this.stateBeforeAttributeName(s)):this.decodeEntities&&s===CharCodes.Amp&&(this.baseState=this.state,this.state=State.BeforeEntity)}stateBeforeDeclaration(s){s===CharCodes.OpeningSquareBracket?(this.state=State.CDATASequence,this.sequenceIndex=0):this.state=s===CharCodes.Dash?State.BeforeComment:State.InDeclaration}stateInDeclaration(s){(s===CharCodes.Gt||this.fastForwardTo(CharCodes.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=State.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(s){(s===CharCodes.Gt||this.fastForwardTo(CharCodes.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=State.Text,this.sectionStart=this.index+1)}stateBeforeComment(s){s===CharCodes.Dash?(this.state=State.InCommentLike,this.currentSequence=Sequences.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=State.InDeclaration}stateInSpecialComment(s){(s===CharCodes.Gt||this.fastForwardTo(CharCodes.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=State.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(s){const c=s|32;c===Sequences.ScriptEnd[3]?this.startSpecial(Sequences.ScriptEnd,4):c===Sequences.StyleEnd[3]?this.startSpecial(Sequences.StyleEnd,4):(this.state=State.InTagName,this.stateInTagName(s))}stateBeforeEntity(s){this.entityExcess=1,this.entityResult=0,s===CharCodes.Number?this.state=State.BeforeNumericEntity:s===CharCodes.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=State.InNamedEntity,this.stateInNamedEntity(s))}stateInNamedEntity(s){if(this.entityExcess+=1,this.trieIndex=determineBranch(this.entityTrie,this.trieCurrent,this.trieIndex+1,s),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];const c=this.trieCurrent&BinTrieFlags.VALUE_LENGTH;if(c){const u=(c>>14)-1;if(!this.allowLegacyEntity()&&s!==CharCodes.Semi)this.trieIndex+=u;else{const d=this.index-this.entityExcess+1;d>this.sectionStart&&this.emitPartial(this.sectionStart,d),this.entityResult=this.trieIndex,this.trieIndex+=u,this.entityExcess=0,this.sectionStart=this.index+1,u===0&&this.emitNamedEntity()}}}emitNamedEntity(){if(this.state=this.baseState,this.entityResult!==0)switch((this.entityTrie[this.entityResult]&BinTrieFlags.VALUE_LENGTH)>>14){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}stateBeforeNumericEntity(s){(s|32)===CharCodes.LowerX?(this.entityExcess++,this.state=State.InHexEntity):(this.state=State.InNumericEntity,this.stateInNumericEntity(s))}emitNumericEntity(s){const c=this.index-this.entityExcess-1;c+2+ +(this.state===State.InHexEntity)!==this.index&&(c>this.sectionStart&&this.emitPartial(this.sectionStart,c),this.sectionStart=this.index+Number(s),this.emitCodePoint(replaceCodePoint(this.entityResult))),this.state=this.baseState}stateInNumericEntity(s){s===CharCodes.Semi?this.emitNumericEntity(!0):isNumber(s)?(this.entityResult=this.entityResult*10+(s-CharCodes.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}stateInHexEntity(s){s===CharCodes.Semi?this.emitNumericEntity(!0):isNumber(s)?(this.entityResult=this.entityResult*16+(s-CharCodes.Zero),this.entityExcess++):isHexDigit(s)?(this.entityResult=this.entityResult*16+((s|32)-CharCodes.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}allowLegacyEntity(){return!this.xmlMode&&(this.baseState===State.Text||this.baseState===State.InSpecialTag)}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===State.Text||this.state===State.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===State.InAttributeValueDq||this.state===State.InAttributeValueSq||this.state===State.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const s=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case State.Text:{this.stateText(s);break}case State.SpecialStartSequence:{this.stateSpecialStartSequence(s);break}case State.InSpecialTag:{this.stateInSpecialTag(s);break}case State.CDATASequence:{this.stateCDATASequence(s);break}case State.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(s);break}case State.InAttributeName:{this.stateInAttributeName(s);break}case State.InCommentLike:{this.stateInCommentLike(s);break}case State.InSpecialComment:{this.stateInSpecialComment(s);break}case State.BeforeAttributeName:{this.stateBeforeAttributeName(s);break}case State.InTagName:{this.stateInTagName(s);break}case State.InClosingTagName:{this.stateInClosingTagName(s);break}case State.BeforeTagName:{this.stateBeforeTagName(s);break}case State.AfterAttributeName:{this.stateAfterAttributeName(s);break}case State.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(s);break}case State.BeforeAttributeValue:{this.stateBeforeAttributeValue(s);break}case State.BeforeClosingTagName:{this.stateBeforeClosingTagName(s);break}case State.AfterClosingTagName:{this.stateAfterClosingTagName(s);break}case State.BeforeSpecialS:{this.stateBeforeSpecialS(s);break}case State.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(s);break}case State.InSelfClosingTag:{this.stateInSelfClosingTag(s);break}case State.InDeclaration:{this.stateInDeclaration(s);break}case State.BeforeDeclaration:{this.stateBeforeDeclaration(s);break}case State.BeforeComment:{this.stateBeforeComment(s);break}case State.InProcessingInstruction:{this.stateInProcessingInstruction(s);break}case State.InNamedEntity:{this.stateInNamedEntity(s);break}case State.BeforeEntity:{this.stateBeforeEntity(s);break}case State.InHexEntity:{this.stateInHexEntity(s);break}case State.InNumericEntity:{this.stateInNumericEntity(s);break}default:this.stateBeforeNumericEntity(s)}this.index++}this.cleanup()}finish(){this.state===State.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const s=this.buffer.length+this.offset;this.state===State.InCommentLike?this.currentSequence===Sequences.CdataEnd?this.cbs.oncdata(this.sectionStart,s,0):this.cbs.oncomment(this.sectionStart,s,0):this.state===State.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===State.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===State.InTagName||this.state===State.BeforeAttributeName||this.state===State.BeforeAttributeValue||this.state===State.AfterAttributeName||this.state===State.InAttributeName||this.state===State.InAttributeValueSq||this.state===State.InAttributeValueDq||this.state===State.InAttributeValueNq||this.state===State.InClosingTagName||this.cbs.ontext(this.sectionStart,s)}emitPartial(s,c){this.baseState!==State.Text&&this.baseState!==State.InSpecialTag?this.cbs.onattribdata(s,c):this.cbs.ontext(s,c)}emitCodePoint(s){this.baseState!==State.Text&&this.baseState!==State.InSpecialTag?this.cbs.onattribentity(s):this.cbs.ontextentity(s)}}const formTags=new Set(["input","option","optgroup","select","button","datalist","textarea"]),pTag=new Set(["p"]),tableSectionTags=new Set(["thead","tbody"]),ddtTags=new Set(["dd","dt"]),rtpTags=new Set(["rt","rp"]),openImpliesClose=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",pTag],["h1",pTag],["h2",pTag],["h3",pTag],["h4",pTag],["h5",pTag],["h6",pTag],["select",formTags],["input",formTags],["output",formTags],["button",formTags],["datalist",formTags],["textarea",formTags],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",ddtTags],["dt",ddtTags],["address",pTag],["article",pTag],["aside",pTag],["blockquote",pTag],["details",pTag],["div",pTag],["dl",pTag],["fieldset",pTag],["figcaption",pTag],["figure",pTag],["footer",pTag],["form",pTag],["header",pTag],["hr",pTag],["main",pTag],["nav",pTag],["ol",pTag],["pre",pTag],["section",pTag],["table",pTag],["ul",pTag],["rt",rtpTags],["rp",rtpTags],["tbody",tableSectionTags],["tfoot",tableSectionTags]]),voidElements=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),foreignContextElements=new Set(["math","svg"]),htmlIntegrationElements=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),reNameEnd=/\s|\//;class Parser{constructor(s,c={}){var u,d,h,p,m;this.options=c,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=s??{},this.lowerCaseTagNames=(u=c.lowerCaseTags)!==null&&u!==void 0?u:!c.xmlMode,this.lowerCaseAttributeNames=(d=c.lowerCaseAttributeNames)!==null&&d!==void 0?d:!c.xmlMode,this.tokenizer=new((h=c.Tokenizer)!==null&&h!==void 0?h:Tokenizer)(this.options,this),(m=(p=this.cbs).onparserinit)===null||m===void 0||m.call(p,this)}ontext(s,c){var u,d;const h=this.getSlice(s,c);this.endIndex=c-1,(d=(u=this.cbs).ontext)===null||d===void 0||d.call(u,h),this.startIndex=c}ontextentity(s){var c,u;const d=this.tokenizer.getSectionStart();this.endIndex=d-1,(u=(c=this.cbs).ontext)===null||u===void 0||u.call(c,fromCodePoint(s)),this.startIndex=d}isVoidElement(s){return!this.options.xmlMode&&voidElements.has(s)}onopentagname(s,c){this.endIndex=c;let u=this.getSlice(s,c);this.lowerCaseTagNames&&(u=u.toLowerCase()),this.emitOpenTag(u)}emitOpenTag(s){var c,u,d,h;this.openTagStart=this.startIndex,this.tagname=s;const p=!this.options.xmlMode&&openImpliesClose.get(s);if(p)for(;this.stack.length>0&&p.has(this.stack[this.stack.length-1]);){const m=this.stack.pop();(u=(c=this.cbs).onclosetag)===null||u===void 0||u.call(c,m,!0)}this.isVoidElement(s)||(this.stack.push(s),foreignContextElements.has(s)?this.foreignContext.push(!0):htmlIntegrationElements.has(s)&&this.foreignContext.push(!1)),(h=(d=this.cbs).onopentagname)===null||h===void 0||h.call(d,s),this.cbs.onopentag&&(this.attribs={})}endOpenTag(s){var c,u;this.startIndex=this.openTagStart,this.attribs&&((u=(c=this.cbs).onopentag)===null||u===void 0||u.call(c,this.tagname,this.attribs,s),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(s){this.endIndex=s,this.endOpenTag(!1),this.startIndex=s+1}onclosetag(s,c){var u,d,h,p,m,f;this.endIndex=c;let _=this.getSlice(s,c);if(this.lowerCaseTagNames&&(_=_.toLowerCase()),(foreignContextElements.has(_)||htmlIntegrationElements.has(_))&&this.foreignContext.pop(),this.isVoidElement(_))!this.options.xmlMode&&_==="br"&&((d=(u=this.cbs).onopentagname)===null||d===void 0||d.call(u,"br"),(p=(h=this.cbs).onopentag)===null||p===void 0||p.call(h,"br",{},!0),(f=(m=this.cbs).onclosetag)===null||f===void 0||f.call(m,"br",!1));else{const y=this.stack.lastIndexOf(_);if(y!==-1)if(this.cbs.onclosetag){let E=this.stack.length-y;for(;E--;)this.cbs.onclosetag(this.stack.pop(),E!==0)}else this.stack.length=y;else!this.options.xmlMode&&_==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=c+1}onselfclosingtag(s){this.endIndex=s,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=s+1):this.onopentagend(s)}closeCurrentTag(s){var c,u;const d=this.tagname;this.endOpenTag(s),this.stack[this.stack.length-1]===d&&((u=(c=this.cbs).onclosetag)===null||u===void 0||u.call(c,d,!s),this.stack.pop())}onattribname(s,c){this.startIndex=s;const u=this.getSlice(s,c);this.attribname=this.lowerCaseAttributeNames?u.toLowerCase():u}onattribdata(s,c){this.attribvalue+=this.getSlice(s,c)}onattribentity(s){this.attribvalue+=fromCodePoint(s)}onattribend(s,c){var u,d;this.endIndex=c,(d=(u=this.cbs).onattribute)===null||d===void 0||d.call(u,this.attribname,this.attribvalue,s===QuoteType.Double?'"':s===QuoteType.Single?"'":s===QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(s){const c=s.search(reNameEnd);let u=c<0?s:s.substr(0,c);return this.lowerCaseTagNames&&(u=u.toLowerCase()),u}ondeclaration(s,c){this.endIndex=c;const u=this.getSlice(s,c);if(this.cbs.onprocessinginstruction){const d=this.getInstructionName(u);this.cbs.onprocessinginstruction(`!${d}`,`!${u}`)}this.startIndex=c+1}onprocessinginstruction(s,c){this.endIndex=c;const u=this.getSlice(s,c);if(this.cbs.onprocessinginstruction){const d=this.getInstructionName(u);this.cbs.onprocessinginstruction(`?${d}`,`?${u}`)}this.startIndex=c+1}oncomment(s,c,u){var d,h,p,m;this.endIndex=c,(h=(d=this.cbs).oncomment)===null||h===void 0||h.call(d,this.getSlice(s,c-u)),(m=(p=this.cbs).oncommentend)===null||m===void 0||m.call(p),this.startIndex=c+1}oncdata(s,c,u){var d,h,p,m,f,_,y,E,b,T;this.endIndex=c;const A=this.getSlice(s,c-u);this.options.xmlMode||this.options.recognizeCDATA?((h=(d=this.cbs).oncdatastart)===null||h===void 0||h.call(d),(m=(p=this.cbs).ontext)===null||m===void 0||m.call(p,A),(_=(f=this.cbs).oncdataend)===null||_===void 0||_.call(f)):((E=(y=this.cbs).oncomment)===null||E===void 0||E.call(y,`[CDATA[${A}]]`),(T=(b=this.cbs).oncommentend)===null||T===void 0||T.call(b)),this.startIndex=c+1}onend(){var s,c;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let u=this.stack.length;u>0;this.cbs.onclosetag(this.stack[--u],!0));}(c=(s=this.cbs).onend)===null||c===void 0||c.call(s)}reset(){var s,c,u,d;(c=(s=this.cbs).onreset)===null||c===void 0||c.call(s),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(d=(u=this.cbs).onparserinit)===null||d===void 0||d.call(u,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(s){this.reset(),this.end(s)}getSlice(s,c){for(;s-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let u=this.buffers[0].slice(s-this.bufferOffset,c-this.bufferOffset);for(;c-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),u+=this.buffers[0].slice(0,c-this.bufferOffset);return u}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(s){var c,u;if(this.ended){(u=(c=this.cbs).onerror)===null||u===void 0||u.call(c,new Error(".write() after done!"));return}this.buffers.push(s),this.tokenizer.running&&(this.tokenizer.write(s),this.writeIndex++)}end(s){var c,u;if(this.ended){(u=(c=this.cbs).onerror)===null||u===void 0||u.call(c,new Error(".end() after done!"));return}s&&this.write(s),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(s){this.write(s)}done(s){this.end(s)}}function parseDocument(a,s){const c=new DomHandler(void 0,s);return new Parser(c,s).end(a),c.root}const parse=getParse((a,s,c,u)=>s.xmlMode||s._useHtmlParser2?parseDocument(a,s):parseWithParse5(a,s,c,u)),load=getLoad(parse,(a,s)=>s.xmlMode||s._useHtmlParser2?render$1(a,s):renderWithParse5(a));load([]);var Readability$1={exports:{}};(function(a){function s(c,u){if(u&&u.documentElement)c=u,u=arguments[2];else if(!c||!c.documentElement)throw new Error("First argument to Readability constructor should be a document object.");if(u=u||{},this._doc=c,this._docJSDOMParser=this._doc.firstChild.__JSDOMParser__,this._articleTitle=null,this._articleByline=null,this._articleDir=null,this._articleSiteName=null,this._attempts=[],this._debug=!!u.debug,this._maxElemsToParse=u.maxElemsToParse||this.DEFAULT_MAX_ELEMS_TO_PARSE,this._nbTopCandidates=u.nbTopCandidates||this.DEFAULT_N_TOP_CANDIDATES,this._charThreshold=u.charThreshold||this.DEFAULT_CHAR_THRESHOLD,this._classesToPreserve=this.CLASSES_TO_PRESERVE.concat(u.classesToPreserve||[]),this._keepClasses=!!u.keepClasses,this._serializer=u.serializer||function(d){return d.innerHTML},this._disableJSONLD=!!u.disableJSONLD,this._allowedVideoRegex=u.allowedVideoRegex||this.REGEXPS.videos,this._flags=this.FLAG_STRIP_UNLIKELYS|this.FLAG_WEIGHT_CLASSES|this.FLAG_CLEAN_CONDITIONALLY,this._debug){let d=function(h){if(h.nodeType==h.TEXT_NODE)return`${h.nodeName} ("${h.textContent}")`;let p=Array.from(h.attributes||[],function(m){return`${m.name}="${m.value}"`}).join(" ");return`<${h.localName} ${p}>`};this.log=function(){if(typeof console<"u"){let p=Array.from(arguments,m=>m&&m.nodeType==this.ELEMENT_NODE?d(m):m);p.unshift("Reader: (Readability)"),console.log.apply(console,p)}else if(typeof dump<"u"){var h=Array.prototype.map.call(arguments,function(p){return p&&p.nodeName?d(p):p}).join(" ");dump("Reader: (Readability) "+h+`
`)}}}else this.log=function(){}}s.prototype={FLAG_STRIP_UNLIKELYS:1,FLAG_WEIGHT_CLASSES:2,FLAG_CLEAN_CONDITIONALLY:4,ELEMENT_NODE:1,TEXT_NODE:3,DEFAULT_MAX_ELEMS_TO_PARSE:0,DEFAULT_N_TOP_CANDIDATES:5,DEFAULT_TAGS_TO_SCORE:"section,h2,h3,h4,h5,h6,p,td,pre".toUpperCase().split(","),DEFAULT_CHAR_THRESHOLD:500,REGEXPS:{unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i,positive:/article|body|content|entry|hentry|h-entry|main|page|pagination|post|text|blog|story/i,negative:/-ad-|hidden|^hid$| hid$| hid |^hid |banner|combx|comment|com-|contact|foot|footer|footnote|gdpr|masthead|media|meta|outbrain|promo|related|scroll|share|shoutbox|sidebar|skyscraper|sponsor|shopping|tags|tool|widget/i,extraneous:/print|archive|comment|discuss|e[\-]?mail|share|reply|all|login|sign|single|utility/i,byline:/byline|author|dateline|writtenby|p-author/i,replaceFonts:/<(\/?)font[^>]*>/gi,normalize:/\s{2,}/g,videos:/\/\/(www\.)?((dailymotion|youtube|youtube-nocookie|player\.vimeo|v\.qq)\.com|(archive|upload\.wikimedia)\.org|player\.twitch\.tv)/i,shareElements:/(\b|_)(share|sharedaddy)(\b|_)/i,nextLink:/(next|weiter|continue|>([^\|]|$)|([^\|]|$))/i,prevLink:/(prev|earl|old|new|<|)/i,tokenize:/\W+/g,whitespace:/^\s*$/,hasContent:/\S$/,hashUrl:/^#.+/,srcsetUrl:/(\S+)(\s+[\d.]+[xw])?(\s*(?:,|$))/g,b64DataUrl:/^data:\s*([^\s;,]+)\s*;\s*base64\s*,/i,commas:/\u002C|\u060C|\uFE50|\uFE10|\uFE11|\u2E41|\u2E34|\u2E32|\uFF0C/g,jsonLdArticleTypes:/^Article|AdvertiserContentArticle|NewsArticle|AnalysisNewsArticle|AskPublicNewsArticle|BackgroundNewsArticle|OpinionNewsArticle|ReportageNewsArticle|ReviewNewsArticle|Report|SatiricalArticle|ScholarlyArticle|MedicalScholarlyArticle|SocialMediaPosting|BlogPosting|LiveBlogPosting|DiscussionForumPosting|TechArticle|APIReference$/},UNLIKELY_ROLES:["menu","menubar","complementary","navigation","alert","alertdialog","dialog"],DIV_TO_P_ELEMS:new Set(["BLOCKQUOTE","DL","DIV","IMG","OL","P","PRE","TABLE","UL"]),ALTER_TO_DIV_EXCEPTIONS:["DIV","ARTICLE","SECTION","P"],PRESENTATIONAL_ATTRIBUTES:["align","background","bgcolor","border","cellpadding","cellspacing","frame","hspace","rules","style","valign","vspace"],DEPRECATED_SIZE_ATTRIBUTE_ELEMS:["TABLE","TH","TD","HR","PRE"],PHRASING_ELEMS:["ABBR","AUDIO","B","BDO","BR","BUTTON","CITE","CODE","DATA","DATALIST","DFN","EM","EMBED","I","IMG","INPUT","KBD","LABEL","MARK","MATH","METER","NOSCRIPT","OBJECT","OUTPUT","PROGRESS","Q","RUBY","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRONG","SUB","SUP","TEXTAREA","TIME","VAR","WBR"],CLASSES_TO_PRESERVE:["page"],HTML_ESCAPE_MAP:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"},_postProcessContent:function(c){this._fixRelativeUris(c),this._simplifyNestedElements(c),this._keepClasses||this._cleanClasses(c)},_removeNodes:function(c,u){if(this._docJSDOMParser&&c._isLiveNodeList)throw new Error("Do not pass live node lists to _removeNodes");for(var d=c.length-1;d>=0;d--){var h=c[d],p=h.parentNode;p&&(!u||u.call(this,h,d,c))&&p.removeChild(h)}},_replaceNodeTags:function(c,u){if(this._docJSDOMParser&&c._isLiveNodeList)throw new Error("Do not pass live node lists to _replaceNodeTags");for(const d of c)this._setNodeTag(d,u)},_forEachNode:function(c,u){Array.prototype.forEach.call(c,u,this)},_findNode:function(c,u){return Array.prototype.find.call(c,u,this)},_someNode:function(c,u){return Array.prototype.some.call(c,u,this)},_everyNode:function(c,u){return Array.prototype.every.call(c,u,this)},_concatNodeLists:function(){var c=Array.prototype.slice,u=c.call(arguments),d=u.map(function(h){return c.call(h)});return Array.prototype.concat.apply([],d)},_getAllNodesWithTag:function(c,u){return c.querySelectorAll?c.querySelectorAll(u.join(",")):[].concat.apply([],u.map(function(d){var h=c.getElementsByTagName(d);return Array.isArray(h)?h:Array.from(h)}))},_cleanClasses:function(c){var u=this._classesToPreserve,d=(c.getAttribute("class")||"").split(/\s+/).filter(function(h){return u.indexOf(h)!=-1}).join(" ");for(d?c.setAttribute("class",d):c.removeAttribute("class"),c=c.firstElementChild;c;c=c.nextElementSibling)this._cleanClasses(c)},_fixRelativeUris:function(c){var u=this._doc.baseURI,d=this._doc.documentURI;function h(f){if(u==d&&f.charAt(0)=="#")return f;try{return new URL(f,u).href}catch{}return f}var p=this._getAllNodesWithTag(c,["a"]);this._forEachNode(p,function(f){var _=f.getAttribute("href");if(_)if(_.indexOf("javascript:")===0)if(f.childNodes.length===1&&f.childNodes[0].nodeType===this.TEXT_NODE){var y=this._doc.createTextNode(f.textContent);f.parentNode.replaceChild(y,f)}else{for(var E=this._doc.createElement("span");f.firstChild;)E.appendChild(f.firstChild);f.parentNode.replaceChild(E,f)}else f.setAttribute("href",h(_))});var m=this._getAllNodesWithTag(c,["img","picture","figure","video","audio","source"]);this._forEachNode(m,function(f){var _=f.getAttribute("src"),y=f.getAttribute("poster"),E=f.getAttribute("srcset");if(_&&f.setAttribute("src",h(_)),y&&f.setAttribute("poster",h(y)),E){var b=E.replace(this.REGEXPS.srcsetUrl,function(T,A,v,S){return h(A)+(v||"")+S});f.setAttribute("srcset",b)}})},_simplifyNestedElements:function(c){for(var u=c;u;){if(u.parentNode&&["DIV","SECTION"].includes(u.tagName)&&!(u.id&&u.id.startsWith("readability"))){if(this._isElementWithoutContent(u)){u=this._removeAndGetNext(u);continue}else if(this._hasSingleTagInsideElement(u,"DIV")||this._hasSingleTagInsideElement(u,"SECTION")){for(var d=u.children[0],h=0;h<u.attributes.length;h++)d.setAttribute(u.attributes[h].name,u.attributes[h].value);u.parentNode.replaceChild(d,u),u=d;continue}}u=this._getNextNode(u)}},_getArticleTitle:function(){var c=this._doc,u="",d="";try{u=d=c.title.trim(),typeof u!="string"&&(u=d=this._getInnerText(c.getElementsByTagName("title")[0]))}catch{}var h=!1;function p(b){return b.split(/\s+/).length}if(/ [\|\-\\\/>] /.test(u))h=/ [\\\/>] /.test(u),u=d.replace(/(.*)[\|\-\\\/>] .*/gi,"$1"),p(u)<3&&(u=d.replace(/[^\|\-\\\/>]*[\|\-\\\/>](.*)/gi,"$1"));else if(u.indexOf(": ")!==-1){var m=this._concatNodeLists(c.getElementsByTagName("h1"),c.getElementsByTagName("h2")),f=u.trim(),_=this._someNode(m,function(b){return b.textContent.trim()===f});_||(u=d.substring(d.lastIndexOf(":")+1),p(u)<3?u=d.substring(d.indexOf(":")+1):p(d.substr(0,d.indexOf(":")))>5&&(u=d))}else if(u.length>150||u.length<15){var y=c.getElementsByTagName("h1");y.length===1&&(u=this._getInnerText(y[0]))}u=u.trim().replace(this.REGEXPS.normalize," ");var E=p(u);return E<=4&&(!h||E!=p(d.replace(/[\|\-\\\/>]+/g,""))-1)&&(u=d),u},_prepDocument:function(){var c=this._doc;this._removeNodes(this._getAllNodesWithTag(c,["style"])),c.body&&this._replaceBrs(c.body),this._replaceNodeTags(this._getAllNodesWithTag(c,["font"]),"SPAN")},_nextNode:function(c){for(var u=c;u&&u.nodeType!=this.ELEMENT_NODE&&this.REGEXPS.whitespace.test(u.textContent);)u=u.nextSibling;return u},_replaceBrs:function(c){this._forEachNode(this._getAllNodesWithTag(c,["br"]),function(u){for(var d=u.nextSibling,h=!1;(d=this._nextNode(d))&&d.tagName=="BR";){h=!0;var p=d.nextSibling;d.parentNode.removeChild(d),d=p}if(h){var m=this._doc.createElement("p");for(u.parentNode.replaceChild(m,u),d=m.nextSibling;d;){if(d.tagName=="BR"){var f=this._nextNode(d.nextSibling);if(f&&f.tagName=="BR")break}if(!this._isPhrasingContent(d))break;var _=d.nextSibling;m.appendChild(d),d=_}for(;m.lastChild&&this._isWhitespace(m.lastChild);)m.removeChild(m.lastChild);m.parentNode.tagName==="P"&&this._setNodeTag(m.parentNode,"DIV")}})},_setNodeTag:function(c,u){if(this.log("_setNodeTag",c,u),this._docJSDOMParser)return c.localName=u.toLowerCase(),c.tagName=u.toUpperCase(),c;for(var d=c.ownerDocument.createElement(u);c.firstChild;)d.appendChild(c.firstChild);c.parentNode.replaceChild(d,c),c.readability&&(d.readability=c.readability);for(var h=0;h<c.attributes.length;h++)try{d.setAttribute(c.attributes[h].name,c.attributes[h].value)}catch{}return d},_prepArticle:function(c){this._cleanStyles(c),this._markDataTables(c),this._fixLazyImages(c),this._cleanConditionally(c,"form"),this._cleanConditionally(c,"fieldset"),this._clean(c,"object"),this._clean(c,"embed"),this._clean(c,"footer"),this._clean(c,"link"),this._clean(c,"aside");var u=this.DEFAULT_CHAR_THRESHOLD;this._forEachNode(c.children,function(d){this._cleanMatchedNodes(d,function(h,p){return this.REGEXPS.shareElements.test(p)&&h.textContent.length<u})}),this._clean(c,"iframe"),this._clean(c,"input"),this._clean(c,"textarea"),this._clean(c,"select"),this._clean(c,"button"),this._cleanHeaders(c),this._cleanConditionally(c,"table"),this._cleanConditionally(c,"ul"),this._cleanConditionally(c,"div"),this._replaceNodeTags(this._getAllNodesWithTag(c,["h1"]),"h2"),this._removeNodes(this._getAllNodesWithTag(c,["p"]),function(d){var h=d.getElementsByTagName("img").length,p=d.getElementsByTagName("embed").length,m=d.getElementsByTagName("object").length,f=d.getElementsByTagName("iframe").length,_=h+p+m+f;return _===0&&!this._getInnerText(d,!1)}),this._forEachNode(this._getAllNodesWithTag(c,["br"]),function(d){var h=this._nextNode(d.nextSibling);h&&h.tagName=="P"&&d.parentNode.removeChild(d)}),this._forEachNode(this._getAllNodesWithTag(c,["table"]),function(d){var h=this._hasSingleTagInsideElement(d,"TBODY")?d.firstElementChild:d;if(this._hasSingleTagInsideElement(h,"TR")){var p=h.firstElementChild;if(this._hasSingleTagInsideElement(p,"TD")){var m=p.firstElementChild;m=this._setNodeTag(m,this._everyNode(m.childNodes,this._isPhrasingContent)?"P":"DIV"),d.parentNode.replaceChild(m,d)}}})},_initializeNode:function(c){switch(c.readability={contentScore:0},c.tagName){case"DIV":c.readability.contentScore+=5;break;case"PRE":case"TD":case"BLOCKQUOTE":c.readability.contentScore+=3;break;case"ADDRESS":case"OL":case"UL":case"DL":case"DD":case"DT":case"LI":case"FORM":c.readability.contentScore-=3;break;case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"TH":c.readability.contentScore-=5;break}c.readability.contentScore+=this._getClassWeight(c)},_removeAndGetNext:function(c){var u=this._getNextNode(c,!0);return c.parentNode.removeChild(c),u},_getNextNode:function(c,u){if(!u&&c.firstElementChild)return c.firstElementChild;if(c.nextElementSibling)return c.nextElementSibling;do c=c.parentNode;while(c&&!c.nextElementSibling);return c&&c.nextElementSibling},_textSimilarity:function(c,u){var d=c.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean),h=u.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean);if(!d.length||!h.length)return 0;var p=h.filter(f=>!d.includes(f)),m=p.join(" ").length/h.join(" ").length;return 1-m},_checkByline:function(c,u){if(this._articleByline)return!1;if(c.getAttribute!==void 0)var d=c.getAttribute("rel"),h=c.getAttribute("itemprop");return(d==="author"||h&&h.indexOf("author")!==-1||this.REGEXPS.byline.test(u))&&this._isValidByline(c.textContent)?(this._articleByline=c.textContent.trim(),!0):!1},_getNodeAncestors:function(c,u){u=u||0;for(var d=0,h=[];c.parentNode&&(h.push(c.parentNode),!(u&&++d===u));)c=c.parentNode;return h},_grabArticle:function(c){this.log("**** grabArticle ****");var u=this._doc,d=c!==null;if(c=c||this._doc.body,!c)return this.log("No body found in document. Abort."),null;for(var h=c.innerHTML;;){this.log("Starting grabArticle loop");var p=this._flagIsActive(this.FLAG_STRIP_UNLIKELYS),m=[],f=this._doc.documentElement;let ce=!0;for(;f;){f.tagName==="HTML"&&(this._articleLang=f.getAttribute("lang"));var _=f.className+" "+f.id;if(!this._isProbablyVisible(f)){this.log("Removing hidden node - "+_),f=this._removeAndGetNext(f);continue}if(f.getAttribute("aria-modal")=="true"&&f.getAttribute("role")=="dialog"){f=this._removeAndGetNext(f);continue}if(this._checkByline(f,_)){f=this._removeAndGetNext(f);continue}if(ce&&this._headerDuplicatesTitle(f)){this.log("Removing header: ",f.textContent.trim(),this._articleTitle.trim()),ce=!1,f=this._removeAndGetNext(f);continue}if(p){if(this.REGEXPS.unlikelyCandidates.test(_)&&!this.REGEXPS.okMaybeItsACandidate.test(_)&&!this._hasAncestorTag(f,"table")&&!this._hasAncestorTag(f,"code")&&f.tagName!=="BODY"&&f.tagName!=="A"){this.log("Removing unlikely candidate - "+_),f=this._removeAndGetNext(f);continue}if(this.UNLIKELY_ROLES.includes(f.getAttribute("role"))){this.log("Removing content with role "+f.getAttribute("role")+" - "+_),f=this._removeAndGetNext(f);continue}}if((f.tagName==="DIV"||f.tagName==="SECTION"||f.tagName==="HEADER"||f.tagName==="H1"||f.tagName==="H2"||f.tagName==="H3"||f.tagName==="H4"||f.tagName==="H5"||f.tagName==="H6")&&this._isElementWithoutContent(f)){f=this._removeAndGetNext(f);continue}if(this.DEFAULT_TAGS_TO_SCORE.indexOf(f.tagName)!==-1&&m.push(f),f.tagName==="DIV"){for(var y=null,E=f.firstChild;E;){var b=E.nextSibling;if(this._isPhrasingContent(E))y!==null?y.appendChild(E):this._isWhitespace(E)||(y=u.createElement("p"),f.replaceChild(y,E),y.appendChild(E));else if(y!==null){for(;y.lastChild&&this._isWhitespace(y.lastChild);)y.removeChild(y.lastChild);y=null}E=b}if(this._hasSingleTagInsideElement(f,"P")&&this._getLinkDensity(f)<.25){var T=f.children[0];f.parentNode.replaceChild(T,f),f=T,m.push(f)}else this._hasChildBlockElement(f)||(f=this._setNodeTag(f,"P"),m.push(f))}f=this._getNextNode(f)}var A=[];this._forEachNode(m,function(ie){if(!(!ie.parentNode||typeof ie.parentNode.tagName>"u")){var ue=this._getInnerText(ie);if(!(ue.length<25)){var Ee=this._getNodeAncestors(ie,5);if(Ee.length!==0){var xe=0;xe+=1,xe+=ue.split(this.REGEXPS.commas).length,xe+=Math.min(Math.floor(ue.length/100),3),this._forEachNode(Ee,function(ve,$e){if(!(!ve.tagName||!ve.parentNode||typeof ve.parentNode.tagName>"u")){if(typeof ve.readability>"u"&&(this._initializeNode(ve),A.push(ve)),$e===0)var _e=1;else $e===1?_e=2:_e=$e*3;ve.readability.contentScore+=xe/_e}})}}}});for(var v=[],S=0,O=A.length;S<O;S+=1){var I=A[S],x=I.readability.contentScore*(1-this._getLinkDensity(I));I.readability.contentScore=x,this.log("Candidate:",I,"with score "+x);for(var P=0;P<this._nbTopCandidates;P++){var w=v[P];if(!w||x>w.readability.contentScore){v.splice(P,0,I),v.length>this._nbTopCandidates&&v.pop();break}}}var C=v[0]||null,k=!1,R;if(C===null||C.tagName==="BODY"){for(C=u.createElement("DIV"),k=!0;c.firstChild;)this.log("Moving child out:",c.firstChild),C.appendChild(c.firstChild);c.appendChild(C),this._initializeNode(C)}else if(C){for(var N=[],F=1;F<v.length;F++)v[F].readability.contentScore/C.readability.contentScore>=.75&&N.push(this._getNodeAncestors(v[F]));var L=3;if(N.length>=L)for(R=C.parentNode;R.tagName!=="BODY";){for(var X=0,V=0;V<N.length&&X<L;V++)X+=Number(N[V].includes(R));if(X>=L){C=R;break}R=R.parentNode}C.readability||this._initializeNode(C),R=C.parentNode;for(var H=C.readability.contentScore,ee=H/3;R.tagName!=="BODY";){if(!R.readability){R=R.parentNode;continue}var Q=R.readability.contentScore;if(Q<ee)break;if(Q>H){C=R;break}H=R.readability.contentScore,R=R.parentNode}for(R=C.parentNode;R.tagName!="BODY"&&R.children.length==1;)C=R,R=C.parentNode;C.readability||this._initializeNode(C)}var Z=u.createElement("DIV");d&&(Z.id="readability-content");var K=Math.max(10,C.readability.contentScore*.2);R=C.parentNode;for(var se=R.children,ne=0,le=se.length;ne<le;ne++){var he=se[ne],Y=!1;if(this.log("Looking at sibling node:",he,he.readability?"with score "+he.readability.contentScore:""),this.log("Sibling has score",he.readability?he.readability.contentScore:"Unknown"),he===C)Y=!0;else{var D=0;if(he.className===C.className&&C.className!==""&&(D+=C.readability.contentScore*.2),he.readability&&he.readability.contentScore+D>=K)Y=!0;else if(he.nodeName==="P"){var G=this._getLinkDensity(he),B=this._getInnerText(he),U=B.length;(U>80&&G<.25||U<80&&U>0&&G===0&&B.search(/\.( |$)/)!==-1)&&(Y=!0)}}Y&&(this.log("Appending node:",he),this.ALTER_TO_DIV_EXCEPTIONS.indexOf(he.nodeName)===-1&&(this.log("Altering sibling:",he,"to div."),he=this._setNodeTag(he,"DIV")),Z.appendChild(he),se=R.children,ne-=1,le-=1)}if(this._debug&&this.log("Article content pre-prep: "+Z.innerHTML),this._prepArticle(Z),this._debug&&this.log("Article content post-prep: "+Z.innerHTML),k)C.id="readability-page-1",C.className="page";else{var W=u.createElement("DIV");for(W.id="readability-page-1",W.className="page";Z.firstChild;)W.appendChild(Z.firstChild);Z.appendChild(W)}this._debug&&this.log("Article content after paging: "+Z.innerHTML);var q=!0,J=this._getInnerText(Z,!0).length;if(J<this._charThreshold)if(q=!1,c.innerHTML=h,this._flagIsActive(this.FLAG_STRIP_UNLIKELYS))this._removeFlag(this.FLAG_STRIP_UNLIKELYS),this._attempts.push({articleContent:Z,textLength:J});else if(this._flagIsActive(this.FLAG_WEIGHT_CLASSES))this._removeFlag(this.FLAG_WEIGHT_CLASSES),this._attempts.push({articleContent:Z,textLength:J});else if(this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY))this._removeFlag(this.FLAG_CLEAN_CONDITIONALLY),this._attempts.push({articleContent:Z,textLength:J});else{if(this._attempts.push({articleContent:Z,textLength:J}),this._attempts.sort(function(ie,ue){return ue.textLength-ie.textLength}),!this._attempts[0].textLength)return null;Z=this._attempts[0].articleContent,q=!0}if(q){var ae=[R,C].concat(this._getNodeAncestors(R));return this._someNode(ae,function(ie){if(!ie.tagName)return!1;var ue=ie.getAttribute("dir");return ue?(this._articleDir=ue,!0):!1}),Z}}},_isValidByline:function(c){return typeof c=="string"||c instanceof String?(c=c.trim(),c.length>0&&c.length<100):!1},_unescapeHtmlEntities:function(c){if(!c)return c;var u=this.HTML_ESCAPE_MAP;return c.replace(/&(quot|amp|apos|lt|gt);/g,function(d,h){return u[h]}).replace(/&#(?:x([0-9a-z]{1,4})|([0-9]{1,4}));/gi,function(d,h,p){var m=parseInt(h||p,h?16:10);return String.fromCharCode(m)})},_getJSONLD:function(c){var u=this._getAllNodesWithTag(c,["script"]),d;return this._forEachNode(u,function(h){if(!d&&h.getAttribute("type")==="application/ld+json")try{var p=h.textContent.replace(/^\s*<!\[CDATA\[|\]\]>\s*$/g,""),m=JSON.parse(p);if(!m["@context"]||!m["@context"].match(/^https?\:\/\/schema\.org$/)||(!m["@type"]&&Array.isArray(m["@graph"])&&(m=m["@graph"].find(function(E){return(E["@type"]||"").match(this.REGEXPS.jsonLdArticleTypes)})),!m||!m["@type"]||!m["@type"].match(this.REGEXPS.jsonLdArticleTypes)))return;if(d={},typeof m.name=="string"&&typeof m.headline=="string"&&m.name!==m.headline){var f=this._getArticleTitle(),_=this._textSimilarity(m.name,f)>.75,y=this._textSimilarity(m.headline,f)>.75;y&&!_?d.title=m.headline:d.title=m.name}else typeof m.name=="string"?d.title=m.name.trim():typeof m.headline=="string"&&(d.title=m.headline.trim());m.author&&(typeof m.author.name=="string"?d.byline=m.author.name.trim():Array.isArray(m.author)&&m.author[0]&&typeof m.author[0].name=="string"&&(d.byline=m.author.filter(function(E){return E&&typeof E.name=="string"}).map(function(E){return E.name.trim()}).join(", "))),typeof m.description=="string"&&(d.excerpt=m.description.trim()),m.publisher&&typeof m.publisher.name=="string"&&(d.siteName=m.publisher.name.trim()),typeof m.datePublished=="string"&&(d.datePublished=m.datePublished.trim());return}catch(E){this.log(E.message)}}),d||{}},_getArticleMetadata:function(c){var u={},d={},h=this._doc.getElementsByTagName("meta"),p=/\s*(article|dc|dcterm|og|twitter)\s*:\s*(author|creator|description|published_time|title|site_name)\s*/gi,m=/^\s*(?:(dc|dcterm|og|twitter|weibo:(article|webpage))\s*[\.:]\s*)?(author|creator|description|title|site_name)\s*$/i;return this._forEachNode(h,function(f){var _=f.getAttribute("name"),y=f.getAttribute("property"),E=f.getAttribute("content");if(E){var b=null,T=null;y&&(b=y.match(p),b&&(T=b[0].toLowerCase().replace(/\s/g,""),d[T]=E.trim())),!b&&_&&m.test(_)&&(T=_,E&&(T=T.toLowerCase().replace(/\s/g,"").replace(/\./g,":"),d[T]=E.trim()))}}),u.title=c.title||d["dc:title"]||d["dcterm:title"]||d["og:title"]||d["weibo:article:title"]||d["weibo:webpage:title"]||d.title||d["twitter:title"],u.title||(u.title=this._getArticleTitle()),u.byline=c.byline||d["dc:creator"]||d["dcterm:creator"]||d.author,u.excerpt=c.excerpt||d["dc:description"]||d["dcterm:description"]||d["og:description"]||d["weibo:article:description"]||d["weibo:webpage:description"]||d.description||d["twitter:description"],u.siteName=c.siteName||d["og:site_name"],u.publishedTime=c.datePublished||d["article:published_time"]||null,u.title=this._unescapeHtmlEntities(u.title),u.byline=this._unescapeHtmlEntities(u.byline),u.excerpt=this._unescapeHtmlEntities(u.excerpt),u.siteName=this._unescapeHtmlEntities(u.siteName),u.publishedTime=this._unescapeHtmlEntities(u.publishedTime),u},_isSingleImage:function(c){return c.tagName==="IMG"?!0:c.children.length!==1||c.textContent.trim()!==""?!1:this._isSingleImage(c.children[0])},_unwrapNoscriptImages:function(c){var u=Array.from(c.getElementsByTagName("img"));this._forEachNode(u,function(h){for(var p=0;p<h.attributes.length;p++){var m=h.attributes[p];switch(m.name){case"src":case"srcset":case"data-src":case"data-srcset":return}if(/\.(jpg|jpeg|png|webp)/i.test(m.value))return}h.parentNode.removeChild(h)});var d=Array.from(c.getElementsByTagName("noscript"));this._forEachNode(d,function(h){var p=c.createElement("div");if(p.innerHTML=h.innerHTML,!!this._isSingleImage(p)){var m=h.previousElementSibling;if(m&&this._isSingleImage(m)){var f=m;f.tagName!=="IMG"&&(f=m.getElementsByTagName("img")[0]);for(var _=p.getElementsByTagName("img")[0],y=0;y<f.attributes.length;y++){var E=f.attributes[y];if(E.value!==""&&(E.name==="src"||E.name==="srcset"||/\.(jpg|jpeg|png|webp)/i.test(E.value))){if(_.getAttribute(E.name)===E.value)continue;var b=E.name;_.hasAttribute(b)&&(b="data-old-"+b),_.setAttribute(b,E.value)}}h.parentNode.replaceChild(p.firstElementChild,m)}}})},_removeScripts:function(c){this._removeNodes(this._getAllNodesWithTag(c,["script","noscript"]))},_hasSingleTagInsideElement:function(c,u){return c.children.length!=1||c.children[0].tagName!==u?!1:!this._someNode(c.childNodes,function(d){return d.nodeType===this.TEXT_NODE&&this.REGEXPS.hasContent.test(d.textContent)})},_isElementWithoutContent:function(c){return c.nodeType===this.ELEMENT_NODE&&c.textContent.trim().length==0&&(c.children.length==0||c.children.length==c.getElementsByTagName("br").length+c.getElementsByTagName("hr").length)},_hasChildBlockElement:function(c){return this._someNode(c.childNodes,function(u){return this.DIV_TO_P_ELEMS.has(u.tagName)||this._hasChildBlockElement(u)})},_isPhrasingContent:function(c){return c.nodeType===this.TEXT_NODE||this.PHRASING_ELEMS.indexOf(c.tagName)!==-1||(c.tagName==="A"||c.tagName==="DEL"||c.tagName==="INS")&&this._everyNode(c.childNodes,this._isPhrasingContent)},_isWhitespace:function(c){return c.nodeType===this.TEXT_NODE&&c.textContent.trim().length===0||c.nodeType===this.ELEMENT_NODE&&c.tagName==="BR"},_getInnerText:function(c,u){u=typeof u>"u"?!0:u;var d=c.textContent.trim();return u?d.replace(this.REGEXPS.normalize," "):d},_getCharCount:function(c,u){return u=u||",",this._getInnerText(c).split(u).length-1},_cleanStyles:function(c){if(!(!c||c.tagName.toLowerCase()==="svg")){for(var u=0;u<this.PRESENTATIONAL_ATTRIBUTES.length;u++)c.removeAttribute(this.PRESENTATIONAL_ATTRIBUTES[u]);this.DEPRECATED_SIZE_ATTRIBUTE_ELEMS.indexOf(c.tagName)!==-1&&(c.removeAttribute("width"),c.removeAttribute("height"));for(var d=c.firstElementChild;d!==null;)this._cleanStyles(d),d=d.nextElementSibling}},_getLinkDensity:function(c){var u=this._getInnerText(c).length;if(u===0)return 0;var d=0;return this._forEachNode(c.getElementsByTagName("a"),function(h){var p=h.getAttribute("href"),m=p&&this.REGEXPS.hashUrl.test(p)?.3:1;d+=this._getInnerText(h).length*m}),d/u},_getClassWeight:function(c){if(!this._flagIsActive(this.FLAG_WEIGHT_CLASSES))return 0;var u=0;return typeof c.className=="string"&&c.className!==""&&(this.REGEXPS.negative.test(c.className)&&(u-=25),this.REGEXPS.positive.test(c.className)&&(u+=25)),typeof c.id=="string"&&c.id!==""&&(this.REGEXPS.negative.test(c.id)&&(u-=25),this.REGEXPS.positive.test(c.id)&&(u+=25)),u},_clean:function(c,u){var d=["object","embed","iframe"].indexOf(u)!==-1;this._removeNodes(this._getAllNodesWithTag(c,[u]),function(h){if(d){for(var p=0;p<h.attributes.length;p++)if(this._allowedVideoRegex.test(h.attributes[p].value))return!1;if(h.tagName==="object"&&this._allowedVideoRegex.test(h.innerHTML))return!1}return!0})},_hasAncestorTag:function(c,u,d,h){d=d||3,u=u.toUpperCase();for(var p=0;c.parentNode;){if(d>0&&p>d)return!1;if(c.parentNode.tagName===u&&(!h||h(c.parentNode)))return!0;c=c.parentNode,p++}return!1},_getRowAndColumnCount:function(c){for(var u=0,d=0,h=c.getElementsByTagName("tr"),p=0;p<h.length;p++){var m=h[p].getAttribute("rowspan")||0;m&&(m=parseInt(m,10)),u+=m||1;for(var f=0,_=h[p].getElementsByTagName("td"),y=0;y<_.length;y++){var E=_[y].getAttribute("colspan")||0;E&&(E=parseInt(E,10)),f+=E||1}d=Math.max(d,f)}return{rows:u,columns:d}},_markDataTables:function(c){for(var u=c.getElementsByTagName("table"),d=0;d<u.length;d++){var h=u[d],p=h.getAttribute("role");if(p=="presentation"){h._readabilityDataTable=!1;continue}var m=h.getAttribute("datatable");if(m=="0"){h._readabilityDataTable=!1;continue}var f=h.getAttribute("summary");if(f){h._readabilityDataTable=!0;continue}var _=h.getElementsByTagName("caption")[0];if(_&&_.childNodes.length>0){h._readabilityDataTable=!0;continue}var y=["col","colgroup","tfoot","thead","th"],E=function(T){return!!h.getElementsByTagName(T)[0]};if(y.some(E)){this.log("Data table because found data-y descendant"),h._readabilityDataTable=!0;continue}if(h.getElementsByTagName("table")[0]){h._readabilityDataTable=!1;continue}var b=this._getRowAndColumnCount(h);if(b.rows>=10||b.columns>4){h._readabilityDataTable=!0;continue}h._readabilityDataTable=b.rows*b.columns>10}},_fixLazyImages:function(c){this._forEachNode(this._getAllNodesWithTag(c,["img","picture","figure"]),function(u){if(u.src&&this.REGEXPS.b64DataUrl.test(u.src)){var d=this.REGEXPS.b64DataUrl.exec(u.src);if(d[1]==="image/svg+xml")return;for(var h=!1,p=0;p<u.attributes.length;p++){var m=u.attributes[p];if(m.name!=="src"&&/\.(jpg|jpeg|png|webp)/i.test(m.value)){h=!0;break}}if(h){var f=u.src.search(/base64\s*/i)+7,_=u.src.length-f;_<133&&u.removeAttribute("src")}}if(!((u.src||u.srcset&&u.srcset!="null")&&u.className.toLowerCase().indexOf("lazy")===-1)){for(var y=0;y<u.attributes.length;y++)if(m=u.attributes[y],!(m.name==="src"||m.name==="srcset"||m.name==="alt")){var E=null;if(/\.(jpg|jpeg|png|webp)\s+\d/.test(m.value)?E="srcset":/^\s*\S+\.(jpg|jpeg|png|webp)\S*\s*$/.test(m.value)&&(E="src"),E){if(u.tagName==="IMG"||u.tagName==="PICTURE")u.setAttribute(E,m.value);else if(u.tagName==="FIGURE"&&!this._getAllNodesWithTag(u,["img","picture"]).length){var b=this._doc.createElement("img");b.setAttribute(E,m.value),u.appendChild(b)}}}}})},_getTextDensity:function(c,u){var d=this._getInnerText(c,!0).length;if(d===0)return 0;var h=0,p=this._getAllNodesWithTag(c,u);return this._forEachNode(p,m=>h+=this._getInnerText(m,!0).length),h/d},_cleanConditionally:function(c,u){this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY)&&this._removeNodes(this._getAllNodesWithTag(c,[u]),function(d){var h=function(R){return R._readabilityDataTable},p=u==="ul"||u==="ol";if(!p){var m=0,f=this._getAllNodesWithTag(d,["ul","ol"]);this._forEachNode(f,R=>m+=this._getInnerText(R).length),p=m/this._getInnerText(d).length>.9}if(u==="table"&&h(d)||this._hasAncestorTag(d,"table",-1,h)||this._hasAncestorTag(d,"code"))return!1;var _=this._getClassWeight(d);this.log("Cleaning Conditionally",d);var y=0;if(_+y<0)return!0;if(this._getCharCount(d,",")<10){for(var E=d.getElementsByTagName("p").length,b=d.getElementsByTagName("img").length,T=d.getElementsByTagName("li").length-100,A=d.getElementsByTagName("input").length,v=this._getTextDensity(d,["h1","h2","h3","h4","h5","h6"]),S=0,O=this._getAllNodesWithTag(d,["object","embed","iframe"]),I=0;I<O.length;I++){for(var x=0;x<O[I].attributes.length;x++)if(this._allowedVideoRegex.test(O[I].attributes[x].value))return!1;if(O[I].tagName==="object"&&this._allowedVideoRegex.test(O[I].innerHTML))return!1;S++}var P=this._getLinkDensity(d),w=this._getInnerText(d).length,C=b>1&&E/b<.5&&!this._hasAncestorTag(d,"figure")||!p&&T>E||A>Math.floor(E/3)||!p&&v<.9&&w<25&&(b===0||b>2)&&!this._hasAncestorTag(d,"figure")||!p&&_<25&&P>.2||_>=25&&P>.5||S===1&&w<75||S>1;if(p&&C){for(var k=0;k<d.children.length;k++)if(d.children[k].children.length>1)return C;let R=d.getElementsByTagName("li").length;if(b==R)return!1}return C}return!1})},_cleanMatchedNodes:function(c,u){for(var d=this._getNextNode(c,!0),h=this._getNextNode(c);h&&h!=d;)u.call(this,h,h.className+" "+h.id)?h=this._removeAndGetNext(h):h=this._getNextNode(h)},_cleanHeaders:function(c){let u=this._getAllNodesWithTag(c,["h1","h2"]);this._removeNodes(u,function(d){let h=this._getClassWeight(d)<0;return h&&this.log("Removing header with low class weight:",d),h})},_headerDuplicatesTitle:function(c){if(c.tagName!="H1"&&c.tagName!="H2")return!1;var u=this._getInnerText(c,!1);return this.log("Evaluating similarity of header:",u,this._articleTitle),this._textSimilarity(this._articleTitle,u)>.75},_flagIsActive:function(c){return(this._flags&c)>0},_removeFlag:function(c){this._flags=this._flags&~c},_isProbablyVisible:function(c){return(!c.style||c.style.display!="none")&&(!c.style||c.style.visibility!="hidden")&&!c.hasAttribute("hidden")&&(!c.hasAttribute("aria-hidden")||c.getAttribute("aria-hidden")!="true"||c.className&&c.className.indexOf&&c.className.indexOf("fallback-image")!==-1)},parse:function(){if(this._maxElemsToParse>0){var c=this._doc.getElementsByTagName("*").length;if(c>this._maxElemsToParse)throw new Error("Aborting parsing document; "+c+" elements found")}this._unwrapNoscriptImages(this._doc);var u=this._disableJSONLD?{}:this._getJSONLD(this._doc);this._removeScripts(this._doc),this._prepDocument();var d=this._getArticleMetadata(u);this._articleTitle=d.title;var h=this._grabArticle();if(!h)return null;if(this.log("Grabbed: "+h.innerHTML),this._postProcessContent(h),!d.excerpt){var p=h.getElementsByTagName("p");p.length>0&&(d.excerpt=p[0].textContent.trim())}var m=h.textContent;return{title:this._articleTitle,byline:d.byline||this._articleByline,dir:this._articleDir,lang:this._articleLang,content:this._serializer(h),textContent:m,length:m.length,excerpt:d.excerpt,siteName:d.siteName||this._articleSiteName,publishedTime:d.publishedTime}}},a.exports=s})(Readability$1);var ReadabilityExports=Readability$1.exports,ReadabilityReaderable={exports:{}};(function(a){var s={unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i};function c(d){return(!d.style||d.style.display!="none")&&!d.hasAttribute("hidden")&&(!d.hasAttribute("aria-hidden")||d.getAttribute("aria-hidden")!="true"||d.className&&d.className.indexOf&&d.className.indexOf("fallback-image")!==-1)}function u(d,h={}){typeof h=="function"&&(h={visibilityChecker:h});var p={minScore:20,minContentLength:140,visibilityChecker:c};h=Object.assign(p,h);var m=d.querySelectorAll("p, pre, article"),f=d.querySelectorAll("div > br");if(f.length){var _=new Set(m);[].forEach.call(f,function(E){_.add(E.parentNode)}),m=Array.from(_)}var y=0;return[].some.call(m,function(E){if(!h.visibilityChecker(E))return!1;var b=E.className+" "+E.id;if(s.unlikelyCandidates.test(b)&&!s.okMaybeItsACandidate.test(b)||E.matches("li p"))return!1;var T=E.textContent.trim().length;return T<h.minContentLength?!1:(y+=Math.sqrt(T-h.minContentLength),y>h.minScore)})}a.exports=u})(ReadabilityReaderable);var ReadabilityReaderableExports=ReadabilityReaderable.exports,Readability=ReadabilityExports,isProbablyReaderable=ReadabilityReaderableExports,readability={Readability,isProbablyReaderable};function htmlToMarkdown(a){logger.debug("\u5F00\u59CB\u5C06 HTML \u8F6C\u6362\u4E3A Markdown");try{const s=load(a);s('script, style, link, svg, [src^="data:image/"]').remove();const c=s("body").html()||"",u=convertToMarkdown(s,c);return logger.debug("HTML \u6210\u529F\u8F6C\u6362\u4E3A Markdown",{markdownLength:u.length}),u}catch(s){return logger.error("HTML \u8F6C\u6362\u4E3A Markdown \u5931\u8D25",s),"\u65E0\u6CD5\u8F6C\u6362 HTML \u5230 Markdown: "+(s instanceof Error?s.message:String(s))}}function convertToMarkdown(a,s){const c=load(s);let u="";return c("body").children().each((d,h)=>{u+=processElement(c,h)+`

`}),cleanMarkdown(u)}function processElement(a,s){var p;const c=(p=s.tagName)==null?void 0:p.toLowerCase(),u=a(s),d=u.text().trim(),h=u.html()||"";if(!d&&!h)return"";switch(c){case"h1":return`# ${d}`;case"h2":return`## ${d}`;case"h3":return`### ${d}`;case"h4":return`#### ${d}`;case"h5":return`##### ${d}`;case"h6":return`###### ${d}`;case"p":return processInlineElements(a,s);case"ul":return processList(a,s,"*");case"ol":return processList(a,s,"1.");case"blockquote":return processBlockquote(a,s);case"pre":return processCodeBlock(a,s);case"code":return"`"+d+"`";case"a":return processLink(a,s);case"img":return processImage(a,s);case"table":return processTable(a,s);case"br":return`
`;case"hr":return"---";case"div":case"section":case"article":case"main":case"aside":case"header":case"footer":let m="";return u.children().each((f,_)=>{m+=processElement(a,_)+`

`}),m.trim();default:return processInlineElements(a,s)}}function processInlineElements(a,s){let c="";return a(s).children().length?(s.childNodes.forEach(u=>{var d;if(u.type==="text")c+=u.data||"";else if(u.type==="tag"){const h=(d=u.tagName)==null?void 0:d.toLowerCase(),p=a(u).text();switch(h){case"strong":case"b":c+=`**${p}**`;break;case"em":case"i":c+=`*${p}*`;break;case"code":c+=`\`${p}\``;break;case"a":c+=processLink(a,u);break;case"img":c+=processImage(a,u);break;case"br":c+=`
`;break;default:c+=processElement(a,u)}}}),c):a(s).text()}function processList(a,s,c){let u="";return a(s).children("li").each((d,h)=>{const p=processInlineElements(a,h),m=c==="1."?`${d+1}. `:`${c} `;u+=`${m}${p}
`}),u}function processBlockquote(a,s){return processInlineElements(a,s).split(`
`).map(c=>`> ${c}`).join(`
`)}function processCodeBlock(a,s){return"```\n"+a(s).text()+"\n```"}function processLink(a,s){const c=a(s).attr("href")||"";return`[${a(s).text()||c}](${c})`}function processImage(a,s){const c=a(s).attr("src")||"";return`![${a(s).attr("alt")||""}](${c})`}function processTable(a,s){let c="";const u=a(s).find("th");if(u.length){const d=[];u.each((h,p)=>{d.push(a(p).text().trim())}),c+="| "+d.join(" | ")+` |
`,c+="| "+d.map(()=>"---").join(" | ")+` |
`}return a(s).find("tr").each((d,h)=>{const p=a(h).find("td");if(p.length){const m=[];p.each((f,_)=>{m.push(a(_).text().trim())}),c+="| "+m.join(" | ")+` |
`}}),c}function cleanMarkdown(a){return a.replace(/\n{3,}/g,`

`).trim()}class SimpleDocument{constructor(s){Re(this,"content");Re(this,"$",null);this.content=s,this.$=load(s)}querySelector(s){return this.$.root().find(s).get(0)}querySelectorAll(s){return this.$.root().find(s).get()}getElementsByTagName(s){return this.$.root().find(s).get()}get documentElement(){return{getAttribute:s=>null,getBoundingClientRect:()=>({width:1024,height:768}),className:"",tagName:"HTML"}}get body(){return this.$.root().find("body").get(0)||{}}get head(){return this.$.root().find("head").get(0)||{}}get title(){return this.$.root().find("title").text()||""}get location(){return{href:""}}get documentURI(){return""}get baseURI(){return""}createTreeWalker(){return{currentNode:null,nextNode:()=>null}}createNodeIterator(){return{nextNode:()=>null}}createElement(s){return{tagName:s}}}const defaultExtractContent=a=>{logger.debug("\u5F00\u59CB\u63D0\u53D6\u9875\u9762\u5185\u5BB9");try{const s=load(a);try{logger.debug("\u5C1D\u8BD5\u4F7F\u7528 Readability \u89E3\u6790\u9875\u9762");const d=new SimpleDocument(a);if(readability.isProbablyReaderable(d)){logger.debug("\u9875\u9762\u53EF\u80FD\u9002\u5408 Readability \u89E3\u6790");const h=new readability.Readability(d).parse();if(h&&h.content){logger.debug("Readability \u6210\u529F\u89E3\u6790\u9875\u9762",{title:h.title,contentLength:h.content.length});const p=htmlToMarkdown(h.content);return logger.debug("\u6210\u529F\u8F6C\u6362\u4E3A Markdown",{markdownLength:p.length}),p}}}catch(d){logger.warn("Readability \u89E3\u6790\u5931\u8D25\uFF0C\u5C06\u4F7F\u7528\u5907\u7528\u65B9\u6CD5",d)}logger.debug("\u4F7F\u7528\u5907\u7528\u65B9\u6CD5\u63D0\u53D6\u5185\u5BB9"),s("script, style, link, svg, [src^='data:image/']").remove(),s("*").each((d,h)=>{if("attribs"in h){const p=h.attribs;for(const m in p)m!=="href"&&m!=="src"&&s(h).removeAttr(m)}});const c=s('[role="main"]').html()||s("main").html()||s("body").html()||"",u=htmlToMarkdown(c);return logger.debug("\u6210\u529F\u8F6C\u6362\u4E3A Markdown\uFF08\u5907\u7528\u65B9\u6CD5\uFF09",{markdownLength:u.length}),u}catch(s){return logger.error("\u63D0\u53D6\u9875\u9762\u5185\u5BB9\u5931\u8D25",s),"\u65E0\u6CD5\u63D0\u53D6\u9875\u9762\u5185\u5BB9\u3002\u9519\u8BEF: "+(s instanceof Error?s.message:String(s))}};function commonjsRequire(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(a,s){module.exports=a.pdfjsLib=s()})(globalThis,()=>(()=>{var __webpack_modules__=[,(a,s)=>{var it;Object.defineProperty(s,"__esModule",{value:!0}),s.VerbosityLevel=s.Util=s.UnknownErrorException=s.UnexpectedResponseException=s.TextRenderingMode=s.RenderingIntentFlag=s.PromiseCapability=s.PermissionFlag=s.PasswordResponses=s.PasswordException=s.PageActionEventType=s.OPS=s.MissingPDFException=s.MAX_IMAGE_SIZE_TO_CACHE=s.LINE_FACTOR=s.LINE_DESCENT_FACTOR=s.InvalidPDFException=s.ImageKind=s.IDENTITY_MATRIX=s.FormatError=s.FeatureTest=s.FONT_IDENTITY_MATRIX=s.DocumentActionEventType=s.CMapCompressionType=s.BaseException=s.BASELINE_FACTOR=s.AnnotationType=s.AnnotationReplyType=s.AnnotationPrefix=s.AnnotationMode=s.AnnotationFlag=s.AnnotationFieldFlag=s.AnnotationEditorType=s.AnnotationEditorPrefix=s.AnnotationEditorParamsType=s.AnnotationBorderStyleType=s.AnnotationActionEventType=s.AbortException=void 0,s.assert=se,s.bytesToString=ae,s.createValidAbsoluteUrl=le,s.getModificationDate=We,s.getUuid=rt,s.getVerbosityLevel=ee,s.info=Q,s.isArrayBuffer=Oe,s.isArrayEqual=Le,s.isNodeJS=void 0,s.normalizeUnicode=tt,s.objectFromMap=Ee,s.objectSize=ue,s.setVerbosityLevel=H,s.shadow=he,s.string32=ie,s.stringToBytes=ce,s.stringToPDFString=Se,s.stringToUTF8String=pe,s.unreachable=K,s.utf8StringToString=me,s.warn=Z;const c=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");s.isNodeJS=c;const u=[1,0,0,1,0,0];s.IDENTITY_MATRIX=u;const d=[.001,0,0,.001,0,0];s.FONT_IDENTITY_MATRIX=d;const h=1e7;s.MAX_IMAGE_SIZE_TO_CACHE=h;const p=1.35;s.LINE_FACTOR=p;const m=.35;s.LINE_DESCENT_FACTOR=m;const f=m/p;s.BASELINE_FACTOR=f;const _={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};s.RenderingIntentFlag=_;const y={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};s.AnnotationMode=y;const E="pdfjs_internal_editor_";s.AnnotationEditorPrefix=E;const b={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};s.AnnotationEditorType=b;const T={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};s.AnnotationEditorParamsType=T;const A={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};s.PermissionFlag=A;const v={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};s.TextRenderingMode=v;const S={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};s.ImageKind=S;const O={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};s.AnnotationType=O;const I={GROUP:"Group",REPLY:"R"};s.AnnotationReplyType=I;const x={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};s.AnnotationFlag=x;const P={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};s.AnnotationFieldFlag=P;const w={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};s.AnnotationBorderStyleType=w;const C={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};s.AnnotationActionEventType=C;const k={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};s.DocumentActionEventType=k;const R={O:"PageOpen",C:"PageClose"};s.PageActionEventType=R;const N={ERRORS:0,WARNINGS:1,INFOS:5};s.VerbosityLevel=N;const F={NONE:0,BINARY:1};s.CMapCompressionType=F;const L={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};s.OPS=L;const X={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};s.PasswordResponses=X;let V=N.WARNINGS;function H(Ne){Number.isInteger(Ne)&&(V=Ne)}function ee(){return V}function Q(Ne){V>=N.INFOS&&console.log(`Info: ${Ne}`)}function Z(Ne){V>=N.WARNINGS&&console.log(`Warning: ${Ne}`)}function K(Ne){throw new Error(Ne)}function se(Ne,ye){Ne||K(ye)}function ne(Ne){switch(Ne==null?void 0:Ne.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function le(Ne,ye=null,ge=null){var Fe;if(!Ne)return null;try{if(ge&&typeof Ne=="string"&&(ge.addDefaultProtocol&&Ne.startsWith("www.")&&((Fe=Ne.match(/\./g))==null?void 0:Fe.length)>=2&&(Ne=`http://${Ne}`),ge.tryConvertEncoding))try{Ne=pe(Ne)}catch{}const Ue=ye?new URL(Ne,ye):new URL(Ne);if(ne(Ue))return Ue}catch{}return null}function he(Ne,ye,ge,Fe=!1){return Object.defineProperty(Ne,ye,{value:ge,enumerable:!Fe,configurable:!0,writable:!1}),ge}const Y=function(){function Ne(ye,ge){this.constructor===Ne&&K("Cannot initialize BaseException."),this.message=ye,this.name=ge}return Ne.prototype=new Error,Ne.constructor=Ne,Ne}();s.BaseException=Y;class D extends Y{constructor(ye,ge){super(ye,"PasswordException"),this.code=ge}}s.PasswordException=D;class G extends Y{constructor(ye,ge){super(ye,"UnknownErrorException"),this.details=ge}}s.UnknownErrorException=G;class B extends Y{constructor(ye){super(ye,"InvalidPDFException")}}s.InvalidPDFException=B;class U extends Y{constructor(ye){super(ye,"MissingPDFException")}}s.MissingPDFException=U;class W extends Y{constructor(ye,ge){super(ye,"UnexpectedResponseException"),this.status=ge}}s.UnexpectedResponseException=W;class q extends Y{constructor(ye){super(ye,"FormatError")}}s.FormatError=q;class J extends Y{constructor(ye){super(ye,"AbortException")}}s.AbortException=J;function ae(Ne){(typeof Ne!="object"||(Ne==null?void 0:Ne.length)===void 0)&&K("Invalid argument for bytesToString");const ye=Ne.length,ge=8192;if(ye<ge)return String.fromCharCode.apply(null,Ne);const Fe=[];for(let Ue=0;Ue<ye;Ue+=ge){const dt=Math.min(Ue+ge,ye),pt=Ne.subarray(Ue,dt);Fe.push(String.fromCharCode.apply(null,pt))}return Fe.join("")}function ce(Ne){typeof Ne!="string"&&K("Invalid argument for stringToBytes");const ye=Ne.length,ge=new Uint8Array(ye);for(let Fe=0;Fe<ye;++Fe)ge[Fe]=Ne.charCodeAt(Fe)&255;return ge}function ie(Ne){return String.fromCharCode(Ne>>24&255,Ne>>16&255,Ne>>8&255,Ne&255)}function ue(Ne){return Object.keys(Ne).length}function Ee(Ne){const ye=Object.create(null);for(const[ge,Fe]of Ne)ye[ge]=Fe;return ye}function xe(){const Ne=new Uint8Array(4);return Ne[0]=1,new Uint32Array(Ne.buffer,0,1)[0]===1}function ve(){try{return new Function(""),!0}catch{return!1}}class $e{static get isLittleEndian(){return he(this,"isLittleEndian",xe())}static get isEvalSupported(){return he(this,"isEvalSupported",ve())}static get isOffscreenCanvasSupported(){return he(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?he(this,"platform",{isWin:!1,isMac:!1}):he(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var ye,ge;return he(this,"isCSSRoundSupported",(ge=(ye=globalThis.CSS)==null?void 0:ye.supports)==null?void 0:ge.call(ye,"width: round(1.5px, 1px)"))}}s.FeatureTest=$e;const _e=[...Array(256).keys()].map(Ne=>Ne.toString(16).padStart(2,"0"));class Be{static makeHexColor(ye,ge,Fe){return`#${_e[ye]}${_e[ge]}${_e[Fe]}`}static scaleMinMax(ye,ge){let Fe;ye[0]?(ye[0]<0&&(Fe=ge[0],ge[0]=ge[1],ge[1]=Fe),ge[0]*=ye[0],ge[1]*=ye[0],ye[3]<0&&(Fe=ge[2],ge[2]=ge[3],ge[3]=Fe),ge[2]*=ye[3],ge[3]*=ye[3]):(Fe=ge[0],ge[0]=ge[2],ge[2]=Fe,Fe=ge[1],ge[1]=ge[3],ge[3]=Fe,ye[1]<0&&(Fe=ge[2],ge[2]=ge[3],ge[3]=Fe),ge[2]*=ye[1],ge[3]*=ye[1],ye[2]<0&&(Fe=ge[0],ge[0]=ge[1],ge[1]=Fe),ge[0]*=ye[2],ge[1]*=ye[2]),ge[0]+=ye[4],ge[1]+=ye[4],ge[2]+=ye[5],ge[3]+=ye[5]}static transform(ye,ge){return[ye[0]*ge[0]+ye[2]*ge[1],ye[1]*ge[0]+ye[3]*ge[1],ye[0]*ge[2]+ye[2]*ge[3],ye[1]*ge[2]+ye[3]*ge[3],ye[0]*ge[4]+ye[2]*ge[5]+ye[4],ye[1]*ge[4]+ye[3]*ge[5]+ye[5]]}static applyTransform(ye,ge){const Fe=ye[0]*ge[0]+ye[1]*ge[2]+ge[4],Ue=ye[0]*ge[1]+ye[1]*ge[3]+ge[5];return[Fe,Ue]}static applyInverseTransform(ye,ge){const Fe=ge[0]*ge[3]-ge[1]*ge[2],Ue=(ye[0]*ge[3]-ye[1]*ge[2]+ge[2]*ge[5]-ge[4]*ge[3])/Fe,dt=(-ye[0]*ge[1]+ye[1]*ge[0]+ge[4]*ge[1]-ge[5]*ge[0])/Fe;return[Ue,dt]}static getAxialAlignedBoundingBox(ye,ge){const Fe=this.applyTransform(ye,ge),Ue=this.applyTransform(ye.slice(2,4),ge),dt=this.applyTransform([ye[0],ye[3]],ge),pt=this.applyTransform([ye[2],ye[1]],ge);return[Math.min(Fe[0],Ue[0],dt[0],pt[0]),Math.min(Fe[1],Ue[1],dt[1],pt[1]),Math.max(Fe[0],Ue[0],dt[0],pt[0]),Math.max(Fe[1],Ue[1],dt[1],pt[1])]}static inverseTransform(ye){const ge=ye[0]*ye[3]-ye[1]*ye[2];return[ye[3]/ge,-ye[1]/ge,-ye[2]/ge,ye[0]/ge,(ye[2]*ye[5]-ye[4]*ye[3])/ge,(ye[4]*ye[1]-ye[5]*ye[0])/ge]}static singularValueDecompose2dScale(ye){const ge=[ye[0],ye[2],ye[1],ye[3]],Fe=ye[0]*ge[0]+ye[1]*ge[2],Ue=ye[0]*ge[1]+ye[1]*ge[3],dt=ye[2]*ge[0]+ye[3]*ge[2],pt=ye[2]*ge[1]+ye[3]*ge[3],Ae=(Fe+pt)/2,Pe=Math.sqrt((Fe+pt)**2-4*(Fe*pt-dt*Ue))/2,De=Ae+Pe||1,Ce=Ae-Pe||1;return[Math.sqrt(De),Math.sqrt(Ce)]}static normalizeRect(ye){const ge=ye.slice(0);return ye[0]>ye[2]&&(ge[0]=ye[2],ge[2]=ye[0]),ye[1]>ye[3]&&(ge[1]=ye[3],ge[3]=ye[1]),ge}static intersect(ye,ge){const Fe=Math.max(Math.min(ye[0],ye[2]),Math.min(ge[0],ge[2])),Ue=Math.min(Math.max(ye[0],ye[2]),Math.max(ge[0],ge[2]));if(Fe>Ue)return null;const dt=Math.max(Math.min(ye[1],ye[3]),Math.min(ge[1],ge[3])),pt=Math.min(Math.max(ye[1],ye[3]),Math.max(ge[1],ge[3]));return dt>pt?null:[Fe,dt,Ue,pt]}static bezierBoundingBox(ye,ge,Fe,Ue,dt,pt,Ae,Pe){const De=[],Ce=[[],[]];let Xe,Ge,et,Me,ot,ke,re,j;for(let be=0;be<2;++be){if(be===0?(Ge=6*ye-12*Fe+6*dt,Xe=-3*ye+9*Fe-9*dt+3*Ae,et=3*Fe-3*ye):(Ge=6*ge-12*Ue+6*pt,Xe=-3*ge+9*Ue-9*pt+3*Pe,et=3*Ue-3*ge),Math.abs(Xe)<1e-12){if(Math.abs(Ge)<1e-12)continue;Me=-et/Ge,0<Me&&Me<1&&De.push(Me);continue}re=Ge*Ge-4*et*Xe,j=Math.sqrt(re),!(re<0)&&(ot=(-Ge+j)/(2*Xe),0<ot&&ot<1&&De.push(ot),ke=(-Ge-j)/(2*Xe),0<ke&&ke<1&&De.push(ke))}let te=De.length,oe;const fe=te;for(;te--;)Me=De[te],oe=1-Me,Ce[0][te]=oe*oe*oe*ye+3*oe*oe*Me*Fe+3*oe*Me*Me*dt+Me*Me*Me*Ae,Ce[1][te]=oe*oe*oe*ge+3*oe*oe*Me*Ue+3*oe*Me*Me*pt+Me*Me*Me*Pe;return Ce[0][fe]=ye,Ce[1][fe]=ge,Ce[0][fe+1]=Ae,Ce[1][fe+1]=Pe,Ce[0].length=Ce[1].length=fe+2,[Math.min(...Ce[0]),Math.min(...Ce[1]),Math.max(...Ce[0]),Math.max(...Ce[1])]}}s.Util=Be;const ze=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Se(Ne){if(Ne[0]>="\xEF"){let ge;if(Ne[0]==="\xFE"&&Ne[1]==="\xFF"?ge="utf-16be":Ne[0]==="\xFF"&&Ne[1]==="\xFE"?ge="utf-16le":Ne[0]==="\xEF"&&Ne[1]==="\xBB"&&Ne[2]==="\xBF"&&(ge="utf-8"),ge)try{const Fe=new TextDecoder(ge,{fatal:!0}),Ue=ce(Ne);return Fe.decode(Ue)}catch(Fe){Z(`stringToPDFString: "${Fe}".`)}}const ye=[];for(let ge=0,Fe=Ne.length;ge<Fe;ge++){const Ue=ze[Ne.charCodeAt(ge)];ye.push(Ue?String.fromCharCode(Ue):Ne.charAt(ge))}return ye.join("")}function pe(Ne){return decodeURIComponent(escape(Ne))}function me(Ne){return unescape(encodeURIComponent(Ne))}function Oe(Ne){return typeof Ne=="object"&&(Ne==null?void 0:Ne.byteLength)!==void 0}function Le(Ne,ye){if(Ne.length!==ye.length)return!1;for(let ge=0,Fe=Ne.length;ge<Fe;ge++)if(Ne[ge]!==ye[ge])return!1;return!0}function We(Ne=new Date){return[Ne.getUTCFullYear().toString(),(Ne.getUTCMonth()+1).toString().padStart(2,"0"),Ne.getUTCDate().toString().padStart(2,"0"),Ne.getUTCHours().toString().padStart(2,"0"),Ne.getUTCMinutes().toString().padStart(2,"0"),Ne.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ze{constructor(){de(this,it,!1);this.promise=new Promise((ye,ge)=>{this.resolve=Fe=>{Ie(this,it,!0),ye(Fe)},this.reject=Fe=>{Ie(this,it,!0),ge(Fe)}})}get settled(){return M(this,it)}}it=new WeakMap,s.PromiseCapability=Ze;let Qe=null,Je=null;function tt(Ne){return Qe||(Qe=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Je=new Map([["\uFB05","\u017Ft"]])),Ne.replaceAll(Qe,(ye,ge,Fe)=>ge?ge.normalize("NFKC"):Je.get(Fe))}function rt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Ne=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Ne);else for(let ye=0;ye<32;ye++)Ne[ye]=Math.floor(Math.random()*255);return ae(Ne)}const at="pdfjs_internal_id_";s.AnnotationPrefix=at},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var a,c,u,d,nn,p,Cn,f,_,y,E,b,T,A,v,S,In,I,x,Yn,w,C;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(R){if(typeof R=="string"||R instanceof URL?R={url:R}:(0,_util.isArrayBuffer)(R)&&(R={data:R}),typeof R!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!R.url&&!R.data&&!R.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const N=new PDFDocumentLoadingTask,{docId:F}=N,L=R.url?getUrlProp(R.url):null,X=R.data?getDataProp(R.data):null,V=R.httpHeaders||null,H=R.withCredentials===!0,ee=R.password??null,Q=R.range instanceof PDFDataRangeTransport?R.range:null,Z=Number.isInteger(R.rangeChunkSize)&&R.rangeChunkSize>0?R.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let K=R.worker instanceof PDFWorker?R.worker:null;const se=R.verbosity,ne=typeof R.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(R.docBaseUrl)?R.docBaseUrl:null,le=typeof R.cMapUrl=="string"?R.cMapUrl:null,he=R.cMapPacked!==!1,Y=R.CMapReaderFactory||DefaultCMapReaderFactory,D=typeof R.standardFontDataUrl=="string"?R.standardFontDataUrl:null,G=R.StandardFontDataFactory||DefaultStandardFontDataFactory,B=R.stopAtErrors!==!0,U=Number.isInteger(R.maxImageSize)&&R.maxImageSize>-1?R.maxImageSize:-1,W=R.isEvalSupported!==!1,q=typeof R.isOffscreenCanvasSupported=="boolean"?R.isOffscreenCanvasSupported:!_util.isNodeJS,J=Number.isInteger(R.canvasMaxAreaInBytes)?R.canvasMaxAreaInBytes:-1,ae=typeof R.disableFontFace=="boolean"?R.disableFontFace:_util.isNodeJS,ce=R.fontExtraProperties===!0,ie=R.enableXfa===!0,ue=R.ownerDocument||globalThis.document,Ee=R.disableRange===!0,xe=R.disableStream===!0,ve=R.disableAutoFetch===!0,$e=R.pdfBug===!0,_e=Q?Q.length:R.length??NaN,Be=typeof R.useSystemFonts=="boolean"?R.useSystemFonts:!_util.isNodeJS&&!ae,ze=typeof R.useWorkerFetch=="boolean"?R.useWorkerFetch:Y===_display_utils.DOMCMapReaderFactory&&G===_display_utils.DOMStandardFontDataFactory&&le&&D&&(0,_display_utils.isValidFetchUrl)(le,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(D,document.baseURI),Se=R.canvasFactory||new DefaultCanvasFactory({ownerDocument:ue}),pe=R.filterFactory||new DefaultFilterFactory({docId:F,ownerDocument:ue}),me=null;(0,_util.setVerbosityLevel)(se);const Oe={canvasFactory:Se,filterFactory:pe};if(ze||(Oe.cMapReaderFactory=new Y({baseUrl:le,isCompressed:he}),Oe.standardFontDataFactory=new G({baseUrl:D})),!K){const Ze={verbosity:se,port:_worker_options.GlobalWorkerOptions.workerPort};K=Ze.port?PDFWorker.fromPort(Ze):new PDFWorker(Ze),N._worker=K}const Le={docId:F,apiVersion:"3.11.174",data:X,password:ee,disableAutoFetch:ve,rangeChunkSize:Z,length:_e,docBaseUrl:ne,enableXfa:ie,evaluatorOptions:{maxImageSize:U,disableFontFace:ae,ignoreErrors:B,isEvalSupported:W,isOffscreenCanvasSupported:q,canvasMaxAreaInBytes:J,fontExtraProperties:ce,useSystemFonts:Be,cMapUrl:ze?le:null,standardFontDataUrl:ze?D:null}},We={ignoreErrors:B,isEvalSupported:W,disableFontFace:ae,fontExtraProperties:ce,enableXfa:ie,ownerDocument:ue,disableAutoFetch:ve,pdfBug:$e,styleElement:me};return K.promise.then(function(){if(N.destroyed)throw new Error("Loading aborted");const Ze=_fetchDocument(K,Le),Qe=new Promise(function(Je){let tt;Q?tt=new _transport_stream.PDFDataTransportStream({length:_e,initialData:Q.initialData,progressiveDone:Q.progressiveDone,contentDispositionFilename:Q.contentDispositionFilename,disableRange:Ee,disableStream:xe},Q):X||(tt=(rt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(rt):(0,_display_utils.isValidFetchUrl)(rt.url)?new _displayFetch_stream.PDFFetchStream(rt):new _displayNetwork.PDFNetworkStream(rt))({url:L,length:_e,httpHeaders:V,withCredentials:H,rangeChunkSize:Z,disableRange:Ee,disableStream:xe})),Je(tt)});return Promise.all([Ze,Qe]).then(function([Je,tt]){if(N.destroyed)throw new Error("Loading aborted");const rt=new _message_handler.MessageHandler(F,Je,K.port),at=new WorkerTransport(rt,N,tt,We,Oe);N._transport=at,rt.send("Ready",null)})}).catch(N._capability.reject),N}async function _fetchDocument(R,N){if(R.destroyed)throw new Error("Worker was destroyed");const F=await R.messageHandler.sendWithPromise("GetDocRequest",N,N.data?[N.data.buffer]:null);if(R.destroyed)throw new Error("Worker was destroyed");return F}function getUrlProp(R){if(R instanceof URL)return R.href;try{return new URL(R,window.location).href}catch{if(_util.isNodeJS&&typeof R=="string")return R}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(R){if(_util.isNodeJS&&typeof Buffer<"u"&&R instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(R instanceof Uint8Array&&R.byteLength===R.buffer.byteLength)return R;if(typeof R=="string")return(0,_util.stringToBytes)(R);if(typeof R=="object"&&!isNaN(R==null?void 0:R.length)||(0,_util.isArrayBuffer)(R))return new Uint8Array(R);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const s=class s{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${un(s,a)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var N,F,L;this.destroyed=!0;try{(N=this._worker)!=null&&N.port&&(this._worker._pendingDestroy=!0),await((F=this._transport)==null?void 0:F.destroy())}catch(X){throw(L=this._worker)!=null&&L.port&&delete this._worker._pendingDestroy,X}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};a=new WeakMap,de(s,a,0);let PDFDocumentLoadingTask=s;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(N,F,L=!1,X=null){this.length=N,this.initialData=F,this.progressiveDone=L,this.contentDispositionFilename=X,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(N){this._rangeListeners.push(N)}addProgressListener(N){this._progressListeners.push(N)}addProgressiveReadListener(N){this._progressiveReadListeners.push(N)}addProgressiveDoneListener(N){this._progressiveDoneListeners.push(N)}onDataRange(N,F){for(const L of this._rangeListeners)L(N,F)}onDataProgress(N,F){this._readyCapability.promise.then(()=>{for(const L of this._progressListeners)L(N,F)})}onDataProgressiveRead(N){this._readyCapability.promise.then(()=>{for(const F of this._progressiveReadListeners)F(N)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const N of this._progressiveDoneListeners)N()})}transportReady(){this._readyCapability.resolve()}requestDataRange(N,F){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(N,F){this._pdfInfo=N,this._transport=F,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(L=>{if(!L)return L;const X=[];for(const V in L)X.push(...L[V]);return X}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(N){return this._transport.getPage(N)}getPageIndex(N){return this._transport.getPageIndex(N)}getDestinations(){return this._transport.getDestinations()}getDestination(N){return this._transport.getDestination(N)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(N=!1){return this._transport.startCleanup(N||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(N,F,L,X=!1){de(this,d);de(this,p);de(this,c,null);de(this,u,!1);this._pageIndex=N,this._pageInfo=F,this._transport=L,this._stats=X?new _display_utils.StatTimer:null,this._pdfBug=X,this.commonObjs=L.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:N,rotation:F=this.rotate,offsetX:L=0,offsetY:X=0,dontFlip:V=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:N,rotation:F,offsetX:L,offsetY:X,dontFlip:V})}getAnnotations({intent:N="display"}={}){const F=this._transport.getRenderingIntent(N);return this._transport.getAnnotations(this._pageIndex,F.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var N;return((N=this._transport._htmlForXfa)==null?void 0:N.children[this._pageIndex])||null}render({canvasContext:N,viewport:F,intent:L="display",annotationMode:X=_util.AnnotationMode.ENABLE,transform:V=null,background:H=null,optionalContentConfigPromise:ee=null,annotationCanvasMap:Q=null,pageColors:Z=null,printAnnotationStorage:K=null}){var G,B;(G=this._stats)==null||G.time("Overall");const se=this._transport.getRenderingIntent(L,X,K);Ie(this,u,!1),Te(this,p,Cn).call(this),ee||(ee=this._transport.getOptionalContentConfig());let ne=this._intentStates.get(se.cacheKey);ne||(ne=Object.create(null),this._intentStates.set(se.cacheKey,ne)),ne.streamReaderCancelTimeout&&(clearTimeout(ne.streamReaderCancelTimeout),ne.streamReaderCancelTimeout=null);const le=!!(se.renderingIntent&_util.RenderingIntentFlag.PRINT);ne.displayReadyCapability||(ne.displayReadyCapability=new _util.PromiseCapability,ne.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(B=this._stats)==null||B.time("Page Request"),this._pumpOperatorList(se));const he=U=>{var W,q;ne.renderTasks.delete(Y),(this._maybeCleanupAfterRender||le)&&Ie(this,u,!0),Te(this,d,nn).call(this,!le),U?(Y.capability.reject(U),this._abortOperatorList({intentState:ne,reason:U instanceof Error?U:new Error(U)})):Y.capability.resolve(),(W=this._stats)==null||W.timeEnd("Rendering"),(q=this._stats)==null||q.timeEnd("Overall")},Y=new InternalRenderTask({callback:he,params:{canvasContext:N,viewport:F,transform:V,background:H},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Q,operatorList:ne.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!le,pdfBug:this._pdfBug,pageColors:Z});(ne.renderTasks||(ne.renderTasks=new Set)).add(Y);const D=Y.task;return Promise.all([ne.displayReadyCapability.promise,ee]).then(([U,W])=>{var q;if(this.destroyed){he();return}(q=this._stats)==null||q.time("Rendering"),Y.initializeGraphics({transparency:U,optionalContentConfig:W}),Y.operatorListChanged()}).catch(he),D}getOperatorList({intent:N="display",annotationMode:F=_util.AnnotationMode.ENABLE,printAnnotationStorage:L=null}={}){var Q;function X(){H.operatorList.lastChunk&&(H.opListReadCapability.resolve(H.operatorList),H.renderTasks.delete(ee))}const V=this._transport.getRenderingIntent(N,F,L,!0);let H=this._intentStates.get(V.cacheKey);H||(H=Object.create(null),this._intentStates.set(V.cacheKey,H));let ee;return H.opListReadCapability||(ee=Object.create(null),ee.operatorListChanged=X,H.opListReadCapability=new _util.PromiseCapability,(H.renderTasks||(H.renderTasks=new Set)).add(ee),H.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Q=this._stats)==null||Q.time("Page Request"),this._pumpOperatorList(V)),H.opListReadCapability.promise}streamTextContent({includeMarkedContent:N=!1,disableNormalization:F=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:N===!0,disableNormalization:F===!0},{highWaterMark:100,size(L){return L.items.length}})}getTextContent(N={}){if(this._transport._htmlForXfa)return this.getXfa().then(L=>_xfa_text.XfaText.textContent(L));const F=this.streamTextContent(N);return new Promise(function(L,X){function V(){H.read().then(function({value:Q,done:Z}){if(Z){L(ee);return}Object.assign(ee.styles,Q.styles),ee.items.push(...Q.items),V()},X)}const H=F.getReader(),ee={items:[],styles:Object.create(null)};V()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const N=[];for(const F of this._intentStates.values())if(this._abortOperatorList({intentState:F,reason:new Error("Page was destroyed."),force:!0}),!F.opListReadCapability)for(const L of F.renderTasks)N.push(L.completed),L.cancel();return this.objs.clear(),Ie(this,u,!1),Te(this,p,Cn).call(this),Promise.all(N)}cleanup(N=!1){Ie(this,u,!0);const F=Te(this,d,nn).call(this,!1);return N&&F&&this._stats&&(this._stats=new _display_utils.StatTimer),F}_startRenderPage(N,F){var X,V;const L=this._intentStates.get(F);L&&((X=this._stats)==null||X.timeEnd("Page Request"),(V=L.displayReadyCapability)==null||V.resolve(N))}_renderPageChunk(N,F){for(let L=0,X=N.length;L<X;L++)F.operatorList.fnArray.push(N.fnArray[L]),F.operatorList.argsArray.push(N.argsArray[L]);F.operatorList.lastChunk=N.lastChunk,F.operatorList.separateAnnots=N.separateAnnots;for(const L of F.renderTasks)L.operatorListChanged();N.lastChunk&&Te(this,d,nn).call(this,!0)}_pumpOperatorList({renderingIntent:N,cacheKey:F,annotationStorageSerializable:L}){const{map:X,transfers:V}=L,H=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:N,cacheKey:F,annotationStorage:X},V).getReader(),ee=this._intentStates.get(F);ee.streamReader=H;const Q=()=>{H.read().then(({value:Z,done:K})=>{if(K){ee.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Z,ee),Q())},Z=>{if(ee.streamReader=null,!this._transport.destroyed){if(ee.operatorList){ee.operatorList.lastChunk=!0;for(const K of ee.renderTasks)K.operatorListChanged();Te(this,d,nn).call(this,!0)}if(ee.displayReadyCapability)ee.displayReadyCapability.reject(Z);else if(ee.opListReadCapability)ee.opListReadCapability.reject(Z);else throw Z}})};Q()}_abortOperatorList({intentState:N,reason:F,force:L=!1}){if(N.streamReader){if(N.streamReaderCancelTimeout&&(clearTimeout(N.streamReaderCancelTimeout),N.streamReaderCancelTimeout=null),!L){if(N.renderTasks.size>0)return;if(F instanceof _display_utils.RenderingCancelledException){let X=RENDERING_CANCELLED_TIMEOUT;F.extraDelay>0&&F.extraDelay<1e3&&(X+=F.extraDelay),N.streamReaderCancelTimeout=setTimeout(()=>{N.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:N,reason:F,force:!0})},X);return}}if(N.streamReader.cancel(new _util.AbortException(F.message)).catch(()=>{}),N.streamReader=null,!this._transport.destroyed){for(const[X,V]of this._intentStates)if(V===N){this._intentStates.delete(X);break}this.cleanup()}}}get stats(){return this._stats}}c=new WeakMap,u=new WeakMap,d=new WeakSet,nn=function(N=!1){if(Te(this,p,Cn).call(this),!M(this,u)||this.destroyed)return!1;if(N)return Ie(this,c,setTimeout(()=>{Ie(this,c,null),Te(this,d,nn).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:F,operatorList:L}of this._intentStates.values())if(F.size>0||!L.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Ie(this,u,!1),!0},p=new WeakSet,Cn=function(){M(this,c)&&(clearTimeout(M(this,c)),Ie(this,c,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){de(this,f,new Set);de(this,_,Promise.resolve())}postMessage(N,F){const L={data:structuredClone(N,F?{transfer:F}:null)};M(this,_).then(()=>{for(const X of M(this,f))X.call(this,L)})}addEventListener(N,F){M(this,f).add(F)}removeEventListener(N,F){M(this,f).delete(F)}terminate(){M(this,f).clear()}}f=new WeakMap,_=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const R=(y=document==null?void 0:document.currentScript)==null?void 0:y.src;R&&(PDFWorkerUtil.fallbackWorkerSrc=R.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(R,N){let F;try{if(F=new URL(R),!F.origin||F.origin==="null")return!1}catch{return!1}const L=new URL(N,F);return F.origin===L.origin},PDFWorkerUtil.createCDNWrapper=function(R){const N=`importScripts("${R}");`;return URL.createObjectURL(new Blob([N]))}}const _PDFWorker=class _PDFWorker{constructor({name:R=null,port:N=null,verbosity:F=(0,_util.getVerbosityLevel)()}={}){var L;if(this.name=R,this.destroyed=!1,this.verbosity=F,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,N){if((L=M(_PDFWorker,E))!=null&&L.has(N))throw new Error("Cannot use more than one PDFWorker per port.");(M(_PDFWorker,E)||Ie(_PDFWorker,E,new WeakMap)).set(N,this),this._initializeFromPort(N);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(R){this._port=R,this._messageHandler=new _message_handler.MessageHandler("main","worker",R),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:R}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,R)||(R=PDFWorkerUtil.createCDNWrapper(new URL(R,window.location).href));const N=new Worker(R),F=new _message_handler.MessageHandler("main","worker",N),L=()=>{N.removeEventListener("error",X),F.destroy(),N.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},X=()=>{this._webWorker||L()};N.addEventListener("error",X),F.on("test",H=>{if(N.removeEventListener("error",X),this.destroyed){L();return}H?(this._messageHandler=F,this._port=N,this._webWorker=N,this._readyCapability.resolve(),F.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),F.destroy(),N.terminate())}),F.on("ready",H=>{if(N.removeEventListener("error",X),this.destroyed){L();return}try{V()}catch{this._setupFakeWorker()}});const V=()=>{const H=new Uint8Array;F.send("test",H,[H.buffer])};V();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(R=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const N=new LoopbackPort;this._port=N;const F=`fake${PDFWorkerUtil.fakeWorkerId++}`,L=new _message_handler.MessageHandler(F+"_worker",F,N);R.setup(L,N);const X=new _message_handler.MessageHandler(F,F+"_worker",N);this._messageHandler=X,this._readyCapability.resolve(),X.send("configure",{verbosity:this.verbosity})}).catch(R=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${R.message}".`))})}destroy(){var R;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(R=M(_PDFWorker,E))==null||R.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(R){var F;if(!(R!=null&&R.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const N=(F=M(this,E))==null?void 0:F.get(R.port);if(N){if(N._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return N}return new _PDFWorker(R)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var R;try{return((R=globalThis.pdfjsWorker)==null?void 0:R.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};E=new WeakMap,de(_PDFWorker,E,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(N,F,L,X,V){de(this,S);de(this,b,new Map);de(this,T,new Map);de(this,A,new Map);de(this,v,null);this.messageHandler=N,this.loadingTask=F,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:X.ownerDocument,styleElement:X.styleElement}),this._params=X,this.canvasFactory=V.canvasFactory,this.filterFactory=V.filterFactory,this.cMapReaderFactory=V.cMapReaderFactory,this.standardFontDataFactory=V.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=L,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(N,F=_util.AnnotationMode.ENABLE,L=null,X=!1){let V=_util.RenderingIntentFlag.DISPLAY,H=_annotation_storage.SerializableEmpty;switch(N){case"any":V=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":V=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${N}`)}switch(F){case _util.AnnotationMode.DISABLE:V+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:V+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:V+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,H=(V&_util.RenderingIntentFlag.PRINT&&L instanceof _annotation_storage.PrintAnnotationStorage?L:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${F}`)}return X&&(V+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:V,cacheKey:`${V}_${H.hash}`,annotationStorageSerializable:H}}destroy(){var L;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(L=M(this,v))==null||L.reject(new Error("Worker was destroyed during onPassword callback"));const N=[];for(const X of M(this,T).values())N.push(X._destroy());M(this,T).clear(),M(this,A).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const F=this.messageHandler.sendWithPromise("Terminate",null);return N.push(F),Promise.all(N).then(()=>{var X;this.commonObjs.clear(),this.fontLoader.clear(),M(this,b).clear(),this.filterFactory.destroy(),(X=this._networkStream)==null||X.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:N,loadingTask:F}=this;N.on("GetReader",(L,X)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=V=>{this._lastProgress={loaded:V.loaded,total:V.total}},X.onPull=()=>{this._fullReader.read().then(function({value:V,done:H}){if(H){X.close();return}(0,_util.assert)(V instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),X.enqueue(new Uint8Array(V),1,[V])}).catch(V=>{X.error(V)})},X.onCancel=V=>{this._fullReader.cancel(V),X.ready.catch(H=>{if(!this.destroyed)throw H})}}),N.on("ReaderHeadersReady",L=>{const X=new _util.PromiseCapability,V=this._fullReader;return V.headersReady.then(()=>{var H;(!V.isStreamingSupported||!V.isRangeSupported)&&(this._lastProgress&&((H=F.onProgress)==null||H.call(F,this._lastProgress)),V.onProgress=ee=>{var Q;(Q=F.onProgress)==null||Q.call(F,{loaded:ee.loaded,total:ee.total})}),X.resolve({isStreamingSupported:V.isStreamingSupported,isRangeSupported:V.isRangeSupported,contentLength:V.contentLength})},X.reject),X.promise}),N.on("GetRangeReader",(L,X)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const V=this._networkStream.getRangeReader(L.begin,L.end);if(!V){X.close();return}X.onPull=()=>{V.read().then(function({value:H,done:ee}){if(ee){X.close();return}(0,_util.assert)(H instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),X.enqueue(new Uint8Array(H),1,[H])}).catch(H=>{X.error(H)})},X.onCancel=H=>{V.cancel(H),X.ready.catch(ee=>{if(!this.destroyed)throw ee})}}),N.on("GetDoc",({pdfInfo:L})=>{this._numPages=L.numPages,this._htmlForXfa=L.htmlForXfa,delete L.htmlForXfa,F._capability.resolve(new PDFDocumentProxy(L,this))}),N.on("DocException",function(L){let X;switch(L.name){case"PasswordException":X=new _util.PasswordException(L.message,L.code);break;case"InvalidPDFException":X=new _util.InvalidPDFException(L.message);break;case"MissingPDFException":X=new _util.MissingPDFException(L.message);break;case"UnexpectedResponseException":X=new _util.UnexpectedResponseException(L.message,L.status);break;case"UnknownErrorException":X=new _util.UnknownErrorException(L.message,L.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}F._capability.reject(X)}),N.on("PasswordRequest",L=>{if(Ie(this,v,new _util.PromiseCapability),F.onPassword){const X=V=>{V instanceof Error?M(this,v).reject(V):M(this,v).resolve({password:V})};try{F.onPassword(X,L.code)}catch(V){M(this,v).reject(V)}}else M(this,v).reject(new _util.PasswordException(L.message,L.code));return M(this,v).promise}),N.on("DataLoaded",L=>{var X;(X=F.onProgress)==null||X.call(F,{loaded:L.length,total:L.length}),this.downloadInfoCapability.resolve(L)}),N.on("StartRenderPage",L=>{this.destroyed||M(this,T).get(L.pageIndex)._startRenderPage(L.transparency,L.cacheKey)}),N.on("commonobj",([L,X,V])=>{var H;if(!this.destroyed&&!this.commonObjs.has(L))switch(X){case"Font":const ee=this._params;if("error"in V){const K=V.error;(0,_util.warn)(`Error during font loading: ${K}`),this.commonObjs.resolve(L,K);break}const Q=ee.pdfBug&&((H=globalThis.FontInspector)!=null&&H.enabled)?(K,se)=>globalThis.FontInspector.fontAdded(K,se):null,Z=new _font_loader.FontFaceObject(V,{isEvalSupported:ee.isEvalSupported,disableFontFace:ee.disableFontFace,ignoreErrors:ee.ignoreErrors,inspectFont:Q});this.fontLoader.bind(Z).catch(K=>N.sendWithPromise("FontFallback",{id:L})).finally(()=>{!ee.fontExtraProperties&&Z.data&&(Z.data=null),this.commonObjs.resolve(L,Z)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(L,V);break;default:throw new Error(`Got unknown common object type ${X}`)}}),N.on("obj",([L,X,V,H])=>{var Q;if(this.destroyed)return;const ee=M(this,T).get(X);if(!ee.objs.has(L))switch(V){case"Image":if(ee.objs.resolve(L,H),H){let Z;if(H.bitmap){const{width:K,height:se}=H;Z=K*se*4}else Z=((Q=H.data)==null?void 0:Q.length)||0;Z>_util.MAX_IMAGE_SIZE_TO_CACHE&&(ee._maybeCleanupAfterRender=!0)}break;case"Pattern":ee.objs.resolve(L,H);break;default:throw new Error(`Got unknown object type ${V}`)}}),N.on("DocProgress",L=>{var X;this.destroyed||((X=F.onProgress)==null||X.call(F,{loaded:L.loaded,total:L.total}))}),N.on("FetchBuiltInCMap",L=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(L):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),N.on("FetchStandardFontData",L=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(L):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var L;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:N,transfers:F}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:N,filename:((L=this._fullReader)==null?void 0:L.filename)??null},F).finally(()=>{this.annotationStorage.resetModified()})}getPage(N){if(!Number.isInteger(N)||N<=0||N>this._numPages)return Promise.reject(new Error("Invalid page request."));const F=N-1,L=M(this,A).get(F);if(L)return L;const X=this.messageHandler.sendWithPromise("GetPage",{pageIndex:F}).then(V=>{if(this.destroyed)throw new Error("Transport destroyed");const H=new PDFPageProxy(F,V,this,this._params.pdfBug);return M(this,T).set(F,H),H});return M(this,A).set(F,X),X}getPageIndex(N){return typeof N!="object"||N===null||!Number.isInteger(N.num)||N.num<0||!Number.isInteger(N.gen)||N.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:N.num,gen:N.gen})}getAnnotations(N,F){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:N,intent:F})}getFieldObjects(){return Te(this,S,In).call(this,"GetFieldObjects")}hasJSActions(){return Te(this,S,In).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(N){return typeof N!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:N})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Te(this,S,In).call(this,"GetDocJSActions")}getPageJSActions(N){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:N})}getStructTree(N){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:N})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(N=>new _optional_content_config.OptionalContentConfig(N))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const N="GetMetadata",F=M(this,b).get(N);if(F)return F;const L=this.messageHandler.sendWithPromise(N,null).then(X=>{var V,H;return{info:X[0],metadata:X[1]?new _metadata.Metadata(X[1]):null,contentDispositionFilename:((V=this._fullReader)==null?void 0:V.filename)??null,contentLength:((H=this._fullReader)==null?void 0:H.contentLength)??null}});return M(this,b).set(N,L),L}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(N=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const F of M(this,T).values())if(!F.cleanup())throw new Error(`startCleanup: Page ${F.pageNumber} is currently rendering.`);this.commonObjs.clear(),N||this.fontLoader.clear(),M(this,b).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:N,enableXfa:F}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:N,enableXfa:F})}}b=new WeakMap,T=new WeakMap,A=new WeakMap,v=new WeakMap,S=new WeakSet,In=function(N,F=null){const L=M(this,b).get(N);if(L)return L;const X=this.messageHandler.sendWithPromise(N,F);return M(this,b).set(N,X),X};class PDFObjects{constructor(){de(this,x);de(this,I,Object.create(null))}get(N,F=null){if(F){const X=Te(this,x,Yn).call(this,N);return X.capability.promise.then(()=>F(X.data)),null}const L=M(this,I)[N];if(!(L!=null&&L.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${N}.`);return L.data}has(N){var F;return((F=M(this,I)[N])==null?void 0:F.capability.settled)||!1}resolve(N,F=null){const L=Te(this,x,Yn).call(this,N);L.data=F,L.capability.resolve()}clear(){var N;for(const F in M(this,I)){const{data:L}=M(this,I)[F];(N=L==null?void 0:L.bitmap)==null||N.close()}Ie(this,I,Object.create(null))}}I=new WeakMap,x=new WeakSet,Yn=function(N){var F;return(F=M(this,I))[N]||(F[N]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(N){de(this,w,null);Ie(this,w,N),this.onContinue=null}get promise(){return M(this,w).capability.promise}cancel(N=0){M(this,w).cancel(null,N)}get separateAnnots(){const{separateAnnots:N}=M(this,w).operatorList;if(!N)return!1;const{annotationCanvasMap:F}=M(this,w);return N.form||N.canvas&&(F==null?void 0:F.size)>0}}w=new WeakMap,exports.RenderTask=RenderTask;const k=class k{constructor({callback:N,params:F,objs:L,commonObjs:X,annotationCanvasMap:V,operatorList:H,pageIndex:ee,canvasFactory:Q,filterFactory:Z,useRequestAnimationFrame:K=!1,pdfBug:se=!1,pageColors:ne=null}){this.callback=N,this.params=F,this.objs=L,this.commonObjs=X,this.annotationCanvasMap=V,this.operatorListIdx=null,this.operatorList=H,this._pageIndex=ee,this.canvasFactory=Q,this.filterFactory=Z,this._pdfBug=se,this.pageColors=ne,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=K===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=F.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:N=!1,optionalContentConfig:F}){var ee,Q;if(this.cancelled)return;if(this._canvas){if(M(k,C).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");M(k,C).add(this._canvas)}this._pdfBug&&((ee=globalThis.StepperManager)!=null&&ee.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:L,viewport:X,transform:V,background:H}=this.params;this.gfx=new _canvas.CanvasGraphics(L,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:F},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:V,viewport:X,transparency:N,background:H}),this.operatorListIdx=0,this.graphicsReady=!0,(Q=this.graphicsReadyCallback)==null||Q.call(this)}cancel(N=null,F=0){var L;this.running=!1,this.cancelled=!0,(L=this.gfx)==null||L.endDrawing(),M(k,C).delete(this._canvas),this.callback(N||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,F))}operatorListChanged(){var N;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(N=this.stepper)==null||N.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),M(k,C).delete(this._canvas),this.callback())))}};C=new WeakMap,de(k,C,new WeakSet);let InternalRenderTask=k;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(a,s,c)=>{var _,y,E,Dr,T;Object.defineProperty(s,"__esModule",{value:!0}),s.SerializableEmpty=s.PrintAnnotationStorage=s.AnnotationStorage=void 0;var u=c(1),d=c(4),h=c(8);const p=Object.freeze({map:null,hash:"",transfers:void 0});s.SerializableEmpty=p;class m{constructor(){de(this,E);de(this,_,!1);de(this,y,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(v,S){const O=M(this,y).get(v);return O===void 0?S:Object.assign(S,O)}getRawValue(v){return M(this,y).get(v)}remove(v){if(M(this,y).delete(v),M(this,y).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const S of M(this,y).values())if(S instanceof d.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(v,S){const O=M(this,y).get(v);let I=!1;if(O!==void 0)for(const[x,P]of Object.entries(S))O[x]!==P&&(I=!0,O[x]=P);else I=!0,M(this,y).set(v,S);I&&Te(this,E,Dr).call(this),S instanceof d.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(S.constructor._type)}has(v){return M(this,y).has(v)}getAll(){return M(this,y).size>0?(0,u.objectFromMap)(M(this,y)):null}setAll(v){for(const[S,O]of Object.entries(v))this.setValue(S,O)}get size(){return M(this,y).size}resetModified(){M(this,_)&&(Ie(this,_,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new f(this)}get serializable(){if(M(this,y).size===0)return p;const v=new Map,S=new h.MurmurHash3_64,O=[],I=Object.create(null);let x=!1;for(const[P,w]of M(this,y)){const C=w instanceof d.AnnotationEditor?w.serialize(!1,I):w;C&&(v.set(P,C),S.update(`${P}:${JSON.stringify(C)}`),x||(x=!!C.bitmap))}if(x)for(const P of v.values())P.bitmap&&O.push(P.bitmap);return v.size>0?{map:v,hash:S.hexdigest(),transfers:O}:p}}_=new WeakMap,y=new WeakMap,E=new WeakSet,Dr=function(){M(this,_)||(Ie(this,_,!0),typeof this.onSetModified=="function"&&this.onSetModified())},s.AnnotationStorage=m;class f extends m{constructor(S){super();de(this,T,void 0);const{map:O,hash:I,transfers:x}=S.serializable,P=structuredClone(O,x?{transfer:x}:null);Ie(this,T,{map:P,hash:I,transfers:x})}get print(){(0,u.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return M(this,T)}}T=new WeakMap,s.PrintAnnotationStorage=f},(a,s,c)=>{var f,_,y,E,b,T,A,v,S,O,I,x,P,w,C,Xn,R,Qn,F,Jn,X,er,H,Mr,Q,$r,K,Lr,ne,tr,he,Fr;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditor=void 0;var u=c(5),d=c(1),h=c(6);const D=class D{constructor(B){de(this,C);de(this,R);de(this,X);de(this,H);de(this,Q);de(this,K);de(this,ne);de(this,he);de(this,f,"");de(this,_,!1);de(this,y,null);de(this,E,null);de(this,b,null);de(this,T,!1);de(this,A,null);de(this,v,this.focusin.bind(this));de(this,S,this.focusout.bind(this));de(this,O,!1);de(this,I,!1);de(this,x,!1);Re(this,"_initialOptions",Object.create(null));Re(this,"_uiManager",null);Re(this,"_focusEventsAllowed",!0);Re(this,"_l10nPromise",null);de(this,P,!1);de(this,w,D._zIndex++);this.constructor===D&&(0,d.unreachable)("Cannot initialize AnnotationEditor."),this.parent=B.parent,this.id=B.id,this.width=this.height=null,this.pageIndex=B.parent.pageIndex,this.name=B.name,this.div=null,this._uiManager=B.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=B.isCentered,this._structTreeParentId=null;const{rotation:U,rawDims:{pageWidth:W,pageHeight:q,pageX:J,pageY:ae}}=this.parent.viewport;this.rotation=U,this.pageRotation=(360+U-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[W,q],this.pageTranslation=[J,ae];const[ce,ie]=this.parentDimensions;this.x=B.x/ce,this.y=B.y/ie,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,d.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(B){const U=new m({id:B.parent.getNextId(),parent:B.parent,uiManager:B._uiManager});U.annotationElementId=B.annotationElementId,U.deleted=!0,U._uiManager.addToAnnotationStorage(U)}static initialize(B,U=null){if(D._l10nPromise||(D._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(q=>[q,B.get(q)]))),U==null?void 0:U.strings)for(const q of U.strings)D._l10nPromise.set(q,B.get(q));if(D._borderLineWidth!==-1)return;const W=getComputedStyle(document.documentElement);D._borderLineWidth=parseFloat(W.getPropertyValue("--outline-width"))||0}static updateDefaultParams(B,U){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(B){return!1}static paste(B,U){(0,d.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return M(this,P)}set _isDraggable(B){var U;Ie(this,P,B),(U=this.div)==null||U.classList.toggle("draggable",B)}center(){const[B,U]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*U/(B*2),this.y+=this.width*B/(U*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*U/(B*2),this.y-=this.width*B/(U*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(B){this._uiManager.addCommands(B)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=M(this,w)}setParent(B){B!==null&&(this.pageIndex=B.pageIndex,this.pageDimensions=B.pageDimensions),this.parent=B}focusin(B){this._focusEventsAllowed&&(M(this,O)?Ie(this,O,!1):this.parent.setSelected(this))}focusout(B){var U,W;!this._focusEventsAllowed||!this.isAttachedToDOM||(U=B.relatedTarget)!=null&&U.closest(`#${this.id}`)||(B.preventDefault(),(W=this.parent)!=null&&W.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(B,U,W,q){const[J,ae]=this.parentDimensions;[W,q]=this.screenToPageTranslation(W,q),this.x=(B+W)/J,this.y=(U+q)/ae,this.fixAndSetPosition()}translate(B,U){Te(this,C,Xn).call(this,this.parentDimensions,B,U)}translateInPage(B,U){Te(this,C,Xn).call(this,this.pageDimensions,B,U),this.div.scrollIntoView({block:"nearest"})}drag(B,U){const[W,q]=this.parentDimensions;if(this.x+=B/W,this.y+=U/q,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:ue,y:Ee}=this.div.getBoundingClientRect();this.parent.findNewParent(this,ue,Ee)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:J,y:ae}=this;const[ce,ie]=Te(this,R,Qn).call(this);J+=ce,ae+=ie,this.div.style.left=`${(100*J).toFixed(2)}%`,this.div.style.top=`${(100*ae).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[B,U]=this.pageDimensions;let{x:W,y:q,width:J,height:ae}=this;switch(J*=B,ae*=U,W*=B,q*=U,this.rotation){case 0:W=Math.max(0,Math.min(B-J,W)),q=Math.max(0,Math.min(U-ae,q));break;case 90:W=Math.max(0,Math.min(B-ae,W)),q=Math.min(U,Math.max(J,q));break;case 180:W=Math.min(B,Math.max(J,W)),q=Math.min(U,Math.max(ae,q));break;case 270:W=Math.min(B,Math.max(ae,W)),q=Math.max(0,Math.min(U-J,q));break}this.x=W/=B,this.y=q/=U;const[ce,ie]=Te(this,R,Qn).call(this);W+=ce,q+=ie;const{style:ue}=this.div;ue.left=`${(100*W).toFixed(2)}%`,ue.top=`${(100*q).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(B,U){var W;return Te(W=D,F,Jn).call(W,B,U,this.parentRotation)}pageTranslationToScreen(B,U){var W;return Te(W=D,F,Jn).call(W,B,U,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:B,pageDimensions:[U,W]}=this,q=U*B,J=W*B;return d.FeatureTest.isCSSRoundSupported?[Math.round(q),Math.round(J)]:[q,J]}setDims(B,U){var J;const[W,q]=this.parentDimensions;this.div.style.width=`${(100*B/W).toFixed(2)}%`,M(this,T)||(this.div.style.height=`${(100*U/q).toFixed(2)}%`),(J=M(this,y))==null||J.classList.toggle("small",B<D.SMALL_EDITOR_SIZE||U<D.SMALL_EDITOR_SIZE)}fixDims(){const{style:B}=this.div,{height:U,width:W}=B,q=W.endsWith("%"),J=!M(this,T)&&U.endsWith("%");if(q&&J)return;const[ae,ce]=this.parentDimensions;q||(B.width=`${(100*parseFloat(W)/ae).toFixed(2)}%`),!M(this,T)&&!J&&(B.height=`${(100*parseFloat(U)/ce).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(M(this,y))return;const B=Ie(this,y,document.createElement("button"));B.className="altText";const U=await D._l10nPromise.get("editor_alt_text_button_label");B.textContent=U,B.setAttribute("aria-label",U),B.tabIndex="0",B.addEventListener("contextmenu",h.noContextMenu),B.addEventListener("pointerdown",W=>W.stopPropagation()),B.addEventListener("click",W=>{W.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),B.addEventListener("keydown",W=>{W.target===B&&W.key==="Enter"&&(W.preventDefault(),this._uiManager.editAltText(this))}),Te(this,ne,tr).call(this),this.div.append(B),D.SMALL_EDITOR_SIZE||(D.SMALL_EDITOR_SIZE=Math.min(128,Math.round(B.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:M(this,f),decorative:M(this,_)}}set altTextData({altText:B,decorative:U}){M(this,f)===B&&M(this,_)===U||(Ie(this,f,B),Ie(this,_,U),Te(this,ne,tr).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",M(this,v)),this.div.addEventListener("focusout",M(this,S));const[B,U]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*U/B).toFixed(2)}%`,this.div.style.maxHeight=`${(100*B/U).toFixed(2)}%`);const[W,q]=this.getInitialTranslation();return this.translate(W,q),(0,u.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(B){const{isMac:U}=d.FeatureTest.platform;if(B.button!==0||B.ctrlKey&&U){B.preventDefault();return}Ie(this,O,!0),Te(this,he,Fr).call(this,B)}moveInDOM(){var B;(B=this.parent)==null||B.moveEditorInDOM(this)}_setParentAndPosition(B,U,W){B.changeParent(this),this.x=U,this.y=W,this.fixAndSetPosition()}getRect(B,U){const W=this.parentScale,[q,J]=this.pageDimensions,[ae,ce]=this.pageTranslation,ie=B/W,ue=U/W,Ee=this.x*q,xe=this.y*J,ve=this.width*q,$e=this.height*J;switch(this.rotation){case 0:return[Ee+ie+ae,J-xe-ue-$e+ce,Ee+ie+ve+ae,J-xe-ue+ce];case 90:return[Ee+ue+ae,J-xe+ie+ce,Ee+ue+$e+ae,J-xe+ie+ve+ce];case 180:return[Ee-ie-ve+ae,J-xe+ue+ce,Ee-ie+ae,J-xe+ue+$e+ce];case 270:return[Ee-ue-$e+ae,J-xe-ie-ve+ce,Ee-ue+ae,J-xe-ie+ce];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(B,U){const[W,q,J,ae]=B,ce=J-W,ie=ae-q;switch(this.rotation){case 0:return[W,U-ae,ce,ie];case 90:return[W,U-q,ie,ce];case 180:return[J,U-q,ce,ie];case 270:return[J,U-ae,ie,ce];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Ie(this,x,!0)}disableEditMode(){Ie(this,x,!1)}isInEditMode(){return M(this,x)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var B,U;(B=this.div)==null||B.addEventListener("focusin",M(this,v)),(U=this.div)==null||U.addEventListener("focusout",M(this,S))}serialize(B=!1,U=null){(0,d.unreachable)("An editor must be serializable")}static deserialize(B,U,W){const q=new this.prototype.constructor({parent:U,id:U.getNextId(),uiManager:W});q.rotation=B.rotation;const[J,ae]=q.pageDimensions,[ce,ie,ue,Ee]=q.getRectInCurrentCoords(B.rect,ae);return q.x=ce/J,q.y=ie/ae,q.width=ue/J,q.height=Ee/ae,q}remove(){var B;this.div.removeEventListener("focusin",M(this,v)),this.div.removeEventListener("focusout",M(this,S)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(B=M(this,y))==null||B.remove(),Ie(this,y,null),Ie(this,E,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Te(this,H,Mr).call(this),M(this,A).classList.remove("hidden"))}select(){var B;this.makeResizable(),(B=this.div)==null||B.classList.add("selectedEditor")}unselect(){var B,U,W;(B=M(this,A))==null||B.classList.add("hidden"),(U=this.div)==null||U.classList.remove("selectedEditor"),(W=this.div)!=null&&W.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(B,U){}disableEditing(){M(this,y)&&(M(this,y).hidden=!0)}enableEditing(){M(this,y)&&(M(this,y).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return M(this,I)}set isEditing(B){Ie(this,I,B),this.parent&&(B?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(B,U){Ie(this,T,!0);const W=B/U,{style:q}=this.div;q.aspectRatio=W,q.height="auto"}static get MIN_SIZE(){return 16}};f=new WeakMap,_=new WeakMap,y=new WeakMap,E=new WeakMap,b=new WeakMap,T=new WeakMap,A=new WeakMap,v=new WeakMap,S=new WeakMap,O=new WeakMap,I=new WeakMap,x=new WeakMap,P=new WeakMap,w=new WeakMap,C=new WeakSet,Xn=function([B,U],W,q){[W,q]=this.screenToPageTranslation(W,q),this.x+=W/B,this.y+=q/U,this.fixAndSetPosition()},R=new WeakSet,Qn=function(){const[B,U]=this.parentDimensions,{_borderLineWidth:W}=D,q=W/B,J=W/U;switch(this.rotation){case 90:return[-q,J];case 180:return[q,J];case 270:return[q,-J];default:return[-q,-J]}},F=new WeakSet,Jn=function(B,U,W){switch(W){case 90:return[U,-B];case 180:return[-B,-U];case 270:return[-U,B];default:return[B,U]}},X=new WeakSet,er=function(B){switch(B){case 90:{const[U,W]=this.pageDimensions;return[0,-U/W,W/U,0]}case 180:return[-1,0,0,-1];case 270:{const[U,W]=this.pageDimensions;return[0,U/W,-W/U,0]}default:return[1,0,0,1]}},H=new WeakSet,Mr=function(){if(M(this,A))return;Ie(this,A,document.createElement("div")),M(this,A).classList.add("resizers");const B=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||B.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const U of B){const W=document.createElement("div");M(this,A).append(W),W.classList.add("resizer",U),W.addEventListener("pointerdown",Te(this,Q,$r).bind(this,U)),W.addEventListener("contextmenu",h.noContextMenu)}this.div.prepend(M(this,A))},Q=new WeakSet,$r=function(B,U){U.preventDefault();const{isMac:W}=d.FeatureTest.platform;if(U.button!==0||U.ctrlKey&&W)return;const q=Te(this,K,Lr).bind(this,B),J=this._isDraggable;this._isDraggable=!1;const ae={passive:!0,capture:!0};window.addEventListener("pointermove",q,ae);const ce=this.x,ie=this.y,ue=this.width,Ee=this.height,xe=this.parent.div.style.cursor,ve=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(U.target).cursor;const $e=()=>{this._isDraggable=J,window.removeEventListener("pointerup",$e),window.removeEventListener("blur",$e),window.removeEventListener("pointermove",q,ae),this.parent.div.style.cursor=xe,this.div.style.cursor=ve;const _e=this.x,Be=this.y,ze=this.width,Se=this.height;_e===ce&&Be===ie&&ze===ue&&Se===Ee||this.addCommands({cmd:()=>{this.width=ze,this.height=Se,this.x=_e,this.y=Be;const[pe,me]=this.parentDimensions;this.setDims(pe*ze,me*Se),this.fixAndSetPosition()},undo:()=>{this.width=ue,this.height=Ee,this.x=ce,this.y=ie;const[pe,me]=this.parentDimensions;this.setDims(pe*ue,me*Ee),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",$e),window.addEventListener("blur",$e)},K=new WeakSet,Lr=function(B,U){const[W,q]=this.parentDimensions,J=this.x,ae=this.y,ce=this.width,ie=this.height,ue=D.MIN_SIZE/W,Ee=D.MIN_SIZE/q,xe=Fe=>Math.round(Fe*1e4)/1e4,ve=Te(this,X,er).call(this,this.rotation),$e=(Fe,Ue)=>[ve[0]*Fe+ve[2]*Ue,ve[1]*Fe+ve[3]*Ue],_e=Te(this,X,er).call(this,360-this.rotation),Be=(Fe,Ue)=>[_e[0]*Fe+_e[2]*Ue,_e[1]*Fe+_e[3]*Ue];let ze,Se,pe=!1,me=!1;switch(B){case"topLeft":pe=!0,ze=(Fe,Ue)=>[0,0],Se=(Fe,Ue)=>[Fe,Ue];break;case"topMiddle":ze=(Fe,Ue)=>[Fe/2,0],Se=(Fe,Ue)=>[Fe/2,Ue];break;case"topRight":pe=!0,ze=(Fe,Ue)=>[Fe,0],Se=(Fe,Ue)=>[0,Ue];break;case"middleRight":me=!0,ze=(Fe,Ue)=>[Fe,Ue/2],Se=(Fe,Ue)=>[0,Ue/2];break;case"bottomRight":pe=!0,ze=(Fe,Ue)=>[Fe,Ue],Se=(Fe,Ue)=>[0,0];break;case"bottomMiddle":ze=(Fe,Ue)=>[Fe/2,Ue],Se=(Fe,Ue)=>[Fe/2,0];break;case"bottomLeft":pe=!0,ze=(Fe,Ue)=>[0,Ue],Se=(Fe,Ue)=>[Fe,0];break;case"middleLeft":me=!0,ze=(Fe,Ue)=>[0,Ue/2],Se=(Fe,Ue)=>[Fe,Ue/2];break}const Oe=ze(ce,ie),Le=Se(ce,ie);let We=$e(...Le);const Ze=xe(J+We[0]),Qe=xe(ae+We[1]);let Je=1,tt=1,[rt,at]=this.screenToPageTranslation(U.movementX,U.movementY);if([rt,at]=Be(rt/W,at/q),pe){const Fe=Math.hypot(ce,ie);Je=tt=Math.max(Math.min(Math.hypot(Le[0]-Oe[0]-rt,Le[1]-Oe[1]-at)/Fe,1/ce,1/ie),ue/ce,Ee/ie)}else me?Je=Math.max(ue,Math.min(1,Math.abs(Le[0]-Oe[0]-rt)))/ce:tt=Math.max(Ee,Math.min(1,Math.abs(Le[1]-Oe[1]-at)))/ie;const it=xe(ce*Je),Ne=xe(ie*tt);We=$e(...Se(it,Ne));const ye=Ze-We[0],ge=Qe-We[1];this.width=it,this.height=Ne,this.x=ye,this.y=ge,this.setDims(W*it,q*Ne),this.fixAndSetPosition()},ne=new WeakSet,tr=async function(){var W;const B=M(this,y);if(!B)return;if(!M(this,f)&&!M(this,_)){B.classList.remove("done"),(W=M(this,E))==null||W.remove();return}D._l10nPromise.get("editor_alt_text_edit_button_label").then(q=>{B.setAttribute("aria-label",q)});let U=M(this,E);if(!U){Ie(this,E,U=document.createElement("span")),U.className="tooltip",U.setAttribute("role","tooltip");const q=U.id=`alt-text-tooltip-${this.id}`;B.setAttribute("aria-describedby",q);const J=100;B.addEventListener("mouseenter",()=>{Ie(this,b,setTimeout(()=>{Ie(this,b,null),M(this,E).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},J))}),B.addEventListener("mouseleave",()=>{var ae;clearTimeout(M(this,b)),Ie(this,b,null),(ae=M(this,E))==null||ae.classList.remove("show")})}B.classList.add("done"),U.innerText=M(this,_)?await D._l10nPromise.get("editor_alt_text_decorative_tooltip"):M(this,f),U.parentNode||B.append(U)},he=new WeakSet,Fr=function(B){if(!this._isDraggable)return;const U=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let W,q;U&&(W={passive:!0,capture:!0},q=ae=>{const[ce,ie]=this.screenToPageTranslation(ae.movementX,ae.movementY);this._uiManager.dragSelectedEditors(ce,ie)},window.addEventListener("pointermove",q,W));const J=()=>{if(window.removeEventListener("pointerup",J),window.removeEventListener("blur",J),U&&window.removeEventListener("pointermove",q,W),Ie(this,O,!1),!this._uiManager.endDragSession()){const{isMac:ae}=d.FeatureTest.platform;B.ctrlKey&&!ae||B.shiftKey||B.metaKey&&ae?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",J),window.addEventListener("blur",J)},de(D,F),Re(D,"_borderLineWidth",-1),Re(D,"_colorManager",new u.ColorManager),Re(D,"_zIndex",1),Re(D,"SMALL_EDITOR_SIZE",0);let p=D;s.AnnotationEditor=p;class m extends p{constructor(B){super(B),this.annotationElementId=B.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(a,s,c)=>{var T,A,v,S,O,nr,P,w,C,k,R,Br,L,X,V,H,ee,Q,Z,K,se,ne,le,he,Y,D,G,B,U,W,q,J,ae,ce,ie,ue,Ee,xe,ve,$e,_e,Be,ze,Se,pe,me,Oe,Gr,We,rr,Qe,ar,tt,wn,at,ir,Ne,or,ge,Dt,Ue,dn,pt,jr,Pe,Ur,Ce,sr,Ge,hn,Me,lr;Object.defineProperty(s,"__esModule",{value:!0}),s.KeyboardManager=s.CommandManager=s.ColorManager=s.AnnotationEditorUIManager=void 0,s.bindEvents=h,s.opacityToHex=p;var u=c(1),d=c(6);function h(re,j,te){for(const oe of te)j.addEventListener(oe,re[oe].bind(re))}function p(re){return Math.round(Math.min(255,Math.max(1,255*re))).toString(16).padStart(2,"0")}class m{constructor(){de(this,T,0)}getId(){return`${u.AnnotationEditorPrefix}${un(this,T)._++}`}}T=new WeakMap;const x=class x{constructor(){de(this,O);de(this,A,(0,u.getUuid)());de(this,v,0);de(this,S,null)}static get _isSVGFittingCanvas(){const j='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',te=new OffscreenCanvas(1,3).getContext("2d"),oe=new Image;oe.src=j;const fe=oe.decode().then(()=>(te.drawImage(oe,0,0,1,1,0,0,1,3),new Uint32Array(te.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,u.shadow)(this,"_isSVGFittingCanvas",fe)}async getFromFile(j){const{lastModified:te,name:oe,size:fe,type:be}=j;return Te(this,O,nr).call(this,`${te}_${oe}_${fe}_${be}`,j)}async getFromUrl(j){return Te(this,O,nr).call(this,j,j)}async getFromId(j){M(this,S)||Ie(this,S,new Map);const te=M(this,S).get(j);return te?te.bitmap?(te.refCounter+=1,te):te.file?this.getFromFile(te.file):this.getFromUrl(te.url):null}getSvgUrl(j){const te=M(this,S).get(j);return te!=null&&te.isSvg?te.svgUrl:null}deleteId(j){M(this,S)||Ie(this,S,new Map);const te=M(this,S).get(j);te&&(te.refCounter-=1,te.refCounter===0&&(te.bitmap=null))}isValidId(j){return j.startsWith(`image_${M(this,A)}_`)}};A=new WeakMap,v=new WeakMap,S=new WeakMap,O=new WeakSet,nr=async function(j,te){M(this,S)||Ie(this,S,new Map);let oe=M(this,S).get(j);if(oe===null)return null;if(oe!=null&&oe.bitmap)return oe.refCounter+=1,oe;try{oe||(oe={bitmap:null,id:`image_${M(this,A)}_${un(this,v)._++}`,refCounter:0,isSvg:!1});let fe;if(typeof te=="string"){oe.url=te;const be=await fetch(te);if(!be.ok)throw new Error(be.statusText);fe=await be.blob()}else fe=oe.file=te;if(fe.type==="image/svg+xml"){const be=x._isSVGFittingCanvas,we=new FileReader,je=new Image,Ve=new Promise((Ye,Ke)=>{je.onload=()=>{oe.bitmap=je,oe.isSvg=!0,Ye()},we.onload=async()=>{const He=oe.svgUrl=we.result;je.src=await be?`${He}#svgView(preserveAspectRatio(none))`:He},je.onerror=we.onerror=Ke});we.readAsDataURL(fe),await Ve}else oe.bitmap=await createImageBitmap(fe);oe.refCounter=1}catch(fe){console.error(fe),oe=null}return M(this,S).set(j,oe),oe&&M(this,S).set(oe.id,oe),oe};let f=x;class _{constructor(j=128){de(this,P,[]);de(this,w,!1);de(this,C,void 0);de(this,k,-1);Ie(this,C,j)}add({cmd:j,undo:te,mustExec:oe,type:fe=NaN,overwriteIfSameType:be=!1,keepUndo:we=!1}){if(oe&&j(),M(this,w))return;const je={cmd:j,undo:te,type:fe};if(M(this,k)===-1){M(this,P).length>0&&(M(this,P).length=0),Ie(this,k,0),M(this,P).push(je);return}if(be&&M(this,P)[M(this,k)].type===fe){we&&(je.undo=M(this,P)[M(this,k)].undo),M(this,P)[M(this,k)]=je;return}const Ve=M(this,k)+1;Ve===M(this,C)?M(this,P).splice(0,1):(Ie(this,k,Ve),Ve<M(this,P).length&&M(this,P).splice(Ve)),M(this,P).push(je)}undo(){M(this,k)!==-1&&(Ie(this,w,!0),M(this,P)[M(this,k)].undo(),Ie(this,w,!1),Ie(this,k,M(this,k)-1))}redo(){M(this,k)<M(this,P).length-1&&(Ie(this,k,M(this,k)+1),Ie(this,w,!0),M(this,P)[M(this,k)].cmd(),Ie(this,w,!1))}hasSomethingToUndo(){return M(this,k)!==-1}hasSomethingToRedo(){return M(this,k)<M(this,P).length-1}destroy(){Ie(this,P,null)}}P=new WeakMap,w=new WeakMap,C=new WeakMap,k=new WeakMap,s.CommandManager=_;class y{constructor(j){de(this,R);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:te}=u.FeatureTest.platform;for(const[oe,fe,be={}]of j)for(const we of oe){const je=we.startsWith("mac+");te&&je?(this.callbacks.set(we.slice(4),{callback:fe,options:be}),this.allKeys.add(we.split("+").at(-1))):!te&&!je&&(this.callbacks.set(we,{callback:fe,options:be}),this.allKeys.add(we.split("+").at(-1)))}}exec(j,te){if(!this.allKeys.has(te.key))return;const oe=this.callbacks.get(Te(this,R,Br).call(this,te));if(!oe)return;const{callback:fe,options:{bubbles:be=!1,args:we=[],checker:je=null}}=oe;je&&!je(j,te)||(fe.bind(j,...we)(),be||(te.stopPropagation(),te.preventDefault()))}}R=new WeakSet,Br=function(j){j.altKey&&this.buffer.push("alt"),j.ctrlKey&&this.buffer.push("ctrl"),j.metaKey&&this.buffer.push("meta"),j.shiftKey&&this.buffer.push("shift"),this.buffer.push(j.key);const te=this.buffer.join("+");return this.buffer.length=0,te},s.KeyboardManager=y;const F=class F{get _colors(){const j=new Map([["CanvasText",null],["Canvas",null]]);return(0,d.getColorValues)(j),(0,u.shadow)(this,"_colors",j)}convert(j){const te=(0,d.getRGB)(j);if(!window.matchMedia("(forced-colors: active)").matches)return te;for(const[oe,fe]of this._colors)if(fe.every((be,we)=>be===te[we]))return F._colorsMapping.get(oe);return te}getHexCode(j){const te=this._colors.get(j);return te?u.Util.makeHexColor(...te):j}};Re(F,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let E=F;s.ColorManager=E;const ke=class ke{constructor(j,te,oe,fe,be,we){de(this,Oe);de(this,We);de(this,Qe);de(this,tt);de(this,at);de(this,Ne);de(this,ge);de(this,Ue);de(this,pt);de(this,Pe);de(this,Ce);de(this,Ge);de(this,Me);de(this,L,null);de(this,X,new Map);de(this,V,new Map);de(this,H,null);de(this,ee,null);de(this,Q,new _);de(this,Z,0);de(this,K,new Set);de(this,se,null);de(this,ne,null);de(this,le,new Set);de(this,he,null);de(this,Y,new m);de(this,D,!1);de(this,G,!1);de(this,B,null);de(this,U,u.AnnotationEditorType.NONE);de(this,W,new Set);de(this,q,null);de(this,J,this.blur.bind(this));de(this,ae,this.focus.bind(this));de(this,ce,this.copy.bind(this));de(this,ie,this.cut.bind(this));de(this,ue,this.paste.bind(this));de(this,Ee,this.keydown.bind(this));de(this,xe,this.onEditingAction.bind(this));de(this,ve,this.onPageChanging.bind(this));de(this,$e,this.onScaleChanging.bind(this));de(this,_e,this.onRotationChanging.bind(this));de(this,Be,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});de(this,ze,[0,0]);de(this,Se,null);de(this,pe,null);de(this,me,null);Ie(this,pe,j),Ie(this,me,te),Ie(this,H,oe),this._eventBus=fe,this._eventBus._on("editingaction",M(this,xe)),this._eventBus._on("pagechanging",M(this,ve)),this._eventBus._on("scalechanging",M(this,$e)),this._eventBus._on("rotationchanging",M(this,_e)),Ie(this,ee,be.annotationStorage),Ie(this,he,be.filterFactory),Ie(this,q,we),this.viewParameters={realScale:d.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const j=ke.prototype,te=be=>{const{activeElement:we}=document;return we&&M(be,pe).contains(we)&&be.hasSomethingToControl()},oe=this.TRANSLATE_SMALL,fe=this.TRANSLATE_BIG;return(0,u.shadow)(this,"_keyboardManager",new y([[["ctrl+a","mac+meta+a"],j.selectAll],[["ctrl+z","mac+meta+z"],j.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],j.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],j.delete],[["Escape","mac+Escape"],j.unselectAll],[["ArrowLeft","mac+ArrowLeft"],j.translateSelectedEditors,{args:[-oe,0],checker:te}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],j.translateSelectedEditors,{args:[-fe,0],checker:te}],[["ArrowRight","mac+ArrowRight"],j.translateSelectedEditors,{args:[oe,0],checker:te}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],j.translateSelectedEditors,{args:[fe,0],checker:te}],[["ArrowUp","mac+ArrowUp"],j.translateSelectedEditors,{args:[0,-oe],checker:te}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],j.translateSelectedEditors,{args:[0,-fe],checker:te}],[["ArrowDown","mac+ArrowDown"],j.translateSelectedEditors,{args:[0,oe],checker:te}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],j.translateSelectedEditors,{args:[0,fe],checker:te}]]))}destroy(){Te(this,tt,wn).call(this),Te(this,We,rr).call(this),this._eventBus._off("editingaction",M(this,xe)),this._eventBus._off("pagechanging",M(this,ve)),this._eventBus._off("scalechanging",M(this,$e)),this._eventBus._off("rotationchanging",M(this,_e));for(const j of M(this,V).values())j.destroy();M(this,V).clear(),M(this,X).clear(),M(this,le).clear(),Ie(this,L,null),M(this,W).clear(),M(this,Q).destroy(),M(this,H).destroy()}get hcmFilter(){return(0,u.shadow)(this,"hcmFilter",M(this,q)?M(this,he).addHCMFilter(M(this,q).foreground,M(this,q).background):"none")}get direction(){return(0,u.shadow)(this,"direction",getComputedStyle(M(this,pe)).direction)}editAltText(j){var te;(te=M(this,H))==null||te.editAltText(this,j)}onPageChanging({pageNumber:j}){Ie(this,Z,j-1)}focusMainContainer(){M(this,pe).focus()}findParent(j,te){for(const oe of M(this,V).values()){const{x:fe,y:be,width:we,height:je}=oe.div.getBoundingClientRect();if(j>=fe&&j<=fe+we&&te>=be&&te<=be+je)return oe}return null}disableUserSelect(j=!1){M(this,me).classList.toggle("noUserSelect",j)}addShouldRescale(j){M(this,le).add(j)}removeShouldRescale(j){M(this,le).delete(j)}onScaleChanging({scale:j}){this.commitOrRemove(),this.viewParameters.realScale=j*d.PixelsPerInch.PDF_TO_CSS_UNITS;for(const te of M(this,le))te.onScaleChanging()}onRotationChanging({pagesRotation:j}){this.commitOrRemove(),this.viewParameters.rotation=j}addToAnnotationStorage(j){!j.isEmpty()&&M(this,ee)&&!M(this,ee).has(j.id)&&M(this,ee).setValue(j.id,j)}blur(){if(!this.hasSelection)return;const{activeElement:j}=document;for(const te of M(this,W))if(te.div.contains(j)){Ie(this,B,[te,j]),te._focusEventsAllowed=!1;break}}focus(){if(!M(this,B))return;const[j,te]=M(this,B);Ie(this,B,null),te.addEventListener("focusin",()=>{j._focusEventsAllowed=!0},{once:!0}),te.focus()}addEditListeners(){Te(this,Qe,ar).call(this),Te(this,at,ir).call(this)}removeEditListeners(){Te(this,tt,wn).call(this),Te(this,Ne,or).call(this)}copy(j){var oe;if(j.preventDefault(),(oe=M(this,L))==null||oe.commitOrRemove(),!this.hasSelection)return;const te=[];for(const fe of M(this,W)){const be=fe.serialize(!0);be&&te.push(be)}te.length!==0&&j.clipboardData.setData("application/pdfjs",JSON.stringify(te))}cut(j){this.copy(j),this.delete()}paste(j){j.preventDefault();const{clipboardData:te}=j;for(const be of te.items)for(const we of M(this,ne))if(we.isHandlingMimeForPasting(be.type)){we.paste(be,this.currentLayer);return}let oe=te.getData("application/pdfjs");if(!oe)return;try{oe=JSON.parse(oe)}catch(be){(0,u.warn)(`paste: "${be.message}".`);return}if(!Array.isArray(oe))return;this.unselectAll();const fe=this.currentLayer;try{const be=[];for(const Ve of oe){const Ye=fe.deserialize(Ve);if(!Ye)return;be.push(Ye)}const we=()=>{for(const Ve of be)Te(this,Ce,sr).call(this,Ve);Te(this,Me,lr).call(this,be)},je=()=>{for(const Ve of be)Ve.remove()};this.addCommands({cmd:we,undo:je,mustExec:!0})}catch(be){(0,u.warn)(`paste: "${be.message}".`)}}keydown(j){var te;(te=this.getActive())!=null&&te.shouldGetKeyboardEvents()||ke._keyboardManager.exec(this,j)}onEditingAction(j){["undo","redo","delete","selectAll"].includes(j.name)&&this[j.name]()}setEditingState(j){j?(Te(this,Oe,Gr).call(this),Te(this,Qe,ar).call(this),Te(this,at,ir).call(this),Te(this,ge,Dt).call(this,{isEditing:M(this,U)!==u.AnnotationEditorType.NONE,isEmpty:Te(this,Ge,hn).call(this),hasSomethingToUndo:M(this,Q).hasSomethingToUndo(),hasSomethingToRedo:M(this,Q).hasSomethingToRedo(),hasSelectedEditor:!1})):(Te(this,We,rr).call(this),Te(this,tt,wn).call(this),Te(this,Ne,or).call(this),Te(this,ge,Dt).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(j){if(!M(this,ne)){Ie(this,ne,j);for(const te of M(this,ne))Te(this,Ue,dn).call(this,te.defaultPropertiesToUpdate)}}getId(){return M(this,Y).getId()}get currentLayer(){return M(this,V).get(M(this,Z))}getLayer(j){return M(this,V).get(j)}get currentPageIndex(){return M(this,Z)}addLayer(j){M(this,V).set(j.pageIndex,j),M(this,D)?j.enable():j.disable()}removeLayer(j){M(this,V).delete(j.pageIndex)}updateMode(j,te=null){if(M(this,U)!==j){if(Ie(this,U,j),j===u.AnnotationEditorType.NONE){this.setEditingState(!1),Te(this,Pe,Ur).call(this);return}this.setEditingState(!0),Te(this,pt,jr).call(this),this.unselectAll();for(const oe of M(this,V).values())oe.updateMode(j);if(te){for(const oe of M(this,X).values())if(oe.annotationElementId===te){this.setSelected(oe),oe.enterInEditMode();break}}}}updateToolbar(j){j!==M(this,U)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:j})}updateParams(j,te){if(M(this,ne)){if(j===u.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(j);return}for(const oe of M(this,W))oe.updateParams(j,te);for(const oe of M(this,ne))oe.updateDefaultParams(j,te)}}enableWaiting(j=!1){if(M(this,G)!==j){Ie(this,G,j);for(const te of M(this,V).values())j?te.disableClick():te.enableClick(),te.div.classList.toggle("waiting",j)}}getEditors(j){const te=[];for(const oe of M(this,X).values())oe.pageIndex===j&&te.push(oe);return te}getEditor(j){return M(this,X).get(j)}addEditor(j){M(this,X).set(j.id,j)}removeEditor(j){var te;M(this,X).delete(j.id),this.unselect(j),(!j.annotationElementId||!M(this,K).has(j.annotationElementId))&&((te=M(this,ee))==null||te.remove(j.id))}addDeletedAnnotationElement(j){M(this,K).add(j.annotationElementId),j.deleted=!0}isDeletedAnnotationElement(j){return M(this,K).has(j)}removeDeletedAnnotationElement(j){M(this,K).delete(j.annotationElementId),j.deleted=!1}setActiveEditor(j){M(this,L)!==j&&(Ie(this,L,j),j&&Te(this,Ue,dn).call(this,j.propertiesToUpdate))}toggleSelected(j){if(M(this,W).has(j)){M(this,W).delete(j),j.unselect(),Te(this,ge,Dt).call(this,{hasSelectedEditor:this.hasSelection});return}M(this,W).add(j),j.select(),Te(this,Ue,dn).call(this,j.propertiesToUpdate),Te(this,ge,Dt).call(this,{hasSelectedEditor:!0})}setSelected(j){for(const te of M(this,W))te!==j&&te.unselect();M(this,W).clear(),M(this,W).add(j),j.select(),Te(this,Ue,dn).call(this,j.propertiesToUpdate),Te(this,ge,Dt).call(this,{hasSelectedEditor:!0})}isSelected(j){return M(this,W).has(j)}unselect(j){j.unselect(),M(this,W).delete(j),Te(this,ge,Dt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return M(this,W).size!==0}undo(){M(this,Q).undo(),Te(this,ge,Dt).call(this,{hasSomethingToUndo:M(this,Q).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Te(this,Ge,hn).call(this)})}redo(){M(this,Q).redo(),Te(this,ge,Dt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:M(this,Q).hasSomethingToRedo(),isEmpty:Te(this,Ge,hn).call(this)})}addCommands(j){M(this,Q).add(j),Te(this,ge,Dt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Te(this,Ge,hn).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const j=[...M(this,W)],te=()=>{for(const fe of j)fe.remove()},oe=()=>{for(const fe of j)Te(this,Ce,sr).call(this,fe)};this.addCommands({cmd:te,undo:oe,mustExec:!0})}commitOrRemove(){var j;(j=M(this,L))==null||j.commitOrRemove()}hasSomethingToControl(){return M(this,L)||this.hasSelection}selectAll(){for(const j of M(this,W))j.commit();Te(this,Me,lr).call(this,M(this,X).values())}unselectAll(){if(M(this,L)){M(this,L).commitOrRemove();return}if(this.hasSelection){for(const j of M(this,W))j.unselect();M(this,W).clear(),Te(this,ge,Dt).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(j,te,oe=!1){if(oe||this.commitOrRemove(),!this.hasSelection)return;M(this,ze)[0]+=j,M(this,ze)[1]+=te;const[fe,be]=M(this,ze),we=[...M(this,W)];M(this,Se)&&clearTimeout(M(this,Se)),Ie(this,Se,setTimeout(()=>{Ie(this,Se,null),M(this,ze)[0]=M(this,ze)[1]=0,this.addCommands({cmd:()=>{for(const Ve of we)M(this,X).has(Ve.id)&&Ve.translateInPage(fe,be)},undo:()=>{for(const Ve of we)M(this,X).has(Ve.id)&&Ve.translateInPage(-fe,-be)},mustExec:!1})},1e3));for(const Ve of we)Ve.translateInPage(j,te)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Ie(this,se,new Map);for(const j of M(this,W))M(this,se).set(j,{savedX:j.x,savedY:j.y,savedPageIndex:j.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!M(this,se))return!1;this.disableUserSelect(!1);const j=M(this,se);Ie(this,se,null);let te=!1;for(const[{x:fe,y:be,pageIndex:we},je]of j)je.newX=fe,je.newY=be,je.newPageIndex=we,te||(te=fe!==je.savedX||be!==je.savedY||we!==je.savedPageIndex);if(!te)return!1;const oe=(fe,be,we,je)=>{if(M(this,X).has(fe.id)){const Ve=M(this,V).get(je);Ve?fe._setParentAndPosition(Ve,be,we):(fe.pageIndex=je,fe.x=be,fe.y=we)}};return this.addCommands({cmd:()=>{for(const[fe,{newX:be,newY:we,newPageIndex:je}]of j)oe(fe,be,we,je)},undo:()=>{for(const[fe,{savedX:be,savedY:we,savedPageIndex:je}]of j)oe(fe,be,we,je)},mustExec:!0}),!0}dragSelectedEditors(j,te){if(M(this,se))for(const oe of M(this,se).keys())oe.drag(j,te)}rebuild(j){if(j.parent===null){const te=this.getLayer(j.pageIndex);te?(te.changeParent(j),te.addOrRebuild(j)):(this.addEditor(j),this.addToAnnotationStorage(j),j.rebuild())}else j.parent.addOrRebuild(j)}isActive(j){return M(this,L)===j}getActive(){return M(this,L)}getMode(){return M(this,U)}get imageManager(){return(0,u.shadow)(this,"imageManager",new f)}};L=new WeakMap,X=new WeakMap,V=new WeakMap,H=new WeakMap,ee=new WeakMap,Q=new WeakMap,Z=new WeakMap,K=new WeakMap,se=new WeakMap,ne=new WeakMap,le=new WeakMap,he=new WeakMap,Y=new WeakMap,D=new WeakMap,G=new WeakMap,B=new WeakMap,U=new WeakMap,W=new WeakMap,q=new WeakMap,J=new WeakMap,ae=new WeakMap,ce=new WeakMap,ie=new WeakMap,ue=new WeakMap,Ee=new WeakMap,xe=new WeakMap,ve=new WeakMap,$e=new WeakMap,_e=new WeakMap,Be=new WeakMap,ze=new WeakMap,Se=new WeakMap,pe=new WeakMap,me=new WeakMap,Oe=new WeakSet,Gr=function(){window.addEventListener("focus",M(this,ae)),window.addEventListener("blur",M(this,J))},We=new WeakSet,rr=function(){window.removeEventListener("focus",M(this,ae)),window.removeEventListener("blur",M(this,J))},Qe=new WeakSet,ar=function(){window.addEventListener("keydown",M(this,Ee),{capture:!0})},tt=new WeakSet,wn=function(){window.removeEventListener("keydown",M(this,Ee),{capture:!0})},at=new WeakSet,ir=function(){document.addEventListener("copy",M(this,ce)),document.addEventListener("cut",M(this,ie)),document.addEventListener("paste",M(this,ue))},Ne=new WeakSet,or=function(){document.removeEventListener("copy",M(this,ce)),document.removeEventListener("cut",M(this,ie)),document.removeEventListener("paste",M(this,ue))},ge=new WeakSet,Dt=function(j){Object.entries(j).some(([te,oe])=>M(this,Be)[te]!==oe)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(M(this,Be),j)})},Ue=new WeakSet,dn=function(j){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:j})},pt=new WeakSet,jr=function(){if(!M(this,D)){Ie(this,D,!0);for(const j of M(this,V).values())j.enable()}},Pe=new WeakSet,Ur=function(){if(this.unselectAll(),M(this,D)){Ie(this,D,!1);for(const j of M(this,V).values())j.disable()}},Ce=new WeakSet,sr=function(j){const te=M(this,V).get(j.pageIndex);te?te.addOrRebuild(j):this.addEditor(j)},Ge=new WeakSet,hn=function(){if(M(this,X).size===0)return!0;if(M(this,X).size===1)for(const j of M(this,X).values())return j.isEmpty();return!1},Me=new WeakSet,lr=function(j){M(this,W).clear();for(const te of j)te.isEmpty()||(M(this,W).add(te),te.select());Te(this,ge,Dt).call(this,{hasSelectedEditor:!0})},Re(ke,"TRANSLATE_SMALL",1),Re(ke,"TRANSLATE_BIG",10);let b=ke;s.AnnotationEditorUIManager=b},(a,s,c)=>{var Z,K,se,ne,le,he,Y,D,G,B,U,W,rn,J,an,ce,cr,ue,xn,xe,On,$e,pn,Be,mn;Object.defineProperty(s,"__esModule",{value:!0}),s.StatTimer=s.RenderingCancelledException=s.PixelsPerInch=s.PageViewport=s.PDFDateString=s.DOMStandardFontDataFactory=s.DOMSVGFactory=s.DOMFilterFactory=s.DOMCanvasFactory=s.DOMCMapReaderFactory=void 0,s.deprecated=k,s.getColorValues=X,s.getCurrentTransform=V,s.getCurrentTransformInverse=H,s.getFilenameFromUrl=O,s.getPdfFilenameFromUrl=I,s.getRGB=L,s.getXfaPageViewport=F,s.isDataScheme=v,s.isPdfFile=S,s.isValidFetchUrl=P,s.loadScript=C,s.noContextMenu=w,s.setLayerDimensions=ee;var u=c(7),d=c(1);const h="http://www.w3.org/2000/svg",Q=class Q{};Re(Q,"CSS",96),Re(Q,"PDF",72),Re(Q,"PDF_TO_CSS_UNITS",Q.CSS/Q.PDF);let p=Q;s.PixelsPerInch=p;class m extends u.BaseFilterFactory{constructor({docId:me,ownerDocument:Oe=globalThis.document}={}){super();de(this,W);de(this,J);de(this,ce);de(this,ue);de(this,xe);de(this,$e);de(this,Be);de(this,Z,void 0);de(this,K,void 0);de(this,se,void 0);de(this,ne,void 0);de(this,le,void 0);de(this,he,void 0);de(this,Y,void 0);de(this,D,void 0);de(this,G,void 0);de(this,B,void 0);de(this,U,0);Ie(this,se,me),Ie(this,ne,Oe)}addFilter(me){if(!me)return"none";let Oe=M(this,W,rn).get(me);if(Oe)return Oe;let Le,We,Ze,Qe;if(me.length===1){const at=me[0],it=new Array(256);for(let Ne=0;Ne<256;Ne++)it[Ne]=at[Ne]/255;Qe=Le=We=Ze=it.join(",")}else{const[at,it,Ne]=me,ye=new Array(256),ge=new Array(256),Fe=new Array(256);for(let Ue=0;Ue<256;Ue++)ye[Ue]=at[Ue]/255,ge[Ue]=it[Ue]/255,Fe[Ue]=Ne[Ue]/255;Le=ye.join(","),We=ge.join(","),Ze=Fe.join(","),Qe=`${Le}${We}${Ze}`}if(Oe=M(this,W,rn).get(Qe),Oe)return M(this,W,rn).set(me,Oe),Oe;const Je=`g_${M(this,se)}_transfer_map_${un(this,U)._++}`,tt=`url(#${Je})`;M(this,W,rn).set(me,tt),M(this,W,rn).set(Qe,tt);const rt=Te(this,ue,xn).call(this,Je);return Te(this,$e,pn).call(this,Le,We,Ze,rt),tt}addHCMFilter(me,Oe){var it;const Le=`${me}-${Oe}`;if(M(this,he)===Le)return M(this,Y);if(Ie(this,he,Le),Ie(this,Y,"none"),(it=M(this,le))==null||it.remove(),!me||!Oe)return M(this,Y);const We=Te(this,Be,mn).call(this,me);me=d.Util.makeHexColor(...We);const Ze=Te(this,Be,mn).call(this,Oe);if(Oe=d.Util.makeHexColor(...Ze),M(this,J,an).style.color="",me==="#000000"&&Oe==="#ffffff"||me===Oe)return M(this,Y);const Qe=new Array(256);for(let Ne=0;Ne<=255;Ne++){const ye=Ne/255;Qe[Ne]=ye<=.03928?ye/12.92:((ye+.055)/1.055)**2.4}const Je=Qe.join(","),tt=`g_${M(this,se)}_hcm_filter`,rt=Ie(this,D,Te(this,ue,xn).call(this,tt));Te(this,$e,pn).call(this,Je,Je,Je,rt),Te(this,ce,cr).call(this,rt);const at=(Ne,ye)=>{const ge=We[Ne]/255,Fe=Ze[Ne]/255,Ue=new Array(ye+1);for(let dt=0;dt<=ye;dt++)Ue[dt]=ge+dt/ye*(Fe-ge);return Ue.join(",")};return Te(this,$e,pn).call(this,at(0,5),at(1,5),at(2,5),rt),Ie(this,Y,`url(#${tt})`),M(this,Y)}addHighlightHCMFilter(me,Oe,Le,We){var Fe;const Ze=`${me}-${Oe}-${Le}-${We}`;if(M(this,G)===Ze)return M(this,B);if(Ie(this,G,Ze),Ie(this,B,"none"),(Fe=M(this,D))==null||Fe.remove(),!me||!Oe)return M(this,B);const[Qe,Je]=[me,Oe].map(Te(this,Be,mn).bind(this));let tt=Math.round(.2126*Qe[0]+.7152*Qe[1]+.0722*Qe[2]),rt=Math.round(.2126*Je[0]+.7152*Je[1]+.0722*Je[2]),[at,it]=[Le,We].map(Te(this,Be,mn).bind(this));rt<tt&&([tt,rt,at,it]=[rt,tt,it,at]),M(this,J,an).style.color="";const Ne=(Ue,dt,pt)=>{const Ae=new Array(256),Pe=(rt-tt)/pt,De=Ue/255,Ce=(dt-Ue)/(255*pt);let Xe=0;for(let Ge=0;Ge<=pt;Ge++){const et=Math.round(tt+Ge*Pe),Me=De+Ge*Ce;for(let ot=Xe;ot<=et;ot++)Ae[ot]=Me;Xe=et+1}for(let Ge=Xe;Ge<256;Ge++)Ae[Ge]=Ae[Xe-1];return Ae.join(",")},ye=`g_${M(this,se)}_hcm_highlight_filter`,ge=Ie(this,D,Te(this,ue,xn).call(this,ye));return Te(this,ce,cr).call(this,ge),Te(this,$e,pn).call(this,Ne(at[0],it[0],5),Ne(at[1],it[1],5),Ne(at[2],it[2],5),ge),Ie(this,B,`url(#${ye})`),M(this,B)}destroy(me=!1){me&&(M(this,Y)||M(this,B))||(M(this,K)&&(M(this,K).parentNode.parentNode.remove(),Ie(this,K,null)),M(this,Z)&&(M(this,Z).clear(),Ie(this,Z,null)),Ie(this,U,0))}}Z=new WeakMap,K=new WeakMap,se=new WeakMap,ne=new WeakMap,le=new WeakMap,he=new WeakMap,Y=new WeakMap,D=new WeakMap,G=new WeakMap,B=new WeakMap,U=new WeakMap,W=new WeakSet,rn=function(){return M(this,Z)||Ie(this,Z,new Map)},J=new WeakSet,an=function(){if(!M(this,K)){const me=M(this,ne).createElement("div"),{style:Oe}=me;Oe.visibility="hidden",Oe.contain="strict",Oe.width=Oe.height=0,Oe.position="absolute",Oe.top=Oe.left=0,Oe.zIndex=-1;const Le=M(this,ne).createElementNS(h,"svg");Le.setAttribute("width",0),Le.setAttribute("height",0),Ie(this,K,M(this,ne).createElementNS(h,"defs")),me.append(Le),Le.append(M(this,K)),M(this,ne).body.append(me)}return M(this,K)},ce=new WeakSet,cr=function(me){const Oe=M(this,ne).createElementNS(h,"feColorMatrix");Oe.setAttribute("type","matrix"),Oe.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),me.append(Oe)},ue=new WeakSet,xn=function(me){const Oe=M(this,ne).createElementNS(h,"filter");return Oe.setAttribute("color-interpolation-filters","sRGB"),Oe.setAttribute("id",me),M(this,J,an).append(Oe),Oe},xe=new WeakSet,On=function(me,Oe,Le){const We=M(this,ne).createElementNS(h,Oe);We.setAttribute("type","discrete"),We.setAttribute("tableValues",Le),me.append(We)},$e=new WeakSet,pn=function(me,Oe,Le,We){const Ze=M(this,ne).createElementNS(h,"feComponentTransfer");We.append(Ze),Te(this,xe,On).call(this,Ze,"feFuncR",me),Te(this,xe,On).call(this,Ze,"feFuncG",Oe),Te(this,xe,On).call(this,Ze,"feFuncB",Le)},Be=new WeakSet,mn=function(me){return M(this,J,an).style.color=me,L(getComputedStyle(M(this,J,an)).getPropertyValue("color"))},s.DOMFilterFactory=m;class f extends u.BaseCanvasFactory{constructor({ownerDocument:pe=globalThis.document}={}){super(),this._document=pe}_createCanvas(pe,me){const Oe=this._document.createElement("canvas");return Oe.width=pe,Oe.height=me,Oe}}s.DOMCanvasFactory=f;async function _(Se,pe=!1){if(P(Se,document.baseURI)){const me=await fetch(Se);if(!me.ok)throw new Error(me.statusText);return pe?new Uint8Array(await me.arrayBuffer()):(0,d.stringToBytes)(await me.text())}return new Promise((me,Oe)=>{const Le=new XMLHttpRequest;Le.open("GET",Se,!0),pe&&(Le.responseType="arraybuffer"),Le.onreadystatechange=()=>{if(Le.readyState===XMLHttpRequest.DONE){if(Le.status===200||Le.status===0){let We;if(pe&&Le.response?We=new Uint8Array(Le.response):!pe&&Le.responseText&&(We=(0,d.stringToBytes)(Le.responseText)),We){me(We);return}}Oe(new Error(Le.statusText))}},Le.send(null)})}class y extends u.BaseCMapReaderFactory{_fetchData(pe,me){return _(pe,this.isCompressed).then(Oe=>({cMapData:Oe,compressionType:me}))}}s.DOMCMapReaderFactory=y;class E extends u.BaseStandardFontDataFactory{_fetchData(pe){return _(pe,!0)}}s.DOMStandardFontDataFactory=E;class b extends u.BaseSVGFactory{_createSVG(pe){return document.createElementNS(h,pe)}}s.DOMSVGFactory=b;class T{constructor({viewBox:pe,scale:me,rotation:Oe,offsetX:Le=0,offsetY:We=0,dontFlip:Ze=!1}){this.viewBox=pe,this.scale=me,this.rotation=Oe,this.offsetX=Le,this.offsetY=We;const Qe=(pe[2]+pe[0])/2,Je=(pe[3]+pe[1])/2;let tt,rt,at,it;switch(Oe%=360,Oe<0&&(Oe+=360),Oe){case 180:tt=-1,rt=0,at=0,it=1;break;case 90:tt=0,rt=1,at=1,it=0;break;case 270:tt=0,rt=-1,at=-1,it=0;break;case 0:tt=1,rt=0,at=0,it=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Ze&&(at=-at,it=-it);let Ne,ye,ge,Fe;tt===0?(Ne=Math.abs(Je-pe[1])*me+Le,ye=Math.abs(Qe-pe[0])*me+We,ge=(pe[3]-pe[1])*me,Fe=(pe[2]-pe[0])*me):(Ne=Math.abs(Qe-pe[0])*me+Le,ye=Math.abs(Je-pe[1])*me+We,ge=(pe[2]-pe[0])*me,Fe=(pe[3]-pe[1])*me),this.transform=[tt*me,rt*me,at*me,it*me,Ne-tt*me*Qe-at*me*Je,ye-rt*me*Qe-it*me*Je],this.width=ge,this.height=Fe}get rawDims(){const{viewBox:pe}=this;return(0,d.shadow)(this,"rawDims",{pageWidth:pe[2]-pe[0],pageHeight:pe[3]-pe[1],pageX:pe[0],pageY:pe[1]})}clone({scale:pe=this.scale,rotation:me=this.rotation,offsetX:Oe=this.offsetX,offsetY:Le=this.offsetY,dontFlip:We=!1}={}){return new T({viewBox:this.viewBox.slice(),scale:pe,rotation:me,offsetX:Oe,offsetY:Le,dontFlip:We})}convertToViewportPoint(pe,me){return d.Util.applyTransform([pe,me],this.transform)}convertToViewportRectangle(pe){const me=d.Util.applyTransform([pe[0],pe[1]],this.transform),Oe=d.Util.applyTransform([pe[2],pe[3]],this.transform);return[me[0],me[1],Oe[0],Oe[1]]}convertToPdfPoint(pe,me){return d.Util.applyInverseTransform([pe,me],this.transform)}}s.PageViewport=T;class A extends d.BaseException{constructor(pe,me=0){super(pe,"RenderingCancelledException"),this.extraDelay=me}}s.RenderingCancelledException=A;function v(Se){const pe=Se.length;let me=0;for(;me<pe&&Se[me].trim()==="";)me++;return Se.substring(me,me+5).toLowerCase()==="data:"}function S(Se){return typeof Se=="string"&&/\.pdf$/i.test(Se)}function O(Se,pe=!1){return pe||([Se]=Se.split(/[#?]/,1)),Se.substring(Se.lastIndexOf("/")+1)}function I(Se,pe="document.pdf"){if(typeof Se!="string")return pe;if(v(Se))return(0,d.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),pe;const me=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Oe=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Le=me.exec(Se);let We=Oe.exec(Le[1])||Oe.exec(Le[2])||Oe.exec(Le[3]);if(We&&(We=We[0],We.includes("%")))try{We=Oe.exec(decodeURIComponent(We))[0]}catch{}return We||pe}class x{constructor(){Re(this,"started",Object.create(null));Re(this,"times",[])}time(pe){pe in this.started&&(0,d.warn)(`Timer is already running for ${pe}`),this.started[pe]=Date.now()}timeEnd(pe){pe in this.started||(0,d.warn)(`Timer has not been started for ${pe}`),this.times.push({name:pe,start:this.started[pe],end:Date.now()}),delete this.started[pe]}toString(){const pe=[];let me=0;for(const{name:Oe}of this.times)me=Math.max(Oe.length,me);for(const{name:Oe,start:Le,end:We}of this.times)pe.push(`${Oe.padEnd(me)} ${We-Le}ms
`);return pe.join("")}}s.StatTimer=x;function P(Se,pe){try{const{protocol:me}=pe?new URL(Se,pe):new URL(Se);return me==="http:"||me==="https:"}catch{return!1}}function w(Se){Se.preventDefault()}function C(Se,pe=!1){return new Promise((me,Oe)=>{const Le=document.createElement("script");Le.src=Se,Le.onload=function(We){pe&&Le.remove(),me(We)},Le.onerror=function(){Oe(new Error(`Cannot load script at: ${Le.src}`))},(document.head||document.documentElement).append(Le)})}function k(Se){console.log("Deprecated API usage: "+Se)}let R;class N{static toDateObject(pe){if(!pe||typeof pe!="string")return null;R||(R=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const me=R.exec(pe);if(!me)return null;const Oe=parseInt(me[1],10);let Le=parseInt(me[2],10);Le=Le>=1&&Le<=12?Le-1:0;let We=parseInt(me[3],10);We=We>=1&&We<=31?We:1;let Ze=parseInt(me[4],10);Ze=Ze>=0&&Ze<=23?Ze:0;let Qe=parseInt(me[5],10);Qe=Qe>=0&&Qe<=59?Qe:0;let Je=parseInt(me[6],10);Je=Je>=0&&Je<=59?Je:0;const tt=me[7]||"Z";let rt=parseInt(me[8],10);rt=rt>=0&&rt<=23?rt:0;let at=parseInt(me[9],10)||0;return at=at>=0&&at<=59?at:0,tt==="-"?(Ze+=rt,Qe+=at):tt==="+"&&(Ze-=rt,Qe-=at),new Date(Date.UTC(Oe,Le,We,Ze,Qe,Je))}}s.PDFDateString=N;function F(Se,{scale:pe=1,rotation:me=0}){const{width:Oe,height:Le}=Se.attributes.style,We=[0,0,parseInt(Oe),parseInt(Le)];return new T({viewBox:We,scale:pe,rotation:me})}function L(Se){if(Se.startsWith("#")){const pe=parseInt(Se.slice(1),16);return[(pe&16711680)>>16,(pe&65280)>>8,pe&255]}return Se.startsWith("rgb(")?Se.slice(4,-1).split(",").map(pe=>parseInt(pe)):Se.startsWith("rgba(")?Se.slice(5,-1).split(",").map(pe=>parseInt(pe)).slice(0,3):((0,d.warn)(`Not a valid color format: "${Se}"`),[0,0,0])}function X(Se){const pe=document.createElement("span");pe.style.visibility="hidden",document.body.append(pe);for(const me of Se.keys()){pe.style.color=me;const Oe=window.getComputedStyle(pe).color;Se.set(me,L(Oe))}pe.remove()}function V(Se){const{a:pe,b:me,c:Oe,d:Le,e:We,f:Ze}=Se.getTransform();return[pe,me,Oe,Le,We,Ze]}function H(Se){const{a:pe,b:me,c:Oe,d:Le,e:We,f:Ze}=Se.getTransform().invertSelf();return[pe,me,Oe,Le,We,Ze]}function ee(Se,pe,me=!1,Oe=!0){if(pe instanceof T){const{pageWidth:Le,pageHeight:We}=pe.rawDims,{style:Ze}=Se,Qe=d.FeatureTest.isCSSRoundSupported,Je=`var(--scale-factor) * ${Le}px`,tt=`var(--scale-factor) * ${We}px`,rt=Qe?`round(${Je}, 1px)`:`calc(${Je})`,at=Qe?`round(${tt}, 1px)`:`calc(${tt})`;!me||pe.rotation%180===0?(Ze.width=rt,Ze.height=at):(Ze.width=at,Ze.height=rt)}Oe&&Se.setAttribute("data-main-rotation",pe.rotation)}},(a,s,c)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseStandardFontDataFactory=s.BaseSVGFactory=s.BaseFilterFactory=s.BaseCanvasFactory=s.BaseCMapReaderFactory=void 0;var u=c(1);class d{constructor(){this.constructor===d&&(0,u.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(y){return"none"}addHCMFilter(y,E){return"none"}addHighlightHCMFilter(y,E,b,T){return"none"}destroy(y=!1){}}s.BaseFilterFactory=d;class h{constructor(){this.constructor===h&&(0,u.unreachable)("Cannot initialize BaseCanvasFactory.")}create(y,E){if(y<=0||E<=0)throw new Error("Invalid canvas size");const b=this._createCanvas(y,E);return{canvas:b,context:b.getContext("2d")}}reset(y,E,b){if(!y.canvas)throw new Error("Canvas is not specified");if(E<=0||b<=0)throw new Error("Invalid canvas size");y.canvas.width=E,y.canvas.height=b}destroy(y){if(!y.canvas)throw new Error("Canvas is not specified");y.canvas.width=0,y.canvas.height=0,y.canvas=null,y.context=null}_createCanvas(y,E){(0,u.unreachable)("Abstract method `_createCanvas` called.")}}s.BaseCanvasFactory=h;class p{constructor({baseUrl:y=null,isCompressed:E=!0}){this.constructor===p&&(0,u.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=y,this.isCompressed=E}async fetch({name:y}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!y)throw new Error("CMap name must be specified.");const E=this.baseUrl+y+(this.isCompressed?".bcmap":""),b=this.isCompressed?u.CMapCompressionType.BINARY:u.CMapCompressionType.NONE;return this._fetchData(E,b).catch(T=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${E}`)})}_fetchData(y,E){(0,u.unreachable)("Abstract method `_fetchData` called.")}}s.BaseCMapReaderFactory=p;class m{constructor({baseUrl:y=null}){this.constructor===m&&(0,u.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=y}async fetch({filename:y}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!y)throw new Error("Font filename must be specified.");const E=`${this.baseUrl}${y}`;return this._fetchData(E).catch(b=>{throw new Error(`Unable to load font data at: ${E}`)})}_fetchData(y){(0,u.unreachable)("Abstract method `_fetchData` called.")}}s.BaseStandardFontDataFactory=m;class f{constructor(){this.constructor===f&&(0,u.unreachable)("Cannot initialize BaseSVGFactory.")}create(y,E,b=!1){if(y<=0||E<=0)throw new Error("Invalid SVG dimensions");const T=this._createSVG("svg:svg");return T.setAttribute("version","1.1"),b||(T.setAttribute("width",`${y}px`),T.setAttribute("height",`${E}px`)),T.setAttribute("preserveAspectRatio","none"),T.setAttribute("viewBox",`0 0 ${y} ${E}`),T}createElement(y){if(typeof y!="string")throw new Error("Invalid SVG element type");return this._createSVG(y)}_createSVG(y){(0,u.unreachable)("Abstract method `_createSVG` called.")}}s.BaseSVGFactory=f},(a,s,c)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.MurmurHash3_64=void 0;var u=c(1);const d=3285377520,h=4294901760,p=65535;class m{constructor(_){this.h1=_?_&4294967295:d,this.h2=_?_&4294967295:d}update(_){let y,E;if(typeof _=="string"){y=new Uint8Array(_.length*2),E=0;for(let k=0,R=_.length;k<R;k++){const N=_.charCodeAt(k);N<=255?y[E++]=N:(y[E++]=N>>>8,y[E++]=N&255)}}else if((0,u.isArrayBuffer)(_))y=_.slice(),E=y.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const b=E>>2,T=E-b*4,A=new Uint32Array(y.buffer,0,b);let v=0,S=0,O=this.h1,I=this.h2;const x=3432918353,P=461845907,w=x&p,C=P&p;for(let k=0;k<b;k++)k&1?(v=A[k],v=v*x&h|v*w&p,v=v<<15|v>>>17,v=v*P&h|v*C&p,O^=v,O=O<<13|O>>>19,O=O*5+3864292196):(S=A[k],S=S*x&h|S*w&p,S=S<<15|S>>>17,S=S*P&h|S*C&p,I^=S,I=I<<13|I>>>19,I=I*5+3864292196);switch(v=0,T){case 3:v^=y[b*4+2]<<16;case 2:v^=y[b*4+1]<<8;case 1:v^=y[b*4],v=v*x&h|v*w&p,v=v<<15|v>>>17,v=v*P&h|v*C&p,b&1?O^=v:I^=v}this.h1=O,this.h2=I}hexdigest(){let _=this.h1,y=this.h2;return _^=y>>>1,_=_*3981806797&h|_*36045&p,y=y*4283543511&h|((y<<16|_>>>16)*2950163797&h)>>>16,_^=y>>>1,_=_*444984403&h|_*60499&p,y=y*3301882366&h|((y<<16|_>>>16)*3120437893&h)>>>16,_^=y>>>1,(_>>>0).toString(16).padStart(8,"0")+(y>>>0).toString(16).padStart(8,"0")}}s.MurmurHash3_64=m},(a,s,c)=>{var p;Object.defineProperty(s,"__esModule",{value:!0}),s.FontLoader=s.FontFaceObject=void 0;var u=c(1);class d{constructor({ownerDocument:f=globalThis.document,styleElement:_=null}){de(this,p,new Set);this._document=f,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(f){this.nativeFontFaces.add(f),this._document.fonts.add(f)}removeNativeFontFace(f){this.nativeFontFaces.delete(f),this._document.fonts.delete(f)}insertRule(f){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const _=this.styleElement.sheet;_.insertRule(f,_.cssRules.length)}clear(){for(const f of this.nativeFontFaces)this._document.fonts.delete(f);this.nativeFontFaces.clear(),M(this,p).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(f){if(!(!f||M(this,p).has(f.loadedName))){if((0,u.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:_,src:y,style:E}=f,b=new FontFace(_,y,E);this.addNativeFontFace(b);try{await b.load(),M(this,p).add(_)}catch{(0,u.warn)(`Cannot load system font: ${f.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(b)}return}(0,u.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(f){if(f.attached||f.missingFile&&!f.systemFontInfo)return;if(f.attached=!0,f.systemFontInfo){await this.loadSystemFont(f.systemFontInfo);return}if(this.isFontLoadingAPISupported){const y=f.createNativeFontFace();if(y){this.addNativeFontFace(y);try{await y.loaded}catch(E){throw(0,u.warn)(`Failed to load font '${y.family}': '${E}'.`),f.disableFontFace=!0,E}}return}const _=f.createFontFaceRule();if(_){if(this.insertRule(_),this.isSyncFontLoadingSupported)return;await new Promise(y=>{const E=this._queueLoadingCallback(y);this._prepareFontLoadEvent(f,E)})}}get isFontLoadingAPISupported(){var _;const f=!!((_=this._document)!=null&&_.fonts);return(0,u.shadow)(this,"isFontLoadingAPISupported",f)}get isSyncFontLoadingSupported(){let f=!1;return(u.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(f=!0),(0,u.shadow)(this,"isSyncFontLoadingSupported",f)}_queueLoadingCallback(f){function _(){for((0,u.assert)(!E.done,"completeRequest() cannot be called twice."),E.done=!0;y.length>0&&y[0].done;){const b=y.shift();setTimeout(b.callback,0)}}const{loadingRequests:y}=this,E={done:!1,complete:_,callback:f};return y.push(E),E}get _loadTestFont(){const f=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,u.shadow)(this,"_loadTestFont",f)}_prepareFontLoadEvent(f,_){function y(F,L){return F.charCodeAt(L)<<24|F.charCodeAt(L+1)<<16|F.charCodeAt(L+2)<<8|F.charCodeAt(L+3)&255}function E(F,L,X,V){const H=F.substring(0,L),ee=F.substring(L+X);return H+V+ee}let b,T;const A=this._document.createElement("canvas");A.width=1,A.height=1;const v=A.getContext("2d");let S=0;function O(F,L){if(++S>30){(0,u.warn)("Load test font never loaded."),L();return}if(v.font="30px "+F,v.fillText(".",0,20),v.getImageData(0,0,1,1).data[3]>0){L();return}setTimeout(O.bind(null,F,L))}const I=`lt${Date.now()}${this.loadTestFontId++}`;let x=this._loadTestFont;x=E(x,976,I.length,I);const P=16,w=1482184792;let C=y(x,P);for(b=0,T=I.length-3;b<T;b+=4)C=C-w+y(I,b)|0;b<I.length&&(C=C-w+y(I+"XXX",b)|0),x=E(x,P,4,(0,u.string32)(C));const k=`url(data:font/opentype;base64,${btoa(x)});`,R=`@font-face {font-family:"${I}";src:${k}}`;this.insertRule(R);const N=this._document.createElement("div");N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px";for(const F of[f.loadedName,I]){const L=this._document.createElement("span");L.textContent="Hi",L.style.fontFamily=F,N.append(L)}this._document.body.append(N),O(I,()=>{N.remove(),_.complete()})}}p=new WeakMap,s.FontLoader=d;class h{constructor(f,{isEvalSupported:_=!0,disableFontFace:y=!1,ignoreErrors:E=!1,inspectFont:b=null}){this.compiledGlyphs=Object.create(null);for(const T in f)this[T]=f[T];this.isEvalSupported=_!==!1,this.disableFontFace=y===!0,this.ignoreErrors=E===!0,this._inspectFont=b}createNativeFontFace(){var _;if(!this.data||this.disableFontFace)return null;let f;if(!this.cssFontInfo)f=new FontFace(this.loadedName,this.data,{});else{const y={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(y.style=`oblique ${this.cssFontInfo.italicAngle}deg`),f=new FontFace(this.cssFontInfo.fontFamily,this.data,y)}return(_=this._inspectFont)==null||_.call(this,this),f}createFontFaceRule(){var E;if(!this.data||this.disableFontFace)return null;const f=(0,u.bytesToString)(this.data),_=`url(data:${this.mimetype};base64,${btoa(f)});`;let y;if(!this.cssFontInfo)y=`@font-face {font-family:"${this.loadedName}";src:${_}}`;else{let b=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(b+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),y=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${b}src:${_}}`}return(E=this._inspectFont)==null||E.call(this,this,_),y}getPathGenerator(f,_){if(this.compiledGlyphs[_]!==void 0)return this.compiledGlyphs[_];let y;try{y=f.get(this.loadedName+"_path_"+_)}catch(E){if(!this.ignoreErrors)throw E;return(0,u.warn)(`getPathGenerator - ignoring character: "${E}".`),this.compiledGlyphs[_]=function(b,T){}}if(this.isEvalSupported&&u.FeatureTest.isEvalSupported){const E=[];for(const b of y){const T=b.args!==void 0?b.args.join(","):"";E.push("c.",b.cmd,"(",T,`);
`)}return this.compiledGlyphs[_]=new Function("c","size",E.join(""))}return this.compiledGlyphs[_]=function(E,b){for(const T of y)T.cmd==="scale"&&(T.args=[b,-b]),E[T.cmd].apply(E,T.args)}}}s.FontFaceObject=h},(a,s,c)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NodeStandardFontDataFactory=s.NodeFilterFactory=s.NodeCanvasFactory=s.NodeCMapReaderFactory=void 0;var u=c(7);c(1);const d=function(_){return new Promise((y,E)=>{require$$0.readFile(_,(b,T)=>{if(b||!T){E(new Error(b));return}y(new Uint8Array(T))})})};class h extends u.BaseFilterFactory{}s.NodeFilterFactory=h;class p extends u.BaseCanvasFactory{_createCanvas(y,E){return require$$0.createCanvas(y,E)}}s.NodeCanvasFactory=p;class m extends u.BaseCMapReaderFactory{_fetchData(y,E){return d(y).then(b=>({cMapData:b,compressionType:E}))}}s.NodeCMapReaderFactory=m;class f extends u.BaseStandardFontDataFactory{_fetchData(y){return d(y)}}s.NodeStandardFontDataFactory=f},(a,s,c)=>{var K,ur,ne,dr;Object.defineProperty(s,"__esModule",{value:!0}),s.CanvasGraphics=void 0;var u=c(1),d=c(6),h=c(12),p=c(13);const m=16,f=100,_=4096,y=15,E=10,b=1e3,T=16;function A(Y,D){if(Y._removeMirroring)throw new Error("Context is already forwarding operations.");Y.__originalSave=Y.save,Y.__originalRestore=Y.restore,Y.__originalRotate=Y.rotate,Y.__originalScale=Y.scale,Y.__originalTranslate=Y.translate,Y.__originalTransform=Y.transform,Y.__originalSetTransform=Y.setTransform,Y.__originalResetTransform=Y.resetTransform,Y.__originalClip=Y.clip,Y.__originalMoveTo=Y.moveTo,Y.__originalLineTo=Y.lineTo,Y.__originalBezierCurveTo=Y.bezierCurveTo,Y.__originalRect=Y.rect,Y.__originalClosePath=Y.closePath,Y.__originalBeginPath=Y.beginPath,Y._removeMirroring=()=>{Y.save=Y.__originalSave,Y.restore=Y.__originalRestore,Y.rotate=Y.__originalRotate,Y.scale=Y.__originalScale,Y.translate=Y.__originalTranslate,Y.transform=Y.__originalTransform,Y.setTransform=Y.__originalSetTransform,Y.resetTransform=Y.__originalResetTransform,Y.clip=Y.__originalClip,Y.moveTo=Y.__originalMoveTo,Y.lineTo=Y.__originalLineTo,Y.bezierCurveTo=Y.__originalBezierCurveTo,Y.rect=Y.__originalRect,Y.closePath=Y.__originalClosePath,Y.beginPath=Y.__originalBeginPath,delete Y._removeMirroring},Y.save=function(){D.save(),this.__originalSave()},Y.restore=function(){D.restore(),this.__originalRestore()},Y.translate=function(G,B){D.translate(G,B),this.__originalTranslate(G,B)},Y.scale=function(G,B){D.scale(G,B),this.__originalScale(G,B)},Y.transform=function(G,B,U,W,q,J){D.transform(G,B,U,W,q,J),this.__originalTransform(G,B,U,W,q,J)},Y.setTransform=function(G,B,U,W,q,J){D.setTransform(G,B,U,W,q,J),this.__originalSetTransform(G,B,U,W,q,J)},Y.resetTransform=function(){D.resetTransform(),this.__originalResetTransform()},Y.rotate=function(G){D.rotate(G),this.__originalRotate(G)},Y.clip=function(G){D.clip(G),this.__originalClip(G)},Y.moveTo=function(G,B){D.moveTo(G,B),this.__originalMoveTo(G,B)},Y.lineTo=function(G,B){D.lineTo(G,B),this.__originalLineTo(G,B)},Y.bezierCurveTo=function(G,B,U,W,q,J){D.bezierCurveTo(G,B,U,W,q,J),this.__originalBezierCurveTo(G,B,U,W,q,J)},Y.rect=function(G,B,U,W){D.rect(G,B,U,W),this.__originalRect(G,B,U,W)},Y.closePath=function(){D.closePath(),this.__originalClosePath()},Y.beginPath=function(){D.beginPath(),this.__originalBeginPath()}}class v{constructor(D){this.canvasFactory=D,this.cache=Object.create(null)}getCanvas(D,G,B){let U;return this.cache[D]!==void 0?(U=this.cache[D],this.canvasFactory.reset(U,G,B)):(U=this.canvasFactory.create(G,B),this.cache[D]=U),U}delete(D){delete this.cache[D]}clear(){for(const D in this.cache){const G=this.cache[D];this.canvasFactory.destroy(G),delete this.cache[D]}}}function S(Y,D,G,B,U,W,q,J,ae,ce){const[ie,ue,Ee,xe,ve,$e]=(0,d.getCurrentTransform)(Y);if(ue===0&&Ee===0){const ze=q*ie+ve,Se=Math.round(ze),pe=J*xe+$e,me=Math.round(pe),Oe=(q+ae)*ie+ve,Le=Math.abs(Math.round(Oe)-Se)||1,We=(J+ce)*xe+$e,Ze=Math.abs(Math.round(We)-me)||1;return Y.setTransform(Math.sign(ie),0,0,Math.sign(xe),Se,me),Y.drawImage(D,G,B,U,W,0,0,Le,Ze),Y.setTransform(ie,ue,Ee,xe,ve,$e),[Le,Ze]}if(ie===0&&xe===0){const ze=J*Ee+ve,Se=Math.round(ze),pe=q*ue+$e,me=Math.round(pe),Oe=(J+ce)*Ee+ve,Le=Math.abs(Math.round(Oe)-Se)||1,We=(q+ae)*ue+$e,Ze=Math.abs(Math.round(We)-me)||1;return Y.setTransform(0,Math.sign(ue),Math.sign(Ee),0,Se,me),Y.drawImage(D,G,B,U,W,0,0,Ze,Le),Y.setTransform(ie,ue,Ee,xe,ve,$e),[Ze,Le]}Y.drawImage(D,G,B,U,W,q,J,ae,ce);const _e=Math.hypot(ie,ue),Be=Math.hypot(Ee,xe);return[_e*ae,Be*ce]}function O(Y){const{width:D,height:G}=Y;if(D>b||G>b)return null;const B=1e3,U=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),W=D+1;let q=new Uint8Array(W*(G+1)),J,ae,ce;const ie=D+7&-8;let ue=new Uint8Array(ie*G),Ee=0;for(const _e of Y.data){let Be=128;for(;Be>0;)ue[Ee++]=_e&Be?0:255,Be>>=1}let xe=0;for(Ee=0,ue[Ee]!==0&&(q[0]=1,++xe),ae=1;ae<D;ae++)ue[Ee]!==ue[Ee+1]&&(q[ae]=ue[Ee]?2:1,++xe),Ee++;for(ue[Ee]!==0&&(q[ae]=2,++xe),J=1;J<G;J++){Ee=J*ie,ce=J*W,ue[Ee-ie]!==ue[Ee]&&(q[ce]=ue[Ee]?1:8,++xe);let _e=(ue[Ee]?4:0)+(ue[Ee-ie]?8:0);for(ae=1;ae<D;ae++)_e=(_e>>2)+(ue[Ee+1]?4:0)+(ue[Ee-ie+1]?8:0),U[_e]&&(q[ce+ae]=U[_e],++xe),Ee++;if(ue[Ee-ie]!==ue[Ee]&&(q[ce+ae]=ue[Ee]?2:4,++xe),xe>B)return null}for(Ee=ie*(G-1),ce=J*W,ue[Ee]!==0&&(q[ce]=8,++xe),ae=1;ae<D;ae++)ue[Ee]!==ue[Ee+1]&&(q[ce+ae]=ue[Ee]?4:8,++xe),Ee++;if(ue[Ee]!==0&&(q[ce+ae]=4,++xe),xe>B)return null;const ve=new Int32Array([0,W,-1,0,-W,0,0,0,1]),$e=new Path2D;for(J=0;xe&&J<=G;J++){let _e=J*W;const Be=_e+D;for(;_e<Be&&!q[_e];)_e++;if(_e===Be)continue;$e.moveTo(_e%W,J);const ze=_e;let Se=q[_e];do{const pe=ve[Se];do _e+=pe;while(!q[_e]);const me=q[_e];me!==5&&me!==10?(Se=me,q[_e]=0):(Se=me&51*Se>>4,q[_e]&=Se>>2|Se<<2),$e.lineTo(_e%W,_e/W|0),q[_e]||--xe}while(ze!==_e);--J}return ue=null,q=null,function(_e){_e.save(),_e.scale(1/D,-1/G),_e.translate(0,-G),_e.fill($e),_e.beginPath(),_e.restore()}}class I{constructor(D,G){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=u.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=u.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=u.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,D,G])}clone(){const D=Object.create(this);return D.clipBox=this.clipBox.slice(),D}setCurrentPoint(D,G){this.x=D,this.y=G}updatePathMinMax(D,G,B){[G,B]=u.Util.applyTransform([G,B],D),this.minX=Math.min(this.minX,G),this.minY=Math.min(this.minY,B),this.maxX=Math.max(this.maxX,G),this.maxY=Math.max(this.maxY,B)}updateRectMinMax(D,G){const B=u.Util.applyTransform(G,D),U=u.Util.applyTransform(G.slice(2),D);this.minX=Math.min(this.minX,B[0],U[0]),this.minY=Math.min(this.minY,B[1],U[1]),this.maxX=Math.max(this.maxX,B[0],U[0]),this.maxY=Math.max(this.maxY,B[1],U[1])}updateScalingPathMinMax(D,G){u.Util.scaleMinMax(D,G),this.minX=Math.min(this.minX,G[0]),this.maxX=Math.max(this.maxX,G[1]),this.minY=Math.min(this.minY,G[2]),this.maxY=Math.max(this.maxY,G[3])}updateCurvePathMinMax(D,G,B,U,W,q,J,ae,ce,ie){const ue=u.Util.bezierBoundingBox(G,B,U,W,q,J,ae,ce);if(ie){ie[0]=Math.min(ie[0],ue[0],ue[2]),ie[1]=Math.max(ie[1],ue[0],ue[2]),ie[2]=Math.min(ie[2],ue[1],ue[3]),ie[3]=Math.max(ie[3],ue[1],ue[3]);return}this.updateRectMinMax(D,ue)}getPathBoundingBox(D=h.PathType.FILL,G=null){const B=[this.minX,this.minY,this.maxX,this.maxY];if(D===h.PathType.STROKE){G||(0,u.unreachable)("Stroke bounding box must include transform.");const U=u.Util.singularValueDecompose2dScale(G),W=U[0]*this.lineWidth/2,q=U[1]*this.lineWidth/2;B[0]-=W,B[1]-=q,B[2]+=W,B[3]+=q}return B}updateClipFromPath(){const D=u.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(D||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(D){this.clipBox=D,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(D=h.PathType.FILL,G=null){return u.Util.intersect(this.clipBox,this.getPathBoundingBox(D,G))}}function x(Y,D){if(typeof ImageData<"u"&&D instanceof ImageData){Y.putImageData(D,0,0);return}const G=D.height,B=D.width,U=G%T,W=(G-U)/T,q=U===0?W:W+1,J=Y.createImageData(B,T);let ae=0,ce;const ie=D.data,ue=J.data;let Ee,xe,ve,$e;if(D.kind===u.ImageKind.GRAYSCALE_1BPP){const _e=ie.byteLength,Be=new Uint32Array(ue.buffer,0,ue.byteLength>>2),ze=Be.length,Se=B+7>>3,pe=4294967295,me=u.FeatureTest.isLittleEndian?4278190080:255;for(Ee=0;Ee<q;Ee++){for(ve=Ee<W?T:U,ce=0,xe=0;xe<ve;xe++){const Oe=_e-ae;let Le=0;const We=Oe>Se?B:Oe*8-7,Ze=We&-8;let Qe=0,Je=0;for(;Le<Ze;Le+=8)Je=ie[ae++],Be[ce++]=Je&128?pe:me,Be[ce++]=Je&64?pe:me,Be[ce++]=Je&32?pe:me,Be[ce++]=Je&16?pe:me,Be[ce++]=Je&8?pe:me,Be[ce++]=Je&4?pe:me,Be[ce++]=Je&2?pe:me,Be[ce++]=Je&1?pe:me;for(;Le<We;Le++)Qe===0&&(Je=ie[ae++],Qe=128),Be[ce++]=Je&Qe?pe:me,Qe>>=1}for(;ce<ze;)Be[ce++]=0;Y.putImageData(J,0,Ee*T)}}else if(D.kind===u.ImageKind.RGBA_32BPP){for(xe=0,$e=B*T*4,Ee=0;Ee<W;Ee++)ue.set(ie.subarray(ae,ae+$e)),ae+=$e,Y.putImageData(J,0,xe),xe+=T;Ee<q&&($e=B*U*4,ue.set(ie.subarray(ae,ae+$e)),Y.putImageData(J,0,xe))}else if(D.kind===u.ImageKind.RGB_24BPP)for(ve=T,$e=B*ve,Ee=0;Ee<q;Ee++){for(Ee>=W&&(ve=U,$e=B*ve),ce=0,xe=$e;xe--;)ue[ce++]=ie[ae++],ue[ce++]=ie[ae++],ue[ce++]=ie[ae++],ue[ce++]=255;Y.putImageData(J,0,Ee*T)}else throw new Error(`bad image kind: ${D.kind}`)}function P(Y,D){if(D.bitmap){Y.drawImage(D.bitmap,0,0);return}const G=D.height,B=D.width,U=G%T,W=(G-U)/T,q=U===0?W:W+1,J=Y.createImageData(B,T);let ae=0;const ce=D.data,ie=J.data;for(let ue=0;ue<q;ue++){const Ee=ue<W?T:U;({srcPos:ae}=(0,p.convertBlackAndWhiteToRGBA)({src:ce,srcPos:ae,dest:ie,width:B,height:Ee,nonBlackColor:0})),Y.putImageData(J,0,ue*T)}}function w(Y,D){const G=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const B of G)Y[B]!==void 0&&(D[B]=Y[B]);Y.setLineDash!==void 0&&(D.setLineDash(Y.getLineDash()),D.lineDashOffset=Y.lineDashOffset)}function C(Y){if(Y.strokeStyle=Y.fillStyle="#000000",Y.fillRule="nonzero",Y.globalAlpha=1,Y.lineWidth=1,Y.lineCap="butt",Y.lineJoin="miter",Y.miterLimit=10,Y.globalCompositeOperation="source-over",Y.font="10px sans-serif",Y.setLineDash!==void 0&&(Y.setLineDash([]),Y.lineDashOffset=0),!u.isNodeJS){const{filter:D}=Y;D!=="none"&&D!==""&&(Y.filter="none")}}function k(Y,D,G,B){const U=Y.length;for(let W=3;W<U;W+=4){const q=Y[W];if(q===0)Y[W-3]=D,Y[W-2]=G,Y[W-1]=B;else if(q<255){const J=255-q;Y[W-3]=Y[W-3]*q+D*J>>8,Y[W-2]=Y[W-2]*q+G*J>>8,Y[W-1]=Y[W-1]*q+B*J>>8}}}function R(Y,D,G){const B=Y.length,U=1/255;for(let W=3;W<B;W+=4){const q=G?G[Y[W]]:Y[W];D[W]=D[W]*q*U|0}}function N(Y,D,G){const B=Y.length;for(let U=3;U<B;U+=4){const W=Y[U-3]*77+Y[U-2]*152+Y[U-1]*28;D[U]=G?D[U]*G[W>>8]>>8:D[U]*W>>16}}function F(Y,D,G,B,U,W,q,J,ae,ce,ie){const ue=!!W,Ee=ue?W[0]:0,xe=ue?W[1]:0,ve=ue?W[2]:0,$e=U==="Luminosity"?N:R,_e=Math.min(B,Math.ceil(1048576/G));for(let Be=0;Be<B;Be+=_e){const ze=Math.min(_e,B-Be),Se=Y.getImageData(J-ce,Be+(ae-ie),G,ze),pe=D.getImageData(J,Be+ae,G,ze);ue&&k(Se.data,Ee,xe,ve),$e(Se.data,pe.data,q),D.putImageData(pe,J,Be+ae)}}function L(Y,D,G,B){const U=B[0],W=B[1],q=B[2]-U,J=B[3]-W;q===0||J===0||(F(D.context,G,q,J,D.subtype,D.backdrop,D.transferMap,U,W,D.offsetX,D.offsetY),Y.save(),Y.globalAlpha=1,Y.globalCompositeOperation="source-over",Y.setTransform(1,0,0,1,0,0),Y.drawImage(G.canvas,0,0),Y.restore())}function X(Y,D){const G=u.Util.singularValueDecompose2dScale(Y);G[0]=Math.fround(G[0]),G[1]=Math.fround(G[1]);const B=Math.fround((globalThis.devicePixelRatio||1)*d.PixelsPerInch.PDF_TO_CSS_UNITS);return D!==void 0?D:G[0]<=B||G[1]<=B}const V=["butt","round","square"],H=["miter","round","bevel"],ee={},Q={},he=class he{constructor(D,G,B,U,W,{optionalContentConfig:q,markedContentStack:J=null},ae,ce){de(this,K);de(this,ne);this.ctx=D,this.current=new I(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=G,this.objs=B,this.canvasFactory=U,this.filterFactory=W,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=J||[],this.optionalContentConfig=q,this.cachedCanvases=new v(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=ae,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=ce,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(D,G=null){return typeof D=="string"?D.startsWith("g_")?this.commonObjs.get(D):this.objs.get(D):G}beginDrawing({transform:D,viewport:G,transparency:B=!1,background:U=null}){const W=this.ctx.canvas.width,q=this.ctx.canvas.height,J=this.ctx.fillStyle;if(this.ctx.fillStyle=U||"#ffffff",this.ctx.fillRect(0,0,W,q),this.ctx.fillStyle=J,B){const ae=this.cachedCanvases.getCanvas("transparent",W,q);this.compositeCtx=this.ctx,this.transparentCanvas=ae.canvas,this.ctx=ae.context,this.ctx.save(),this.ctx.transform(...(0,d.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),C(this.ctx),D&&(this.ctx.transform(...D),this.outputScaleX=D[0],this.outputScaleY=D[0]),this.ctx.transform(...G.transform),this.viewportScale=G.scale,this.baseTransform=(0,d.getCurrentTransform)(this.ctx)}executeOperatorList(D,G,B,U){const W=D.argsArray,q=D.fnArray;let J=G||0;const ae=W.length;if(ae===J)return J;const ce=ae-J>E&&typeof B=="function",ie=ce?Date.now()+y:0;let ue=0;const Ee=this.commonObjs,xe=this.objs;let ve;for(;;){if(U!==void 0&&J===U.nextBreakPoint)return U.breakIt(J,B),J;if(ve=q[J],ve!==u.OPS.dependency)this[ve].apply(this,W[J]);else for(const $e of W[J]){const _e=$e.startsWith("g_")?Ee:xe;if(!_e.has($e))return _e.get($e,B),J}if(J++,J===ae)return J;if(ce&&++ue>E){if(Date.now()>ie)return B(),J;ue=0}}}endDrawing(){Te(this,K,ur).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const D of this._cachedBitmapsMap.values()){for(const G of D.values())typeof HTMLCanvasElement<"u"&&G instanceof HTMLCanvasElement&&(G.width=G.height=0);D.clear()}this._cachedBitmapsMap.clear(),Te(this,ne,dr).call(this)}_scaleImage(D,G){const B=D.width,U=D.height;let W=Math.max(Math.hypot(G[0],G[1]),1),q=Math.max(Math.hypot(G[2],G[3]),1),J=B,ae=U,ce="prescale1",ie,ue;for(;W>2&&J>1||q>2&&ae>1;){let Ee=J,xe=ae;W>2&&J>1&&(Ee=J>=16384?Math.floor(J/2)-1||1:Math.ceil(J/2),W/=J/Ee),q>2&&ae>1&&(xe=ae>=16384?Math.floor(ae/2)-1||1:Math.ceil(ae)/2,q/=ae/xe),ie=this.cachedCanvases.getCanvas(ce,Ee,xe),ue=ie.context,ue.clearRect(0,0,Ee,xe),ue.drawImage(D,0,0,J,ae,0,0,Ee,xe),D=ie.canvas,J=Ee,ae=xe,ce=ce==="prescale1"?"prescale2":"prescale1"}return{img:D,paintWidth:J,paintHeight:ae}}_createMaskCanvas(D){const G=this.ctx,{width:B,height:U}=D,W=this.current.fillColor,q=this.current.patternFill,J=(0,d.getCurrentTransform)(G);let ae,ce,ie,ue;if((D.bitmap||D.data)&&D.count>1){const Le=D.bitmap||D.data.buffer;ce=JSON.stringify(q?J:[J.slice(0,4),W]),ae=this._cachedBitmapsMap.get(Le),ae||(ae=new Map,this._cachedBitmapsMap.set(Le,ae));const We=ae.get(ce);if(We&&!q){const Ze=Math.round(Math.min(J[0],J[2])+J[4]),Qe=Math.round(Math.min(J[1],J[3])+J[5]);return{canvas:We,offsetX:Ze,offsetY:Qe}}ie=We}ie||(ue=this.cachedCanvases.getCanvas("maskCanvas",B,U),P(ue.context,D));let Ee=u.Util.transform(J,[1/B,0,0,-1/U,0,0]);Ee=u.Util.transform(Ee,[1,0,0,1,0,-U]);const xe=u.Util.applyTransform([0,0],Ee),ve=u.Util.applyTransform([B,U],Ee),$e=u.Util.normalizeRect([xe[0],xe[1],ve[0],ve[1]]),_e=Math.round($e[2]-$e[0])||1,Be=Math.round($e[3]-$e[1])||1,ze=this.cachedCanvases.getCanvas("fillCanvas",_e,Be),Se=ze.context,pe=Math.min(xe[0],ve[0]),me=Math.min(xe[1],ve[1]);Se.translate(-pe,-me),Se.transform(...Ee),ie||(ie=this._scaleImage(ue.canvas,(0,d.getCurrentTransformInverse)(Se)),ie=ie.img,ae&&q&&ae.set(ce,ie)),Se.imageSmoothingEnabled=X((0,d.getCurrentTransform)(Se),D.interpolate),S(Se,ie,0,0,ie.width,ie.height,0,0,B,U),Se.globalCompositeOperation="source-in";const Oe=u.Util.transform((0,d.getCurrentTransformInverse)(Se),[1,0,0,1,-pe,-me]);return Se.fillStyle=q?W.getPattern(G,this,Oe,h.PathType.FILL):W,Se.fillRect(0,0,B,U),ae&&!q&&(this.cachedCanvases.delete("fillCanvas"),ae.set(ce,ze.canvas)),{canvas:ze.canvas,offsetX:Math.round(pe),offsetY:Math.round(me)}}setLineWidth(D){D!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=D,this.ctx.lineWidth=D}setLineCap(D){this.ctx.lineCap=V[D]}setLineJoin(D){this.ctx.lineJoin=H[D]}setMiterLimit(D){this.ctx.miterLimit=D}setDash(D,G){const B=this.ctx;B.setLineDash!==void 0&&(B.setLineDash(D),B.lineDashOffset=G)}setRenderingIntent(D){}setFlatness(D){}setGState(D){for(const[G,B]of D)switch(G){case"LW":this.setLineWidth(B);break;case"LC":this.setLineCap(B);break;case"LJ":this.setLineJoin(B);break;case"ML":this.setMiterLimit(B);break;case"D":this.setDash(B[0],B[1]);break;case"RI":this.setRenderingIntent(B);break;case"FL":this.setFlatness(B);break;case"Font":this.setFont(B[0],B[1]);break;case"CA":this.current.strokeAlpha=B;break;case"ca":this.current.fillAlpha=B,this.ctx.globalAlpha=B;break;case"BM":this.ctx.globalCompositeOperation=B;break;case"SMask":this.current.activeSMask=B?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(B);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const D=this.inSMaskMode;this.current.activeSMask&&!D?this.beginSMaskMode():!this.current.activeSMask&&D&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const D=this.ctx.canvas.width,G=this.ctx.canvas.height,B="smaskGroupAt"+this.groupLevel,U=this.cachedCanvases.getCanvas(B,D,G);this.suspendedCtx=this.ctx,this.ctx=U.context;const W=this.ctx;W.setTransform(...(0,d.getCurrentTransform)(this.suspendedCtx)),w(this.suspendedCtx,W),A(W,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),w(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(D){if(!this.current.activeSMask)return;D?(D[0]=Math.floor(D[0]),D[1]=Math.floor(D[1]),D[2]=Math.ceil(D[2]),D[3]=Math.ceil(D[3])):D=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const G=this.current.activeSMask,B=this.suspendedCtx;L(B,G,this.ctx,D),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(w(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const D=this.current;this.stateStack.push(D),this.current=D.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),w(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(D,G,B,U,W,q){this.ctx.transform(D,G,B,U,W,q),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(D,G,B){const U=this.ctx,W=this.current;let q=W.x,J=W.y,ae,ce;const ie=(0,d.getCurrentTransform)(U),ue=ie[0]===0&&ie[3]===0||ie[1]===0&&ie[2]===0,Ee=ue?B.slice(0):null;for(let xe=0,ve=0,$e=D.length;xe<$e;xe++)switch(D[xe]|0){case u.OPS.rectangle:q=G[ve++],J=G[ve++];const _e=G[ve++],Be=G[ve++],ze=q+_e,Se=J+Be;U.moveTo(q,J),_e===0||Be===0?U.lineTo(ze,Se):(U.lineTo(ze,J),U.lineTo(ze,Se),U.lineTo(q,Se)),ue||W.updateRectMinMax(ie,[q,J,ze,Se]),U.closePath();break;case u.OPS.moveTo:q=G[ve++],J=G[ve++],U.moveTo(q,J),ue||W.updatePathMinMax(ie,q,J);break;case u.OPS.lineTo:q=G[ve++],J=G[ve++],U.lineTo(q,J),ue||W.updatePathMinMax(ie,q,J);break;case u.OPS.curveTo:ae=q,ce=J,q=G[ve+4],J=G[ve+5],U.bezierCurveTo(G[ve],G[ve+1],G[ve+2],G[ve+3],q,J),W.updateCurvePathMinMax(ie,ae,ce,G[ve],G[ve+1],G[ve+2],G[ve+3],q,J,Ee),ve+=6;break;case u.OPS.curveTo2:ae=q,ce=J,U.bezierCurveTo(q,J,G[ve],G[ve+1],G[ve+2],G[ve+3]),W.updateCurvePathMinMax(ie,ae,ce,q,J,G[ve],G[ve+1],G[ve+2],G[ve+3],Ee),q=G[ve+2],J=G[ve+3],ve+=4;break;case u.OPS.curveTo3:ae=q,ce=J,q=G[ve+2],J=G[ve+3],U.bezierCurveTo(G[ve],G[ve+1],q,J,q,J),W.updateCurvePathMinMax(ie,ae,ce,G[ve],G[ve+1],q,J,q,J,Ee),ve+=4;break;case u.OPS.closePath:U.closePath();break}ue&&W.updateScalingPathMinMax(ie,Ee),W.setCurrentPoint(q,J)}closePath(){this.ctx.closePath()}stroke(D=!0){const G=this.ctx,B=this.current.strokeColor;G.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof B=="object"&&(B!=null&&B.getPattern)?(G.save(),G.strokeStyle=B.getPattern(G,this,(0,d.getCurrentTransformInverse)(G),h.PathType.STROKE),this.rescaleAndStroke(!1),G.restore()):this.rescaleAndStroke(!0)),D&&this.consumePath(this.current.getClippedPathBoundingBox()),G.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(D=!0){const G=this.ctx,B=this.current.fillColor,U=this.current.patternFill;let W=!1;U&&(G.save(),G.fillStyle=B.getPattern(G,this,(0,d.getCurrentTransformInverse)(G),h.PathType.FILL),W=!0);const q=this.current.getClippedPathBoundingBox();this.contentVisible&&q!==null&&(this.pendingEOFill?(G.fill("evenodd"),this.pendingEOFill=!1):G.fill()),W&&G.restore(),D&&this.consumePath(q)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ee}eoClip(){this.pendingClip=Q}beginText(){this.current.textMatrix=u.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const D=this.pendingTextPaths,G=this.ctx;if(D===void 0){G.beginPath();return}G.save(),G.beginPath();for(const B of D)G.setTransform(...B.transform),G.translate(B.x,B.y),B.addToPath(G,B.fontSize);G.restore(),G.clip(),G.beginPath(),delete this.pendingTextPaths}setCharSpacing(D){this.current.charSpacing=D}setWordSpacing(D){this.current.wordSpacing=D}setHScale(D){this.current.textHScale=D/100}setLeading(D){this.current.leading=-D}setFont(D,G){var ie;const B=this.commonObjs.get(D),U=this.current;if(!B)throw new Error(`Can't find font for ${D}`);if(U.fontMatrix=B.fontMatrix||u.FONT_IDENTITY_MATRIX,(U.fontMatrix[0]===0||U.fontMatrix[3]===0)&&(0,u.warn)("Invalid font matrix for font "+D),G<0?(G=-G,U.fontDirection=-1):U.fontDirection=1,this.current.font=B,this.current.fontSize=G,B.isType3Font)return;const W=B.loadedName||"sans-serif",q=((ie=B.systemFontInfo)==null?void 0:ie.css)||`"${W}", ${B.fallbackName}`;let J="normal";B.black?J="900":B.bold&&(J="bold");const ae=B.italic?"italic":"normal";let ce=G;G<m?ce=m:G>f&&(ce=f),this.current.fontSizeScale=G/ce,this.ctx.font=`${ae} ${J} ${ce}px ${q}`}setTextRenderingMode(D){this.current.textRenderingMode=D}setTextRise(D){this.current.textRise=D}moveText(D,G){this.current.x=this.current.lineX+=D,this.current.y=this.current.lineY+=G}setLeadingMoveText(D,G){this.setLeading(-G),this.moveText(D,G)}setTextMatrix(D,G,B,U,W,q){this.current.textMatrix=[D,G,B,U,W,q],this.current.textMatrixScale=Math.hypot(D,G),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(D,G,B,U){const W=this.ctx,q=this.current,J=q.font,ae=q.textRenderingMode,ce=q.fontSize/q.fontSizeScale,ie=ae&u.TextRenderingMode.FILL_STROKE_MASK,ue=!!(ae&u.TextRenderingMode.ADD_TO_PATH_FLAG),Ee=q.patternFill&&!J.missingFile;let xe;(J.disableFontFace||ue||Ee)&&(xe=J.getPathGenerator(this.commonObjs,D)),J.disableFontFace||Ee?(W.save(),W.translate(G,B),W.beginPath(),xe(W,ce),U&&W.setTransform(...U),(ie===u.TextRenderingMode.FILL||ie===u.TextRenderingMode.FILL_STROKE)&&W.fill(),(ie===u.TextRenderingMode.STROKE||ie===u.TextRenderingMode.FILL_STROKE)&&W.stroke(),W.restore()):((ie===u.TextRenderingMode.FILL||ie===u.TextRenderingMode.FILL_STROKE)&&W.fillText(D,G,B),(ie===u.TextRenderingMode.STROKE||ie===u.TextRenderingMode.FILL_STROKE)&&W.strokeText(D,G,B)),ue&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,d.getCurrentTransform)(W),x:G,y:B,fontSize:ce,addToPath:xe})}get isFontSubpixelAAEnabled(){const{context:D}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);D.scale(1.5,1),D.fillText("I",0,10);const G=D.getImageData(0,0,10,10).data;let B=!1;for(let U=3;U<G.length;U+=4)if(G[U]>0&&G[U]<255){B=!0;break}return(0,u.shadow)(this,"isFontSubpixelAAEnabled",B)}showText(D){const G=this.current,B=G.font;if(B.isType3Font)return this.showType3Text(D);const U=G.fontSize;if(U===0)return;const W=this.ctx,q=G.fontSizeScale,J=G.charSpacing,ae=G.wordSpacing,ce=G.fontDirection,ie=G.textHScale*ce,ue=D.length,Ee=B.vertical,xe=Ee?1:-1,ve=B.defaultVMetrics,$e=U*G.fontMatrix[0],_e=G.textRenderingMode===u.TextRenderingMode.FILL&&!B.disableFontFace&&!G.patternFill;W.save(),W.transform(...G.textMatrix),W.translate(G.x,G.y+G.textRise),ce>0?W.scale(ie,-1):W.scale(ie,1);let Be;if(G.patternFill){W.save();const Oe=G.fillColor.getPattern(W,this,(0,d.getCurrentTransformInverse)(W),h.PathType.FILL);Be=(0,d.getCurrentTransform)(W),W.restore(),W.fillStyle=Oe}let ze=G.lineWidth;const Se=G.textMatrixScale;if(Se===0||ze===0){const Oe=G.textRenderingMode&u.TextRenderingMode.FILL_STROKE_MASK;(Oe===u.TextRenderingMode.STROKE||Oe===u.TextRenderingMode.FILL_STROKE)&&(ze=this.getSinglePixelWidth())}else ze/=Se;if(q!==1&&(W.scale(q,q),ze/=q),W.lineWidth=ze,B.isInvalidPDFjsFont){const Oe=[];let Le=0;for(const We of D)Oe.push(We.unicode),Le+=We.width;W.fillText(Oe.join(""),0,0),G.x+=Le*$e*ie,W.restore(),this.compose();return}let pe=0,me;for(me=0;me<ue;++me){const Oe=D[me];if(typeof Oe=="number"){pe+=xe*Oe*U/1e3;continue}let Le=!1;const We=(Oe.isSpace?ae:0)+J,Ze=Oe.fontChar,Qe=Oe.accent;let Je,tt,rt=Oe.width;if(Ee){const it=Oe.vmetric||ve,Ne=-(Oe.vmetric?it[1]:rt*.5)*$e,ye=it[2]*$e;rt=it?-it[0]:rt,Je=Ne/q,tt=(pe+ye)/q}else Je=pe/q,tt=0;if(B.remeasure&&rt>0){const it=W.measureText(Ze).width*1e3/U*q;if(rt<it&&this.isFontSubpixelAAEnabled){const Ne=rt/it;Le=!0,W.save(),W.scale(Ne,1),Je/=Ne}else rt!==it&&(Je+=(rt-it)/2e3*U/q)}if(this.contentVisible&&(Oe.isInFont||B.missingFile)){if(_e&&!Qe)W.fillText(Ze,Je,tt);else if(this.paintChar(Ze,Je,tt,Be),Qe){const it=Je+U*Qe.offset.x/q,Ne=tt-U*Qe.offset.y/q;this.paintChar(Qe.fontChar,it,Ne,Be)}}const at=Ee?rt*$e-We*ce:rt*$e+We*ce;pe+=at,Le&&W.restore()}Ee?G.y-=pe:G.x+=pe*ie,W.restore(),this.compose()}showType3Text(D){const G=this.ctx,B=this.current,U=B.font,W=B.fontSize,q=B.fontDirection,J=U.vertical?1:-1,ae=B.charSpacing,ce=B.wordSpacing,ie=B.textHScale*q,ue=B.fontMatrix||u.FONT_IDENTITY_MATRIX,Ee=D.length,xe=B.textRenderingMode===u.TextRenderingMode.INVISIBLE;let ve,$e,_e,Be;if(!(xe||W===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,G.save(),G.transform(...B.textMatrix),G.translate(B.x,B.y),G.scale(ie,q),ve=0;ve<Ee;++ve){if($e=D[ve],typeof $e=="number"){Be=J*$e*W/1e3,this.ctx.translate(Be,0),B.x+=Be*ie;continue}const ze=($e.isSpace?ce:0)+ae,Se=U.charProcOperatorList[$e.operatorListId];if(!Se){(0,u.warn)(`Type3 character "${$e.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=$e,this.save(),G.scale(W,W),G.transform(...ue),this.executeOperatorList(Se),this.restore()),_e=u.Util.applyTransform([$e.width,0],ue)[0]*W+ze,G.translate(_e,0),B.x+=_e*ie}G.restore(),this.processingType3=null}}setCharWidth(D,G){}setCharWidthAndBounds(D,G,B,U,W,q){this.ctx.rect(B,U,W-B,q-U),this.ctx.clip(),this.endPath()}getColorN_Pattern(D){let G;if(D[0]==="TilingPattern"){const B=D[1],U=this.baseTransform||(0,d.getCurrentTransform)(this.ctx),W={createCanvasGraphics:q=>new he(q,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};G=new h.TilingPattern(D,B,this.ctx,W,U)}else G=this._getPattern(D[1],D[2]);return G}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(D,G,B){const U=u.Util.makeHexColor(D,G,B);this.ctx.strokeStyle=U,this.current.strokeColor=U}setFillRGBColor(D,G,B){const U=u.Util.makeHexColor(D,G,B);this.ctx.fillStyle=U,this.current.fillColor=U,this.current.patternFill=!1}_getPattern(D,G=null){let B;return this.cachedPatterns.has(D)?B=this.cachedPatterns.get(D):(B=(0,h.getShadingPattern)(this.getObject(D)),this.cachedPatterns.set(D,B)),G&&(B.matrix=G),B}shadingFill(D){if(!this.contentVisible)return;const G=this.ctx;this.save();const B=this._getPattern(D);G.fillStyle=B.getPattern(G,this,(0,d.getCurrentTransformInverse)(G),h.PathType.SHADING);const U=(0,d.getCurrentTransformInverse)(G);if(U){const{width:W,height:q}=G.canvas,[J,ae,ce,ie]=u.Util.getAxialAlignedBoundingBox([0,0,W,q],U);this.ctx.fillRect(J,ae,ce-J,ie-ae)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,u.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,u.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(D,G){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(D)&&D.length===6&&this.transform(...D),this.baseTransform=(0,d.getCurrentTransform)(this.ctx),G)){const B=G[2]-G[0],U=G[3]-G[1];this.ctx.rect(G[0],G[1],B,U),this.current.updateRectMinMax((0,d.getCurrentTransform)(this.ctx),G),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(D){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const G=this.ctx;D.isolated||(0,u.info)("TODO: Support non-isolated groups."),D.knockout&&(0,u.warn)("Knockout groups not supported.");const B=(0,d.getCurrentTransform)(G);if(D.matrix&&G.transform(...D.matrix),!D.bbox)throw new Error("Bounding box is required.");let U=u.Util.getAxialAlignedBoundingBox(D.bbox,(0,d.getCurrentTransform)(G));const W=[0,0,G.canvas.width,G.canvas.height];U=u.Util.intersect(U,W)||[0,0,0,0];const q=Math.floor(U[0]),J=Math.floor(U[1]);let ae=Math.max(Math.ceil(U[2])-q,1),ce=Math.max(Math.ceil(U[3])-J,1),ie=1,ue=1;ae>_&&(ie=ae/_,ae=_),ce>_&&(ue=ce/_,ce=_),this.current.startNewPathAndClipBox([0,0,ae,ce]);let Ee="groupAt"+this.groupLevel;D.smask&&(Ee+="_smask_"+this.smaskCounter++%2);const xe=this.cachedCanvases.getCanvas(Ee,ae,ce),ve=xe.context;ve.scale(1/ie,1/ue),ve.translate(-q,-J),ve.transform(...B),D.smask?this.smaskStack.push({canvas:xe.canvas,context:ve,offsetX:q,offsetY:J,scaleX:ie,scaleY:ue,subtype:D.smask.subtype,backdrop:D.smask.backdrop,transferMap:D.smask.transferMap||null,startTransformInverse:null}):(G.setTransform(1,0,0,1,0,0),G.translate(q,J),G.scale(ie,ue),G.save()),w(G,ve),this.ctx=ve,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(G),this.groupLevel++}endGroup(D){if(!this.contentVisible)return;this.groupLevel--;const G=this.ctx,B=this.groupStack.pop();if(this.ctx=B,this.ctx.imageSmoothingEnabled=!1,D.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const U=(0,d.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...U);const W=u.Util.getAxialAlignedBoundingBox([0,0,G.canvas.width,G.canvas.height],U);this.ctx.drawImage(G.canvas,0,0),this.ctx.restore(),this.compose(W)}}beginAnnotation(D,G,B,U,W){if(Te(this,K,ur).call(this),C(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(G)&&G.length===4){const q=G[2]-G[0],J=G[3]-G[1];if(W&&this.annotationCanvasMap){B=B.slice(),B[4]-=G[0],B[5]-=G[1],G=G.slice(),G[0]=G[1]=0,G[2]=q,G[3]=J;const[ae,ce]=u.Util.singularValueDecompose2dScale((0,d.getCurrentTransform)(this.ctx)),{viewportScale:ie}=this,ue=Math.ceil(q*this.outputScaleX*ie),Ee=Math.ceil(J*this.outputScaleY*ie);this.annotationCanvas=this.canvasFactory.create(ue,Ee);const{canvas:xe,context:ve}=this.annotationCanvas;this.annotationCanvasMap.set(D,xe),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ve,this.ctx.save(),this.ctx.setTransform(ae,0,0,-ce,0,J*ce),C(this.ctx)}else C(this.ctx),this.ctx.rect(G[0],G[1],q,J),this.ctx.clip(),this.endPath()}this.current=new I(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...B),this.transform(...U)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Te(this,ne,dr).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(D){if(!this.contentVisible)return;const G=D.count;D=this.getObject(D.data,D),D.count=G;const B=this.ctx,U=this.processingType3;if(U&&(U.compiled===void 0&&(U.compiled=O(D)),U.compiled)){U.compiled(B);return}const W=this._createMaskCanvas(D),q=W.canvas;B.save(),B.setTransform(1,0,0,1,0,0),B.drawImage(q,W.offsetX,W.offsetY),B.restore(),this.compose()}paintImageMaskXObjectRepeat(D,G,B=0,U=0,W,q){if(!this.contentVisible)return;D=this.getObject(D.data,D);const J=this.ctx;J.save();const ae=(0,d.getCurrentTransform)(J);J.transform(G,B,U,W,0,0);const ce=this._createMaskCanvas(D);J.setTransform(1,0,0,1,ce.offsetX-ae[4],ce.offsetY-ae[5]);for(let ie=0,ue=q.length;ie<ue;ie+=2){const Ee=u.Util.transform(ae,[G,B,U,W,q[ie],q[ie+1]]),[xe,ve]=u.Util.applyTransform([0,0],Ee);J.drawImage(ce.canvas,xe,ve)}J.restore(),this.compose()}paintImageMaskXObjectGroup(D){if(!this.contentVisible)return;const G=this.ctx,B=this.current.fillColor,U=this.current.patternFill;for(const W of D){const{data:q,width:J,height:ae,transform:ce}=W,ie=this.cachedCanvases.getCanvas("maskCanvas",J,ae),ue=ie.context;ue.save();const Ee=this.getObject(q,W);P(ue,Ee),ue.globalCompositeOperation="source-in",ue.fillStyle=U?B.getPattern(ue,this,(0,d.getCurrentTransformInverse)(G),h.PathType.FILL):B,ue.fillRect(0,0,J,ae),ue.restore(),G.save(),G.transform(...ce),G.scale(1,-1),S(G,ie.canvas,0,0,J,ae,0,-1,1,1),G.restore()}this.compose()}paintImageXObject(D){if(!this.contentVisible)return;const G=this.getObject(D);if(!G){(0,u.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(G)}paintImageXObjectRepeat(D,G,B,U){if(!this.contentVisible)return;const W=this.getObject(D);if(!W){(0,u.warn)("Dependent image isn't ready yet");return}const q=W.width,J=W.height,ae=[];for(let ce=0,ie=U.length;ce<ie;ce+=2)ae.push({transform:[G,0,0,B,U[ce],U[ce+1]],x:0,y:0,w:q,h:J});this.paintInlineImageXObjectGroup(W,ae)}applyTransferMapsToCanvas(D){return this.current.transferMaps!=="none"&&(D.filter=this.current.transferMaps,D.drawImage(D.canvas,0,0),D.filter="none"),D.canvas}applyTransferMapsToBitmap(D){if(this.current.transferMaps==="none")return D.bitmap;const{bitmap:G,width:B,height:U}=D,W=this.cachedCanvases.getCanvas("inlineImage",B,U),q=W.context;return q.filter=this.current.transferMaps,q.drawImage(G,0,0),q.filter="none",W.canvas}paintInlineImageXObject(D){if(!this.contentVisible)return;const G=D.width,B=D.height,U=this.ctx;if(this.save(),!u.isNodeJS){const{filter:J}=U;J!=="none"&&J!==""&&(U.filter="none")}U.scale(1/G,-1/B);let W;if(D.bitmap)W=this.applyTransferMapsToBitmap(D);else if(typeof HTMLElement=="function"&&D instanceof HTMLElement||!D.data)W=D;else{const J=this.cachedCanvases.getCanvas("inlineImage",G,B).context;x(J,D),W=this.applyTransferMapsToCanvas(J)}const q=this._scaleImage(W,(0,d.getCurrentTransformInverse)(U));U.imageSmoothingEnabled=X((0,d.getCurrentTransform)(U),D.interpolate),S(U,q.img,0,0,q.paintWidth,q.paintHeight,0,-B,G,B),this.compose(),this.restore()}paintInlineImageXObjectGroup(D,G){if(!this.contentVisible)return;const B=this.ctx;let U;if(D.bitmap)U=D.bitmap;else{const W=D.width,q=D.height,J=this.cachedCanvases.getCanvas("inlineImage",W,q).context;x(J,D),U=this.applyTransferMapsToCanvas(J)}for(const W of G)B.save(),B.transform(...W.transform),B.scale(1,-1),S(B,U,W.x,W.y,W.w,W.h,0,-1,1,1),B.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(D){}markPointProps(D,G){}beginMarkedContent(D){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(D,G){D==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(G)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(D){const G=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(D);const B=this.ctx;this.pendingClip&&(G||(this.pendingClip===Q?B.clip("evenodd"):B.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),B.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const D=(0,d.getCurrentTransform)(this.ctx);if(D[1]===0&&D[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(D[0]),Math.abs(D[3]));else{const G=Math.abs(D[0]*D[3]-D[2]*D[1]),B=Math.hypot(D[0],D[2]),U=Math.hypot(D[1],D[3]);this._cachedGetSinglePixelWidth=Math.max(B,U)/G}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:D}=this.current,{a:G,b:B,c:U,d:W}=this.ctx.getTransform();let q,J;if(B===0&&U===0){const ae=Math.abs(G),ce=Math.abs(W);if(ae===ce)if(D===0)q=J=1/ae;else{const ie=ae*D;q=J=ie<1?1/ie:1}else if(D===0)q=1/ae,J=1/ce;else{const ie=ae*D,ue=ce*D;q=ie<1?1/ie:1,J=ue<1?1/ue:1}}else{const ae=Math.abs(G*W-B*U),ce=Math.hypot(G,B),ie=Math.hypot(U,W);if(D===0)q=ie/ae,J=ce/ae;else{const ue=D*ae;q=ie>ue?ie/ue:1,J=ce>ue?ce/ue:1}}this._cachedScaleForStroking[0]=q,this._cachedScaleForStroking[1]=J}return this._cachedScaleForStroking}rescaleAndStroke(D){const{ctx:G}=this,{lineWidth:B}=this.current,[U,W]=this.getScaleForStroking();if(G.lineWidth=B||1,U===1&&W===1){G.stroke();return}const q=G.getLineDash();if(D&&G.save(),G.scale(U,W),q.length>0){const J=Math.max(U,W);G.setLineDash(q.map(ae=>ae/J)),G.lineDashOffset/=J}G.stroke(),D&&G.restore()}isContentVisible(){for(let D=this.markedContentStack.length-1;D>=0;D--)if(!this.markedContentStack[D].visible)return!1;return!0}};K=new WeakSet,ur=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},ne=new WeakSet,dr=function(){if(this.pageColors){const D=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(D!=="none"){const G=this.ctx.filter;this.ctx.filter=D,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=G}}};let Z=he;s.CanvasGraphics=Z;for(const Y in u.OPS)Z.prototype[Y]!==void 0&&(Z.prototype[u.OPS[Y]]=Z.prototype[Y])},(a,s,c)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TilingPattern=s.PathType=void 0,s.getShadingPattern=T;var u=c(1),d=c(6);const h={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};s.PathType=h;function p(O,I){if(!I)return;const x=I[2]-I[0],P=I[3]-I[1],w=new Path2D;w.rect(I[0],I[1],x,P),O.clip(w)}class m{constructor(){this.constructor===m&&(0,u.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,u.unreachable)("Abstract method `getPattern` called.")}}class f extends m{constructor(I){super(),this._type=I[1],this._bbox=I[2],this._colorStops=I[3],this._p0=I[4],this._p1=I[5],this._r0=I[6],this._r1=I[7],this.matrix=null}_createGradient(I){let x;this._type==="axial"?x=I.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(x=I.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const P of this._colorStops)x.addColorStop(P[0],P[1]);return x}getPattern(I,x,P,w){let C;if(w===h.STROKE||w===h.FILL){const k=x.current.getClippedPathBoundingBox(w,(0,d.getCurrentTransform)(I))||[0,0,0,0],R=Math.ceil(k[2]-k[0])||1,N=Math.ceil(k[3]-k[1])||1,F=x.cachedCanvases.getCanvas("pattern",R,N,!0),L=F.context;L.clearRect(0,0,L.canvas.width,L.canvas.height),L.beginPath(),L.rect(0,0,L.canvas.width,L.canvas.height),L.translate(-k[0],-k[1]),P=u.Util.transform(P,[1,0,0,1,k[0],k[1]]),L.transform(...x.baseTransform),this.matrix&&L.transform(...this.matrix),p(L,this._bbox),L.fillStyle=this._createGradient(L),L.fill(),C=I.createPattern(F.canvas,"no-repeat");const X=new DOMMatrix(P);C.setTransform(X)}else p(I,this._bbox),C=this._createGradient(I);return C}}function _(O,I,x,P,w,C,k,R){const N=I.coords,F=I.colors,L=O.data,X=O.width*4;let V;N[x+1]>N[P+1]&&(V=x,x=P,P=V,V=C,C=k,k=V),N[P+1]>N[w+1]&&(V=P,P=w,w=V,V=k,k=R,R=V),N[x+1]>N[P+1]&&(V=x,x=P,P=V,V=C,C=k,k=V);const H=(N[x]+I.offsetX)*I.scaleX,ee=(N[x+1]+I.offsetY)*I.scaleY,Q=(N[P]+I.offsetX)*I.scaleX,Z=(N[P+1]+I.offsetY)*I.scaleY,K=(N[w]+I.offsetX)*I.scaleX,se=(N[w+1]+I.offsetY)*I.scaleY;if(ee>=se)return;const ne=F[C],le=F[C+1],he=F[C+2],Y=F[k],D=F[k+1],G=F[k+2],B=F[R],U=F[R+1],W=F[R+2],q=Math.round(ee),J=Math.round(se);let ae,ce,ie,ue,Ee,xe,ve,$e;for(let _e=q;_e<=J;_e++){if(_e<Z){const me=_e<ee?0:(ee-_e)/(ee-Z);ae=H-(H-Q)*me,ce=ne-(ne-Y)*me,ie=le-(le-D)*me,ue=he-(he-G)*me}else{let me;_e>se?me=1:Z===se?me=0:me=(Z-_e)/(Z-se),ae=Q-(Q-K)*me,ce=Y-(Y-B)*me,ie=D-(D-U)*me,ue=G-(G-W)*me}let Be;_e<ee?Be=0:_e>se?Be=1:Be=(ee-_e)/(ee-se),Ee=H-(H-K)*Be,xe=ne-(ne-B)*Be,ve=le-(le-U)*Be,$e=he-(he-W)*Be;const ze=Math.round(Math.min(ae,Ee)),Se=Math.round(Math.max(ae,Ee));let pe=X*_e+ze*4;for(let me=ze;me<=Se;me++)Be=(ae-me)/(ae-Ee),Be<0?Be=0:Be>1&&(Be=1),L[pe++]=ce-(ce-xe)*Be|0,L[pe++]=ie-(ie-ve)*Be|0,L[pe++]=ue-(ue-$e)*Be|0,L[pe++]=255}}function y(O,I,x){const P=I.coords,w=I.colors;let C,k;switch(I.type){case"lattice":const R=I.verticesPerRow,N=Math.floor(P.length/R)-1,F=R-1;for(C=0;C<N;C++){let L=C*R;for(let X=0;X<F;X++,L++)_(O,x,P[L],P[L+1],P[L+R],w[L],w[L+1],w[L+R]),_(O,x,P[L+R+1],P[L+1],P[L+R],w[L+R+1],w[L+1],w[L+R])}break;case"triangles":for(C=0,k=P.length;C<k;C+=3)_(O,x,P[C],P[C+1],P[C+2],w[C],w[C+1],w[C+2]);break;default:throw new Error("illegal figure")}}class E extends m{constructor(I){super(),this._coords=I[2],this._colors=I[3],this._figures=I[4],this._bounds=I[5],this._bbox=I[7],this._background=I[8],this.matrix=null}_createMeshCanvas(I,x,P){const w=Math.floor(this._bounds[0]),C=Math.floor(this._bounds[1]),k=Math.ceil(this._bounds[2])-w,R=Math.ceil(this._bounds[3])-C,N=Math.min(Math.ceil(Math.abs(k*I[0]*1.1)),3e3),F=Math.min(Math.ceil(Math.abs(R*I[1]*1.1)),3e3),L=k/N,X=R/F,V={coords:this._coords,colors:this._colors,offsetX:-w,offsetY:-C,scaleX:1/L,scaleY:1/X},H=N+2*2,ee=F+2*2,Q=P.getCanvas("mesh",H,ee,!1),Z=Q.context,K=Z.createImageData(N,F);if(x){const se=K.data;for(let ne=0,le=se.length;ne<le;ne+=4)se[ne]=x[0],se[ne+1]=x[1],se[ne+2]=x[2],se[ne+3]=255}for(const se of this._figures)y(K,se,V);return Z.putImageData(K,2,2),{canvas:Q.canvas,offsetX:w-2*L,offsetY:C-2*X,scaleX:L,scaleY:X}}getPattern(I,x,P,w){p(I,this._bbox);let C;if(w===h.SHADING)C=u.Util.singularValueDecompose2dScale((0,d.getCurrentTransform)(I));else if(C=u.Util.singularValueDecompose2dScale(x.baseTransform),this.matrix){const R=u.Util.singularValueDecompose2dScale(this.matrix);C=[C[0]*R[0],C[1]*R[1]]}const k=this._createMeshCanvas(C,w===h.SHADING?null:this._background,x.cachedCanvases);return w!==h.SHADING&&(I.setTransform(...x.baseTransform),this.matrix&&I.transform(...this.matrix)),I.translate(k.offsetX,k.offsetY),I.scale(k.scaleX,k.scaleY),I.createPattern(k.canvas,"no-repeat")}}class b extends m{getPattern(){return"hotpink"}}function T(O){switch(O[0]){case"RadialAxial":return new f(O);case"Mesh":return new E(O);case"Dummy":return new b}throw new Error(`Unknown IR type: ${O[0]}`)}const A={COLORED:1,UNCOLORED:2},S=class S{constructor(I,x,P,w,C){this.operatorList=I[2],this.matrix=I[3]||[1,0,0,1,0,0],this.bbox=I[4],this.xstep=I[5],this.ystep=I[6],this.paintType=I[7],this.tilingType=I[8],this.color=x,this.ctx=P,this.canvasGraphicsFactory=w,this.baseTransform=C}createPatternCanvas(I){const x=this.operatorList,P=this.bbox,w=this.xstep,C=this.ystep,k=this.paintType,R=this.tilingType,N=this.color,F=this.canvasGraphicsFactory;(0,u.info)("TilingType: "+R);const L=P[0],X=P[1],V=P[2],H=P[3],ee=u.Util.singularValueDecompose2dScale(this.matrix),Q=u.Util.singularValueDecompose2dScale(this.baseTransform),Z=[ee[0]*Q[0],ee[1]*Q[1]],K=this.getSizeAndScale(w,this.ctx.canvas.width,Z[0]),se=this.getSizeAndScale(C,this.ctx.canvas.height,Z[1]),ne=I.cachedCanvases.getCanvas("pattern",K.size,se.size,!0),le=ne.context,he=F.createCanvasGraphics(le);he.groupLevel=I.groupLevel,this.setFillAndStrokeStyleToContext(he,k,N);let Y=L,D=X,G=V,B=H;return L<0&&(Y=0,G+=Math.abs(L)),X<0&&(D=0,B+=Math.abs(X)),le.translate(-(K.scale*Y),-(se.scale*D)),he.transform(K.scale,0,0,se.scale,0,0),le.save(),this.clipBbox(he,Y,D,G,B),he.baseTransform=(0,d.getCurrentTransform)(he.ctx),he.executeOperatorList(x),he.endDrawing(),{canvas:ne.canvas,scaleX:K.scale,scaleY:se.scale,offsetX:Y,offsetY:D}}getSizeAndScale(I,x,P){I=Math.abs(I);const w=Math.max(S.MAX_PATTERN_SIZE,x);let C=Math.ceil(I*P);return C>=w?C=w:P=C/I,{scale:P,size:C}}clipBbox(I,x,P,w,C){const k=w-x,R=C-P;I.ctx.rect(x,P,k,R),I.current.updateRectMinMax((0,d.getCurrentTransform)(I.ctx),[x,P,w,C]),I.clip(),I.endPath()}setFillAndStrokeStyleToContext(I,x,P){const w=I.ctx,C=I.current;switch(x){case A.COLORED:const k=this.ctx;w.fillStyle=k.fillStyle,w.strokeStyle=k.strokeStyle,C.fillColor=k.fillStyle,C.strokeColor=k.strokeStyle;break;case A.UNCOLORED:const R=u.Util.makeHexColor(P[0],P[1],P[2]);w.fillStyle=R,w.strokeStyle=R,C.fillColor=R,C.strokeColor=R;break;default:throw new u.FormatError(`Unsupported paint type: ${x}`)}}getPattern(I,x,P,w){let C=P;w!==h.SHADING&&(C=u.Util.transform(C,x.baseTransform),this.matrix&&(C=u.Util.transform(C,this.matrix)));const k=this.createPatternCanvas(x);let R=new DOMMatrix(C);R=R.translate(k.offsetX,k.offsetY),R=R.scale(1/k.scaleX,1/k.scaleY);const N=I.createPattern(k.canvas,"repeat");return N.setTransform(R),N}};Re(S,"MAX_PATTERN_SIZE",3e3);let v=S;s.TilingPattern=v},(a,s,c)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.convertBlackAndWhiteToRGBA=h,s.convertToRGBA=d,s.grayToRGBA=m;var u=c(1);function d(f){switch(f.kind){case u.ImageKind.GRAYSCALE_1BPP:return h(f);case u.ImageKind.RGB_24BPP:return p(f)}return null}function h({src:f,srcPos:_=0,dest:y,width:E,height:b,nonBlackColor:T=4294967295,inverseDecode:A=!1}){const v=u.FeatureTest.isLittleEndian?4278190080:255,[S,O]=A?[T,v]:[v,T],I=E>>3,x=E&7,P=f.length;y=new Uint32Array(y.buffer);let w=0;for(let C=0;C<b;C++){for(const R=_+I;_<R;_++){const N=_<P?f[_]:255;y[w++]=N&128?O:S,y[w++]=N&64?O:S,y[w++]=N&32?O:S,y[w++]=N&16?O:S,y[w++]=N&8?O:S,y[w++]=N&4?O:S,y[w++]=N&2?O:S,y[w++]=N&1?O:S}if(x===0)continue;const k=_<P?f[_++]:255;for(let R=0;R<x;R++)y[w++]=k&1<<7-R?O:S}return{srcPos:_,destPos:w}}function p({src:f,srcPos:_=0,dest:y,destPos:E=0,width:b,height:T}){let A=0;const v=f.length>>2,S=new Uint32Array(f.buffer,_,v);if(u.FeatureTest.isLittleEndian){for(;A<v-2;A+=3,E+=4){const O=S[A],I=S[A+1],x=S[A+2];y[E]=O|4278190080,y[E+1]=O>>>24|I<<8|4278190080,y[E+2]=I>>>16|x<<16|4278190080,y[E+3]=x>>>8|4278190080}for(let O=A*4,I=f.length;O<I;O+=3)y[E++]=f[O]|f[O+1]<<8|f[O+2]<<16|4278190080}else{for(;A<v-2;A+=3,E+=4){const O=S[A],I=S[A+1],x=S[A+2];y[E]=O|255,y[E+1]=O<<24|I>>>8|255,y[E+2]=I<<16|x>>>16|255,y[E+3]=x<<8|255}for(let O=A*4,I=f.length;O<I;O+=3)y[E++]=f[O]<<24|f[O+1]<<16|f[O+2]<<8|255}return{srcPos:_,destPos:E}}function m(f,_){if(u.FeatureTest.isLittleEndian)for(let y=0,E=f.length;y<E;y++)_[y]=f[y]*65793|4278190080;else for(let y=0,E=f.length;y<E;y++)_[y]=f[y]*16843008|255}},(a,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GlobalWorkerOptions=void 0;const c=Object.create(null);s.GlobalWorkerOptions=c,c.workerPort=null,c.workerSrc=""},(a,s,c)=>{var f,Hr,y,zr,b,Pn;Object.defineProperty(s,"__esModule",{value:!0}),s.MessageHandler=void 0;var u=c(1);const d={UNKNOWN:0,DATA:1,ERROR:2},h={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function p(A){switch(A instanceof Error||typeof A=="object"&&A!==null||(0,u.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),A.name){case"AbortException":return new u.AbortException(A.message);case"MissingPDFException":return new u.MissingPDFException(A.message);case"PasswordException":return new u.PasswordException(A.message,A.code);case"UnexpectedResponseException":return new u.UnexpectedResponseException(A.message,A.status);case"UnknownErrorException":return new u.UnknownErrorException(A.message,A.details);default:return new u.UnknownErrorException(A.message,A.toString())}}class m{constructor(v,S,O){de(this,f);de(this,y);de(this,b);this.sourceName=v,this.targetName=S,this.comObj=O,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=I=>{const x=I.data;if(x.targetName!==this.sourceName)return;if(x.stream){Te(this,y,zr).call(this,x);return}if(x.callback){const w=x.callbackId,C=this.callbackCapabilities[w];if(!C)throw new Error(`Cannot resolve callback ${w}`);if(delete this.callbackCapabilities[w],x.callback===d.DATA)C.resolve(x.data);else if(x.callback===d.ERROR)C.reject(p(x.reason));else throw new Error("Unexpected callback case");return}const P=this.actionHandler[x.action];if(!P)throw new Error(`Unknown action from worker: ${x.action}`);if(x.callbackId){const w=this.sourceName,C=x.sourceName;new Promise(function(k){k(P(x.data))}).then(function(k){O.postMessage({sourceName:w,targetName:C,callback:d.DATA,callbackId:x.callbackId,data:k})},function(k){O.postMessage({sourceName:w,targetName:C,callback:d.ERROR,callbackId:x.callbackId,reason:p(k)})});return}if(x.streamId){Te(this,f,Hr).call(this,x);return}P(x.data)},O.addEventListener("message",this._onComObjOnMessage)}on(v,S){const O=this.actionHandler;if(O[v])throw new Error(`There is already an actionName called "${v}"`);O[v]=S}send(v,S,O){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,data:S},O)}sendWithPromise(v,S,O){const I=this.callbackId++,x=new u.PromiseCapability;this.callbackCapabilities[I]=x;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,callbackId:I,data:S},O)}catch(P){x.reject(P)}return x.promise}sendWithStream(v,S,O,I){const x=this.streamId++,P=this.sourceName,w=this.targetName,C=this.comObj;return new ReadableStream({start:k=>{const R=new u.PromiseCapability;return this.streamControllers[x]={controller:k,startCall:R,pullCall:null,cancelCall:null,isClosed:!1},C.postMessage({sourceName:P,targetName:w,action:v,streamId:x,data:S,desiredSize:k.desiredSize},I),R.promise},pull:k=>{const R=new u.PromiseCapability;return this.streamControllers[x].pullCall=R,C.postMessage({sourceName:P,targetName:w,stream:h.PULL,streamId:x,desiredSize:k.desiredSize}),R.promise},cancel:k=>{(0,u.assert)(k instanceof Error,"cancel must have a valid reason");const R=new u.PromiseCapability;return this.streamControllers[x].cancelCall=R,this.streamControllers[x].isClosed=!0,C.postMessage({sourceName:P,targetName:w,stream:h.CANCEL,streamId:x,reason:p(k)}),R.promise}},O)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}f=new WeakSet,Hr=function(v){const S=v.streamId,O=this.sourceName,I=v.sourceName,x=this.comObj,P=this,w=this.actionHandler[v.action],C={enqueue(k,R=1,N){if(this.isCancelled)return;const F=this.desiredSize;this.desiredSize-=R,F>0&&this.desiredSize<=0&&(this.sinkCapability=new u.PromiseCapability,this.ready=this.sinkCapability.promise),x.postMessage({sourceName:O,targetName:I,stream:h.ENQUEUE,streamId:S,chunk:k},N)},close(){this.isCancelled||(this.isCancelled=!0,x.postMessage({sourceName:O,targetName:I,stream:h.CLOSE,streamId:S}),delete P.streamSinks[S])},error(k){(0,u.assert)(k instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,x.postMessage({sourceName:O,targetName:I,stream:h.ERROR,streamId:S,reason:p(k)}))},sinkCapability:new u.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:v.desiredSize,ready:null};C.sinkCapability.resolve(),C.ready=C.sinkCapability.promise,this.streamSinks[S]=C,new Promise(function(k){k(w(v.data,C))}).then(function(){x.postMessage({sourceName:O,targetName:I,stream:h.START_COMPLETE,streamId:S,success:!0})},function(k){x.postMessage({sourceName:O,targetName:I,stream:h.START_COMPLETE,streamId:S,reason:p(k)})})},y=new WeakSet,zr=function(v){const S=v.streamId,O=this.sourceName,I=v.sourceName,x=this.comObj,P=this.streamControllers[S],w=this.streamSinks[S];switch(v.stream){case h.START_COMPLETE:v.success?P.startCall.resolve():P.startCall.reject(p(v.reason));break;case h.PULL_COMPLETE:v.success?P.pullCall.resolve():P.pullCall.reject(p(v.reason));break;case h.PULL:if(!w){x.postMessage({sourceName:O,targetName:I,stream:h.PULL_COMPLETE,streamId:S,success:!0});break}w.desiredSize<=0&&v.desiredSize>0&&w.sinkCapability.resolve(),w.desiredSize=v.desiredSize,new Promise(function(C){var k;C((k=w.onPull)==null?void 0:k.call(w))}).then(function(){x.postMessage({sourceName:O,targetName:I,stream:h.PULL_COMPLETE,streamId:S,success:!0})},function(C){x.postMessage({sourceName:O,targetName:I,stream:h.PULL_COMPLETE,streamId:S,reason:p(C)})});break;case h.ENQUEUE:if((0,u.assert)(P,"enqueue should have stream controller"),P.isClosed)break;P.controller.enqueue(v.chunk);break;case h.CLOSE:if((0,u.assert)(P,"close should have stream controller"),P.isClosed)break;P.isClosed=!0,P.controller.close(),Te(this,b,Pn).call(this,P,S);break;case h.ERROR:(0,u.assert)(P,"error should have stream controller"),P.controller.error(p(v.reason)),Te(this,b,Pn).call(this,P,S);break;case h.CANCEL_COMPLETE:v.success?P.cancelCall.resolve():P.cancelCall.reject(p(v.reason)),Te(this,b,Pn).call(this,P,S);break;case h.CANCEL:if(!w)break;new Promise(function(C){var k;C((k=w.onCancel)==null?void 0:k.call(w,p(v.reason)))}).then(function(){x.postMessage({sourceName:O,targetName:I,stream:h.CANCEL_COMPLETE,streamId:S,success:!0})},function(C){x.postMessage({sourceName:O,targetName:I,stream:h.CANCEL_COMPLETE,streamId:S,reason:p(C)})}),w.sinkCapability.reject(p(v.reason)),w.isCancelled=!0,delete this.streamSinks[S];break;default:throw new Error("Unexpected stream case")}},b=new WeakSet,Pn=async function(v,S){var O,I,x;await Promise.allSettled([(O=v.startCall)==null?void 0:O.promise,(I=v.pullCall)==null?void 0:I.promise,(x=v.cancelCall)==null?void 0:x.promise]),delete this.streamControllers[S]},s.MessageHandler=m},(a,s,c)=>{var h,p;Object.defineProperty(s,"__esModule",{value:!0}),s.Metadata=void 0;var u=c(1);class d{constructor({parsedData:f,rawData:_}){de(this,h,void 0);de(this,p,void 0);Ie(this,h,f),Ie(this,p,_)}getRaw(){return M(this,p)}get(f){return M(this,h).get(f)??null}getAll(){return(0,u.objectFromMap)(M(this,h))}has(f){return M(this,h).has(f)}}h=new WeakMap,p=new WeakMap,s.Metadata=d},(a,s,c)=>{var f,_,y,E,b,T,hr;Object.defineProperty(s,"__esModule",{value:!0}),s.OptionalContentConfig=void 0;var u=c(1),d=c(8);const h=Symbol("INTERNAL");class p{constructor(S,O){de(this,f,!0);this.name=S,this.intent=O}get visible(){return M(this,f)}_setVisible(S,O){S!==h&&(0,u.unreachable)("Internal method `_setVisible` called."),Ie(this,f,O)}}f=new WeakMap;class m{constructor(S){de(this,T);de(this,_,null);de(this,y,new Map);de(this,E,null);de(this,b,null);if(this.name=null,this.creator=null,S!==null){this.name=S.name,this.creator=S.creator,Ie(this,b,S.order);for(const O of S.groups)M(this,y).set(O.id,new p(O.name,O.intent));if(S.baseState==="OFF")for(const O of M(this,y).values())O._setVisible(h,!1);for(const O of S.on)M(this,y).get(O)._setVisible(h,!0);for(const O of S.off)M(this,y).get(O)._setVisible(h,!1);Ie(this,E,this.getHash())}}isVisible(S){if(M(this,y).size===0)return!0;if(!S)return(0,u.warn)("Optional content group not defined."),!0;if(S.type==="OCG")return M(this,y).has(S.id)?M(this,y).get(S.id).visible:((0,u.warn)(`Optional content group not found: ${S.id}`),!0);if(S.type==="OCMD"){if(S.expression)return Te(this,T,hr).call(this,S.expression);if(!S.policy||S.policy==="AnyOn"){for(const O of S.ids){if(!M(this,y).has(O))return(0,u.warn)(`Optional content group not found: ${O}`),!0;if(M(this,y).get(O).visible)return!0}return!1}else if(S.policy==="AllOn"){for(const O of S.ids){if(!M(this,y).has(O))return(0,u.warn)(`Optional content group not found: ${O}`),!0;if(!M(this,y).get(O).visible)return!1}return!0}else if(S.policy==="AnyOff"){for(const O of S.ids){if(!M(this,y).has(O))return(0,u.warn)(`Optional content group not found: ${O}`),!0;if(!M(this,y).get(O).visible)return!0}return!1}else if(S.policy==="AllOff"){for(const O of S.ids){if(!M(this,y).has(O))return(0,u.warn)(`Optional content group not found: ${O}`),!0;if(M(this,y).get(O).visible)return!1}return!0}return(0,u.warn)(`Unknown optional content policy ${S.policy}.`),!0}return(0,u.warn)(`Unknown group type ${S.type}.`),!0}setVisibility(S,O=!0){if(!M(this,y).has(S)){(0,u.warn)(`Optional content group not found: ${S}`);return}M(this,y).get(S)._setVisible(h,!!O),Ie(this,_,null)}get hasInitialVisibility(){return M(this,E)===null||this.getHash()===M(this,E)}getOrder(){return M(this,y).size?M(this,b)?M(this,b).slice():[...M(this,y).keys()]:null}getGroups(){return M(this,y).size>0?(0,u.objectFromMap)(M(this,y)):null}getGroup(S){return M(this,y).get(S)||null}getHash(){if(M(this,_)!==null)return M(this,_);const S=new d.MurmurHash3_64;for(const[O,I]of M(this,y))S.update(`${O}:${I.visible}`);return Ie(this,_,S.hexdigest())}}_=new WeakMap,y=new WeakMap,E=new WeakMap,b=new WeakMap,T=new WeakSet,hr=function(S){const O=S.length;if(O<2)return!0;const I=S[0];for(let x=1;x<O;x++){const P=S[x];let w;if(Array.isArray(P))w=Te(this,T,hr).call(this,P);else if(M(this,y).has(P))w=M(this,y).get(P).visible;else return(0,u.warn)(`Optional content group not found: ${P}`),!0;switch(I){case"And":if(!w)return!1;break;case"Or":if(w)return!0;break;case"Not":return!w;default:return!0}}return I==="And"},s.OptionalContentConfig=m},(a,s,c)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFDataTransportStream=void 0;var u=c(1),d=c(6);class h{constructor({length:_,initialData:y,progressiveDone:E=!1,contentDispositionFilename:b=null,disableRange:T=!1,disableStream:A=!1},v){if((0,u.assert)(v,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=E,this._contentDispositionFilename=b,(y==null?void 0:y.length)>0){const S=y instanceof Uint8Array&&y.byteLength===y.buffer.byteLength?y.buffer:new Uint8Array(y).buffer;this._queuedChunks.push(S)}this._pdfDataRangeTransport=v,this._isStreamingSupported=!A,this._isRangeSupported=!T,this._contentLength=_,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((S,O)=>{this._onReceiveData({begin:S,chunk:O})}),this._pdfDataRangeTransport.addProgressListener((S,O)=>{this._onProgress({loaded:S,total:O})}),this._pdfDataRangeTransport.addProgressiveReadListener(S=>{this._onReceiveData({chunk:S})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:_,chunk:y}){const E=y instanceof Uint8Array&&y.byteLength===y.buffer.byteLength?y.buffer:new Uint8Array(y).buffer;if(_===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(E):this._queuedChunks.push(E);else{const b=this._rangeReaders.some(function(T){return T._begin!==_?!1:(T._enqueue(E),!0)});(0,u.assert)(b,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var _;return((_=this._fullRequestReader)==null?void 0:_._loaded)??0}_onProgress(_){var y,E,b,T;_.total===void 0?(E=(y=this._rangeReaders[0])==null?void 0:y.onProgress)==null||E.call(y,{loaded:_.loaded}):(T=(b=this._fullRequestReader)==null?void 0:b.onProgress)==null||T.call(b,{loaded:_.loaded,total:_.total})}_onProgressiveDone(){var _;(_=this._fullRequestReader)==null||_.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(_){const y=this._rangeReaders.indexOf(_);y>=0&&this._rangeReaders.splice(y,1)}getFullReader(){(0,u.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const _=this._queuedChunks;return this._queuedChunks=null,new p(this,_,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(_,y){if(y<=this._progressiveDataLength)return null;const E=new m(this,_,y);return this._pdfDataRangeTransport.requestDataRange(_,y),this._rangeReaders.push(E),E}cancelAllRequests(_){var y;(y=this._fullRequestReader)==null||y.cancel(_);for(const E of this._rangeReaders.slice(0))E.cancel(_);this._pdfDataRangeTransport.abort()}}s.PDFDataTransportStream=h;class p{constructor(_,y,E=!1,b=null){this._stream=_,this._done=E||!1,this._filename=(0,d.isPdfFile)(b)?b:null,this._queuedChunks=y||[],this._loaded=0;for(const T of this._queuedChunks)this._loaded+=T.byteLength;this._requests=[],this._headersReady=Promise.resolve(),_._fullRequestReader=this,this.onProgress=null}_enqueue(_){this._done||(this._requests.length>0?this._requests.shift().resolve({value:_,done:!1}):this._queuedChunks.push(_),this._loaded+=_.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const _=new u.PromiseCapability;return this._requests.push(_),_.promise}cancel(_){this._done=!0;for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class m{constructor(_,y,E){this._stream=_,this._begin=y,this._end=E,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(_){if(!this._done){if(this._requests.length===0)this._queuedChunk=_;else{this._requests.shift().resolve({value:_,done:!1});for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const y=this._queuedChunk;return this._queuedChunk=null,{value:y,done:!1}}if(this._done)return{value:void 0,done:!0};const _=new u.PromiseCapability;return this._requests.push(_),_.promise}cancel(_){this._done=!0;for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(a,s,c)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFFetchStream=void 0;var u=c(1),d=c(20);function h(E,b,T){return{method:"GET",headers:E,signal:T.signal,mode:"cors",credentials:b?"include":"same-origin",redirect:"follow"}}function p(E){const b=new Headers;for(const T in E){const A=E[T];A!==void 0&&b.append(T,A)}return b}function m(E){return E instanceof Uint8Array?E.buffer:E instanceof ArrayBuffer?E:((0,u.warn)(`getArrayBuffer - unexpected data format: ${E}`),new Uint8Array(E).buffer)}class f{constructor(b){this.source=b,this.isHttp=/^https?:/i.test(b.url),this.httpHeaders=this.isHttp&&b.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var b;return((b=this._fullRequestReader)==null?void 0:b._loaded)??0}getFullReader(){return(0,u.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new _(this),this._fullRequestReader}getRangeReader(b,T){if(T<=this._progressiveDataLength)return null;const A=new y(this,b,T);return this._rangeRequestReaders.push(A),A}cancelAllRequests(b){var T;(T=this._fullRequestReader)==null||T.cancel(b);for(const A of this._rangeRequestReaders.slice(0))A.cancel(b)}}s.PDFFetchStream=f;class _{constructor(b){this._stream=b,this._reader=null,this._loaded=0,this._filename=null;const T=b.source;this._withCredentials=T.withCredentials||!1,this._contentLength=T.length,this._headersCapability=new u.PromiseCapability,this._disableRange=T.disableRange||!1,this._rangeChunkSize=T.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!T.disableStream,this._isRangeSupported=!T.disableRange,this._headers=p(this._stream.httpHeaders);const A=T.url;fetch(A,h(this._headers,this._withCredentials,this._abortController)).then(v=>{if(!(0,d.validateResponseStatus)(v.status))throw(0,d.createResponseStatusError)(v.status,A);this._reader=v.body.getReader(),this._headersCapability.resolve();const S=x=>v.headers.get(x),{allowRangeRequests:O,suggestedLength:I}=(0,d.validateRangeRequestCapabilities)({getResponseHeader:S,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=O,this._contentLength=I||this._contentLength,this._filename=(0,d.extractFilenameFromHeader)(S),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new u.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var A;await this._headersCapability.promise;const{value:b,done:T}=await this._reader.read();return T?{value:b,done:T}:(this._loaded+=b.byteLength,(A=this.onProgress)==null||A.call(this,{loaded:this._loaded,total:this._contentLength}),{value:m(b),done:!1})}cancel(b){var T;(T=this._reader)==null||T.cancel(b),this._abortController.abort()}}class y{constructor(b,T,A){this._stream=b,this._reader=null,this._loaded=0;const v=b.source;this._withCredentials=v.withCredentials||!1,this._readCapability=new u.PromiseCapability,this._isStreamingSupported=!v.disableStream,this._abortController=new AbortController,this._headers=p(this._stream.httpHeaders),this._headers.append("Range",`bytes=${T}-${A-1}`);const S=v.url;fetch(S,h(this._headers,this._withCredentials,this._abortController)).then(O=>{if(!(0,d.validateResponseStatus)(O.status))throw(0,d.createResponseStatusError)(O.status,S);this._readCapability.resolve(),this._reader=O.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var A;await this._readCapability.promise;const{value:b,done:T}=await this._reader.read();return T?{value:b,done:T}:(this._loaded+=b.byteLength,(A=this.onProgress)==null||A.call(this,{loaded:this._loaded}),{value:m(b),done:!1})}cancel(b){var T;(T=this._reader)==null||T.cancel(b),this._abortController.abort()}}},(a,s,c)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createResponseStatusError=f,s.extractFilenameFromHeader=m,s.validateRangeRequestCapabilities=p,s.validateResponseStatus=_;var u=c(1),d=c(21),h=c(6);function p({getResponseHeader:y,isHttp:E,rangeChunkSize:b,disableRange:T}){const A={allowRangeRequests:!1,suggestedLength:void 0},v=parseInt(y("Content-Length"),10);return!Number.isInteger(v)||(A.suggestedLength=v,v<=2*b)||T||!E||y("Accept-Ranges")!=="bytes"||(y("Content-Encoding")||"identity")!=="identity"||(A.allowRangeRequests=!0),A}function m(y){const E=y("Content-Disposition");if(E){let b=(0,d.getFilenameFromContentDispositionHeader)(E);if(b.includes("%"))try{b=decodeURIComponent(b)}catch{}if((0,h.isPdfFile)(b))return b}return null}function f(y,E){return y===404||y===0&&E.startsWith("file:")?new u.MissingPDFException('Missing PDF "'+E+'".'):new u.UnexpectedResponseException(`Unexpected server response (${y}) while retrieving PDF "${E}".`,y)}function _(y){return y===200||y===206}},(a,s,c)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getFilenameFromContentDispositionHeader=d;var u=c(1);function d(h){let p=!0,m=f("filename\\*","i").exec(h);if(m){m=m[1];let v=b(m);return v=unescape(v),v=T(v),v=A(v),y(v)}if(m=E(h),m){const v=A(m);return y(v)}if(m=f("filename","i").exec(h),m){m=m[1];let v=b(m);return v=A(v),y(v)}function f(v,S){return new RegExp("(?:^|;)\\s*"+v+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',S)}function _(v,S){if(v){if(!/^[\x00-\xFF]+$/.test(S))return S;try{const O=new TextDecoder(v,{fatal:!0}),I=(0,u.stringToBytes)(S);S=O.decode(I),p=!1}catch{}}return S}function y(v){return p&&/[\x80-\xff]/.test(v)&&(v=_("utf-8",v),p&&(v=_("iso-8859-1",v))),v}function E(v){const S=[];let O;const I=f("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(O=I.exec(v))!==null;){let[,P,w,C]=O;if(P=parseInt(P,10),P in S){if(P===0)break;continue}S[P]=[w,C]}const x=[];for(let P=0;P<S.length&&P in S;++P){let[w,C]=S[P];C=b(C),w&&(C=unescape(C),P===0&&(C=T(C))),x.push(C)}return x.join("")}function b(v){if(v.startsWith('"')){const S=v.slice(1).split('\\"');for(let O=0;O<S.length;++O){const I=S[O].indexOf('"');I!==-1&&(S[O]=S[O].slice(0,I),S.length=O+1),S[O]=S[O].replaceAll(/\\(.)/g,"$1")}v=S.join('"')}return v}function T(v){const S=v.indexOf("'");if(S===-1)return v;const O=v.slice(0,S),I=v.slice(S+1).replace(/^[^']*'/,"");return _(O,I)}function A(v){return!v.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(v)?v:v.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(S,O,I,x){if(I==="q"||I==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(P,w){return String.fromCharCode(parseInt(w,16))}),_(O,x);try{x=atob(x)}catch{}return _(O,x)})}return""}},(a,s,c)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNetworkStream=void 0;var u=c(1),d=c(20);const h=200,p=206;function m(b){const T=b.response;return typeof T!="string"?T:(0,u.stringToBytes)(T).buffer}class f{constructor(T,A={}){this.url=T,this.isHttp=/^https?:/i.test(T),this.httpHeaders=this.isHttp&&A.httpHeaders||Object.create(null),this.withCredentials=A.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(T,A,v){const S={begin:T,end:A};for(const O in v)S[O]=v[O];return this.request(S)}requestFull(T){return this.request(T)}request(T){const A=new XMLHttpRequest,v=this.currXhrId++,S=this.pendingRequests[v]={xhr:A};A.open("GET",this.url),A.withCredentials=this.withCredentials;for(const O in this.httpHeaders){const I=this.httpHeaders[O];I!==void 0&&A.setRequestHeader(O,I)}return this.isHttp&&"begin"in T&&"end"in T?(A.setRequestHeader("Range",`bytes=${T.begin}-${T.end-1}`),S.expectedStatus=p):S.expectedStatus=h,A.responseType="arraybuffer",T.onError&&(A.onerror=function(O){T.onError(A.status)}),A.onreadystatechange=this.onStateChange.bind(this,v),A.onprogress=this.onProgress.bind(this,v),S.onHeadersReceived=T.onHeadersReceived,S.onDone=T.onDone,S.onError=T.onError,S.onProgress=T.onProgress,A.send(null),v}onProgress(T,A){var S;const v=this.pendingRequests[T];v&&((S=v.onProgress)==null||S.call(v,A))}onStateChange(T,A){var x,P,w;const v=this.pendingRequests[T];if(!v)return;const S=v.xhr;if(S.readyState>=2&&v.onHeadersReceived&&(v.onHeadersReceived(),delete v.onHeadersReceived),S.readyState!==4||!(T in this.pendingRequests))return;if(delete this.pendingRequests[T],S.status===0&&this.isHttp){(x=v.onError)==null||x.call(v,S.status);return}const O=S.status||h;if(!(O===h&&v.expectedStatus===p)&&O!==v.expectedStatus){(P=v.onError)==null||P.call(v,S.status);return}const I=m(S);if(O===p){const C=S.getResponseHeader("Content-Range"),k=/bytes (\d+)-(\d+)\/(\d+)/.exec(C);v.onDone({begin:parseInt(k[1],10),chunk:I})}else I?v.onDone({begin:0,chunk:I}):(w=v.onError)==null||w.call(v,S.status)}getRequestXhr(T){return this.pendingRequests[T].xhr}isPendingRequest(T){return T in this.pendingRequests}abortRequest(T){const A=this.pendingRequests[T].xhr;delete this.pendingRequests[T],A.abort()}}class _{constructor(T){this._source=T,this._manager=new f(T.url,{httpHeaders:T.httpHeaders,withCredentials:T.withCredentials}),this._rangeChunkSize=T.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(T){const A=this._rangeRequestReaders.indexOf(T);A>=0&&this._rangeRequestReaders.splice(A,1)}getFullReader(){return(0,u.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new y(this._manager,this._source),this._fullRequestReader}getRangeReader(T,A){const v=new E(this._manager,T,A);return v.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(v),v}cancelAllRequests(T){var A;(A=this._fullRequestReader)==null||A.cancel(T);for(const v of this._rangeRequestReaders.slice(0))v.cancel(T)}}s.PDFNetworkStream=_;class y{constructor(T,A){this._manager=T;const v={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=A.url,this._fullRequestId=T.requestFull(v),this._headersReceivedCapability=new u.PromiseCapability,this._disableRange=A.disableRange||!1,this._contentLength=A.length,this._rangeChunkSize=A.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const T=this._fullRequestId,A=this._manager.getRequestXhr(T),v=I=>A.getResponseHeader(I),{allowRangeRequests:S,suggestedLength:O}=(0,d.validateRangeRequestCapabilities)({getResponseHeader:v,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});S&&(this._isRangeSupported=!0),this._contentLength=O||this._contentLength,this._filename=(0,d.extractFilenameFromHeader)(v),this._isRangeSupported&&this._manager.abortRequest(T),this._headersReceivedCapability.resolve()}_onDone(T){if(T&&(this._requests.length>0?this._requests.shift().resolve({value:T.chunk,done:!1}):this._cachedChunks.push(T.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(T){this._storedError=(0,d.createResponseStatusError)(T,this._url),this._headersReceivedCapability.reject(this._storedError);for(const A of this._requests)A.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(T){var A;(A=this.onProgress)==null||A.call(this,{loaded:T.loaded,total:T.lengthComputable?T.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const T=new u.PromiseCapability;return this._requests.push(T),T.promise}cancel(T){this._done=!0,this._headersReceivedCapability.reject(T);for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class E{constructor(T,A,v){this._manager=T;const S={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=T.url,this._requestId=T.requestRange(A,v,S),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var T;(T=this.onClosed)==null||T.call(this,this)}_onDone(T){const A=T.chunk;this._requests.length>0?this._requests.shift().resolve({value:A,done:!1}):this._queuedChunk=A,this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(T){this._storedError=(0,d.createResponseStatusError)(T,this._url);for(const A of this._requests)A.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(T){var A;this.isStreamingSupported||((A=this.onProgress)==null||A.call(this,{loaded:T.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const A=this._queuedChunk;return this._queuedChunk=null,{value:A,done:!1}}if(this._done)return{value:void 0,done:!0};const T=new u.PromiseCapability;return this._requests.push(T),T.promise}cancel(T){this._done=!0;for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(a,s,c)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNodeStream=void 0;var u=c(1),d=c(20);const h=/^file:\/\/\/[a-zA-Z]:\//;function p(v){const S=require$$0,O=S.parse(v);return O.protocol==="file:"||O.host?O:/^[a-z]:[/\\]/i.test(v)?S.parse(`file:///${v}`):(O.host||(O.protocol="file:"),O)}class m{constructor(S){this.source=S,this.url=p(S.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&S.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var S;return((S=this._fullRequestReader)==null?void 0:S._loaded)??0}getFullReader(){return(0,u.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new T(this):new E(this),this._fullRequestReader}getRangeReader(S,O){if(O<=this._progressiveDataLength)return null;const I=this.isFsUrl?new A(this,S,O):new b(this,S,O);return this._rangeRequestReaders.push(I),I}cancelAllRequests(S){var O;(O=this._fullRequestReader)==null||O.cancel(S);for(const I of this._rangeRequestReaders.slice(0))I.cancel(S)}}s.PDFNodeStream=m;class f{constructor(S){this._url=S.url,this._done=!1,this._storedError=null,this.onProgress=null;const O=S.source;this._contentLength=O.length,this._loaded=0,this._filename=null,this._disableRange=O.disableRange||!1,this._rangeChunkSize=O.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!O.disableStream,this._isRangeSupported=!O.disableRange,this._readableStream=null,this._readCapability=new u.PromiseCapability,this._headersCapability=new u.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var O;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const S=this._readableStream.read();return S===null?(this._readCapability=new u.PromiseCapability,this.read()):(this._loaded+=S.length,(O=this.onProgress)==null||O.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(S).buffer,done:!1})}cancel(S){if(!this._readableStream){this._error(S);return}this._readableStream.destroy(S)}_error(S){this._storedError=S,this._readCapability.resolve()}_setReadableStream(S){this._readableStream=S,S.on("readable",()=>{this._readCapability.resolve()}),S.on("end",()=>{S.destroy(),this._done=!0,this._readCapability.resolve()}),S.on("error",O=>{this._error(O)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new u.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class _{constructor(S){this._url=S.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new u.PromiseCapability;const O=S.source;this._isStreamingSupported=!O.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var O;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const S=this._readableStream.read();return S===null?(this._readCapability=new u.PromiseCapability,this.read()):(this._loaded+=S.length,(O=this.onProgress)==null||O.call(this,{loaded:this._loaded}),{value:new Uint8Array(S).buffer,done:!1})}cancel(S){if(!this._readableStream){this._error(S);return}this._readableStream.destroy(S)}_error(S){this._storedError=S,this._readCapability.resolve()}_setReadableStream(S){this._readableStream=S,S.on("readable",()=>{this._readCapability.resolve()}),S.on("end",()=>{S.destroy(),this._done=!0,this._readCapability.resolve()}),S.on("error",O=>{this._error(O)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function y(v,S){return{protocol:v.protocol,auth:v.auth,host:v.hostname,port:v.port,path:v.path,method:"GET",headers:S}}class E extends f{constructor(S){super(S);const O=I=>{if(I.statusCode===404){const C=new u.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=C,this._headersCapability.reject(C);return}this._headersCapability.resolve(),this._setReadableStream(I);const x=C=>this._readableStream.headers[C.toLowerCase()],{allowRangeRequests:P,suggestedLength:w}=(0,d.validateRangeRequestCapabilities)({getResponseHeader:x,isHttp:S.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=P,this._contentLength=w||this._contentLength,this._filename=(0,d.extractFilenameFromHeader)(x)};if(this._request=null,this._url.protocol==="http:"){const I=require$$0;this._request=I.request(y(this._url,S.httpHeaders),O)}else{const I=require$$0;this._request=I.request(y(this._url,S.httpHeaders),O)}this._request.on("error",I=>{this._storedError=I,this._headersCapability.reject(I)}),this._request.end()}}class b extends _{constructor(S,O,I){super(S),this._httpHeaders={};for(const P in S.httpHeaders){const w=S.httpHeaders[P];w!==void 0&&(this._httpHeaders[P]=w)}this._httpHeaders.Range=`bytes=${O}-${I-1}`;const x=P=>{if(P.statusCode===404){const w=new u.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=w;return}this._setReadableStream(P)};if(this._request=null,this._url.protocol==="http:"){const P=require$$0;this._request=P.request(y(this._url,this._httpHeaders),x)}else{const P=require$$0;this._request=P.request(y(this._url,this._httpHeaders),x)}this._request.on("error",P=>{this._storedError=P}),this._request.end()}}class T extends f{constructor(S){super(S);let O=decodeURIComponent(this._url.path);h.test(this._url.href)&&(O=O.replace(/^\//,""));const I=require$$0;I.lstat(O,(x,P)=>{if(x){x.code==="ENOENT"&&(x=new u.MissingPDFException(`Missing PDF "${O}".`)),this._storedError=x,this._headersCapability.reject(x);return}this._contentLength=P.size,this._setReadableStream(I.createReadStream(O)),this._headersCapability.resolve()})}}class A extends _{constructor(S,O,I){super(S);let x=decodeURIComponent(this._url.path);h.test(this._url.href)&&(x=x.replace(/^\//,""));const P=require$$0;this._setReadableStream(P.createReadStream(x,{start:O,end:I-1}))}}},(a,s,c)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SVGGraphics=void 0;var u=c(6),d=c(1);const h={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},p="http://www.w3.org/XML/1998/namespace",m="http://www.w3.org/1999/xlink",f=["butt","round","square"],_=["miter","round","bevel"],y=function(P,w="",C=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!C)return URL.createObjectURL(new Blob([P],{type:w}));const k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let R=`data:${w};base64,`;for(let N=0,F=P.length;N<F;N+=3){const L=P[N]&255,X=P[N+1]&255,V=P[N+2]&255,H=L>>2,ee=(L&3)<<4|X>>4,Q=N+1<F?(X&15)<<2|V>>6:64,Z=N+2<F?V&63:64;R+=k[H]+k[ee]+k[Q]+k[Z]}return R},E=function(){const P=new Uint8Array([137,80,78,71,13,10,26,10]),w=12,C=new Int32Array(256);for(let V=0;V<256;V++){let H=V;for(let ee=0;ee<8;ee++)H=H&1?3988292384^H>>1&2147483647:H>>1&2147483647;C[V]=H}function k(V,H,ee){let Q=-1;for(let Z=H;Z<ee;Z++){const K=(Q^V[Z])&255,se=C[K];Q=Q>>>8^se}return Q^-1}function R(V,H,ee,Q){let Z=Q;const K=H.length;ee[Z]=K>>24&255,ee[Z+1]=K>>16&255,ee[Z+2]=K>>8&255,ee[Z+3]=K&255,Z+=4,ee[Z]=V.charCodeAt(0)&255,ee[Z+1]=V.charCodeAt(1)&255,ee[Z+2]=V.charCodeAt(2)&255,ee[Z+3]=V.charCodeAt(3)&255,Z+=4,ee.set(H,Z),Z+=H.length;const se=k(ee,Q+4,Z);ee[Z]=se>>24&255,ee[Z+1]=se>>16&255,ee[Z+2]=se>>8&255,ee[Z+3]=se&255}function N(V,H,ee){let Q=1,Z=0;for(let K=H;K<ee;++K)Q=(Q+(V[K]&255))%65521,Z=(Z+Q)%65521;return Z<<16|Q}function F(V){if(!d.isNodeJS)return L(V);try{const H=parseInt(process.versions.node)>=8?V:Buffer.from(V),ee=require$$0.deflateSync(H,{level:9});return ee instanceof Uint8Array?ee:new Uint8Array(ee)}catch(H){(0,d.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+H)}return L(V)}function L(V){let H=V.length;const ee=65535,Q=Math.ceil(H/ee),Z=new Uint8Array(2+H+Q*5+4);let K=0;Z[K++]=120,Z[K++]=156;let se=0;for(;H>ee;)Z[K++]=0,Z[K++]=255,Z[K++]=255,Z[K++]=0,Z[K++]=0,Z.set(V.subarray(se,se+ee),K),K+=ee,se+=ee,H-=ee;Z[K++]=1,Z[K++]=H&255,Z[K++]=H>>8&255,Z[K++]=~H&65535&255,Z[K++]=(~H&65535)>>8&255,Z.set(V.subarray(se),K),K+=V.length-se;const ne=N(V,0,V.length);return Z[K++]=ne>>24&255,Z[K++]=ne>>16&255,Z[K++]=ne>>8&255,Z[K++]=ne&255,Z}function X(V,H,ee,Q){const Z=V.width,K=V.height;let se,ne,le;const he=V.data;switch(H){case d.ImageKind.GRAYSCALE_1BPP:ne=0,se=1,le=Z+7>>3;break;case d.ImageKind.RGB_24BPP:ne=2,se=8,le=Z*3;break;case d.ImageKind.RGBA_32BPP:ne=6,se=8,le=Z*4;break;default:throw new Error("invalid format")}const Y=new Uint8Array((1+le)*K);let D=0,G=0;for(let ae=0;ae<K;++ae)Y[D++]=0,Y.set(he.subarray(G,G+le),D),G+=le,D+=le;if(H===d.ImageKind.GRAYSCALE_1BPP&&Q){D=0;for(let ae=0;ae<K;ae++){D++;for(let ce=0;ce<le;ce++)Y[D++]^=255}}const B=new Uint8Array([Z>>24&255,Z>>16&255,Z>>8&255,Z&255,K>>24&255,K>>16&255,K>>8&255,K&255,se,ne,0,0,0]),U=F(Y),W=P.length+w*3+B.length+U.length,q=new Uint8Array(W);let J=0;return q.set(P,J),J+=P.length,R("IHDR",B,q,J),J+=w+B.length,R("IDATA",U,q,J),J+=w+U.length,R("IEND",new Uint8Array(0),q,J),y(q,"image/png",ee)}return function(V,H,ee){const Q=V.kind===void 0?d.ImageKind.GRAYSCALE_1BPP:V.kind;return X(V,Q,H,ee)}}();class b{constructor(){this.fontSizeScale=1,this.fontWeight=h.fontWeight,this.fontSize=0,this.textMatrix=d.IDENTITY_MATRIX,this.fontMatrix=d.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=d.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=h.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(w,C){this.x=w,this.y=C}}function T(P){let w=[];const C=[];for(const k of P){if(k.fn==="save"){w.push({fnId:92,fn:"group",items:[]}),C.push(w),w=w.at(-1).items;continue}k.fn==="restore"?w=C.pop():w.push(k)}return w}function A(P){if(Number.isInteger(P))return P.toString();const w=P.toFixed(10);let C=w.length-1;if(w[C]!=="0")return w;do C--;while(w[C]==="0");return w.substring(0,w[C]==="."?C:C+1)}function v(P){if(P[4]===0&&P[5]===0){if(P[1]===0&&P[2]===0)return P[0]===1&&P[3]===1?"":`scale(${A(P[0])} ${A(P[3])})`;if(P[0]===P[3]&&P[1]===-P[2]){const w=Math.acos(P[0])*180/Math.PI;return`rotate(${A(w)})`}}else if(P[0]===1&&P[1]===0&&P[2]===0&&P[3]===1)return`translate(${A(P[4])} ${A(P[5])})`;return`matrix(${A(P[0])} ${A(P[1])} ${A(P[2])} ${A(P[3])} ${A(P[4])} ${A(P[5])})`}let S=0,O=0,I=0;class x{constructor(w,C,k=!1){(0,u.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new u.DOMSVGFactory,this.current=new b,this.transformMatrix=d.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=w,this.objs=C,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!k,this._operatorIdMapping=[];for(const R in d.OPS)this._operatorIdMapping[d.OPS[R]]=R}getObject(w,C=null){return typeof w=="string"?w.startsWith("g_")?this.commonObjs.get(w):this.objs.get(w):C}save(){this.transformStack.push(this.transformMatrix);const w=this.current;this.extraStack.push(w),this.current=w.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(w){this.save(),this.executeOpTree(w),this.restore()}loadDependencies(w){const C=w.fnArray,k=w.argsArray;for(let R=0,N=C.length;R<N;R++)if(C[R]===d.OPS.dependency)for(const F of k[R]){const L=F.startsWith("g_")?this.commonObjs:this.objs,X=new Promise(V=>{L.get(F,V)});this.current.dependencies.push(X)}return Promise.all(this.current.dependencies)}transform(w,C,k,R,N,F){const L=[w,C,k,R,N,F];this.transformMatrix=d.Util.transform(this.transformMatrix,L),this.tgrp=null}getSVG(w,C){this.viewport=C;const k=this._initialize(C);return this.loadDependencies(w).then(()=>(this.transformMatrix=d.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(w)),k))}convertOpList(w){const C=this._operatorIdMapping,k=w.argsArray,R=w.fnArray,N=[];for(let F=0,L=R.length;F<L;F++){const X=R[F];N.push({fnId:X,fn:C[X],args:k[F]})}return T(N)}executeOpTree(w){for(const C of w){const k=C.fn,R=C.fnId,N=C.args;switch(R|0){case d.OPS.beginText:this.beginText();break;case d.OPS.dependency:break;case d.OPS.setLeading:this.setLeading(N);break;case d.OPS.setLeadingMoveText:this.setLeadingMoveText(N[0],N[1]);break;case d.OPS.setFont:this.setFont(N);break;case d.OPS.showText:this.showText(N[0]);break;case d.OPS.showSpacedText:this.showText(N[0]);break;case d.OPS.endText:this.endText();break;case d.OPS.moveText:this.moveText(N[0],N[1]);break;case d.OPS.setCharSpacing:this.setCharSpacing(N[0]);break;case d.OPS.setWordSpacing:this.setWordSpacing(N[0]);break;case d.OPS.setHScale:this.setHScale(N[0]);break;case d.OPS.setTextMatrix:this.setTextMatrix(N[0],N[1],N[2],N[3],N[4],N[5]);break;case d.OPS.setTextRise:this.setTextRise(N[0]);break;case d.OPS.setTextRenderingMode:this.setTextRenderingMode(N[0]);break;case d.OPS.setLineWidth:this.setLineWidth(N[0]);break;case d.OPS.setLineJoin:this.setLineJoin(N[0]);break;case d.OPS.setLineCap:this.setLineCap(N[0]);break;case d.OPS.setMiterLimit:this.setMiterLimit(N[0]);break;case d.OPS.setFillRGBColor:this.setFillRGBColor(N[0],N[1],N[2]);break;case d.OPS.setStrokeRGBColor:this.setStrokeRGBColor(N[0],N[1],N[2]);break;case d.OPS.setStrokeColorN:this.setStrokeColorN(N);break;case d.OPS.setFillColorN:this.setFillColorN(N);break;case d.OPS.shadingFill:this.shadingFill(N[0]);break;case d.OPS.setDash:this.setDash(N[0],N[1]);break;case d.OPS.setRenderingIntent:this.setRenderingIntent(N[0]);break;case d.OPS.setFlatness:this.setFlatness(N[0]);break;case d.OPS.setGState:this.setGState(N[0]);break;case d.OPS.fill:this.fill();break;case d.OPS.eoFill:this.eoFill();break;case d.OPS.stroke:this.stroke();break;case d.OPS.fillStroke:this.fillStroke();break;case d.OPS.eoFillStroke:this.eoFillStroke();break;case d.OPS.clip:this.clip("nonzero");break;case d.OPS.eoClip:this.clip("evenodd");break;case d.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case d.OPS.paintImageXObject:this.paintImageXObject(N[0]);break;case d.OPS.paintInlineImageXObject:this.paintInlineImageXObject(N[0]);break;case d.OPS.paintImageMaskXObject:this.paintImageMaskXObject(N[0]);break;case d.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(N[0],N[1]);break;case d.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case d.OPS.closePath:this.closePath();break;case d.OPS.closeStroke:this.closeStroke();break;case d.OPS.closeFillStroke:this.closeFillStroke();break;case d.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case d.OPS.nextLine:this.nextLine();break;case d.OPS.transform:this.transform(N[0],N[1],N[2],N[3],N[4],N[5]);break;case d.OPS.constructPath:this.constructPath(N[0],N[1]);break;case d.OPS.endPath:this.endPath();break;case 92:this.group(C.items);break;default:(0,d.warn)(`Unimplemented operator ${k}`);break}}}setWordSpacing(w){this.current.wordSpacing=w}setCharSpacing(w){this.current.charSpacing=w}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(w,C,k,R,N,F){const L=this.current;L.textMatrix=L.lineMatrix=[w,C,k,R,N,F],L.textMatrixScale=Math.hypot(w,C),L.x=L.lineX=0,L.y=L.lineY=0,L.xcoords=[],L.ycoords=[],L.tspan=this.svgFactory.createElement("svg:tspan"),L.tspan.setAttributeNS(null,"font-family",L.fontFamily),L.tspan.setAttributeNS(null,"font-size",`${A(L.fontSize)}px`),L.tspan.setAttributeNS(null,"y",A(-L.y)),L.txtElement=this.svgFactory.createElement("svg:text"),L.txtElement.append(L.tspan)}beginText(){const w=this.current;w.x=w.lineX=0,w.y=w.lineY=0,w.textMatrix=d.IDENTITY_MATRIX,w.lineMatrix=d.IDENTITY_MATRIX,w.textMatrixScale=1,w.tspan=this.svgFactory.createElement("svg:tspan"),w.txtElement=this.svgFactory.createElement("svg:text"),w.txtgrp=this.svgFactory.createElement("svg:g"),w.xcoords=[],w.ycoords=[]}moveText(w,C){const k=this.current;k.x=k.lineX+=w,k.y=k.lineY+=C,k.xcoords=[],k.ycoords=[],k.tspan=this.svgFactory.createElement("svg:tspan"),k.tspan.setAttributeNS(null,"font-family",k.fontFamily),k.tspan.setAttributeNS(null,"font-size",`${A(k.fontSize)}px`),k.tspan.setAttributeNS(null,"y",A(-k.y))}showText(w){const C=this.current,k=C.font,R=C.fontSize;if(R===0)return;const N=C.fontSizeScale,F=C.charSpacing,L=C.wordSpacing,X=C.fontDirection,V=C.textHScale*X,H=k.vertical,ee=H?1:-1,Q=k.defaultVMetrics,Z=R*C.fontMatrix[0];let K=0;for(const le of w){if(le===null){K+=X*L;continue}else if(typeof le=="number"){K+=ee*le*R/1e3;continue}const he=(le.isSpace?L:0)+F,Y=le.fontChar;let D,G,B=le.width;if(H){let W;const q=le.vmetric||Q;W=le.vmetric?q[1]:B*.5,W=-W*Z;const J=q[2]*Z;B=q?-q[0]:B,D=W/N,G=(K+J)/N}else D=K/N,G=0;(le.isInFont||k.missingFile)&&(C.xcoords.push(C.x+D),H&&C.ycoords.push(-C.y+G),C.tspan.textContent+=Y);const U=H?B*Z-he*X:B*Z+he*X;K+=U}C.tspan.setAttributeNS(null,"x",C.xcoords.map(A).join(" ")),H?C.tspan.setAttributeNS(null,"y",C.ycoords.map(A).join(" ")):C.tspan.setAttributeNS(null,"y",A(-C.y)),H?C.y-=K:C.x+=K*V,C.tspan.setAttributeNS(null,"font-family",C.fontFamily),C.tspan.setAttributeNS(null,"font-size",`${A(C.fontSize)}px`),C.fontStyle!==h.fontStyle&&C.tspan.setAttributeNS(null,"font-style",C.fontStyle),C.fontWeight!==h.fontWeight&&C.tspan.setAttributeNS(null,"font-weight",C.fontWeight);const se=C.textRenderingMode&d.TextRenderingMode.FILL_STROKE_MASK;if(se===d.TextRenderingMode.FILL||se===d.TextRenderingMode.FILL_STROKE?(C.fillColor!==h.fillColor&&C.tspan.setAttributeNS(null,"fill",C.fillColor),C.fillAlpha<1&&C.tspan.setAttributeNS(null,"fill-opacity",C.fillAlpha)):C.textRenderingMode===d.TextRenderingMode.ADD_TO_PATH?C.tspan.setAttributeNS(null,"fill","transparent"):C.tspan.setAttributeNS(null,"fill","none"),se===d.TextRenderingMode.STROKE||se===d.TextRenderingMode.FILL_STROKE){const le=1/(C.textMatrixScale||1);this._setStrokeAttributes(C.tspan,le)}let ne=C.textMatrix;C.textRise!==0&&(ne=ne.slice(),ne[5]+=C.textRise),C.txtElement.setAttributeNS(null,"transform",`${v(ne)} scale(${A(V)}, -1)`),C.txtElement.setAttributeNS(p,"xml:space","preserve"),C.txtElement.append(C.tspan),C.txtgrp.append(C.txtElement),this._ensureTransformGroup().append(C.txtElement)}setLeadingMoveText(w,C){this.setLeading(-C),this.moveText(w,C)}addFontStyle(w){if(!w.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const C=y(w.data,w.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${w.loadedName}"; src: url(${C}); }
`}setFont(w){const C=this.current,k=this.commonObjs.get(w[0]);let R=w[1];C.font=k,this.embedFonts&&!k.missingFile&&!this.embeddedFonts[k.loadedName]&&(this.addFontStyle(k),this.embeddedFonts[k.loadedName]=k),C.fontMatrix=k.fontMatrix||d.FONT_IDENTITY_MATRIX;let N="normal";k.black?N="900":k.bold&&(N="bold");const F=k.italic?"italic":"normal";R<0?(R=-R,C.fontDirection=-1):C.fontDirection=1,C.fontSize=R,C.fontFamily=k.loadedName,C.fontWeight=N,C.fontStyle=F,C.tspan=this.svgFactory.createElement("svg:tspan"),C.tspan.setAttributeNS(null,"y",A(-C.y)),C.xcoords=[],C.ycoords=[]}endText(){var C;const w=this.current;w.textRenderingMode&d.TextRenderingMode.ADD_TO_PATH_FLAG&&((C=w.txtElement)!=null&&C.hasChildNodes())&&(w.element=w.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(w){w>0&&(this.current.lineWidth=w)}setLineCap(w){this.current.lineCap=f[w]}setLineJoin(w){this.current.lineJoin=_[w]}setMiterLimit(w){this.current.miterLimit=w}setStrokeAlpha(w){this.current.strokeAlpha=w}setStrokeRGBColor(w,C,k){this.current.strokeColor=d.Util.makeHexColor(w,C,k)}setFillAlpha(w){this.current.fillAlpha=w}setFillRGBColor(w,C,k){this.current.fillColor=d.Util.makeHexColor(w,C,k),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(w){this.current.strokeColor=this._makeColorN_Pattern(w)}setFillColorN(w){this.current.fillColor=this._makeColorN_Pattern(w)}shadingFill(w){const{width:C,height:k}=this.viewport,R=d.Util.inverseTransform(this.transformMatrix),[N,F,L,X]=d.Util.getAxialAlignedBoundingBox([0,0,C,k],R),V=this.svgFactory.createElement("svg:rect");V.setAttributeNS(null,"x",N),V.setAttributeNS(null,"y",F),V.setAttributeNS(null,"width",L-N),V.setAttributeNS(null,"height",X-F),V.setAttributeNS(null,"fill",this._makeShadingPattern(w)),this.current.fillAlpha<1&&V.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(V)}_makeColorN_Pattern(w){return w[0]==="TilingPattern"?this._makeTilingPattern(w):this._makeShadingPattern(w)}_makeTilingPattern(w){const C=w[1],k=w[2],R=w[3]||d.IDENTITY_MATRIX,[N,F,L,X]=w[4],V=w[5],H=w[6],ee=w[7],Q=`shading${I++}`,[Z,K,se,ne]=d.Util.normalizeRect([...d.Util.applyTransform([N,F],R),...d.Util.applyTransform([L,X],R)]),[le,he]=d.Util.singularValueDecompose2dScale(R),Y=V*le,D=H*he,G=this.svgFactory.createElement("svg:pattern");G.setAttributeNS(null,"id",Q),G.setAttributeNS(null,"patternUnits","userSpaceOnUse"),G.setAttributeNS(null,"width",Y),G.setAttributeNS(null,"height",D),G.setAttributeNS(null,"x",`${Z}`),G.setAttributeNS(null,"y",`${K}`);const B=this.svg,U=this.transformMatrix,W=this.current.fillColor,q=this.current.strokeColor,J=this.svgFactory.create(se-Z,ne-K);if(this.svg=J,this.transformMatrix=R,ee===2){const ae=d.Util.makeHexColor(...C);this.current.fillColor=ae,this.current.strokeColor=ae}return this.executeOpTree(this.convertOpList(k)),this.svg=B,this.transformMatrix=U,this.current.fillColor=W,this.current.strokeColor=q,G.append(J.childNodes[0]),this.defs.append(G),`url(#${Q})`}_makeShadingPattern(w){switch(typeof w=="string"&&(w=this.objs.get(w)),w[0]){case"RadialAxial":const C=`shading${I++}`,k=w[3];let R;switch(w[1]){case"axial":const N=w[4],F=w[5];R=this.svgFactory.createElement("svg:linearGradient"),R.setAttributeNS(null,"id",C),R.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),R.setAttributeNS(null,"x1",N[0]),R.setAttributeNS(null,"y1",N[1]),R.setAttributeNS(null,"x2",F[0]),R.setAttributeNS(null,"y2",F[1]);break;case"radial":const L=w[4],X=w[5],V=w[6],H=w[7];R=this.svgFactory.createElement("svg:radialGradient"),R.setAttributeNS(null,"id",C),R.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),R.setAttributeNS(null,"cx",X[0]),R.setAttributeNS(null,"cy",X[1]),R.setAttributeNS(null,"r",H),R.setAttributeNS(null,"fx",L[0]),R.setAttributeNS(null,"fy",L[1]),R.setAttributeNS(null,"fr",V);break;default:throw new Error(`Unknown RadialAxial type: ${w[1]}`)}for(const N of k){const F=this.svgFactory.createElement("svg:stop");F.setAttributeNS(null,"offset",N[0]),F.setAttributeNS(null,"stop-color",N[1]),R.append(F)}return this.defs.append(R),`url(#${C})`;case"Mesh":return(0,d.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${w[0]}`)}}setDash(w,C){this.current.dashArray=w,this.current.dashPhase=C}constructPath(w,C){const k=this.current;let R=k.x,N=k.y,F=[],L=0;for(const X of w)switch(X|0){case d.OPS.rectangle:R=C[L++],N=C[L++];const V=C[L++],H=C[L++],ee=R+V,Q=N+H;F.push("M",A(R),A(N),"L",A(ee),A(N),"L",A(ee),A(Q),"L",A(R),A(Q),"Z");break;case d.OPS.moveTo:R=C[L++],N=C[L++],F.push("M",A(R),A(N));break;case d.OPS.lineTo:R=C[L++],N=C[L++],F.push("L",A(R),A(N));break;case d.OPS.curveTo:R=C[L+4],N=C[L+5],F.push("C",A(C[L]),A(C[L+1]),A(C[L+2]),A(C[L+3]),A(R),A(N)),L+=6;break;case d.OPS.curveTo2:F.push("C",A(R),A(N),A(C[L]),A(C[L+1]),A(C[L+2]),A(C[L+3])),R=C[L+2],N=C[L+3],L+=4;break;case d.OPS.curveTo3:R=C[L+2],N=C[L+3],F.push("C",A(C[L]),A(C[L+1]),A(R),A(N),A(R),A(N)),L+=4;break;case d.OPS.closePath:F.push("Z");break}F=F.join(" "),k.path&&w.length>0&&w[0]!==d.OPS.rectangle&&w[0]!==d.OPS.moveTo?F=k.path.getAttributeNS(null,"d")+F:(k.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(k.path)),k.path.setAttributeNS(null,"d",F),k.path.setAttributeNS(null,"fill","none"),k.element=k.path,k.setCurrentPoint(R,N)}endPath(){const w=this.current;if(w.path=null,!this.pendingClip)return;if(!w.element){this.pendingClip=null;return}const C=`clippath${S++}`,k=this.svgFactory.createElement("svg:clipPath");k.setAttributeNS(null,"id",C),k.setAttributeNS(null,"transform",v(this.transformMatrix));const R=w.element.cloneNode(!0);if(this.pendingClip==="evenodd"?R.setAttributeNS(null,"clip-rule","evenodd"):R.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,k.append(R),this.defs.append(k),w.activeClipUrl){w.clipGroup=null;for(const N of this.extraStack)N.clipGroup=null;k.setAttributeNS(null,"clip-path",w.activeClipUrl)}w.activeClipUrl=`url(#${C})`,this.tgrp=null}clip(w){this.pendingClip=w}closePath(){const w=this.current;if(w.path){const C=`${w.path.getAttributeNS(null,"d")}Z`;w.path.setAttributeNS(null,"d",C)}}setLeading(w){this.current.leading=-w}setTextRise(w){this.current.textRise=w}setTextRenderingMode(w){this.current.textRenderingMode=w}setHScale(w){this.current.textHScale=w/100}setRenderingIntent(w){}setFlatness(w){}setGState(w){for(const[C,k]of w)switch(C){case"LW":this.setLineWidth(k);break;case"LC":this.setLineCap(k);break;case"LJ":this.setLineJoin(k);break;case"ML":this.setMiterLimit(k);break;case"D":this.setDash(k[0],k[1]);break;case"RI":this.setRenderingIntent(k);break;case"FL":this.setFlatness(k);break;case"Font":this.setFont(k);break;case"CA":this.setStrokeAlpha(k);break;case"ca":this.setFillAlpha(k);break;default:(0,d.warn)(`Unimplemented graphic state operator ${C}`);break}}fill(){const w=this.current;w.element&&(w.element.setAttributeNS(null,"fill",w.fillColor),w.element.setAttributeNS(null,"fill-opacity",w.fillAlpha),this.endPath())}stroke(){const w=this.current;w.element&&(this._setStrokeAttributes(w.element),w.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(w,C=1){const k=this.current;let R=k.dashArray;C!==1&&R.length>0&&(R=R.map(function(N){return C*N})),w.setAttributeNS(null,"stroke",k.strokeColor),w.setAttributeNS(null,"stroke-opacity",k.strokeAlpha),w.setAttributeNS(null,"stroke-miterlimit",A(k.miterLimit)),w.setAttributeNS(null,"stroke-linecap",k.lineCap),w.setAttributeNS(null,"stroke-linejoin",k.lineJoin),w.setAttributeNS(null,"stroke-width",A(C*k.lineWidth)+"px"),w.setAttributeNS(null,"stroke-dasharray",R.map(A).join(" ")),w.setAttributeNS(null,"stroke-dashoffset",A(C*k.dashPhase)+"px")}eoFill(){var w;(w=this.current.element)==null||w.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var w;(w=this.current.element)==null||w.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const w=this.svgFactory.createElement("svg:rect");w.setAttributeNS(null,"x","0"),w.setAttributeNS(null,"y","0"),w.setAttributeNS(null,"width","1px"),w.setAttributeNS(null,"height","1px"),w.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(w)}paintImageXObject(w){const C=this.getObject(w);if(!C){(0,d.warn)(`Dependent image with object ID ${w} is not ready yet`);return}this.paintInlineImageXObject(C)}paintInlineImageXObject(w,C){const k=w.width,R=w.height,N=E(w,this.forceDataSchema,!!C),F=this.svgFactory.createElement("svg:rect");F.setAttributeNS(null,"x","0"),F.setAttributeNS(null,"y","0"),F.setAttributeNS(null,"width",A(k)),F.setAttributeNS(null,"height",A(R)),this.current.element=F,this.clip("nonzero");const L=this.svgFactory.createElement("svg:image");L.setAttributeNS(m,"xlink:href",N),L.setAttributeNS(null,"x","0"),L.setAttributeNS(null,"y",A(-R)),L.setAttributeNS(null,"width",A(k)+"px"),L.setAttributeNS(null,"height",A(R)+"px"),L.setAttributeNS(null,"transform",`scale(${A(1/k)} ${A(-1/R)})`),C?C.append(L):this._ensureTransformGroup().append(L)}paintImageMaskXObject(w){const C=this.getObject(w.data,w);if(C.bitmap){(0,d.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const k=this.current,R=C.width,N=C.height,F=k.fillColor;k.maskId=`mask${O++}`;const L=this.svgFactory.createElement("svg:mask");L.setAttributeNS(null,"id",k.maskId);const X=this.svgFactory.createElement("svg:rect");X.setAttributeNS(null,"x","0"),X.setAttributeNS(null,"y","0"),X.setAttributeNS(null,"width",A(R)),X.setAttributeNS(null,"height",A(N)),X.setAttributeNS(null,"fill",F),X.setAttributeNS(null,"mask",`url(#${k.maskId})`),this.defs.append(L),this._ensureTransformGroup().append(X),this.paintInlineImageXObject(C,L)}paintFormXObjectBegin(w,C){if(Array.isArray(w)&&w.length===6&&this.transform(w[0],w[1],w[2],w[3],w[4],w[5]),C){const k=C[2]-C[0],R=C[3]-C[1],N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x",C[0]),N.setAttributeNS(null,"y",C[1]),N.setAttributeNS(null,"width",A(k)),N.setAttributeNS(null,"height",A(R)),this.current.element=N,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(w){const C=this.svgFactory.create(w.width,w.height),k=this.svgFactory.createElement("svg:defs");C.append(k),this.defs=k;const R=this.svgFactory.createElement("svg:g");return R.setAttributeNS(null,"transform",v(w.transform)),C.append(R),this.svg=R,C}_ensureClipGroup(){if(!this.current.clipGroup){const w=this.svgFactory.createElement("svg:g");w.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(w),this.current.clipGroup=w}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",v(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}s.SVGGraphics=x},(a,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaText=void 0;class c{static textContent(d){const h=[],p={items:h,styles:Object.create(null)};function m(f){var E;if(!f)return;let _=null;const y=f.name;if(y==="#text")_=f.value;else if(c.shouldBuildText(y))(E=f==null?void 0:f.attributes)!=null&&E.textContent?_=f.attributes.textContent:f.value&&(_=f.value);else return;if(_!==null&&h.push({str:_}),!!f.children)for(const b of f.children)m(b)}return m(d),p}static shouldBuildText(d){return!(d==="textarea"||d==="input"||d==="option"||d==="select")}}s.XfaText=c},(a,s,c)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextLayerRenderTask=void 0,s.renderTextLayer=v,s.updateTextLayer=S;var u=c(1),d=c(6);const h=1e5,p=30,m=.8,f=new Map;function _(O,I){let x;if(I&&u.FeatureTest.isOffscreenCanvasSupported)x=new OffscreenCanvas(O,O).getContext("2d",{alpha:!1});else{const P=document.createElement("canvas");P.width=P.height=O,x=P.getContext("2d",{alpha:!1})}return x}function y(O,I){const x=f.get(O);if(x)return x;const P=_(p,I);P.font=`${p}px ${O}`;const w=P.measureText("");let C=w.fontBoundingBoxAscent,k=Math.abs(w.fontBoundingBoxDescent);if(C){const N=C/(C+k);return f.set(O,N),P.canvas.width=P.canvas.height=0,N}P.strokeStyle="red",P.clearRect(0,0,p,p),P.strokeText("g",0,0);let R=P.getImageData(0,0,p,p).data;k=0;for(let N=R.length-1-3;N>=0;N-=4)if(R[N]>0){k=Math.ceil(N/4/p);break}P.clearRect(0,0,p,p),P.strokeText("A",0,p),R=P.getImageData(0,0,p,p).data,C=0;for(let N=0,F=R.length;N<F;N+=4)if(R[N]>0){C=p-Math.floor(N/4/p);break}if(P.canvas.width=P.canvas.height=0,C){const N=C/(C+k);return f.set(O,N),N}return f.set(O,m),m}function E(O,I,x){const P=document.createElement("span"),w={angle:0,canvasWidth:0,hasText:I.str!=="",hasEOL:I.hasEOL,fontSize:0};O._textDivs.push(P);const C=u.Util.transform(O._transform,I.transform);let k=Math.atan2(C[1],C[0]);const R=x[I.fontName];R.vertical&&(k+=Math.PI/2);const N=Math.hypot(C[2],C[3]),F=N*y(R.fontFamily,O._isOffscreenCanvasSupported);let L,X;k===0?(L=C[4],X=C[5]-F):(L=C[4]+F*Math.sin(k),X=C[5]-F*Math.cos(k));const V="calc(var(--scale-factor)*",H=P.style;O._container===O._rootContainer?(H.left=`${(100*L/O._pageWidth).toFixed(2)}%`,H.top=`${(100*X/O._pageHeight).toFixed(2)}%`):(H.left=`${V}${L.toFixed(2)}px)`,H.top=`${V}${X.toFixed(2)}px)`),H.fontSize=`${V}${N.toFixed(2)}px)`,H.fontFamily=R.fontFamily,w.fontSize=N,P.setAttribute("role","presentation"),P.textContent=I.str,P.dir=I.dir,O._fontInspectorEnabled&&(P.dataset.fontName=I.fontName),k!==0&&(w.angle=k*(180/Math.PI));let ee=!1;if(I.str.length>1)ee=!0;else if(I.str!==" "&&I.transform[0]!==I.transform[3]){const Q=Math.abs(I.transform[0]),Z=Math.abs(I.transform[3]);Q!==Z&&Math.max(Q,Z)/Math.min(Q,Z)>1.5&&(ee=!0)}ee&&(w.canvasWidth=R.vertical?I.height:I.width),O._textDivProperties.set(P,w),O._isReadableStream&&O._layoutText(P)}function b(O){const{div:I,scale:x,properties:P,ctx:w,prevFontSize:C,prevFontFamily:k}=O,{style:R}=I;let N="";if(P.canvasWidth!==0&&P.hasText){const{fontFamily:F}=R,{canvasWidth:L,fontSize:X}=P;(C!==X||k!==F)&&(w.font=`${X*x}px ${F}`,O.prevFontSize=X,O.prevFontFamily=F);const{width:V}=w.measureText(I.textContent);V>0&&(N=`scaleX(${L*x/V})`)}P.angle!==0&&(N=`rotate(${P.angle}deg) ${N}`),N.length>0&&(R.transform=N)}function T(O){if(O._canceled)return;const I=O._textDivs,x=O._capability;if(I.length>h){x.resolve();return}if(!O._isReadableStream)for(const P of I)O._layoutText(P);x.resolve()}class A{constructor({textContentSource:I,container:x,viewport:P,textDivs:w,textDivProperties:C,textContentItemsStr:k,isOffscreenCanvasSupported:R}){var V;this._textContentSource=I,this._isReadableStream=I instanceof ReadableStream,this._container=this._rootContainer=x,this._textDivs=w||[],this._textContentItemsStr=k||[],this._isOffscreenCanvasSupported=R,this._fontInspectorEnabled=!!((V=globalThis.FontInspector)!=null&&V.enabled),this._reader=null,this._textDivProperties=C||new WeakMap,this._canceled=!1,this._capability=new u.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:P.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:_(0,R)};const{pageWidth:N,pageHeight:F,pageX:L,pageY:X}=P.rawDims;this._transform=[1,0,0,-1,-L,X+F],this._pageWidth=N,this._pageHeight=F,(0,d.setLayerDimensions)(x,P),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new u.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new u.AbortException("TextLayer task cancelled."))}_processItems(I,x){for(const P of I){if(P.str===void 0){if(P.type==="beginMarkedContentProps"||P.type==="beginMarkedContent"){const w=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),P.id!==null&&this._container.setAttribute("id",`${P.id}`),w.append(this._container)}else P.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(P.str),E(this,P,x)}}_layoutText(I){const x=this._layoutTextParams.properties=this._textDivProperties.get(I);if(this._layoutTextParams.div=I,b(this._layoutTextParams),x.hasText&&this._container.append(I),x.hasEOL){const P=document.createElement("br");P.setAttribute("role","presentation"),this._container.append(P)}}_render(){const I=new u.PromiseCapability;let x=Object.create(null);if(this._isReadableStream){const P=()=>{this._reader.read().then(({value:w,done:C})=>{if(C){I.resolve();return}Object.assign(x,w.styles),this._processItems(w.items,x),P()},I.reject)};this._reader=this._textContentSource.getReader(),P()}else if(this._textContentSource){const{items:P,styles:w}=this._textContentSource;this._processItems(P,w),I.resolve()}else throw new Error('No "textContentSource" parameter specified.');I.promise.then(()=>{x=null,T(this)},this._capability.reject)}}s.TextLayerRenderTask=A;function v(O){!O.textContentSource&&(O.textContent||O.textContentStream)&&((0,d.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),O.textContentSource=O.textContent||O.textContentStream);const{container:I,viewport:x}=O,P=getComputedStyle(I),w=P.getPropertyValue("visibility"),C=parseFloat(P.getPropertyValue("--scale-factor"));w==="visible"&&(!C||Math.abs(C-x.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const k=new A(O);return k._render(),k}function S({container:O,viewport:I,textDivs:x,textDivProperties:P,isOffscreenCanvasSupported:w,mustRotate:C=!0,mustRescale:k=!0}){if(C&&(0,d.setLayerDimensions)(O,{rotation:I.rotation}),k){const R=_(0,w),N={prevFontSize:null,prevFontFamily:null,div:null,scale:I.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:R};for(const F of x)N.properties=P.get(F),N.div=F,b(N)}}},(a,s,c)=>{var y,E,b,T,A,v,S,O,I,x,P,pr,C,Nn,R,mr,F,fr;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditorLayer=void 0;var u=c(1),d=c(4),h=c(28),p=c(33),m=c(6),f=c(34);const X=class X{constructor({uiManager:H,pageIndex:ee,div:Q,accessibilityManager:Z,annotationLayer:K,viewport:se,l10n:ne}){de(this,P);de(this,C);de(this,R);de(this,F);de(this,y,void 0);de(this,E,!1);de(this,b,null);de(this,T,this.pointerup.bind(this));de(this,A,this.pointerdown.bind(this));de(this,v,new Map);de(this,S,!1);de(this,O,!1);de(this,I,!1);de(this,x,void 0);const le=[h.FreeTextEditor,p.InkEditor,f.StampEditor];if(!X._initialized){X._initialized=!0;for(const he of le)he.initialize(ne)}H.registerEditorTypes(le),Ie(this,x,H),this.pageIndex=ee,this.div=Q,Ie(this,y,Z),Ie(this,b,K),this.viewport=se,M(this,x).addLayer(this)}get isEmpty(){return M(this,v).size===0}updateToolbar(H){M(this,x).updateToolbar(H)}updateMode(H=M(this,x).getMode()){Te(this,F,fr).call(this),H===u.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),H!==u.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",H===u.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",H===u.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",H===u.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(H){if(!(!H&&M(this,x).getMode()!==u.AnnotationEditorType.INK)){if(!H){for(const ee of M(this,v).values())if(ee.isEmpty()){ee.setInBackground();return}}Te(this,C,Nn).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(H){M(this,x).setEditingState(H)}addCommands(H){M(this,x).addCommands(H)}enable(){this.div.style.pointerEvents="auto";const H=new Set;for(const Q of M(this,v).values())Q.enableEditing(),Q.annotationElementId&&H.add(Q.annotationElementId);if(!M(this,b))return;const ee=M(this,b).getEditableAnnotations();for(const Q of ee){if(Q.hide(),M(this,x).isDeletedAnnotationElement(Q.data.id)||H.has(Q.data.id))continue;const Z=this.deserialize(Q);Z&&(this.addOrRebuild(Z),Z.enableEditing())}}disable(){var ee;Ie(this,I,!0),this.div.style.pointerEvents="none";const H=new Set;for(const Q of M(this,v).values()){if(Q.disableEditing(),!Q.annotationElementId||Q.serialize()!==null){H.add(Q.annotationElementId);continue}(ee=this.getEditableAnnotation(Q.annotationElementId))==null||ee.show(),Q.remove()}if(M(this,b)){const Q=M(this,b).getEditableAnnotations();for(const Z of Q){const{id:K}=Z.data;H.has(K)||M(this,x).isDeletedAnnotationElement(K)||Z.show()}}Te(this,F,fr).call(this),this.isEmpty&&(this.div.hidden=!0),Ie(this,I,!1)}getEditableAnnotation(H){var ee;return((ee=M(this,b))==null?void 0:ee.getEditableAnnotation(H))||null}setActiveEditor(H){M(this,x).getActive()!==H&&M(this,x).setActiveEditor(H)}enableClick(){this.div.addEventListener("pointerdown",M(this,A)),this.div.addEventListener("pointerup",M(this,T))}disableClick(){this.div.removeEventListener("pointerdown",M(this,A)),this.div.removeEventListener("pointerup",M(this,T))}attach(H){M(this,v).set(H.id,H);const{annotationElementId:ee}=H;ee&&M(this,x).isDeletedAnnotationElement(ee)&&M(this,x).removeDeletedAnnotationElement(H)}detach(H){var ee;M(this,v).delete(H.id),(ee=M(this,y))==null||ee.removePointerInTextLayer(H.contentDiv),!M(this,I)&&H.annotationElementId&&M(this,x).addDeletedAnnotationElement(H)}remove(H){this.detach(H),M(this,x).removeEditor(H),H.div.contains(document.activeElement)&&setTimeout(()=>{M(this,x).focusMainContainer()},0),H.div.remove(),H.isAttachedToDOM=!1,M(this,O)||this.addInkEditorIfNeeded(!1)}changeParent(H){var ee;H.parent!==this&&(H.annotationElementId&&(M(this,x).addDeletedAnnotationElement(H.annotationElementId),d.AnnotationEditor.deleteAnnotationElement(H),H.annotationElementId=null),this.attach(H),(ee=H.parent)==null||ee.detach(H),H.setParent(this),H.div&&H.isAttachedToDOM&&(H.div.remove(),this.div.append(H.div)))}add(H){if(this.changeParent(H),M(this,x).addEditor(H),this.attach(H),!H.isAttachedToDOM){const ee=H.render();this.div.append(ee),H.isAttachedToDOM=!0}H.fixAndSetPosition(),H.onceAdded(),M(this,x).addToAnnotationStorage(H)}moveEditorInDOM(H){var Q;if(!H.isAttachedToDOM)return;const{activeElement:ee}=document;H.div.contains(ee)&&(H._focusEventsAllowed=!1,setTimeout(()=>{H.div.contains(document.activeElement)?H._focusEventsAllowed=!0:(H.div.addEventListener("focusin",()=>{H._focusEventsAllowed=!0},{once:!0}),ee.focus())},0)),H._structTreeParentId=(Q=M(this,y))==null?void 0:Q.moveElementInDOM(this.div,H.div,H.contentDiv,!0)}addOrRebuild(H){H.needsToBeRebuilt()?H.rebuild():this.add(H)}addUndoableEditor(H){const ee=()=>H._uiManager.rebuild(H),Q=()=>{H.remove()};this.addCommands({cmd:ee,undo:Q,mustExec:!1})}getNextId(){return M(this,x).getId()}pasteEditor(H,ee){M(this,x).updateToolbar(H),M(this,x).updateMode(H);const{offsetX:Q,offsetY:Z}=Te(this,R,mr).call(this),K=this.getNextId(),se=Te(this,P,pr).call(this,{parent:this,id:K,x:Q,y:Z,uiManager:M(this,x),isCentered:!0,...ee});se&&this.add(se)}deserialize(H){switch(H.annotationType??H.annotationEditorType){case u.AnnotationEditorType.FREETEXT:return h.FreeTextEditor.deserialize(H,this,M(this,x));case u.AnnotationEditorType.INK:return p.InkEditor.deserialize(H,this,M(this,x));case u.AnnotationEditorType.STAMP:return f.StampEditor.deserialize(H,this,M(this,x))}return null}addNewEditor(){Te(this,C,Nn).call(this,Te(this,R,mr).call(this),!0)}setSelected(H){M(this,x).setSelected(H)}toggleSelected(H){M(this,x).toggleSelected(H)}isSelected(H){return M(this,x).isSelected(H)}unselect(H){M(this,x).unselect(H)}pointerup(H){const{isMac:ee}=u.FeatureTest.platform;if(!(H.button!==0||H.ctrlKey&&ee)&&H.target===this.div&&M(this,S)){if(Ie(this,S,!1),!M(this,E)){Ie(this,E,!0);return}if(M(this,x).getMode()===u.AnnotationEditorType.STAMP){M(this,x).unselectAll();return}Te(this,C,Nn).call(this,H,!1)}}pointerdown(H){if(M(this,S)){Ie(this,S,!1);return}const{isMac:ee}=u.FeatureTest.platform;if(H.button!==0||H.ctrlKey&&ee||H.target!==this.div)return;Ie(this,S,!0);const Q=M(this,x).getActive();Ie(this,E,!Q||Q.isEmpty())}findNewParent(H,ee,Q){const Z=M(this,x).findParent(ee,Q);return Z===null||Z===this?!1:(Z.changeParent(H),!0)}destroy(){var H,ee;((H=M(this,x).getActive())==null?void 0:H.parent)===this&&(M(this,x).commitOrRemove(),M(this,x).setActiveEditor(null));for(const Q of M(this,v).values())(ee=M(this,y))==null||ee.removePointerInTextLayer(Q.contentDiv),Q.setParent(null),Q.isAttachedToDOM=!1,Q.div.remove();this.div=null,M(this,v).clear(),M(this,x).removeLayer(this)}render({viewport:H}){this.viewport=H,(0,m.setLayerDimensions)(this.div,H);for(const ee of M(this,x).getEditors(this.pageIndex))this.add(ee);this.updateMode()}update({viewport:H}){M(this,x).commitOrRemove(),this.viewport=H,(0,m.setLayerDimensions)(this.div,{rotation:H.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:H,pageHeight:ee}=this.viewport.rawDims;return[H,ee]}};y=new WeakMap,E=new WeakMap,b=new WeakMap,T=new WeakMap,A=new WeakMap,v=new WeakMap,S=new WeakMap,O=new WeakMap,I=new WeakMap,x=new WeakMap,P=new WeakSet,pr=function(H){switch(M(this,x).getMode()){case u.AnnotationEditorType.FREETEXT:return new h.FreeTextEditor(H);case u.AnnotationEditorType.INK:return new p.InkEditor(H);case u.AnnotationEditorType.STAMP:return new f.StampEditor(H)}return null},C=new WeakSet,Nn=function(H,ee){const Q=this.getNextId(),Z=Te(this,P,pr).call(this,{parent:this,id:Q,x:H.offsetX,y:H.offsetY,uiManager:M(this,x),isCentered:ee});return Z&&this.add(Z),Z},R=new WeakSet,mr=function(){const{x:H,y:ee,width:Q,height:Z}=this.div.getBoundingClientRect(),K=Math.max(0,H),se=Math.max(0,ee),ne=Math.min(window.innerWidth,H+Q),le=Math.min(window.innerHeight,ee+Z),he=(K+ne)/2-H,Y=(se+le)/2-ee,[D,G]=this.viewport.rotation%180===0?[he,Y]:[Y,he];return{offsetX:D,offsetY:G}},F=new WeakSet,fr=function(){Ie(this,O,!0);for(const H of M(this,v).values())H.isEmpty()&&H.remove();Ie(this,O,!1)},Re(X,"_initialized",!1);let _=X;s.AnnotationEditorLayer=_},(a,s,c)=>{var f,_,y,E,b,T,A,v,S,O,Wr,x,Vr,w,qr,k,fn,N,gr,L,Kr,V,_r;Object.defineProperty(s,"__esModule",{value:!0}),s.FreeTextEditor=void 0;var u=c(1),d=c(5),h=c(4),p=c(29);const ee=class ee extends h.AnnotationEditor{constructor(K){super({...K,name:"freeTextEditor"});de(this,O);de(this,x);de(this,w);de(this,k);de(this,N);de(this,L);de(this,V);de(this,f,this.editorDivBlur.bind(this));de(this,_,this.editorDivFocus.bind(this));de(this,y,this.editorDivInput.bind(this));de(this,E,this.editorDivKeydown.bind(this));de(this,b,void 0);de(this,T,"");de(this,A,`${this.id}-editor`);de(this,v,void 0);de(this,S,null);Ie(this,b,K.color||ee._defaultColor||h.AnnotationEditor._defaultLineColor),Ie(this,v,K.fontSize||ee._defaultFontSize)}static get _keyboardManager(){const K=ee.prototype,se=he=>he.isEmpty(),ne=d.AnnotationEditorUIManager.TRANSLATE_SMALL,le=d.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,u.shadow)(this,"_keyboardManager",new d.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],K.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],K.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],K._translateEmpty,{args:[-ne,0],checker:se}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],K._translateEmpty,{args:[-le,0],checker:se}],[["ArrowRight","mac+ArrowRight"],K._translateEmpty,{args:[ne,0],checker:se}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],K._translateEmpty,{args:[le,0],checker:se}],[["ArrowUp","mac+ArrowUp"],K._translateEmpty,{args:[0,-ne],checker:se}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],K._translateEmpty,{args:[0,-le],checker:se}],[["ArrowDown","mac+ArrowDown"],K._translateEmpty,{args:[0,ne],checker:se}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],K._translateEmpty,{args:[0,le],checker:se}]]))}static initialize(K){h.AnnotationEditor.initialize(K,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const se=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(se.getPropertyValue("--freetext-padding"))}static updateDefaultParams(K,se){switch(K){case u.AnnotationEditorParamsType.FREETEXT_SIZE:ee._defaultFontSize=se;break;case u.AnnotationEditorParamsType.FREETEXT_COLOR:ee._defaultColor=se;break}}updateParams(K,se){switch(K){case u.AnnotationEditorParamsType.FREETEXT_SIZE:Te(this,O,Wr).call(this,se);break;case u.AnnotationEditorParamsType.FREETEXT_COLOR:Te(this,x,Vr).call(this,se);break}}static get defaultPropertiesToUpdate(){return[[u.AnnotationEditorParamsType.FREETEXT_SIZE,ee._defaultFontSize],[u.AnnotationEditorParamsType.FREETEXT_COLOR,ee._defaultColor||h.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[u.AnnotationEditorParamsType.FREETEXT_SIZE,M(this,v)],[u.AnnotationEditorParamsType.FREETEXT_COLOR,M(this,b)]]}_translateEmpty(K,se){this._uiManager.translateSelectedEditors(K,se,!0)}getInitialTranslation(){const K=this.parentScale;return[-ee._internalPadding*K,-(ee._internalPadding+M(this,v))*K]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(u.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",M(this,E)),this.editorDiv.addEventListener("focus",M(this,_)),this.editorDiv.addEventListener("blur",M(this,f)),this.editorDiv.addEventListener("input",M(this,y)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",M(this,A)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",M(this,E)),this.editorDiv.removeEventListener("focus",M(this,_)),this.editorDiv.removeEventListener("blur",M(this,f)),this.editorDiv.removeEventListener("input",M(this,y)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(K){this._focusEventsAllowed&&(super.focusin(K),K.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var K;if(this.width){Te(this,V,_r).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(K=this._initialOptions)!=null&&K.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const K=M(this,T),se=Ie(this,T,Te(this,w,qr).call(this).trimEnd());if(K===se)return;const ne=le=>{if(Ie(this,T,le),!le){this.remove();return}Te(this,N,gr).call(this),this._uiManager.rebuild(this),Te(this,k,fn).call(this)};this.addCommands({cmd:()=>{ne(se)},undo:()=>{ne(K)},mustExec:!1}),Te(this,k,fn).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(K){this.enterInEditMode()}keydown(K){K.target===this.div&&K.key==="Enter"&&(this.enterInEditMode(),K.preventDefault())}editorDivKeydown(K){ee._keyboardManager.exec(this,K)}editorDivFocus(K){this.isEditing=!0}editorDivBlur(K){this.isEditing=!1}editorDivInput(K){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let K,se;this.width&&(K=this.x,se=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",M(this,A)),this.enableEditing(),h.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(le=>{var he;return(he=this.editorDiv)==null?void 0:he.setAttribute("aria-label",le)}),h.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(le=>{var he;return(he=this.editorDiv)==null?void 0:he.setAttribute("default-content",le)}),this.editorDiv.contentEditable=!0;const{style:ne}=this.editorDiv;if(ne.fontSize=`calc(${M(this,v)}px * var(--scale-factor))`,ne.color=M(this,b),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,d.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[le,he]=this.parentDimensions;if(this.annotationElementId){const{position:Y}=M(this,S);let[D,G]=this.getInitialTranslation();[D,G]=this.pageTranslationToScreen(D,G);const[B,U]=this.pageDimensions,[W,q]=this.pageTranslation;let J,ae;switch(this.rotation){case 0:J=K+(Y[0]-W)/B,ae=se+this.height-(Y[1]-q)/U;break;case 90:J=K+(Y[0]-W)/B,ae=se-(Y[1]-q)/U,[D,G]=[G,-D];break;case 180:J=K-this.width+(Y[0]-W)/B,ae=se-(Y[1]-q)/U,[D,G]=[-D,-G];break;case 270:J=K+(Y[0]-W-this.height*U)/B,ae=se+(Y[1]-q-this.width*B)/U,[D,G]=[-G,D];break}this.setAt(J*le,ae*he,D,G)}else this.setAt(K*le,se*he,this.width*le,this.height*he);Te(this,N,gr).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(K,se,ne){let le=null;if(K instanceof p.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:Y,fontColor:D},rect:G,rotation:B,id:U},textContent:W,textPosition:q,parent:{page:{pageNumber:J}}}=K;if(!W||W.length===0)return null;le=K={annotationType:u.AnnotationEditorType.FREETEXT,color:Array.from(D),fontSize:Y,value:W.join(`
`),position:q,pageIndex:J-1,rect:G,rotation:B,id:U,deleted:!1}}const he=super.deserialize(K,se,ne);return Ie(he,v,K.fontSize),Ie(he,b,u.Util.makeHexColor(...K.color)),Ie(he,T,K.value),he.annotationElementId=K.id||null,Ie(he,S,le),he}serialize(K=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const se=ee._internalPadding*this.parentScale,ne=this.getRect(se,se),le=h.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:M(this,b)),he={annotationType:u.AnnotationEditorType.FREETEXT,color:le,fontSize:M(this,v),value:M(this,T),pageIndex:this.pageIndex,rect:ne,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return K?he:this.annotationElementId&&!Te(this,L,Kr).call(this,he)?null:(he.id=this.annotationElementId,he)}};f=new WeakMap,_=new WeakMap,y=new WeakMap,E=new WeakMap,b=new WeakMap,T=new WeakMap,A=new WeakMap,v=new WeakMap,S=new WeakMap,O=new WeakSet,Wr=function(K){const se=le=>{this.editorDiv.style.fontSize=`calc(${le}px * var(--scale-factor))`,this.translate(0,-(le-M(this,v))*this.parentScale),Ie(this,v,le),Te(this,k,fn).call(this)},ne=M(this,v);this.addCommands({cmd:()=>{se(K)},undo:()=>{se(ne)},mustExec:!0,type:u.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},x=new WeakSet,Vr=function(K){const se=M(this,b);this.addCommands({cmd:()=>{Ie(this,b,this.editorDiv.style.color=K)},undo:()=>{Ie(this,b,this.editorDiv.style.color=se)},mustExec:!0,type:u.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},w=new WeakSet,qr=function(){const K=this.editorDiv.getElementsByTagName("div");if(K.length===0)return this.editorDiv.innerText;const se=[];for(const ne of K)se.push(ne.innerText.replace(/\r\n?|\n/,""));return se.join(`
`)},k=new WeakSet,fn=function(){const[K,se]=this.parentDimensions;let ne;if(this.isAttachedToDOM)ne=this.div.getBoundingClientRect();else{const{currentLayer:le,div:he}=this,Y=he.style.display;he.style.display="hidden",le.div.append(this.div),ne=he.getBoundingClientRect(),he.remove(),he.style.display=Y}this.rotation%180===this.parentRotation%180?(this.width=ne.width/K,this.height=ne.height/se):(this.width=ne.height/K,this.height=ne.width/se),this.fixAndSetPosition()},N=new WeakSet,gr=function(){if(this.editorDiv.replaceChildren(),!!M(this,T))for(const K of M(this,T).split(`
`)){const se=document.createElement("div");se.append(K?document.createTextNode(K):document.createElement("br")),this.editorDiv.append(se)}},L=new WeakSet,Kr=function(K){const{value:se,fontSize:ne,color:le,rect:he,pageIndex:Y}=M(this,S);return K.value!==se||K.fontSize!==ne||K.rect.some((D,G)=>Math.abs(D-he[G])>=1)||K.color.some((D,G)=>D!==le[G])||K.pageIndex!==Y},V=new WeakSet,_r=function(K=!1){if(!this.annotationElementId)return;if(Te(this,k,fn).call(this),!K&&(this.width===0||this.height===0)){setTimeout(()=>Te(this,V,_r).call(this,!0),0);return}const se=ee._internalPadding*this.parentScale;M(this,S).rect=this.getRect(se,se)},Re(ee,"_freeTextDefaultContent",""),Re(ee,"_internalPadding",0),Re(ee,"_defaultColor",null),Re(ee,"_defaultFontSize",10),Re(ee,"_type","freetext");let m=ee;s.FreeTextEditor=m},(a,s,c)=>{var G,U,Qt,q,Zr,ae,ce,ie,ue,Ee,xe,ve,$e,_e,Be,ze,Se,pe,me,Oe,Le,We,Ze,Yr,Je,Rn,rt,yr,it,Er,ye,ge,Fe,Ue,dt,pt,Ae,br,De,Ce,Xe,Ge,Xr,Me,Tr;Object.defineProperty(s,"__esModule",{value:!0}),s.StampAnnotationElement=s.InkAnnotationElement=s.FreeTextAnnotationElement=s.AnnotationLayer=void 0;var u=c(1),d=c(6),h=c(3),p=c(30),m=c(31),f=c(32);const _=1e3,y=9,E=new WeakSet;function b(ke){return{width:ke[2]-ke[0],height:ke[3]-ke[1]}}class T{static create(re){switch(re.data.annotationType){case u.AnnotationType.LINK:return new v(re);case u.AnnotationType.TEXT:return new S(re);case u.AnnotationType.WIDGET:switch(re.data.fieldType){case"Tx":return new I(re);case"Btn":return re.data.radioButton?new w(re):re.data.checkBox?new P(re):new C(re);case"Ch":return new k(re);case"Sig":return new x(re)}return new O(re);case u.AnnotationType.POPUP:return new R(re);case u.AnnotationType.FREETEXT:return new F(re);case u.AnnotationType.LINE:return new L(re);case u.AnnotationType.SQUARE:return new X(re);case u.AnnotationType.CIRCLE:return new V(re);case u.AnnotationType.POLYLINE:return new H(re);case u.AnnotationType.CARET:return new Q(re);case u.AnnotationType.INK:return new Z(re);case u.AnnotationType.POLYGON:return new ee(re);case u.AnnotationType.HIGHLIGHT:return new K(re);case u.AnnotationType.UNDERLINE:return new se(re);case u.AnnotationType.SQUIGGLY:return new ne(re);case u.AnnotationType.STRIKEOUT:return new le(re);case u.AnnotationType.STAMP:return new he(re);case u.AnnotationType.FILEATTACHMENT:return new Y(re);default:return new A(re)}}}const B=class B{constructor(re,{isRenderable:j=!1,ignoreBorder:te=!1,createQuadrilaterals:oe=!1}={}){de(this,G,!1);this.isRenderable=j,this.data=re.data,this.layer=re.layer,this.linkService=re.linkService,this.downloadManager=re.downloadManager,this.imageResourcesPath=re.imageResourcesPath,this.renderForms=re.renderForms,this.svgFactory=re.svgFactory,this.annotationStorage=re.annotationStorage,this.enableScripting=re.enableScripting,this.hasJSActions=re.hasJSActions,this._fieldObjects=re.fieldObjects,this.parent=re.parent,j&&(this.container=this._createContainer(te)),oe&&this._createQuadrilaterals()}static _hasPopupData({titleObj:re,contentsObj:j,richText:te}){return!!(re!=null&&re.str||j!=null&&j.str||te!=null&&te.str)}get hasPopupData(){return B._hasPopupData(this.data)}_createContainer(re){const{data:j,parent:{page:te,viewport:oe}}=this,fe=document.createElement("section");fe.setAttribute("data-annotation-id",j.id),this instanceof O||(fe.tabIndex=_),fe.style.zIndex=this.parent.zIndex++,this.data.popupRef&&fe.setAttribute("aria-haspopup","dialog"),j.noRotate&&fe.classList.add("norotate");const{pageWidth:be,pageHeight:we,pageX:je,pageY:Ve}=oe.rawDims;if(!j.rect||this instanceof R){const{rotation:nt}=j;return!j.hasOwnCanvas&&nt!==0&&this.setRotation(nt,fe),fe}const{width:Ye,height:Ke}=b(j.rect),He=u.Util.normalizeRect([j.rect[0],te.view[3]-j.rect[1]+te.view[1],j.rect[2],te.view[3]-j.rect[3]+te.view[1]]);if(!re&&j.borderStyle.width>0){fe.style.borderWidth=`${j.borderStyle.width}px`;const nt=j.borderStyle.horizontalCornerRadius,st=j.borderStyle.verticalCornerRadius;if(nt>0||st>0){const ht=`calc(${nt}px * var(--scale-factor)) / calc(${st}px * var(--scale-factor))`;fe.style.borderRadius=ht}else if(this instanceof w){const ht=`calc(${Ye}px * var(--scale-factor)) / calc(${Ke}px * var(--scale-factor))`;fe.style.borderRadius=ht}switch(j.borderStyle.style){case u.AnnotationBorderStyleType.SOLID:fe.style.borderStyle="solid";break;case u.AnnotationBorderStyleType.DASHED:fe.style.borderStyle="dashed";break;case u.AnnotationBorderStyleType.BEVELED:(0,u.warn)("Unimplemented border style: beveled");break;case u.AnnotationBorderStyleType.INSET:(0,u.warn)("Unimplemented border style: inset");break;case u.AnnotationBorderStyleType.UNDERLINE:fe.style.borderBottomStyle="solid";break}const ct=j.borderColor||null;ct?(Ie(this,G,!0),fe.style.borderColor=u.Util.makeHexColor(ct[0]|0,ct[1]|0,ct[2]|0)):fe.style.borderWidth=0}fe.style.left=`${100*(He[0]-je)/be}%`,fe.style.top=`${100*(He[1]-Ve)/we}%`;const{rotation:qe}=j;return j.hasOwnCanvas||qe===0?(fe.style.width=`${100*Ye/be}%`,fe.style.height=`${100*Ke/we}%`):this.setRotation(qe,fe),fe}setRotation(re,j=this.container){if(!this.data.rect)return;const{pageWidth:te,pageHeight:oe}=this.parent.viewport.rawDims,{width:fe,height:be}=b(this.data.rect);let we,je;re%180===0?(we=100*fe/te,je=100*be/oe):(we=100*be/te,je=100*fe/oe),j.style.width=`${we}%`,j.style.height=`${je}%`,j.setAttribute("data-main-rotation",(360-re)%360)}get _commonActions(){const re=(j,te,oe)=>{const fe=oe.detail[j],be=fe[0],we=fe.slice(1);oe.target.style[te]=p.ColorConverters[`${be}_HTML`](we),this.annotationStorage.setValue(this.data.id,{[te]:p.ColorConverters[`${be}_rgb`](we)})};return(0,u.shadow)(this,"_commonActions",{display:j=>{const{display:te}=j.detail,oe=te%2===1;this.container.style.visibility=oe?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:oe,noPrint:te===1||te===2})},print:j=>{this.annotationStorage.setValue(this.data.id,{noPrint:!j.detail.print})},hidden:j=>{const{hidden:te}=j.detail;this.container.style.visibility=te?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:te,noView:te})},focus:j=>{setTimeout(()=>j.target.focus({preventScroll:!1}),0)},userName:j=>{j.target.title=j.detail.userName},readonly:j=>{j.target.disabled=j.detail.readonly},required:j=>{this._setRequired(j.target,j.detail.required)},bgColor:j=>{re("bgColor","backgroundColor",j)},fillColor:j=>{re("fillColor","backgroundColor",j)},fgColor:j=>{re("fgColor","color",j)},textColor:j=>{re("textColor","color",j)},borderColor:j=>{re("borderColor","borderColor",j)},strokeColor:j=>{re("strokeColor","borderColor",j)},rotation:j=>{const te=j.detail.rotation;this.setRotation(te),this.annotationStorage.setValue(this.data.id,{rotation:te})}})}_dispatchEventFromSandbox(re,j){var oe;const te=this._commonActions;for(const fe of Object.keys(j.detail))(oe=re[fe]||te[fe])==null||oe(j)}_setDefaultPropertiesFromJS(re){if(!this.enableScripting)return;const j=this.annotationStorage.getRawValue(this.data.id);if(!j)return;const te=this._commonActions;for(const[oe,fe]of Object.entries(j)){const be=te[oe];if(be){const we={detail:{[oe]:fe},target:re};be(we),delete j[oe]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:re}=this.data;if(!re)return;const[j,te,oe,fe]=this.data.rect;if(re.length===1){const[,{x:st,y:ct},{x:ht,y:mt}]=re[0];if(oe===st&&fe===ct&&j===ht&&te===mt)return}const{style:be}=this.container;let we;if(M(this,G)){const{borderColor:st,borderWidth:ct}=be;be.borderWidth=0,we=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${st}" stroke-width="${ct}">`],this.container.classList.add("hasBorder")}const je=oe-j,Ve=fe-te,{svgFactory:Ye}=this,Ke=Ye.createElement("svg");Ke.classList.add("quadrilateralsContainer"),Ke.setAttribute("width",0),Ke.setAttribute("height",0);const He=Ye.createElement("defs");Ke.append(He);const qe=Ye.createElement("clipPath"),nt=`clippath_${this.data.id}`;qe.setAttribute("id",nt),qe.setAttribute("clipPathUnits","objectBoundingBox"),He.append(qe);for(const[,{x:st,y:ct},{x:ht,y:mt}]of re){const _t=Ye.createElement("rect"),Tt=(ht-j)/je,At=(fe-ct)/Ve,It=(st-ht)/je,Ht=(ct-mt)/Ve;_t.setAttribute("x",Tt),_t.setAttribute("y",At),_t.setAttribute("width",It),_t.setAttribute("height",Ht),qe.append(_t),we==null||we.push(`<rect vector-effect="non-scaling-stroke" x="${Tt}" y="${At}" width="${It}" height="${Ht}"/>`)}M(this,G)&&(we.push("</g></svg>')"),be.backgroundImage=we.join("")),this.container.append(Ke),this.container.style.clipPath=`url(#${nt})`}_createPopup(){const{container:re,data:j}=this;re.setAttribute("aria-haspopup","dialog");const te=new R({data:{color:j.color,titleObj:j.titleObj,modificationDate:j.modificationDate,contentsObj:j.contentsObj,richText:j.richText,parentRect:j.rect,borderStyle:0,id:`popup_${j.id}`,rotation:j.rotation},parent:this.parent,elements:[this]});this.parent.div.append(te.render())}render(){(0,u.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(re,j=null){const te=[];if(this._fieldObjects){const oe=this._fieldObjects[re];if(oe)for(const{page:fe,id:be,exportValues:we}of oe){if(fe===-1||be===j)continue;const je=typeof we=="string"?we:null,Ve=document.querySelector(`[data-element-id="${be}"]`);if(Ve&&!E.has(Ve)){(0,u.warn)(`_getElementsByName - element not allowed: ${be}`);continue}te.push({id:be,exportValue:je,domElement:Ve})}return te}for(const oe of document.getElementsByName(re)){const{exportValue:fe}=oe,be=oe.getAttribute("data-element-id");be!==j&&E.has(oe)&&te.push({id:be,exportValue:fe,domElement:oe})}return te}show(){var re;this.container&&(this.container.hidden=!1),(re=this.popup)==null||re.maybeShow()}hide(){var re;this.container&&(this.container.hidden=!0),(re=this.popup)==null||re.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const re=this.getElementsToTriggerPopup();if(Array.isArray(re))for(const j of re)j.classList.add("highlightArea");else re.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:re,data:{id:j}}=this;this.container.addEventListener("dblclick",()=>{var te;(te=this.linkService.eventBus)==null||te.dispatch("switchannotationeditormode",{source:this,mode:re,editId:j})})}};G=new WeakMap;let A=B;class v extends A{constructor(j,te=null){super(j,{isRenderable:!0,ignoreBorder:!!(te!=null&&te.ignoreBorder),createQuadrilaterals:!0});de(this,U);de(this,q);this.isTooltipOnly=j.data.isTooltipOnly}render(){const{data:j,linkService:te}=this,oe=document.createElement("a");oe.setAttribute("data-element-id",j.id);let fe=!1;return j.url?(te.addLinkAttributes(oe,j.url,j.newWindow),fe=!0):j.action?(this._bindNamedAction(oe,j.action),fe=!0):j.attachment?(this._bindAttachment(oe,j.attachment),fe=!0):j.setOCGState?(Te(this,q,Zr).call(this,oe,j.setOCGState),fe=!0):j.dest?(this._bindLink(oe,j.dest),fe=!0):(j.actions&&(j.actions.Action||j.actions["Mouse Up"]||j.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(oe,j),fe=!0),j.resetForm?(this._bindResetFormAction(oe,j.resetForm),fe=!0):this.isTooltipOnly&&!fe&&(this._bindLink(oe,""),fe=!0)),this.container.classList.add("linkAnnotation"),fe&&this.container.append(oe),this.container}_bindLink(j,te){j.href=this.linkService.getDestinationHash(te),j.onclick=()=>(te&&this.linkService.goToDestination(te),!1),(te||te==="")&&Te(this,U,Qt).call(this)}_bindNamedAction(j,te){j.href=this.linkService.getAnchorUrl(""),j.onclick=()=>(this.linkService.executeNamedAction(te),!1),Te(this,U,Qt).call(this)}_bindAttachment(j,te){j.href=this.linkService.getAnchorUrl(""),j.onclick=()=>{var oe;return(oe=this.downloadManager)==null||oe.openOrDownloadData(this.container,te.content,te.filename),!1},Te(this,U,Qt).call(this)}_bindJSAction(j,te){j.href=this.linkService.getAnchorUrl("");const oe=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const fe of Object.keys(te.actions)){const be=oe.get(fe);be&&(j[be]=()=>{var we;return(we=this.linkService.eventBus)==null||we.dispatch("dispatcheventinsandbox",{source:this,detail:{id:te.id,name:fe}}),!1})}j.onclick||(j.onclick=()=>!1),Te(this,U,Qt).call(this)}_bindResetFormAction(j,te){const oe=j.onclick;if(oe||(j.href=this.linkService.getAnchorUrl("")),Te(this,U,Qt).call(this),!this._fieldObjects){(0,u.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),oe||(j.onclick=()=>!1);return}j.onclick=()=>{var Ke;oe==null||oe();const{fields:fe,refs:be,include:we}=te,je=[];if(fe.length!==0||be.length!==0){const He=new Set(be);for(const qe of fe){const nt=this._fieldObjects[qe]||[];for(const{id:st}of nt)He.add(st)}for(const qe of Object.values(this._fieldObjects))for(const nt of qe)He.has(nt.id)===we&&je.push(nt)}else for(const He of Object.values(this._fieldObjects))je.push(...He);const Ve=this.annotationStorage,Ye=[];for(const He of je){const{id:qe}=He;switch(Ye.push(qe),He.type){case"text":{const st=He.defaultValue||"";Ve.setValue(qe,{value:st});break}case"checkbox":case"radiobutton":{const st=He.defaultValue===He.exportValues;Ve.setValue(qe,{value:st});break}case"combobox":case"listbox":{const st=He.defaultValue||"";Ve.setValue(qe,{value:st});break}default:continue}const nt=document.querySelector(`[data-element-id="${qe}"]`);if(nt){if(!E.has(nt)){(0,u.warn)(`_bindResetFormAction - element not allowed: ${qe}`);continue}}else continue;nt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Ke=this.linkService.eventBus)==null||Ke.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Ye,name:"ResetForm"}})),!1}}}U=new WeakSet,Qt=function(){this.container.setAttribute("data-internal-link","")},q=new WeakSet,Zr=function(j,te){j.href=this.linkService.getAnchorUrl(""),j.onclick=()=>(this.linkService.executeSetOCGState(te),!1),Te(this,U,Qt).call(this)};class S extends A{constructor(re){super(re,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const re=document.createElement("img");return re.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",re.alt="[{{type}} Annotation]",re.dataset.l10nId="text_annotation_type",re.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(re),this.container}}class O extends A{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(re){var j;this.data.hasOwnCanvas&&(((j=re.previousSibling)==null?void 0:j.nodeName)==="CANVAS"&&(re.previousSibling.hidden=!0),re.hidden=!1)}_getKeyModifier(re){const{isWin:j,isMac:te}=u.FeatureTest.platform;return j&&re.ctrlKey||te&&re.metaKey}_setEventListener(re,j,te,oe,fe){te.includes("mouse")?re.addEventListener(te,be=>{var we;(we=this.linkService.eventBus)==null||we.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:oe,value:fe(be),shift:be.shiftKey,modifier:this._getKeyModifier(be)}})}):re.addEventListener(te,be=>{var we;if(te==="blur"){if(!j.focused||!be.relatedTarget)return;j.focused=!1}else if(te==="focus"){if(j.focused)return;j.focused=!0}fe&&((we=this.linkService.eventBus)==null||we.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:oe,value:fe(be)}}))})}_setEventListeners(re,j,te,oe){var fe,be,we;for(const[je,Ve]of te)(Ve==="Action"||(fe=this.data.actions)!=null&&fe[Ve])&&((Ve==="Focus"||Ve==="Blur")&&(j||(j={focused:!1})),this._setEventListener(re,j,je,Ve,oe),Ve==="Focus"&&!((be=this.data.actions)!=null&&be.Blur)?this._setEventListener(re,j,"blur","Blur",null):Ve==="Blur"&&!((we=this.data.actions)!=null&&we.Focus)&&this._setEventListener(re,j,"focus","Focus",null))}_setBackgroundColor(re){const j=this.data.backgroundColor||null;re.style.backgroundColor=j===null?"transparent":u.Util.makeHexColor(j[0],j[1],j[2])}_setTextStyle(re){const j=["left","center","right"],{fontColor:te}=this.data.defaultAppearanceData,oe=this.data.defaultAppearanceData.fontSize||y,fe=re.style;let be;const we=2,je=Ve=>Math.round(10*Ve)/10;if(this.data.multiLine){const Ve=Math.abs(this.data.rect[3]-this.data.rect[1]-we),Ye=Math.round(Ve/(u.LINE_FACTOR*oe))||1,Ke=Ve/Ye;be=Math.min(oe,je(Ke/u.LINE_FACTOR))}else{const Ve=Math.abs(this.data.rect[3]-this.data.rect[1]-we);be=Math.min(oe,je(Ve/u.LINE_FACTOR))}fe.fontSize=`calc(${be}px * var(--scale-factor))`,fe.color=u.Util.makeHexColor(te[0],te[1],te[2]),this.data.textAlignment!==null&&(fe.textAlign=j[this.data.textAlignment])}_setRequired(re,j){j?re.setAttribute("required",!0):re.removeAttribute("required"),re.setAttribute("aria-required",j)}}class I extends O{constructor(re){const j=re.renderForms||!re.data.hasAppearance&&!!re.data.fieldValue;super(re,{isRenderable:j})}setPropertyOnSiblings(re,j,te,oe){const fe=this.annotationStorage;for(const be of this._getElementsByName(re.name,re.id))be.domElement&&(be.domElement[j]=te),fe.setValue(be.id,{[oe]:te})}render(){var oe,fe;const re=this.annotationStorage,j=this.data.id;this.container.classList.add("textWidgetAnnotation");let te=null;if(this.renderForms){const be=re.getValue(j,{value:this.data.fieldValue});let we=be.value||"";const je=re.getValue(j,{charLimit:this.data.maxLen}).charLimit;je&&we.length>je&&(we=we.slice(0,je));let Ve=be.formattedValue||((oe=this.data.textContent)==null?void 0:oe.join(`
`))||null;Ve&&this.data.comb&&(Ve=Ve.replaceAll(/\s+/g,""));const Ye={userValue:we,formattedValue:Ve,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(te=document.createElement("textarea"),te.textContent=Ve??we,this.data.doNotScroll&&(te.style.overflowY="hidden")):(te=document.createElement("input"),te.type="text",te.setAttribute("value",Ve??we),this.data.doNotScroll&&(te.style.overflowX="hidden")),this.data.hasOwnCanvas&&(te.hidden=!0),E.add(te),te.setAttribute("data-element-id",j),te.disabled=this.data.readOnly,te.name=this.data.fieldName,te.tabIndex=_,this._setRequired(te,this.data.required),je&&(te.maxLength=je),te.addEventListener("input",He=>{re.setValue(j,{value:He.target.value}),this.setPropertyOnSiblings(te,"value",He.target.value,"value"),Ye.formattedValue=null}),te.addEventListener("resetform",He=>{const qe=this.data.defaultFieldValue??"";te.value=Ye.userValue=qe,Ye.formattedValue=null});let Ke=He=>{const{formattedValue:qe}=Ye;qe!=null&&(He.target.value=qe),He.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){te.addEventListener("focus",qe=>{if(Ye.focused)return;const{target:nt}=qe;Ye.userValue&&(nt.value=Ye.userValue),Ye.lastCommittedValue=nt.value,Ye.commitKey=1,Ye.focused=!0}),te.addEventListener("updatefromsandbox",qe=>{this.showElementAndHideCanvas(qe.target);const nt={value(st){Ye.userValue=st.detail.value??"",re.setValue(j,{value:Ye.userValue.toString()}),st.target.value=Ye.userValue},formattedValue(st){const{formattedValue:ct}=st.detail;Ye.formattedValue=ct,ct!=null&&st.target!==document.activeElement&&(st.target.value=ct),re.setValue(j,{formattedValue:ct})},selRange(st){st.target.setSelectionRange(...st.detail.selRange)},charLimit:st=>{var _t;const{charLimit:ct}=st.detail,{target:ht}=st;if(ct===0){ht.removeAttribute("maxLength");return}ht.setAttribute("maxLength",ct);let mt=Ye.userValue;!mt||mt.length<=ct||(mt=mt.slice(0,ct),ht.value=Ye.userValue=mt,re.setValue(j,{value:mt}),(_t=this.linkService.eventBus)==null||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:j,name:"Keystroke",value:mt,willCommit:!0,commitKey:1,selStart:ht.selectionStart,selEnd:ht.selectionEnd}}))}};this._dispatchEventFromSandbox(nt,qe)}),te.addEventListener("keydown",qe=>{var ct;Ye.commitKey=1;let nt=-1;if(qe.key==="Escape"?nt=0:qe.key==="Enter"&&!this.data.multiLine?nt=2:qe.key==="Tab"&&(Ye.commitKey=3),nt===-1)return;const{value:st}=qe.target;Ye.lastCommittedValue!==st&&(Ye.lastCommittedValue=st,Ye.userValue=st,(ct=this.linkService.eventBus)==null||ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:j,name:"Keystroke",value:st,willCommit:!0,commitKey:nt,selStart:qe.target.selectionStart,selEnd:qe.target.selectionEnd}}))});const He=Ke;Ke=null,te.addEventListener("blur",qe=>{var st;if(!Ye.focused||!qe.relatedTarget)return;Ye.focused=!1;const{value:nt}=qe.target;Ye.userValue=nt,Ye.lastCommittedValue!==nt&&((st=this.linkService.eventBus)==null||st.dispatch("dispatcheventinsandbox",{source:this,detail:{id:j,name:"Keystroke",value:nt,willCommit:!0,commitKey:Ye.commitKey,selStart:qe.target.selectionStart,selEnd:qe.target.selectionEnd}})),He(qe)}),(fe=this.data.actions)!=null&&fe.Keystroke&&te.addEventListener("beforeinput",qe=>{var At;Ye.lastCommittedValue=null;const{data:nt,target:st}=qe,{value:ct,selectionStart:ht,selectionEnd:mt}=st;let _t=ht,Tt=mt;switch(qe.inputType){case"deleteWordBackward":{const It=ct.substring(0,ht).match(/\w*[^\w]*$/);It&&(_t-=It[0].length);break}case"deleteWordForward":{const It=ct.substring(ht).match(/^[^\w]*\w*/);It&&(Tt+=It[0].length);break}case"deleteContentBackward":ht===mt&&(_t-=1);break;case"deleteContentForward":ht===mt&&(Tt+=1);break}qe.preventDefault(),(At=this.linkService.eventBus)==null||At.dispatch("dispatcheventinsandbox",{source:this,detail:{id:j,name:"Keystroke",value:ct,change:nt||"",willCommit:!1,selStart:_t,selEnd:Tt}})}),this._setEventListeners(te,Ye,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],qe=>qe.target.value)}if(Ke&&te.addEventListener("blur",Ke),this.data.comb){const He=(this.data.rect[2]-this.data.rect[0])/je;te.classList.add("comb"),te.style.letterSpacing=`calc(${He}px * var(--scale-factor) - 1ch)`}}else te=document.createElement("div"),te.textContent=this.data.fieldValue,te.style.verticalAlign="middle",te.style.display="table-cell";return this._setTextStyle(te),this._setBackgroundColor(te),this._setDefaultPropertiesFromJS(te),this.container.append(te),this.container}}class x extends O{constructor(re){super(re,{isRenderable:!!re.data.hasOwnCanvas})}}class P extends O{constructor(re){super(re,{isRenderable:re.renderForms})}render(){const re=this.annotationStorage,j=this.data,te=j.id;let oe=re.getValue(te,{value:j.exportValue===j.fieldValue}).value;typeof oe=="string"&&(oe=oe!=="Off",re.setValue(te,{value:oe})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const fe=document.createElement("input");return E.add(fe),fe.setAttribute("data-element-id",te),fe.disabled=j.readOnly,this._setRequired(fe,this.data.required),fe.type="checkbox",fe.name=j.fieldName,oe&&fe.setAttribute("checked",!0),fe.setAttribute("exportValue",j.exportValue),fe.tabIndex=_,fe.addEventListener("change",be=>{const{name:we,checked:je}=be.target;for(const Ve of this._getElementsByName(we,te)){const Ye=je&&Ve.exportValue===j.exportValue;Ve.domElement&&(Ve.domElement.checked=Ye),re.setValue(Ve.id,{value:Ye})}re.setValue(te,{value:je})}),fe.addEventListener("resetform",be=>{const we=j.defaultFieldValue||"Off";be.target.checked=we===j.exportValue}),this.enableScripting&&this.hasJSActions&&(fe.addEventListener("updatefromsandbox",be=>{const we={value(je){je.target.checked=je.detail.value!=="Off",re.setValue(te,{value:je.target.checked})}};this._dispatchEventFromSandbox(we,be)}),this._setEventListeners(fe,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],be=>be.target.checked)),this._setBackgroundColor(fe),this._setDefaultPropertiesFromJS(fe),this.container.append(fe),this.container}}class w extends O{constructor(re){super(re,{isRenderable:re.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const re=this.annotationStorage,j=this.data,te=j.id;let oe=re.getValue(te,{value:j.fieldValue===j.buttonValue}).value;typeof oe=="string"&&(oe=oe!==j.buttonValue,re.setValue(te,{value:oe}));const fe=document.createElement("input");if(E.add(fe),fe.setAttribute("data-element-id",te),fe.disabled=j.readOnly,this._setRequired(fe,this.data.required),fe.type="radio",fe.name=j.fieldName,oe&&fe.setAttribute("checked",!0),fe.tabIndex=_,fe.addEventListener("change",be=>{const{name:we,checked:je}=be.target;for(const Ve of this._getElementsByName(we,te))re.setValue(Ve.id,{value:!1});re.setValue(te,{value:je})}),fe.addEventListener("resetform",be=>{const we=j.defaultFieldValue;be.target.checked=we!=null&&we===j.buttonValue}),this.enableScripting&&this.hasJSActions){const be=j.buttonValue;fe.addEventListener("updatefromsandbox",we=>{const je={value:Ve=>{const Ye=be===Ve.detail.value;for(const Ke of this._getElementsByName(Ve.target.name)){const He=Ye&&Ke.id===te;Ke.domElement&&(Ke.domElement.checked=He),re.setValue(Ke.id,{value:He})}}};this._dispatchEventFromSandbox(je,we)}),this._setEventListeners(fe,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],we=>we.target.checked)}return this._setBackgroundColor(fe),this._setDefaultPropertiesFromJS(fe),this.container.append(fe),this.container}}class C extends v{constructor(re){super(re,{ignoreBorder:re.data.hasAppearance})}render(){const re=super.render();re.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(re.title=this.data.alternativeText);const j=re.lastChild;return this.enableScripting&&this.hasJSActions&&j&&(this._setDefaultPropertiesFromJS(j),j.addEventListener("updatefromsandbox",te=>{this._dispatchEventFromSandbox({},te)})),re}}class k extends O{constructor(re){super(re,{isRenderable:re.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const re=this.annotationStorage,j=this.data.id,te=re.getValue(j,{value:this.data.fieldValue}),oe=document.createElement("select");E.add(oe),oe.setAttribute("data-element-id",j),oe.disabled=this.data.readOnly,this._setRequired(oe,this.data.required),oe.name=this.data.fieldName,oe.tabIndex=_;let fe=this.data.combo&&this.data.options.length>0;this.data.combo||(oe.size=this.data.options.length,this.data.multiSelect&&(oe.multiple=!0)),oe.addEventListener("resetform",Ye=>{const Ke=this.data.defaultFieldValue;for(const He of oe.options)He.selected=He.value===Ke});for(const Ye of this.data.options){const Ke=document.createElement("option");Ke.textContent=Ye.displayValue,Ke.value=Ye.exportValue,te.value.includes(Ye.exportValue)&&(Ke.setAttribute("selected",!0),fe=!1),oe.append(Ke)}let be=null;if(fe){const Ye=document.createElement("option");Ye.value=" ",Ye.setAttribute("hidden",!0),Ye.setAttribute("selected",!0),oe.prepend(Ye),be=()=>{Ye.remove(),oe.removeEventListener("input",be),be=null},oe.addEventListener("input",be)}const we=Ye=>{const Ke=Ye?"value":"textContent",{options:He,multiple:qe}=oe;return qe?Array.prototype.filter.call(He,nt=>nt.selected).map(nt=>nt[Ke]):He.selectedIndex===-1?null:He[He.selectedIndex][Ke]};let je=we(!1);const Ve=Ye=>{const Ke=Ye.target.options;return Array.prototype.map.call(Ke,He=>({displayValue:He.textContent,exportValue:He.value}))};return this.enableScripting&&this.hasJSActions?(oe.addEventListener("updatefromsandbox",Ye=>{const Ke={value(He){be==null||be();const qe=He.detail.value,nt=new Set(Array.isArray(qe)?qe:[qe]);for(const st of oe.options)st.selected=nt.has(st.value);re.setValue(j,{value:we(!0)}),je=we(!1)},multipleSelection(He){oe.multiple=!0},remove(He){const qe=oe.options,nt=He.detail.remove;qe[nt].selected=!1,oe.remove(nt),qe.length>0&&Array.prototype.findIndex.call(qe,st=>st.selected)===-1&&(qe[0].selected=!0),re.setValue(j,{value:we(!0),items:Ve(He)}),je=we(!1)},clear(He){for(;oe.length!==0;)oe.remove(0);re.setValue(j,{value:null,items:[]}),je=we(!1)},insert(He){const{index:qe,displayValue:nt,exportValue:st}=He.detail.insert,ct=oe.children[qe],ht=document.createElement("option");ht.textContent=nt,ht.value=st,ct?ct.before(ht):oe.append(ht),re.setValue(j,{value:we(!0),items:Ve(He)}),je=we(!1)},items(He){const{items:qe}=He.detail;for(;oe.length!==0;)oe.remove(0);for(const nt of qe){const{displayValue:st,exportValue:ct}=nt,ht=document.createElement("option");ht.textContent=st,ht.value=ct,oe.append(ht)}oe.options.length>0&&(oe.options[0].selected=!0),re.setValue(j,{value:we(!0),items:Ve(He)}),je=we(!1)},indices(He){const qe=new Set(He.detail.indices);for(const nt of He.target.options)nt.selected=qe.has(nt.index);re.setValue(j,{value:we(!0)}),je=we(!1)},editable(He){He.target.disabled=!He.detail.editable}};this._dispatchEventFromSandbox(Ke,Ye)}),oe.addEventListener("input",Ye=>{var He;const Ke=we(!0);re.setValue(j,{value:Ke}),Ye.preventDefault(),(He=this.linkService.eventBus)==null||He.dispatch("dispatcheventinsandbox",{source:this,detail:{id:j,name:"Keystroke",value:je,changeEx:Ke,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(oe,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Ye=>Ye.target.value)):oe.addEventListener("input",function(Ye){re.setValue(j,{value:we(!0)})}),this.data.combo&&this._setTextStyle(oe),this._setBackgroundColor(oe),this._setDefaultPropertiesFromJS(oe),this.container.append(oe),this.container}}class R extends A{constructor(re){const{data:j,elements:te}=re;super(re,{isRenderable:A._hasPopupData(j)}),this.elements=te}render(){this.container.classList.add("popupAnnotation");const re=new N({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),j=[];for(const te of this.elements)te.popup=re,j.push(te.data.id),te.addHighlightArea();return this.container.setAttribute("aria-controls",j.map(te=>`${u.AnnotationPrefix}${te}`).join(",")),this.container}}class N{constructor({container:re,color:j,elements:te,titleObj:oe,modificationDate:fe,contentsObj:be,richText:we,parent:je,rect:Ve,parentRect:Ye,open:Ke}){de(this,Ze);de(this,Je);de(this,rt);de(this,it);de(this,ae,null);de(this,ce,Te(this,Ze,Yr).bind(this));de(this,ie,Te(this,it,Er).bind(this));de(this,ue,Te(this,rt,yr).bind(this));de(this,Ee,Te(this,Je,Rn).bind(this));de(this,xe,null);de(this,ve,null);de(this,$e,null);de(this,_e,null);de(this,Be,null);de(this,ze,null);de(this,Se,!1);de(this,pe,null);de(this,me,null);de(this,Oe,null);de(this,Le,null);de(this,We,!1);var qe;Ie(this,ve,re),Ie(this,Le,oe),Ie(this,$e,be),Ie(this,Oe,we),Ie(this,Be,je),Ie(this,xe,j),Ie(this,me,Ve),Ie(this,ze,Ye),Ie(this,_e,te);const He=d.PDFDateString.toDateObject(fe);He&&Ie(this,ae,je.l10n.get("annotation_date_string",{date:He.toLocaleDateString(),time:He.toLocaleTimeString()})),this.trigger=te.flatMap(nt=>nt.getElementsToTriggerPopup());for(const nt of this.trigger)nt.addEventListener("click",M(this,Ee)),nt.addEventListener("mouseenter",M(this,ue)),nt.addEventListener("mouseleave",M(this,ie)),nt.classList.add("popupTriggerArea");for(const nt of te)(qe=nt.container)==null||qe.addEventListener("keydown",M(this,ce));M(this,ve).hidden=!0,Ke&&Te(this,Je,Rn).call(this)}render(){if(M(this,pe))return;const{page:{view:re},viewport:{rawDims:{pageWidth:j,pageHeight:te,pageX:oe,pageY:fe}}}=M(this,Be),be=Ie(this,pe,document.createElement("div"));if(be.className="popup",M(this,xe)){const mt=be.style.outlineColor=u.Util.makeHexColor(...M(this,xe));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?be.style.backgroundColor=`color-mix(in srgb, ${mt} 30%, white)`:be.style.backgroundColor=u.Util.makeHexColor(...M(this,xe).map(_t=>Math.floor(.7*(255-_t)+_t)))}const we=document.createElement("span");we.className="header";const je=document.createElement("h1");if(we.append(je),{dir:je.dir,str:je.textContent}=M(this,Le),be.append(we),M(this,ae)){const mt=document.createElement("span");mt.classList.add("popupDate"),M(this,ae).then(_t=>{mt.textContent=_t}),we.append(mt)}const Ve=M(this,$e),Ye=M(this,Oe);if(Ye!=null&&Ye.str&&(!(Ve!=null&&Ve.str)||Ve.str===Ye.str))f.XfaLayer.render({xfaHtml:Ye.html,intent:"richText",div:be}),be.lastChild.classList.add("richText","popupContent");else{const mt=this._formatContents(Ve);be.append(mt)}let Ke=!!M(this,ze),He=Ke?M(this,ze):M(this,me);for(const mt of M(this,_e))if(!He||u.Util.intersect(mt.data.rect,He)!==null){He=mt.data.rect,Ke=!0;break}const qe=u.Util.normalizeRect([He[0],re[3]-He[1]+re[1],He[2],re[3]-He[3]+re[1]]),nt=Ke?He[2]-He[0]+5:0,st=qe[0]+nt,ct=qe[1],{style:ht}=M(this,ve);ht.left=`${100*(st-oe)/j}%`,ht.top=`${100*(ct-fe)/te}%`,M(this,ve).append(be)}_formatContents({str:re,dir:j}){const te=document.createElement("p");te.classList.add("popupContent"),te.dir=j;const oe=re.split(/(?:\r\n?|\n)/);for(let fe=0,be=oe.length;fe<be;++fe){const we=oe[fe];te.append(document.createTextNode(we)),fe<be-1&&te.append(document.createElement("br"))}return te}forceHide(){Ie(this,We,this.isVisible),M(this,We)&&(M(this,ve).hidden=!0)}maybeShow(){M(this,We)&&(Ie(this,We,!1),M(this,ve).hidden=!1)}get isVisible(){return M(this,ve).hidden===!1}}ae=new WeakMap,ce=new WeakMap,ie=new WeakMap,ue=new WeakMap,Ee=new WeakMap,xe=new WeakMap,ve=new WeakMap,$e=new WeakMap,_e=new WeakMap,Be=new WeakMap,ze=new WeakMap,Se=new WeakMap,pe=new WeakMap,me=new WeakMap,Oe=new WeakMap,Le=new WeakMap,We=new WeakMap,Ze=new WeakSet,Yr=function(re){re.altKey||re.shiftKey||re.ctrlKey||re.metaKey||(re.key==="Enter"||re.key==="Escape"&&M(this,Se))&&Te(this,Je,Rn).call(this)},Je=new WeakSet,Rn=function(){Ie(this,Se,!M(this,Se)),M(this,Se)?(Te(this,rt,yr).call(this),M(this,ve).addEventListener("click",M(this,Ee)),M(this,ve).addEventListener("keydown",M(this,ce))):(Te(this,it,Er).call(this),M(this,ve).removeEventListener("click",M(this,Ee)),M(this,ve).removeEventListener("keydown",M(this,ce)))},rt=new WeakSet,yr=function(){M(this,pe)||this.render(),this.isVisible?M(this,Se)&&M(this,ve).classList.add("focused"):(M(this,ve).hidden=!1,M(this,ve).style.zIndex=parseInt(M(this,ve).style.zIndex)+1e3)},it=new WeakSet,Er=function(){M(this,ve).classList.remove("focused"),!(M(this,Se)||!this.isVisible)&&(M(this,ve).hidden=!0,M(this,ve).style.zIndex=parseInt(M(this,ve).style.zIndex)-1e3)};class F extends A{constructor(re){super(re,{isRenderable:!0,ignoreBorder:!0}),this.textContent=re.data.textContent,this.textPosition=re.data.textPosition,this.annotationEditorType=u.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const re=document.createElement("div");re.classList.add("annotationTextContent"),re.setAttribute("role","comment");for(const j of this.textContent){const te=document.createElement("span");te.textContent=j,re.append(te)}this.container.append(re)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}s.FreeTextAnnotationElement=F;class L extends A{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0});de(this,ye,null)}render(){this.container.classList.add("lineAnnotation");const j=this.data,{width:te,height:oe}=b(j.rect),fe=this.svgFactory.create(te,oe,!0),be=Ie(this,ye,this.svgFactory.createElement("svg:line"));return be.setAttribute("x1",j.rect[2]-j.lineCoordinates[0]),be.setAttribute("y1",j.rect[3]-j.lineCoordinates[1]),be.setAttribute("x2",j.rect[2]-j.lineCoordinates[2]),be.setAttribute("y2",j.rect[3]-j.lineCoordinates[3]),be.setAttribute("stroke-width",j.borderStyle.width||1),be.setAttribute("stroke","transparent"),be.setAttribute("fill","transparent"),fe.append(be),this.container.append(fe),!j.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return M(this,ye)}addHighlightArea(){this.container.classList.add("highlightArea")}}ye=new WeakMap;class X extends A{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0});de(this,ge,null)}render(){this.container.classList.add("squareAnnotation");const j=this.data,{width:te,height:oe}=b(j.rect),fe=this.svgFactory.create(te,oe,!0),be=j.borderStyle.width,we=Ie(this,ge,this.svgFactory.createElement("svg:rect"));return we.setAttribute("x",be/2),we.setAttribute("y",be/2),we.setAttribute("width",te-be),we.setAttribute("height",oe-be),we.setAttribute("stroke-width",be||1),we.setAttribute("stroke","transparent"),we.setAttribute("fill","transparent"),fe.append(we),this.container.append(fe),!j.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return M(this,ge)}addHighlightArea(){this.container.classList.add("highlightArea")}}ge=new WeakMap;class V extends A{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0});de(this,Fe,null)}render(){this.container.classList.add("circleAnnotation");const j=this.data,{width:te,height:oe}=b(j.rect),fe=this.svgFactory.create(te,oe,!0),be=j.borderStyle.width,we=Ie(this,Fe,this.svgFactory.createElement("svg:ellipse"));return we.setAttribute("cx",te/2),we.setAttribute("cy",oe/2),we.setAttribute("rx",te/2-be/2),we.setAttribute("ry",oe/2-be/2),we.setAttribute("stroke-width",be||1),we.setAttribute("stroke","transparent"),we.setAttribute("fill","transparent"),fe.append(we),this.container.append(fe),!j.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return M(this,Fe)}addHighlightArea(){this.container.classList.add("highlightArea")}}Fe=new WeakMap;class H extends A{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0});de(this,Ue,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const j=this.data,{width:te,height:oe}=b(j.rect),fe=this.svgFactory.create(te,oe,!0);let be=[];for(const je of j.vertices){const Ve=je.x-j.rect[0],Ye=j.rect[3]-je.y;be.push(Ve+","+Ye)}be=be.join(" ");const we=Ie(this,Ue,this.svgFactory.createElement(this.svgElementName));return we.setAttribute("points",be),we.setAttribute("stroke-width",j.borderStyle.width||1),we.setAttribute("stroke","transparent"),we.setAttribute("fill","transparent"),fe.append(we),this.container.append(fe),!j.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return M(this,Ue)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ue=new WeakMap;class ee extends H{constructor(re){super(re),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Q extends A{constructor(re){super(re,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Z extends A{constructor(j){super(j,{isRenderable:!0,ignoreBorder:!0});de(this,dt,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=u.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const j=this.data,{width:te,height:oe}=b(j.rect),fe=this.svgFactory.create(te,oe,!0);for(const be of j.inkLists){let we=[];for(const Ve of be){const Ye=Ve.x-j.rect[0],Ke=j.rect[3]-Ve.y;we.push(`${Ye},${Ke}`)}we=we.join(" ");const je=this.svgFactory.createElement(this.svgElementName);M(this,dt).push(je),je.setAttribute("points",we),je.setAttribute("stroke-width",j.borderStyle.width||1),je.setAttribute("stroke","transparent"),je.setAttribute("fill","transparent"),!j.popupRef&&this.hasPopupData&&this._createPopup(),fe.append(je)}return this.container.append(fe),this.container}getElementsToTriggerPopup(){return M(this,dt)}addHighlightArea(){this.container.classList.add("highlightArea")}}dt=new WeakMap,s.InkAnnotationElement=Z;class K extends A{constructor(re){super(re,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class se extends A{constructor(re){super(re,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class ne extends A{constructor(re){super(re,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class le extends A{constructor(re){super(re,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class he extends A{constructor(re){super(re,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}s.StampAnnotationElement=he;class Y extends A{constructor(j){var fe;super(j,{isRenderable:!0});de(this,Ae);de(this,pt,null);const{filename:te,content:oe}=this.data.file;this.filename=(0,d.getFilenameFromUrl)(te,!0),this.content=oe,(fe=this.linkService.eventBus)==null||fe.dispatch("fileattachmentannotation",{source:this,filename:te,content:oe})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:j,data:te}=this;let oe;te.hasAppearance||te.fillAlpha===0?oe=document.createElement("div"):(oe=document.createElement("img"),oe.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(te.name)?"paperclip":"pushpin"}.svg`,te.fillAlpha&&te.fillAlpha<1&&(oe.style=`filter: opacity(${Math.round(te.fillAlpha*100)}%);`)),oe.addEventListener("dblclick",Te(this,Ae,br).bind(this)),Ie(this,pt,oe);const{isMac:fe}=u.FeatureTest.platform;return j.addEventListener("keydown",be=>{be.key==="Enter"&&(fe?be.metaKey:be.ctrlKey)&&Te(this,Ae,br).call(this)}),!te.popupRef&&this.hasPopupData?this._createPopup():oe.classList.add("popupTriggerArea"),j.append(oe),j}getElementsToTriggerPopup(){return M(this,pt)}addHighlightArea(){this.container.classList.add("highlightArea")}}pt=new WeakMap,Ae=new WeakSet,br=function(){var j;(j=this.downloadManager)==null||j.openOrDownloadData(this.container,this.content,this.filename)};class D{constructor({div:re,accessibilityManager:j,annotationCanvasMap:te,l10n:oe,page:fe,viewport:be}){de(this,Ge);de(this,Me);de(this,De,null);de(this,Ce,null);de(this,Xe,new Map);this.div=re,Ie(this,De,j),Ie(this,Ce,te),this.l10n=oe,this.page=fe,this.viewport=be,this.zIndex=0,this.l10n||(this.l10n=m.NullL10n)}async render(re){const{annotations:j}=re,te=this.div;(0,d.setLayerDimensions)(te,this.viewport);const oe=new Map,fe={data:null,layer:te,linkService:re.linkService,downloadManager:re.downloadManager,imageResourcesPath:re.imageResourcesPath||"",renderForms:re.renderForms!==!1,svgFactory:new d.DOMSVGFactory,annotationStorage:re.annotationStorage||new h.AnnotationStorage,enableScripting:re.enableScripting===!0,hasJSActions:re.hasJSActions,fieldObjects:re.fieldObjects,parent:this,elements:null};for(const be of j){if(be.noHTML)continue;const we=be.annotationType===u.AnnotationType.POPUP;if(we){const Ye=oe.get(be.id);if(!Ye)continue;fe.elements=Ye}else{const{width:Ye,height:Ke}=b(be.rect);if(Ye<=0||Ke<=0)continue}fe.data=be;const je=T.create(fe);if(!je.isRenderable)continue;if(!we&&be.popupRef){const Ye=oe.get(be.popupRef);Ye?Ye.push(je):oe.set(be.popupRef,[je])}je.annotationEditorType>0&&M(this,Xe).set(je.data.id,je);const Ve=je.render();be.hidden&&(Ve.style.visibility="hidden"),Te(this,Ge,Xr).call(this,Ve,be.id)}Te(this,Me,Tr).call(this),await this.l10n.translate(te)}update({viewport:re}){const j=this.div;this.viewport=re,(0,d.setLayerDimensions)(j,{rotation:re.rotation}),Te(this,Me,Tr).call(this),j.hidden=!1}getEditableAnnotations(){return Array.from(M(this,Xe).values())}getEditableAnnotation(re){return M(this,Xe).get(re)}}De=new WeakMap,Ce=new WeakMap,Xe=new WeakMap,Ge=new WeakSet,Xr=function(re,j){var oe;const te=re.firstChild||re;te.id=`${u.AnnotationPrefix}${j}`,this.div.append(re),(oe=M(this,De))==null||oe.moveElementInDOM(this.div,re,te,!1)},Me=new WeakSet,Tr=function(){if(!M(this,Ce))return;const re=this.div;for(const[j,te]of M(this,Ce)){const oe=re.querySelector(`[data-annotation-id="${j}"]`);if(!oe)continue;const{firstChild:fe}=oe;fe?fe.nodeName==="CANVAS"?fe.replaceWith(te):fe.before(te):oe.append(te)}M(this,Ce).clear()},s.AnnotationLayer=D},(a,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorConverters=void 0;function c(h){return Math.floor(Math.max(0,Math.min(1,h))*255).toString(16).padStart(2,"0")}function u(h){return Math.max(0,Math.min(255,255*h))}class d{static CMYK_G([p,m,f,_]){return["G",1-Math.min(1,.3*p+.59*f+.11*m+_)]}static G_CMYK([p]){return["CMYK",0,0,0,1-p]}static G_RGB([p]){return["RGB",p,p,p]}static G_rgb([p]){return p=u(p),[p,p,p]}static G_HTML([p]){const m=c(p);return`#${m}${m}${m}`}static RGB_G([p,m,f]){return["G",.3*p+.59*m+.11*f]}static RGB_rgb(p){return p.map(u)}static RGB_HTML(p){return`#${p.map(c).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([p,m,f,_]){return["RGB",1-Math.min(1,p+_),1-Math.min(1,f+_),1-Math.min(1,m+_)]}static CMYK_rgb([p,m,f,_]){return[u(1-Math.min(1,p+_)),u(1-Math.min(1,f+_)),u(1-Math.min(1,m+_))]}static CMYK_HTML(p){const m=this.CMYK_RGB(p).slice(1);return this.RGB_HTML(m)}static RGB_CMYK([p,m,f]){const _=1-p,y=1-m,E=1-f,b=Math.min(_,y,E);return["CMYK",_,y,E,b]}}s.ColorConverters=d},(a,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NullL10n=void 0,s.getL10nFallback=u;const c={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xD7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xD7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing\u2026",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};c.print_progress_percent="{{progress}}%";function u(p,m){switch(p){case"find_match_count":p=`find_match_count[${m.total===1?"one":"other"}]`;break;case"find_match_count_limit":p=`find_match_count_limit[${m.limit===1?"one":"other"}]`;break}return c[p]||""}function d(p,m){return m?p.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(f,_)=>_ in m?m[_]:"{{"+_+"}}"):p}const h={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(p,m=null,f=u(p,m)){return d(f,m)},async translate(p){}};s.NullL10n=h},(a,s,c)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaLayer=void 0;var u=c(25);class d{static setupStorage(p,m,f,_,y){const E=_.getValue(m,{value:null});switch(f.name){case"textarea":if(E.value!==null&&(p.textContent=E.value),y==="print")break;p.addEventListener("input",b=>{_.setValue(m,{value:b.target.value})});break;case"input":if(f.attributes.type==="radio"||f.attributes.type==="checkbox"){if(E.value===f.attributes.xfaOn?p.setAttribute("checked",!0):E.value===f.attributes.xfaOff&&p.removeAttribute("checked"),y==="print")break;p.addEventListener("change",b=>{_.setValue(m,{value:b.target.checked?b.target.getAttribute("xfaOn"):b.target.getAttribute("xfaOff")})})}else{if(E.value!==null&&p.setAttribute("value",E.value),y==="print")break;p.addEventListener("input",b=>{_.setValue(m,{value:b.target.value})})}break;case"select":if(E.value!==null){p.setAttribute("value",E.value);for(const b of f.children)b.attributes.value===E.value?b.attributes.selected=!0:b.attributes.hasOwnProperty("selected")&&delete b.attributes.selected}p.addEventListener("input",b=>{const T=b.target.options,A=T.selectedIndex===-1?"":T[T.selectedIndex].value;_.setValue(m,{value:A})});break}}static setAttributes({html:p,element:m,storage:f=null,intent:_,linkService:y}){const{attributes:E}=m,b=p instanceof HTMLAnchorElement;E.type==="radio"&&(E.name=`${E.name}-${_}`);for(const[T,A]of Object.entries(E))if(A!=null)switch(T){case"class":A.length&&p.setAttribute(T,A.join(" "));break;case"dataId":break;case"id":p.setAttribute("data-element-id",A);break;case"style":Object.assign(p.style,A);break;case"textContent":p.textContent=A;break;default:(!b||T!=="href"&&T!=="newWindow")&&p.setAttribute(T,A)}b&&y.addLinkAttributes(p,E.href,E.newWindow),f&&E.dataId&&this.setupStorage(p,E.dataId,m,f)}static render(p){var v;const m=p.annotationStorage,f=p.linkService,_=p.xfaHtml,y=p.intent||"display",E=document.createElement(_.name);_.attributes&&this.setAttributes({html:E,element:_,intent:y,linkService:f});const b=[[_,-1,E]],T=p.div;if(T.append(E),p.viewport){const S=`matrix(${p.viewport.transform.join(",")})`;T.style.transform=S}y!=="richText"&&T.setAttribute("class","xfaLayer xfaFont");const A=[];for(;b.length>0;){const[S,O,I]=b.at(-1);if(O+1===S.children.length){b.pop();continue}const x=S.children[++b.at(-1)[1]];if(x===null)continue;const{name:P}=x;if(P==="#text"){const C=document.createTextNode(x.value);A.push(C),I.append(C);continue}const w=(v=x==null?void 0:x.attributes)!=null&&v.xmlns?document.createElementNS(x.attributes.xmlns,P):document.createElement(P);if(I.append(w),x.attributes&&this.setAttributes({html:w,element:x,storage:m,intent:y,linkService:f}),x.children&&x.children.length>0)b.push([x,-1,w]);else if(x.value){const C=document.createTextNode(x.value);u.XfaText.shouldBuildText(P)&&A.push(C),w.append(C)}}for(const S of T.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))S.setAttribute("readOnly",!0);return{textDivs:A}}static update(p){const m=`matrix(${p.viewport.transform.join(",")})`;p.div.style.transform=m,p.div.hidden=!1}}s.XfaLayer=d},(a,s,c)=>{var _,y,E,b,T,A,v,S,O,I,x,P,w,C,k,Qr,N,Jr,L,ea,V,ta,ee,Ar,Z,na,se,vr,le,ra,Y,aa,G,ia,U,oa,q,sa,ae,qt,ie,Sr,Ee,kn,ve,Dn,_e,on,ze,Cr,pe,Mn,Oe,la,We,Ir,Qe,ca,tt,ua,at,wr,Ne,$n,ge,sn;Object.defineProperty(s,"__esModule",{value:!0}),s.InkEditor=void 0;var u=c(1),d=c(4),h=c(29),p=c(6),m=c(5);const Ue=class Ue extends d.AnnotationEditor{constructor(Ae){super({...Ae,name:"inkEditor"});de(this,k);de(this,N);de(this,L);de(this,V);de(this,ee);de(this,Z);de(this,se);de(this,le);de(this,Y);de(this,G);de(this,U);de(this,q);de(this,ae);de(this,ie);de(this,Ee);de(this,ve);de(this,_e);de(this,ze);de(this,pe);de(this,tt);de(this,at);de(this,Ne);de(this,ge);de(this,_,0);de(this,y,0);de(this,E,this.canvasPointermove.bind(this));de(this,b,this.canvasPointerleave.bind(this));de(this,T,this.canvasPointerup.bind(this));de(this,A,this.canvasPointerdown.bind(this));de(this,v,new Path2D);de(this,S,!1);de(this,O,!1);de(this,I,!1);de(this,x,null);de(this,P,0);de(this,w,0);de(this,C,null);this.color=Ae.color||null,this.thickness=Ae.thickness||null,this.opacity=Ae.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(Ae){d.AnnotationEditor.initialize(Ae,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(Ae,Pe){switch(Ae){case u.AnnotationEditorParamsType.INK_THICKNESS:Ue._defaultThickness=Pe;break;case u.AnnotationEditorParamsType.INK_COLOR:Ue._defaultColor=Pe;break;case u.AnnotationEditorParamsType.INK_OPACITY:Ue._defaultOpacity=Pe/100;break}}updateParams(Ae,Pe){switch(Ae){case u.AnnotationEditorParamsType.INK_THICKNESS:Te(this,k,Qr).call(this,Pe);break;case u.AnnotationEditorParamsType.INK_COLOR:Te(this,N,Jr).call(this,Pe);break;case u.AnnotationEditorParamsType.INK_OPACITY:Te(this,L,ea).call(this,Pe);break}}static get defaultPropertiesToUpdate(){return[[u.AnnotationEditorParamsType.INK_THICKNESS,Ue._defaultThickness],[u.AnnotationEditorParamsType.INK_COLOR,Ue._defaultColor||d.AnnotationEditor._defaultLineColor],[u.AnnotationEditorParamsType.INK_OPACITY,Math.round(Ue._defaultOpacity*100)]]}get propertiesToUpdate(){return[[u.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Ue._defaultThickness],[u.AnnotationEditorParamsType.INK_COLOR,this.color||Ue._defaultColor||d.AnnotationEditor._defaultLineColor],[u.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Ue._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Te(this,Ee,kn).call(this),Te(this,ve,Dn).call(this)),this.isAttachedToDOM||(this.parent.add(this),Te(this,_e,on).call(this)),Te(this,ge,sn).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,M(this,x).disconnect(),Ie(this,x,null),super.remove())}setParent(Ae){!this.parent&&Ae?this._uiManager.removeShouldRescale(this):this.parent&&Ae===null&&this._uiManager.addShouldRescale(this),super.setParent(Ae)}onScaleChanging(){const[Ae,Pe]=this.parentDimensions,De=this.width*Ae,Ce=this.height*Pe;this.setDimensions(De,Ce)}enableEditMode(){M(this,S)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",M(this,A)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",M(this,A)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){M(this,S)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Ie(this,S,!0),this.div.classList.add("disabled"),Te(this,ge,sn).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(Ae){this._focusEventsAllowed&&(super.focusin(Ae),this.enableEditMode())}canvasPointerdown(Ae){Ae.button!==0||!this.isInEditMode()||M(this,S)||(this.setInForeground(),Ae.preventDefault(),Ae.type!=="mouse"&&this.div.focus(),Te(this,Z,na).call(this,Ae.offsetX,Ae.offsetY))}canvasPointermove(Ae){Ae.preventDefault(),Te(this,se,vr).call(this,Ae.offsetX,Ae.offsetY)}canvasPointerup(Ae){Ae.preventDefault(),Te(this,ie,Sr).call(this,Ae)}canvasPointerleave(Ae){Te(this,ie,Sr).call(this,Ae)}get isResizable(){return!this.isEmpty()&&M(this,S)}render(){if(this.div)return this.div;let Ae,Pe;this.width&&(Ae=this.x,Pe=this.y),super.render(),d.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(et=>{var Me;return(Me=this.div)==null?void 0:Me.setAttribute("aria-label",et)});const[De,Ce,Xe,Ge]=Te(this,V,ta).call(this);if(this.setAt(De,Ce,0,0),this.setDims(Xe,Ge),Te(this,Ee,kn).call(this),this.width){const[et,Me]=this.parentDimensions;this.setAspectRatio(this.width*et,this.height*Me),this.setAt(Ae*et,Pe*Me,this.width*et,this.height*Me),Ie(this,I,!0),Te(this,_e,on).call(this),this.setDims(this.width*et,this.height*Me),Te(this,ae,qt).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Te(this,ve,Dn).call(this),this.div}setDimensions(Ae,Pe){const De=Math.round(Ae),Ce=Math.round(Pe);if(M(this,P)===De&&M(this,w)===Ce)return;Ie(this,P,De),Ie(this,w,Ce),this.canvas.style.visibility="hidden";const[Xe,Ge]=this.parentDimensions;this.width=Ae/Xe,this.height=Pe/Ge,this.fixAndSetPosition(),M(this,S)&&Te(this,ze,Cr).call(this,Ae,Pe),Te(this,_e,on).call(this),Te(this,ae,qt).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(Ae,Pe,De){var fe,be,we;if(Ae instanceof h.InkAnnotationElement)return null;const Ce=super.deserialize(Ae,Pe,De);Ce.thickness=Ae.thickness,Ce.color=u.Util.makeHexColor(...Ae.color),Ce.opacity=Ae.opacity;const[Xe,Ge]=Ce.pageDimensions,et=Ce.width*Xe,Me=Ce.height*Ge,ot=Ce.parentScale,ke=Ae.thickness/2;Ie(Ce,S,!0),Ie(Ce,P,Math.round(et)),Ie(Ce,w,Math.round(Me));const{paths:re,rect:j,rotation:te}=Ae;for(let{bezier:je}of re){je=Te(fe=Ue,Qe,ca).call(fe,je,j,te);const Ve=[];Ce.paths.push(Ve);let Ye=ot*(je[0]-ke),Ke=ot*(je[1]-ke);for(let qe=2,nt=je.length;qe<nt;qe+=6){const st=ot*(je[qe]-ke),ct=ot*(je[qe+1]-ke),ht=ot*(je[qe+2]-ke),mt=ot*(je[qe+3]-ke),_t=ot*(je[qe+4]-ke),Tt=ot*(je[qe+5]-ke);Ve.push([[Ye,Ke],[st,ct],[ht,mt],[_t,Tt]]),Ye=_t,Ke=Tt}const He=Te(this,Oe,la).call(this,Ve);Ce.bezierPath2D.push(He)}const oe=Te(be=Ce,at,wr).call(be);return Ie(Ce,y,Math.max(d.AnnotationEditor.MIN_SIZE,oe[2]-oe[0])),Ie(Ce,_,Math.max(d.AnnotationEditor.MIN_SIZE,oe[3]-oe[1])),Te(we=Ce,ze,Cr).call(we,et,Me),Ce}serialize(){if(this.isEmpty())return null;const Ae=this.getRect(0,0),Pe=d.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:u.AnnotationEditorType.INK,color:Pe,thickness:this.thickness,opacity:this.opacity,paths:Te(this,tt,ua).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,Ae),pageIndex:this.pageIndex,rect:Ae,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};_=new WeakMap,y=new WeakMap,E=new WeakMap,b=new WeakMap,T=new WeakMap,A=new WeakMap,v=new WeakMap,S=new WeakMap,O=new WeakMap,I=new WeakMap,x=new WeakMap,P=new WeakMap,w=new WeakMap,C=new WeakMap,k=new WeakSet,Qr=function(Ae){const Pe=this.thickness;this.addCommands({cmd:()=>{this.thickness=Ae,Te(this,ge,sn).call(this)},undo:()=>{this.thickness=Pe,Te(this,ge,sn).call(this)},mustExec:!0,type:u.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},N=new WeakSet,Jr=function(Ae){const Pe=this.color;this.addCommands({cmd:()=>{this.color=Ae,Te(this,ae,qt).call(this)},undo:()=>{this.color=Pe,Te(this,ae,qt).call(this)},mustExec:!0,type:u.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},L=new WeakSet,ea=function(Ae){Ae/=100;const Pe=this.opacity;this.addCommands({cmd:()=>{this.opacity=Ae,Te(this,ae,qt).call(this)},undo:()=>{this.opacity=Pe,Te(this,ae,qt).call(this)},mustExec:!0,type:u.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},V=new WeakSet,ta=function(){const{parentRotation:Ae,parentDimensions:[Pe,De]}=this;switch(Ae){case 90:return[0,De,De,Pe];case 180:return[Pe,De,Pe,De];case 270:return[Pe,0,De,Pe];default:return[0,0,Pe,De]}},ee=new WeakSet,Ar=function(){const{ctx:Ae,color:Pe,opacity:De,thickness:Ce,parentScale:Xe,scaleFactor:Ge}=this;Ae.lineWidth=Ce*Xe/Ge,Ae.lineCap="round",Ae.lineJoin="round",Ae.miterLimit=10,Ae.strokeStyle=`${Pe}${(0,m.opacityToHex)(De)}`},Z=new WeakSet,na=function(Ae,Pe){this.canvas.addEventListener("contextmenu",p.noContextMenu),this.canvas.addEventListener("pointerleave",M(this,b)),this.canvas.addEventListener("pointermove",M(this,E)),this.canvas.addEventListener("pointerup",M(this,T)),this.canvas.removeEventListener("pointerdown",M(this,A)),this.isEditing=!0,M(this,I)||(Ie(this,I,!0),Te(this,_e,on).call(this),this.thickness||(this.thickness=Ue._defaultThickness),this.color||(this.color=Ue._defaultColor||d.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Ue._defaultOpacity)),this.currentPath.push([Ae,Pe]),Ie(this,O,!1),Te(this,ee,Ar).call(this),Ie(this,C,()=>{Te(this,G,ia).call(this),M(this,C)&&window.requestAnimationFrame(M(this,C))}),window.requestAnimationFrame(M(this,C))},se=new WeakSet,vr=function(Ae,Pe){const[De,Ce]=this.currentPath.at(-1);if(this.currentPath.length>1&&Ae===De&&Pe===Ce)return;const Xe=this.currentPath;let Ge=M(this,v);if(Xe.push([Ae,Pe]),Ie(this,O,!0),Xe.length<=2){Ge.moveTo(...Xe[0]),Ge.lineTo(Ae,Pe);return}Xe.length===3&&(Ie(this,v,Ge=new Path2D),Ge.moveTo(...Xe[0])),Te(this,U,oa).call(this,Ge,...Xe.at(-3),...Xe.at(-2),Ae,Pe)},le=new WeakSet,ra=function(){if(this.currentPath.length===0)return;const Ae=this.currentPath.at(-1);M(this,v).lineTo(...Ae)},Y=new WeakSet,aa=function(Ae,Pe){Ie(this,C,null),Ae=Math.min(Math.max(Ae,0),this.canvas.width),Pe=Math.min(Math.max(Pe,0),this.canvas.height),Te(this,se,vr).call(this,Ae,Pe),Te(this,le,ra).call(this);let De;if(this.currentPath.length!==1)De=Te(this,q,sa).call(this);else{const Me=[Ae,Pe];De=[[Me,Me.slice(),Me.slice(),Me]]}const Ce=M(this,v),Xe=this.currentPath;this.currentPath=[],Ie(this,v,new Path2D);const Ge=()=>{this.allRawPaths.push(Xe),this.paths.push(De),this.bezierPath2D.push(Ce),this.rebuild()},et=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Te(this,Ee,kn).call(this),Te(this,ve,Dn).call(this)),Te(this,ge,sn).call(this))};this.addCommands({cmd:Ge,undo:et,mustExec:!0})},G=new WeakSet,ia=function(){if(!M(this,O))return;Ie(this,O,!1);const Ae=Math.ceil(this.thickness*this.parentScale),Pe=this.currentPath.slice(-3),De=Pe.map(Ge=>Ge[0]),Ce=Pe.map(Ge=>Ge[1]);Math.min(...De)-Ae,Math.max(...De)+Ae,Math.min(...Ce)-Ae,Math.max(...Ce)+Ae;const{ctx:Xe}=this;Xe.save(),Xe.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Ge of this.bezierPath2D)Xe.stroke(Ge);Xe.stroke(M(this,v)),Xe.restore()},U=new WeakSet,oa=function(Ae,Pe,De,Ce,Xe,Ge,et){const Me=(Pe+Ce)/2,ot=(De+Xe)/2,ke=(Ce+Ge)/2,re=(Xe+et)/2;Ae.bezierCurveTo(Me+2*(Ce-Me)/3,ot+2*(Xe-ot)/3,ke+2*(Ce-ke)/3,re+2*(Xe-re)/3,ke,re)},q=new WeakSet,sa=function(){const Ae=this.currentPath;if(Ae.length<=2)return[[Ae[0],Ae[0],Ae.at(-1),Ae.at(-1)]];const Pe=[];let De,[Ce,Xe]=Ae[0];for(De=1;De<Ae.length-2;De++){const[j,te]=Ae[De],[oe,fe]=Ae[De+1],be=(j+oe)/2,we=(te+fe)/2,je=[Ce+2*(j-Ce)/3,Xe+2*(te-Xe)/3],Ve=[be+2*(j-be)/3,we+2*(te-we)/3];Pe.push([[Ce,Xe],je,Ve,[be,we]]),[Ce,Xe]=[be,we]}const[Ge,et]=Ae[De],[Me,ot]=Ae[De+1],ke=[Ce+2*(Ge-Ce)/3,Xe+2*(et-Xe)/3],re=[Me+2*(Ge-Me)/3,ot+2*(et-ot)/3];return Pe.push([[Ce,Xe],ke,re,[Me,ot]]),Pe},ae=new WeakSet,qt=function(){if(this.isEmpty()){Te(this,pe,Mn).call(this);return}Te(this,ee,Ar).call(this);const{canvas:Ae,ctx:Pe}=this;Pe.setTransform(1,0,0,1,0,0),Pe.clearRect(0,0,Ae.width,Ae.height),Te(this,pe,Mn).call(this);for(const De of this.bezierPath2D)Pe.stroke(De)},ie=new WeakSet,Sr=function(Ae){this.canvas.removeEventListener("pointerleave",M(this,b)),this.canvas.removeEventListener("pointermove",M(this,E)),this.canvas.removeEventListener("pointerup",M(this,T)),this.canvas.addEventListener("pointerdown",M(this,A)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",p.noContextMenu)},10),Te(this,Y,aa).call(this,Ae.offsetX,Ae.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Ee=new WeakSet,kn=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",d.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(Ae=>{var Pe;return(Pe=this.canvas)==null?void 0:Pe.setAttribute("aria-label",Ae)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},ve=new WeakSet,Dn=function(){Ie(this,x,new ResizeObserver(Ae=>{const Pe=Ae[0].contentRect;Pe.width&&Pe.height&&this.setDimensions(Pe.width,Pe.height)})),M(this,x).observe(this.div)},_e=new WeakSet,on=function(){if(!M(this,I))return;const[Ae,Pe]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*Ae),this.canvas.height=Math.ceil(this.height*Pe),Te(this,pe,Mn).call(this)},ze=new WeakSet,Cr=function(Ae,Pe){const De=Te(this,Ne,$n).call(this),Ce=(Ae-De)/M(this,y),Xe=(Pe-De)/M(this,_);this.scaleFactor=Math.min(Ce,Xe)},pe=new WeakSet,Mn=function(){const Ae=Te(this,Ne,$n).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Ae,this.translationY*this.scaleFactor+Ae)},Oe=new WeakSet,la=function(Ae){const Pe=new Path2D;for(let De=0,Ce=Ae.length;De<Ce;De++){const[Xe,Ge,et,Me]=Ae[De];De===0&&Pe.moveTo(...Xe),Pe.bezierCurveTo(Ge[0],Ge[1],et[0],et[1],Me[0],Me[1])}return Pe},We=new WeakSet,Ir=function(Ae,Pe,De){const[Ce,Xe,Ge,et]=Pe;switch(De){case 0:for(let Me=0,ot=Ae.length;Me<ot;Me+=2)Ae[Me]+=Ce,Ae[Me+1]=et-Ae[Me+1];break;case 90:for(let Me=0,ot=Ae.length;Me<ot;Me+=2){const ke=Ae[Me];Ae[Me]=Ae[Me+1]+Ce,Ae[Me+1]=ke+Xe}break;case 180:for(let Me=0,ot=Ae.length;Me<ot;Me+=2)Ae[Me]=Ge-Ae[Me],Ae[Me+1]+=Xe;break;case 270:for(let Me=0,ot=Ae.length;Me<ot;Me+=2){const ke=Ae[Me];Ae[Me]=Ge-Ae[Me+1],Ae[Me+1]=et-ke}break;default:throw new Error("Invalid rotation")}return Ae},Qe=new WeakSet,ca=function(Ae,Pe,De){const[Ce,Xe,Ge,et]=Pe;switch(De){case 0:for(let Me=0,ot=Ae.length;Me<ot;Me+=2)Ae[Me]-=Ce,Ae[Me+1]=et-Ae[Me+1];break;case 90:for(let Me=0,ot=Ae.length;Me<ot;Me+=2){const ke=Ae[Me];Ae[Me]=Ae[Me+1]-Xe,Ae[Me+1]=ke-Ce}break;case 180:for(let Me=0,ot=Ae.length;Me<ot;Me+=2)Ae[Me]=Ge-Ae[Me],Ae[Me+1]-=Xe;break;case 270:for(let Me=0,ot=Ae.length;Me<ot;Me+=2){const ke=Ae[Me];Ae[Me]=et-Ae[Me+1],Ae[Me+1]=Ge-ke}break;default:throw new Error("Invalid rotation")}return Ae},tt=new WeakSet,ua=function(Ae,Pe,De,Ce){var ot,ke;const Xe=[],Ge=this.thickness/2,et=Ae*Pe+Ge,Me=Ae*De+Ge;for(const re of this.paths){const j=[],te=[];for(let oe=0,fe=re.length;oe<fe;oe++){const[be,we,je,Ve]=re[oe],Ye=Ae*be[0]+et,Ke=Ae*be[1]+Me,He=Ae*we[0]+et,qe=Ae*we[1]+Me,nt=Ae*je[0]+et,st=Ae*je[1]+Me,ct=Ae*Ve[0]+et,ht=Ae*Ve[1]+Me;oe===0&&(j.push(Ye,Ke),te.push(Ye,Ke)),j.push(He,qe,nt,st,ct,ht),te.push(He,qe),oe===fe-1&&te.push(ct,ht)}Xe.push({bezier:Te(ot=Ue,We,Ir).call(ot,j,Ce,this.rotation),points:Te(ke=Ue,We,Ir).call(ke,te,Ce,this.rotation)})}return Xe},at=new WeakSet,wr=function(){let Ae=1/0,Pe=-1/0,De=1/0,Ce=-1/0;for(const Xe of this.paths)for(const[Ge,et,Me,ot]of Xe){const ke=u.Util.bezierBoundingBox(...Ge,...et,...Me,...ot);Ae=Math.min(Ae,ke[0]),De=Math.min(De,ke[1]),Pe=Math.max(Pe,ke[2]),Ce=Math.max(Ce,ke[3])}return[Ae,De,Pe,Ce]},Ne=new WeakSet,$n=function(){return M(this,S)?Math.ceil(this.thickness*this.parentScale):0},ge=new WeakSet,sn=function(Ae=!1){if(this.isEmpty())return;if(!M(this,S)){Te(this,ae,qt).call(this);return}const Pe=Te(this,at,wr).call(this),De=Te(this,Ne,$n).call(this);Ie(this,y,Math.max(d.AnnotationEditor.MIN_SIZE,Pe[2]-Pe[0])),Ie(this,_,Math.max(d.AnnotationEditor.MIN_SIZE,Pe[3]-Pe[1]));const Ce=Math.ceil(De+M(this,y)*this.scaleFactor),Xe=Math.ceil(De+M(this,_)*this.scaleFactor),[Ge,et]=this.parentDimensions;this.width=Ce/Ge,this.height=Xe/et,this.setAspectRatio(Ce,Xe);const Me=this.translationX,ot=this.translationY;this.translationX=-Pe[0],this.translationY=-Pe[1],Te(this,_e,on).call(this),Te(this,ae,qt).call(this),Ie(this,P,Ce),Ie(this,w,Xe),this.setDims(Ce,Xe);const ke=Ae?De/this.scaleFactor/2:0;this.translate(Me-this.translationX-ke,ot-this.translationY-ke)},de(Ue,Oe),de(Ue,We),de(Ue,Qe),Re(Ue,"_defaultColor",null),Re(Ue,"_defaultOpacity",1),Re(Ue,"_defaultThickness",1),Re(Ue,"_type","ink");let f=Ue;s.InkEditor=f},(a,s,c)=>{var f,_,y,E,b,T,A,v,S,O,I,gn,P,_n,C,Ln,R,xr,F,da,X,ha,H,Or,Q,Fn,K,pa;Object.defineProperty(s,"__esModule",{value:!0}),s.StampEditor=void 0;var u=c(1),d=c(4),h=c(6),p=c(29);const ne=class ne extends d.AnnotationEditor{constructor(Y){super({...Y,name:"stampEditor"});de(this,I);de(this,P);de(this,C);de(this,R);de(this,F);de(this,X);de(this,H);de(this,Q);de(this,K);de(this,f,null);de(this,_,null);de(this,y,null);de(this,E,null);de(this,b,null);de(this,T,null);de(this,A,null);de(this,v,null);de(this,S,!1);de(this,O,!1);Ie(this,E,Y.bitmapUrl),Ie(this,b,Y.bitmapFile)}static initialize(Y){d.AnnotationEditor.initialize(Y)}static get supportedTypes(){const Y=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,u.shadow)(this,"supportedTypes",Y.map(D=>`image/${D}`))}static get supportedTypesStr(){return(0,u.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(Y){return this.supportedTypes.includes(Y)}static paste(Y,D){D.pasteEditor(u.AnnotationEditorType.STAMP,{bitmapFile:Y.getAsFile()})}remove(){var Y,D;M(this,_)&&(Ie(this,f,null),this._uiManager.imageManager.deleteId(M(this,_)),(Y=M(this,T))==null||Y.remove(),Ie(this,T,null),(D=M(this,A))==null||D.disconnect(),Ie(this,A,null)),super.remove()}rebuild(){if(!this.parent){M(this,_)&&Te(this,C,Ln).call(this);return}super.rebuild(),this.div!==null&&(M(this,_)&&Te(this,C,Ln).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(M(this,y)||M(this,f)||M(this,E)||M(this,b))}get isResizable(){return!0}render(){if(this.div)return this.div;let Y,D;if(this.width&&(Y=this.x,D=this.y),super.render(),this.div.hidden=!0,M(this,f)?Te(this,R,xr).call(this):Te(this,C,Ln).call(this),this.width){const[G,B]=this.parentDimensions;this.setAt(Y*G,D*B,this.width*G,this.height*B)}return this.div}static deserialize(Y,D,G){if(Y instanceof p.StampAnnotationElement)return null;const B=super.deserialize(Y,D,G),{rect:U,bitmapUrl:W,bitmapId:q,isSvg:J,accessibilityData:ae}=Y;q&&G.imageManager.isValidId(q)?Ie(B,_,q):Ie(B,E,W),Ie(B,S,J);const[ce,ie]=B.pageDimensions;return B.width=(U[2]-U[0])/ce,B.height=(U[3]-U[1])/ie,ae&&(B.altTextData=ae),B}serialize(Y=!1,D=null){if(this.isEmpty())return null;const G={annotationType:u.AnnotationEditorType.STAMP,bitmapId:M(this,_),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:M(this,S),structTreeParentId:this._structTreeParentId};if(Y)return G.bitmapUrl=Te(this,Q,Fn).call(this,!0),G.accessibilityData=this.altTextData,G;const{decorative:B,altText:U}=this.altTextData;if(!B&&U&&(G.accessibilityData={type:"Figure",alt:U}),D===null)return G;D.stamps||(D.stamps=new Map);const W=M(this,S)?(G.rect[2]-G.rect[0])*(G.rect[3]-G.rect[1]):null;if(!D.stamps.has(M(this,_)))D.stamps.set(M(this,_),{area:W,serialized:G}),G.bitmap=Te(this,Q,Fn).call(this,!1);else if(M(this,S)){const q=D.stamps.get(M(this,_));W>q.area&&(q.area=W,q.serialized.bitmap.close(),q.serialized.bitmap=Te(this,Q,Fn).call(this,!1))}return G}};f=new WeakMap,_=new WeakMap,y=new WeakMap,E=new WeakMap,b=new WeakMap,T=new WeakMap,A=new WeakMap,v=new WeakMap,S=new WeakMap,O=new WeakMap,I=new WeakSet,gn=function(Y,D=!1){if(!Y){this.remove();return}Ie(this,f,Y.bitmap),D||(Ie(this,_,Y.id),Ie(this,S,Y.isSvg)),Te(this,R,xr).call(this)},P=new WeakSet,_n=function(){Ie(this,y,null),this._uiManager.enableWaiting(!1),M(this,T)&&this.div.focus()},C=new WeakSet,Ln=function(){if(M(this,_)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(M(this,_)).then(D=>Te(this,I,gn).call(this,D,!0)).finally(()=>Te(this,P,_n).call(this));return}if(M(this,E)){const D=M(this,E);Ie(this,E,null),this._uiManager.enableWaiting(!0),Ie(this,y,this._uiManager.imageManager.getFromUrl(D).then(G=>Te(this,I,gn).call(this,G)).finally(()=>Te(this,P,_n).call(this)));return}if(M(this,b)){const D=M(this,b);Ie(this,b,null),this._uiManager.enableWaiting(!0),Ie(this,y,this._uiManager.imageManager.getFromFile(D).then(G=>Te(this,I,gn).call(this,G)).finally(()=>Te(this,P,_n).call(this)));return}const Y=document.createElement("input");Y.type="file",Y.accept=ne.supportedTypesStr,Ie(this,y,new Promise(D=>{Y.addEventListener("change",async()=>{if(!Y.files||Y.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const G=await this._uiManager.imageManager.getFromFile(Y.files[0]);Te(this,I,gn).call(this,G)}D()}),Y.addEventListener("cancel",()=>{this.remove(),D()})}).finally(()=>Te(this,P,_n).call(this))),Y.click()},R=new WeakSet,xr=function(){const{div:Y}=this;let{width:D,height:G}=M(this,f);const[B,U]=this.pageDimensions,W=.75;if(this.width)D=this.width*B,G=this.height*U;else if(D>W*B||G>W*U){const ce=Math.min(W*B/D,W*U/G);D*=ce,G*=ce}const[q,J]=this.parentDimensions;this.setDims(D*q/B,G*J/U),this._uiManager.enableWaiting(!1);const ae=Ie(this,T,document.createElement("canvas"));Y.append(ae),Y.hidden=!1,Te(this,H,Or).call(this,D,G),Te(this,K,pa).call(this),M(this,O)||(this.parent.addUndoableEditor(this),Ie(this,O,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},F=new WeakSet,da=function(Y,D){var W;const[G,B]=this.parentDimensions;this.width=Y/G,this.height=D/B,this.setDims(Y,D),(W=this._initialOptions)!=null&&W.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,M(this,v)!==null&&clearTimeout(M(this,v)),Ie(this,v,setTimeout(()=>{Ie(this,v,null),Te(this,H,Or).call(this,Y,D)},200))},X=new WeakSet,ha=function(Y,D){const{width:G,height:B}=M(this,f);let U=G,W=B,q=M(this,f);for(;U>2*Y||W>2*D;){const J=U,ae=W;U>2*Y&&(U=U>=16384?Math.floor(U/2)-1:Math.ceil(U/2)),W>2*D&&(W=W>=16384?Math.floor(W/2)-1:Math.ceil(W/2));const ce=new OffscreenCanvas(U,W);ce.getContext("2d").drawImage(q,0,0,J,ae,0,0,U,W),q=ce.transferToImageBitmap()}return q},H=new WeakSet,Or=function(Y,D){Y=Math.ceil(Y),D=Math.ceil(D);const G=M(this,T);if(!G||G.width===Y&&G.height===D)return;G.width=Y,G.height=D;const B=M(this,S)?M(this,f):Te(this,X,ha).call(this,Y,D),U=G.getContext("2d");U.filter=this._uiManager.hcmFilter,U.drawImage(B,0,0,B.width,B.height,0,0,Y,D)},Q=new WeakSet,Fn=function(Y){if(Y){if(M(this,S)){const G=this._uiManager.imageManager.getSvgUrl(M(this,_));if(G)return G}const D=document.createElement("canvas");return{width:D.width,height:D.height}=M(this,f),D.getContext("2d").drawImage(M(this,f),0,0),D.toDataURL()}if(M(this,S)){const[D,G]=this.pageDimensions,B=Math.round(this.width*D*h.PixelsPerInch.PDF_TO_CSS_UNITS),U=Math.round(this.height*G*h.PixelsPerInch.PDF_TO_CSS_UNITS),W=new OffscreenCanvas(B,U);return W.getContext("2d").drawImage(M(this,f),0,0,M(this,f).width,M(this,f).height,0,0,B,U),W.transferToImageBitmap()}return structuredClone(M(this,f))},K=new WeakSet,pa=function(){Ie(this,A,new ResizeObserver(Y=>{const D=Y[0].contentRect;D.width&&D.height&&Te(this,F,da).call(this,D.width,D.height)})),M(this,A).observe(this.div)},Re(ne,"_type","stamp");let m=ne;s.StampEditor=m}],__webpack_module_cache__={};function __w_pdfjs_require__(a){var s=__webpack_module_cache__[a];if(s!==void 0)return s.exports;var c=__webpack_module_cache__[a]={exports:{}};return __webpack_modules__[a](c,c.exports,__w_pdfjs_require__),c.exports}var __webpack_exports__={};return(()=>{var a=__webpack_exports__;Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"AbortException",{enumerable:!0,get:function(){return s.AbortException}}),Object.defineProperty(a,"AnnotationEditorLayer",{enumerable:!0,get:function(){return h.AnnotationEditorLayer}}),Object.defineProperty(a,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return s.AnnotationEditorParamsType}}),Object.defineProperty(a,"AnnotationEditorType",{enumerable:!0,get:function(){return s.AnnotationEditorType}}),Object.defineProperty(a,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return p.AnnotationEditorUIManager}}),Object.defineProperty(a,"AnnotationLayer",{enumerable:!0,get:function(){return m.AnnotationLayer}}),Object.defineProperty(a,"AnnotationMode",{enumerable:!0,get:function(){return s.AnnotationMode}}),Object.defineProperty(a,"CMapCompressionType",{enumerable:!0,get:function(){return s.CMapCompressionType}}),Object.defineProperty(a,"DOMSVGFactory",{enumerable:!0,get:function(){return u.DOMSVGFactory}}),Object.defineProperty(a,"FeatureTest",{enumerable:!0,get:function(){return s.FeatureTest}}),Object.defineProperty(a,"GlobalWorkerOptions",{enumerable:!0,get:function(){return f.GlobalWorkerOptions}}),Object.defineProperty(a,"ImageKind",{enumerable:!0,get:function(){return s.ImageKind}}),Object.defineProperty(a,"InvalidPDFException",{enumerable:!0,get:function(){return s.InvalidPDFException}}),Object.defineProperty(a,"MissingPDFException",{enumerable:!0,get:function(){return s.MissingPDFException}}),Object.defineProperty(a,"OPS",{enumerable:!0,get:function(){return s.OPS}}),Object.defineProperty(a,"PDFDataRangeTransport",{enumerable:!0,get:function(){return c.PDFDataRangeTransport}}),Object.defineProperty(a,"PDFDateString",{enumerable:!0,get:function(){return u.PDFDateString}}),Object.defineProperty(a,"PDFWorker",{enumerable:!0,get:function(){return c.PDFWorker}}),Object.defineProperty(a,"PasswordResponses",{enumerable:!0,get:function(){return s.PasswordResponses}}),Object.defineProperty(a,"PermissionFlag",{enumerable:!0,get:function(){return s.PermissionFlag}}),Object.defineProperty(a,"PixelsPerInch",{enumerable:!0,get:function(){return u.PixelsPerInch}}),Object.defineProperty(a,"PromiseCapability",{enumerable:!0,get:function(){return s.PromiseCapability}}),Object.defineProperty(a,"RenderingCancelledException",{enumerable:!0,get:function(){return u.RenderingCancelledException}}),Object.defineProperty(a,"SVGGraphics",{enumerable:!0,get:function(){return c.SVGGraphics}}),Object.defineProperty(a,"UnexpectedResponseException",{enumerable:!0,get:function(){return s.UnexpectedResponseException}}),Object.defineProperty(a,"Util",{enumerable:!0,get:function(){return s.Util}}),Object.defineProperty(a,"VerbosityLevel",{enumerable:!0,get:function(){return s.VerbosityLevel}}),Object.defineProperty(a,"XfaLayer",{enumerable:!0,get:function(){return _.XfaLayer}}),Object.defineProperty(a,"build",{enumerable:!0,get:function(){return c.build}}),Object.defineProperty(a,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return s.createValidAbsoluteUrl}}),Object.defineProperty(a,"getDocument",{enumerable:!0,get:function(){return c.getDocument}}),Object.defineProperty(a,"getFilenameFromUrl",{enumerable:!0,get:function(){return u.getFilenameFromUrl}}),Object.defineProperty(a,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return u.getPdfFilenameFromUrl}}),Object.defineProperty(a,"getXfaPageViewport",{enumerable:!0,get:function(){return u.getXfaPageViewport}}),Object.defineProperty(a,"isDataScheme",{enumerable:!0,get:function(){return u.isDataScheme}}),Object.defineProperty(a,"isPdfFile",{enumerable:!0,get:function(){return u.isPdfFile}}),Object.defineProperty(a,"loadScript",{enumerable:!0,get:function(){return u.loadScript}}),Object.defineProperty(a,"noContextMenu",{enumerable:!0,get:function(){return u.noContextMenu}}),Object.defineProperty(a,"normalizeUnicode",{enumerable:!0,get:function(){return s.normalizeUnicode}}),Object.defineProperty(a,"renderTextLayer",{enumerable:!0,get:function(){return d.renderTextLayer}}),Object.defineProperty(a,"setLayerDimensions",{enumerable:!0,get:function(){return u.setLayerDimensions}}),Object.defineProperty(a,"shadow",{enumerable:!0,get:function(){return s.shadow}}),Object.defineProperty(a,"updateTextLayer",{enumerable:!0,get:function(){return d.updateTextLayer}}),Object.defineProperty(a,"version",{enumerable:!0,get:function(){return c.version}});var s=__w_pdfjs_require__(1),c=__w_pdfjs_require__(2),u=__w_pdfjs_require__(6),d=__w_pdfjs_require__(26),h=__w_pdfjs_require__(27),p=__w_pdfjs_require__(5),m=__w_pdfjs_require__(29),f=__w_pdfjs_require__(14),_=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),PDFJS=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjsWorker=new URL("pdfjs-dist/build/pdf.worker.js",self.location.href).toString();pdfExports.GlobalWorkerOptions.workerSrc=pdfjsWorker;const pdfDist=PDFJS,getPdf=async a=>{const s=pdfDist.getDocument({data:a,useWorkerFetch:!1,isEvalSupported:!1,useSystemFonts:!0});return s.onPassword=c=>{const u=prompt("Enter the password: ");if(!u)throw new Error("Password required to open the PDF.");c(u)},await s.promise},processPdf=async a=>{const s=await(await fetch(a)).arrayBuffer();return await getPdf(s)},isTweet=a=>{const s=/twitter\.com\/[a-zA-Z0-9_]+\/status\/[0-9]+/g,c=/x\.com\/[a-zA-Z0-9_]+\/status\/[0-9]+/g;return s.test(a)||c.test(a)},isTwitterTimeline=a=>a==="https://twitter.com/home"||a==="https://x.com/home",parseTwitterTimeline=a=>{const s=load(a),c=s("[data-testid=tweetText]"),u=s("[data-testid=User-Name]");return c.map((d,h)=>{const p=s(h).text();return{author:s(u[d]).text(),post:p}}).get().map(d=>`## Author: ${d.author}

${d.post}

---

`).filter((d,h,p)=>p.indexOf(d)===h).join(`
`)},parseTweet=a=>{const s=load(a),c=s("[data-testid=tweetText]"),u=s("[data-testid=User-Name]");return c.map((d,h)=>{const p=s(h).text();return{author:s(u[d]).text(),post:p,isReply:d!==0}}).get().map(d=>`##Author: ${d.author}

${d.isReply?"Reply:":"Post:"} ${d.post}

---

`).join(`
`)},isGoogleDocs=a=>/docs\.google\.com\/document/g.test(a),getGoogleDocs=()=>{var a,s;try{const c=function(u,d,h,p=Object.getOwnPropertyNames(u)){const m=new Set,f=[];let _=0;const y=(E,b,T,A=0)=>{if(_++,E==="prototype"||b instanceof Window||A>h)return;const v=[...T,E];try{if(d(E,b)){f.push({path:v,value:b});return}}catch{}b!=null&&!m.has(b)&&(m.add(b),Array.isArray(b)?b.forEach((S,O)=>{try{y(O.toString(),S,v,A+1)}catch{}}):b instanceof Object&&(b&&b.nodeType===1&&typeof b.nodeName=="string"?Object.getOwnPropertyNames(u):Object.getOwnPropertyNames(b)).forEach(S=>{try{y(S,b[S],v,A+1)}catch{}}))};return p.forEach(E=>{try{y(E,u[E],[])}catch{}}),{results:f,iterations:_}}(window.KX_kixApp,(u,d)=>d&&d.toString().charAt(0)==="",5);return(s=(a=c.results)==null?void 0:a[0])!=null&&s.value?{content:c.results[0].value}:{content:null}}catch{return{content:null}}},parseGoogleDocs=async()=>{const a=new Promise(c=>{browser.tabs.query({active:!0,currentWindow:!0}).then(async u=>{const d=u[0],h=await browser.scripting.executeScript({target:{tabId:d.id},func:getGoogleDocs});h.length>0&&c(h[0].result)})}),{content:s}=await a;return s},cleanUnwantedUnicode=a=>{const s=/[\u200B-\u200D\uFEFF]/g;return a.replace(s,"").trim()},_getHtml=()=>{var u,d;const a=window.location.href,s=document.title,c=((u=document.querySelector('link[rel="icon"]'))==null?void 0:u.getAttribute("href"))||((d=document.querySelector('link[rel="shortcut icon"]'))==null?void 0:d.getAttribute("href"))||`${window.location.origin}/favicon.ico`;return document.contentType==="application/pdf"?{url:a,title:s,content:"",type:"pdf",favicon:c}:{content:document.documentElement.outerHTML,url:a,title:s,type:"html",favicon:c}},getDataFromSpecificTab=async a=>{logger.debug("\u5F00\u59CB\u83B7\u53D6\u6307\u5B9A\u6807\u7B7E\u9875\u5185\u5BB9",{tabId:a});const s=await new Promise((f,_)=>{try{logger.debug("\u4F7F\u7528 Firefox/\u5176\u4ED6\u6D4F\u89C8\u5668 API \u83B7\u53D6\u6307\u5B9A\u6807\u7B7E\u9875\u5185\u5BB9",{tabId:a}),browser.scripting.executeScript({target:{tabId:a},func:_getHtml}).then(y=>{var E;y&&y.length>0?(logger.debug("\u6210\u529F\u6267\u884C\u5185\u5BB9\u811A\u672C\u83B7\u53D6HTML",{tabId:a,resultType:y[0].result.type,contentLength:(E=y[0].result.content)==null?void 0:E.length}),f(y[0].result)):(logger.error("\u5185\u5BB9\u811A\u672C\u6267\u884C\u7ED3\u679C\u4E3A\u7A7A",{tabId:a}),_(new Error("\u5185\u5BB9\u811A\u672C\u6267\u884C\u7ED3\u679C\u4E3A\u7A7A")))}).catch(y=>{logger.error("\u6267\u884C\u5185\u5BB9\u811A\u672C\u5931\u8D25",{tabId:a,error:y}),browser.tabs.get(a).then(E=>{logger.info("\u68C0\u6D4B\u5230 Firefox PDF \u9875\u9762\uFF0C\u4F7F\u7528\u66FF\u4EE3\u65B9\u6CD5\u83B7\u53D6\u5185\u5BB9",{tabId:a});const b={url:E.url,title:E.title||"PDF Document",content:"",type:"pdf",favicon:E.favIconUrl};logger.debug("\u4F7F\u7528\u66FF\u4EE3\u65B9\u6CD5\u83B7\u53D6 PDF \u5185\u5BB9\u6210\u529F",{tabId:a,url:E.url}),f(b)}).catch(E=>{logger.error("\u83B7\u53D6\u6807\u7B7E\u9875\u4FE1\u606F\u5931\u8D25",{tabId:a,error:E}),_(E)})})}catch(y){logger.error("\u83B7\u53D6\u6307\u5B9A\u6807\u7B7E\u9875\u5185\u5BB9\u65F6\u53D1\u751F\u5F02\u5E38",{tabId:a,error:y}),_(y)}});logger.debug("\u6210\u529F\u83B7\u53D6\u6307\u5B9A\u6807\u7B7E\u9875\u57FA\u672C\u6570\u636E",{tabId:a,url:s.url,title:s.title,type:s.type});const{content:c,type:u,url:d,title:h,favicon:p}=s;if(u==="pdf"){logger.debug("\u68C0\u6D4B\u5230PDF\u6587\u4EF6\uFF0C\u5F00\u59CB\u5904\u7406PDF\u5185\u5BB9",{tabId:a,url:d});try{const f=await fetch(d);if(!f.ok)throw logger.error("\u83B7\u53D6PDF\u6587\u4EF6\u5931\u8D25",{tabId:a,status:f.status,statusText:f.statusText}),new Error(`\u83B7\u53D6PDF\u6587\u4EF6\u5931\u8D25: ${f.status} ${f.statusText}`);const _=await f.arrayBuffer();logger.debug("\u6210\u529F\u83B7\u53D6PDF\u6587\u4EF6\u6570\u636E",{tabId:a,dataSize:_.byteLength});let y=[];const E=await getPdf(_);logger.info("\u6210\u529F\u89E3\u6790PDF\u6587\u4EF6",{tabId:a,numPages:E.numPages});for(let b=1;b<=E.numPages;b+=1){logger.debug(`\u5904\u7406PDF\u7B2C${b}\u9875`,{tabId:a});const T=await(await E.getPage(b)).getTextContent();if(!T||T.items.length===0){logger.debug(`PDF\u7B2C${b}\u9875\u6CA1\u6709\u6587\u672C\u5185\u5BB9\uFF0C\u8DF3\u8FC7`,{tabId:a});continue}const A=T.items.map(v=>v.str).join(`
`).replace(/\x00/g,"").trim();y.push({content:A,page:b}),logger.debug(`\u6210\u529F\u63D0\u53D6PDF\u7B2C${b}\u9875\u6587\u672C`,{tabId:a,textLength:A.length})}return logger.info("PDF\u5904\u7406\u5B8C\u6210",{tabId:a,totalPages:y.length}),{url:d,title:h,content:"",pdf:y,type:"pdf",favicon:p}}catch(f){return logger.error("\u5904\u7406PDF\u6587\u4EF6\u65F6\u51FA\u9519",{tabId:a,error:f}),{url:d,title:h,content:"PDF\u5904\u7406\u5931\u8D25\uFF0C\u65E0\u6CD5\u63D0\u53D6\u5185\u5BB9",pdf:[],type:"pdf",favicon:p}}}if(isTwitterTimeline(d)){logger.debug("\u68C0\u6D4B\u5230Twitter\u65F6\u95F4\u7EBF\u9875\u9762\uFF0C\u4F7F\u7528\u4E13\u7528\u89E3\u6790\u5668",{tabId:a,url:d});const f=parseTwitterTimeline(c);return logger.info("\u6210\u529F\u89E3\u6790Twitter\u65F6\u95F4\u7EBF\u5185\u5BB9",{tabId:a,contentLength:f==null?void 0:f.length}),{url:d,title:h,content:f,type:"html",pdf:[],favicon:p}}else if(isTweet(d)){logger.debug("\u68C0\u6D4B\u5230Twitter\u63A8\u6587\u9875\u9762\uFF0C\u4F7F\u7528\u4E13\u7528\u89E3\u6790\u5668",{tabId:a,url:d});const f=parseTweet(c);return logger.info("\u6210\u529F\u89E3\u6790Twitter\u63A8\u6587\u5185\u5BB9",{tabId:a,contentLength:f==null?void 0:f.length}),{url:d,title:h,content:f,type:"html",pdf:[],favicon:p}}else if(isGoogleDocs(d)){logger.debug("\u68C0\u6D4B\u5230Google Docs\u6587\u6863\uFF0C\u4F7F\u7528\u4E13\u7528\u89E3\u6790\u5668",{tabId:a,url:d});try{const f=await parseGoogleDocs();if(f){const _=cleanUnwantedUnicode(f);return logger.info("\u6210\u529F\u89E3\u6790Google Docs\u5185\u5BB9",{tabId:a,contentLength:_==null?void 0:_.length}),{url:d,title:h,content:_,type:"html",pdf:[],favicon:p}}else logger.warn("Google Docs\u89E3\u6790\u8FD4\u56DE\u7A7A\u5185\u5BB9",{tabId:a})}catch(f){logger.error("\u89E3\u6790Google Docs\u5185\u5BB9\u5931\u8D25",{tabId:a,error:f})}}logger.debug("\u4F7F\u7528\u9ED8\u8BA4\u5185\u5BB9\u63D0\u53D6\u5668\u5904\u7406\u9875\u9762",{tabId:a,url:d,contentLength:c==null?void 0:c.length});const m=defaultExtractContent(c);return logger.info("\u6210\u529F\u63D0\u53D6\u9875\u9762\u5185\u5BB9",{tabId:a,extractedContentLength:m==null?void 0:m.length}),{url:d,title:h,content:m,type:u,pdf:[],favicon:p}},getDataFromCurrentTab=async()=>{logger.debug("\u5F00\u59CB\u83B7\u53D6\u5F53\u524D\u6807\u7B7E\u9875\u5185\u5BB9");const a=await new Promise((m,f)=>{logger.debug("\u4F7F\u7528 Firefox/\u5176\u4ED6\u6D4F\u89C8\u5668 API \u83B7\u53D6\u6807\u7B7E\u9875\u5185\u5BB9"),browser.tabs.query({active:!0,currentWindow:!0}).then(async _=>{var E;if(!_||_.length===0){logger.error("\u65E0\u6CD5\u83B7\u53D6\u5F53\u524D\u6807\u7B7E\u9875"),f(new Error("\u65E0\u6CD5\u83B7\u53D6\u5F53\u524D\u6807\u7B7E\u9875"));return}const y=_[0];if(logger.debug("\u83B7\u53D6\u5230\u5F53\u524D\u6807\u7B7E\u9875",{tabId:y.id,url:y.url}),!y.id){logger.error("\u6807\u7B7E\u9875ID\u65E0\u6548"),f(new Error("\u6807\u7B7E\u9875ID\u65E0\u6548"));return}try{const b=await browser.scripting.executeScript({target:{tabId:y.id},func:_getHtml});b&&b.length>0?(logger.debug("\u6210\u529F\u6267\u884C\u5185\u5BB9\u811A\u672C\u83B7\u53D6HTML",{resultType:b[0].result.type,contentLength:(E=b[0].result.content)==null?void 0:E.length}),m(b[0].result)):(logger.error("\u5185\u5BB9\u811A\u672C\u6267\u884C\u7ED3\u679C\u4E3A\u7A7A"),f(new Error("\u5185\u5BB9\u811A\u672C\u6267\u884C\u7ED3\u679C\u4E3A\u7A7A")))}catch(b){logger.error("\u6267\u884C\u5185\u5BB9\u811A\u672C\u5931\u8D25",b);{logger.info("\u68C0\u6D4B\u5230 Firefox PDF \u9875\u9762\uFF0C\u4F7F\u7528\u66FF\u4EE3\u65B9\u6CD5\u83B7\u53D6\u5185\u5BB9");const T={url:y.url,title:y.title||"PDF Document",content:"",type:"pdf",favicon:y.favIconUrl};logger.debug("\u4F7F\u7528\u66FF\u4EE3\u65B9\u6CD5\u83B7\u53D6 PDF \u5185\u5BB9\u6210\u529F",{url:y.url}),m(T)}}}).catch(_=>{logger.error("\u67E5\u8BE2\u6807\u7B7E\u9875\u5931\u8D25",_),f(_)})});logger.debug("\u6210\u529F\u83B7\u53D6\u9875\u9762\u57FA\u672C\u6570\u636E",{url:a.url,title:a.title,type:a.type});const{content:s,type:c,url:u,title:d,favicon:h}=a;if(c==="pdf"){logger.debug("\u68C0\u6D4B\u5230PDF\u6587\u4EF6\uFF0C\u5F00\u59CB\u5904\u7406PDF\u5185\u5BB9",{url:u});try{const m=await fetch(u);if(!m.ok)throw logger.error("\u83B7\u53D6PDF\u6587\u4EF6\u5931\u8D25",{status:m.status,statusText:m.statusText}),new Error(`\u83B7\u53D6PDF\u6587\u4EF6\u5931\u8D25: ${m.status} ${m.statusText}`);const f=await m.arrayBuffer();logger.debug("\u6210\u529F\u83B7\u53D6PDF\u6587\u4EF6\u6570\u636E",{dataSize:f.byteLength});let _=[];const y=await getPdf(f);logger.info("\u6210\u529F\u89E3\u6790PDF\u6587\u4EF6",{numPages:y.numPages});for(let E=1;E<=y.numPages;E+=1){logger.debug(`\u5904\u7406PDF\u7B2C${E}\u9875`);const b=await(await y.getPage(E)).getTextContent();if(!b||b.items.length===0){logger.debug(`PDF\u7B2C${E}\u9875\u6CA1\u6709\u6587\u672C\u5185\u5BB9\uFF0C\u8DF3\u8FC7`);continue}const T=b.items.map(A=>A.str).join(`
`).replace(/\x00/g,"").trim();_.push({content:T,page:E}),logger.debug(`\u6210\u529F\u63D0\u53D6PDF\u7B2C${E}\u9875\u6587\u672C`,{textLength:T.length})}return logger.info("PDF\u5904\u7406\u5B8C\u6210",{totalPages:_.length}),{url:u,title:d,content:"",pdf:_,type:"pdf",favicon:h}}catch(m){return logger.error("\u5904\u7406PDF\u6587\u4EF6\u65F6\u51FA\u9519",m),{url:u,title:d,content:"PDF\u5904\u7406\u5931\u8D25\uFF0C\u65E0\u6CD5\u63D0\u53D6\u5185\u5BB9",pdf:[],type:"pdf",favicon:h}}}if(isTwitterTimeline(u)){logger.debug("\u68C0\u6D4B\u5230Twitter\u65F6\u95F4\u7EBF\u9875\u9762\uFF0C\u4F7F\u7528\u4E13\u7528\u89E3\u6790\u5668",{url:u});const m=parseTwitterTimeline(s);return logger.info("\u6210\u529F\u89E3\u6790Twitter\u65F6\u95F4\u7EBF\u5185\u5BB9",{contentLength:m==null?void 0:m.length}),{url:u,title:d,content:m,type:"html",pdf:[],favicon:h}}else if(isTweet(u)){logger.debug("\u68C0\u6D4B\u5230Twitter\u63A8\u6587\u9875\u9762\uFF0C\u4F7F\u7528\u4E13\u7528\u89E3\u6790\u5668",{url:u});const m=parseTweet(s);return logger.info("\u6210\u529F\u89E3\u6790Twitter\u63A8\u6587\u5185\u5BB9",{contentLength:m==null?void 0:m.length}),{url:u,title:d,content:m,type:"html",pdf:[],favicon:h}}else if(isGoogleDocs(u)){logger.debug("\u68C0\u6D4B\u5230Google Docs\u6587\u6863\uFF0C\u4F7F\u7528\u4E13\u7528\u89E3\u6790\u5668",{url:u});try{const m=await parseGoogleDocs();if(m){const f=cleanUnwantedUnicode(m);return logger.info("\u6210\u529F\u89E3\u6790Google Docs\u5185\u5BB9",{contentLength:f==null?void 0:f.length}),{url:u,title:d,content:f,type:"html",pdf:[],favicon:h}}else logger.warn("Google Docs\u89E3\u6790\u8FD4\u56DE\u7A7A\u5185\u5BB9")}catch(m){logger.error("\u89E3\u6790Google Docs\u5185\u5BB9\u5931\u8D25",m)}}logger.debug("\u4F7F\u7528\u9ED8\u8BA4\u5185\u5BB9\u63D0\u53D6\u5668\u5904\u7406\u9875\u9762",{url:u,contentLength:s==null?void 0:s.length});const p=defaultExtractContent(s);return logger.info("\u6210\u529F\u63D0\u53D6\u9875\u9762\u5185\u5BB9",{extractedContentLength:p==null?void 0:p.length}),{url:u,title:d,content:p,type:c,pdf:[],favicon:h}};var util;(function(a){a.assertEqual=d=>d;function s(d){}a.assertIs=s;function c(d){throw new Error}a.assertNever=c,a.arrayToEnum=d=>{const h={};for(const p of d)h[p]=p;return h},a.getValidEnumValues=d=>{const h=a.objectKeys(d).filter(m=>typeof d[d[m]]!="number"),p={};for(const m of h)p[m]=d[m];return a.objectValues(p)},a.objectValues=d=>a.objectKeys(d).map(function(h){return d[h]}),a.objectKeys=typeof Object.keys=="function"?d=>Object.keys(d):d=>{const h=[];for(const p in d)Object.prototype.hasOwnProperty.call(d,p)&&h.push(p);return h},a.find=(d,h)=>{for(const p of d)if(h(p))return p},a.isInteger=typeof Number.isInteger=="function"?d=>Number.isInteger(d):d=>typeof d=="number"&&isFinite(d)&&Math.floor(d)===d;function u(d,h=" | "){return d.map(p=>typeof p=="string"?`'${p}'`:p).join(h)}a.joinValues=u,a.jsonStringifyReplacer=(d,h)=>typeof h=="bigint"?h.toString():h})(util||(util={}));var objectUtil;(function(a){a.mergeShapes=(s,c)=>({...s,...c})})(objectUtil||(objectUtil={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=a=>{switch(typeof a){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(a)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(a)?ZodParsedType.array:a===null?ZodParsedType.null:a.then&&typeof a.then=="function"&&a.catch&&typeof a.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&a instanceof Map?ZodParsedType.map:typeof Set<"u"&&a instanceof Set?ZodParsedType.set:typeof Date<"u"&&a instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),quotelessJson=a=>JSON.stringify(a,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{constructor(s){super(),this.issues=[],this.addIssue=u=>{this.issues=[...this.issues,u]},this.addIssues=(u=[])=>{this.issues=[...this.issues,...u]};const c=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,c):this.__proto__=c,this.name="ZodError",this.issues=s}get errors(){return this.issues}format(s){const c=s||function(h){return h.message},u={_errors:[]},d=h=>{for(const p of h.issues)if(p.code==="invalid_union")p.unionErrors.map(d);else if(p.code==="invalid_return_type")d(p.returnTypeError);else if(p.code==="invalid_arguments")d(p.argumentsError);else if(p.path.length===0)u._errors.push(c(p));else{let m=u,f=0;for(;f<p.path.length;){const _=p.path[f];f===p.path.length-1?(m[_]=m[_]||{_errors:[]},m[_]._errors.push(c(p))):m[_]=m[_]||{_errors:[]},m=m[_],f++}}};return d(this),u}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(s=c=>c.message){const c={},u=[];for(const d of this.issues)d.path.length>0?(c[d.path[0]]=c[d.path[0]]||[],c[d.path[0]].push(s(d))):u.push(s(d));return{formErrors:u,fieldErrors:c}}get formErrors(){return this.flatten()}}ZodError.create=a=>new ZodError(a);const errorMap=(a,s)=>{let c;switch(a.code){case ZodIssueCode.invalid_type:a.received===ZodParsedType.undefined?c="Required":c=`Expected ${a.expected}, received ${a.received}`;break;case ZodIssueCode.invalid_literal:c=`Invalid literal value, expected ${JSON.stringify(a.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:c=`Unrecognized key(s) in object: ${util.joinValues(a.keys,", ")}`;break;case ZodIssueCode.invalid_union:c="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:c=`Invalid discriminator value. Expected ${util.joinValues(a.options)}`;break;case ZodIssueCode.invalid_enum_value:c=`Invalid enum value. Expected ${util.joinValues(a.options)}, received '${a.received}'`;break;case ZodIssueCode.invalid_arguments:c="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:c="Invalid function return type";break;case ZodIssueCode.invalid_date:c="Invalid date";break;case ZodIssueCode.invalid_string:typeof a.validation=="object"?"includes"in a.validation?(c=`Invalid input: must include "${a.validation.includes}"`,typeof a.validation.position=="number"&&(c=`${c} at one or more positions greater than or equal to ${a.validation.position}`)):"startsWith"in a.validation?c=`Invalid input: must start with "${a.validation.startsWith}"`:"endsWith"in a.validation?c=`Invalid input: must end with "${a.validation.endsWith}"`:util.assertNever(a.validation):a.validation!=="regex"?c=`Invalid ${a.validation}`:c="Invalid";break;case ZodIssueCode.too_small:a.type==="array"?c=`Array must contain ${a.exact?"exactly":a.inclusive?"at least":"more than"} ${a.minimum} element(s)`:a.type==="string"?c=`String must contain ${a.exact?"exactly":a.inclusive?"at least":"over"} ${a.minimum} character(s)`:a.type==="number"?c=`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:a.type==="date"?c=`Date must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(a.minimum))}`:c="Invalid input";break;case ZodIssueCode.too_big:a.type==="array"?c=`Array must contain ${a.exact?"exactly":a.inclusive?"at most":"less than"} ${a.maximum} element(s)`:a.type==="string"?c=`String must contain ${a.exact?"exactly":a.inclusive?"at most":"under"} ${a.maximum} character(s)`:a.type==="number"?c=`Number must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="bigint"?c=`BigInt must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="date"?c=`Date must be ${a.exact?"exactly":a.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(a.maximum))}`:c="Invalid input";break;case ZodIssueCode.custom:c="Invalid input";break;case ZodIssueCode.invalid_intersection_types:c="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:c=`Number must be a multiple of ${a.multipleOf}`;break;case ZodIssueCode.not_finite:c="Number must be finite";break;default:c=s.defaultError,util.assertNever(a)}return{message:c}};let overrideErrorMap=errorMap;function setErrorMap(a){overrideErrorMap=a}function getErrorMap(){return overrideErrorMap}const makeIssue=a=>{const{data:s,path:c,errorMaps:u,issueData:d}=a,h=[...c,...d.path||[]],p={...d,path:h};let m="";const f=u.filter(_=>!!_).slice().reverse();for(const _ of f)m=_(p,{data:s,defaultError:m}).message;return{...d,path:h,message:d.message||m}},EMPTY_PATH=[];function addIssueToContext(a,s){const c=makeIssue({issueData:s,data:a.data,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,getErrorMap(),errorMap].filter(u=>!!u)});a.common.issues.push(c)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(s,c){const u=[];for(const d of c){if(d.status==="aborted")return INVALID;d.status==="dirty"&&s.dirty(),u.push(d.value)}return{status:s.value,value:u}}static async mergeObjectAsync(s,c){const u=[];for(const d of c)u.push({key:await d.key,value:await d.value});return ParseStatus.mergeObjectSync(s,u)}static mergeObjectSync(s,c){const u={};for(const d of c){const{key:h,value:p}=d;if(h.status==="aborted"||p.status==="aborted")return INVALID;h.status==="dirty"&&s.dirty(),p.status==="dirty"&&s.dirty(),h.value!=="__proto__"&&(typeof p.value<"u"||d.alwaysSet)&&(u[h.value]=p.value)}return{status:s.value,value:u}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=a=>({status:"dirty",value:a}),OK=a=>({status:"valid",value:a}),isAborted=a=>a.status==="aborted",isDirty=a=>a.status==="dirty",isValid=a=>a.status==="valid",isAsync=a=>typeof Promise<"u"&&a instanceof Promise;var errorUtil;(function(a){a.errToObj=s=>typeof s=="string"?{message:s}:s||{},a.toString=s=>typeof s=="string"?s:s==null?void 0:s.message})(errorUtil||(errorUtil={}));class ParseInputLazyPath{constructor(s,c,u,d){this._cachedPath=[],this.parent=s,this.data=c,this._path=u,this._key=d}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(a,s)=>{if(isValid(s))return{success:!0,data:s.value};if(!a.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const c=new ZodError(a.common.issues);return this._error=c,this._error}}};function processCreateParams(a){if(!a)return{};const{errorMap:s,invalid_type_error:c,required_error:u,description:d}=a;if(s&&(c||u))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return s?{errorMap:s,description:d}:{errorMap:(h,p)=>h.code!=="invalid_type"?{message:p.defaultError}:typeof p.data>"u"?{message:u??p.defaultError}:{message:c??p.defaultError},description:d}}class ZodType{constructor(s){this.spa=this.safeParseAsync,this._def=s,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(s){return getParsedType(s.data)}_getOrReturnCtx(s,c){return c||{common:s.parent.common,data:s.data,parsedType:getParsedType(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}_processInputParams(s){return{status:new ParseStatus,ctx:{common:s.parent.common,data:s.data,parsedType:getParsedType(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}}_parseSync(s){const c=this._parse(s);if(isAsync(c))throw new Error("Synchronous parse encountered promise.");return c}_parseAsync(s){const c=this._parse(s);return Promise.resolve(c)}parse(s,c){const u=this.safeParse(s,c);if(u.success)return u.data;throw u.error}safeParse(s,c){var u;const d={common:{issues:[],async:(u=c==null?void 0:c.async)!==null&&u!==void 0?u:!1,contextualErrorMap:c==null?void 0:c.errorMap},path:(c==null?void 0:c.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:getParsedType(s)},h=this._parseSync({data:s,path:d.path,parent:d});return handleResult(d,h)}async parseAsync(s,c){const u=await this.safeParseAsync(s,c);if(u.success)return u.data;throw u.error}async safeParseAsync(s,c){const u={common:{issues:[],contextualErrorMap:c==null?void 0:c.errorMap,async:!0},path:(c==null?void 0:c.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:getParsedType(s)},d=this._parse({data:s,path:u.path,parent:u}),h=await(isAsync(d)?d:Promise.resolve(d));return handleResult(u,h)}refine(s,c){const u=d=>typeof c=="string"||typeof c>"u"?{message:c}:typeof c=="function"?c(d):c;return this._refinement((d,h)=>{const p=s(d),m=()=>h.addIssue({code:ZodIssueCode.custom,...u(d)});return typeof Promise<"u"&&p instanceof Promise?p.then(f=>f?!0:(m(),!1)):p?!0:(m(),!1)})}refinement(s,c){return this._refinement((u,d)=>s(u)?!0:(d.addIssue(typeof c=="function"?c(u,d):c),!1))}_refinement(s){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:s}})}superRefine(s){return this._refinement(s)}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this,this._def)}promise(){return ZodPromise.create(this,this._def)}or(s){return ZodUnion.create([this,s],this._def)}and(s){return ZodIntersection.create(this,s,this._def)}transform(s){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:s}})}default(s){const c=typeof s=="function"?s:()=>s;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:c,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(s){const c=typeof s=="function"?s:()=>s;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:c,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(s){const c=this.constructor;return new c({...this._def,description:s})}pipe(s){return ZodPipeline.create(this,s)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[a-z][a-z0-9]*$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex;const ipv4Regex=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,ipv6Regex=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,datetimeRegex=a=>a.precision?a.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${a.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${a.precision}}Z$`):a.precision===0?a.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):a.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function isValidIP(a,s){return!!((s==="v4"||!s)&&ipv4Regex.test(a)||(s==="v6"||!s)&&ipv6Regex.test(a))}class ZodString extends ZodType{_parse(s){if(this._def.coerce&&(s.data=String(s.data)),this._getType(s)!==ZodParsedType.string){const d=this._getOrReturnCtx(s);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:d.parsedType}),INVALID}const c=new ParseStatus;let u;for(const d of this._def.checks)if(d.kind==="min")s.data.length<d.value&&(u=this._getOrReturnCtx(s,u),addIssueToContext(u,{code:ZodIssueCode.too_small,minimum:d.value,type:"string",inclusive:!0,exact:!1,message:d.message}),c.dirty());else if(d.kind==="max")s.data.length>d.value&&(u=this._getOrReturnCtx(s,u),addIssueToContext(u,{code:ZodIssueCode.too_big,maximum:d.value,type:"string",inclusive:!0,exact:!1,message:d.message}),c.dirty());else if(d.kind==="length"){const h=s.data.length>d.value,p=s.data.length<d.value;(h||p)&&(u=this._getOrReturnCtx(s,u),h?addIssueToContext(u,{code:ZodIssueCode.too_big,maximum:d.value,type:"string",inclusive:!0,exact:!0,message:d.message}):p&&addIssueToContext(u,{code:ZodIssueCode.too_small,minimum:d.value,type:"string",inclusive:!0,exact:!0,message:d.message}),c.dirty())}else if(d.kind==="email")emailRegex.test(s.data)||(u=this._getOrReturnCtx(s,u),addIssueToContext(u,{validation:"email",code:ZodIssueCode.invalid_string,message:d.message}),c.dirty());else if(d.kind==="emoji")emojiRegex||(emojiRegex=new RegExp(_emojiRegex,"u")),emojiRegex.test(s.data)||(u=this._getOrReturnCtx(s,u),addIssueToContext(u,{validation:"emoji",code:ZodIssueCode.invalid_string,message:d.message}),c.dirty());else if(d.kind==="uuid")uuidRegex.test(s.data)||(u=this._getOrReturnCtx(s,u),addIssueToContext(u,{validation:"uuid",code:ZodIssueCode.invalid_string,message:d.message}),c.dirty());else if(d.kind==="cuid")cuidRegex.test(s.data)||(u=this._getOrReturnCtx(s,u),addIssueToContext(u,{validation:"cuid",code:ZodIssueCode.invalid_string,message:d.message}),c.dirty());else if(d.kind==="cuid2")cuid2Regex.test(s.data)||(u=this._getOrReturnCtx(s,u),addIssueToContext(u,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:d.message}),c.dirty());else if(d.kind==="ulid")ulidRegex.test(s.data)||(u=this._getOrReturnCtx(s,u),addIssueToContext(u,{validation:"ulid",code:ZodIssueCode.invalid_string,message:d.message}),c.dirty());else if(d.kind==="url")try{new URL(s.data)}catch{u=this._getOrReturnCtx(s,u),addIssueToContext(u,{validation:"url",code:ZodIssueCode.invalid_string,message:d.message}),c.dirty()}else d.kind==="regex"?(d.regex.lastIndex=0,d.regex.test(s.data)||(u=this._getOrReturnCtx(s,u),addIssueToContext(u,{validation:"regex",code:ZodIssueCode.invalid_string,message:d.message}),c.dirty())):d.kind==="trim"?s.data=s.data.trim():d.kind==="includes"?s.data.includes(d.value,d.position)||(u=this._getOrReturnCtx(s,u),addIssueToContext(u,{code:ZodIssueCode.invalid_string,validation:{includes:d.value,position:d.position},message:d.message}),c.dirty()):d.kind==="toLowerCase"?s.data=s.data.toLowerCase():d.kind==="toUpperCase"?s.data=s.data.toUpperCase():d.kind==="startsWith"?s.data.startsWith(d.value)||(u=this._getOrReturnCtx(s,u),addIssueToContext(u,{code:ZodIssueCode.invalid_string,validation:{startsWith:d.value},message:d.message}),c.dirty()):d.kind==="endsWith"?s.data.endsWith(d.value)||(u=this._getOrReturnCtx(s,u),addIssueToContext(u,{code:ZodIssueCode.invalid_string,validation:{endsWith:d.value},message:d.message}),c.dirty()):d.kind==="datetime"?datetimeRegex(d).test(s.data)||(u=this._getOrReturnCtx(s,u),addIssueToContext(u,{code:ZodIssueCode.invalid_string,validation:"datetime",message:d.message}),c.dirty()):d.kind==="ip"?isValidIP(s.data,d.version)||(u=this._getOrReturnCtx(s,u),addIssueToContext(u,{validation:"ip",code:ZodIssueCode.invalid_string,message:d.message}),c.dirty()):util.assertNever(d);return{status:c.value,value:s.data}}_regex(s,c,u){return this.refinement(d=>s.test(d),{validation:c,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(u)})}_addCheck(s){return new ZodString({...this._def,checks:[...this._def.checks,s]})}email(s){return this._addCheck({kind:"email",...errorUtil.errToObj(s)})}url(s){return this._addCheck({kind:"url",...errorUtil.errToObj(s)})}emoji(s){return this._addCheck({kind:"emoji",...errorUtil.errToObj(s)})}uuid(s){return this._addCheck({kind:"uuid",...errorUtil.errToObj(s)})}cuid(s){return this._addCheck({kind:"cuid",...errorUtil.errToObj(s)})}cuid2(s){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(s)})}ulid(s){return this._addCheck({kind:"ulid",...errorUtil.errToObj(s)})}ip(s){return this._addCheck({kind:"ip",...errorUtil.errToObj(s)})}datetime(s){var c;return typeof s=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:s}):this._addCheck({kind:"datetime",precision:typeof(s==null?void 0:s.precision)>"u"?null:s==null?void 0:s.precision,offset:(c=s==null?void 0:s.offset)!==null&&c!==void 0?c:!1,...errorUtil.errToObj(s==null?void 0:s.message)})}regex(s,c){return this._addCheck({kind:"regex",regex:s,...errorUtil.errToObj(c)})}includes(s,c){return this._addCheck({kind:"includes",value:s,position:c==null?void 0:c.position,...errorUtil.errToObj(c==null?void 0:c.message)})}startsWith(s,c){return this._addCheck({kind:"startsWith",value:s,...errorUtil.errToObj(c)})}endsWith(s,c){return this._addCheck({kind:"endsWith",value:s,...errorUtil.errToObj(c)})}min(s,c){return this._addCheck({kind:"min",value:s,...errorUtil.errToObj(c)})}max(s,c){return this._addCheck({kind:"max",value:s,...errorUtil.errToObj(c)})}length(s,c){return this._addCheck({kind:"length",value:s,...errorUtil.errToObj(c)})}nonempty(s){return this.min(1,errorUtil.errToObj(s))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(s=>s.kind==="datetime")}get isEmail(){return!!this._def.checks.find(s=>s.kind==="email")}get isURL(){return!!this._def.checks.find(s=>s.kind==="url")}get isEmoji(){return!!this._def.checks.find(s=>s.kind==="emoji")}get isUUID(){return!!this._def.checks.find(s=>s.kind==="uuid")}get isCUID(){return!!this._def.checks.find(s=>s.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(s=>s.kind==="cuid2")}get isULID(){return!!this._def.checks.find(s=>s.kind==="ulid")}get isIP(){return!!this._def.checks.find(s=>s.kind==="ip")}get minLength(){let s=null;for(const c of this._def.checks)c.kind==="min"&&(s===null||c.value>s)&&(s=c.value);return s}get maxLength(){let s=null;for(const c of this._def.checks)c.kind==="max"&&(s===null||c.value<s)&&(s=c.value);return s}}ZodString.create=a=>{var s;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(s=a==null?void 0:a.coerce)!==null&&s!==void 0?s:!1,...processCreateParams(a)})};function floatSafeRemainder(a,s){const c=(a.toString().split(".")[1]||"").length,u=(s.toString().split(".")[1]||"").length,d=c>u?c:u,h=parseInt(a.toFixed(d).replace(".","")),p=parseInt(s.toFixed(d).replace(".",""));return h%p/Math.pow(10,d)}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(s){if(this._def.coerce&&(s.data=Number(s.data)),this._getType(s)!==ZodParsedType.number){const d=this._getOrReturnCtx(s);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:d.parsedType}),INVALID}let c;const u=new ParseStatus;for(const d of this._def.checks)d.kind==="int"?util.isInteger(s.data)||(c=this._getOrReturnCtx(s,c),addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:d.message}),u.dirty()):d.kind==="min"?(d.inclusive?s.data<d.value:s.data<=d.value)&&(c=this._getOrReturnCtx(s,c),addIssueToContext(c,{code:ZodIssueCode.too_small,minimum:d.value,type:"number",inclusive:d.inclusive,exact:!1,message:d.message}),u.dirty()):d.kind==="max"?(d.inclusive?s.data>d.value:s.data>=d.value)&&(c=this._getOrReturnCtx(s,c),addIssueToContext(c,{code:ZodIssueCode.too_big,maximum:d.value,type:"number",inclusive:d.inclusive,exact:!1,message:d.message}),u.dirty()):d.kind==="multipleOf"?floatSafeRemainder(s.data,d.value)!==0&&(c=this._getOrReturnCtx(s,c),addIssueToContext(c,{code:ZodIssueCode.not_multiple_of,multipleOf:d.value,message:d.message}),u.dirty()):d.kind==="finite"?Number.isFinite(s.data)||(c=this._getOrReturnCtx(s,c),addIssueToContext(c,{code:ZodIssueCode.not_finite,message:d.message}),u.dirty()):util.assertNever(d);return{status:u.value,value:s.data}}gte(s,c){return this.setLimit("min",s,!0,errorUtil.toString(c))}gt(s,c){return this.setLimit("min",s,!1,errorUtil.toString(c))}lte(s,c){return this.setLimit("max",s,!0,errorUtil.toString(c))}lt(s,c){return this.setLimit("max",s,!1,errorUtil.toString(c))}setLimit(s,c,u,d){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:s,value:c,inclusive:u,message:errorUtil.toString(d)}]})}_addCheck(s){return new ZodNumber({...this._def,checks:[...this._def.checks,s]})}int(s){return this._addCheck({kind:"int",message:errorUtil.toString(s)})}positive(s){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(s)})}negative(s){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(s)})}multipleOf(s,c){return this._addCheck({kind:"multipleOf",value:s,message:errorUtil.toString(c)})}finite(s){return this._addCheck({kind:"finite",message:errorUtil.toString(s)})}safe(s){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(s)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(s)})}get minValue(){let s=null;for(const c of this._def.checks)c.kind==="min"&&(s===null||c.value>s)&&(s=c.value);return s}get maxValue(){let s=null;for(const c of this._def.checks)c.kind==="max"&&(s===null||c.value<s)&&(s=c.value);return s}get isInt(){return!!this._def.checks.find(s=>s.kind==="int"||s.kind==="multipleOf"&&util.isInteger(s.value))}get isFinite(){let s=null,c=null;for(const u of this._def.checks){if(u.kind==="finite"||u.kind==="int"||u.kind==="multipleOf")return!0;u.kind==="min"?(c===null||u.value>c)&&(c=u.value):u.kind==="max"&&(s===null||u.value<s)&&(s=u.value)}return Number.isFinite(c)&&Number.isFinite(s)}}ZodNumber.create=a=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(a==null?void 0:a.coerce)||!1,...processCreateParams(a)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(s){if(this._def.coerce&&(s.data=BigInt(s.data)),this._getType(s)!==ZodParsedType.bigint){const d=this._getOrReturnCtx(s);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:d.parsedType}),INVALID}let c;const u=new ParseStatus;for(const d of this._def.checks)d.kind==="min"?(d.inclusive?s.data<d.value:s.data<=d.value)&&(c=this._getOrReturnCtx(s,c),addIssueToContext(c,{code:ZodIssueCode.too_small,type:"bigint",minimum:d.value,inclusive:d.inclusive,message:d.message}),u.dirty()):d.kind==="max"?(d.inclusive?s.data>d.value:s.data>=d.value)&&(c=this._getOrReturnCtx(s,c),addIssueToContext(c,{code:ZodIssueCode.too_big,type:"bigint",maximum:d.value,inclusive:d.inclusive,message:d.message}),u.dirty()):d.kind==="multipleOf"?s.data%d.value!==BigInt(0)&&(c=this._getOrReturnCtx(s,c),addIssueToContext(c,{code:ZodIssueCode.not_multiple_of,multipleOf:d.value,message:d.message}),u.dirty()):util.assertNever(d);return{status:u.value,value:s.data}}gte(s,c){return this.setLimit("min",s,!0,errorUtil.toString(c))}gt(s,c){return this.setLimit("min",s,!1,errorUtil.toString(c))}lte(s,c){return this.setLimit("max",s,!0,errorUtil.toString(c))}lt(s,c){return this.setLimit("max",s,!1,errorUtil.toString(c))}setLimit(s,c,u,d){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:s,value:c,inclusive:u,message:errorUtil.toString(d)}]})}_addCheck(s){return new ZodBigInt({...this._def,checks:[...this._def.checks,s]})}positive(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(s)})}negative(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(s)})}multipleOf(s,c){return this._addCheck({kind:"multipleOf",value:s,message:errorUtil.toString(c)})}get minValue(){let s=null;for(const c of this._def.checks)c.kind==="min"&&(s===null||c.value>s)&&(s=c.value);return s}get maxValue(){let s=null;for(const c of this._def.checks)c.kind==="max"&&(s===null||c.value<s)&&(s=c.value);return s}}ZodBigInt.create=a=>{var s;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(s=a==null?void 0:a.coerce)!==null&&s!==void 0?s:!1,...processCreateParams(a)})};class ZodBoolean extends ZodType{_parse(s){if(this._def.coerce&&(s.data=!!s.data),this._getType(s)!==ZodParsedType.boolean){const c=this._getOrReturnCtx(s);return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:c.parsedType}),INVALID}return OK(s.data)}}ZodBoolean.create=a=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(a==null?void 0:a.coerce)||!1,...processCreateParams(a)});class ZodDate extends ZodType{_parse(s){if(this._def.coerce&&(s.data=new Date(s.data)),this._getType(s)!==ZodParsedType.date){const d=this._getOrReturnCtx(s);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:d.parsedType}),INVALID}if(isNaN(s.data.getTime())){const d=this._getOrReturnCtx(s);return addIssueToContext(d,{code:ZodIssueCode.invalid_date}),INVALID}const c=new ParseStatus;let u;for(const d of this._def.checks)d.kind==="min"?s.data.getTime()<d.value&&(u=this._getOrReturnCtx(s,u),addIssueToContext(u,{code:ZodIssueCode.too_small,message:d.message,inclusive:!0,exact:!1,minimum:d.value,type:"date"}),c.dirty()):d.kind==="max"?s.data.getTime()>d.value&&(u=this._getOrReturnCtx(s,u),addIssueToContext(u,{code:ZodIssueCode.too_big,message:d.message,inclusive:!0,exact:!1,maximum:d.value,type:"date"}),c.dirty()):util.assertNever(d);return{status:c.value,value:new Date(s.data.getTime())}}_addCheck(s){return new ZodDate({...this._def,checks:[...this._def.checks,s]})}min(s,c){return this._addCheck({kind:"min",value:s.getTime(),message:errorUtil.toString(c)})}max(s,c){return this._addCheck({kind:"max",value:s.getTime(),message:errorUtil.toString(c)})}get minDate(){let s=null;for(const c of this._def.checks)c.kind==="min"&&(s===null||c.value>s)&&(s=c.value);return s!=null?new Date(s):null}get maxDate(){let s=null;for(const c of this._def.checks)c.kind==="max"&&(s===null||c.value<s)&&(s=c.value);return s!=null?new Date(s):null}}ZodDate.create=a=>new ZodDate({checks:[],coerce:(a==null?void 0:a.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(a)});class ZodSymbol extends ZodType{_parse(s){if(this._getType(s)!==ZodParsedType.symbol){const c=this._getOrReturnCtx(s);return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:c.parsedType}),INVALID}return OK(s.data)}}ZodSymbol.create=a=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(a)});class ZodUndefined extends ZodType{_parse(s){if(this._getType(s)!==ZodParsedType.undefined){const c=this._getOrReturnCtx(s);return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:c.parsedType}),INVALID}return OK(s.data)}}ZodUndefined.create=a=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(a)});class ZodNull extends ZodType{_parse(s){if(this._getType(s)!==ZodParsedType.null){const c=this._getOrReturnCtx(s);return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:c.parsedType}),INVALID}return OK(s.data)}}ZodNull.create=a=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(a)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(s){return OK(s.data)}}ZodAny.create=a=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(a)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(s){return OK(s.data)}}ZodUnknown.create=a=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(a)});class ZodNever extends ZodType{_parse(s){const c=this._getOrReturnCtx(s);return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:c.parsedType}),INVALID}}ZodNever.create=a=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(a)});class ZodVoid extends ZodType{_parse(s){if(this._getType(s)!==ZodParsedType.undefined){const c=this._getOrReturnCtx(s);return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:c.parsedType}),INVALID}return OK(s.data)}}ZodVoid.create=a=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(a)});class ZodArray extends ZodType{_parse(s){const{ctx:c,status:u}=this._processInputParams(s),d=this._def;if(c.parsedType!==ZodParsedType.array)return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:c.parsedType}),INVALID;if(d.exactLength!==null){const p=c.data.length>d.exactLength.value,m=c.data.length<d.exactLength.value;(p||m)&&(addIssueToContext(c,{code:p?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:m?d.exactLength.value:void 0,maximum:p?d.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:d.exactLength.message}),u.dirty())}if(d.minLength!==null&&c.data.length<d.minLength.value&&(addIssueToContext(c,{code:ZodIssueCode.too_small,minimum:d.minLength.value,type:"array",inclusive:!0,exact:!1,message:d.minLength.message}),u.dirty()),d.maxLength!==null&&c.data.length>d.maxLength.value&&(addIssueToContext(c,{code:ZodIssueCode.too_big,maximum:d.maxLength.value,type:"array",inclusive:!0,exact:!1,message:d.maxLength.message}),u.dirty()),c.common.async)return Promise.all([...c.data].map((p,m)=>d.type._parseAsync(new ParseInputLazyPath(c,p,c.path,m)))).then(p=>ParseStatus.mergeArray(u,p));const h=[...c.data].map((p,m)=>d.type._parseSync(new ParseInputLazyPath(c,p,c.path,m)));return ParseStatus.mergeArray(u,h)}get element(){return this._def.type}min(s,c){return new ZodArray({...this._def,minLength:{value:s,message:errorUtil.toString(c)}})}max(s,c){return new ZodArray({...this._def,maxLength:{value:s,message:errorUtil.toString(c)}})}length(s,c){return new ZodArray({...this._def,exactLength:{value:s,message:errorUtil.toString(c)}})}nonempty(s){return this.min(1,s)}}ZodArray.create=(a,s)=>new ZodArray({type:a,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(s)});function deepPartialify(a){if(a instanceof ZodObject){const s={};for(const c in a.shape){const u=a.shape[c];s[c]=ZodOptional.create(deepPartialify(u))}return new ZodObject({...a._def,shape:()=>s})}else return a instanceof ZodArray?new ZodArray({...a._def,type:deepPartialify(a.element)}):a instanceof ZodOptional?ZodOptional.create(deepPartialify(a.unwrap())):a instanceof ZodNullable?ZodNullable.create(deepPartialify(a.unwrap())):a instanceof ZodTuple?ZodTuple.create(a.items.map(s=>deepPartialify(s))):a}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const s=this._def.shape(),c=util.objectKeys(s);return this._cached={shape:s,keys:c}}_parse(s){if(this._getType(s)!==ZodParsedType.object){const f=this._getOrReturnCtx(s);return addIssueToContext(f,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:f.parsedType}),INVALID}const{status:c,ctx:u}=this._processInputParams(s),{shape:d,keys:h}=this._getCached(),p=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const f in u.data)h.includes(f)||p.push(f);const m=[];for(const f of h){const _=d[f],y=u.data[f];m.push({key:{status:"valid",value:f},value:_._parse(new ParseInputLazyPath(u,y,u.path,f)),alwaysSet:f in u.data})}if(this._def.catchall instanceof ZodNever){const f=this._def.unknownKeys;if(f==="passthrough")for(const _ of p)m.push({key:{status:"valid",value:_},value:{status:"valid",value:u.data[_]}});else if(f==="strict")p.length>0&&(addIssueToContext(u,{code:ZodIssueCode.unrecognized_keys,keys:p}),c.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const _ of p){const y=u.data[_];m.push({key:{status:"valid",value:_},value:f._parse(new ParseInputLazyPath(u,y,u.path,_)),alwaysSet:_ in u.data})}}return u.common.async?Promise.resolve().then(async()=>{const f=[];for(const _ of m){const y=await _.key;f.push({key:y,value:await _.value,alwaysSet:_.alwaysSet})}return f}).then(f=>ParseStatus.mergeObjectSync(c,f)):ParseStatus.mergeObjectSync(c,m)}get shape(){return this._def.shape()}strict(s){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...s!==void 0?{errorMap:(c,u)=>{var d,h,p,m;const f=(p=(h=(d=this._def).errorMap)===null||h===void 0?void 0:h.call(d,c,u).message)!==null&&p!==void 0?p:u.defaultError;return c.code==="unrecognized_keys"?{message:(m=errorUtil.errToObj(s).message)!==null&&m!==void 0?m:f}:{message:f}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(s){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...s})})}merge(s){return new ZodObject({unknownKeys:s._def.unknownKeys,catchall:s._def.catchall,shape:()=>({...this._def.shape(),...s._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(s,c){return this.augment({[s]:c})}catchall(s){return new ZodObject({...this._def,catchall:s})}pick(s){const c={};return util.objectKeys(s).forEach(u=>{s[u]&&this.shape[u]&&(c[u]=this.shape[u])}),new ZodObject({...this._def,shape:()=>c})}omit(s){const c={};return util.objectKeys(this.shape).forEach(u=>{s[u]||(c[u]=this.shape[u])}),new ZodObject({...this._def,shape:()=>c})}deepPartial(){return deepPartialify(this)}partial(s){const c={};return util.objectKeys(this.shape).forEach(u=>{const d=this.shape[u];s&&!s[u]?c[u]=d:c[u]=d.optional()}),new ZodObject({...this._def,shape:()=>c})}required(s){const c={};return util.objectKeys(this.shape).forEach(u=>{if(s&&!s[u])c[u]=this.shape[u];else{let d=this.shape[u];for(;d instanceof ZodOptional;)d=d._def.innerType;c[u]=d}}),new ZodObject({...this._def,shape:()=>c})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(a,s)=>new ZodObject({shape:()=>a,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(s)}),ZodObject.strictCreate=(a,s)=>new ZodObject({shape:()=>a,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(s)}),ZodObject.lazycreate=(a,s)=>new ZodObject({shape:a,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(s)});class ZodUnion extends ZodType{_parse(s){const{ctx:c}=this._processInputParams(s),u=this._def.options;function d(h){for(const m of h)if(m.result.status==="valid")return m.result;for(const m of h)if(m.result.status==="dirty")return c.common.issues.push(...m.ctx.common.issues),m.result;const p=h.map(m=>new ZodError(m.ctx.common.issues));return addIssueToContext(c,{code:ZodIssueCode.invalid_union,unionErrors:p}),INVALID}if(c.common.async)return Promise.all(u.map(async h=>{const p={...c,common:{...c.common,issues:[]},parent:null};return{result:await h._parseAsync({data:c.data,path:c.path,parent:p}),ctx:p}})).then(d);{let h;const p=[];for(const f of u){const _={...c,common:{...c.common,issues:[]},parent:null},y=f._parseSync({data:c.data,path:c.path,parent:_});if(y.status==="valid")return y;y.status==="dirty"&&!h&&(h={result:y,ctx:_}),_.common.issues.length&&p.push(_.common.issues)}if(h)return c.common.issues.push(...h.ctx.common.issues),h.result;const m=p.map(f=>new ZodError(f));return addIssueToContext(c,{code:ZodIssueCode.invalid_union,unionErrors:m}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(a,s)=>new ZodUnion({options:a,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(s)});const getDiscriminator=a=>a instanceof ZodLazy?getDiscriminator(a.schema):a instanceof ZodEffects?getDiscriminator(a.innerType()):a instanceof ZodLiteral?[a.value]:a instanceof ZodEnum?a.options:a instanceof ZodNativeEnum?Object.keys(a.enum):a instanceof ZodDefault?getDiscriminator(a._def.innerType):a instanceof ZodUndefined?[void 0]:a instanceof ZodNull?[null]:null;class ZodDiscriminatedUnion extends ZodType{_parse(s){const{ctx:c}=this._processInputParams(s);if(c.parsedType!==ZodParsedType.object)return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:c.parsedType}),INVALID;const u=this.discriminator,d=c.data[u],h=this.optionsMap.get(d);return h?c.common.async?h._parseAsync({data:c.data,path:c.path,parent:c}):h._parseSync({data:c.data,path:c.path,parent:c}):(addIssueToContext(c,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[u]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(s,c,u){const d=new Map;for(const h of c){const p=getDiscriminator(h.shape[s]);if(!p)throw new Error(`A discriminator value for key \`${s}\` could not be extracted from all schema options`);for(const m of p){if(d.has(m))throw new Error(`Discriminator property ${String(s)} has duplicate value ${String(m)}`);d.set(m,h)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:s,options:c,optionsMap:d,...processCreateParams(u)})}}function mergeValues(a,s){const c=getParsedType(a),u=getParsedType(s);if(a===s)return{valid:!0,data:a};if(c===ZodParsedType.object&&u===ZodParsedType.object){const d=util.objectKeys(s),h=util.objectKeys(a).filter(m=>d.indexOf(m)!==-1),p={...a,...s};for(const m of h){const f=mergeValues(a[m],s[m]);if(!f.valid)return{valid:!1};p[m]=f.data}return{valid:!0,data:p}}else if(c===ZodParsedType.array&&u===ZodParsedType.array){if(a.length!==s.length)return{valid:!1};const d=[];for(let h=0;h<a.length;h++){const p=a[h],m=s[h],f=mergeValues(p,m);if(!f.valid)return{valid:!1};d.push(f.data)}return{valid:!0,data:d}}else return c===ZodParsedType.date&&u===ZodParsedType.date&&+a==+s?{valid:!0,data:a}:{valid:!1}}class ZodIntersection extends ZodType{_parse(s){const{status:c,ctx:u}=this._processInputParams(s),d=(h,p)=>{if(isAborted(h)||isAborted(p))return INVALID;const m=mergeValues(h.value,p.value);return m.valid?((isDirty(h)||isDirty(p))&&c.dirty(),{status:c.value,value:m.data}):(addIssueToContext(u,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return u.common.async?Promise.all([this._def.left._parseAsync({data:u.data,path:u.path,parent:u}),this._def.right._parseAsync({data:u.data,path:u.path,parent:u})]).then(([h,p])=>d(h,p)):d(this._def.left._parseSync({data:u.data,path:u.path,parent:u}),this._def.right._parseSync({data:u.data,path:u.path,parent:u}))}}ZodIntersection.create=(a,s,c)=>new ZodIntersection({left:a,right:s,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(c)});class ZodTuple extends ZodType{_parse(s){const{status:c,ctx:u}=this._processInputParams(s);if(u.parsedType!==ZodParsedType.array)return addIssueToContext(u,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:u.parsedType}),INVALID;if(u.data.length<this._def.items.length)return addIssueToContext(u,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&u.data.length>this._def.items.length&&(addIssueToContext(u,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),c.dirty());const d=[...u.data].map((h,p)=>{const m=this._def.items[p]||this._def.rest;return m?m._parse(new ParseInputLazyPath(u,h,u.path,p)):null}).filter(h=>!!h);return u.common.async?Promise.all(d).then(h=>ParseStatus.mergeArray(c,h)):ParseStatus.mergeArray(c,d)}get items(){return this._def.items}rest(s){return new ZodTuple({...this._def,rest:s})}}ZodTuple.create=(a,s)=>{if(!Array.isArray(a))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:a,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(s)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(s){const{status:c,ctx:u}=this._processInputParams(s);if(u.parsedType!==ZodParsedType.object)return addIssueToContext(u,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:u.parsedType}),INVALID;const d=[],h=this._def.keyType,p=this._def.valueType;for(const m in u.data)d.push({key:h._parse(new ParseInputLazyPath(u,m,u.path,m)),value:p._parse(new ParseInputLazyPath(u,u.data[m],u.path,m))});return u.common.async?ParseStatus.mergeObjectAsync(c,d):ParseStatus.mergeObjectSync(c,d)}get element(){return this._def.valueType}static create(s,c,u){return c instanceof ZodType?new ZodRecord({keyType:s,valueType:c,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(u)}):new ZodRecord({keyType:ZodString.create(),valueType:s,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(c)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(s){const{status:c,ctx:u}=this._processInputParams(s);if(u.parsedType!==ZodParsedType.map)return addIssueToContext(u,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:u.parsedType}),INVALID;const d=this._def.keyType,h=this._def.valueType,p=[...u.data.entries()].map(([m,f],_)=>({key:d._parse(new ParseInputLazyPath(u,m,u.path,[_,"key"])),value:h._parse(new ParseInputLazyPath(u,f,u.path,[_,"value"]))}));if(u.common.async){const m=new Map;return Promise.resolve().then(async()=>{for(const f of p){const _=await f.key,y=await f.value;if(_.status==="aborted"||y.status==="aborted")return INVALID;(_.status==="dirty"||y.status==="dirty")&&c.dirty(),m.set(_.value,y.value)}return{status:c.value,value:m}})}else{const m=new Map;for(const f of p){const _=f.key,y=f.value;if(_.status==="aborted"||y.status==="aborted")return INVALID;(_.status==="dirty"||y.status==="dirty")&&c.dirty(),m.set(_.value,y.value)}return{status:c.value,value:m}}}}ZodMap.create=(a,s,c)=>new ZodMap({valueType:s,keyType:a,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(c)});class ZodSet extends ZodType{_parse(s){const{status:c,ctx:u}=this._processInputParams(s);if(u.parsedType!==ZodParsedType.set)return addIssueToContext(u,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:u.parsedType}),INVALID;const d=this._def;d.minSize!==null&&u.data.size<d.minSize.value&&(addIssueToContext(u,{code:ZodIssueCode.too_small,minimum:d.minSize.value,type:"set",inclusive:!0,exact:!1,message:d.minSize.message}),c.dirty()),d.maxSize!==null&&u.data.size>d.maxSize.value&&(addIssueToContext(u,{code:ZodIssueCode.too_big,maximum:d.maxSize.value,type:"set",inclusive:!0,exact:!1,message:d.maxSize.message}),c.dirty());const h=this._def.valueType;function p(f){const _=new Set;for(const y of f){if(y.status==="aborted")return INVALID;y.status==="dirty"&&c.dirty(),_.add(y.value)}return{status:c.value,value:_}}const m=[...u.data.values()].map((f,_)=>h._parse(new ParseInputLazyPath(u,f,u.path,_)));return u.common.async?Promise.all(m).then(f=>p(f)):p(m)}min(s,c){return new ZodSet({...this._def,minSize:{value:s,message:errorUtil.toString(c)}})}max(s,c){return new ZodSet({...this._def,maxSize:{value:s,message:errorUtil.toString(c)}})}size(s,c){return this.min(s,c).max(s,c)}nonempty(s){return this.min(1,s)}}ZodSet.create=(a,s)=>new ZodSet({valueType:a,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(s)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(s){const{ctx:c}=this._processInputParams(s);if(c.parsedType!==ZodParsedType.function)return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:c.parsedType}),INVALID;function u(m,f){return makeIssue({data:m,path:c.path,errorMaps:[c.common.contextualErrorMap,c.schemaErrorMap,getErrorMap(),errorMap].filter(_=>!!_),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:f}})}function d(m,f){return makeIssue({data:m,path:c.path,errorMaps:[c.common.contextualErrorMap,c.schemaErrorMap,getErrorMap(),errorMap].filter(_=>!!_),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:f}})}const h={errorMap:c.common.contextualErrorMap},p=c.data;if(this._def.returns instanceof ZodPromise){const m=this;return OK(async function(...f){const _=new ZodError([]),y=await m._def.args.parseAsync(f,h).catch(b=>{throw _.addIssue(u(f,b)),_}),E=await Reflect.apply(p,this,y);return await m._def.returns._def.type.parseAsync(E,h).catch(b=>{throw _.addIssue(d(E,b)),_})})}else{const m=this;return OK(function(...f){const _=m._def.args.safeParse(f,h);if(!_.success)throw new ZodError([u(f,_.error)]);const y=Reflect.apply(p,this,_.data),E=m._def.returns.safeParse(y,h);if(!E.success)throw new ZodError([d(y,E.error)]);return E.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...s){return new ZodFunction({...this._def,args:ZodTuple.create(s).rest(ZodUnknown.create())})}returns(s){return new ZodFunction({...this._def,returns:s})}implement(s){return this.parse(s)}strictImplement(s){return this.parse(s)}static create(s,c,u){return new ZodFunction({args:s||ZodTuple.create([]).rest(ZodUnknown.create()),returns:c||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(u)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(s){const{ctx:c}=this._processInputParams(s);return this._def.getter()._parse({data:c.data,path:c.path,parent:c})}}ZodLazy.create=(a,s)=>new ZodLazy({getter:a,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(s)});class ZodLiteral extends ZodType{_parse(s){if(s.data!==this._def.value){const c=this._getOrReturnCtx(s);return addIssueToContext(c,{received:c.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:s.data}}get value(){return this._def.value}}ZodLiteral.create=(a,s)=>new ZodLiteral({value:a,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(s)});function createZodEnum(a,s){return new ZodEnum({values:a,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(s)})}class ZodEnum extends ZodType{_parse(s){if(typeof s.data!="string"){const c=this._getOrReturnCtx(s),u=this._def.values;return addIssueToContext(c,{expected:util.joinValues(u),received:c.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(this._def.values.indexOf(s.data)===-1){const c=this._getOrReturnCtx(s),u=this._def.values;return addIssueToContext(c,{received:c.data,code:ZodIssueCode.invalid_enum_value,options:u}),INVALID}return OK(s.data)}get options(){return this._def.values}get enum(){const s={};for(const c of this._def.values)s[c]=c;return s}get Values(){const s={};for(const c of this._def.values)s[c]=c;return s}get Enum(){const s={};for(const c of this._def.values)s[c]=c;return s}extract(s){return ZodEnum.create(s)}exclude(s){return ZodEnum.create(this.options.filter(c=>!s.includes(c)))}}ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{_parse(s){const c=util.getValidEnumValues(this._def.values),u=this._getOrReturnCtx(s);if(u.parsedType!==ZodParsedType.string&&u.parsedType!==ZodParsedType.number){const d=util.objectValues(c);return addIssueToContext(u,{expected:util.joinValues(d),received:u.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(c.indexOf(s.data)===-1){const d=util.objectValues(c);return addIssueToContext(u,{received:u.data,code:ZodIssueCode.invalid_enum_value,options:d}),INVALID}return OK(s.data)}get enum(){return this._def.values}}ZodNativeEnum.create=(a,s)=>new ZodNativeEnum({values:a,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(s)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(s){const{ctx:c}=this._processInputParams(s);if(c.parsedType!==ZodParsedType.promise&&c.common.async===!1)return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:c.parsedType}),INVALID;const u=c.parsedType===ZodParsedType.promise?c.data:Promise.resolve(c.data);return OK(u.then(d=>this._def.type.parseAsync(d,{path:c.path,errorMap:c.common.contextualErrorMap})))}}ZodPromise.create=(a,s)=>new ZodPromise({type:a,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(s)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(s){const{status:c,ctx:u}=this._processInputParams(s),d=this._def.effect||null,h={addIssue:p=>{addIssueToContext(u,p),p.fatal?c.abort():c.dirty()},get path(){return u.path}};if(h.addIssue=h.addIssue.bind(h),d.type==="preprocess"){const p=d.transform(u.data,h);return u.common.issues.length?{status:"dirty",value:u.data}:u.common.async?Promise.resolve(p).then(m=>this._def.schema._parseAsync({data:m,path:u.path,parent:u})):this._def.schema._parseSync({data:p,path:u.path,parent:u})}if(d.type==="refinement"){const p=m=>{const f=d.refinement(m,h);if(u.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return m};if(u.common.async===!1){const m=this._def.schema._parseSync({data:u.data,path:u.path,parent:u});return m.status==="aborted"?INVALID:(m.status==="dirty"&&c.dirty(),p(m.value),{status:c.value,value:m.value})}else return this._def.schema._parseAsync({data:u.data,path:u.path,parent:u}).then(m=>m.status==="aborted"?INVALID:(m.status==="dirty"&&c.dirty(),p(m.value).then(()=>({status:c.value,value:m.value}))))}if(d.type==="transform")if(u.common.async===!1){const p=this._def.schema._parseSync({data:u.data,path:u.path,parent:u});if(!isValid(p))return p;const m=d.transform(p.value,h);if(m instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:c.value,value:m}}else return this._def.schema._parseAsync({data:u.data,path:u.path,parent:u}).then(p=>isValid(p)?Promise.resolve(d.transform(p.value,h)).then(m=>({status:c.value,value:m})):p);util.assertNever(d)}}ZodEffects.create=(a,s,c)=>new ZodEffects({schema:a,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:s,...processCreateParams(c)}),ZodEffects.createWithPreprocess=(a,s,c)=>new ZodEffects({schema:s,effect:{type:"preprocess",transform:a},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(c)});class ZodOptional extends ZodType{_parse(s){return this._getType(s)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}ZodOptional.create=(a,s)=>new ZodOptional({innerType:a,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(s)});class ZodNullable extends ZodType{_parse(s){return this._getType(s)===ZodParsedType.null?OK(null):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}ZodNullable.create=(a,s)=>new ZodNullable({innerType:a,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(s)});class ZodDefault extends ZodType{_parse(s){const{ctx:c}=this._processInputParams(s);let u=c.data;return c.parsedType===ZodParsedType.undefined&&(u=this._def.defaultValue()),this._def.innerType._parse({data:u,path:c.path,parent:c})}removeDefault(){return this._def.innerType}}ZodDefault.create=(a,s)=>new ZodDefault({innerType:a,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof s.default=="function"?s.default:()=>s.default,...processCreateParams(s)});class ZodCatch extends ZodType{_parse(s){const{ctx:c}=this._processInputParams(s),u={...c,common:{...c.common,issues:[]}},d=this._def.innerType._parse({data:u.data,path:u.path,parent:{...u}});return isAsync(d)?d.then(h=>({status:"valid",value:h.status==="valid"?h.value:this._def.catchValue({get error(){return new ZodError(u.common.issues)},input:u.data})})):{status:"valid",value:d.status==="valid"?d.value:this._def.catchValue({get error(){return new ZodError(u.common.issues)},input:u.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(a,s)=>new ZodCatch({innerType:a,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof s.catch=="function"?s.catch:()=>s.catch,...processCreateParams(s)});class ZodNaN extends ZodType{_parse(s){if(this._getType(s)!==ZodParsedType.nan){const c=this._getOrReturnCtx(s);return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:c.parsedType}),INVALID}return{status:"valid",value:s.data}}}ZodNaN.create=a=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(a)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(s){const{ctx:c}=this._processInputParams(s),u=c.data;return this._def.type._parse({data:u,path:c.path,parent:c})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(s){const{status:c,ctx:u}=this._processInputParams(s);if(u.common.async)return(async()=>{const d=await this._def.in._parseAsync({data:u.data,path:u.path,parent:u});return d.status==="aborted"?INVALID:d.status==="dirty"?(c.dirty(),DIRTY(d.value)):this._def.out._parseAsync({data:d.value,path:u.path,parent:u})})();{const d=this._def.in._parseSync({data:u.data,path:u.path,parent:u});return d.status==="aborted"?INVALID:d.status==="dirty"?(c.dirty(),{status:"dirty",value:d.value}):this._def.out._parseSync({data:d.value,path:u.path,parent:u})}}static create(s,c){return new ZodPipeline({in:s,out:c,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(s){const c=this._def.innerType._parse(s);return isValid(c)&&(c.value=Object.freeze(c.value)),c}}ZodReadonly.create=(a,s)=>new ZodReadonly({innerType:a,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(s)});const custom=(a,s={},c)=>a?ZodAny.create().superRefine((u,d)=>{var h,p;if(!a(u)){const m=typeof s=="function"?s(u):typeof s=="string"?{message:s}:s,f=(p=(h=m.fatal)!==null&&h!==void 0?h:c)!==null&&p!==void 0?p:!0,_=typeof m=="string"?{message:m}:m;d.addIssue({code:"custom",..._,fatal:f})}}):ZodAny.create(),late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;(function(a){a.ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(a,s={message:`Input not instance of ${a.name}`})=>custom(c=>c instanceof a,s),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),coerce={string:a=>ZodString.create({...a,coerce:!0}),number:a=>ZodNumber.create({...a,coerce:!0}),boolean:a=>ZodBoolean.create({...a,coerce:!0}),bigint:a=>ZodBigInt.create({...a,coerce:!0}),date:a=>ZodDate.create({...a,coerce:!0})},NEVER=INVALID;var z=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH,addIssueToContext,ParseStatus,INVALID,DIRTY,OK,isAborted,isDirty,isValid,isAsync,get util(){return util},get objectUtil(){return objectUtil},ZodParsedType,getParsedType,ZodType,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND,ZodBranded,ZodPipeline,ZodReadonly,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean,onumber,optional:optionalType,ostring,pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER,ZodIssueCode,quotelessJson,ZodError}),pRetry$2={exports:{}},retry$2={};function RetryOperation(a,s){typeof s=="boolean"&&(s={forever:s}),this._originalTimeouts=JSON.parse(JSON.stringify(a)),this._timeouts=a,this._options=s||{},this._maxRetryTime=s&&s.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var retry_operation=RetryOperation;RetryOperation.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},RetryOperation.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},RetryOperation.prototype.retry=function(a){if(this._timeout&&clearTimeout(this._timeout),!a)return!1;var s=new Date().getTime();if(a&&s-this._operationStart>=this._maxRetryTime)return this._errors.push(a),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(a);var c=this._timeouts.shift();if(c===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),c=this._cachedTimeouts.slice(-1);else return!1;var u=this;return this._timer=setTimeout(function(){u._attempts++,u._operationTimeoutCb&&(u._timeout=setTimeout(function(){u._operationTimeoutCb(u._attempts)},u._operationTimeout),u._options.unref&&u._timeout.unref()),u._fn(u._attempts)},c),this._options.unref&&this._timer.unref(),!0},RetryOperation.prototype.attempt=function(a,s){this._fn=a,s&&(s.timeout&&(this._operationTimeout=s.timeout),s.cb&&(this._operationTimeoutCb=s.cb));var c=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){c._operationTimeoutCb()},c._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},RetryOperation.prototype.try=function(a){console.log("Using RetryOperation.try() is deprecated"),this.attempt(a)},RetryOperation.prototype.start=function(a){console.log("Using RetryOperation.start() is deprecated"),this.attempt(a)},RetryOperation.prototype.start=RetryOperation.prototype.try,RetryOperation.prototype.errors=function(){return this._errors},RetryOperation.prototype.attempts=function(){return this._attempts},RetryOperation.prototype.mainError=function(){if(this._errors.length===0)return null;for(var a={},s=null,c=0,u=0;u<this._errors.length;u++){var d=this._errors[u],h=d.message,p=(a[h]||0)+1;a[h]=p,p>=c&&(s=d,c=p)}return s},function(a){var s=retry_operation;a.operation=function(c){var u=a.timeouts(c);return new s(u,{forever:c&&(c.forever||c.retries===1/0),unref:c&&c.unref,maxRetryTime:c&&c.maxRetryTime})},a.timeouts=function(c){if(c instanceof Array)return[].concat(c);var u={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var d in c)u[d]=c[d];if(u.minTimeout>u.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var h=[],p=0;p<u.retries;p++)h.push(this.createTimeout(p,u));return c&&c.forever&&!h.length&&h.push(this.createTimeout(p,u)),h.sort(function(m,f){return m-f}),h},a.createTimeout=function(c,u){var d=u.randomize?Math.random()+1:1,h=Math.round(d*Math.max(u.minTimeout,1)*Math.pow(u.factor,c));return h=Math.min(h,u.maxTimeout),h},a.wrap=function(c,u,d){if(u instanceof Array&&(d=u,u=null),!d){d=[];for(var h in c)typeof c[h]=="function"&&d.push(h)}for(var p=0;p<d.length;p++){var m=d[p],f=c[m];c[m]=(function(_){var y=a.operation(u),E=Array.prototype.slice.call(arguments,1),b=E.pop();E.push(function(T){y.retry(T)||(T&&(arguments[0]=y.mainError()),b.apply(this,arguments))}),y.attempt(function(){_.apply(c,E)})}).bind(c,f),c[m].options=u}}}(retry$2);var retry$1=retry$2;const retry=retry$1,networkErrorMsgs=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class AbortError extends Error{constructor(s){super(),s instanceof Error?(this.originalError=s,{message:s}=s):(this.originalError=new Error(s),this.originalError.stack=this.stack),this.name="AbortError",this.message=s}}const decorateErrorWithCounts=(a,s,c)=>{const u=c.retries-(s-1);return a.attemptNumber=s,a.retriesLeft=u,a},isNetworkError=a=>networkErrorMsgs.includes(a),pRetry=(a,s)=>new Promise((c,u)=>{s={onFailedAttempt:()=>{},retries:10,...s};const d=retry.operation(s);d.attempt(async h=>{try{c(await a(h))}catch(p){if(!(p instanceof Error)){u(new TypeError(`Non-error was thrown: "${p}". You should only throw errors.`));return}if(p instanceof AbortError)d.stop(),u(p.originalError);else if(p instanceof TypeError&&!isNetworkError(p.message))d.stop(),u(p);else{decorateErrorWithCounts(p,h,s);try{await s.onFailedAttempt(p)}catch(m){u(m);return}d.retry(p)||u(d.mainError())}}})});pRetry$2.exports=pRetry,pRetry$2.exports.default=pRetry,pRetry$2.exports.AbortError=AbortError;var pRetryExports=pRetry$2.exports;const pRetry$1=getDefaultExportFromCjs(pRetryExports);let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate$1(a){return typeof a=="string"&&REGEX.test(a)}const byteToHex=[];for(let a=0;a<256;++a)byteToHex.push((a+256).toString(16).slice(1));function unsafeStringify(a,s=0){return byteToHex[a[s+0]]+byteToHex[a[s+1]]+byteToHex[a[s+2]]+byteToHex[a[s+3]]+"-"+byteToHex[a[s+4]]+byteToHex[a[s+5]]+"-"+byteToHex[a[s+6]]+byteToHex[a[s+7]]+"-"+byteToHex[a[s+8]]+byteToHex[a[s+9]]+"-"+byteToHex[a[s+10]]+byteToHex[a[s+11]]+byteToHex[a[s+12]]+byteToHex[a[s+13]]+byteToHex[a[s+14]]+byteToHex[a[s+15]]}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(a,s,c){if(native.randomUUID&&!s&&!a)return native.randomUUID();a=a||{};const u=a.random||(a.rng||rng)();if(u[6]=u[6]&15|64,u[8]=u[8]&63|128,s){c=c||0;for(let d=0;d<16;++d)s[c+d]=u[d];return s}return unsafeStringify(u)}var define_process_env_default$2={};const isBrowser$1=()=>typeof window<"u"&&typeof window.document<"u",isWebWorker$1=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",isJsDom$1=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),isDeno$1=()=>typeof Deno<"u",isNode$1=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!isDeno$1(),getEnv$1=()=>{let a;return isBrowser$1()?a="browser":isNode$1()?a="node":isWebWorker$1()?a="webworker":isJsDom$1()?a="jsdom":isDeno$1()?a="deno":a="other",a};let runtimeEnvironment$1;async function getRuntimeEnvironment$1(){return runtimeEnvironment$1===void 0&&(runtimeEnvironment$1={library:"langchain-js",runtime:getEnv$1()}),runtimeEnvironment$1}function getEnvironmentVariable$1(a){try{return typeof process<"u"?define_process_env_default$2==null?void 0:define_process_env_default$2[a]:void 0}catch{return}}class BaseCallbackHandlerMethodsClass{}class BaseCallbackHandler extends BaseCallbackHandlerMethodsClass{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,get_lc_unique_name(this.constructor)]}constructor(s){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:getEnvironmentVariable$1("LANGCHAIN_CALLBACKS_BACKGROUND")!=="true"}),this.lc_kwargs=s||{},s&&(this.ignoreLLM=s.ignoreLLM??this.ignoreLLM,this.ignoreChain=s.ignoreChain??this.ignoreChain,this.ignoreAgent=s.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=s.ignoreRetriever??this.ignoreRetriever,this.awaitHandlers=s._awaitHandler??this.awaitHandlers)}copy(){return new this.constructor(this)}toJSON(){return Serializable.prototype.toJSON.call(this)}toJSONNotImplemented(){return Serializable.prototype.toJSONNotImplemented.call(this)}static fromMethods(s){class c extends BaseCallbackHandler{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:v4()}),Object.assign(this,s)}}return new c}}var ansiStyles={exports:{}};ansiStyles.exports,function(a){const s=(d=0)=>h=>`\x1B[${38+d};5;${h}m`,c=(d=0)=>(h,p,m)=>`\x1B[${38+d};2;${h};${p};${m}m`;function u(){const d=new Map,h={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};h.color.gray=h.color.blackBright,h.bgColor.bgGray=h.bgColor.bgBlackBright,h.color.grey=h.color.blackBright,h.bgColor.bgGrey=h.bgColor.bgBlackBright;for(const[p,m]of Object.entries(h)){for(const[f,_]of Object.entries(m))h[f]={open:`\x1B[${_[0]}m`,close:`\x1B[${_[1]}m`},m[f]=h[f],d.set(_[0],_[1]);Object.defineProperty(h,p,{value:m,enumerable:!1})}return Object.defineProperty(h,"codes",{value:d,enumerable:!1}),h.color.close="\x1B[39m",h.bgColor.close="\x1B[49m",h.color.ansi256=s(),h.color.ansi16m=c(),h.bgColor.ansi256=s(10),h.bgColor.ansi16m=c(10),Object.defineProperties(h,{rgbToAnsi256:{value:(p,m,f)=>p===m&&m===f?p<8?16:p>248?231:Math.round((p-8)/247*24)+232:16+36*Math.round(p/255*5)+6*Math.round(m/255*5)+Math.round(f/255*5),enumerable:!1},hexToRgb:{value:p=>{const m=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(p.toString(16));if(!m)return[0,0,0];let{colorString:f}=m.groups;f.length===3&&(f=f.split("").map(y=>y+y).join(""));const _=Number.parseInt(f,16);return[_>>16&255,_>>8&255,_&255]},enumerable:!1},hexToAnsi256:{value:p=>h.rgbToAnsi256(...h.hexToRgb(p)),enumerable:!1}}),h}Object.defineProperty(a,"exports",{enumerable:!0,get:u})}(ansiStyles);var ansiStylesExports=ansiStyles.exports;const styles=getDefaultExportFromCjs(ansiStylesExports);function _coerceToDict$1(a,s){return a&&!Array.isArray(a)&&typeof a=="object"?a:{[s]:a}}function stripNonAlphanumeric(a){return a.replace(/[-:.]/g,"")}function convertToDottedOrderFormat(a,s){return stripNonAlphanumeric(`${new Date(a).toISOString().slice(0,-1)}000Z`)+s}class BaseTracer extends BaseCallbackHandler{constructor(s){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(s){return s instanceof Error?s.message+(s!=null&&s.stack?`

${s.stack}`:""):typeof s=="string"?s:`${s}`}_addChildRun(s,c){s.child_runs.push(c)}async _startTrace(s){var d;const c=convertToDottedOrderFormat(s.start_time,s.id),u={...s};if(u.parent_run_id!==void 0){const h=this.runMap.get(u.parent_run_id);h&&(this._addChildRun(h,u),h.child_execution_order=Math.max(h.child_execution_order,u.child_execution_order),u.trace_id=h.trace_id,h.dotted_order!==void 0&&(u.dotted_order=[h.dotted_order,c].join(".")))}else u.trace_id=u.id,u.dotted_order=c;this.runMap.set(u.id,u),await((d=this.onRunCreate)==null?void 0:d.call(this,u))}async _endTrace(s){var u;const c=s.parent_run_id!==void 0&&this.runMap.get(s.parent_run_id);c?c.child_execution_order=Math.max(c.child_execution_order,s.child_execution_order):await this.persistRun(s),this.runMap.delete(s.id),await((u=this.onRunUpdate)==null?void 0:u.call(this,s))}_getExecutionOrder(s){const c=s!==void 0&&this.runMap.get(s);return c?c.child_execution_order+1:1}async handleLLMStart(s,c,u,d,h,p,m,f){var T;const _=this._getExecutionOrder(d),y=Date.now(),E=m?{...h,metadata:m}:h,b={id:u,name:f??s.id[s.id.length-1],parent_run_id:d,start_time:y,serialized:s,events:[{name:"start",time:new Date(y).toISOString()}],inputs:{prompts:c},execution_order:_,child_runs:[],child_execution_order:_,run_type:"llm",extra:E??{},tags:p||[]};return await this._startTrace(b),await((T=this.onLLMStart)==null?void 0:T.call(this,b)),b}async handleChatModelStart(s,c,u,d,h,p,m,f){var T;const _=this._getExecutionOrder(d),y=Date.now(),E=m?{...h,metadata:m}:h,b={id:u,name:f??s.id[s.id.length-1],parent_run_id:d,start_time:y,serialized:s,events:[{name:"start",time:new Date(y).toISOString()}],inputs:{messages:c},execution_order:_,child_runs:[],child_execution_order:_,run_type:"llm",extra:E??{},tags:p||[]};return await this._startTrace(b),await((T=this.onLLMStart)==null?void 0:T.call(this,b)),b}async handleLLMEnd(s,c){var d;const u=this.runMap.get(c);if(!u||(u==null?void 0:u.run_type)!=="llm")throw new Error("No LLM run to end.");return u.end_time=Date.now(),u.outputs=s,u.events.push({name:"end",time:new Date(u.end_time).toISOString()}),await((d=this.onLLMEnd)==null?void 0:d.call(this,u)),await this._endTrace(u),u}async handleLLMError(s,c){var d;const u=this.runMap.get(c);if(!u||(u==null?void 0:u.run_type)!=="llm")throw new Error("No LLM run to end.");return u.end_time=Date.now(),u.error=this.stringifyError(s),u.events.push({name:"error",time:new Date(u.end_time).toISOString()}),await((d=this.onLLMError)==null?void 0:d.call(this,u)),await this._endTrace(u),u}async handleChainStart(s,c,u,d,h,p,m,f){var b;const _=this._getExecutionOrder(d),y=Date.now(),E={id:u,name:f??s.id[s.id.length-1],parent_run_id:d,start_time:y,serialized:s,events:[{name:"start",time:new Date(y).toISOString()}],inputs:c,execution_order:_,child_execution_order:_,run_type:m??"chain",child_runs:[],extra:p?{metadata:p}:{},tags:h||[]};return await this._startTrace(E),await((b=this.onChainStart)==null?void 0:b.call(this,E)),E}async handleChainEnd(s,c,u,d,h){var m;const p=this.runMap.get(c);if(!p)throw new Error("No chain run to end.");return p.end_time=Date.now(),p.outputs=_coerceToDict$1(s,"output"),p.events.push({name:"end",time:new Date(p.end_time).toISOString()}),(h==null?void 0:h.inputs)!==void 0&&(p.inputs=_coerceToDict$1(h.inputs,"input")),await((m=this.onChainEnd)==null?void 0:m.call(this,p)),await this._endTrace(p),p}async handleChainError(s,c,u,d,h){var m;const p=this.runMap.get(c);if(!p)throw new Error("No chain run to end.");return p.end_time=Date.now(),p.error=this.stringifyError(s),p.events.push({name:"error",time:new Date(p.end_time).toISOString()}),(h==null?void 0:h.inputs)!==void 0&&(p.inputs=_coerceToDict$1(h.inputs,"input")),await((m=this.onChainError)==null?void 0:m.call(this,p)),await this._endTrace(p),p}async handleToolStart(s,c,u,d,h,p,m){var E;const f=this._getExecutionOrder(d),_=Date.now(),y={id:u,name:m??s.id[s.id.length-1],parent_run_id:d,start_time:_,serialized:s,events:[{name:"start",time:new Date(_).toISOString()}],inputs:{input:c},execution_order:f,child_execution_order:f,run_type:"tool",child_runs:[],extra:p?{metadata:p}:{},tags:h||[]};return await this._startTrace(y),await((E=this.onToolStart)==null?void 0:E.call(this,y)),y}async handleToolEnd(s,c){var d;const u=this.runMap.get(c);if(!u||(u==null?void 0:u.run_type)!=="tool")throw new Error("No tool run to end");return u.end_time=Date.now(),u.outputs={output:s},u.events.push({name:"end",time:new Date(u.end_time).toISOString()}),await((d=this.onToolEnd)==null?void 0:d.call(this,u)),await this._endTrace(u),u}async handleToolError(s,c){var d;const u=this.runMap.get(c);if(!u||(u==null?void 0:u.run_type)!=="tool")throw new Error("No tool run to end");return u.end_time=Date.now(),u.error=this.stringifyError(s),u.events.push({name:"error",time:new Date(u.end_time).toISOString()}),await((d=this.onToolError)==null?void 0:d.call(this,u)),await this._endTrace(u),u}async handleAgentAction(s,c){var h;const u=this.runMap.get(c);if(!u||(u==null?void 0:u.run_type)!=="chain")return;const d=u;d.actions=d.actions||[],d.actions.push(s),d.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:s}}),await((h=this.onAgentAction)==null?void 0:h.call(this,u))}async handleAgentEnd(s,c){var d;const u=this.runMap.get(c);!u||(u==null?void 0:u.run_type)!=="chain"||(u.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:s}}),await((d=this.onAgentEnd)==null?void 0:d.call(this,u)))}async handleRetrieverStart(s,c,u,d,h,p,m){var E;const f=this._getExecutionOrder(d),_=Date.now(),y={id:u,name:m??s.id[s.id.length-1],parent_run_id:d,start_time:_,serialized:s,events:[{name:"start",time:new Date(_).toISOString()}],inputs:{query:c},execution_order:f,child_execution_order:f,run_type:"retriever",child_runs:[],extra:p?{metadata:p}:{},tags:h||[]};return await this._startTrace(y),await((E=this.onRetrieverStart)==null?void 0:E.call(this,y)),y}async handleRetrieverEnd(s,c){var d;const u=this.runMap.get(c);if(!u||(u==null?void 0:u.run_type)!=="retriever")throw new Error("No retriever run to end");return u.end_time=Date.now(),u.outputs={documents:s},u.events.push({name:"end",time:new Date(u.end_time).toISOString()}),await((d=this.onRetrieverEnd)==null?void 0:d.call(this,u)),await this._endTrace(u),u}async handleRetrieverError(s,c){var d;const u=this.runMap.get(c);if(!u||(u==null?void 0:u.run_type)!=="retriever")throw new Error("No retriever run to end");return u.end_time=Date.now(),u.error=this.stringifyError(s),u.events.push({name:"error",time:new Date(u.end_time).toISOString()}),await((d=this.onRetrieverError)==null?void 0:d.call(this,u)),await this._endTrace(u),u}async handleText(s,c){var d;const u=this.runMap.get(c);!u||(u==null?void 0:u.run_type)!=="chain"||(u.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:s}}),await((d=this.onText)==null?void 0:d.call(this,u)))}async handleLLMNewToken(s,c,u,d,h,p){var f;const m=this.runMap.get(u);if(!m||(m==null?void 0:m.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return m.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:s,idx:c,chunk:p==null?void 0:p.chunk}}),await((f=this.onLLMNewToken)==null?void 0:f.call(this,m,s,{chunk:p==null?void 0:p.chunk})),m}}function wrap(a,s){return`${a.open}${s}${a.close}`}function tryJsonStringify(a,s){try{return JSON.stringify(a,null,2)}catch{return s}}function elapsed(a){if(!a.end_time)return"";const s=a.end_time-a.start_time;return s<1e3?`${s}ms`:`${(s/1e3).toFixed(2)}s`}const{color}=styles;class ConsoleCallbackHandler extends BaseTracer{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(s){return Promise.resolve()}getParents(s){const c=[];let u=s;for(;u.parent_run_id;){const d=this.runMap.get(u.parent_run_id);if(d)c.push(d),u=d;else break}return c}getBreadcrumbs(s){const c=[...this.getParents(s).reverse(),s].map((u,d,h)=>{const p=`${u.execution_order}:${u.run_type}:${u.name}`;return d===h.length-1?wrap(styles.bold,p):p}).join(" > ");return wrap(color.grey,c)}onChainStart(s){const c=this.getBreadcrumbs(s);console.log(`${wrap(color.green,"[chain/start]")} [${c}] Entering Chain run with input: ${tryJsonStringify(s.inputs,"[inputs]")}`)}onChainEnd(s){const c=this.getBreadcrumbs(s);console.log(`${wrap(color.cyan,"[chain/end]")} [${c}] [${elapsed(s)}] Exiting Chain run with output: ${tryJsonStringify(s.outputs,"[outputs]")}`)}onChainError(s){const c=this.getBreadcrumbs(s);console.log(`${wrap(color.red,"[chain/error]")} [${c}] [${elapsed(s)}] Chain run errored with error: ${tryJsonStringify(s.error,"[error]")}`)}onLLMStart(s){const c=this.getBreadcrumbs(s),u="prompts"in s.inputs?{prompts:s.inputs.prompts.map(d=>d.trim())}:s.inputs;console.log(`${wrap(color.green,"[llm/start]")} [${c}] Entering LLM run with input: ${tryJsonStringify(u,"[inputs]")}`)}onLLMEnd(s){const c=this.getBreadcrumbs(s);console.log(`${wrap(color.cyan,"[llm/end]")} [${c}] [${elapsed(s)}] Exiting LLM run with output: ${tryJsonStringify(s.outputs,"[response]")}`)}onLLMError(s){const c=this.getBreadcrumbs(s);console.log(`${wrap(color.red,"[llm/error]")} [${c}] [${elapsed(s)}] LLM run errored with error: ${tryJsonStringify(s.error,"[error]")}`)}onToolStart(s){var u;const c=this.getBreadcrumbs(s);console.log(`${wrap(color.green,"[tool/start]")} [${c}] Entering Tool run with input: "${(u=s.inputs.input)==null?void 0:u.trim()}"`)}onToolEnd(s){var u,d;const c=this.getBreadcrumbs(s);console.log(`${wrap(color.cyan,"[tool/end]")} [${c}] [${elapsed(s)}] Exiting Tool run with output: "${(d=(u=s.outputs)==null?void 0:u.output)==null?void 0:d.trim()}"`)}onToolError(s){const c=this.getBreadcrumbs(s);console.log(`${wrap(color.red,"[tool/error]")} [${c}] [${elapsed(s)}] Tool run errored with error: ${tryJsonStringify(s.error,"[error]")}`)}onRetrieverStart(s){const c=this.getBreadcrumbs(s);console.log(`${wrap(color.green,"[retriever/start]")} [${c}] Entering Retriever run with input: ${tryJsonStringify(s.inputs,"[inputs]")}`)}onRetrieverEnd(s){const c=this.getBreadcrumbs(s);console.log(`${wrap(color.cyan,"[retriever/end]")} [${c}] [${elapsed(s)}] Exiting Retriever run with output: ${tryJsonStringify(s.outputs,"[outputs]")}`)}onRetrieverError(s){const c=this.getBreadcrumbs(s);console.log(`${wrap(color.red,"[retriever/error]")} [${c}] [${elapsed(s)}] Retriever run errored with error: ${tryJsonStringify(s.error,"[error]")}`)}onAgentAction(s){const c=s,u=this.getBreadcrumbs(s);console.log(`${wrap(color.blue,"[agent/action]")} [${u}] Agent selected action: ${tryJsonStringify(c.actions[c.actions.length-1],"[action]")}`)}}var dist={},eventemitter3={exports:{}};(function(a){var s=Object.prototype.hasOwnProperty,c="~";function u(){}Object.create&&(u.prototype=Object.create(null),new u().__proto__||(c=!1));function d(f,_,y){this.fn=f,this.context=_,this.once=y||!1}function h(f,_,y,E,b){if(typeof y!="function")throw new TypeError("The listener must be a function");var T=new d(y,E||f,b),A=c?c+_:_;return f._events[A]?f._events[A].fn?f._events[A]=[f._events[A],T]:f._events[A].push(T):(f._events[A]=T,f._eventsCount++),f}function p(f,_){--f._eventsCount===0?f._events=new u:delete f._events[_]}function m(){this._events=new u,this._eventsCount=0}m.prototype.eventNames=function(){var f=[],_,y;if(this._eventsCount===0)return f;for(y in _=this._events)s.call(_,y)&&f.push(c?y.slice(1):y);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(_)):f},m.prototype.listeners=function(f){var _=c?c+f:f,y=this._events[_];if(!y)return[];if(y.fn)return[y.fn];for(var E=0,b=y.length,T=new Array(b);E<b;E++)T[E]=y[E].fn;return T},m.prototype.listenerCount=function(f){var _=c?c+f:f,y=this._events[_];return y?y.fn?1:y.length:0},m.prototype.emit=function(f,_,y,E,b,T){var A=c?c+f:f;if(!this._events[A])return!1;var v=this._events[A],S=arguments.length,O,I;if(v.fn){switch(v.once&&this.removeListener(f,v.fn,void 0,!0),S){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,_),!0;case 3:return v.fn.call(v.context,_,y),!0;case 4:return v.fn.call(v.context,_,y,E),!0;case 5:return v.fn.call(v.context,_,y,E,b),!0;case 6:return v.fn.call(v.context,_,y,E,b,T),!0}for(I=1,O=new Array(S-1);I<S;I++)O[I-1]=arguments[I];v.fn.apply(v.context,O)}else{var x=v.length,P;for(I=0;I<x;I++)switch(v[I].once&&this.removeListener(f,v[I].fn,void 0,!0),S){case 1:v[I].fn.call(v[I].context);break;case 2:v[I].fn.call(v[I].context,_);break;case 3:v[I].fn.call(v[I].context,_,y);break;case 4:v[I].fn.call(v[I].context,_,y,E);break;default:if(!O)for(P=1,O=new Array(S-1);P<S;P++)O[P-1]=arguments[P];v[I].fn.apply(v[I].context,O)}}return!0},m.prototype.on=function(f,_,y){return h(this,f,_,y,!1)},m.prototype.once=function(f,_,y){return h(this,f,_,y,!0)},m.prototype.removeListener=function(f,_,y,E){var b=c?c+f:f;if(!this._events[b])return this;if(!_)return p(this,b),this;var T=this._events[b];if(T.fn)T.fn===_&&(!E||T.once)&&(!y||T.context===y)&&p(this,b);else{for(var A=0,v=[],S=T.length;A<S;A++)(T[A].fn!==_||E&&!T[A].once||y&&T[A].context!==y)&&v.push(T[A]);v.length?this._events[b]=v.length===1?v[0]:v:p(this,b)}return this},m.prototype.removeAllListeners=function(f){var _;return f?(_=c?c+f:f,this._events[_]&&p(this,_)):(this._events=new u,this._eventsCount=0),this},m.prototype.off=m.prototype.removeListener,m.prototype.addListener=m.prototype.on,m.prefixed=c,m.EventEmitter=m,a.exports=m})(eventemitter3);var eventemitter3Exports=eventemitter3.exports,pTimeout$1={exports:{}},pFinally$1=(a,s)=>(s=s||(()=>{}),a.then(c=>new Promise(u=>{u(s())}).then(()=>c),c=>new Promise(u=>{u(s())}).then(()=>{throw c})));const pFinally=pFinally$1;class TimeoutError extends Error{constructor(s){super(s),this.name="TimeoutError"}}const pTimeout=(a,s,c)=>new Promise((u,d)=>{if(typeof s!="number"||s<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(s===1/0){u(a);return}const h=setTimeout(()=>{if(typeof c=="function"){try{u(c())}catch(f){d(f)}return}const p=typeof c=="string"?c:`Promise timed out after ${s} milliseconds`,m=c instanceof Error?c:new TimeoutError(p);typeof a.cancel=="function"&&a.cancel(),d(m)},s);pFinally(a.then(u,d),()=>{clearTimeout(h)})});pTimeout$1.exports=pTimeout,pTimeout$1.exports.default=pTimeout,pTimeout$1.exports.TimeoutError=TimeoutError;var pTimeoutExports=pTimeout$1.exports,priorityQueue={},lowerBound$1={};Object.defineProperty(lowerBound$1,"__esModule",{value:!0});function lowerBound(a,s,c){let u=0,d=a.length;for(;d>0;){const h=d/2|0;let p=u+h;c(a[p],s)<=0?(u=++p,d-=h+1):d=h}return u}lowerBound$1.default=lowerBound,Object.defineProperty(priorityQueue,"__esModule",{value:!0});const lower_bound_1=lowerBound$1;class PriorityQueue{constructor(){this._queue=[]}enqueue(s,c){c=Object.assign({priority:0},c);const u={priority:c.priority,run:s};if(this.size&&this._queue[this.size-1].priority>=c.priority){this._queue.push(u);return}const d=lower_bound_1.default(this._queue,u,(h,p)=>p.priority-h.priority);this._queue.splice(d,0,u)}dequeue(){const s=this._queue.shift();return s==null?void 0:s.run}filter(s){return this._queue.filter(c=>c.priority===s.priority).map(c=>c.run)}get size(){return this._queue.length}}priorityQueue.default=PriorityQueue,Object.defineProperty(dist,"__esModule",{value:!0});const EventEmitter=eventemitter3Exports,p_timeout_1=pTimeoutExports,priority_queue_1=priorityQueue,empty=()=>{},timeoutError=new p_timeout_1.TimeoutError;class PQueue extends EventEmitter{constructor(s){var c,u,d,h;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=empty,this._resolveIdle=empty,s=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:priority_queue_1.default},s),!(typeof s.intervalCap=="number"&&s.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(u=(c=s.intervalCap)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""}\` (${typeof s.intervalCap})`);if(s.interval===void 0||!(Number.isFinite(s.interval)&&s.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(h=(d=s.interval)===null||d===void 0?void 0:d.toString())!==null&&h!==void 0?h:""}\` (${typeof s.interval})`);this._carryoverConcurrencyCount=s.carryoverConcurrencyCount,this._isIntervalIgnored=s.intervalCap===1/0||s.interval===0,this._intervalCap=s.intervalCap,this._interval=s.interval,this._queue=new s.queueClass,this._queueClass=s.queueClass,this.concurrency=s.concurrency,this._timeout=s.timeout,this._throwOnTimeout=s.throwOnTimeout===!0,this._isPaused=s.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=empty,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=empty,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const s=Date.now();if(this._intervalId===void 0){const c=this._intervalEnd-s;if(c<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},c)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const s=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const c=this._queue.dequeue();return c?(this.emit("active"),c(),s&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(s){if(!(typeof s=="number"&&s>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${s}\` (${typeof s})`);this._concurrency=s,this._processQueue()}async add(s,c={}){return new Promise((u,d)=>{const h=async()=>{this._pendingCount++,this._intervalCount++;try{const p=this._timeout===void 0&&c.timeout===void 0?s():p_timeout_1.default(Promise.resolve(s()),c.timeout===void 0?this._timeout:c.timeout,()=>{(c.throwOnTimeout===void 0?this._throwOnTimeout:c.throwOnTimeout)&&d(timeoutError)});u(await p)}catch(p){d(p)}this._next()};this._queue.enqueue(h,c),this._tryToStartAnother(),this.emit("add")})}async addAll(s,c){return Promise.all(s.map(async u=>this.add(u,c)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(s=>{const c=this._resolveEmpty;this._resolveEmpty=()=>{c(),s()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(s=>{const c=this._resolveIdle;this._resolveIdle=()=>{c(),s()}})}get size(){return this._queue.size}sizeBy(s){return this._queue.filter(s).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(s){this._timeout=s}}var _default=dist.default=PQueue;const STATUS_NO_RETRY$1=[400,401,403,404,405,406,407,408],STATUS_IGNORE=[409];let AsyncCaller$1=class{constructor(a){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=a.maxConcurrency??1/0,this.maxRetries=a.maxRetries??6;const s="default"in _default?_default.default:_default;this.queue=new s({concurrency:this.maxConcurrency}),this.onFailedResponseHook=a==null?void 0:a.onFailedResponseHook}call(a,...s){const c=this.onFailedResponseHook;return this.queue.add(()=>pRetry$1(()=>a(...s).catch(u=>{throw u instanceof Error?u:new Error(u)}),{async onFailedAttempt(u){if(u.message.startsWith("Cancel")||u.message.startsWith("TimeoutError")||u.message.startsWith("AbortError")||(u==null?void 0:u.code)==="ECONNABORTED")throw u;const d=u==null?void 0:u.response,h=d==null?void 0:d.status;if(h){if(STATUS_NO_RETRY$1.includes(+h))throw u;if(STATUS_IGNORE.includes(+h))return;c&&await c(d)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(a,s,...c){return a.signal?Promise.race([this.call(s,...c),new Promise((u,d)=>{var h;(h=a.signal)==null||h.addEventListener("abort",()=>{d(new Error("AbortError"))})})]):this.call(s,...c)}fetch(...a){return this.call(()=>fetch(...a).then(s=>s.ok?s:Promise.reject(s)))}};function isLangChainMessage(a){return typeof(a==null?void 0:a._getType)=="function"}function convertLangChainMessageToExample(a){const s={type:a._getType(),data:{content:a.content}};return a!=null&&a.additional_kwargs&&Object.keys(a.additional_kwargs).length>0&&(s.data.additional_kwargs={...a.additional_kwargs}),s}var define_process_env_default$1={};let globalEnv;const isBrowser=()=>typeof window<"u"&&typeof window.document<"u",isWebWorker=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",isJsDom=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),isDeno=()=>typeof Deno<"u",isNode=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!isDeno(),getEnv=()=>globalEnv||(isBrowser()?globalEnv="browser":isNode()?globalEnv="node":isWebWorker()?globalEnv="webworker":isJsDom()?globalEnv="jsdom":isDeno()?globalEnv="deno":globalEnv="other",globalEnv);let runtimeEnvironment;async function getRuntimeEnvironment(){if(runtimeEnvironment===void 0){const a=getEnv(),s=getShas();runtimeEnvironment={library:"langsmith",runtime:a,sdk:"langsmith-js",sdk_version:__version__,...s}}return runtimeEnvironment}function getLangChainEnvVarsMetadata(){const a=getEnvironmentVariables()||{},s={},c=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION"];for(const[u,d]of Object.entries(a))u.startsWith("LANGCHAIN_")&&typeof d=="string"&&!c.includes(u)&&!u.toLowerCase().includes("key")&&!u.toLowerCase().includes("secret")&&!u.toLowerCase().includes("token")&&(u==="LANGCHAIN_REVISION_ID"?s.revision_id=d:s[u]=d);return s}function getEnvironmentVariables(){try{return typeof process<"u"&&define_process_env_default$1?Object.entries(define_process_env_default$1).reduce((a,[s,c])=>(a[s]=String(c),a),{}):void 0}catch{return}}function getEnvironmentVariable(a){try{return typeof process<"u"?define_process_env_default$1==null?void 0:define_process_env_default$1[a]:void 0}catch{return}}let cachedCommitSHAs;function getShas(){if(cachedCommitSHAs!==void 0)return cachedCommitSHAs;const a=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],s={};for(const c of a){const u=getEnvironmentVariable(c);u!==void 0&&(s[c]=u)}return cachedCommitSHAs=s,s}async function mergeRuntimeEnvIntoRunCreates(a){const s=await getRuntimeEnvironment(),c=getLangChainEnvVarsMetadata();return a.map(u=>{const d=u.extra??{},h=d.metadata;return u.extra={...d,runtime:{...s,...d==null?void 0:d.runtime},metadata:{...c,...c.revision_id||u.revision_id?{revision_id:u.revision_id??c.revision_id}:{},...h}},u})}const getTracingSamplingRate=()=>{const a=getEnvironmentVariable("LANGCHAIN_TRACING_SAMPLING_RATE");if(a===void 0)return;const s=parseFloat(a);if(s<0||s>1)throw new Error(`LANGCHAIN_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${s}`);return s},isLocalhost=a=>{const s=a.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return s==="localhost"||s==="127.0.0.1"||s==="::1"},raiseForStatus=async(a,s)=>{const c=await a.text();if(!a.ok)throw new Error(`Failed to ${s}: ${a.status} ${a.statusText} ${c}`)};async function toArray(a){const s=[];for await(const c of a)s.push(c);return s}function trimQuotes(a){if(a!==void 0)return a.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}function assertUuid(a){if(!validate$1(a))throw new Error(`Invalid UUID: ${a}`)}const handle429=async a=>{if((a==null?void 0:a.status)===429){const s=parseInt(a.headers.get("retry-after")??"30",10)*1e3;if(s>0)return await new Promise(c=>setTimeout(c,s)),!0}return!1};class Queue{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]})}get size(){return this.items.length}push(s){return new Promise(c=>{this.items.push([s,c])})}pop(s){if(s<1)throw new Error("Number of items to pop off may not be less than 1.");const c=[];for(;c.length<s&&this.items.length;){const u=this.items.shift();if(u)c.push(u);else break}return[c.map(u=>u[0]),()=>c.forEach(u=>u[1]())]}}const DEFAULT_BATCH_SIZE_LIMIT_BYTES=20971520;class Client{constructor(s={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sampledPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"batchEndpointSupported",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new Queue}),Object.defineProperty(this,"pendingAutoBatchedRunLimit",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchInitialDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:50}),Object.defineProperty(this,"serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const c=Client.getDefaultClientConfig();this.tracingSampleRate=getTracingSamplingRate(),this.apiUrl=trimQuotes(s.apiUrl??c.apiUrl)??"",this.apiKey=trimQuotes(s.apiKey??c.apiKey),this.webUrl=trimQuotes(s.webUrl??c.webUrl),this.timeout_ms=s.timeout_ms??12e3,this.caller=new AsyncCaller$1(s.callerOptions??{}),this.batchIngestCaller=new AsyncCaller$1({...s.callerOptions??{},onFailedResponseHook:handle429}),this.hideInputs=s.hideInputs??c.hideInputs,this.hideOutputs=s.hideOutputs??c.hideOutputs,this.autoBatchTracing=s.autoBatchTracing??this.autoBatchTracing,this.pendingAutoBatchedRunLimit=s.pendingAutoBatchedRunLimit??this.pendingAutoBatchedRunLimit,this.fetchOptions=s.fetchOptions||{}}static getDefaultClientConfig(){const s=getEnvironmentVariable("LANGCHAIN_API_KEY"),c=getEnvironmentVariable("LANGCHAIN_ENDPOINT")??"https://api.smith.langchain.com",u=getEnvironmentVariable("LANGCHAIN_HIDE_INPUTS")==="true",d=getEnvironmentVariable("LANGCHAIN_HIDE_OUTPUTS")==="true";return{apiUrl:c,apiKey:s,webUrl:void 0,hideInputs:u,hideOutputs:d}}getHostUrl(){return this.webUrl?this.webUrl:isLocalhost(this.apiUrl)?(this.webUrl="http://localhost","http://localhost"):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com","https://dev.smith.langchain.com"):(this.webUrl="https://smith.langchain.com","https://smith.langchain.com")}get headers(){const s={"User-Agent":`langsmith-js/${__version__}`};return this.apiKey&&(s["x-api-key"]=`${this.apiKey}`),s}processInputs(s){return this.hideInputs===!1?s:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(s):s}processOutputs(s){return this.hideOutputs===!1?s:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(s):s}prepareRunCreateOrUpdateInputs(s){const c={...s};return c.inputs!==void 0&&(c.inputs=this.processInputs(c.inputs)),c.outputs!==void 0&&(c.outputs=this.processOutputs(c.outputs)),c}async _getResponse(s,c){const u=(c==null?void 0:c.toString())??"",d=`${this.apiUrl}${s}?${u}`,h=await this.caller.call(fetch,d,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(!h.ok)throw new Error(`Failed to fetch ${s}: ${h.status} ${h.statusText}`);return h}async _get(s,c){return(await this._getResponse(s,c)).json()}async*_getPaginated(s,c=new URLSearchParams){let u=Number(c.get("offset"))||0;const d=Number(c.get("limit"))||100;for(;;){c.set("offset",String(u)),c.set("limit",String(d));const h=`${this.apiUrl}${s}?${c}`,p=await this.caller.call(fetch,h,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(!p.ok)throw new Error(`Failed to fetch ${s}: ${p.status} ${p.statusText}`);const m=await p.json();if(m.length===0||(yield m,m.length<d))break;u+=m.length}}async*_getCursorPaginatedList(s,c=null,u="POST",d="runs"){const h=c?{...c}:{};for(;;){const p=await(await this.caller.call(fetch,`${this.apiUrl}${s}`,{method:u,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(h)})).json();if(!p||!p[d])break;yield p[d];const m=p.cursors;if(!m||!m.next)break;h.cursor=m.next}}_filterForSampling(s,c=!1){if(this.tracingSampleRate===void 0)return s;if(c){const u=[];for(const d of s)this.sampledPostUuids.has(d.id)&&(u.push(d),this.sampledPostUuids.delete(d.id));return u}else{const u=[];for(const d of s)Math.random()<this.tracingSampleRate&&(u.push(d),this.sampledPostUuids.add(d.id));return u}}async drainAutoBatchQueue(){for(;this.autoBatchQueue.size>=0;){const[s,c]=this.autoBatchQueue.pop(this.pendingAutoBatchedRunLimit);if(!s.length){c();return}try{await this.batchIngestRuns({runCreates:s.filter(u=>u.action==="create").map(u=>u.item),runUpdates:s.filter(u=>u.action==="update").map(u=>u.item)})}finally{c()}}}async processRunOperation(s,c){const u=this.autoBatchTimeout;clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0;const d=this.autoBatchQueue.push(s);return(c||this.autoBatchQueue.size>this.pendingAutoBatchedRunLimit)&&await this.drainAutoBatchQueue(),this.autoBatchQueue.size>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue().catch(console.error)},u?this.autoBatchAggregationDelayMs:this.autoBatchInitialDelayMs)),d}async _getServerInfo(){const s=await fetch(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(!s.ok)throw await s.text(),new Error("Failed to retrieve server info.");return s.json()}async batchEndpointIsSupported(){try{this.serverInfo=await this._getServerInfo()}catch{return!1}return!0}async createRun(s){if(!this._filterForSampling([s]).length)return;const c={...this.headers,"Content-Type":"application/json"},u=s.project_name;delete s.project_name;const d=this.prepareRunCreateOrUpdateInputs({session_name:u,...s,start_time:s.start_time??Date.now()});if(this.autoBatchTracing&&d.trace_id!==void 0&&d.dotted_order!==void 0){this.processRunOperation({action:"create",item:d}).catch(console.error);return}const h=await mergeRuntimeEnvIntoRunCreates([d]),p=await this.caller.call(fetch,`${this.apiUrl}/runs`,{method:"POST",headers:c,body:JSON.stringify(h[0]),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(p,"create run")}async batchIngestRuns({runCreates:s,runUpdates:c}){var _,y;if(s===void 0&&c===void 0)return;let u=(s==null?void 0:s.map(E=>this.prepareRunCreateOrUpdateInputs(E)))??[],d=(c==null?void 0:c.map(E=>this.prepareRunCreateOrUpdateInputs(E)))??[];if(u.length>0&&d.length>0){const E=u.reduce((T,A)=>(A.id&&(T[A.id]=A),T),{}),b=[];for(const T of d)T.id!==void 0&&E[T.id]?E[T.id]={...E[T.id],...T}:b.push(T);u=Object.values(E),d=b}const h={post:this._filterForSampling(u),patch:this._filterForSampling(d,!0)};if(!h.post.length&&!h.patch.length)return;if(u=await mergeRuntimeEnvIntoRunCreates(u),this.batchEndpointSupported===void 0&&(this.batchEndpointSupported=await this.batchEndpointIsSupported()),!this.batchEndpointSupported){this.autoBatchTracing=!1;for(const E of h.post)await this.createRun(E);for(const E of h.patch)E.id!==void 0&&await this.updateRun(E.id,E);return}const p=((y=(_=this.serverInfo)==null?void 0:_.batch_ingest_config)==null?void 0:y.size_limit_bytes)??DEFAULT_BATCH_SIZE_LIMIT_BYTES,m={post:[],patch:[]};let f=0;for(const E of["post","patch"]){const b=E,T=h[b].reverse();let A=T.pop();for(;A!==void 0;){const v=JSON.stringify(A);f>0&&f+v.length>p&&(await this._postBatchIngestRuns(JSON.stringify(m)),f=0,m.post=[],m.patch=[]),f+=v.length,m[b].push(A),A=T.pop()}}(m.post.length>0||m.patch.length>0)&&await this._postBatchIngestRuns(JSON.stringify(m))}async _postBatchIngestRuns(s){const c={...this.headers,"Content-Type":"application/json",Accept:"application/json"},u=await this.batchIngestCaller.call(fetch,`${this.apiUrl}/runs/batch`,{method:"POST",headers:c,body:s,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(u,"batch create run")}async updateRun(s,c){assertUuid(s),c.inputs&&(c.inputs=this.processInputs(c.inputs)),c.outputs&&(c.outputs=this.processOutputs(c.outputs));const u={...c,id:s};if(!this._filterForSampling([u],!0).length)return;if(this.autoBatchTracing&&u.trace_id!==void 0&&u.dotted_order!==void 0){if(c.end_time!==void 0&&u.parent_run_id===void 0){await this.processRunOperation({action:"update",item:u},!0);return}else this.processRunOperation({action:"update",item:u}).catch(console.error);return}const d={...this.headers,"Content-Type":"application/json"},h=await this.caller.call(fetch,`${this.apiUrl}/runs/${s}`,{method:"PATCH",headers:d,body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(h,"update run")}async readRun(s,{loadChildRuns:c}={loadChildRuns:!1}){assertUuid(s);let u=await this._get(`/runs/${s}`);return c&&u.child_run_ids&&(u=await this._loadChildRuns(u)),u}async getRunUrl({runId:s,run:c,projectOpts:u}){if(c!==void 0){let d;c.session_id?d=c.session_id:u!=null&&u.projectName?d=(await this.readProject({projectName:u==null?void 0:u.projectName})).id:u!=null&&u.projectId?d=u==null?void 0:u.projectId:d=(await this.readProject({projectName:getEnvironmentVariable("LANGCHAIN_PROJECT")||"default"})).id;const h=await this._getTenantId();return`${this.getHostUrl()}/o/${h}/projects/p/${d}/r/${c.id}?poll=true`}else if(s!==void 0){const d=await this.readRun(s);if(!d.app_path)throw new Error(`Run ${s} has no app_path`);return`${this.getHostUrl()}${d.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(s){const c=await toArray(this.listRuns({id:s.child_run_ids})),u={},d={};c.sort((h,p)=>((h==null?void 0:h.dotted_order)??"").localeCompare((p==null?void 0:p.dotted_order)??""));for(const h of c){if(h.parent_run_id===null||h.parent_run_id===void 0)throw new Error(`Child run ${h.id} has no parent`);h.parent_run_id in u||(u[h.parent_run_id]=[]),u[h.parent_run_id].push(h),d[h.id]=h}s.child_runs=u[s.id]||[];for(const h in u)h!==s.id&&(d[h].child_runs=u[h]);return s}async*listRuns(s){const{projectId:c,projectName:u,parentRunId:d,traceId:h,referenceExampleId:p,startTime:m,executionOrder:f,runType:_,error:y,id:E,query:b,filter:T,traceFilter:A,treeFilter:v,limit:S}=s;let O=[];if(c&&(O=Array.isArray(c)?c:[c]),u){const x=Array.isArray(u)?u:[u],P=await Promise.all(x.map(w=>this.readProject({projectName:w}).then(C=>C.id)));O.push(...P)}const I={session:O.length?O:null,run_type:_,reference_example:p,query:b,filter:T,trace_filter:A,tree_filter:v,execution_order:f,parent_run:d,start_time:m?m.toISOString():null,error:y,id:E,limit:S,trace:h};for await(const x of this._getCursorPaginatedList("/runs/query",I))yield*x}async shareRun(s,{shareId:c}={}){const u={run_id:s,share_token:c||v4()};assertUuid(s);const d=await(await this.caller.call(fetch,`${this.apiUrl}/runs/${s}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(d===null||!("share_token"in d))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${d.share_token}/r`}async unshareRun(s){assertUuid(s);const c=await this.caller.call(fetch,`${this.apiUrl}/runs/${s}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(c,"unshare run")}async readRunSharedLink(s){assertUuid(s);const c=await(await this.caller.call(fetch,`${this.apiUrl}/runs/${s}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(!(c===null||!("share_token"in c)))return`${this.getHostUrl()}/public/${c.share_token}/r`}async listSharedRuns(s,{runIds:c}={}){const u=new URLSearchParams({share_token:s});if(c!==void 0)for(const d of c)u.append("id",d);return assertUuid(s),await(await this.caller.call(fetch,`${this.apiUrl}/public/${s}/runs${u}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async readDatasetSharedSchema(s,c){if(!s&&!c)throw new Error("Either datasetId or datasetName must be given");s||(s=(await this.readDataset({datasetName:c})).id),assertUuid(s);const u=await(await this.caller.call(fetch,`${this.apiUrl}/datasets/${s}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return u.url=`${this.getHostUrl()}/public/${u.share_token}/d`,u}async shareDataset(s,c){if(!s&&!c)throw new Error("Either datasetId or datasetName must be given");s||(s=(await this.readDataset({datasetName:c})).id);const u={dataset_id:s};assertUuid(s);const d=await(await this.caller.call(fetch,`${this.apiUrl}/datasets/${s}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return d.url=`${this.getHostUrl()}/public/${d.share_token}/d`,d}async unshareDataset(s){assertUuid(s);const c=await this.caller.call(fetch,`${this.apiUrl}/datasets/${s}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(c,"unshare dataset")}async readSharedDataset(s){return assertUuid(s),await(await this.caller.call(fetch,`${this.apiUrl}/public/${s}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async createProject({projectName:s,description:c=null,metadata:u=null,upsert:d=!1,projectExtra:h=null,referenceDatasetId:p=null}){const m=d?"?upsert=true":"",f=`${this.apiUrl}/sessions${m}`,_=h||{};u&&(_.metadata=u);const y={name:s,extra:_,description:c};p!==null&&(y.reference_dataset_id=p);const E=await this.caller.call(fetch,f,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(y),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),b=await E.json();if(!E.ok)throw new Error(`Failed to create session ${s}: ${E.status} ${E.statusText}`);return b}async updateProject(s,{name:c=null,description:u=null,metadata:d=null,projectExtra:h=null,endTime:p=null}){const m=`${this.apiUrl}/sessions/${s}`;let f=h;d&&(f={...f||{},metadata:d});const _={name:c,extra:f,description:u,end_time:p?new Date(p).toISOString():null},y=await this.caller.call(fetch,m,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(_),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),E=await y.json();if(!y.ok)throw new Error(`Failed to update project ${s}: ${y.status} ${y.statusText}`);return E}async hasProject({projectId:s,projectName:c}){let u="/sessions";const d=new URLSearchParams;if(s!==void 0&&c!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(s!==void 0)assertUuid(s),u+=`/${s}`;else if(c!==void 0)d.append("name",c);else throw new Error("Must provide projectName or projectId");const h=await this.caller.call(fetch,`${this.apiUrl}${u}?${d}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{const p=await h.json();return h.ok?Array.isArray(p)?p.length>0:!0:!1}catch{return!1}}async readProject({projectId:s,projectName:c,includeStats:u}){let d="/sessions";const h=new URLSearchParams;if(s!==void 0&&c!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(s!==void 0)assertUuid(s),d+=`/${s}`;else if(c!==void 0)h.append("name",c);else throw new Error("Must provide projectName or projectId");u!==void 0&&h.append("include_stats",u.toString());const p=await this._get(d,h);let m;if(Array.isArray(p)){if(p.length===0)throw new Error(`Project[id=${s}, name=${c}] not found`);m=p[0]}else m=p;return m}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const s=new URLSearchParams({limit:"1"});for await(const c of this._getPaginated("/sessions",s))return this._tenantId=c[0].tenant_id,c[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:s,name:c,nameContains:u,referenceDatasetId:d,referenceDatasetName:h,referenceFree:p}={}){const m=new URLSearchParams;if(s!==void 0)for(const f of s)m.append("id",f);if(c!==void 0&&m.append("name",c),u!==void 0&&m.append("name_contains",u),d!==void 0)m.append("reference_dataset",d);else if(h!==void 0){const f=await this.readDataset({datasetName:h});m.append("reference_dataset",f.id)}p!==void 0&&m.append("reference_free",p.toString());for await(const f of this._getPaginated("/sessions",m))yield*f}async deleteProject({projectId:s,projectName:c}){let u;if(s===void 0&&c===void 0)throw new Error("Must provide projectName or projectId");if(s!==void 0&&c!==void 0)throw new Error("Must provide either projectName or projectId, not both");s===void 0?u=(await this.readProject({projectName:c})).id:u=s,assertUuid(u);const d=await this.caller.call(fetch,`${this.apiUrl}/sessions/${u}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(d,`delete session ${u} (${c})`)}async uploadCsv({csvFile:s,fileName:c,inputKeys:u,outputKeys:d,description:h,dataType:p,name:m}){const f=`${this.apiUrl}/datasets/upload`,_=new FormData;_.append("file",s,c),u.forEach(E=>{_.append("input_keys",E)}),d.forEach(E=>{_.append("output_keys",E)}),h&&_.append("description",h),p&&_.append("data_type",p),m&&_.append("name",m);const y=await this.caller.call(fetch,f,{method:"POST",headers:this.headers,body:_,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(!y.ok){const E=await y.json();throw E.detail&&E.detail.includes("already exists")?new Error(`Dataset ${c} already exists`):new Error(`Failed to upload CSV: ${y.status} ${y.statusText}`)}return await y.json()}async createDataset(s,{description:c,dataType:u}={}){const d={name:s,description:c};u&&(d.data_type=u);const h=await this.caller.call(fetch,`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(!h.ok){const p=await h.json();throw p.detail&&p.detail.includes("already exists")?new Error(`Dataset ${s} already exists`):new Error(`Failed to create dataset ${h.status} ${h.statusText}`)}return await h.json()}async readDataset({datasetId:s,datasetName:c}){let u="/datasets";const d=new URLSearchParams({limit:"1"});if(s!==void 0&&c!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(s!==void 0)assertUuid(s),u+=`/${s}`;else if(c!==void 0)d.append("name",c);else throw new Error("Must provide datasetName or datasetId");const h=await this._get(u,d);let p;if(Array.isArray(h)){if(h.length===0)throw new Error(`Dataset[id=${s}, name=${c}] not found`);p=h[0]}else p=h;return p}async diffDatasetVersions({datasetId:s,datasetName:c,fromVersion:u,toVersion:d}){let h=s;if(h===void 0&&c===void 0)throw new Error("Must provide either datasetName or datasetId");if(h!==void 0&&c!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");h===void 0&&(h=(await this.readDataset({datasetName:c})).id);const p=new URLSearchParams({from_version:typeof u=="string"?u:u.toISOString(),to_version:typeof d=="string"?d:d.toISOString()});return await this._get(`/datasets/${h}/versions/diff`,p)}async readDatasetOpenaiFinetuning({datasetId:s,datasetName:c}){const u="/datasets";if(s===void 0)if(c!==void 0)s=(await this.readDataset({datasetName:c})).id;else throw new Error("Must provide datasetName or datasetId");return(await(await this._getResponse(`${u}/${s}/openai_ft`)).text()).trim().split(`
`).map(d=>JSON.parse(d))}async*listDatasets({limit:s=100,offset:c=0,datasetIds:u,datasetName:d,datasetNameContains:h}={}){const p="/datasets",m=new URLSearchParams({limit:s.toString(),offset:c.toString()});if(u!==void 0)for(const f of u)m.append("id",f);d!==void 0&&m.append("name",d),h!==void 0&&m.append("name_contains",h);for await(const f of this._getPaginated(p,m))yield*f}async deleteDataset({datasetId:s,datasetName:c}){let u="/datasets",d=s;if(s!==void 0&&c!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(c!==void 0&&(d=(await this.readDataset({datasetName:c})).id),d!==void 0)assertUuid(d),u+=`/${d}`;else throw new Error("Must provide datasetName or datasetId");const h=await this.caller.call(fetch,this.apiUrl+u,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(!h.ok)throw new Error(`Failed to delete ${u}: ${h.status} ${h.statusText}`);await h.json()}async createExample(s,c,{datasetId:u,datasetName:d,createdAt:h,exampleId:p}){var y;let m=u;if(m===void 0&&d===void 0)throw new Error("Must provide either datasetName or datasetId");if(m!==void 0&&d!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");m===void 0&&(m=(await this.readDataset({datasetName:d})).id);const f={dataset_id:m,inputs:s,outputs:c,created_at:(y=h||new Date)==null?void 0:y.toISOString(),id:p},_=await this.caller.call(fetch,`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(f),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(!_.ok)throw new Error(`Failed to create example: ${_.status} ${_.statusText}`);return await _.json()}async createExamples(s){const{inputs:c,outputs:u,sourceRunIds:d,exampleIds:h,datasetId:p,datasetName:m}=s;let f=p;if(f===void 0&&m===void 0)throw new Error("Must provide either datasetName or datasetId");if(f!==void 0&&m!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");f===void 0&&(f=(await this.readDataset({datasetName:m})).id);const _=c.map((E,b)=>({dataset_id:f,inputs:E,outputs:u?u[b]:void 0,id:h?h[b]:void 0,source_run_id:d?d[b]:void 0})),y=await this.caller.call(fetch,`${this.apiUrl}/examples/bulk`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(_),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(!y.ok)throw new Error(`Failed to create examples: ${y.status} ${y.statusText}`);return await y.json()}async createLLMExample(s,c,u){return this.createExample({input:s},{output:c},u)}async createChatExample(s,c,u){const d=s.map(p=>isLangChainMessage(p)?convertLangChainMessageToExample(p):p),h=isLangChainMessage(c)?convertLangChainMessageToExample(c):c;return this.createExample({input:d},{output:h},u)}async readExample(s){assertUuid(s);const c=`/examples/${s}`;return await this._get(c)}async*listExamples({datasetId:s,datasetName:c,exampleIds:u,asOf:d,inlineS3Urls:h}={}){let p;if(s!==void 0&&c!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(s!==void 0)p=s;else if(c!==void 0)p=(await this.readDataset({datasetName:c})).id;else throw new Error("Must provide a datasetName or datasetId");const m=new URLSearchParams({dataset:p}),f=d?typeof d=="string"?d:d==null?void 0:d.toISOString():void 0;f&&m.append("as_of",f);const _=h??!0;if(m.append("inline_s3_urls",_.toString()),u!==void 0)for(const y of u)m.append("id",y);for await(const y of this._getPaginated("/examples",m))yield*y}async deleteExample(s){assertUuid(s);const c=`/examples/${s}`,u=await this.caller.call(fetch,this.apiUrl+c,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(!u.ok)throw new Error(`Failed to delete ${c}: ${u.status} ${u.statusText}`);await u.json()}async updateExample(s,c){assertUuid(s);const u=await this.caller.call(fetch,`${this.apiUrl}/examples/${s}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(!u.ok)throw new Error(`Failed to update example ${s}: ${u.status} ${u.statusText}`);return await u.json()}async evaluateRun(s,c,{sourceInfo:u,loadChildRuns:d,referenceExample:h}={loadChildRuns:!1}){let p;if(typeof s=="string")p=await this.readRun(s,{loadChildRuns:d});else if(typeof s=="object"&&"id"in s)p=s;else throw new Error(`Invalid run type: ${typeof s}`);p.reference_example_id!==null&&p.reference_example_id!==void 0&&(h=await this.readExample(p.reference_example_id));const m=await c.evaluateRun(p,h);let f=u??{};m.evaluatorInfo&&(f={...f,...m.evaluatorInfo});const _=m.targetRunId??p.id;return await this.createFeedback(_,m.key,{score:m==null?void 0:m.score,value:m==null?void 0:m.value,comment:m==null?void 0:m.comment,correction:m==null?void 0:m.correction,sourceInfo:f,feedbackSourceType:"model",sourceRunId:m==null?void 0:m.sourceRunId})}async createFeedback(s,c,{score:u,value:d,correction:h,comment:p,sourceInfo:m,feedbackSourceType:f="api",sourceRunId:_,feedbackId:y,feedbackConfig:E}){var S;const b={type:f??"api",metadata:m??{}};_!==void 0&&(b==null?void 0:b.metadata)!==void 0&&!b.metadata.__run&&(b.metadata.__run={run_id:_}),(b==null?void 0:b.metadata)!==void 0&&((S=b.metadata.__run)==null?void 0:S.run_id)!==void 0&&assertUuid(b.metadata.__run.run_id);const T={id:y??v4(),run_id:s,key:c,score:u,value:d,correction:h,comment:p,feedback_source:b,feedbackConfig:E},A=`${this.apiUrl}/feedback`,v=await this.caller.call(fetch,A,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(T),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(v,"create feedback"),T}async updateFeedback(s,{score:c,value:u,correction:d,comment:h}){const p={};c!=null&&(p.score=c),u!=null&&(p.value=u),d!=null&&(p.correction=d),h!=null&&(p.comment=h),assertUuid(s);const m=await this.caller.call(fetch,`${this.apiUrl}/feedback/${s}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(p),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(m,"update feedback")}async readFeedback(s){assertUuid(s);const c=`/feedback/${s}`;return await this._get(c)}async deleteFeedback(s){assertUuid(s);const c=`/feedback/${s}`,u=await this.caller.call(fetch,this.apiUrl+c,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(!u.ok)throw new Error(`Failed to delete ${c}: ${u.status} ${u.statusText}`);await u.json()}async*listFeedback({runIds:s,feedbackKeys:c,feedbackSourceTypes:u}={}){const d=new URLSearchParams;if(s&&d.append("run",s.join(",")),c)for(const h of c)d.append("key",h);if(u)for(const h of u)d.append("source",h);for await(const h of this._getPaginated("/feedback",d))yield*h}async createPresignedFeedbackToken(s,c,{expiration:u,feedbackConfig:d}={}){const h={run_id:s,feedback_key:c,feedback_config:d};return u?typeof u=="string"?h.expires_at=u:(u!=null&&u.hours||u!=null&&u.minutes||u!=null&&u.days)&&(h.expires_in=u):h.expires_in={hours:3},await(await this.caller.call(fetch,`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(h),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async*listPresignedFeedbackTokens(s){assertUuid(s);const c=new URLSearchParams({run_id:s});for await(const u of this._getPaginated("/feedback/tokens",c))yield*u}}const __version__="0.1.14";class LangChainTracer extends BaseTracer{constructor(s={}){super(s),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:c,projectName:u,client:d}=s;this.projectName=u??getEnvironmentVariable$1("LANGCHAIN_PROJECT")??getEnvironmentVariable$1("LANGCHAIN_SESSION"),this.exampleId=c,this.client=d??new Client({})}async _convertToCreate(s,c=void 0){return{...s,extra:{...s.extra,runtime:await getRuntimeEnvironment$1()},child_runs:void 0,session_name:this.projectName,reference_example_id:s.parent_run_id?void 0:c}}async persistRun(s){}async onRunCreate(s){const c=await this._convertToCreate(s,this.exampleId);await this.client.createRun(c)}async onRunUpdate(s){const c={end_time:s.end_time,error:s.error,outputs:s.outputs,events:s.events,inputs:s.inputs,trace_id:s.trace_id,dotted_order:s.dotted_order,parent_run_id:s.parent_run_id};await this.client.updateRun(s.id,c)}getRun(s){return this.runMap.get(s)}}async function getTracingV2CallbackHandler(){return new LangChainTracer}let queue;function createQueue(){const a="default"in _default?_default.default:_default;return new a({autoStart:!0,concurrency:1})}async function consumeCallback(a,s){s===!0?await a():(typeof queue>"u"&&(queue=createQueue()),queue.add(a))}function parseCallbackConfigArg(a){return a?Array.isArray(a)||"name"in a?{callbacks:a}:a:{}}class BaseCallbackManager{setHandler(s){return this.setHandlers([s])}}class BaseRunManager{constructor(s,c,u,d,h,p,m,f){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:c}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:u}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:d}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:h}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:p}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:m}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:f})}async handleText(s){await Promise.all(this.handlers.map(c=>consumeCallback(async()=>{var u;try{await((u=c.handleText)==null?void 0:u.call(c,s,this.runId,this._parentRunId,this.tags))}catch(d){console.error(`Error in handler ${c.constructor.name}, handleText: ${d}`)}},c.awaitHandlers)))}}class CallbackManagerForRetrieverRun extends BaseRunManager{getChild(s){const c=new CallbackManager(this.runId);return c.setHandlers(this.inheritableHandlers),c.addTags(this.inheritableTags),c.addMetadata(this.inheritableMetadata),s&&c.addTags([s],!1),c}async handleRetrieverEnd(s){await Promise.all(this.handlers.map(c=>consumeCallback(async()=>{var u;if(!c.ignoreRetriever)try{await((u=c.handleRetrieverEnd)==null?void 0:u.call(c,s,this.runId,this._parentRunId,this.tags))}catch{console.error(`Error in handler ${c.constructor.name}, handleRetriever`)}},c.awaitHandlers)))}async handleRetrieverError(s){await Promise.all(this.handlers.map(c=>consumeCallback(async()=>{var u;if(!c.ignoreRetriever)try{await((u=c.handleRetrieverError)==null?void 0:u.call(c,s,this.runId,this._parentRunId,this.tags))}catch(d){console.error(`Error in handler ${c.constructor.name}, handleRetrieverError: ${d}`)}},c.awaitHandlers)))}}class CallbackManagerForLLMRun extends BaseRunManager{async handleLLMNewToken(s,c,u,d,h,p){await Promise.all(this.handlers.map(m=>consumeCallback(async()=>{var f;if(!m.ignoreLLM)try{await((f=m.handleLLMNewToken)==null?void 0:f.call(m,s,c??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,p))}catch(_){console.error(`Error in handler ${m.constructor.name}, handleLLMNewToken: ${_}`)}},m.awaitHandlers)))}async handleLLMError(s){await Promise.all(this.handlers.map(c=>consumeCallback(async()=>{var u;if(!c.ignoreLLM)try{await((u=c.handleLLMError)==null?void 0:u.call(c,s,this.runId,this._parentRunId,this.tags))}catch(d){console.error(`Error in handler ${c.constructor.name}, handleLLMError: ${d}`)}},c.awaitHandlers)))}async handleLLMEnd(s){await Promise.all(this.handlers.map(c=>consumeCallback(async()=>{var u;if(!c.ignoreLLM)try{await((u=c.handleLLMEnd)==null?void 0:u.call(c,s,this.runId,this._parentRunId,this.tags))}catch(d){console.error(`Error in handler ${c.constructor.name}, handleLLMEnd: ${d}`)}},c.awaitHandlers)))}}class CallbackManagerForChainRun extends BaseRunManager{getChild(s){const c=new CallbackManager(this.runId);return c.setHandlers(this.inheritableHandlers),c.addTags(this.inheritableTags),c.addMetadata(this.inheritableMetadata),s&&c.addTags([s],!1),c}async handleChainError(s,c,u,d,h){await Promise.all(this.handlers.map(p=>consumeCallback(async()=>{var m;if(!p.ignoreChain)try{await((m=p.handleChainError)==null?void 0:m.call(p,s,this.runId,this._parentRunId,this.tags,h))}catch(f){console.error(`Error in handler ${p.constructor.name}, handleChainError: ${f}`)}},p.awaitHandlers)))}async handleChainEnd(s,c,u,d,h){await Promise.all(this.handlers.map(p=>consumeCallback(async()=>{var m;if(!p.ignoreChain)try{await((m=p.handleChainEnd)==null?void 0:m.call(p,s,this.runId,this._parentRunId,this.tags,h))}catch(f){console.error(`Error in handler ${p.constructor.name}, handleChainEnd: ${f}`)}},p.awaitHandlers)))}async handleAgentAction(s){await Promise.all(this.handlers.map(c=>consumeCallback(async()=>{var u;if(!c.ignoreAgent)try{await((u=c.handleAgentAction)==null?void 0:u.call(c,s,this.runId,this._parentRunId,this.tags))}catch(d){console.error(`Error in handler ${c.constructor.name}, handleAgentAction: ${d}`)}},c.awaitHandlers)))}async handleAgentEnd(s){await Promise.all(this.handlers.map(c=>consumeCallback(async()=>{var u;if(!c.ignoreAgent)try{await((u=c.handleAgentEnd)==null?void 0:u.call(c,s,this.runId,this._parentRunId,this.tags))}catch(d){console.error(`Error in handler ${c.constructor.name}, handleAgentEnd: ${d}`)}},c.awaitHandlers)))}}class CallbackManagerForToolRun extends BaseRunManager{getChild(s){const c=new CallbackManager(this.runId);return c.setHandlers(this.inheritableHandlers),c.addTags(this.inheritableTags),c.addMetadata(this.inheritableMetadata),s&&c.addTags([s],!1),c}async handleToolError(s){await Promise.all(this.handlers.map(c=>consumeCallback(async()=>{var u;if(!c.ignoreAgent)try{await((u=c.handleToolError)==null?void 0:u.call(c,s,this.runId,this._parentRunId,this.tags))}catch(d){console.error(`Error in handler ${c.constructor.name}, handleToolError: ${d}`)}},c.awaitHandlers)))}async handleToolEnd(s){await Promise.all(this.handlers.map(c=>consumeCallback(async()=>{var u;if(!c.ignoreAgent)try{await((u=c.handleToolEnd)==null?void 0:u.call(c,s,this.runId,this._parentRunId,this.tags))}catch(d){console.error(`Error in handler ${c.constructor.name}, handleToolEnd: ${d}`)}},c.awaitHandlers)))}}class CallbackManager extends BaseCallbackManager{constructor(s,c){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=(c==null?void 0:c.handlers)??this.handlers,this.inheritableHandlers=(c==null?void 0:c.inheritableHandlers)??this.inheritableHandlers,this.tags=(c==null?void 0:c.tags)??this.tags,this.inheritableTags=(c==null?void 0:c.inheritableTags)??this.inheritableTags,this.metadata=(c==null?void 0:c.metadata)??this.metadata,this.inheritableMetadata=(c==null?void 0:c.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=s}getParentRunId(){return this._parentRunId}async handleLLMStart(s,c,u=void 0,d=void 0,h=void 0,p=void 0,m=void 0,f=void 0){return Promise.all(c.map(async _=>{const y=v4();return await Promise.all(this.handlers.map(E=>consumeCallback(async()=>{var b;if(!E.ignoreLLM)try{await((b=E.handleLLMStart)==null?void 0:b.call(E,s,[_],y,this._parentRunId,h,this.tags,this.metadata,f))}catch(T){console.error(`Error in handler ${E.constructor.name}, handleLLMStart: ${T}`)}},E.awaitHandlers))),new CallbackManagerForLLMRun(y,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(s,c,u=void 0,d=void 0,h=void 0,p=void 0,m=void 0,f=void 0){return Promise.all(c.map(async _=>{const y=v4();return await Promise.all(this.handlers.map(E=>consumeCallback(async()=>{var b,T;if(!E.ignoreLLM)try{if(E.handleChatModelStart)await((b=E.handleChatModelStart)==null?void 0:b.call(E,s,[_],y,this._parentRunId,h,this.tags,this.metadata,f));else if(E.handleLLMStart){const A=getBufferString(_);await((T=E.handleLLMStart)==null?void 0:T.call(E,s,[A],y,this._parentRunId,h,this.tags,this.metadata,f))}}catch(A){console.error(`Error in handler ${E.constructor.name}, handleLLMStart: ${A}`)}},E.awaitHandlers))),new CallbackManagerForLLMRun(y,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(s,c,u=v4(),d=void 0,h=void 0,p=void 0,m=void 0){return await Promise.all(this.handlers.map(f=>consumeCallback(async()=>{var _;if(!f.ignoreChain)try{await((_=f.handleChainStart)==null?void 0:_.call(f,s,c,u,this._parentRunId,this.tags,this.metadata,d,m))}catch(y){console.error(`Error in handler ${f.constructor.name}, handleChainStart: ${y}`)}},f.awaitHandlers))),new CallbackManagerForChainRun(u,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(s,c,u=v4(),d=void 0,h=void 0,p=void 0,m=void 0){return await Promise.all(this.handlers.map(f=>consumeCallback(async()=>{var _;if(!f.ignoreAgent)try{await((_=f.handleToolStart)==null?void 0:_.call(f,s,c,u,this._parentRunId,this.tags,this.metadata,m))}catch(y){console.error(`Error in handler ${f.constructor.name}, handleToolStart: ${y}`)}},f.awaitHandlers))),new CallbackManagerForToolRun(u,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(s,c,u=v4(),d=void 0,h=void 0,p=void 0,m=void 0){return await Promise.all(this.handlers.map(f=>consumeCallback(async()=>{var _;if(!f.ignoreRetriever)try{await((_=f.handleRetrieverStart)==null?void 0:_.call(f,s,c,u,this._parentRunId,this.tags,this.metadata,m))}catch(y){console.error(`Error in handler ${f.constructor.name}, handleRetrieverStart: ${y}`)}},f.awaitHandlers))),new CallbackManagerForRetrieverRun(u,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}addHandler(s,c=!0){this.handlers.push(s),c&&this.inheritableHandlers.push(s)}removeHandler(s){this.handlers=this.handlers.filter(c=>c!==s),this.inheritableHandlers=this.inheritableHandlers.filter(c=>c!==s)}setHandlers(s,c=!0){this.handlers=[],this.inheritableHandlers=[];for(const u of s)this.addHandler(u,c)}addTags(s,c=!0){this.removeTags(s),this.tags.push(...s),c&&this.inheritableTags.push(...s)}removeTags(s){this.tags=this.tags.filter(c=>!s.includes(c)),this.inheritableTags=this.inheritableTags.filter(c=>!s.includes(c))}addMetadata(s,c=!0){this.metadata={...this.metadata,...s},c&&(this.inheritableMetadata={...this.inheritableMetadata,...s})}removeMetadata(s){for(const c of Object.keys(s))delete this.metadata[c],delete this.inheritableMetadata[c]}copy(s=[],c=!0){const u=new CallbackManager(this._parentRunId);for(const d of this.handlers){const h=this.inheritableHandlers.includes(d);u.addHandler(d,h)}for(const d of this.tags){const h=this.inheritableTags.includes(d);u.addTags([d],h)}for(const d of Object.keys(this.metadata)){const h=Object.keys(this.inheritableMetadata).includes(d);u.addMetadata({[d]:this.metadata[d]},h)}for(const d of s)u.handlers.filter(h=>h.name==="console_callback_handler").some(h=>h.name===d.name)||u.addHandler(d,c);return u}static fromHandlers(s){class c extends BaseCallbackHandler{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:v4()}),Object.assign(this,s)}}const u=new this;return u.addHandler(new c),u}static async configure(s,c,u,d,h,p,m){let f;(s||c)&&(Array.isArray(s)||!s?(f=new CallbackManager,f.setHandlers((s==null?void 0:s.map(ensureHandler))??[],!0)):f=s,f=f.copy(Array.isArray(c)?c.map(ensureHandler):c==null?void 0:c.handlers,!1));const _=getEnvironmentVariable$1("LANGCHAIN_VERBOSE")==="true"||(m==null?void 0:m.verbose),y=getEnvironmentVariable$1("LANGCHAIN_TRACING_V2")==="true",E=y||(getEnvironmentVariable$1("LANGCHAIN_TRACING")??!1);if(_||E){if(f||(f=new CallbackManager),_&&!f.handlers.some(b=>b.name===ConsoleCallbackHandler.prototype.name)){const b=new ConsoleCallbackHandler;f.addHandler(b,!0)}E&&!f.handlers.some(b=>b.name==="langchain_tracer")&&y&&f.addHandler(await getTracingV2CallbackHandler(),!0)}return(u||d)&&f&&(f.addTags(u??[]),f.addTags(d??[],!1)),(h||p)&&f&&(f.addMetadata(h??{}),f.addMetadata(p??{},!1)),f}}function ensureHandler(a){return"name"in a?a:BaseCallbackHandler.fromMethods(a)}/*!
* https://github.com/Starcounter-Jack/JSON-Patch
* (c) 2017-2022 Joachim Wester
* MIT licensed
*/const _hasOwnProperty=Object.prototype.hasOwnProperty;function hasOwnProperty(a,s){return _hasOwnProperty.call(a,s)}function _objectKeys(a){if(Array.isArray(a)){const c=new Array(a.length);for(let u=0;u<c.length;u++)c[u]=""+u;return c}if(Object.keys)return Object.keys(a);let s=[];for(let c in a)hasOwnProperty(a,c)&&s.push(c);return s}function _deepClone(a){switch(typeof a){case"object":return JSON.parse(JSON.stringify(a));case"undefined":return null;default:return a}}function isInteger(a){let s=0;const c=a.length;let u;for(;s<c;){if(u=a.charCodeAt(s),u>=48&&u<=57){s++;continue}return!1}return!0}function escapePathComponent(a){return a.indexOf("/")===-1&&a.indexOf("~")===-1?a:a.replace(/~/g,"~0").replace(/\//g,"~1")}function unescapePathComponent(a){return a.replace(/~1/g,"/").replace(/~0/g,"~")}function hasUndefined(a){if(a===void 0)return!0;if(a){if(Array.isArray(a)){for(let c=0,u=a.length;c<u;c++)if(hasUndefined(a[c]))return!0}else if(typeof a=="object"){const c=_objectKeys(a),u=c.length;for(var s=0;s<u;s++)if(hasUndefined(a[c[s]]))return!0}}return!1}function patchErrorMessageFormatter(a,s){const c=[a];for(const u in s){const d=typeof s[u]=="object"?JSON.stringify(s[u],null,2):s[u];typeof d<"u"&&c.push(`${u}: ${d}`)}return c.join(`
`)}class PatchError extends Error{constructor(s,c,u,d,h){super(patchErrorMessageFormatter(s,{name:c,index:u,operation:d,tree:h})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:c}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:u}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:d}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:h}),Object.setPrototypeOf(this,new.target.prototype),this.message=patchErrorMessageFormatter(s,{name:c,index:u,operation:d,tree:h})}}const JsonPatchError=PatchError,objOps={add:function(a,s,c){return a[s]=this.value,{newDocument:c}},remove:function(a,s,c){var u=a[s];return delete a[s],{newDocument:c,removed:u}},replace:function(a,s,c){var u=a[s];return a[s]=this.value,{newDocument:c,removed:u}},move:function(a,s,c){let u=getValueByPointer(c,this.path);u&&(u=_deepClone(u));const d=applyOperation(c,{op:"remove",path:this.from}).removed;return applyOperation(c,{op:"add",path:this.path,value:d}),{newDocument:c,removed:u}},copy:function(a,s,c){const u=getValueByPointer(c,this.from);return applyOperation(c,{op:"add",path:this.path,value:_deepClone(u)}),{newDocument:c}},test:function(a,s,c){return{newDocument:c,test:_areEquals(a[s],this.value)}},_get:function(a,s,c){return this.value=a[s],{newDocument:c}}};var arrOps={add:function(a,s,c){return isInteger(s)?a.splice(s,0,this.value):a[s]=this.value,{newDocument:c,index:s}},remove:function(a,s,c){var u=a.splice(s,1);return{newDocument:c,removed:u[0]}},replace:function(a,s,c){var u=a[s];return a[s]=this.value,{newDocument:c,removed:u}},move:objOps.move,copy:objOps.copy,test:objOps.test,_get:objOps._get};function getValueByPointer(a,s){if(s=="")return a;var c={op:"_get",path:s};return applyOperation(a,c),c.value}function applyOperation(a,s,c=!1,u=!0,d=!0,h=0){if(c&&(typeof c=="function"?c(s,0,a,s.path):validator(s,0)),s.path===""){let p={newDocument:a};if(s.op==="add")return p.newDocument=s.value,p;if(s.op==="replace")return p.newDocument=s.value,p.removed=a,p;if(s.op==="move"||s.op==="copy")return p.newDocument=getValueByPointer(a,s.from),s.op==="move"&&(p.removed=a),p;if(s.op==="test"){if(p.test=_areEquals(a,s.value),p.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",h,s,a);return p.newDocument=a,p}else{if(s.op==="remove")return p.removed=a,p.newDocument=null,p;if(s.op==="_get")return s.value=a,p;if(c)throw new JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",h,s,a);return p}}else{u||(a=_deepClone(a));const p=(s.path||"").split("/");let m=a,f=1,_=p.length,y,E,b;for(typeof c=="function"?b=c:b=validator;;){if(E=p[f],E&&E.indexOf("~")!=-1&&(E=unescapePathComponent(E)),d&&(E=="__proto__"||E=="prototype"&&f>0&&p[f-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(c&&y===void 0&&(m[E]===void 0?y=p.slice(0,f).join("/"):f==_-1&&(y=s.path),y!==void 0&&b(s,0,a,y)),f++,Array.isArray(m)){if(E==="-")E=m.length;else{if(c&&!isInteger(E))throw new JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",h,s,a);isInteger(E)&&(E=~~E)}if(f>=_){if(c&&s.op==="add"&&E>m.length)throw new JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",h,s,a);const T=arrOps[s.op].call(s,m,E,a);if(T.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",h,s,a);return T}}else if(f>=_){const T=objOps[s.op].call(s,m,E,a);if(T.test===!1)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",h,s,a);return T}if(m=m[E],c&&f<_&&(!m||typeof m!="object"))throw new JsonPatchError("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",h,s,a)}}}function applyPatch(a,s,c,u=!0,d=!0){if(c&&!Array.isArray(s))throw new JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");u||(a=_deepClone(a));const h=new Array(s.length);for(let p=0,m=s.length;p<m;p++)h[p]=applyOperation(a,s[p],c,!0,d,p),a=h[p].newDocument;return h.newDocument=a,h}function validator(a,s,c,u){if(typeof a!="object"||a===null||Array.isArray(a))throw new JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",s,a,c);if(objOps[a.op]){if(typeof a.path!="string")throw new JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",s,a,c);if(a.path.indexOf("/")!==0&&a.path.length>0)throw new JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",s,a,c);if((a.op==="move"||a.op==="copy")&&typeof a.from!="string")throw new JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",s,a,c);if((a.op==="add"||a.op==="replace"||a.op==="test")&&a.value===void 0)throw new JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",s,a,c);if((a.op==="add"||a.op==="replace"||a.op==="test")&&hasUndefined(a.value))throw new JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",s,a,c);if(c){if(a.op=="add"){var d=a.path.split("/").length,h=u.split("/").length;if(d!==h+1&&d!==h)throw new JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",s,a,c)}else if(a.op==="replace"||a.op==="remove"||a.op==="_get"){if(a.path!==u)throw new JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",s,a,c)}else if(a.op==="move"||a.op==="copy"){var p={op:"_get",path:a.from,value:void 0},m=validate([p],c);if(m&&m.name==="OPERATION_PATH_UNRESOLVABLE")throw new JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",s,a,c)}}}else throw new JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,a,c)}function validate(a,s,c){try{if(!Array.isArray(a))throw new JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(s)applyPatch(_deepClone(s),_deepClone(a),c||!0);else{c=c||validator;for(var u=0;u<a.length;u++)c(a[u],u,s,void 0)}}catch(d){if(d instanceof JsonPatchError)return d;throw d}}function _areEquals(a,s){if(a===s)return!0;if(a&&s&&typeof a=="object"&&typeof s=="object"){var c=Array.isArray(a),u=Array.isArray(s),d,h,p;if(c&&u){if(h=a.length,h!=s.length)return!1;for(d=h;d--!==0;)if(!_areEquals(a[d],s[d]))return!1;return!0}if(c!=u)return!1;var m=Object.keys(a);if(h=m.length,h!==Object.keys(s).length)return!1;for(d=h;d--!==0;)if(!s.hasOwnProperty(m[d]))return!1;for(d=h;d--!==0;)if(p=m[d],!_areEquals(a[p],s[p]))return!1;return!0}return a!==a&&s!==s}/*!
* https://github.com/Starcounter-Jack/JSON-Patch
* (c) 2013-2021 Joachim Wester
* MIT license
*/function _generate(a,s,c,u,d){if(s!==a){typeof s.toJSON=="function"&&(s=s.toJSON());for(var h=_objectKeys(s),p=_objectKeys(a),m=!1,f=p.length-1;f>=0;f--){var _=p[f],y=a[_];if(hasOwnProperty(s,_)&&!(s[_]===void 0&&y!==void 0&&Array.isArray(s)===!1)){var E=s[_];typeof y=="object"&&y!=null&&typeof E=="object"&&E!=null&&Array.isArray(y)===Array.isArray(E)?_generate(y,E,c,u+"/"+escapePathComponent(_),d):y!==E&&(d&&c.push({op:"test",path:u+"/"+escapePathComponent(_),value:_deepClone(y)}),c.push({op:"replace",path:u+"/"+escapePathComponent(_),value:_deepClone(E)}))}else Array.isArray(a)===Array.isArray(s)?(d&&c.push({op:"test",path:u+"/"+escapePathComponent(_),value:_deepClone(y)}),c.push({op:"remove",path:u+"/"+escapePathComponent(_)}),m=!0):(d&&c.push({op:"test",path:u,value:a}),c.push({op:"replace",path:u,value:s}))}if(!(!m&&h.length==p.length))for(var f=0;f<h.length;f++){var _=h[f];!hasOwnProperty(a,_)&&s[_]!==void 0&&c.push({op:"add",path:u+"/"+escapePathComponent(_),value:_deepClone(s[_])})}}}function compare(a,s,c=!1){var u=[];return _generate(a,s,u,"",c),u}class IterableReadableStream extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const s=await this.reader.read();return s.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:s.value}}catch(s){throw this.reader.releaseLock(),s}}async return(){if(this.ensureReader(),this.locked){const s=this.reader.cancel();this.reader.releaseLock(),await s}return{done:!0,value:void 0}}async throw(s){if(this.ensureReader(),this.locked){const c=this.reader.cancel();this.reader.releaseLock(),await c}throw s}[Symbol.asyncIterator](){return this}static fromReadableStream(s){const c=s.getReader();return new IterableReadableStream({start(u){return d();function d(){return c.read().then(({done:h,value:p})=>{if(h){u.close();return}return u.enqueue(p),d()})}},cancel(){c.releaseLock()}})}static fromAsyncGenerator(s){return new IterableReadableStream({async pull(c){const{value:u,done:d}=await s.next();d&&c.close(),c.enqueue(u)},async cancel(c){await s.return(c)}})}}function atee(a,s=2){const c=Array.from({length:s},()=>[]);return c.map(async function*(u){for(;;)if(u.length===0){const d=await a.next();for(const h of c)h.push(d)}else{if(u[0].done)return;yield u.shift().value}})}function concat(a,s){if(Array.isArray(a)&&Array.isArray(s))return a.concat(s);if(typeof a=="string"&&typeof s=="string"||typeof a=="number"&&typeof s=="number")return a+s;if("concat"in a&&typeof a.concat=="function")return a.concat(s);if(typeof a=="object"&&typeof s=="object"){const c={...a};for(const[u,d]of Object.entries(s))u in c&&!Array.isArray(c[u])?c[u]=concat(c[u],d):c[u]=d;return c}else throw new Error(`Cannot concat ${typeof a} and ${typeof s}`)}class AsyncGeneratorWithSetup{constructor(s,c){Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=s,this.setup=new Promise((u,d)=>{this.firstResult=s.next(),c?this.firstResult.then(c).then(u,d):this.firstResult.then(h=>u(void 0),d)})}async next(...s){return this.firstResultUsed?this.generator.next(...s):(this.firstResultUsed=!0,this.firstResult)}async return(s){return this.generator.return(s)}async throw(s){return this.generator.throw(s)}[Symbol.asyncIterator](){return this}}async function pipeGeneratorWithSetup(a,s,c,...u){const d=new AsyncGeneratorWithSetup(s,c),h=await d.setup;return{output:a(d,h,...u),setup:h}}class RunLogPatch{constructor(s){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=s.ops??[]}concat(s){const c=this.ops.concat(s.ops),u=applyPatch({},c);return new RunLog({ops:c,state:u[u.length-1].newDocument})}}class RunLog extends RunLogPatch{constructor(s){super(s),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=s.state}concat(s){const c=this.ops.concat(s.ops),u=applyPatch(this.state,s.ops);return new RunLog({ops:c,state:u[u.length-1].newDocument})}static fromRunLogPatch(s){const c=applyPatch({},s.ops);return new RunLog({ops:s.ops,state:c[c.length-1].newDocument})}}async function _getStandardizedInputs(a,s){if(s==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:c}=a;if(["retriever","llm","prompt"].includes(a.run_type))return c;if(!(Object.keys(c).length===1&&(c==null?void 0:c.input)===""))return c.input}async function _getStandardizedOutputs(a,s){const{outputs:c}=a;return s==="original"||["retriever","llm","prompt"].includes(a.run_type)?c:c!==void 0&&Object.keys(c).length===1&&(c==null?void 0:c.output)!==void 0?c.output:c}function isChatGenerationChunk(a){return a!==void 0&&a.message!==void 0}class LogStreamCallbackHandler extends BaseTracer{constructor(s){super({_awaitHandler:!0,...s}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),this.autoClose=(s==null?void 0:s.autoClose)??!0,this.includeNames=s==null?void 0:s.includeNames,this.includeTypes=s==null?void 0:s.includeTypes,this.includeTags=s==null?void 0:s.includeTags,this.excludeNames=s==null?void 0:s.excludeNames,this.excludeTypes=s==null?void 0:s.excludeTypes,this.excludeTags=s==null?void 0:s.excludeTags,this._schemaFormat=(s==null?void 0:s._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=IterableReadableStream.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(s){}_includeRun(s){if(s.id===this.rootId)return!1;const c=s.tags??[];let u=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(u=u||this.includeNames.includes(s.name)),this.includeTypes!==void 0&&(u=u||this.includeTypes.includes(s.run_type)),this.includeTags!==void 0&&(u=u||c.find(d=>{var h;return(h=this.includeTags)==null?void 0:h.includes(d)})!==void 0),this.excludeNames!==void 0&&(u=u&&!this.excludeNames.includes(s.name)),this.excludeTypes!==void 0&&(u=u&&!this.excludeTypes.includes(s.run_type)),this.excludeTags!==void 0&&(u=u&&c.every(d=>{var h;return!((h=this.excludeTags)!=null&&h.includes(d))})),u}async*tapOutputIterable(s,c){for await(const u of c){if(s!==this.rootId){const d=this.keyMapByRunId[s];d&&await this.writer.write(new RunLogPatch({ops:[{op:"add",path:`/logs/${d}/streamed_output/-`,value:u}]}))}yield u}}async onRunCreate(s){var d;if(this.rootId===void 0&&(this.rootId=s.id,await this.writer.write(new RunLogPatch({ops:[{op:"replace",path:"",value:{id:s.id,name:s.name,type:s.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(s))return;this.counterMapByRunName[s.name]===void 0&&(this.counterMapByRunName[s.name]=0),this.counterMapByRunName[s.name]+=1;const c=this.counterMapByRunName[s.name];this.keyMapByRunId[s.id]=c===1?s.name:`${s.name}:${c}`;const u={id:s.id,name:s.name,type:s.run_type,tags:s.tags??[],metadata:((d=s.extra)==null?void 0:d.metadata)??{},start_time:new Date(s.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(u.inputs=await _getStandardizedInputs(s,this._schemaFormat)),await this.writer.write(new RunLogPatch({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[s.id]}`,value:u}]}))}async onRunUpdate(s){try{const c=this.keyMapByRunId[s.id];if(c===void 0)return;const u=[];this._schemaFormat==="streaming_events"&&u.push({op:"replace",path:`/logs/${c}/inputs`,value:await _getStandardizedInputs(s,this._schemaFormat)}),u.push({op:"add",path:`/logs/${c}/final_output`,value:await _getStandardizedOutputs(s,this._schemaFormat)}),s.end_time!==void 0&&u.push({op:"add",path:`/logs/${c}/end_time`,value:new Date(s.end_time).toISOString()});const d=new RunLogPatch({ops:u});await this.writer.write(d)}finally{if(s.id===this.rootId){const c=new RunLogPatch({ops:[{op:"replace",path:"/final_output",value:await _getStandardizedOutputs(s,this._schemaFormat)}]});await this.writer.write(c),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(s,c,u){const d=this.keyMapByRunId[s.id];if(d===void 0)return;const h=s.inputs.messages!==void 0;let p;h?isChatGenerationChunk(u==null?void 0:u.chunk)?p=u==null?void 0:u.chunk:p=new AIMessageChunk(c):p=c;const m=new RunLogPatch({ops:[{op:"add",path:`/logs/${d}/streamed_output_str/-`,value:c},{op:"add",path:`/logs/${d}/streamed_output/-`,value:p}]});await this.writer.write(m)}}class MockAsyncLocalStorage{getStore(){}run(s,c){c()}}class AsyncLocalStorageProvider{constructor(){Object.defineProperty(this,"asyncLocalStorage",{enumerable:!0,configurable:!0,writable:!0,value:new MockAsyncLocalStorage}),Object.defineProperty(this,"hasBeenInitialized",{enumerable:!0,configurable:!0,writable:!0,value:!1})}getInstance(){return this.asyncLocalStorage}initializeGlobalInstance(s){this.hasBeenInitialized||(this.hasBeenInitialized=!0,this.asyncLocalStorage=s)}}const AsyncLocalStorageProviderSingleton=new AsyncLocalStorageProvider,DEFAULT_RECURSION_LIMIT=25;async function getCallbackManagerForConfig(a){return CallbackManager.configure(a==null?void 0:a.callbacks,void 0,a==null?void 0:a.tags,void 0,a==null?void 0:a.metadata)}function mergeConfigs(...a){const s=ensureConfig();for(const c of a.filter(u=>!!u))for(const u of Object.keys(c))if(u==="metadata")s[u]={...s[u],...c[u]};else if(u==="tags")s[u]=[...new Set(s[u].concat(c[u]??[]))];else if(u==="configurable")s[u]={...s[u],...c[u]};else if(u==="callbacks"){const d=s.callbacks,h=c.callbacks;if(Array.isArray(h))if(!d)s.callbacks=h;else if(Array.isArray(d))s.callbacks=d.concat(h);else{const p=d.copy();for(const m of h)p.addHandler(ensureHandler(m),!0);s.callbacks=p}else if(h)if(!d)s.callbacks=h;else if(Array.isArray(d)){const p=h.copy();for(const m of d)p.addHandler(ensureHandler(m),!0);s.callbacks=p}else s.callbacks=new CallbackManager(h._parentRunId,{handlers:d.handlers.concat(h.handlers),inheritableHandlers:d.inheritableHandlers.concat(h.inheritableHandlers),tags:Array.from(new Set(d.tags.concat(h.tags))),inheritableTags:Array.from(new Set(d.inheritableTags.concat(h.inheritableTags))),metadata:{...d.metadata,...h.metadata}})}else{const d=u;s[d]=c[d]??s[d]}return s}const PRIMITIVES=new Set(["string","number","boolean"]);function ensureConfig(a){var u;const s=a??AsyncLocalStorageProviderSingleton.getInstance().getStore();let c={tags:[],metadata:{},callbacks:void 0,recursionLimit:25};if(s&&(c={...c,...s}),s==null?void 0:s.configurable)for(const d of Object.keys(s.configurable))PRIMITIVES.has(typeof s.configurable[d])&&!((u=c.metadata)!=null&&u[d])&&(c.metadata||(c.metadata={}),c.metadata[d]=s.configurable[d]);return c}function patchConfig(a={},{callbacks:s,maxConcurrency:c,recursionLimit:u,runName:d,configurable:h}={}){const p=ensureConfig(a);return s!==void 0&&(delete p.runName,p.callbacks=s),u!==void 0&&(p.recursionLimit=u),c!==void 0&&(p.maxConcurrency=c),d!==void 0&&(p.runName=d),h!==void 0&&(p.configurable={...p.configurable,...h}),p}const STATUS_NO_RETRY=[400,401,402,403,404,405,406,407,409],defaultFailedAttemptHandler=a=>{var c,u;if(a.message.startsWith("Cancel")||a.message.startsWith("AbortError")||a.name==="AbortError"||(a==null?void 0:a.code)==="ECONNABORTED")throw a;const s=((c=a==null?void 0:a.response)==null?void 0:c.status)??(a==null?void 0:a.status);if(s&&STATUS_NO_RETRY.includes(+s))throw a;if(((u=a==null?void 0:a.error)==null?void 0:u.code)==="insufficient_quota"){const d=new Error(a==null?void 0:a.message);throw d.name="InsufficientQuotaError",d}};class AsyncCaller{constructor(s){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=s.maxConcurrency??1/0,this.maxRetries=s.maxRetries??6,this.onFailedAttempt=s.onFailedAttempt??defaultFailedAttemptHandler;const c="default"in _default?_default.default:_default;this.queue=new c({concurrency:this.maxConcurrency})}call(s,...c){return this.queue.add(()=>pRetry$1(()=>s(...c).catch(u=>{throw u instanceof Error?u:new Error(u)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(s,c,...u){return s.signal?Promise.race([this.call(c,...u),new Promise((d,h)=>{var p;(p=s.signal)==null||p.addEventListener("abort",()=>{h(new Error("AbortError"))})})]):this.call(c,...u)}fetch(...s){return this.call(()=>fetch(...s).then(c=>c.ok?c:Promise.reject(c)))}}class RootListenersTracer extends BaseTracer{constructor({config:s,onStart:c,onEnd:u,onError:d}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=s,this.argOnStart=c,this.argOnEnd=u,this.argOnError=d}persistRun(s){return Promise.resolve()}async onRunCreate(s){this.rootId||(this.rootId=s.id,this.argOnStart&&(this.argOnStart.length===1?await this.argOnStart(s):this.argOnStart.length===2&&await this.argOnStart(s,this.config)))}async onRunUpdate(s){s.id===this.rootId&&(s.error?this.argOnError&&(this.argOnError.length===1?await this.argOnError(s):this.argOnError.length===2&&await this.argOnError(s,this.config)):this.argOnEnd&&(this.argOnEnd.length===1?await this.argOnEnd(s):this.argOnEnd.length===2&&await this.argOnEnd(s,this.config)))}}function isRunnableInterface(a){return a?a.lc_runnable:!1}class _RootEventFilter{constructor(s){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=s.includeNames,this.includeTypes=s.includeTypes,this.includeTags=s.includeTags,this.excludeNames=s.excludeNames,this.excludeTypes=s.excludeTypes,this.excludeTags=s.excludeTags}includeEvent(s,c){let u=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const d=s.tags??[];return this.includeNames!==void 0&&(u=u||this.includeNames.includes(s.name)),this.includeTypes!==void 0&&(u=u||this.includeTypes.includes(c)),this.includeTags!==void 0&&(u=u||d.some(h=>{var p;return(p=this.includeTags)==null?void 0:p.includes(h)})),this.excludeNames!==void 0&&(u=u&&!this.excludeNames.includes(s.name)),this.excludeTypes!==void 0&&(u=u&&!this.excludeTypes.includes(c)),this.excludeTags!==void 0&&(u=u&&d.every(h=>{var p;return!((p=this.excludeTags)!=null&&p.includes(h))})),u}}function addErrorMessage(a,s,c,u){u!=null&&u.errorMessages&&c&&(a.errorMessage={...a.errorMessage,[s]:c})}function setResponseValueAndErrors(a,s,c,u,d){a[s]=c,addErrorMessage(a,s,u,d)}const ignoreOverride=Symbol("Let zodToJsonSchema decide on which parser to use"),defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",emailStrategy:"format:email"},getDefaultOptions=a=>typeof a=="string"?{...defaultOptions,name:a}:{...defaultOptions,...a};function parseAnyDef(){return{}}function parseArrayDef(a,s){var u,d;const c={type:"array"};return((d=(u=a.type)==null?void 0:u._def)==null?void 0:d.typeName)!==ZodFirstPartyTypeKind.ZodAny&&(c.items=parseDef(a.type._def,{...s,currentPath:[...s.currentPath,"items"]})),a.minLength&&setResponseValueAndErrors(c,"minItems",a.minLength.value,a.minLength.message,s),a.maxLength&&setResponseValueAndErrors(c,"maxItems",a.maxLength.value,a.maxLength.message,s),a.exactLength&&(setResponseValueAndErrors(c,"minItems",a.exactLength.value,a.exactLength.message,s),setResponseValueAndErrors(c,"maxItems",a.exactLength.value,a.exactLength.message,s)),c}function parseBigintDef(a,s){const c={type:"integer",format:"int64"};if(!a.checks)return c;for(const u of a.checks)switch(u.kind){case"min":s.target==="jsonSchema7"?u.inclusive?setResponseValueAndErrors(c,"minimum",u.value,u.message,s):setResponseValueAndErrors(c,"exclusiveMinimum",u.value,u.message,s):(u.inclusive||(c.exclusiveMinimum=!0),setResponseValueAndErrors(c,"minimum",u.value,u.message,s));break;case"max":s.target==="jsonSchema7"?u.inclusive?setResponseValueAndErrors(c,"maximum",u.value,u.message,s):setResponseValueAndErrors(c,"exclusiveMaximum",u.value,u.message,s):(u.inclusive||(c.exclusiveMaximum=!0),setResponseValueAndErrors(c,"maximum",u.value,u.message,s));break;case"multipleOf":setResponseValueAndErrors(c,"multipleOf",u.value,u.message,s);break}return c}function parseBooleanDef(){return{type:"boolean"}}function parseBrandedDef(a,s){return parseDef(a.type._def,s)}const parseCatchDef=(a,s)=>parseDef(a.innerType._def,s);function parseDateDef(a,s,c){const u=c??s.dateStrategy;if(Array.isArray(u))return{anyOf:u.map((d,h)=>parseDateDef(a,s,d))};switch(u){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return integerDateParser(a,s)}}const integerDateParser=(a,s)=>{const c={type:"integer",format:"unix-time"};if(s.target==="openApi3")return c;for(const u of a.checks)switch(u.kind){case"min":setResponseValueAndErrors(c,"minimum",u.value,u.message,s);break;case"max":setResponseValueAndErrors(c,"maximum",u.value,u.message,s);break}return c};function parseDefaultDef(a,s){return{...parseDef(a.innerType._def,s),default:a.defaultValue()}}function parseEffectsDef(a,s){return s.effectStrategy==="input"?parseDef(a.schema._def,s):{}}function parseEnumDef(a){return{type:"string",enum:a.values}}const isJsonSchema7AllOfType=a=>"type"in a&&a.type==="string"?!1:"allOf"in a;function parseIntersectionDef(a,s){const c=[parseDef(a.left._def,{...s,currentPath:[...s.currentPath,"allOf","0"]}),parseDef(a.right._def,{...s,currentPath:[...s.currentPath,"allOf","1"]})].filter(h=>!!h);let u=s.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const d=[];return c.forEach(h=>{if(isJsonSchema7AllOfType(h))d.push(...h.allOf),h.unevaluatedProperties===void 0&&(u=void 0);else{let p=h;if("additionalProperties"in h&&h.additionalProperties===!1){const{additionalProperties:m,...f}=h;p=f}else u=void 0;d.push(p)}}),d.length?{allOf:d,...u}:void 0}function parseLiteralDef(a,s){const c=typeof a.value;return c!=="bigint"&&c!=="number"&&c!=="boolean"&&c!=="string"?{type:Array.isArray(a.value)?"array":"object"}:s.target==="openApi3"?{type:c==="bigint"?"integer":c,enum:[a.value]}:{type:c==="bigint"?"integer":c,const:a.value}}const zodPatterns={cuid:"^[cC][^\\s-]{8,}$",cuid2:"^[a-z][a-z0-9]*$",ulid:"^[0-9A-HJKMNP-TV-Z]{26}$",email:"^(?!\\.)(?!.*\\.\\.)([a-zA-Z0-9_+-\\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\\-]*\\.)+[a-zA-Z]{2,}$",emoji:"^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",uuid:"^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$",ipv4:"^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$",ipv6:"^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$"};function parseStringDef(a,s){const c={type:"string"};function u(d){return s.patternStrategy==="escape"?escapeNonAlphaNumeric(d):d}if(a.checks)for(const d of a.checks)switch(d.kind){case"min":setResponseValueAndErrors(c,"minLength",typeof c.minLength=="number"?Math.max(c.minLength,d.value):d.value,d.message,s);break;case"max":setResponseValueAndErrors(c,"maxLength",typeof c.maxLength=="number"?Math.min(c.maxLength,d.value):d.value,d.message,s);break;case"email":switch(s.emailStrategy){case"format:email":addFormat(c,"email",d.message,s);break;case"format:idn-email":addFormat(c,"idn-email",d.message,s);break;case"pattern:zod":addPattern(c,zodPatterns.email,d.message,s);break}break;case"url":addFormat(c,"uri",d.message,s);break;case"uuid":addFormat(c,"uuid",d.message,s);break;case"regex":addPattern(c,d.regex.source,d.message,s);break;case"cuid":addPattern(c,zodPatterns.cuid,d.message,s);break;case"cuid2":addPattern(c,zodPatterns.cuid2,d.message,s);break;case"startsWith":addPattern(c,"^"+u(d.value),d.message,s);break;case"endsWith":addPattern(c,u(d.value)+"$",d.message,s);break;case"datetime":addFormat(c,"date-time",d.message,s);break;case"length":setResponseValueAndErrors(c,"minLength",typeof c.minLength=="number"?Math.max(c.minLength,d.value):d.value,d.message,s),setResponseValueAndErrors(c,"maxLength",typeof c.maxLength=="number"?Math.min(c.maxLength,d.value):d.value,d.message,s);break;case"includes":{addPattern(c,u(d.value),d.message,s);break}case"ip":{d.version!=="v6"&&addFormat(c,"ipv4",d.message,s),d.version!=="v4"&&addFormat(c,"ipv6",d.message,s);break}case"emoji":addPattern(c,zodPatterns.emoji,d.message,s);break;case"ulid":{addPattern(c,zodPatterns.ulid,d.message,s);break}}return c}const escapeNonAlphaNumeric=a=>Array.from(a).map(s=>/[a-zA-Z0-9]/.test(s)?s:`\\${s}`).join(""),addFormat=(a,s,c,u)=>{var d;a.format||(d=a.anyOf)!=null&&d.some(h=>h.format)?(a.anyOf||(a.anyOf=[]),a.format&&(a.anyOf.push({format:a.format,...a.errorMessage&&u.errorMessages&&{errorMessage:{format:a.errorMessage.format}}}),delete a.format,a.errorMessage&&(delete a.errorMessage.format,Object.keys(a.errorMessage).length===0&&delete a.errorMessage)),a.anyOf.push({format:s,...c&&u.errorMessages&&{errorMessage:{format:c}}})):setResponseValueAndErrors(a,"format",s,c,u)},addPattern=(a,s,c,u)=>{var d;a.pattern||(d=a.allOf)!=null&&d.some(h=>h.pattern)?(a.allOf||(a.allOf=[]),a.pattern&&(a.allOf.push({pattern:a.pattern,...a.errorMessage&&u.errorMessages&&{errorMessage:{pattern:a.errorMessage.pattern}}}),delete a.pattern,a.errorMessage&&(delete a.errorMessage.pattern,Object.keys(a.errorMessage).length===0&&delete a.errorMessage)),a.allOf.push({pattern:s,...c&&u.errorMessages&&{errorMessage:{pattern:c}}})):setResponseValueAndErrors(a,"pattern",s,c,u)};function parseRecordDef(a,s){var u,d,h,p;if(s.target==="openApi3"&&((u=a.keyType)==null?void 0:u._def.typeName)===ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:a.keyType._def.values,properties:a.keyType._def.values.reduce((m,f)=>({...m,[f]:parseDef(a.valueType._def,{...s,currentPath:[...s.currentPath,"properties",f]})??{}}),{}),additionalProperties:!1};const c={type:"object",additionalProperties:parseDef(a.valueType._def,{...s,currentPath:[...s.currentPath,"additionalProperties"]})??{}};if(s.target==="openApi3")return c;if(((d=a.keyType)==null?void 0:d._def.typeName)===ZodFirstPartyTypeKind.ZodString&&((h=a.keyType._def.checks)!=null&&h.length)){const m=Object.entries(parseStringDef(a.keyType._def,s)).reduce((f,[_,y])=>_==="type"?f:{...f,[_]:y},{});return{...c,propertyNames:m}}else if(((p=a.keyType)==null?void 0:p._def.typeName)===ZodFirstPartyTypeKind.ZodEnum)return{...c,propertyNames:{enum:a.keyType._def.values}};return c}function parseMapDef(a,s){if(s.mapStrategy==="record")return parseRecordDef(a,s);const c=parseDef(a.keyType._def,{...s,currentPath:[...s.currentPath,"items","items","0"]})||{},u=parseDef(a.valueType._def,{...s,currentPath:[...s.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[c,u],minItems:2,maxItems:2}}}function parseNativeEnumDef(a){const s=a.values,c=Object.keys(a.values).filter(d=>typeof s[s[d]]!="number").map(d=>s[d]),u=Array.from(new Set(c.map(d=>typeof d)));return{type:u.length===1?u[0]==="string"?"string":"number":["string","number"],enum:c}}function parseNeverDef(){return{not:{}}}function parseNullDef(a){return a.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function parseUnionDef(a,s){if(s.target==="openApi3")return asAnyOf(a,s);const c=a.options instanceof Map?Array.from(a.options.values()):a.options;if(c.every(u=>u._def.typeName in primitiveMappings&&(!u._def.checks||!u._def.checks.length))){const u=c.reduce((d,h)=>{const p=primitiveMappings[h._def.typeName];return p&&!d.includes(p)?[...d,p]:d},[]);return{type:u.length>1?u:u[0]}}else if(c.every(u=>u._def.typeName==="ZodLiteral"&&!u.description)){const u=c.reduce((d,h)=>{const p=typeof h._def.value;switch(p){case"string":case"number":case"boolean":return[...d,p];case"bigint":return[...d,"integer"];case"object":if(h._def.value===null)return[...d,"null"];case"symbol":case"undefined":case"function":default:return d}},[]);if(u.length===c.length){const d=u.filter((h,p,m)=>m.indexOf(h)===p);return{type:d.length>1?d:d[0],enum:c.reduce((h,p)=>h.includes(p._def.value)?h:[...h,p._def.value],[])}}}else if(c.every(u=>u._def.typeName==="ZodEnum"))return{type:"string",enum:c.reduce((u,d)=>[...u,...d._def.values.filter(h=>!u.includes(h))],[])};return asAnyOf(a,s)}const asAnyOf=(a,s)=>{const c=(a.options instanceof Map?Array.from(a.options.values()):a.options).map((u,d)=>parseDef(u._def,{...s,currentPath:[...s.currentPath,"anyOf",`${d}`]})).filter(u=>!!u&&(!s.strictUnions||typeof u=="object"&&Object.keys(u).length>0));return c.length?{anyOf:c}:void 0};function parseNullableDef(a,s){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(a.innerType._def.typeName)&&(!a.innerType._def.checks||!a.innerType._def.checks.length))return s.target==="openApi3"?{type:primitiveMappings[a.innerType._def.typeName],nullable:!0}:{type:[primitiveMappings[a.innerType._def.typeName],"null"]};if(s.target==="openApi3"){const u=parseDef(a.innerType._def,{...s,currentPath:[...s.currentPath]});return u&&"$ref"in u?{allOf:[u],nullable:!0}:u&&{...u,nullable:!0}}const c=parseDef(a.innerType._def,{...s,currentPath:[...s.currentPath,"anyOf","0"]});return c&&{anyOf:[c,{type:"null"}]}}function parseNumberDef(a,s){const c={type:"number"};if(!a.checks)return c;for(const u of a.checks)switch(u.kind){case"int":c.type="integer",addErrorMessage(c,"type",u.message,s);break;case"min":s.target==="jsonSchema7"?u.inclusive?setResponseValueAndErrors(c,"minimum",u.value,u.message,s):setResponseValueAndErrors(c,"exclusiveMinimum",u.value,u.message,s):(u.inclusive||(c.exclusiveMinimum=!0),setResponseValueAndErrors(c,"minimum",u.value,u.message,s));break;case"max":s.target==="jsonSchema7"?u.inclusive?setResponseValueAndErrors(c,"maximum",u.value,u.message,s):setResponseValueAndErrors(c,"exclusiveMaximum",u.value,u.message,s):(u.inclusive||(c.exclusiveMaximum=!0),setResponseValueAndErrors(c,"maximum",u.value,u.message,s));break;case"multipleOf":setResponseValueAndErrors(c,"multipleOf",u.value,u.message,s);break}return c}function decideAdditionalProperties(a,s){return s.removeAdditionalStrategy==="strict"?a.catchall._def.typeName==="ZodNever"?a.unknownKeys!=="strict":parseDef(a.catchall._def,{...s,currentPath:[...s.currentPath,"additionalProperties"]})??!0:a.catchall._def.typeName==="ZodNever"?a.unknownKeys==="passthrough":parseDef(a.catchall._def,{...s,currentPath:[...s.currentPath,"additionalProperties"]})??!0}function parseObjectDef(a,s){const c={type:"object",...Object.entries(a.shape()).reduce((u,[d,h])=>{if(h===void 0||h._def===void 0)return u;const p=parseDef(h._def,{...s,currentPath:[...s.currentPath,"properties",d],propertyPath:[...s.currentPath,"properties",d]});return p===void 0?u:{properties:{...u.properties,[d]:p},required:h.isOptional()?u.required:[...u.required,d]}},{properties:{},required:[]}),additionalProperties:decideAdditionalProperties(a,s)};return c.required.length||delete c.required,c}const parseOptionalDef=(a,s)=>{var u;if(s.currentPath.toString()===((u=s.propertyPath)==null?void 0:u.toString()))return parseDef(a.innerType._def,s);const c=parseDef(a.innerType._def,{...s,currentPath:[...s.currentPath,"anyOf","1"]});return c?{anyOf:[{not:{}},c]}:{}},parsePipelineDef=(a,s)=>{if(s.pipeStrategy==="input")return parseDef(a.in._def,s);if(s.pipeStrategy==="output")return parseDef(a.out._def,s);const c=parseDef(a.in._def,{...s,currentPath:[...s.currentPath,"allOf","0"]}),u=parseDef(a.out._def,{...s,currentPath:[...s.currentPath,"allOf",c?"1":"0"]});return{allOf:[c,u].filter(d=>d!==void 0)}};function parsePromiseDef(a,s){return parseDef(a.type._def,s)}function parseSetDef(a,s){const c={type:"array",uniqueItems:!0,items:parseDef(a.valueType._def,{...s,currentPath:[...s.currentPath,"items"]})};return a.minSize&&setResponseValueAndErrors(c,"minItems",a.minSize.value,a.minSize.message,s),a.maxSize&&setResponseValueAndErrors(c,"maxItems",a.maxSize.value,a.maxSize.message,s),c}function parseTupleDef(a,s){return a.rest?{type:"array",minItems:a.items.length,items:a.items.map((c,u)=>parseDef(c._def,{...s,currentPath:[...s.currentPath,"items",`${u}`]})).reduce((c,u)=>u===void 0?c:[...c,u],[]),additionalItems:parseDef(a.rest._def,{...s,currentPath:[...s.currentPath,"additionalItems"]})}:{type:"array",minItems:a.items.length,maxItems:a.items.length,items:a.items.map((c,u)=>parseDef(c._def,{...s,currentPath:[...s.currentPath,"items",`${u}`]})).reduce((c,u)=>u===void 0?c:[...c,u],[])}}function parseUndefinedDef(){return{not:{}}}function parseUnknownDef(){return{}}const parseReadonlyDef=(a,s)=>parseDef(a.innerType._def,s);function parseDef(a,s,c=!1){var p;const u=s.seen.get(a);if(s.override){const m=(p=s.override)==null?void 0:p.call(s,a,s,u,c);if(m!==ignoreOverride)return m}if(u&&!c){const m=get$ref(u,s);if(m!==void 0)return m}const d={def:a,path:s.currentPath,jsonSchema:void 0};s.seen.set(a,d);const h=selectParser(a,a.typeName,s);return h&&addMeta(a,s,h),d.jsonSchema=h,h}const get$ref=(a,s)=>{switch(s.$refStrategy){case"root":return{$ref:a.path.join("/")};case"relative":return{$ref:getRelativePath(s.currentPath,a.path)};case"none":case"seen":return a.path.length<s.currentPath.length&&a.path.every((c,u)=>s.currentPath[u]===c)?(console.warn(`Recursive reference detected at ${s.currentPath.join("/")}! Defaulting to any`),{}):s.$refStrategy==="seen"?{}:void 0}},getRelativePath=(a,s)=>{let c=0;for(;c<a.length&&c<s.length&&a[c]===s[c];c++);return[(a.length-c).toString(),...s.slice(c)].join("/")},selectParser=(a,s,c)=>{switch(s){case ZodFirstPartyTypeKind.ZodString:return parseStringDef(a,c);case ZodFirstPartyTypeKind.ZodNumber:return parseNumberDef(a,c);case ZodFirstPartyTypeKind.ZodObject:return parseObjectDef(a,c);case ZodFirstPartyTypeKind.ZodBigInt:return parseBigintDef(a,c);case ZodFirstPartyTypeKind.ZodBoolean:return parseBooleanDef();case ZodFirstPartyTypeKind.ZodDate:return parseDateDef(a,c);case ZodFirstPartyTypeKind.ZodUndefined:return parseUndefinedDef();case ZodFirstPartyTypeKind.ZodNull:return parseNullDef(c);case ZodFirstPartyTypeKind.ZodArray:return parseArrayDef(a,c);case ZodFirstPartyTypeKind.ZodUnion:case ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return parseUnionDef(a,c);case ZodFirstPartyTypeKind.ZodIntersection:return parseIntersectionDef(a,c);case ZodFirstPartyTypeKind.ZodTuple:return parseTupleDef(a,c);case ZodFirstPartyTypeKind.ZodRecord:return parseRecordDef(a,c);case ZodFirstPartyTypeKind.ZodLiteral:return parseLiteralDef(a,c);case ZodFirstPartyTypeKind.ZodEnum:return parseEnumDef(a);case ZodFirstPartyTypeKind.ZodNativeEnum:return parseNativeEnumDef(a);case ZodFirstPartyTypeKind.ZodNullable:return parseNullableDef(a,c);case ZodFirstPartyTypeKind.ZodOptional:return parseOptionalDef(a,c);case ZodFirstPartyTypeKind.ZodMap:return parseMapDef(a,c);case ZodFirstPartyTypeKind.ZodSet:return parseSetDef(a,c);case ZodFirstPartyTypeKind.ZodLazy:return parseDef(a.getter()._def,c);case ZodFirstPartyTypeKind.ZodPromise:return parsePromiseDef(a,c);case ZodFirstPartyTypeKind.ZodNaN:case ZodFirstPartyTypeKind.ZodNever:return parseNeverDef();case ZodFirstPartyTypeKind.ZodEffects:return parseEffectsDef(a,c);case ZodFirstPartyTypeKind.ZodAny:return parseAnyDef();case ZodFirstPartyTypeKind.ZodUnknown:return parseUnknownDef();case ZodFirstPartyTypeKind.ZodDefault:return parseDefaultDef(a,c);case ZodFirstPartyTypeKind.ZodBranded:return parseBrandedDef(a,c);case ZodFirstPartyTypeKind.ZodReadonly:return parseReadonlyDef(a,c);case ZodFirstPartyTypeKind.ZodCatch:return parseCatchDef(a,c);case ZodFirstPartyTypeKind.ZodPipeline:return parsePipelineDef(a,c);case ZodFirstPartyTypeKind.ZodFunction:case ZodFirstPartyTypeKind.ZodVoid:case ZodFirstPartyTypeKind.ZodSymbol:return;default:return(u=>{})()}},addMeta=(a,s,c)=>(a.description&&(c.description=a.description,s.markdownDescription&&(c.markdownDescription=a.description)),c),getRefs=a=>{const s=getDefaultOptions(a),c=s.name!==void 0?[...s.basePath,s.definitionPath,s.name]:s.basePath;return{...s,currentPath:c,propertyPath:void 0,seen:new Map(Object.entries(s.definitions).map(([u,d])=>[d._def,{def:d._def,path:[...s.basePath,s.definitionPath,u],jsonSchema:void 0}]))}},zodToJsonSchema=(a,s)=>{const c=getRefs(s),u=typeof s=="object"&&s.definitions?Object.entries(s.definitions).reduce((m,[f,_])=>({...m,[f]:parseDef(_._def,{...c,currentPath:[...c.basePath,c.definitionPath,f]},!0)??{}}),{}):void 0,d=typeof s=="string"?s:s==null?void 0:s.name,h=parseDef(a._def,d===void 0?c:{...c,currentPath:[...c.basePath,c.definitionPath,d]},!1)??{},p=d===void 0?u?{...h,[c.definitionPath]:u}:h:{$ref:[...c.$refStrategy==="relative"?[]:c.basePath,c.definitionPath,d].join("/"),[c.definitionPath]:{...u,[d]:h}};return c.target==="jsonSchema7"?p.$schema="http://json-schema.org/draft-07/schema#":c.target==="jsonSchema2019-09"&&(p.$schema="https://json-schema.org/draft/2019-09/schema#"),p};function nodeDataJson(a){return isRunnableInterface(a.data)?{type:"runnable",data:{id:a.data.lc_id,name:a.data.getName()}}:{type:"schema",data:{...zodToJsonSchema(a.data.schema),title:a.data.name}}}class Graph{constructor(){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]})}toJSON(){const s={};return Object.values(this.nodes).forEach((c,u)=>{s[c.id]=validate$1(c.id)?u:c.id}),{nodes:Object.values(this.nodes).map(c=>({id:s[c.id],...nodeDataJson(c)})),edges:this.edges.map(c=>c.data?{source:s[c.source],target:s[c.target],data:c.data}:{source:s[c.source],target:s[c.target]})}}addNode(s,c){if(c!==void 0&&this.nodes[c]!==void 0)throw new Error(`Node with id ${c} already exists`);const u=c||v4(),d={id:u,data:s};return this.nodes[u]=d,d}removeNode(s){delete this.nodes[s.id],this.edges=this.edges.filter(c=>c.source!==s.id&&c.target!==s.id)}addEdge(s,c,u){if(this.nodes[s.id]===void 0)throw new Error(`Source node ${s.id} not in graph`);if(this.nodes[c.id]===void 0)throw new Error(`Target node ${c.id} not in graph`);const d={source:s.id,target:c.id,data:u};return this.edges.push(d),d}firstNode(){const s=new Set(this.edges.map(u=>u.target)),c=[];return Object.values(this.nodes).forEach(u=>{s.has(u.id)||c.push(u)}),c[0]}lastNode(){const s=new Set(this.edges.map(u=>u.source)),c=[];return Object.values(this.nodes).forEach(u=>{s.has(u.id)||c.push(u)}),c[0]}extend(s){Object.entries(s.nodes).forEach(([c,u])=>{this.nodes[c]=u}),this.edges=[...this.edges,...s.edges]}trimFirstNode(){const s=this.firstNode();if(s){const c=this.edges.filter(u=>u.source===s.id);(Object.keys(this.nodes).length===1||c.length===1)&&this.removeNode(s)}}trimLastNode(){const s=this.lastNode();if(s){const c=this.edges.filter(u=>u.target===s.id);(Object.keys(this.nodes).length===1||c.length===1)&&this.removeNode(s)}}}function _coerceToDict(a,s){return a&&!Array.isArray(a)&&!(a instanceof Date)&&typeof a=="object"?a:{[s]:a}}class Runnable extends Serializable{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(s){const c=this.name??this.constructor.lc_name()??this.constructor.name;return s?`${c}${s}`:c}bind(s){return new RunnableBinding({bound:this,kwargs:s,config:{}})}map(){return new RunnableEach({bound:this})}withRetry(s){return new RunnableRetry({bound:this,kwargs:{},config:{},maxAttemptNumber:s==null?void 0:s.stopAfterAttempt,...s})}withConfig(s){return new RunnableBinding({bound:this,config:s,kwargs:{}})}withFallbacks(s){return new RunnableWithFallbacks({runnable:this,fallbacks:s.fallbacks})}_getOptionsList(s,c=0){if(Array.isArray(s)){if(s.length!==c)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${s.length} options for ${c} inputs`);return s.map(ensureConfig)}return Array.from({length:c},()=>ensureConfig(s))}async batch(s,c,u){var f;const d=this._getOptionsList(c??{},s.length),h=((f=d[0])==null?void 0:f.maxConcurrency)??(u==null?void 0:u.maxConcurrency),p=new AsyncCaller({maxConcurrency:h,onFailedAttempt:_=>{throw _}}),m=s.map((_,y)=>p.call(async()=>{try{return await this.invoke(_,d[y])}catch(E){if(u!=null&&u.returnExceptions)return E;throw E}}));return Promise.all(m)}async*_streamIterator(s,c){yield this.invoke(s,c)}async stream(s,c){const u=new AsyncGeneratorWithSetup(this._streamIterator(s,ensureConfig(c)));return await u.setup,IterableReadableStream.fromAsyncGenerator(u)}_separateRunnableConfigFromCallOptions(s={}){const c=ensureConfig({callbacks:s.callbacks,tags:s.tags,metadata:s.metadata,runName:s.runName,configurable:s.configurable,recursionLimit:s.recursionLimit,maxConcurrency:s.maxConcurrency}),u={...s};return delete u.callbacks,delete u.tags,delete u.metadata,delete u.runName,delete u.configurable,delete u.recursionLimit,delete u.maxConcurrency,[c,u]}async _callWithConfig(s,c,u){var m;const d=ensureConfig(u),h=await((m=await getCallbackManagerForConfig(d))==null?void 0:m.handleChainStart(this.toJSON(),_coerceToDict(c,"input"),void 0,d==null?void 0:d.runType,void 0,void 0,(d==null?void 0:d.runName)??this.getName()));let p;try{p=await s.call(this,c,d,h)}catch(f){throw await(h==null?void 0:h.handleChainError(f)),f}return await(h==null?void 0:h.handleChainEnd(_coerceToDict(p,"output"))),p}async _batchWithConfig(s,c,u,d){const h=this._getOptionsList(u??{},c.length),p=await Promise.all(h.map(getCallbackManagerForConfig)),m=await Promise.all(p.map((_,y)=>_==null?void 0:_.handleChainStart(this.toJSON(),_coerceToDict(c[y],"input"),void 0,h[y].runType,void 0,void 0,h[y].runName??this.getName())));let f;try{f=await s.call(this,c,h,m,d)}catch(_){throw await Promise.all(m.map(y=>y==null?void 0:y.handleChainError(_))),_}return await Promise.all(m.map(_=>_==null?void 0:_.handleChainEnd(_coerceToDict(f,"output")))),f}async*_transformStreamWithConfig(s,c,u){let d,h=!0,p,m=!0;const f=ensureConfig(u),_=await getCallbackManagerForConfig(f);async function*y(){for await(const b of s){if(h)if(d===void 0)d=b;else try{d=concat(d,b)}catch{d=void 0,h=!1}yield b}}let E;try{const b=await pipeGeneratorWithSetup(c.bind(this),y(),async()=>_==null?void 0:_.handleChainStart(this.toJSON(),{input:""},void 0,f==null?void 0:f.runType,void 0,void 0,(f==null?void 0:f.runName)??this.getName()),f);E=b.setup;const T=S=>S.name==="log_stream_tracer",A=E==null?void 0:E.handlers.find(T);let v=b.output;A!==void 0&&E!==void 0&&(v=await A.tapOutputIterable(E.runId,b.output));for await(const S of v)if(yield S,m)if(p===void 0)p=S;else try{p=concat(p,S)}catch{p=void 0,m=!1}}catch(b){throw await(E==null?void 0:E.handleChainError(b,void 0,void 0,void 0,{inputs:_coerceToDict(d,"input")})),b}await(E==null?void 0:E.handleChainEnd(p??{},void 0,void 0,void 0,{inputs:_coerceToDict(d,"input")}))}getGraph(s){const c=new Graph,u=c.addNode({name:`${this.getName()}Input`,schema:z.any()}),d=c.addNode(this),h=c.addNode({name:`${this.getName()}Output`,schema:z.any()});return c.addEdge(u,d),c.addEdge(d,h),c}pipe(s){return new RunnableSequence({first:this,last:_coerceToRunnable(s)})}pick(s){return this.pipe(new RunnablePick(s))}assign(s){return this.pipe(new RunnableAssign(new RunnableMap({steps:s})))}async*transform(s,c){let u;for await(const d of s)u===void 0?u=d:u=concat(u,d);yield*this._streamIterator(u,ensureConfig(c))}async*streamLog(s,c,u){const d=new LogStreamCallbackHandler({...u,autoClose:!1,_schemaFormat:"original"}),h=ensureConfig(c);yield*this._streamLog(s,d,h)}async*_streamLog(s,c,u){const{callbacks:d}=u;if(d===void 0)u.callbacks=[c];else if(Array.isArray(d))u.callbacks=d.concat([c]);else{const f=d.copy();f.inheritableHandlers.push(c),u.callbacks=f}const h=this.stream(s,u);async function p(){try{const f=await h;for await(const _ of f){const y=new RunLogPatch({ops:[{op:"add",path:"/streamed_output/-",value:_}]});await c.writer.write(y)}}finally{await c.writer.close()}}const m=p();try{for await(const f of c)yield f}finally{await m}}async*streamEvents(s,c,u){if(c.version!=="v1")throw new Error('Only version "v1" of the events schema is currently supported.');let d,h=!1;const p=ensureConfig(c),m=p.tags??[],f=p.metadata??{},_=p.runName??this.getName(),y=new LogStreamCallbackHandler({...u,autoClose:!1,_schemaFormat:"streaming_events"}),E=new _RootEventFilter({...u}),b=this._streamLog(s,y,p);for await(const A of b){if(d?d=d.concat(A):d=RunLog.fromRunLogPatch(A),d.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!h){h=!0;const I={...d.state},x={run_id:I.id,event:`on_${I.type}_start`,name:_,tags:m,metadata:f,data:{input:s}};E.includeEvent(x,I.type)&&(yield x)}const v=A.ops.filter(I=>I.path.startsWith("/logs/")).map(I=>I.path.split("/")[2]),S=[...new Set(v)];for(const I of S){let x,P={};const w=d.state.logs[I];if(w.end_time===void 0?w.streamed_output.length>0?x="stream":x="start":x="end",x==="start")w.inputs!==void 0&&(P.input=w.inputs);else if(x==="end")w.inputs!==void 0&&(P.input=w.inputs),P.output=w.final_output;else if(x==="stream"){const C=w.streamed_output.length;if(C!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${C} instead. Encountered in: "${w.name}"`);P={chunk:w.streamed_output[0]},w.streamed_output=[]}yield{event:`on_${w.type}_${x}`,name:w.name,run_id:w.id,tags:w.tags,metadata:w.metadata,data:P}}const{state:O}=d;if(O.streamed_output.length>0){const I=O.streamed_output.length;if(I!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${I} instead. Encountered in: "${O.name}"`);const x={chunk:O.streamed_output[0]};O.streamed_output=[];const P={event:`on_${O.type}_stream`,run_id:O.id,tags:m,metadata:f,name:_,data:x};E.includeEvent(P,O.type)&&(yield P)}}const T=d==null?void 0:d.state;if(T!==void 0){const A={event:`on_${T.type}_end`,name:_,run_id:T.id,tags:m,metadata:f,data:{output:T.final_output}};E.includeEvent(A,T.type)&&(yield A)}}static isRunnable(s){return isRunnableInterface(s)}withListeners({onStart:s,onEnd:c,onError:u}){return new RunnableBinding({bound:this,config:{},configFactories:[d=>({callbacks:[new RootListenersTracer({config:d,onStart:s,onEnd:c,onError:u})]})]})}}class RunnableBinding extends Runnable{static lc_name(){return"RunnableBinding"}constructor(s){super(s),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=s.bound,this.kwargs=s.kwargs,this.config=s.config,this.configFactories=s.configFactories}getName(s){return this.bound.getName(s)}async _mergeConfig(...s){const c=mergeConfigs(this.config,...s);return mergeConfigs(c,...this.configFactories?await Promise.all(this.configFactories.map(async u=>await u(c))):[])}bind(s){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...s},config:this.config})}withConfig(s){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...s}})}withRetry(s){return new this.constructor({bound:this.bound.withRetry(s),kwargs:this.kwargs,config:this.config})}async invoke(s,c){return this.bound.invoke(s,await this._mergeConfig(c,this.kwargs))}async batch(s,c,u){const d=Array.isArray(c)?await Promise.all(c.map(async h=>this._mergeConfig(h,this.kwargs))):await this._mergeConfig(c,this.kwargs);return this.bound.batch(s,d,u)}async*_streamIterator(s,c){yield*this.bound._streamIterator(s,await this._mergeConfig(c,this.kwargs))}async stream(s,c){return this.bound.stream(s,await this._mergeConfig(c,this.kwargs))}async*transform(s,c){yield*this.bound.transform(s,await this._mergeConfig(c,this.kwargs))}async*streamEvents(s,c,u){yield*this.bound.streamEvents(s,{...await this._mergeConfig(c,this.kwargs),version:c.version},u)}static isRunnableBinding(s){return s.bound&&Runnable.isRunnable(s.bound)}withListeners({onStart:s,onEnd:c,onError:u}){return new RunnableBinding({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[d=>({callbacks:[new RootListenersTracer({config:d,onStart:s,onEnd:c,onError:u})]})]})}}class RunnableEach extends Runnable{static lc_name(){return"RunnableEach"}constructor(s){super(s),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=s.bound}bind(s){return new RunnableEach({bound:this.bound.bind(s)})}async invoke(s,c){return this._callWithConfig(this._invoke,s,c)}async _invoke(s,c,u){return this.bound.batch(s,patchConfig(c,{callbacks:u==null?void 0:u.getChild()}))}withListeners({onStart:s,onEnd:c,onError:u}){return new RunnableEach({bound:this.bound.withListeners({onStart:s,onEnd:c,onError:u})})}}class RunnableRetry extends RunnableBinding{static lc_name(){return"RunnableRetry"}constructor(s){super(s),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=s.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=s.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(s,c,u){const d=s>1?`retry:attempt:${s}`:void 0;return patchConfig(c,{callbacks:u==null?void 0:u.getChild(d)})}async _invoke(s,c,u){return pRetry$1(d=>super.invoke(s,this._patchConfigForRetry(d,c,u)),{onFailedAttempt:this.onFailedAttempt,retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(s,c){return this._callWithConfig(this._invoke,s,c)}async _batch(s,c,u,d){const h={};try{await pRetry$1(async p=>{const m=s.map((b,T)=>T).filter(b=>h[b.toString()]===void 0||h[b.toString()]instanceof Error),f=m.map(b=>s[b]),_=m.map(b=>this._patchConfigForRetry(p,c==null?void 0:c[b],u==null?void 0:u[b])),y=await super.batch(f,_,{...d,returnExceptions:!0});let E;for(let b=0;b<y.length;b+=1){const T=y[b],A=m[b];T instanceof Error&&E===void 0&&(E=T),h[A.toString()]=T}if(E)throw E;return y},{onFailedAttempt:this.onFailedAttempt,retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(p){if((d==null?void 0:d.returnExceptions)!==!0)throw p}return Object.keys(h).sort((p,m)=>parseInt(p,10)-parseInt(m,10)).map(p=>h[parseInt(p,10)])}async batch(s,c,u){return this._batchWithConfig(this._batch.bind(this),s,c,u)}}class RunnableSequence extends Runnable{static lc_name(){return"RunnableSequence"}constructor(s){super(s),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=s.first,this.middle=s.middle??this.middle,this.last=s.last,this.name=s.name}get steps(){return[this.first,...this.middle,this.last]}async invoke(s,c){var m;const u=ensureConfig(c),d=await((m=await getCallbackManagerForConfig(u))==null?void 0:m.handleChainStart(this.toJSON(),_coerceToDict(s,"input"),void 0,void 0,void 0,void 0,u==null?void 0:u.runName));let h=s,p;try{const f=[this.first,...this.middle];for(let _=0;_<f.length;_+=1)h=await f[_].invoke(h,patchConfig(u,{callbacks:d==null?void 0:d.getChild(`seq:step:${_+1}`)}));p=await this.last.invoke(h,patchConfig(u,{callbacks:d==null?void 0:d.getChild(`seq:step:${this.steps.length}`)}))}catch(f){throw await(d==null?void 0:d.handleChainError(f)),f}return await(d==null?void 0:d.handleChainEnd(_coerceToDict(p,"output"))),p}async batch(s,c,u){const d=this._getOptionsList(c??{},s.length),h=await Promise.all(d.map(getCallbackManagerForConfig)),p=await Promise.all(h.map((f,_)=>f==null?void 0:f.handleChainStart(this.toJSON(),_coerceToDict(s[_],"input"),void 0,void 0,void 0,void 0,d[_].runName)));let m=s;try{for(let f=0;f<this.steps.length;f+=1)m=await this.steps[f].batch(m,p.map((_,y)=>{const E=_==null?void 0:_.getChild(`seq:step:${f+1}`);return patchConfig(d[y],{callbacks:E})}),u)}catch(f){throw await Promise.all(p.map(_=>_==null?void 0:_.handleChainError(f))),f}return await Promise.all(p.map(f=>f==null?void 0:f.handleChainEnd(_coerceToDict(m,"output")))),m}async*_streamIterator(s,c){var f;const u=await((f=await getCallbackManagerForConfig(c))==null?void 0:f.handleChainStart(this.toJSON(),_coerceToDict(s,"input"),void 0,void 0,void 0,void 0,c==null?void 0:c.runName)),d=[this.first,...this.middle,this.last];let h=!0,p;async function*m(){yield s}try{let _=d[0].transform(m(),patchConfig(c,{callbacks:u==null?void 0:u.getChild("seq:step:1")}));for(let y=1;y<d.length;y+=1)_=await d[y].transform(_,patchConfig(c,{callbacks:u==null?void 0:u.getChild(`seq:step:${y+1}`)}));for await(const y of _)if(yield y,h)if(p===void 0)p=y;else try{p=concat(p,y)}catch{p=void 0,h=!1}}catch(_){throw await(u==null?void 0:u.handleChainError(_)),_}await(u==null?void 0:u.handleChainEnd(_coerceToDict(p,"output")))}getGraph(s){const c=new Graph;let u=null;return this.steps.forEach((d,h)=>{const p=d.getGraph(s);h!==0&&p.trimFirstNode(),h!==this.steps.length-1&&p.trimLastNode(),c.extend(p);const m=p.firstNode();if(!m)throw new Error(`Runnable ${d} has no first node`);u&&c.addEdge(u,m),u=p.lastNode()}),c}pipe(s){return RunnableSequence.isRunnableSequence(s)?new RunnableSequence({first:this.first,middle:this.middle.concat([this.last,s.first,...s.middle]),last:s.last,name:this.name??s.name}):new RunnableSequence({first:this.first,middle:[...this.middle,this.last],last:_coerceToRunnable(s),name:this.name})}static isRunnableSequence(s){return Array.isArray(s.middle)&&Runnable.isRunnable(s)}static from([s,...c],u){return new RunnableSequence({first:_coerceToRunnable(s),middle:c.slice(0,-1).map(_coerceToRunnable),last:_coerceToRunnable(c[c.length-1]),name:u})}}class RunnableMap extends Runnable{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(s){super(s),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[c,u]of Object.entries(s.steps))this.steps[c]=_coerceToRunnable(u)}static from(s){return new RunnableMap({steps:s})}async invoke(s,c){var p;const u=ensureConfig(c),d=await((p=await getCallbackManagerForConfig(u))==null?void 0:p.handleChainStart(this.toJSON(),{input:s},void 0,void 0,void 0,void 0,u==null?void 0:u.runName)),h={};try{await Promise.all(Object.entries(this.steps).map(async([m,f])=>{h[m]=await f.invoke(s,patchConfig(u,{callbacks:d==null?void 0:d.getChild(`map:key:${m}`)}))}))}catch(m){throw await(d==null?void 0:d.handleChainError(m)),m}return await(d==null?void 0:d.handleChainEnd(h)),h}async*_transform(s,c,u){const d={...this.steps},h=atee(s,Object.keys(d).length),p=new Map(Object.entries(d).map(([m,f],_)=>{const y=f.transform(h[_],patchConfig(u,{callbacks:c==null?void 0:c.getChild(`map:key:${m}`)}));return[m,y.next().then(E=>({key:m,gen:y,result:E}))]}));for(;p.size;){const{key:m,result:f,gen:_}=await Promise.race(p.values());p.delete(m),f.done||(yield{[m]:f.value},p.set(m,_.next().then(y=>({key:m,gen:_,result:y}))))}}transform(s,c){return this._transformStreamWithConfig(s,this._transform.bind(this),c)}async stream(s,c){async function*u(){yield s}const d=new AsyncGeneratorWithSetup(this.transform(u(),c));return await d.setup,IterableReadableStream.fromAsyncGenerator(d)}}class RunnableLambda extends Runnable{static lc_name(){return"RunnableLambda"}constructor(s){super(s),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.func=s.func}static from(s){return new RunnableLambda({func:s})}async _invoke(s,c,u){return new Promise((d,h)=>{const p=patchConfig(c,{callbacks:u==null?void 0:u.getChild(),recursionLimit:((c==null?void 0:c.recursionLimit)??DEFAULT_RECURSION_LIMIT)-1});AsyncLocalStorageProviderSingleton.getInstance().run(p,async()=>{try{let m=await this.func(s,{...p,config:p});if(m&&Runnable.isRunnable(m)){if((c==null?void 0:c.recursionLimit)===0)throw new Error("Recursion limit reached.");m=await m.invoke(s,{...p,recursionLimit:(p.recursionLimit??DEFAULT_RECURSION_LIMIT)-1})}d(m)}catch(m){h(m)}})})}async invoke(s,c){return this._callWithConfig(this._invoke,s,c)}async*_transform(s,c,u){let d;for await(const p of s)if(d===void 0)d=p;else try{d=concat(d,p)}catch{d=p}const h=await new Promise((p,m)=>{AsyncLocalStorageProviderSingleton.getInstance().run(u,async()=>{try{const f=await this.func(d,{...u,config:u});p(f)}catch(f){m(f)}})});if(h&&Runnable.isRunnable(h)){if((u==null?void 0:u.recursionLimit)===0)throw new Error("Recursion limit reached.");const p=await h.stream(d,patchConfig(u,{callbacks:c==null?void 0:c.getChild(),recursionLimit:((u==null?void 0:u.recursionLimit)??DEFAULT_RECURSION_LIMIT)-1}));for await(const m of p)yield m}else yield h}transform(s,c){return this._transformStreamWithConfig(s,this._transform.bind(this),c)}async stream(s,c){async function*u(){yield s}const d=new AsyncGeneratorWithSetup(this.transform(u(),c));return await d.setup,IterableReadableStream.fromAsyncGenerator(d)}}class RunnableWithFallbacks extends Runnable{static lc_name(){return"RunnableWithFallbacks"}constructor(s){super(s),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=s.runnable,this.fallbacks=s.fallbacks}*runnables(){yield this.runnable;for(const s of this.fallbacks)yield s}async invoke(s,c){var h;const u=await((h=await CallbackManager.configure(c==null?void 0:c.callbacks,void 0,c==null?void 0:c.tags,void 0,c==null?void 0:c.metadata))==null?void 0:h.handleChainStart(this.toJSON(),_coerceToDict(s,"input"),void 0,void 0,void 0,void 0,c==null?void 0:c.runName));let d;for(const p of this.runnables())try{const m=await p.invoke(s,patchConfig(c,{callbacks:u==null?void 0:u.getChild()}));return await(u==null?void 0:u.handleChainEnd(_coerceToDict(m,"output"))),m}catch(m){d===void 0&&(d=m)}throw d===void 0?new Error("No error stored at end of fallback."):(await(u==null?void 0:u.handleChainError(d)),d)}async batch(s,c,u){if(u!=null&&u.returnExceptions)throw new Error("Not implemented.");const d=this._getOptionsList(c??{},s.length),h=await Promise.all(d.map(f=>CallbackManager.configure(f==null?void 0:f.callbacks,void 0,f==null?void 0:f.tags,void 0,f==null?void 0:f.metadata))),p=await Promise.all(h.map((f,_)=>f==null?void 0:f.handleChainStart(this.toJSON(),_coerceToDict(s[_],"input"),void 0,void 0,void 0,void 0,d[_].runName)));let m;for(const f of this.runnables())try{const _=await f.batch(s,p.map((y,E)=>patchConfig(d[E],{callbacks:y==null?void 0:y.getChild()})),u);return await Promise.all(p.map((y,E)=>y==null?void 0:y.handleChainEnd(_coerceToDict(_[E],"output")))),_}catch(_){m===void 0&&(m=_)}throw m?(await Promise.all(p.map(f=>f==null?void 0:f.handleChainError(m))),m):new Error("No error stored at end of fallbacks.")}}function _coerceToRunnable(a){if(typeof a=="function")return new RunnableLambda({func:a});if(Runnable.isRunnable(a))return a;if(!Array.isArray(a)&&typeof a=="object"){const s={};for(const[c,u]of Object.entries(a))s[c]=_coerceToRunnable(u);return new RunnableMap({steps:s})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class RunnableAssign extends Runnable{static lc_name(){return"RunnableAssign"}constructor(s){s instanceof RunnableMap&&(s={mapper:s}),super(s),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=s.mapper}async invoke(s,c){const u=await this.mapper.invoke(s,c);return{...s,...u}}async*_transform(s,c,u){const d=this.mapper.getStepsKeys(),[h,p]=atee(s),m=this.mapper.transform(p,patchConfig(u,{callbacks:c==null?void 0:c.getChild()})),f=m.next();for await(const _ of h){if(typeof _!="object"||Array.isArray(_))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof _}`);const y=Object.fromEntries(Object.entries(_).filter(([E])=>!d.includes(E)));Object.keys(y).length>0&&(yield y)}yield(await f).value;for await(const _ of m)yield _}transform(s,c){return this._transformStreamWithConfig(s,this._transform.bind(this),c)}async stream(s,c){async function*u(){yield s}const d=new AsyncGeneratorWithSetup(this.transform(u(),c));return await d.setup,IterableReadableStream.fromAsyncGenerator(d)}}class RunnablePick extends Runnable{static lc_name(){return"RunnablePick"}constructor(s){(typeof s=="string"||Array.isArray(s))&&(s={keys:s}),super(s),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=s.keys}async _pick(s){if(typeof this.keys=="string")return s[this.keys];{const c=this.keys.map(u=>[u,s[u]]).filter(u=>u[1]!==void 0);return c.length===0?void 0:Object.fromEntries(c)}}async invoke(s,c){return this._callWithConfig(this._pick.bind(this),s,c)}async*_transform(s){for await(const c of s){const u=await this._pick(c);u!==void 0&&(yield u)}}transform(s,c){return this._transformStreamWithConfig(s,this._transform.bind(this),c)}async stream(s,c){async function*u(){yield s}const d=new AsyncGeneratorWithSetup(this.transform(u(),c));return await d.setup,IterableReadableStream.fromAsyncGenerator(d)}}var base64Js={};base64Js.byteLength=byteLength,base64Js.toByteArray=toByteArray,base64Js.fromByteArray=fromByteArray;for(var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup[45]=62,revLookup[95]=63;function getLens(a){var s=a.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=a.indexOf("=");c===-1&&(c=s);var u=c===s?0:4-c%4;return[c,u]}function byteLength(a){var s=getLens(a),c=s[0],u=s[1];return(c+u)*3/4-u}function _byteLength(a,s,c){return(s+c)*3/4-c}function toByteArray(a){var s,c=getLens(a),u=c[0],d=c[1],h=new Arr(_byteLength(a,u,d)),p=0,m=d>0?u-4:u,f;for(f=0;f<m;f+=4)s=revLookup[a.charCodeAt(f)]<<18|revLookup[a.charCodeAt(f+1)]<<12|revLookup[a.charCodeAt(f+2)]<<6|revLookup[a.charCodeAt(f+3)],h[p++]=s>>16&255,h[p++]=s>>8&255,h[p++]=s&255;return d===2&&(s=revLookup[a.charCodeAt(f)]<<2|revLookup[a.charCodeAt(f+1)]>>4,h[p++]=s&255),d===1&&(s=revLookup[a.charCodeAt(f)]<<10|revLookup[a.charCodeAt(f+1)]<<4|revLookup[a.charCodeAt(f+2)]>>2,h[p++]=s>>8&255,h[p++]=s&255),h}function tripletToBase64(a){return lookup[a>>18&63]+lookup[a>>12&63]+lookup[a>>6&63]+lookup[a&63]}function encodeChunk(a,s,c){for(var u,d=[],h=s;h<c;h+=3)u=(a[h]<<16&16711680)+(a[h+1]<<8&65280)+(a[h+2]&255),d.push(tripletToBase64(u));return d.join("")}function fromByteArray(a){for(var s,c=a.length,u=c%3,d=[],h=16383,p=0,m=c-u;p<m;p+=h)d.push(encodeChunk(a,p,p+h>m?m:p+h));return u===1?(s=a[c-1],d.push(lookup[s>>2]+lookup[s<<4&63]+"==")):u===2&&(s=(a[c-2]<<8)+a[c-1],d.push(lookup[s>>10]+lookup[s>>4&63]+lookup[s<<2&63]+"=")),d.join("")}var __defProp=Object.defineProperty,__defNormalProp=(a,s,c)=>s in a?__defProp(a,s,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[s]=c,__publicField=(a,s,c)=>(__defNormalProp(a,typeof s!="symbol"?s+"":s,c),c);function bytePairMerge(a,s){let c=Array.from({length:a.length},(u,d)=>({start:d,end:d+1}));for(;c.length>1;){let u=null;for(let d=0;d<c.length-1;d++){const h=a.slice(c[d].start,c[d+1].end),p=s.get(h.join(","));p!=null&&(u==null||p<u[0])&&(u=[p,d])}if(u!=null){const d=u[1];c[d]={start:c[d].start,end:c[d+1].end},c.splice(d+1,1)}else break}return c}function bytePairEncode(a,s){return a.length===1?[s.get(a.join(","))]:bytePairMerge(a,s).map(c=>s.get(a.slice(c.start,c.end).join(","))).filter(c=>c!=null)}function escapeRegex(a){return a.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var _Tiktoken=class{constructor(a,s){Re(this,"specialTokens");Re(this,"inverseSpecialTokens");Re(this,"patStr");Re(this,"textEncoder",new TextEncoder);Re(this,"textDecoder",new TextDecoder("utf-8"));Re(this,"rankMap",new Map);Re(this,"textMap",new Map);this.patStr=a.pat_str;const c=a.bpe_ranks.split(`
`).filter(Boolean).reduce((u,d)=>{const[h,p,...m]=d.split(" "),f=Number.parseInt(p,10);return m.forEach((_,y)=>u[_]=f+y),u},{});for(const[u,d]of Object.entries(c)){const h=base64Js.toByteArray(u);this.rankMap.set(h.join(","),d),this.textMap.set(d,h)}this.specialTokens={...a.special_tokens,...s},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((u,[d,h])=>(u[h]=this.textEncoder.encode(d),u),{})}encode(a,s=[],c="all"){const u=new RegExp(this.patStr,"ug"),d=_Tiktoken.specialTokenRegex(Object.keys(this.specialTokens)),h=[],p=new Set(s==="all"?Object.keys(this.specialTokens):s),m=new Set(c==="all"?Object.keys(this.specialTokens).filter(_=>!p.has(_)):c);if(m.size>0){const _=_Tiktoken.specialTokenRegex([...m]),y=a.match(_);if(y!=null)throw new Error(`The text contains a special token that is not allowed: ${y[0]}`)}let f=0;for(;;){let _=null,y=f;for(;d.lastIndex=y,_=d.exec(a),!(_==null||p.has(_[0]));)y=_.index+1;const E=(_==null?void 0:_.index)??a.length;for(const T of a.substring(f,E).matchAll(u)){const A=this.textEncoder.encode(T[0]),v=this.rankMap.get(A.join(","));if(v!=null){h.push(v);continue}h.push(...bytePairEncode(A,this.rankMap))}if(_==null)break;let b=this.specialTokens[_[0]];h.push(b),f=_.index+_[0].length}return h}decode(a){const s=[];let c=0;for(let h=0;h<a.length;++h){const p=a[h],m=this.textMap.get(p)??this.inverseSpecialTokens[p];m!=null&&(s.push(m),c+=m.length)}const u=new Uint8Array(c);let d=0;for(const h of s)u.set(h,d),d+=h.length;return this.textDecoder.decode(u)}},Tiktoken=_Tiktoken;__publicField(Tiktoken,"specialTokenRegex",a=>new RegExp(a.map(s=>escapeRegex(s)).join("|"),"g"));function getEncodingNameForModel(a){switch(a){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":return"cl100k_base";default:throw new Error("Unknown model")}}const cache={},caller=new AsyncCaller({});async function getEncoding(a){return a in cache||(cache[a]=caller.fetch(`https://tiktoken.pages.dev/js/${a}.json`).then(s=>s.json()).then(s=>new Tiktoken(s)).catch(s=>{throw delete cache[a],s})),await cache[a]}async function encodingForModel(a){return getEncoding(getEncodingNameForModel(a))}const RUN_KEY="__run";class GenerationChunk{constructor(s){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=s.text,this.generationInfo=s.generationInfo}concat(s){return new GenerationChunk({text:this.text+s.text,generationInfo:{...this.generationInfo,...s.generationInfo}})}}class ChatGenerationChunk extends GenerationChunk{constructor(s){super(s),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=s.message}concat(s){return new ChatGenerationChunk({text:this.text+s.text,generationInfo:{...this.generationInfo,...s.generationInfo},message:this.message.concat(s.message)})}}/*
* [js-sha1]{@link https://github.com/emn178/js-sha1}
*
* @version 0.6.0
* @author Chen, Yi-Cyuan [emn178@gmail.com]
* @copyright Chen, Yi-Cyuan 2014-2017
* @license MIT
*/var root=typeof window=="object"?window:{},HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],blocks=[];function Sha1(a){a?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Sha1.prototype.update=function(a){if(!this.finalized){var s=typeof a!="string";s&&a.constructor===root.ArrayBuffer&&(a=new Uint8Array(a));for(var c,u=0,d,h=a.length||0,p=this.blocks;u<h;){if(this.hashed&&(this.hashed=!1,p[0]=this.block,p[16]=p[1]=p[2]=p[3]=p[4]=p[5]=p[6]=p[7]=p[8]=p[9]=p[10]=p[11]=p[12]=p[13]=p[14]=p[15]=0),s)for(d=this.start;u<h&&d<64;++u)p[d>>2]|=a[u]<<SHIFT[d++&3];else for(d=this.start;u<h&&d<64;++u)c=a.charCodeAt(u),c<128?p[d>>2]|=c<<SHIFT[d++&3]:c<2048?(p[d>>2]|=(192|c>>6)<<SHIFT[d++&3],p[d>>2]|=(128|c&63)<<SHIFT[d++&3]):c<55296||c>=57344?(p[d>>2]|=(224|c>>12)<<SHIFT[d++&3],p[d>>2]|=(128|c>>6&63)<<SHIFT[d++&3],p[d>>2]|=(128|c&63)<<SHIFT[d++&3]):(c=65536+((c&1023)<<10|a.charCodeAt(++u)&1023),p[d>>2]|=(240|c>>18)<<SHIFT[d++&3],p[d>>2]|=(128|c>>12&63)<<SHIFT[d++&3],p[d>>2]|=(128|c>>6&63)<<SHIFT[d++&3],p[d>>2]|=(128|c&63)<<SHIFT[d++&3]);this.lastByteIndex=d,this.bytes+=d-this.start,d>=64?(this.block=p[16],this.start=d-64,this.hash(),this.hashed=!0):this.start=d}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var a=this.blocks,s=this.lastByteIndex;a[16]=this.block,a[s>>2]|=EXTRA[s&3],this.block=a[16],s>=56&&(this.hashed||this.hash(),a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),a[14]=this.hBytes<<3|this.bytes>>>29,a[15]=this.bytes<<3,this.hash()}},Sha1.prototype.hash=function(){var a=this.h0,s=this.h1,c=this.h2,u=this.h3,d=this.h4,h,p,m,f=this.blocks;for(p=16;p<80;++p)m=f[p-3]^f[p-8]^f[p-14]^f[p-16],f[p]=m<<1|m>>>31;for(p=0;p<20;p+=5)h=s&c|~s&u,m=a<<5|a>>>27,d=m+h+d+1518500249+f[p]<<0,s=s<<30|s>>>2,h=a&s|~a&c,m=d<<5|d>>>27,u=m+h+u+1518500249+f[p+1]<<0,a=a<<30|a>>>2,h=d&a|~d&s,m=u<<5|u>>>27,c=m+h+c+1518500249+f[p+2]<<0,d=d<<30|d>>>2,h=u&d|~u&a,m=c<<5|c>>>27,s=m+h+s+1518500249+f[p+3]<<0,u=u<<30|u>>>2,h=c&u|~c&d,m=s<<5|s>>>27,a=m+h+a+1518500249+f[p+4]<<0,c=c<<30|c>>>2;for(;p<40;p+=5)h=s^c^u,m=a<<5|a>>>27,d=m+h+d+1859775393+f[p]<<0,s=s<<30|s>>>2,h=a^s^c,m=d<<5|d>>>27,u=m+h+u+1859775393+f[p+1]<<0,a=a<<30|a>>>2,h=d^a^s,m=u<<5|u>>>27,c=m+h+c+1859775393+f[p+2]<<0,d=d<<30|d>>>2,h=u^d^a,m=c<<5|c>>>27,s=m+h+s+1859775393+f[p+3]<<0,u=u<<30|u>>>2,h=c^u^d,m=s<<5|s>>>27,a=m+h+a+1859775393+f[p+4]<<0,c=c<<30|c>>>2;for(;p<60;p+=5)h=s&c|s&u|c&u,m=a<<5|a>>>27,d=m+h+d-1894007588+f[p]<<0,s=s<<30|s>>>2,h=a&s|a&c|s&c,m=d<<5|d>>>27,u=m+h+u-1894007588+f[p+1]<<0,a=a<<30|a>>>2,h=d&a|d&s|a&s,m=u<<5|u>>>27,c=m+h+c-1894007588+f[p+2]<<0,d=d<<30|d>>>2,h=u&d|u&a|d&a,m=c<<5|c>>>27,s=m+h+s-1894007588+f[p+3]<<0,u=u<<30|u>>>2,h=c&u|c&d|u&d,m=s<<5|s>>>27,a=m+h+a-1894007588+f[p+4]<<0,c=c<<30|c>>>2;for(;p<80;p+=5)h=s^c^u,m=a<<5|a>>>27,d=m+h+d-899497514+f[p]<<0,s=s<<30|s>>>2,h=a^s^c,m=d<<5|d>>>27,u=m+h+u-899497514+f[p+1]<<0,a=a<<30|a>>>2,h=d^a^s,m=u<<5|u>>>27,c=m+h+c-899497514+f[p+2]<<0,d=d<<30|d>>>2,h=u^d^a,m=c<<5|c>>>27,s=m+h+s-899497514+f[p+3]<<0,u=u<<30|u>>>2,h=c^u^d,m=s<<5|s>>>27,a=m+h+a-899497514+f[p+4]<<0,c=c<<30|c>>>2;this.h0=this.h0+a<<0,this.h1=this.h1+s<<0,this.h2=this.h2+c<<0,this.h3=this.h3+u<<0,this.h4=this.h4+d<<0},Sha1.prototype.hex=function(){this.finalize();var a=this.h0,s=this.h1,c=this.h2,u=this.h3,d=this.h4;return HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[a&15]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[s&15]+HEX_CHARS[c>>28&15]+HEX_CHARS[c>>24&15]+HEX_CHARS[c>>20&15]+HEX_CHARS[c>>16&15]+HEX_CHARS[c>>12&15]+HEX_CHARS[c>>8&15]+HEX_CHARS[c>>4&15]+HEX_CHARS[c&15]+HEX_CHARS[u>>28&15]+HEX_CHARS[u>>24&15]+HEX_CHARS[u>>20&15]+HEX_CHARS[u>>16&15]+HEX_CHARS[u>>12&15]+HEX_CHARS[u>>8&15]+HEX_CHARS[u>>4&15]+HEX_CHARS[u&15]+HEX_CHARS[d>>28&15]+HEX_CHARS[d>>24&15]+HEX_CHARS[d>>20&15]+HEX_CHARS[d>>16&15]+HEX_CHARS[d>>12&15]+HEX_CHARS[d>>8&15]+HEX_CHARS[d>>4&15]+HEX_CHARS[d&15]},Sha1.prototype.toString=Sha1.prototype.hex,Sha1.prototype.digest=function(){this.finalize();var a=this.h0,s=this.h1,c=this.h2,u=this.h3,d=this.h4;return[a>>24&255,a>>16&255,a>>8&255,a&255,s>>24&255,s>>16&255,s>>8&255,s&255,c>>24&255,c>>16&255,c>>8&255,c&255,u>>24&255,u>>16&255,u>>8&255,u&255,d>>24&255,d>>16&255,d>>8&255,d&255]},Sha1.prototype.array=Sha1.prototype.digest,Sha1.prototype.arrayBuffer=function(){this.finalize();var a=new ArrayBuffer(20),s=new DataView(a);return s.setUint32(0,this.h0),s.setUint32(4,this.h1),s.setUint32(8,this.h2),s.setUint32(12,this.h3),s.setUint32(16,this.h4),a};const insecureHash=a=>new Sha1(!0).update(a).hex(),getCacheKey=(...a)=>insecureHash(a.join("_"));class BaseCache{}const GLOBAL_MAP=new Map;class InMemoryCache extends BaseCache{constructor(s){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=s??new Map}lookup(s,c){return Promise.resolve(this.cache.get(getCacheKey(s,c))??null)}async update(s,c,u){this.cache.set(getCacheKey(s,c),u)}static global(){return new InMemoryCache(GLOBAL_MAP)}}class BasePromptValue extends Serializable{}class StringPromptValue extends BasePromptValue{static lc_name(){return"StringPromptValue"}constructor(s){super({value:s}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=s}toString(){return this.value}toChatMessages(){return[new HumanMessage(this.value)]}}class ChatPromptValue extends BasePromptValue{static lc_name(){return"ChatPromptValue"}constructor(s){Array.isArray(s)&&(s={messages:s}),super(s),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=s.messages}toString(){return getBufferString(this.messages)}toChatMessages(){return this.messages}}const getModelNameForTiktoken=a=>a.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":a.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":a.startsWith("gpt-4-32k")?"gpt-4-32k":a.startsWith("gpt-4-")?"gpt-4":a,getVerbosity=()=>!1;class BaseLangChain extends Runnable{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(s){super(s),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=s.verbose??getVerbosity(),this.callbacks=s.callbacks,this.tags=s.tags??[],this.metadata=s.metadata??{}}}class BaseLanguageModel extends BaseLangChain{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:s,callbackManager:c,...u}){super({callbacks:s??c,...u}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof u.cache=="object"?this.cache=u.cache:u.cache?this.cache=InMemoryCache.global():this.cache=void 0,this.caller=new AsyncCaller(u??{})}async getNumTokens(s){if(typeof s!="string")return 0;let c=Math.ceil(s.length/4);if(!this._encoding)try{this._encoding=await encodingForModel("modelName"in this?getModelNameForTiktoken(this.modelName):"gpt2")}catch(u){console.warn("Failed to calculate number of tokens, falling back to approximate count",u)}if(this._encoding)try{c=this._encoding.encode(s).length}catch(u){console.warn("Failed to calculate number of tokens, falling back to approximate count",u)}return c}static _convertInputToPromptValue(s){return typeof s=="string"?new StringPromptValue(s):Array.isArray(s)?new ChatPromptValue(s.map(coerceMessageLikeToMessage)):s}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall(s){const c={...this._identifyingParams(),...s,_type:this._llmType(),_model:this._modelType()};return Object.entries(c).filter(([u,d])=>d!==void 0).map(([u,d])=>`${u}:${JSON.stringify(d)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(s){throw new Error("Use .toJSON() instead")}}class BaseChatModel extends BaseLanguageModel{constructor(s){super(s),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]})}_separateRunnableConfigFromCallOptions(s){const[c,u]=super._separateRunnableConfigFromCallOptions(s);return u!=null&&u.timeout&&!u.signal&&(u.signal=AbortSignal.timeout(u.timeout)),[c,u]}async invoke(s,c){const u=BaseChatModel._convertInputToPromptValue(s);return(await this.generatePrompt([u],c,c==null?void 0:c.callbacks)).generations[0][0].message}async*_streamResponseChunks(s,c,u){throw new Error("Not implemented.")}async*_streamIterator(s,c){if(this._streamResponseChunks===BaseChatModel.prototype._streamResponseChunks)yield this.invoke(s,c);else{const u=BaseChatModel._convertInputToPromptValue(s).toChatMessages(),[d,h]=this._separateRunnableConfigFromCallOptions(c),p=await CallbackManager.configure(d.callbacks,this.callbacks,d.tags,this.tags,d.metadata,this.metadata,{verbose:this.verbose}),m={options:h,invocation_params:this==null?void 0:this.invocationParams(h),batch_size:1},f=await(p==null?void 0:p.handleChatModelStart(this.toJSON(),[u],void 0,void 0,m,void 0,void 0,d.runName));let _;try{for await(const y of this._streamResponseChunks(u,h,f==null?void 0:f[0]))yield y.message,_?_=_.concat(y):_=y}catch(y){throw await Promise.all((f??[]).map(E=>E==null?void 0:E.handleLLMError(y))),y}await Promise.all((f??[]).map(y=>y==null?void 0:y.handleLLMEnd({generations:[[_]]})))}}async _generateUncached(s,c,u){var b;const d=s.map(T=>T.map(coerceMessageLikeToMessage)),h=await CallbackManager.configure(u.callbacks,this.callbacks,u.tags,this.tags,u.metadata,this.metadata,{verbose:this.verbose}),p={options:c,invocation_params:this==null?void 0:this.invocationParams(c),batch_size:1},m=await(h==null?void 0:h.handleChatModelStart(this.toJSON(),d,void 0,void 0,p,void 0,void 0,u.runName)),f=await Promise.allSettled(d.map((T,A)=>this._generate(T,{...c,promptIndex:A},m==null?void 0:m[A]))),_=[],y=[];await Promise.all(f.map(async(T,A)=>{var v,S;if(T.status==="fulfilled"){const O=T.value;return _[A]=O.generations,y[A]=O.llmOutput,(v=m==null?void 0:m[A])==null?void 0:v.handleLLMEnd({generations:[O.generations],llmOutput:O.llmOutput})}else return await((S=m==null?void 0:m[A])==null?void 0:S.handleLLMError(T.reason)),Promise.reject(T.reason)}));const E={generations:_,llmOutput:y.length?(b=this._combineLLMOutput)==null?void 0:b.call(this,...y):void 0};return Object.defineProperty(E,RUN_KEY,{value:m?{runIds:m==null?void 0:m.map(T=>T.runId)}:void 0,configurable:!0}),E}async _generateCached({messages:s,cache:c,llmStringKey:u,parsedOptions:d,handledOptions:h}){const p=s.map(A=>A.map(coerceMessageLikeToMessage)),m=await CallbackManager.configure(h.callbacks,this.callbacks,h.tags,this.tags,h.metadata,this.metadata,{verbose:this.verbose}),f={options:d,invocation_params:this==null?void 0:this.invocationParams(d),batch_size:1,cached:!0},_=await(m==null?void 0:m.handleChatModelStart(this.toJSON(),p,void 0,void 0,f,void 0,void 0,h.runName)),y=[],E=(await Promise.allSettled(p.map(async(A,v)=>{const S=BaseChatModel._convertInputToPromptValue(A).toString(),O=await c.lookup(S,u);return O==null&&y.push(v),O}))).map((A,v)=>({result:A,runManager:_==null?void 0:_[v]})).filter(({result:A})=>A.status==="fulfilled"&&A.value!=null||A.status==="rejected"),b=[];await Promise.all(E.map(async({result:A,runManager:v},S)=>{if(A.status==="fulfilled"){const O=A.value;return b[S]=O,O.length&&await(v==null?void 0:v.handleLLMNewToken(O[0].text)),v==null?void 0:v.handleLLMEnd({generations:[O]})}else return await(v==null?void 0:v.handleLLMError(A.reason)),Promise.reject(A.reason)}));const T={generations:b,missingPromptIndices:y};return Object.defineProperty(T,RUN_KEY,{value:_?{runIds:_==null?void 0:_.map(A=>A.runId)}:void 0,configurable:!0}),T}async generate(s,c,u){let d;Array.isArray(c)?d={stop:c}:d=c;const h=s.map(T=>T.map(coerceMessageLikeToMessage)),[p,m]=this._separateRunnableConfigFromCallOptions(d);if(p.callbacks=p.callbacks??u,!this.cache)return this._generateUncached(h,m,p);const{cache:f}=this,_=this._getSerializedCacheKeyParametersForCall(m),{generations:y,missingPromptIndices:E}=await this._generateCached({messages:h,cache:f,llmStringKey:_,parsedOptions:m,handledOptions:p});let b={};if(E.length>0){const T=await this._generateUncached(E.map(A=>h[A]),m,p);await Promise.all(T.generations.map(async(A,v)=>{const S=E[v];y[S]=A;const O=BaseChatModel._convertInputToPromptValue(h[S]).toString();return f.update(O,_,A)})),b=T.llmOutput??{}}return{generations:y,llmOutput:b}}invocationParams(s){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(s,c,u){const d=s.map(h=>h.toChatMessages());return this.generate(d,c,u)}async call(s,c,u){return(await this.generate([s.map(coerceMessageLikeToMessage)],c,u)).generations[0][0].message}async callPrompt(s,c,u){const d=s.toChatMessages();return this.call(d,c,u)}async predictMessages(s,c,u){return this.call(s,c,u)}async predict(s,c,u){const d=new HumanMessage(s),h=await this.call([d],c,u);if(typeof h.content!="string")throw new Error("Cannot use predict when output is not a string.");return h.content}}class SimpleChatModel extends BaseChatModel{async _generate(s,c,u){const d=await this._call(s,c,u),h=new AIMessage(d);if(typeof h.content!="string")throw new Error("Cannot generate with a simple chat model when output is not a string.");return{generations:[{text:h.content,message:h}]}}}async function*createOllamaStream(a,s,c){let u=a;u.startsWith("http://localhost:")&&(u=u.replace("http://localhost:","http://127.0.0.1:"));const d=await getCustomOllamaHeaders(),h=await fetch(u,{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",...c.headers,...d},signal:c.signal});if(!h.ok){let _;const y=await h.text();try{const E=JSON.parse(y);_=new Error(`Ollama call failed with status code ${h.status}: ${E.error}`)}catch{_=new Error(`Ollama call failed with status code ${h.status}: ${y}`)}throw _.response=h,_}if(!h.body)throw new Error("Could not begin Ollama stream. Please check the given URL and try again.");const p=IterableReadableStream.fromReadableStream(h.body),m=new TextDecoder;let f="";for await(const _ of p){const y=(f+m.decode(_)).split(`
`);f=y.pop()||"";for(const E of y)try{yield JSON.parse(E)}catch{console.warn(`Received a non-JSON parseable chunk: ${E}`)}}}async function*createOllamaGenerateStream(a,s,c){yield*createOllamaStream(`${a}/api/generate`,s,c)}async function*createOllamaChatStream(a,s,c){yield*createOllamaStream(`${a}/api/chat`,s,c)}const parseKeepAlive=a=>a==="-1"?-1:a;class ChatOllama extends SimpleChatModel{constructor(c){var u;super(c);Re(this,"lc_serializable",!0);Re(this,"model","llama2");Re(this,"baseUrl","http://localhost:11434");Re(this,"keepAlive");Re(this,"embeddingOnly");Re(this,"f16KV");Re(this,"frequencyPenalty");Re(this,"headers");Re(this,"logitsAll");Re(this,"lowVram");Re(this,"mainGpu");Re(this,"mirostat");Re(this,"mirostatEta");Re(this,"mirostatTau");Re(this,"numBatch");Re(this,"numCtx");Re(this,"numGpu");Re(this,"numGqa");Re(this,"numKeep");Re(this,"numPredict");Re(this,"numThread");Re(this,"penalizeNewline");Re(this,"presencePenalty");Re(this,"repeatLastN");Re(this,"repeatPenalty");Re(this,"ropeFrequencyBase");Re(this,"ropeFrequencyScale");Re(this,"temperature");Re(this,"stop");Re(this,"tfsZ");Re(this,"topK");Re(this,"topP");Re(this,"minP");Re(this,"typicalP");Re(this,"useMLock");Re(this,"useMMap");Re(this,"useMlock");Re(this,"vocabOnly");Re(this,"seed");Re(this,"format");this.model=c.model??this.model,this.baseUrl=(u=c.baseUrl)!=null&&u.endsWith("/")?c.baseUrl.slice(0,-1):c.baseUrl??this.baseUrl,this.keepAlive=parseKeepAlive(c.keepAlive),this.embeddingOnly=c.embeddingOnly,this.f16KV=c.f16KV,this.frequencyPenalty=c.frequencyPenalty,this.headers=c.headers,this.logitsAll=c.logitsAll,this.lowVram=c.lowVram,this.mainGpu=c.mainGpu,this.mirostat=c.mirostat,this.mirostatEta=c.mirostatEta,this.mirostatTau=c.mirostatTau,this.numBatch=c.numBatch,this.numCtx=c.numCtx,this.numGpu=c.numGpu===null?void 0:c.numGpu,this.numGqa=c.numGqa,this.numKeep=c.numKeep,this.numPredict=c.numPredict,this.numThread=c.numThread,this.penalizeNewline=c.penalizeNewline,this.presencePenalty=c.presencePenalty,this.repeatLastN=c.repeatLastN,this.repeatPenalty=c.repeatPenalty,this.ropeFrequencyBase=c.ropeFrequencyBase,this.ropeFrequencyScale=c.ropeFrequencyScale,this.temperature=c.temperature,this.stop=c.stop,this.tfsZ=c.tfsZ,this.topK=c.topK,this.topP=c.topP,this.minP=c.minP,this.typicalP=c.typicalP,this.useMLock=c.useMLock,this.useMMap=c.useMMap,this.useMlock=c.useMlock,this.vocabOnly=c.vocabOnly,this.format=c.format,this.seed=c.seed}static lc_name(){return"ChatOllama"}getLsParams(c){const u=this.invocationParams(c);return{ls_provider:"ollama",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:this.temperature??void 0,ls_stop:this.stop,ls_max_tokens:u.options.num_predict}}_llmType(){return"ollama"}invocationParams(c){return{model:this.model,format:this.format,keep_alive:this.keepAlive,options:{embedding_only:this.embeddingOnly,f16_kv:this.f16KV,frequency_penalty:this.frequencyPenalty,logits_all:this.logitsAll,low_vram:this.lowVram,main_gpu:this.mainGpu,mirostat:this.mirostat,mirostat_eta:this.mirostatEta,mirostat_tau:this.mirostatTau,num_batch:this.numBatch,num_ctx:this.numCtx,num_gpu:this.numGpu,num_gqa:this.numGqa,num_keep:this.numKeep,num_predict:this.numPredict,num_thread:this.numThread,penalize_newline:this.penalizeNewline,presence_penalty:this.presencePenalty,repeat_last_n:this.repeatLastN,repeat_penalty:this.repeatPenalty,rope_frequency_base:this.ropeFrequencyBase,rope_frequency_scale:this.ropeFrequencyScale,temperature:this.temperature,stop:(c==null?void 0:c.stop)??this.stop,tfs_z:this.tfsZ,top_k:this.topK,top_p:this.topP,min_p:this.minP,typical_p:this.typicalP,use_mlock:this.useMlock,use_mmap:this.useMMap,vocab_only:this.vocabOnly,seed:this.seed}}}_combineLLMOutput(){return{}}async*_streamResponseChunksLegacy(c,u,d){const h=createOllamaGenerateStream(this.baseUrl,{...this.invocationParams(u),prompt:this._formatMessagesAsPrompt(c)},{...u,headers:this.headers});for await(const p of h)p.done?yield new ChatGenerationChunk({text:"",message:new AIMessageChunk({content:""}),generationInfo:{model:p.model,total_duration:p.total_duration,load_duration:p.load_duration,prompt_eval_count:p.prompt_eval_count,prompt_eval_duration:p.prompt_eval_duration,eval_count:p.eval_count,eval_duration:p.eval_duration}}):(yield new ChatGenerationChunk({text:p.response,message:new AIMessageChunk({content:p.response})}),await(d==null?void 0:d.handleLLMNewToken(p.response??"")))}async*_streamResponseChunks(c,u,d){var h;try{const p=await this.caller.call(async()=>createOllamaChatStream(this.baseUrl,{...this.invocationParams(u),messages:this._convertMessagesToOllamaMessages(c)},{...u,headers:this.headers}));for await(const m of p)m.done?yield new ChatGenerationChunk({text:"",message:new AIMessageChunk({content:""}),generationInfo:{model:m.model,total_duration:m.total_duration,load_duration:m.load_duration,prompt_eval_count:m.prompt_eval_count,prompt_eval_duration:m.prompt_eval_duration,eval_count:m.eval_count,eval_duration:m.eval_duration}}):(yield new ChatGenerationChunk({text:m.message.content,message:new AIMessageChunk({content:m.message.content})}),await(d==null?void 0:d.handleLLMNewToken(m.message.content??"")))}catch(p){if(((h=p.response)==null?void 0:h.status)===404)console.warn("[WARNING]: It seems you are using a legacy version of Ollama. Please upgrade to a newer version for better chat support."),yield*this._streamResponseChunksLegacy(c,u,d);else throw p}}_convertMessagesToOllamaMessages(c){return c.map(u=>{let d;if(u._getType()==="human")d="user";else if(u._getType()==="ai")d="assistant";else if(u._getType()==="system")d="system";else throw new Error(`Unsupported message type for Ollama: ${u._getType()}`);let h="";const p=[];if(typeof u.content=="string")h=u.content;else for(const m of u.content)if(m.type==="text")h=`${h}
${m.text}`;else if(m.type==="image_url"&&typeof m.image_url=="string"){const f=m.image_url.split(",");p.push(f[1]??f[0])}else throw new Error('Unsupported message content type. Must either have type "text" or type "image_url" with a string "image_url" field.');return{role:d,content:h,images:p}})}_formatMessagesAsPrompt(c){return c.map(u=>{let d;return u._getType()==="human"?d=`[INST] ${u.content} [/INST]`:u._getType()==="ai"?d=u.content:u._getType()==="system"?d=`<<SYS>> ${u.content} <</SYS>>`:ChatMessage.isInstance(u)?d=`

${u.role[0].toUpperCase()}${u.role.slice(1)}: ${u.content}`:(console.warn(`Unsupported message type passed to Ollama: "${u._getType()}"`),d=""),d}).join(`
`)}async _call(c,u,d){const h=[];for await(const p of this._streamResponseChunks(c,u,d))h.push(p.message.content);return h.join("")}}function convertToOpenAIFunction(a){return{name:a.name,description:a.description,parameters:zodToJsonSchema(a.schema)}}function convertToOpenAITool(a){return{type:"function",function:convertToOpenAIFunction(a)}}class RunnablePassthrough extends Runnable{static lc_name(){return"RunnablePassthrough"}constructor(s){super(s),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),s&&(this.func=s.func)}async invoke(s,c){const u=ensureConfig(c);return this.func&&await this.func(s,u),this._callWithConfig(d=>Promise.resolve(d),s,u)}async*transform(s,c){const u=ensureConfig(c);let d,h=!0;for await(const p of this._transformStreamWithConfig(s,m=>m,u))if(yield p,h)if(d===void 0)d=p;else try{d=concat(d,p)}catch{d=void 0,h=!1}this.func&&d!==void 0&&await this.func(d,u)}static assign(s){return new RunnableAssign(new RunnableMap({steps:s}))}}class BaseLLMOutputParser extends Runnable{parseResultWithPrompt(s,c,u){return this.parseResult(s,u)}_baseMessageToString(s){return typeof s.content=="string"?s.content:this._baseMessageContentToString(s.content)}_baseMessageContentToString(s){return JSON.stringify(s)}async invoke(s,c){return typeof s=="string"?this._callWithConfig(async u=>this.parseResult([{text:u}]),s,{...c,runType:"parser"}):this._callWithConfig(async u=>this.parseResult([{message:u,text:this._baseMessageToString(u)}]),s,{...c,runType:"parser"})}}class BaseOutputParser extends BaseLLMOutputParser{parseResult(s,c){return this.parse(s[0].text,c)}async parseWithPrompt(s,c,u){return this.parse(s,u)}_type(){throw new Error("_type not implemented")}}class OutputParserException extends Error{constructor(s,c,u,d=!1){if(super(s),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=c,this.observation=u,this.sendToLLM=d,d&&(u===void 0||c===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true")}}function deepCompareStrict(a,s){const c=typeof a;if(c!==typeof s)return!1;if(Array.isArray(a)){if(!Array.isArray(s))return!1;const u=a.length;if(u!==s.length)return!1;for(let d=0;d<u;d++)if(!deepCompareStrict(a[d],s[d]))return!1;return!0}if(c==="object"){if(!a||!s)return a===s;const u=Object.keys(a),d=Object.keys(s);if(u.length!==d.length)return!1;for(const h of u)if(!deepCompareStrict(a[h],s[h]))return!1;return!0}return a===s}class BaseTransformOutputParser extends BaseOutputParser{async*_transform(s){for await(const c of s)typeof c=="string"?yield this.parseResult([{text:c}]):yield this.parseResult([{message:c,text:this._baseMessageToString(c)}])}async*transform(s,c){yield*this._transformStreamWithConfig(s,this._transform.bind(this),{...c,runType:"parser"})}}class BaseCumulativeTransformOutputParser extends BaseTransformOutputParser{constructor(s){super(s),Object.defineProperty(this,"diff",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.diff=(s==null?void 0:s.diff)??this.diff}async*_transform(s){let c,u;for await(const d of s){if(typeof d!="string"&&typeof d.content!="string")throw new Error("Cannot handle non-string output.");let h;if(isBaseMessageChunk(d)){if(typeof d.content!="string")throw new Error("Cannot handle non-string message output.");h=new ChatGenerationChunk({message:d,text:d.content})}else if(isBaseMessage(d)){if(typeof d.content!="string")throw new Error("Cannot handle non-string message output.");h=new ChatGenerationChunk({message:d.toChunk(),text:d.content})}else h=new GenerationChunk({text:d});u===void 0?u=h:u=u.concat(h);const p=await this.parsePartialResult([u]);p!=null&&!deepCompareStrict(p,c)&&(this.diff?yield this._diff(c,p):yield p,c=p)}}}class StructuredOutputParser extends BaseOutputParser{static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}constructor(s){super(s),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","structured"]})}static fromZodSchema(s){return new this(s)}static fromNamesAndDescriptions(s){const c=z.object(Object.fromEntries(Object.entries(s).map(([u,d])=>[u,z.string().describe(d)])));return new this(c)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(zodToJsonSchema(this.schema))}
\`\`\`
`}async parse(s){try{const c=s.includes("```")?s.trim().split(/```(?:json)?/)[1]:s.trim();return await this.schema.parseAsync(JSON.parse(c))}catch(c){throw new OutputParserException(`Failed to parse. Text: "${s}". Error: ${c}`,s)}}}class JsonOutputParser extends BaseCumulativeTransformOutputParser{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"JsonOutputParser"}_diff(s,c){if(c)return s?compare(s,c):[{op:"replace",path:"",value:c}]}async parsePartialResult(s){return parseJsonMarkdown(s[0].text)}async parse(s){return parseJsonMarkdown(s,JSON.parse)}getFormatInstructions(){return""}}function parseJsonMarkdown(a,s=parsePartialJson){a=a.trim();const c=/```(json)?(.*)```/s.exec(a);return s(c?c[2]:a)}function parsePartialJson(a){if(typeof a>"u")return null;try{return JSON.parse(a)}catch{}let s="";const c=[];let u=!1,d=!1;for(let h of a){if(u)h==='"'&&!d?u=!1:h===`
`&&!d?h="\\n":h==="\\"?d=!d:d=!1;else if(h==='"')u=!0,d=!1;else if(h==="{")c.push("}");else if(h==="[")c.push("]");else if(h==="}"||h==="]")if(c&&c[c.length-1]===h)c.pop();else return null;s+=h}u&&(s+='"');for(let h=c.length-1;h>=0;h-=1)s+=c[h];try{return JSON.parse(s)}catch{return null}}class JsonOutputToolsParser extends BaseLLMOutputParser{static lc_name(){return"JsonOutputToolsParser"}constructor(s){super(s),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.returnId=(s==null?void 0:s.returnId)??this.returnId}async parseResult(s){const c=s[0].message.additional_kwargs.tool_calls;if(!c)throw new Error(`No tools_call in message ${JSON.stringify(s)}`);const u=JSON.parse(JSON.stringify(c)),d=[];for(const h of u)if(h.function!==void 0){const p={type:h.function.name,args:JSON.parse(h.function.arguments)};this.returnId&&(p.id=h.id),Object.defineProperty(p,"name",{get(){return this.type}}),Object.defineProperty(p,"arguments",{get(){return this.args}}),d.push(p)}return d}}class JsonOutputKeyToolsParser extends BaseLLMOutputParser{static lc_name(){return"JsonOutputKeyToolsParser"}constructor(s){super(s),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"initialParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=s.keyName,this.returnSingle=s.returnSingle??this.returnSingle,this.initialParser=new JsonOutputToolsParser(s),this.zodSchema=s.zodSchema}async _validateResult(s){if(this.zodSchema===void 0)return s;const c=await this.zodSchema.safeParseAsync(s);if(c.success)return c.data;throw new OutputParserException(`Failed to parse. Text: "${JSON.stringify(s,null,2)}". Error: ${JSON.stringify(c.error.errors)}`,JSON.stringify(s,null,2))}async parseResult(s){const c=(await this.initialParser.parseResult(s)).filter(d=>d.type===this.keyName);let u=c;return this.returnId||(u=c.map(d=>d.args)),this.returnSingle?this._validateResult(u[0]):await Promise.all(u.map(d=>this._validateResult(d)))}}function getEndpoint(a){const{azureOpenAIApiDeploymentName:s,azureOpenAIApiInstanceName:c,azureOpenAIApiKey:u,azureOpenAIBasePath:d,baseURL:h}=a;if(u&&d&&s)return`${d}/${s}`;if(u){if(!c)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!s)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${c}.openai.azure.com/openai/deployments/${s}`}return h}const default_format="RFC3986",formatters={RFC1738:a=>String(a).replace(/%20/g,"+"),RFC3986:a=>String(a)},RFC1738="RFC1738",is_array$1=Array.isArray,hex_table=(()=>{const a=[];for(let s=0;s<256;++s)a.push("%"+((s<16?"0":"")+s.toString(16)).toUpperCase());return a})(),limit=1024,encode=(a,s,c,u,d)=>{if(a.length===0)return a;let h=a;if(typeof a=="symbol"?h=Symbol.prototype.toString.call(a):typeof a!="string"&&(h=String(a)),c==="iso-8859-1")return escape(h).replace(/%u[0-9a-f]{4}/gi,function(m){return"%26%23"+parseInt(m.slice(2),16)+"%3B"});let p="";for(let m=0;m<h.length;m+=limit){const f=h.length>=limit?h.slice(m,m+limit):h,_=[];for(let y=0;y<f.length;++y){let E=f.charCodeAt(y);if(E===45||E===46||E===95||E===126||E>=48&&E<=57||E>=65&&E<=90||E>=97&&E<=122||d===RFC1738&&(E===40||E===41)){_[_.length]=f.charAt(y);continue}if(E<128){_[_.length]=hex_table[E];continue}if(E<2048){_[_.length]=hex_table[192|E>>6]+hex_table[128|E&63];continue}if(E<55296||E>=57344){_[_.length]=hex_table[224|E>>12]+hex_table[128|E>>6&63]+hex_table[128|E&63];continue}y+=1,E=65536+((E&1023)<<10|f.charCodeAt(y)&1023),_[_.length]=hex_table[240|E>>18]+hex_table[128|E>>12&63]+hex_table[128|E>>6&63]+hex_table[128|E&63]}p+=_.join("")}return p};function is_buffer(a){return!a||typeof a!="object"?!1:!!(a.constructor&&a.constructor.isBuffer&&a.constructor.isBuffer(a))}function maybe_map(a,s){if(is_array$1(a)){const c=[];for(let u=0;u<a.length;u+=1)c.push(s(a[u]));return c}return s(a)}const has=Object.prototype.hasOwnProperty,array_prefix_generators={brackets(a){return String(a)+"[]"},comma:"comma",indices(a,s){return String(a)+"["+s+"]"},repeat(a){return String(a)}},is_array=Array.isArray,push=Array.prototype.push,push_to_array=function(a,s){push.apply(a,is_array(s)?s:[s])},to_ISO=Date.prototype.toISOString,defaults={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:encode,encodeValuesOnly:!1,format:default_format,formatter:formatters[default_format],indices:!1,serializeDate(a){return to_ISO.call(a)},skipNulls:!1,strictNullHandling:!1};function is_non_nullish_primitive(a){return typeof a=="string"||typeof a=="number"||typeof a=="boolean"||typeof a=="symbol"||typeof a=="bigint"}const sentinel={};function inner_stringify(a,s,c,u,d,h,p,m,f,_,y,E,b,T,A,v,S,O){let I=a,x=O,P=0,w=!1;for(;(x=x.get(sentinel))!==void 0&&!w;){const F=x.get(a);if(P+=1,typeof F<"u"){if(F===P)throw new RangeError("Cyclic object value");w=!0}typeof x.get(sentinel)>"u"&&(P=0)}if(typeof _=="function"?I=_(s,I):I instanceof Date?I=b==null?void 0:b(I):c==="comma"&&is_array(I)&&(I=maybe_map(I,function(F){return F instanceof Date?b==null?void 0:b(F):F})),I===null){if(h)return f&&!v?f(s,defaults.encoder,S,"key",T):s;I=""}if(is_non_nullish_primitive(I)||is_buffer(I)){if(f){const F=v?s:f(s,defaults.encoder,S,"key",T);return[(A==null?void 0:A(F))+"="+(A==null?void 0:A(f(I,defaults.encoder,S,"value",T)))]}return[(A==null?void 0:A(s))+"="+(A==null?void 0:A(String(I)))]}const C=[];if(typeof I>"u")return C;let k;if(c==="comma"&&is_array(I))v&&f&&(I=maybe_map(I,f)),k=[{value:I.length>0?I.join(",")||null:void 0}];else if(is_array(_))k=_;else{const F=Object.keys(I);k=y?F.sort(y):F}const R=m?String(s).replace(/\./g,"%2E"):String(s),N=u&&is_array(I)&&I.length===1?R+"[]":R;if(d&&is_array(I)&&I.length===0)return N+"[]";for(let F=0;F<k.length;++F){const L=k[F],X=typeof L=="object"&&typeof L.value<"u"?L.value:I[L];if(p&&X===null)continue;const V=E&&m?L.replace(/\./g,"%2E"):L,H=is_array(I)?typeof c=="function"?c(N,V):N:N+(E?"."+V:"["+V+"]");O.set(a,P);const ee=new WeakMap;ee.set(sentinel,O),push_to_array(C,inner_stringify(X,H,c,u,d,h,p,m,c==="comma"&&v&&is_array(I)?null:f,_,y,E,b,T,A,v,S,ee))}return C}function normalize_stringify_options(a=defaults){if(typeof a.allowEmptyArrays<"u"&&typeof a.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof a.encodeDotInKeys<"u"&&typeof a.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(a.encoder!==null&&typeof a.encoder<"u"&&typeof a.encoder!="function")throw new TypeError("Encoder has to be a function.");const s=a.charset||defaults.charset;if(typeof a.charset<"u"&&a.charset!=="utf-8"&&a.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let c=default_format;if(typeof a.format<"u"){if(!has.call(formatters,a.format))throw new TypeError("Unknown format option provided.");c=a.format}const u=formatters[c];let d=defaults.filter;(typeof a.filter=="function"||is_array(a.filter))&&(d=a.filter);let h;if(a.arrayFormat&&a.arrayFormat in array_prefix_generators?h=a.arrayFormat:"indices"in a?h=a.indices?"indices":"repeat":h=defaults.arrayFormat,"commaRoundTrip"in a&&typeof a.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const p=typeof a.allowDots>"u"?a.encodeDotInKeys?!0:defaults.allowDots:!!a.allowDots;return{addQueryPrefix:typeof a.addQueryPrefix=="boolean"?a.addQueryPrefix:defaults.addQueryPrefix,allowDots:p,allowEmptyArrays:typeof a.allowEmptyArrays=="boolean"?!!a.allowEmptyArrays:defaults.allowEmptyArrays,arrayFormat:h,charset:s,charsetSentinel:typeof a.charsetSentinel=="boolean"?a.charsetSentinel:defaults.charsetSentinel,commaRoundTrip:!!a.commaRoundTrip,delimiter:typeof a.delimiter>"u"?defaults.delimiter:a.delimiter,encode:typeof a.encode=="boolean"?a.encode:defaults.encode,encodeDotInKeys:typeof a.encodeDotInKeys=="boolean"?a.encodeDotInKeys:defaults.encodeDotInKeys,encoder:typeof a.encoder=="function"?a.encoder:defaults.encoder,encodeValuesOnly:typeof a.encodeValuesOnly=="boolean"?a.encodeValuesOnly:defaults.encodeValuesOnly,filter:d,format:c,formatter:u,serializeDate:typeof a.serializeDate=="function"?a.serializeDate:defaults.serializeDate,skipNulls:typeof a.skipNulls=="boolean"?a.skipNulls:defaults.skipNulls,sort:typeof a.sort=="function"?a.sort:null,strictNullHandling:typeof a.strictNullHandling=="boolean"?a.strictNullHandling:defaults.strictNullHandling}}function stringify(a,s={}){let c=a;const u=normalize_stringify_options(s);let d,h;typeof u.filter=="function"?(h=u.filter,c=h("",c)):is_array(u.filter)&&(h=u.filter,d=h);const p=[];if(typeof c!="object"||c===null)return"";const m=array_prefix_generators[u.arrayFormat],f=m==="comma"&&u.commaRoundTrip;d||(d=Object.keys(c)),u.sort&&d.sort(u.sort);const _=new WeakMap;for(let b=0;b<d.length;++b){const T=d[b];u.skipNulls&&c[T]===null||push_to_array(p,inner_stringify(c[T],T,m,f,u.allowEmptyArrays,u.strictNullHandling,u.skipNulls,u.encodeDotInKeys,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.format,u.formatter,u.encodeValuesOnly,u.charset,_))}const y=p.join(u.delimiter);let E=u.addQueryPrefix===!0?"?":"";return u.charsetSentinel&&(u.charset==="iso-8859-1"?E+="utf8=%26%2310003%3B&":E+="utf8=%E2%9C%93&"),y.length>0?E+y:""}const VERSION="4.95.1";let auto=!1,kind,fetch$1,FormData$1,File$1,ReadableStream$1,getMultipartRequestOptions,getDefaultAgent,fileFromPath,isFsReadStream;function setShims(a,s={auto:!1}){if(auto)throw new Error(`you must \`import 'openai/shims/${a.kind}'\` before importing anything else from openai`);if(kind)throw new Error(`can't \`import 'openai/shims/${a.kind}'\` after \`import 'openai/shims/${kind}'\``);auto=s.auto,kind=a.kind,fetch$1=a.fetch,a.Request,a.Response,a.Headers,FormData$1=a.FormData,a.Blob,File$1=a.File,ReadableStream$1=a.ReadableStream,getMultipartRequestOptions=a.getMultipartRequestOptions,getDefaultAgent=a.getDefaultAgent,fileFromPath=a.fileFromPath,isFsReadStream=a.isFsReadStream}class MultipartBody{constructor(s){this.body=s}get[Symbol.toStringTag](){return"MultipartBody"}}function getRuntime({manuallyImported:a}={}){const s=a?"You may need to use polyfills":"Add one of these imports before your first `import \u2026 from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let c,u,d,h;try{c=fetch,u=Request,d=Response,h=Headers}catch(p){throw new Error(`this environment is missing the following Web Fetch API type: ${p.message}. ${s}`)}return{kind:"web",fetch:c,Request:u,Response:d,Headers:h,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${s}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${s}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${s}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${s}`)}},getMultipartRequestOptions:async(p,m)=>({...m,body:new MultipartBody(p)}),getDefaultAgent:p=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:p=>!1}}const init=()=>{kind||setShims(getRuntime(),{auto:!0})};init();class OpenAIError extends Error{}class APIError extends OpenAIError{constructor(s,c,u,d){super(`${APIError.makeMessage(s,c,u)}`),this.status=s,this.headers=d,this.request_id=d==null?void 0:d["x-request-id"],this.error=c;const h=c;this.code=h==null?void 0:h.code,this.param=h==null?void 0:h.param,this.type=h==null?void 0:h.type}static makeMessage(s,c,u){const d=c!=null&&c.message?typeof c.message=="string"?c.message:JSON.stringify(c.message):c?JSON.stringify(c):u;return s&&d?`${s} ${d}`:s?`${s} status code (no body)`:d||"(no status code or body)"}static generate(s,c,u,d){if(!s||!d)return new APIConnectionError({message:u,cause:castToError(c)});const h=c==null?void 0:c.error;return s===400?new BadRequestError(s,h,u,d):s===401?new AuthenticationError(s,h,u,d):s===403?new PermissionDeniedError(s,h,u,d):s===404?new NotFoundError(s,h,u,d):s===409?new ConflictError(s,h,u,d):s===422?new UnprocessableEntityError(s,h,u,d):s===429?new RateLimitError(s,h,u,d):s>=500?new InternalServerError(s,h,u,d):new APIError(s,h,u,d)}}class APIUserAbortError extends APIError{constructor({message:s}={}){super(void 0,void 0,s||"Request was aborted.",void 0)}}class APIConnectionError extends APIError{constructor({message:s,cause:c}){super(void 0,void 0,s||"Connection error.",void 0),c&&(this.cause=c)}}class APIConnectionTimeoutError extends APIConnectionError{constructor({message:s}={}){super({message:s??"Request timed out."})}}class BadRequestError extends APIError{}class AuthenticationError extends APIError{}class PermissionDeniedError extends APIError{}class NotFoundError extends APIError{}class ConflictError extends APIError{}class UnprocessableEntityError extends APIError{}class RateLimitError extends APIError{}class InternalServerError extends APIError{}class LengthFinishReasonError extends OpenAIError{constructor(){super("Could not parse response content as the length limit was reached")}}class ContentFilterFinishReasonError extends OpenAIError{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var __classPrivateFieldSet$5=function(a,s,c,u,d){if(u==="m")throw new TypeError("Private method is not writable");if(u==="a"&&!d)throw new TypeError("Private accessor was defined without a setter");if(typeof s=="function"?a!==s||!d:!s.has(a))throw new TypeError("Cannot write private member to an object whose class did not declare it");return u==="a"?d.call(a,c):d?d.value=c:s.set(a,c),c},__classPrivateFieldGet$6=function(a,s,c,u){if(c==="a"&&!u)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?a!==s||!u:!s.has(a))throw new TypeError("Cannot read private member from an object whose class did not declare it");return c==="m"?u:c==="a"?u.call(a):u?u.value:s.get(a)},_LineDecoder_carriageReturnIndex;class LineDecoder{constructor(){_LineDecoder_carriageReturnIndex.set(this,void 0),this.buffer=new Uint8Array,__classPrivateFieldSet$5(this,_LineDecoder_carriageReturnIndex,null,"f")}decode(s){if(s==null)return[];const c=s instanceof ArrayBuffer?new Uint8Array(s):typeof s=="string"?new TextEncoder().encode(s):s;let u=new Uint8Array(this.buffer.length+c.length);u.set(this.buffer),u.set(c,this.buffer.length),this.buffer=u;const d=[];let h;for(;(h=findNewlineIndex(this.buffer,__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")))!=null;){if(h.carriage&&__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")==null){__classPrivateFieldSet$5(this,_LineDecoder_carriageReturnIndex,h.index,"f");continue}if(__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")!=null&&(h.index!==__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")+1||h.carriage)){d.push(this.decodeText(this.buffer.slice(0,__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")-1))),this.buffer=this.buffer.slice(__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")),__classPrivateFieldSet$5(this,_LineDecoder_carriageReturnIndex,null,"f");continue}const p=__classPrivateFieldGet$6(this,_LineDecoder_carriageReturnIndex,"f")!==null?h.preceding-1:h.preceding,m=this.decodeText(this.buffer.slice(0,p));d.push(m),this.buffer=this.buffer.slice(h.index),__classPrivateFieldSet$5(this,_LineDecoder_carriageReturnIndex,null,"f")}return d}decodeText(s){if(s==null)return"";if(typeof s=="string")return s;if(typeof Buffer<"u"){if(s instanceof Buffer)return s.toString();if(s instanceof Uint8Array)return Buffer.from(s).toString();throw new OpenAIError(`Unexpected: received non-Uint8Array (${s.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(s instanceof Uint8Array||s instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(s);throw new OpenAIError(`Unexpected: received non-Uint8Array/ArrayBuffer (${s.constructor.name}) in a web platform. Please report this error.`)}throw new OpenAIError("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}_LineDecoder_carriageReturnIndex=new WeakMap,LineDecoder.NEWLINE_CHARS=new Set([`
`,"\r"]),LineDecoder.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function findNewlineIndex(a,s){for(let c=s??0;c<a.length;c++){if(a[c]===10)return{preceding:c,index:c+1,carriage:!1};if(a[c]===13)return{preceding:c,index:c+1,carriage:!0}}return null}function findDoubleNewlineIndex(a){for(let s=0;s<a.length-1;s++){if(a[s]===10&&a[s+1]===10||a[s]===13&&a[s+1]===13)return s+2;if(a[s]===13&&a[s+1]===10&&s+3<a.length&&a[s+2]===13&&a[s+3]===10)return s+4}return-1}function ReadableStreamToAsyncIterable(a){if(a[Symbol.asyncIterator])return a;const s=a.getReader();return{async next(){try{const c=await s.read();return c!=null&&c.done&&s.releaseLock(),c}catch(c){throw s.releaseLock(),c}},async return(){const c=s.cancel();return s.releaseLock(),await c,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class Stream{constructor(s,c){this.iterator=s,this.controller=c}static fromSSEResponse(s,c){let u=!1;async function*d(){if(u)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");u=!0;let h=!1;try{for await(const p of _iterSSEMessages(s,c))if(!h){if(p.data.startsWith("[DONE]")){h=!0;continue}if(p.event===null||p.event.startsWith("response.")||p.event.startsWith("transcript.")){let m;try{m=JSON.parse(p.data)}catch(f){throw console.error("Could not parse message into JSON:",p.data),console.error("From chunk:",p.raw),f}if(m&&m.error)throw new APIError(void 0,m.error,void 0,createResponseHeaders(s.headers));yield m}else{let m;try{m=JSON.parse(p.data)}catch(f){throw console.error("Could not parse message into JSON:",p.data),console.error("From chunk:",p.raw),f}if(p.event=="error")throw new APIError(void 0,m.error,m.message,void 0);yield{event:p.event,data:m}}}h=!0}catch(p){if(p instanceof Error&&p.name==="AbortError")return;throw p}finally{h||c.abort()}}return new Stream(d,c)}static fromReadableStream(s,c){let u=!1;async function*d(){const p=new LineDecoder,m=ReadableStreamToAsyncIterable(s);for await(const f of m)for(const _ of p.decode(f))yield _;for(const f of p.flush())yield f}async function*h(){if(u)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");u=!0;let p=!1;try{for await(const m of d())p||m&&(yield JSON.parse(m));p=!0}catch(m){if(m instanceof Error&&m.name==="AbortError")return;throw m}finally{p||c.abort()}}return new Stream(h,c)}[Symbol.asyncIterator](){return this.iterator()}tee(){const s=[],c=[],u=this.iterator(),d=h=>({next:()=>{if(h.length===0){const p=u.next();s.push(p),c.push(p)}return h.shift()}});return[new Stream(()=>d(s),this.controller),new Stream(()=>d(c),this.controller)]}toReadableStream(){const s=this;let c;const u=new TextEncoder;return new ReadableStream$1({async start(){c=s[Symbol.asyncIterator]()},async pull(d){try{const{value:h,done:p}=await c.next();if(p)return d.close();const m=u.encode(JSON.stringify(h)+`
`);d.enqueue(m)}catch(h){d.error(h)}},async cancel(){var d;await((d=c.return)==null?void 0:d.call(c))}})}}async function*_iterSSEMessages(a,s){if(!a.body)throw s.abort(),new OpenAIError("Attempted to iterate over a response with no body");const c=new SSEDecoder,u=new LineDecoder,d=ReadableStreamToAsyncIterable(a.body);for await(const h of iterSSEChunks(d))for(const p of u.decode(h)){const m=c.decode(p);m&&(yield m)}for(const h of u.flush()){const p=c.decode(h);p&&(yield p)}}async function*iterSSEChunks(a){let s=new Uint8Array;for await(const c of a){if(c==null)continue;const u=c instanceof ArrayBuffer?new Uint8Array(c):typeof c=="string"?new TextEncoder().encode(c):c;let d=new Uint8Array(s.length+u.length);d.set(s),d.set(u,s.length),s=d;let h;for(;(h=findDoubleNewlineIndex(s))!==-1;)yield s.slice(0,h),s=s.slice(h)}s.length>0&&(yield s)}class SSEDecoder{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(s){if(s.endsWith("\r")&&(s=s.substring(0,s.length-1)),!s){if(!this.event&&!this.data.length)return null;const h={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],h}if(this.chunks.push(s),s.startsWith(":"))return null;let[c,u,d]=partition(s,":");return d.startsWith(" ")&&(d=d.substring(1)),c==="event"?this.event=d:c==="data"&&this.data.push(d),null}}function partition(a,s){const c=a.indexOf(s);return c!==-1?[a.substring(0,c),s,a.substring(c+s.length)]:[a,"",""]}const isResponseLike=a=>a!=null&&typeof a=="object"&&typeof a.url=="string"&&typeof a.blob=="function",isFileLike=a=>a!=null&&typeof a=="object"&&typeof a.name=="string"&&typeof a.lastModified=="number"&&isBlobLike(a),isBlobLike=a=>a!=null&&typeof a=="object"&&typeof a.size=="number"&&typeof a.type=="string"&&typeof a.text=="function"&&typeof a.slice=="function"&&typeof a.arrayBuffer=="function",isUploadable=a=>isFileLike(a)||isResponseLike(a)||isFsReadStream(a);async function toFile(a,s,c){var d;if(a=await a,isFileLike(a))return a;if(isResponseLike(a)){const h=await a.blob();s||(s=new URL(a.url).pathname.split(/[\\/]/).pop()??"unknown_file");const p=isBlobLike(h)?[await h.arrayBuffer()]:[h];return new File$1(p,s,c)}const u=await getBytes(a);if(s||(s=getName(a)??"unknown_file"),!(c!=null&&c.type)){const h=(d=u[0])==null?void 0:d.type;typeof h=="string"&&(c={...c,type:h})}return new File$1(u,s,c)}async function getBytes(a){var c;let s=[];if(typeof a=="string"||ArrayBuffer.isView(a)||a instanceof ArrayBuffer)s.push(a);else if(isBlobLike(a))s.push(await a.arrayBuffer());else if(isAsyncIterableIterator(a))for await(const u of a)s.push(u);else throw new Error(`Unexpected data type: ${typeof a}; constructor: ${(c=a==null?void 0:a.constructor)==null?void 0:c.name}; props: ${propsForError(a)}`);return s}function propsForError(a){return`[${Object.getOwnPropertyNames(a).map(s=>`"${s}"`).join(", ")}]`}function getName(a){var s;return getStringFromMaybeBuffer(a.name)||getStringFromMaybeBuffer(a.filename)||((s=getStringFromMaybeBuffer(a.path))==null?void 0:s.split(/[\\/]/).pop())}const getStringFromMaybeBuffer=a=>{if(typeof a=="string")return a;if(typeof Buffer<"u"&&a instanceof Buffer)return String(a)},isAsyncIterableIterator=a=>a!=null&&typeof a=="object"&&typeof a[Symbol.asyncIterator]=="function",isMultipartBody=a=>a&&typeof a=="object"&&a.body&&a[Symbol.toStringTag]==="MultipartBody",multipartFormRequestOptions=async a=>{const s=await createForm(a.body);return getMultipartRequestOptions(s,a)},createForm=async a=>{const s=new FormData$1;return await Promise.all(Object.entries(a||{}).map(([c,u])=>addFormValue(s,c,u))),s},addFormValue=async(a,s,c)=>{if(c!==void 0){if(c==null)throw new TypeError(`Received null for "${s}"; to pass null in FormData, you must use the string 'null'`);if(typeof c=="string"||typeof c=="number"||typeof c=="boolean")a.append(s,String(c));else if(isUploadable(c)){const u=await toFile(c);a.append(s,u)}else if(Array.isArray(c))await Promise.all(c.map(u=>addFormValue(a,s+"[]",u)));else if(typeof c=="object")await Promise.all(Object.entries(c).map(([u,d])=>addFormValue(a,`${s}[${u}]`,d)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${c} instead`)}};var define_process_env_default={},__classPrivateFieldSet$4=function(a,s,c,u,d){if(u==="m")throw new TypeError("Private method is not writable");if(u==="a"&&!d)throw new TypeError("Private accessor was defined without a setter");if(typeof s=="function"?a!==s||!d:!s.has(a))throw new TypeError("Cannot write private member to an object whose class did not declare it");return u==="a"?d.call(a,c):d?d.value=c:s.set(a,c),c},__classPrivateFieldGet$5=function(a,s,c,u){if(c==="a"&&!u)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?a!==s||!u:!s.has(a))throw new TypeError("Cannot read private member from an object whose class did not declare it");return c==="m"?u:c==="a"?u.call(a):u?u.value:s.get(a)},_AbstractPage_client;init();async function defaultParseResponse(a){var d,h;const{response:s}=a;if(a.options.stream)return debug("response",s.status,s.url,s.headers,s.body),a.options.__streamClass?a.options.__streamClass.fromSSEResponse(s,a.controller):Stream.fromSSEResponse(s,a.controller);if(s.status===204)return null;if(a.options.__binaryResponse)return s;const c=(h=(d=s.headers.get("content-type"))==null?void 0:d.split(";")[0])==null?void 0:h.trim();if(c!=null&&c.includes("application/json")||c!=null&&c.endsWith("+json")){const p=await s.json();return debug("response",s.status,s.url,s.headers,p),_addRequestID(p,s)}const u=await s.text();return debug("response",s.status,s.url,s.headers,u),u}function _addRequestID(a,s){return!a||typeof a!="object"||Array.isArray(a)?a:Object.defineProperty(a,"_request_id",{value:s.headers.get("x-request-id"),enumerable:!1})}class APIPromise extends Promise{constructor(s,c=defaultParseResponse){super(u=>{u(null)}),this.responsePromise=s,this.parseResponse=c}_thenUnwrap(s){return new APIPromise(this.responsePromise,async c=>_addRequestID(s(await this.parseResponse(c),c),c.response))}asResponse(){return this.responsePromise.then(s=>s.response)}async withResponse(){const[s,c]=await Promise.all([this.parse(),this.asResponse()]);return{data:s,response:c,request_id:c.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(s,c){return this.parse().then(s,c)}catch(s){return this.parse().catch(s)}finally(s){return this.parse().finally(s)}}class APIClient{constructor({baseURL:s,maxRetries:c=2,timeout:u=6e5,httpAgent:d,fetch:h}){this.baseURL=s,this.maxRetries=validatePositiveInteger("maxRetries",c),this.timeout=validatePositiveInteger("timeout",u),this.httpAgent=d,this.fetch=h??fetch$1}authHeaders(s){return{}}defaultHeaders(s){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...getPlatformHeaders(),...this.authHeaders(s)}}validateHeaders(s,c){}defaultIdempotencyKey(){return`stainless-node-retry-${uuid4()}`}get(s,c){return this.methodRequest("get",s,c)}post(s,c){return this.methodRequest("post",s,c)}patch(s,c){return this.methodRequest("patch",s,c)}put(s,c){return this.methodRequest("put",s,c)}delete(s,c){return this.methodRequest("delete",s,c)}methodRequest(s,c,u){return this.request(Promise.resolve(u).then(async d=>{const h=d&&isBlobLike(d==null?void 0:d.body)?new DataView(await d.body.arrayBuffer()):(d==null?void 0:d.body)instanceof DataView?d.body:(d==null?void 0:d.body)instanceof ArrayBuffer?new DataView(d.body):d&&ArrayBuffer.isView(d==null?void 0:d.body)?new DataView(d.body.buffer):d==null?void 0:d.body;return{method:s,path:c,...d,body:h}}))}getAPIList(s,c,u){return this.requestAPIList(c,{method:"get",path:s,...u})}calculateContentLength(s){if(typeof s=="string"){if(typeof Buffer<"u")return Buffer.byteLength(s,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(s).length.toString()}else if(ArrayBuffer.isView(s))return s.byteLength.toString();return null}buildRequest(s,{retryCount:c=0}={}){var A;const u={...s},{method:d,path:h,query:p,headers:m={}}=u,f=ArrayBuffer.isView(u.body)||u.__binaryRequest&&typeof u.body=="string"?u.body:isMultipartBody(u.body)?u.body.body:u.body?JSON.stringify(u.body,null,2):null,_=this.calculateContentLength(f),y=this.buildURL(h,p);"timeout"in u&&validatePositiveInteger("timeout",u.timeout),u.timeout=u.timeout??this.timeout;const E=u.httpAgent??this.httpAgent??getDefaultAgent(y),b=u.timeout+1e3;typeof((A=E==null?void 0:E.options)==null?void 0:A.timeout)=="number"&&b>(E.options.timeout??0)&&(E.options.timeout=b),this.idempotencyHeader&&d!=="get"&&(s.idempotencyKey||(s.idempotencyKey=this.defaultIdempotencyKey()),m[this.idempotencyHeader]=s.idempotencyKey);const T=this.buildHeaders({options:u,headers:m,contentLength:_,retryCount:c});return{req:{method:d,...f&&{body:f},headers:T,...E&&{agent:E},signal:u.signal??null},url:y,timeout:u.timeout}}buildHeaders({options:s,headers:c,contentLength:u,retryCount:d}){const h={};u&&(h["content-length"]=u);const p=this.defaultHeaders(s);return applyHeadersMut(h,p),applyHeadersMut(h,c),isMultipartBody(s.body)&&kind!=="node"&&delete h["content-type"],getHeader(p,"x-stainless-retry-count")===void 0&&getHeader(c,"x-stainless-retry-count")===void 0&&(h["x-stainless-retry-count"]=String(d)),getHeader(p,"x-stainless-timeout")===void 0&&getHeader(c,"x-stainless-timeout")===void 0&&s.timeout&&(h["x-stainless-timeout"]=String(Math.trunc(s.timeout/1e3))),this.validateHeaders(h,c),h}async prepareOptions(s){}async prepareRequest(s,{url:c,options:u}){}parseHeaders(s){return s?Symbol.iterator in s?Object.fromEntries(Array.from(s).map(c=>[...c])):{...s}:{}}makeStatusError(s,c,u,d){return APIError.generate(s,c,u,d)}request(s,c=null){return new APIPromise(this.makeRequest(s,c))}async makeRequest(s,c){var E,b;const u=await s,d=u.maxRetries??this.maxRetries;c==null&&(c=d),await this.prepareOptions(u);const{req:h,url:p,timeout:m}=this.buildRequest(u,{retryCount:d-c});if(await this.prepareRequest(h,{url:p,options:u}),debug("request",p,u,h.headers),(E=u.signal)==null?void 0:E.aborted)throw new APIUserAbortError;const f=new AbortController,_=await this.fetchWithTimeout(p,h,m,f).catch(castToError);if(_ instanceof Error){if((b=u.signal)!=null&&b.aborted)throw new APIUserAbortError;if(c)return this.retryRequest(u,c);throw _.name==="AbortError"?new APIConnectionTimeoutError:new APIConnectionError({cause:_})}const y=createResponseHeaders(_.headers);if(!_.ok){if(c&&this.shouldRetry(_)){const S=`retrying, ${c} attempts remaining`;return debug(`response (error; ${S})`,_.status,p,y),this.retryRequest(u,c,y)}const T=await _.text().catch(S=>castToError(S).message),A=safeJSON(T),v=A?void 0:T;throw debug(`response (error; ${c?"(error; no more retries left)":"(error; not retryable)"})`,_.status,p,y,v),this.makeStatusError(_.status,A,v,y)}return{response:_,options:u,controller:f}}requestAPIList(s,c){const u=this.makeRequest(c,null);return new PagePromise(this,u,s)}buildURL(s,c){const u=isAbsoluteURL(s)?new URL(s):new URL(this.baseURL+(this.baseURL.endsWith("/")&&s.startsWith("/")?s.slice(1):s)),d=this.defaultQuery();return isEmptyObj(d)||(c={...d,...c}),typeof c=="object"&&c&&!Array.isArray(c)&&(u.search=this.stringifyQuery(c)),u.toString()}stringifyQuery(s){return Object.entries(s).filter(([c,u])=>typeof u<"u").map(([c,u])=>{if(typeof u=="string"||typeof u=="number"||typeof u=="boolean")return`${encodeURIComponent(c)}=${encodeURIComponent(u)}`;if(u===null)return`${encodeURIComponent(c)}=`;throw new OpenAIError(`Cannot stringify type ${typeof u}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(s,c,u,d){const{signal:h,...p}=c||{};h&&h.addEventListener("abort",()=>d.abort());const m=setTimeout(()=>d.abort(),u),f={signal:d.signal,...p};return f.method&&(f.method=f.method.toUpperCase()),this.fetch.call(void 0,s,f).finally(()=>{clearTimeout(m)})}shouldRetry(s){const c=s.headers.get("x-should-retry");return c==="true"?!0:c==="false"?!1:s.status===408||s.status===409||s.status===429||s.status>=500}async retryRequest(s,c,u){let d;const h=u==null?void 0:u["retry-after-ms"];if(h){const m=parseFloat(h);Number.isNaN(m)||(d=m)}const p=u==null?void 0:u["retry-after"];if(p&&!d){const m=parseFloat(p);Number.isNaN(m)?d=Date.parse(p)-Date.now():d=m*1e3}if(!(d&&0<=d&&d<60*1e3)){const m=s.maxRetries??this.maxRetries;d=this.calculateDefaultRetryTimeoutMillis(c,m)}return await sleep(d),this.makeRequest(s,c-1)}calculateDefaultRetryTimeoutMillis(s,c){const u=c-s,d=Math.min(.5*Math.pow(2,u),8),h=1-Math.random()*.25;return d*h*1e3}getUserAgent(){return`${this.constructor.name}/JS ${VERSION}`}}class AbstractPage{constructor(s,c,u,d){_AbstractPage_client.set(this,void 0),__classPrivateFieldSet$4(this,_AbstractPage_client,s,"f"),this.options=d,this.response=c,this.body=u}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const s=this.nextPageInfo();if(!s)throw new OpenAIError("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const c={...this.options};if("params"in s&&typeof c.query=="object")c.query={...c.query,...s.params};else if("url"in s){const u=[...Object.entries(c.query||{}),...s.url.searchParams.entries()];for(const[d,h]of u)s.url.searchParams.set(d,h);c.query=void 0,c.path=s.url.toString()}return await __classPrivateFieldGet$5(this,_AbstractPage_client,"f").requestAPIList(this.constructor,c)}async*iterPages(){let s=this;for(yield s;s.hasNextPage();)s=await s.getNextPage(),yield s}async*[(_AbstractPage_client=new WeakMap,Symbol.asyncIterator)](){for await(const s of this.iterPages())for(const c of s.getPaginatedItems())yield c}}class PagePromise extends APIPromise{constructor(s,c,u){super(c,async d=>new u(s,d.response,await defaultParseResponse(d),d.options))}async*[Symbol.asyncIterator](){const s=await this;for await(const c of s)yield c}}const createResponseHeaders=a=>new Proxy(Object.fromEntries(a.entries()),{get(s,c){const u=c.toString();return s[u.toLowerCase()]||s[u]}}),requestOptionsKeys={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},isRequestOptions=a=>typeof a=="object"&&a!==null&&!isEmptyObj(a)&&Object.keys(a).every(s=>hasOwn(requestOptionsKeys,s)),getPlatformProperties=()=>{var s;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":normalizePlatform(Deno.build.os),"X-Stainless-Arch":normalizeArch(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((s=Deno.version)==null?void 0:s.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":normalizePlatform(process.platform),"X-Stainless-Arch":normalizeArch(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const a=getBrowserInfo();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function getBrowserInfo(){if(typeof navigator>"u"||!navigator)return null;const a=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:s,pattern:c}of a){const u=c.exec(navigator.userAgent);if(u){const d=u[1]||0,h=u[2]||0,p=u[3]||0;return{browser:s,version:`${d}.${h}.${p}`}}}return null}const normalizeArch=a=>a==="x32"?"x32":a==="x86_64"||a==="x64"?"x64":a==="arm"?"arm":a==="aarch64"||a==="arm64"?"arm64":a?`other:${a}`:"unknown",normalizePlatform=a=>(a=a.toLowerCase(),a.includes("ios")?"iOS":a==="android"?"Android":a==="darwin"?"MacOS":a==="win32"?"Windows":a==="freebsd"?"FreeBSD":a==="openbsd"?"OpenBSD":a==="linux"?"Linux":a?`Other:${a}`:"Unknown");let _platformHeaders;const getPlatformHeaders=()=>_platformHeaders??(_platformHeaders=getPlatformProperties()),safeJSON=a=>{try{return JSON.parse(a)}catch{return}},startsWithSchemeRegexp=/^[a-z][a-z0-9+.-]*:/i,isAbsoluteURL=a=>startsWithSchemeRegexp.test(a),sleep=a=>new Promise(s=>setTimeout(s,a)),validatePositiveInteger=(a,s)=>{if(typeof s!="number"||!Number.isInteger(s))throw new OpenAIError(`${a} must be an integer`);if(s<0)throw new OpenAIError(`${a} must be a positive integer`);return s},castToError=a=>{if(a instanceof Error)return a;if(typeof a=="object"&&a!==null)try{return new Error(JSON.stringify(a))}catch{}return new Error(a)},readEnv=a=>{var s,c,u,d;if(typeof process<"u")return((s=define_process_env_default==null?void 0:define_process_env_default[a])==null?void 0:s.trim())??void 0;if(typeof Deno<"u")return(d=(u=(c=Deno.env)==null?void 0:c.get)==null?void 0:u.call(c,a))==null?void 0:d.trim()};function isEmptyObj(a){if(!a)return!0;for(const s in a)return!1;return!0}function hasOwn(a,s){return Object.prototype.hasOwnProperty.call(a,s)}function applyHeadersMut(a,s){for(const c in s){if(!hasOwn(s,c))continue;const u=c.toLowerCase();if(!u)continue;const d=s[c];d===null?delete a[u]:d!==void 0&&(a[u]=d)}}const SENSITIVE_HEADERS=new Set(["authorization","api-key"]);function debug(a,...s){if(typeof process<"u"&&(define_process_env_default==null?void 0:define_process_env_default.DEBUG)==="true"){const c=s.map(u=>{if(!u)return u;if(u.headers){const h={...u,headers:{...u.headers}};for(const p in u.headers)SENSITIVE_HEADERS.has(p.toLowerCase())&&(h.headers[p]="REDACTED");return h}let d=null;for(const h in u)SENSITIVE_HEADERS.has(h.toLowerCase())&&(d??(d={...u}),d[h]="REDACTED");return d??u});console.log(`OpenAI:DEBUG:${a}`,...c)}}const uuid4=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,a=>{const s=Math.random()*16|0;return(a==="x"?s:s&3|8).toString(16)}),isRunningInBrowser=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",isHeadersProtocol=a=>typeof(a==null?void 0:a.get)=="function",getHeader=(a,s)=>{var u;const c=s.toLowerCase();if(isHeadersProtocol(a)){const d=((u=s[0])==null?void 0:u.toUpperCase())+s.substring(1).replace(/([^\w])(\w)/g,(h,p,m)=>p+m.toUpperCase());for(const h of[s,c,s.toUpperCase(),d]){const p=a.get(h);if(p)return p}}for(const[d,h]of Object.entries(a))if(d.toLowerCase()===c)return Array.isArray(h)?(h.length<=1||console.warn(`Received ${h.length} entries for the ${s} header, using the first entry.`),h[0]):h},toFloat32Array=a=>{if(typeof Buffer<"u"){const s=Buffer.from(a,"base64");return Array.from(new Float32Array(s.buffer,s.byteOffset,s.length/Float32Array.BYTES_PER_ELEMENT))}else{const s=atob(a),c=s.length,u=new Uint8Array(c);for(let d=0;d<c;d++)u[d]=s.charCodeAt(d);return Array.from(new Float32Array(u.buffer))}};function isObj(a){return a!=null&&typeof a=="object"&&!Array.isArray(a)}class Page extends AbstractPage{constructor(s,c,u,d){super(s,c,u,d),this.data=u.data||[],this.object=u.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class CursorPage extends AbstractPage{constructor(s,c,u,d){super(s,c,u,d),this.data=u.data||[],this.has_more=u.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const s=this.nextPageInfo();if(!s)return null;if("params"in s)return s.params;const c=Object.fromEntries(s.url.searchParams);return Object.keys(c).length?c:null}nextPageInfo(){var u;const s=this.getPaginatedItems();if(!s.length)return null;const c=(u=s[s.length-1])==null?void 0:u.id;return c?{params:{after:c}}:null}}class APIResource{constructor(s){this._client=s}}let Messages$1=class extends APIResource{list(a,s={},c){return isRequestOptions(s)?this.list(a,{},s):this._client.getAPIList(`/chat/completions/${a}/messages`,ChatCompletionStoreMessagesPage,{query:s,...c})}},Completions$2=class extends APIResource{constructor(){super(...arguments),this.messages=new Messages$1(this._client)}create(a,s){return this._client.post("/chat/completions",{body:a,...s,stream:a.stream??!1})}retrieve(a,s){return this._client.get(`/chat/completions/${a}`,s)}update(a,s,c){return this._client.post(`/chat/completions/${a}`,{body:s,...c})}list(a={},s){return isRequestOptions(a)?this.list({},a):this._client.getAPIList("/chat/completions",ChatCompletionsPage,{query:a,...s})}del(a,s){return this._client.delete(`/chat/completions/${a}`,s)}};class ChatCompletionsPage extends CursorPage{}class ChatCompletionStoreMessagesPage extends CursorPage{}Completions$2.ChatCompletionsPage=ChatCompletionsPage,Completions$2.Messages=Messages$1;let Chat$1=class extends APIResource{constructor(){super(...arguments),this.completions=new Completions$2(this._client)}};Chat$1.Completions=Completions$2,Chat$1.ChatCompletionsPage=ChatCompletionsPage;class Speech extends APIResource{create(s,c){return this._client.post("/audio/speech",{body:s,...c,headers:{Accept:"application/octet-stream",...c==null?void 0:c.headers},__binaryResponse:!0})}}class Transcriptions extends APIResource{create(s,c){return this._client.post("/audio/transcriptions",multipartFormRequestOptions({body:s,...c,stream:s.stream??!1,__metadata:{model:s.model}}))}}class Translations extends APIResource{create(s,c){return this._client.post("/audio/translations",multipartFormRequestOptions({body:s,...c,__metadata:{model:s.model}}))}}class Audio extends APIResource{constructor(){super(...arguments),this.transcriptions=new Transcriptions(this._client),this.translations=new Translations(this._client),this.speech=new Speech(this._client)}}Audio.Transcriptions=Transcriptions,Audio.Translations=Translations,Audio.Speech=Speech;class Batches extends APIResource{create(s,c){return this._client.post("/batches",{body:s,...c})}retrieve(s,c){return this._client.get(`/batches/${s}`,c)}list(s={},c){return isRequestOptions(s)?this.list({},s):this._client.getAPIList("/batches",BatchesPage,{query:s,...c})}cancel(s,c){return this._client.post(`/batches/${s}/cancel`,c)}}class BatchesPage extends CursorPage{}Batches.BatchesPage=BatchesPage;class Assistants extends APIResource{create(s,c){return this._client.post("/assistants",{body:s,...c,headers:{"OpenAI-Beta":"assistants=v2",...c==null?void 0:c.headers}})}retrieve(s,c){return this._client.get(`/assistants/${s}`,{...c,headers:{"OpenAI-Beta":"assistants=v2",...c==null?void 0:c.headers}})}update(s,c,u){return this._client.post(`/assistants/${s}`,{body:c,...u,headers:{"OpenAI-Beta":"assistants=v2",...u==null?void 0:u.headers}})}list(s={},c){return isRequestOptions(s)?this.list({},s):this._client.getAPIList("/assistants",AssistantsPage,{query:s,...c,headers:{"OpenAI-Beta":"assistants=v2",...c==null?void 0:c.headers}})}del(s,c){return this._client.delete(`/assistants/${s}`,{...c,headers:{"OpenAI-Beta":"assistants=v2",...c==null?void 0:c.headers}})}}class AssistantsPage extends CursorPage{}Assistants.AssistantsPage=AssistantsPage;function isRunnableFunctionWithParse(a){return typeof a.parse=="function"}const isAssistantMessage=a=>(a==null?void 0:a.role)==="assistant",isFunctionMessage=a=>(a==null?void 0:a.role)==="function",isToolMessage=a=>(a==null?void 0:a.role)==="tool";var __classPrivateFieldSet$3=function(a,s,c,u,d){if(u==="m")throw new TypeError("Private method is not writable");if(u==="a"&&!d)throw new TypeError("Private accessor was defined without a setter");if(typeof s=="function"?a!==s||!d:!s.has(a))throw new TypeError("Cannot write private member to an object whose class did not declare it");return u==="a"?d.call(a,c):d?d.value=c:s.set(a,c),c},__classPrivateFieldGet$4=function(a,s,c,u){if(c==="a"&&!u)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?a!==s||!u:!s.has(a))throw new TypeError("Cannot read private member from an object whose class did not declare it");return c==="m"?u:c==="a"?u.call(a):u?u.value:s.get(a)},_EventStream_instances,_EventStream_connectedPromise,_EventStream_resolveConnectedPromise,_EventStream_rejectConnectedPromise,_EventStream_endPromise,_EventStream_resolveEndPromise,_EventStream_rejectEndPromise,_EventStream_listeners,_EventStream_ended,_EventStream_errored,_EventStream_aborted,_EventStream_catchingPromiseCreated,_EventStream_handleError;class EventStream{constructor(){_EventStream_instances.add(this),this.controller=new AbortController,_EventStream_connectedPromise.set(this,void 0),_EventStream_resolveConnectedPromise.set(this,()=>{}),_EventStream_rejectConnectedPromise.set(this,()=>{}),_EventStream_endPromise.set(this,void 0),_EventStream_resolveEndPromise.set(this,()=>{}),_EventStream_rejectEndPromise.set(this,()=>{}),_EventStream_listeners.set(this,{}),_EventStream_ended.set(this,!1),_EventStream_errored.set(this,!1),_EventStream_aborted.set(this,!1),_EventStream_catchingPromiseCreated.set(this,!1),__classPrivateFieldSet$3(this,_EventStream_connectedPromise,new Promise((s,c)=>{__classPrivateFieldSet$3(this,_EventStream_resolveConnectedPromise,s,"f"),__classPrivateFieldSet$3(this,_EventStream_rejectConnectedPromise,c,"f")}),"f"),__classPrivateFieldSet$3(this,_EventStream_endPromise,new Promise((s,c)=>{__classPrivateFieldSet$3(this,_EventStream_resolveEndPromise,s,"f"),__classPrivateFieldSet$3(this,_EventStream_rejectEndPromise,c,"f")}),"f"),__classPrivateFieldGet$4(this,_EventStream_connectedPromise,"f").catch(()=>{}),__classPrivateFieldGet$4(this,_EventStream_endPromise,"f").catch(()=>{})}_run(s){setTimeout(()=>{s().then(()=>{this._emitFinal(),this._emit("end")},__classPrivateFieldGet$4(this,_EventStream_instances,"m",_EventStream_handleError).bind(this))},0)}_connected(){this.ended||(__classPrivateFieldGet$4(this,_EventStream_resolveConnectedPromise,"f").call(this),this._emit("connect"))}get ended(){return __classPrivateFieldGet$4(this,_EventStream_ended,"f")}get errored(){return __classPrivateFieldGet$4(this,_EventStream_errored,"f")}get aborted(){return __classPrivateFieldGet$4(this,_EventStream_aborted,"f")}abort(){this.controller.abort()}on(s,c){return(__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[s]||(__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[s]=[])).push({listener:c}),this}off(s,c){const u=__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[s];if(!u)return this;const d=u.findIndex(h=>h.listener===c);return d>=0&&u.splice(d,1),this}once(s,c){return(__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[s]||(__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[s]=[])).push({listener:c,once:!0}),this}emitted(s){return new Promise((c,u)=>{__classPrivateFieldSet$3(this,_EventStream_catchingPromiseCreated,!0,"f"),s!=="error"&&this.once("error",u),this.once(s,c)})}async done(){__classPrivateFieldSet$3(this,_EventStream_catchingPromiseCreated,!0,"f"),await __classPrivateFieldGet$4(this,_EventStream_endPromise,"f")}_emit(s,...c){if(__classPrivateFieldGet$4(this,_EventStream_ended,"f"))return;s==="end"&&(__classPrivateFieldSet$3(this,_EventStream_ended,!0,"f"),__classPrivateFieldGet$4(this,_EventStream_resolveEndPromise,"f").call(this));const u=__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[s];if(u&&(__classPrivateFieldGet$4(this,_EventStream_listeners,"f")[s]=u.filter(d=>!d.once),u.forEach(({listener:d})=>d(...c))),s==="abort"){const d=c[0];!__classPrivateFieldGet$4(this,_EventStream_catchingPromiseCreated,"f")&&!(u!=null&&u.length)&&Promise.reject(d),__classPrivateFieldGet$4(this,_EventStream_rejectConnectedPromise,"f").call(this,d),__classPrivateFieldGet$4(this,_EventStream_rejectEndPromise,"f").call(this,d),this._emit("end");return}if(s==="error"){const d=c[0];!__classPrivateFieldGet$4(this,_EventStream_catchingPromiseCreated,"f")&&!(u!=null&&u.length)&&Promise.reject(d),__classPrivateFieldGet$4(this,_EventStream_rejectConnectedPromise,"f").call(this,d),__classPrivateFieldGet$4(this,_EventStream_rejectEndPromise,"f").call(this,d),this._emit("end")}}_emitFinal(){}}_EventStream_connectedPromise=new WeakMap,_EventStream_resolveConnectedPromise=new WeakMap,_EventStream_rejectConnectedPromise=new WeakMap,_EventStream_endPromise=new WeakMap,_EventStream_resolveEndPromise=new WeakMap,_EventStream_rejectEndPromise=new WeakMap,_EventStream_listeners=new WeakMap,_EventStream_ended=new WeakMap,_EventStream_errored=new WeakMap,_EventStream_aborted=new WeakMap,_EventStream_catchingPromiseCreated=new WeakMap,_EventStream_instances=new WeakSet,_EventStream_handleError=function a(s){if(__classPrivateFieldSet$3(this,_EventStream_errored,!0,"f"),s instanceof Error&&s.name==="AbortError"&&(s=new APIUserAbortError),s instanceof APIUserAbortError)return __classPrivateFieldSet$3(this,_EventStream_aborted,!0,"f"),this._emit("abort",s);if(s instanceof OpenAIError)return this._emit("error",s);if(s instanceof Error){const c=new OpenAIError(s.message);return c.cause=s,this._emit("error",c)}return this._emit("error",new OpenAIError(String(s)))};function isAutoParsableResponseFormat(a){return(a==null?void 0:a.$brand)==="auto-parseable-response-format"}function isAutoParsableTool$1(a){return(a==null?void 0:a.$brand)==="auto-parseable-tool"}function maybeParseChatCompletion(a,s){return!s||!hasAutoParseableInput$1(s)?{...a,choices:a.choices.map(c=>({...c,message:{...c.message,parsed:null,...c.message.tool_calls?{tool_calls:c.message.tool_calls}:void 0}}))}:parseChatCompletion(a,s)}function parseChatCompletion(a,s){const c=a.choices.map(u=>{var d;if(u.finish_reason==="length")throw new LengthFinishReasonError;if(u.finish_reason==="content_filter")throw new ContentFilterFinishReasonError;return{...u,message:{...u.message,...u.message.tool_calls?{tool_calls:((d=u.message.tool_calls)==null?void 0:d.map(h=>parseToolCall$1(s,h)))??void 0}:void 0,parsed:u.message.content&&!u.message.refusal?parseResponseFormat(s,u.message.content):null}}});return{...a,choices:c}}function parseResponseFormat(a,s){var c,u;return((c=a.response_format)==null?void 0:c.type)!=="json_schema"?null:((u=a.response_format)==null?void 0:u.type)==="json_schema"?"$parseRaw"in a.response_format?a.response_format.$parseRaw(s):JSON.parse(s):null}function parseToolCall$1(a,s){var u;const c=(u=a.tools)==null?void 0:u.find(d=>{var h;return((h=d.function)==null?void 0:h.name)===s.function.name});return{...s,function:{...s.function,parsed_arguments:isAutoParsableTool$1(c)?c.$parseRaw(s.function.arguments):c!=null&&c.function.strict?JSON.parse(s.function.arguments):null}}}function shouldParseToolCall(a,s){var u;if(!a)return!1;const c=(u=a.tools)==null?void 0:u.find(d=>{var h;return((h=d.function)==null?void 0:h.name)===s.function.name});return isAutoParsableTool$1(c)||(c==null?void 0:c.function.strict)||!1}function hasAutoParseableInput$1(a){var s;return isAutoParsableResponseFormat(a.response_format)?!0:((s=a.tools)==null?void 0:s.some(c=>isAutoParsableTool$1(c)||c.type==="function"&&c.function.strict===!0))??!1}function validateInputTools(a){for(const s of a??[]){if(s.type!=="function")throw new OpenAIError(`Currently only \`function\` tool types support auto-parsing; Received \`${s.type}\``);if(s.function.strict!==!0)throw new OpenAIError(`The \`${s.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var __classPrivateFieldGet$3=function(a,s,c,u){if(c==="a"&&!u)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?a!==s||!u:!s.has(a))throw new TypeError("Cannot read private member from an object whose class did not declare it");return c==="m"?u:c==="a"?u.call(a):u?u.value:s.get(a)},_AbstractChatCompletionRunner_instances,_AbstractChatCompletionRunner_getFinalContent,_AbstractChatCompletionRunner_getFinalMessage,_AbstractChatCompletionRunner_getFinalFunctionCall,_AbstractChatCompletionRunner_getFinalFunctionCallResult,_AbstractChatCompletionRunner_calculateTotalUsage,_AbstractChatCompletionRunner_validateParams,_AbstractChatCompletionRunner_stringifyFunctionCallResult;const DEFAULT_MAX_CHAT_COMPLETIONS=10;class AbstractChatCompletionRunner extends EventStream{constructor(){super(...arguments),_AbstractChatCompletionRunner_instances.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(s){var u;this._chatCompletions.push(s),this._emit("chatCompletion",s);const c=(u=s.choices[0])==null?void 0:u.message;return c&&this._addMessage(c),s}_addMessage(s,c=!0){if("content"in s||(s.content=null),this.messages.push(s),c){if(this._emit("message",s),(isFunctionMessage(s)||isToolMessage(s))&&s.content)this._emit("functionCallResult",s.content);else if(isAssistantMessage(s)&&s.function_call)this._emit("functionCall",s.function_call);else if(isAssistantMessage(s)&&s.tool_calls)for(const u of s.tool_calls)u.type==="function"&&this._emit("functionCall",u.function)}}async finalChatCompletion(){await this.done();const s=this._chatCompletions[this._chatCompletions.length-1];if(!s)throw new OpenAIError("stream ended without producing a ChatCompletion");return s}async finalContent(){return await this.done(),__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalContent).call(this)}async finalMessage(){return await this.done(),__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalMessage).call(this)}async finalFunctionCall(){return await this.done(),__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionCall).call(this)}async finalFunctionCallResult(){return await this.done(),__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionCallResult).call(this)}async totalUsage(){return await this.done(),__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_calculateTotalUsage).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const s=this._chatCompletions[this._chatCompletions.length-1];s&&this._emit("finalChatCompletion",s);const c=__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalMessage).call(this);c&&this._emit("finalMessage",c);const u=__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalContent).call(this);u&&this._emit("finalContent",u);const d=__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionCall).call(this);d&&this._emit("finalFunctionCall",d);const h=__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionCallResult).call(this);h!=null&&this._emit("finalFunctionCallResult",h),this._chatCompletions.some(p=>p.usage)&&this._emit("totalUsage",__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_calculateTotalUsage).call(this))}async _createChatCompletion(s,c,u){const d=u==null?void 0:u.signal;d&&(d.aborted&&this.controller.abort(),d.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_validateParams).call(this,c);const h=await s.chat.completions.create({...c,stream:!1},{...u,signal:this.controller.signal});return this._connected(),this._addChatCompletion(parseChatCompletion(h,c))}async _runChatCompletion(s,c,u){for(const d of c.messages)this._addMessage(d,!1);return await this._createChatCompletion(s,c,u)}async _runFunctions(s,c,u){var b;const d="function",{function_call:h="auto",stream:p,...m}=c,f=typeof h!="string"&&(h==null?void 0:h.name),{maxChatCompletions:_=DEFAULT_MAX_CHAT_COMPLETIONS}=u||{},y={};for(const T of c.functions)y[T.name||T.function.name]=T;const E=c.functions.map(T=>({name:T.name||T.function.name,parameters:T.parameters,description:T.description}));for(const T of c.messages)this._addMessage(T,!1);for(let T=0;T<_;++T){const A=(b=(await this._createChatCompletion(s,{...m,function_call:h,functions:E,messages:[...this.messages]},u)).choices[0])==null?void 0:b.message;if(!A)throw new OpenAIError("missing message in ChatCompletion response");if(!A.function_call)return;const{name:v,arguments:S}=A.function_call,O=y[v];if(O){if(f&&f!==v){const w=`Invalid function_call: ${JSON.stringify(v)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:d,name:v,content:w});continue}}else{const w=`Invalid function_call: ${JSON.stringify(v)}. Available options are: ${E.map(C=>JSON.stringify(C.name)).join(", ")}. Please try again`;this._addMessage({role:d,name:v,content:w});continue}let I;try{I=isRunnableFunctionWithParse(O)?await O.parse(S):S}catch(w){this._addMessage({role:d,name:v,content:w instanceof Error?w.message:String(w)});continue}const x=await O.function(I,this),P=__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_stringifyFunctionCallResult).call(this,x);if(this._addMessage({role:d,name:v,content:P}),f)return}}async _runTools(s,c,u){var T,A,v;const d="tool",{tool_choice:h="auto",stream:p,...m}=c,f=typeof h!="string"&&((T=h==null?void 0:h.function)==null?void 0:T.name),{maxChatCompletions:_=DEFAULT_MAX_CHAT_COMPLETIONS}=u||{},y=c.tools.map(S=>{if(isAutoParsableTool$1(S)){if(!S.$callback)throw new OpenAIError("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:S.$callback,name:S.function.name,description:S.function.description||"",parameters:S.function.parameters,parse:S.$parseRaw,strict:!0}}}return S}),E={};for(const S of y)S.type==="function"&&(E[S.function.name||S.function.function.name]=S.function);const b="tools"in c?y.map(S=>S.type==="function"?{type:"function",function:{name:S.function.name||S.function.function.name,parameters:S.function.parameters,description:S.function.description,strict:S.function.strict}}:S):void 0;for(const S of c.messages)this._addMessage(S,!1);for(let S=0;S<_;++S){const O=(A=(await this._createChatCompletion(s,{...m,tool_choice:h,tools:b,messages:[...this.messages]},u)).choices[0])==null?void 0:A.message;if(!O)throw new OpenAIError("missing message in ChatCompletion response");if(!((v=O.tool_calls)!=null&&v.length))return;for(const I of O.tool_calls){if(I.type!=="function")continue;const x=I.id,{name:P,arguments:w}=I.function,C=E[P];if(C){if(f&&f!==P){const F=`Invalid tool_call: ${JSON.stringify(P)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:d,tool_call_id:x,content:F});continue}}else{const F=`Invalid tool_call: ${JSON.stringify(P)}. Available options are: ${Object.keys(E).map(L=>JSON.stringify(L)).join(", ")}. Please try again`;this._addMessage({role:d,tool_call_id:x,content:F});continue}let k;try{k=isRunnableFunctionWithParse(C)?await C.parse(w):w}catch(F){const L=F instanceof Error?F.message:String(F);this._addMessage({role:d,tool_call_id:x,content:L});continue}const R=await C.function(k,this),N=__classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_stringifyFunctionCallResult).call(this,R);if(this._addMessage({role:d,tool_call_id:x,content:N}),f)return}}}}_AbstractChatCompletionRunner_instances=new WeakSet,_AbstractChatCompletionRunner_getFinalContent=function a(){return __classPrivateFieldGet$3(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalMessage).call(this).content??null},_AbstractChatCompletionRunner_getFinalMessage=function a(){let s=this.messages.length;for(;s-- >0;){const c=this.messages[s];if(isAssistantMessage(c)){const{function_call:u,...d}=c,h={...d,content:c.content??null,refusal:c.refusal??null};return u&&(h.function_call=u),h}}throw new OpenAIError("stream ended without producing a ChatCompletionMessage with role=assistant")},_AbstractChatCompletionRunner_getFinalFunctionCall=function a(){var s,c;for(let u=this.messages.length-1;u>=0;u--){const d=this.messages[u];if(isAssistantMessage(d)&&(d!=null&&d.function_call))return d.function_call;if(isAssistantMessage(d)&&((s=d==null?void 0:d.tool_calls)!=null&&s.length))return(c=d.tool_calls.at(-1))==null?void 0:c.function}},_AbstractChatCompletionRunner_getFinalFunctionCallResult=function a(){for(let s=this.messages.length-1;s>=0;s--){const c=this.messages[s];if(isFunctionMessage(c)&&c.content!=null||isToolMessage(c)&&c.content!=null&&typeof c.content=="string"&&this.messages.some(u=>{var d;return u.role==="assistant"&&((d=u.tool_calls)==null?void 0:d.some(h=>h.type==="function"&&h.id===c.tool_call_id))}))return c.content}},_AbstractChatCompletionRunner_calculateTotalUsage=function a(){const s={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:c}of this._chatCompletions)c&&(s.completion_tokens+=c.completion_tokens,s.prompt_tokens+=c.prompt_tokens,s.total_tokens+=c.total_tokens);return s},_AbstractChatCompletionRunner_validateParams=function a(s){if(s.n!=null&&s.n>1)throw new OpenAIError("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},_AbstractChatCompletionRunner_stringifyFunctionCallResult=function a(s){return typeof s=="string"?s:s===void 0?"undefined":JSON.stringify(s)};class ChatCompletionRunner extends AbstractChatCompletionRunner{static runFunctions(s,c,u){const d=new ChatCompletionRunner,h={...u,headers:{...u==null?void 0:u.headers,"X-Stainless-Helper-Method":"runFunctions"}};return d._run(()=>d._runFunctions(s,c,h)),d}static runTools(s,c,u){const d=new ChatCompletionRunner,h={...u,headers:{...u==null?void 0:u.headers,"X-Stainless-Helper-Method":"runTools"}};return d._run(()=>d._runTools(s,c,h)),d}_addMessage(s,c=!0){super._addMessage(s,c),isAssistantMessage(s)&&s.content&&this._emit("content",s.content)}}const STR=1,NUM=2,ARR=4,OBJ=8,NULL=16,BOOL=32,NAN=64,INFINITY=128,MINUS_INFINITY=256,INF=INFINITY|MINUS_INFINITY,SPECIAL=NULL|BOOL|INF|NAN,ATOM=STR|NUM|SPECIAL,COLLECTION=ARR|OBJ,ALL=ATOM|COLLECTION,Allow={STR,NUM,ARR,OBJ,NULL,BOOL,NAN,INFINITY,MINUS_INFINITY,INF,SPECIAL,ATOM,COLLECTION,ALL};class PartialJSON extends Error{}class MalformedJSON extends Error{}function parseJSON(a,s=Allow.ALL){if(typeof a!="string")throw new TypeError(`expecting str, got ${typeof a}`);if(!a.trim())throw new Error(`${a} is empty`);return _parseJSON(a.trim(),s)}const _parseJSON=(a,s)=>{const c=a.length;let u=0;const d=b=>{throw new PartialJSON(`${b} at position ${u}`)},h=b=>{throw new MalformedJSON(`${b} at position ${u}`)},p=()=>(E(),u>=c&&d("Unexpected end of input"),a[u]==='"'?m():a[u]==="{"?f():a[u]==="["?_():a.substring(u,u+4)==="null"||Allow.NULL&s&&c-u<4&&"null".startsWith(a.substring(u))?(u+=4,null):a.substring(u,u+4)==="true"||Allow.BOOL&s&&c-u<4&&"true".startsWith(a.substring(u))?(u+=4,!0):a.substring(u,u+5)==="false"||Allow.BOOL&s&&c-u<5&&"false".startsWith(a.substring(u))?(u+=5,!1):a.substring(u,u+8)==="Infinity"||Allow.INFINITY&s&&c-u<8&&"Infinity".startsWith(a.substring(u))?(u+=8,1/0):a.substring(u,u+9)==="-Infinity"||Allow.MINUS_INFINITY&s&&1<c-u&&c-u<9&&"-Infinity".startsWith(a.substring(u))?(u+=9,-1/0):a.substring(u,u+3)==="NaN"||Allow.NAN&s&&c-u<3&&"NaN".startsWith(a.substring(u))?(u+=3,NaN):y()),m=()=>{const b=u;let T=!1;for(u++;u<c&&(a[u]!=='"'||T&&a[u-1]==="\\");)T=a[u]==="\\"?!T:!1,u++;if(a.charAt(u)=='"')try{return JSON.parse(a.substring(b,++u-Number(T)))}catch(A){h(String(A))}else if(Allow.STR&s)try{return JSON.parse(a.substring(b,u-Number(T))+'"')}catch{return JSON.parse(a.substring(b,a.lastIndexOf("\\"))+'"')}d("Unterminated string literal")},f=()=>{u++,E();const b={};try{for(;a[u]!=="}";){if(E(),u>=c&&Allow.OBJ&s)return b;const T=m();E(),u++;try{const A=p();Object.defineProperty(b,T,{value:A,writable:!0,enumerable:!0,configurable:!0})}catch(A){if(Allow.OBJ&s)return b;throw A}E(),a[u]===","&&u++}}catch{if(Allow.OBJ&s)return b;d("Expected '}' at end of object")}return u++,b},_=()=>{u++;const b=[];try{for(;a[u]!=="]";)b.push(p()),E(),a[u]===","&&u++}catch{if(Allow.ARR&s)return b;d("Expected ']' at end of array")}return u++,b},y=()=>{if(u===0){a==="-"&&Allow.NUM&s&&d("Not sure what '-' is");try{return JSON.parse(a)}catch(T){if(Allow.NUM&s)try{return a[a.length-1]==="."?JSON.parse(a.substring(0,a.lastIndexOf("."))):JSON.parse(a.substring(0,a.lastIndexOf("e")))}catch{}h(String(T))}}const b=u;for(a[u]==="-"&&u++;a[u]&&!",]}".includes(a[u]);)u++;u==c&&!(Allow.NUM&s)&&d("Unterminated number literal");try{return JSON.parse(a.substring(b,u))}catch{a.substring(b,u)==="-"&&Allow.NUM&s&&d("Not sure what '-' is");try{return JSON.parse(a.substring(b,a.lastIndexOf("e")))}catch(T){h(String(T))}}},E=()=>{for(;u<c&&` 
\r	`.includes(a[u]);)u++};return p()},partialParse=a=>parseJSON(a,Allow.ALL^Allow.NUM);var __classPrivateFieldSet$2=function(a,s,c,u,d){if(u==="m")throw new TypeError("Private method is not writable");if(u==="a"&&!d)throw new TypeError("Private accessor was defined without a setter");if(typeof s=="function"?a!==s||!d:!s.has(a))throw new TypeError("Cannot write private member to an object whose class did not declare it");return u==="a"?d.call(a,c):d?d.value=c:s.set(a,c),c},__classPrivateFieldGet$2=function(a,s,c,u){if(c==="a"&&!u)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?a!==s||!u:!s.has(a))throw new TypeError("Cannot read private member from an object whose class did not declare it");return c==="m"?u:c==="a"?u.call(a):u?u.value:s.get(a)},_ChatCompletionStream_instances,_ChatCompletionStream_params,_ChatCompletionStream_choiceEventStates,_ChatCompletionStream_currentChatCompletionSnapshot,_ChatCompletionStream_beginRequest,_ChatCompletionStream_getChoiceEventState,_ChatCompletionStream_addChunk,_ChatCompletionStream_emitToolCallDoneEvent,_ChatCompletionStream_emitContentDoneEvents,_ChatCompletionStream_endRequest,_ChatCompletionStream_getAutoParseableResponseFormat,_ChatCompletionStream_accumulateChatCompletion;class ChatCompletionStream extends AbstractChatCompletionRunner{constructor(s){super(),_ChatCompletionStream_instances.add(this),_ChatCompletionStream_params.set(this,void 0),_ChatCompletionStream_choiceEventStates.set(this,void 0),_ChatCompletionStream_currentChatCompletionSnapshot.set(this,void 0),__classPrivateFieldSet$2(this,_ChatCompletionStream_params,s,"f"),__classPrivateFieldSet$2(this,_ChatCompletionStream_choiceEventStates,[],"f")}get currentChatCompletionSnapshot(){return __classPrivateFieldGet$2(this,_ChatCompletionStream_currentChatCompletionSnapshot,"f")}static fromReadableStream(s){const c=new ChatCompletionStream(null);return c._run(()=>c._fromReadableStream(s)),c}static createChatCompletion(s,c,u){const d=new ChatCompletionStream(c);return d._run(()=>d._runChatCompletion(s,{...c,stream:!0},{...u,headers:{...u==null?void 0:u.headers,"X-Stainless-Helper-Method":"stream"}})),d}async _createChatCompletion(s,c,u){var p;super._createChatCompletion;const d=u==null?void 0:u.signal;d&&(d.aborted&&this.controller.abort(),d.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_beginRequest).call(this);const h=await s.chat.completions.create({...c,stream:!0},{...u,signal:this.controller.signal});this._connected();for await(const m of h)__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_addChunk).call(this,m);if((p=h.controller.signal)!=null&&p.aborted)throw new APIUserAbortError;return this._addChatCompletion(__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_endRequest).call(this))}async _fromReadableStream(s,c){var p;const u=c==null?void 0:c.signal;u&&(u.aborted&&this.controller.abort(),u.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_beginRequest).call(this),this._connected();const d=Stream.fromReadableStream(s,this.controller);let h;for await(const m of d)h&&h!==m.id&&this._addChatCompletion(__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_endRequest).call(this)),__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_addChunk).call(this,m),h=m.id;if((p=d.controller.signal)!=null&&p.aborted)throw new APIUserAbortError;return this._addChatCompletion(__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_endRequest).call(this))}[(_ChatCompletionStream_params=new WeakMap,_ChatCompletionStream_choiceEventStates=new WeakMap,_ChatCompletionStream_currentChatCompletionSnapshot=new WeakMap,_ChatCompletionStream_instances=new WeakSet,_ChatCompletionStream_beginRequest=function(){this.ended||__classPrivateFieldSet$2(this,_ChatCompletionStream_currentChatCompletionSnapshot,void 0,"f")},_ChatCompletionStream_getChoiceEventState=function(s){let c=__classPrivateFieldGet$2(this,_ChatCompletionStream_choiceEventStates,"f")[s.index];return c||(c={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},__classPrivateFieldGet$2(this,_ChatCompletionStream_choiceEventStates,"f")[s.index]=c,c)},_ChatCompletionStream_addChunk=function(s){var u,d,h,p,m,f,_,y,E,b,T,A,v,S,O;if(this.ended)return;const c=__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_accumulateChatCompletion).call(this,s);this._emit("chunk",s,c);for(const I of s.choices){const x=c.choices[I.index];I.delta.content!=null&&((u=x.message)==null?void 0:u.role)==="assistant"&&((d=x.message)!=null&&d.content)&&(this._emit("content",I.delta.content,x.message.content),this._emit("content.delta",{delta:I.delta.content,snapshot:x.message.content,parsed:x.message.parsed})),I.delta.refusal!=null&&((h=x.message)==null?void 0:h.role)==="assistant"&&((p=x.message)!=null&&p.refusal)&&this._emit("refusal.delta",{delta:I.delta.refusal,snapshot:x.message.refusal}),((m=I.logprobs)==null?void 0:m.content)!=null&&((f=x.message)==null?void 0:f.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(_=I.logprobs)==null?void 0:_.content,snapshot:((y=x.logprobs)==null?void 0:y.content)??[]}),((E=I.logprobs)==null?void 0:E.refusal)!=null&&((b=x.message)==null?void 0:b.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(T=I.logprobs)==null?void 0:T.refusal,snapshot:((A=x.logprobs)==null?void 0:A.refusal)??[]});const P=__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getChoiceEventState).call(this,x);x.finish_reason&&(__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitContentDoneEvents).call(this,x),P.current_tool_call_index!=null&&__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitToolCallDoneEvent).call(this,x,P.current_tool_call_index));for(const w of I.delta.tool_calls??[])P.current_tool_call_index!==w.index&&(__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitContentDoneEvents).call(this,x),P.current_tool_call_index!=null&&__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitToolCallDoneEvent).call(this,x,P.current_tool_call_index)),P.current_tool_call_index=w.index;for(const w of I.delta.tool_calls??[]){const C=(v=x.message.tool_calls)==null?void 0:v[w.index];C!=null&&C.type&&((C==null?void 0:C.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(S=C.function)==null?void 0:S.name,index:w.index,arguments:C.function.arguments,parsed_arguments:C.function.parsed_arguments,arguments_delta:((O=w.function)==null?void 0:O.arguments)??""}):C==null||C.type)}}},_ChatCompletionStream_emitToolCallDoneEvent=function(s,c){var d,h,p;if(__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getChoiceEventState).call(this,s).done_tool_calls.has(c))return;const u=(d=s.message.tool_calls)==null?void 0:d[c];if(!u)throw new Error("no tool call snapshot");if(!u.type)throw new Error("tool call snapshot missing `type`");if(u.type==="function"){const m=(p=(h=__classPrivateFieldGet$2(this,_ChatCompletionStream_params,"f"))==null?void 0:h.tools)==null?void 0:p.find(f=>f.type==="function"&&f.function.name===u.function.name);this._emit("tool_calls.function.arguments.done",{name:u.function.name,index:c,arguments:u.function.arguments,parsed_arguments:isAutoParsableTool$1(m)?m.$parseRaw(u.function.arguments):m!=null&&m.function.strict?JSON.parse(u.function.arguments):null})}else u.type},_ChatCompletionStream_emitContentDoneEvents=function(s){var u,d;const c=__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getChoiceEventState).call(this,s);if(s.message.content&&!c.content_done){c.content_done=!0;const h=__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getAutoParseableResponseFormat).call(this);this._emit("content.done",{content:s.message.content,parsed:h?h.$parseRaw(s.message.content):null})}s.message.refusal&&!c.refusal_done&&(c.refusal_done=!0,this._emit("refusal.done",{refusal:s.message.refusal})),(u=s.logprobs)!=null&&u.content&&!c.logprobs_content_done&&(c.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:s.logprobs.content})),(d=s.logprobs)!=null&&d.refusal&&!c.logprobs_refusal_done&&(c.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:s.logprobs.refusal}))},_ChatCompletionStream_endRequest=function(){if(this.ended)throw new OpenAIError("stream has ended, this shouldn't happen");const s=__classPrivateFieldGet$2(this,_ChatCompletionStream_currentChatCompletionSnapshot,"f");if(!s)throw new OpenAIError("request ended without sending any chunks");return __classPrivateFieldSet$2(this,_ChatCompletionStream_currentChatCompletionSnapshot,void 0,"f"),__classPrivateFieldSet$2(this,_ChatCompletionStream_choiceEventStates,[],"f"),finalizeChatCompletion(s,__classPrivateFieldGet$2(this,_ChatCompletionStream_params,"f"))},_ChatCompletionStream_getAutoParseableResponseFormat=function(){var c;const s=(c=__classPrivateFieldGet$2(this,_ChatCompletionStream_params,"f"))==null?void 0:c.response_format;return isAutoParsableResponseFormat(s)?s:null},_ChatCompletionStream_accumulateChatCompletion=function(s){var c,u,d,h;let p=__classPrivateFieldGet$2(this,_ChatCompletionStream_currentChatCompletionSnapshot,"f");const{choices:m,...f}=s;p?Object.assign(p,f):p=__classPrivateFieldSet$2(this,_ChatCompletionStream_currentChatCompletionSnapshot,{...f,choices:[]},"f");for(const{delta:_,finish_reason:y,index:E,logprobs:b=null,...T}of s.choices){let A=p.choices[E];if(A||(A=p.choices[E]={finish_reason:y,index:E,message:{},logprobs:b,...T}),b)if(!A.logprobs)A.logprobs=Object.assign({},b);else{const{content:w,refusal:C,...k}=b;Object.assign(A.logprobs,k),w&&((c=A.logprobs).content??(c.content=[]),A.logprobs.content.push(...w)),C&&((u=A.logprobs).refusal??(u.refusal=[]),A.logprobs.refusal.push(...C))}if(y&&(A.finish_reason=y,__classPrivateFieldGet$2(this,_ChatCompletionStream_params,"f")&&hasAutoParseableInput$1(__classPrivateFieldGet$2(this,_ChatCompletionStream_params,"f")))){if(y==="length")throw new LengthFinishReasonError;if(y==="content_filter")throw new ContentFilterFinishReasonError}if(Object.assign(A,T),!_)continue;const{content:v,refusal:S,function_call:O,role:I,tool_calls:x,...P}=_;if(Object.assign(A.message,P),S&&(A.message.refusal=(A.message.refusal||"")+S),I&&(A.message.role=I),O&&(A.message.function_call?(O.name&&(A.message.function_call.name=O.name),O.arguments&&((d=A.message.function_call).arguments??(d.arguments=""),A.message.function_call.arguments+=O.arguments)):A.message.function_call=O),v&&(A.message.content=(A.message.content||"")+v,!A.message.refusal&&__classPrivateFieldGet$2(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getAutoParseableResponseFormat).call(this)&&(A.message.parsed=partialParse(A.message.content))),x){A.message.tool_calls||(A.message.tool_calls=[]);for(const{index:w,id:C,type:k,function:R,...N}of x){const F=(h=A.message.tool_calls)[w]??(h[w]={});Object.assign(F,N),C&&(F.id=C),k&&(F.type=k),R&&(F.function??(F.function={name:R.name??"",arguments:""})),R!=null&&R.name&&(F.function.name=R.name),R!=null&&R.arguments&&(F.function.arguments+=R.arguments,shouldParseToolCall(__classPrivateFieldGet$2(this,_ChatCompletionStream_params,"f"),F)&&(F.function.parsed_arguments=partialParse(F.function.arguments)))}}}return p},Symbol.asyncIterator)](){const s=[],c=[];let u=!1;return this.on("chunk",d=>{const h=c.shift();h?h.resolve(d):s.push(d)}),this.on("end",()=>{u=!0;for(const d of c)d.resolve(void 0);c.length=0}),this.on("abort",d=>{u=!0;for(const h of c)h.reject(d);c.length=0}),this.on("error",d=>{u=!0;for(const h of c)h.reject(d);c.length=0}),{next:async()=>s.length?{value:s.shift(),done:!1}:u?{value:void 0,done:!0}:new Promise((d,h)=>c.push({resolve:d,reject:h})).then(d=>d?{value:d,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function finalizeChatCompletion(a,s){const{id:c,choices:u,created:d,model:h,system_fingerprint:p,...m}=a,f={...m,id:c,choices:u.map(({message:_,finish_reason:y,index:E,logprobs:b,...T})=>{if(!y)throw new OpenAIError(`missing finish_reason for choice ${E}`);const{content:A=null,function_call:v,tool_calls:S,...O}=_,I=_.role;if(!I)throw new OpenAIError(`missing role for choice ${E}`);if(v){const{arguments:x,name:P}=v;if(x==null)throw new OpenAIError(`missing function_call.arguments for choice ${E}`);if(!P)throw new OpenAIError(`missing function_call.name for choice ${E}`);return{...T,message:{content:A,function_call:{arguments:x,name:P},role:I,refusal:_.refusal??null},finish_reason:y,index:E,logprobs:b}}return S?{...T,index:E,finish_reason:y,logprobs:b,message:{...O,role:I,content:A,refusal:_.refusal??null,tool_calls:S.map((x,P)=>{const{function:w,type:C,id:k,...R}=x,{arguments:N,name:F,...L}=w||{};if(k==null)throw new OpenAIError(`missing choices[${E}].tool_calls[${P}].id
${str(a)}`);if(C==null)throw new OpenAIError(`missing choices[${E}].tool_calls[${P}].type
${str(a)}`);if(F==null)throw new OpenAIError(`missing choices[${E}].tool_calls[${P}].function.name
${str(a)}`);if(N==null)throw new OpenAIError(`missing choices[${E}].tool_calls[${P}].function.arguments
${str(a)}`);return{...R,id:k,type:C,function:{...L,name:F,arguments:N}}})}}:{...T,message:{...O,content:A,role:I,refusal:_.refusal??null},finish_reason:y,index:E,logprobs:b}}),created:d,model:h,object:"chat.completion",...p?{system_fingerprint:p}:{}};return maybeParseChatCompletion(f,s)}function str(a){return JSON.stringify(a)}function assertNever(a){}class ChatCompletionStreamingRunner extends ChatCompletionStream{static fromReadableStream(s){const c=new ChatCompletionStreamingRunner(null);return c._run(()=>c._fromReadableStream(s)),c}static runFunctions(s,c,u){const d=new ChatCompletionStreamingRunner(null),h={...u,headers:{...u==null?void 0:u.headers,"X-Stainless-Helper-Method":"runFunctions"}};return d._run(()=>d._runFunctions(s,c,h)),d}static runTools(s,c,u){const d=new ChatCompletionStreamingRunner(c),h={...u,headers:{...u==null?void 0:u.headers,"X-Stainless-Helper-Method":"runTools"}};return d._run(()=>d._runTools(s,c,h)),d}}let Completions$1=class extends APIResource{parse(a,s){return validateInputTools(a.tools),this._client.chat.completions.create(a,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(c=>parseChatCompletion(c,a))}runFunctions(a,s){return a.stream?ChatCompletionStreamingRunner.runFunctions(this._client,a,s):ChatCompletionRunner.runFunctions(this._client,a,s)}runTools(a,s){return a.stream?ChatCompletionStreamingRunner.runTools(this._client,a,s):ChatCompletionRunner.runTools(this._client,a,s)}stream(a,s){return ChatCompletionStream.createChatCompletion(this._client,a,s)}};class Chat extends APIResource{constructor(){super(...arguments),this.completions=new Completions$1(this._client)}}(function(a){a.Completions=Completions$1})(Chat||(Chat={}));class Sessions extends APIResource{create(s,c){return this._client.post("/realtime/sessions",{body:s,...c,headers:{"OpenAI-Beta":"assistants=v2",...c==null?void 0:c.headers}})}}class TranscriptionSessions extends APIResource{create(s,c){return this._client.post("/realtime/transcription_sessions",{body:s,...c,headers:{"OpenAI-Beta":"assistants=v2",...c==null?void 0:c.headers}})}}class Realtime extends APIResource{constructor(){super(...arguments),this.sessions=new Sessions(this._client),this.transcriptionSessions=new TranscriptionSessions(this._client)}}Realtime.Sessions=Sessions,Realtime.TranscriptionSessions=TranscriptionSessions;var __classPrivateFieldGet$1=function(a,s,c,u){if(c==="a"&&!u)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?a!==s||!u:!s.has(a))throw new TypeError("Cannot read private member from an object whose class did not declare it");return c==="m"?u:c==="a"?u.call(a):u?u.value:s.get(a)},__classPrivateFieldSet$1=function(a,s,c,u,d){if(u==="m")throw new TypeError("Private method is not writable");if(u==="a"&&!d)throw new TypeError("Private accessor was defined without a setter");if(typeof s=="function"?a!==s||!d:!s.has(a))throw new TypeError("Cannot write private member to an object whose class did not declare it");return u==="a"?d.call(a,c):d?d.value=c:s.set(a,c),c},_AssistantStream_instances,_AssistantStream_events,_AssistantStream_runStepSnapshots,_AssistantStream_messageSnapshots,_AssistantStream_messageSnapshot,_AssistantStream_finalRun,_AssistantStream_currentContentIndex,_AssistantStream_currentContent,_AssistantStream_currentToolCallIndex,_AssistantStream_currentToolCall,_AssistantStream_currentEvent,_AssistantStream_currentRunSnapshot,_AssistantStream_currentRunStepSnapshot,_AssistantStream_addEvent,_AssistantStream_endRequest,_AssistantStream_handleMessage,_AssistantStream_handleRunStep,_AssistantStream_handleEvent,_AssistantStream_accumulateRunStep,_AssistantStream_accumulateMessage,_AssistantStream_accumulateContent,_AssistantStream_handleRun;class AssistantStream extends EventStream{constructor(){super(...arguments),_AssistantStream_instances.add(this),_AssistantStream_events.set(this,[]),_AssistantStream_runStepSnapshots.set(this,{}),_AssistantStream_messageSnapshots.set(this,{}),_AssistantStream_messageSnapshot.set(this,void 0),_AssistantStream_finalRun.set(this,void 0),_AssistantStream_currentContentIndex.set(this,void 0),_AssistantStream_currentContent.set(this,void 0),_AssistantStream_currentToolCallIndex.set(this,void 0),_AssistantStream_currentToolCall.set(this,void 0),_AssistantStream_currentEvent.set(this,void 0),_AssistantStream_currentRunSnapshot.set(this,void 0),_AssistantStream_currentRunStepSnapshot.set(this,void 0)}[(_AssistantStream_events=new WeakMap,_AssistantStream_runStepSnapshots=new WeakMap,_AssistantStream_messageSnapshots=new WeakMap,_AssistantStream_messageSnapshot=new WeakMap,_AssistantStream_finalRun=new WeakMap,_AssistantStream_currentContentIndex=new WeakMap,_AssistantStream_currentContent=new WeakMap,_AssistantStream_currentToolCallIndex=new WeakMap,_AssistantStream_currentToolCall=new WeakMap,_AssistantStream_currentEvent=new WeakMap,_AssistantStream_currentRunSnapshot=new WeakMap,_AssistantStream_currentRunStepSnapshot=new WeakMap,_AssistantStream_instances=new WeakSet,Symbol.asyncIterator)](){const s=[],c=[];let u=!1;return this.on("event",d=>{const h=c.shift();h?h.resolve(d):s.push(d)}),this.on("end",()=>{u=!0;for(const d of c)d.resolve(void 0);c.length=0}),this.on("abort",d=>{u=!0;for(const h of c)h.reject(d);c.length=0}),this.on("error",d=>{u=!0;for(const h of c)h.reject(d);c.length=0}),{next:async()=>s.length?{value:s.shift(),done:!1}:u?{value:void 0,done:!0}:new Promise((d,h)=>c.push({resolve:d,reject:h})).then(d=>d?{value:d,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(s){const c=new AssistantStream;return c._run(()=>c._fromReadableStream(s)),c}async _fromReadableStream(s,c){var h;const u=c==null?void 0:c.signal;u&&(u.aborted&&this.controller.abort(),u.addEventListener("abort",()=>this.controller.abort())),this._connected();const d=Stream.fromReadableStream(s,this.controller);for await(const p of d)__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,p);if((h=d.controller.signal)!=null&&h.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}toReadableStream(){return new Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(s,c,u,d,h){const p=new AssistantStream;return p._run(()=>p._runToolAssistantStream(s,c,u,d,{...h,headers:{...h==null?void 0:h.headers,"X-Stainless-Helper-Method":"stream"}})),p}async _createToolAssistantStream(s,c,u,d,h){var _;const p=h==null?void 0:h.signal;p&&(p.aborted&&this.controller.abort(),p.addEventListener("abort",()=>this.controller.abort()));const m={...d,stream:!0},f=await s.submitToolOutputs(c,u,m,{...h,signal:this.controller.signal});this._connected();for await(const y of f)__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,y);if((_=f.controller.signal)!=null&&_.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}static createThreadAssistantStream(s,c,u){const d=new AssistantStream;return d._run(()=>d._threadAssistantStream(s,c,{...u,headers:{...u==null?void 0:u.headers,"X-Stainless-Helper-Method":"stream"}})),d}static createAssistantStream(s,c,u,d){const h=new AssistantStream;return h._run(()=>h._runAssistantStream(s,c,u,{...d,headers:{...d==null?void 0:d.headers,"X-Stainless-Helper-Method":"stream"}})),h}currentEvent(){return __classPrivateFieldGet$1(this,_AssistantStream_currentEvent,"f")}currentRun(){return __classPrivateFieldGet$1(this,_AssistantStream_currentRunSnapshot,"f")}currentMessageSnapshot(){return __classPrivateFieldGet$1(this,_AssistantStream_messageSnapshot,"f")}currentRunStepSnapshot(){return __classPrivateFieldGet$1(this,_AssistantStream_currentRunStepSnapshot,"f")}async finalRunSteps(){return await this.done(),Object.values(__classPrivateFieldGet$1(this,_AssistantStream_runStepSnapshots,"f"))}async finalMessages(){return await this.done(),Object.values(__classPrivateFieldGet$1(this,_AssistantStream_messageSnapshots,"f"))}async finalRun(){if(await this.done(),!__classPrivateFieldGet$1(this,_AssistantStream_finalRun,"f"))throw Error("Final run was not received.");return __classPrivateFieldGet$1(this,_AssistantStream_finalRun,"f")}async _createThreadAssistantStream(s,c,u){var m;const d=u==null?void 0:u.signal;d&&(d.aborted&&this.controller.abort(),d.addEventListener("abort",()=>this.controller.abort()));const h={...c,stream:!0},p=await s.createAndRun(h,{...u,signal:this.controller.signal});this._connected();for await(const f of p)__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,f);if((m=p.controller.signal)!=null&&m.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}async _createAssistantStream(s,c,u,d){var f;const h=d==null?void 0:d.signal;h&&(h.aborted&&this.controller.abort(),h.addEventListener("abort",()=>this.controller.abort()));const p={...u,stream:!0},m=await s.create(c,p,{...d,signal:this.controller.signal});this._connected();for await(const _ of m)__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,_);if((f=m.controller.signal)!=null&&f.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}static accumulateDelta(s,c){for(const[u,d]of Object.entries(c)){if(!s.hasOwnProperty(u)){s[u]=d;continue}let h=s[u];if(h==null){s[u]=d;continue}if(u==="index"||u==="type"){s[u]=d;continue}if(typeof h=="string"&&typeof d=="string")h+=d;else if(typeof h=="number"&&typeof d=="number")h+=d;else if(isObj(h)&&isObj(d))h=this.accumulateDelta(h,d);else if(Array.isArray(h)&&Array.isArray(d)){if(h.every(p=>typeof p=="string"||typeof p=="number")){h.push(...d);continue}for(const p of d){if(!isObj(p))throw new Error(`Expected array delta entry to be an object but got: ${p}`);const m=p.index;if(m==null)throw console.error(p),new Error("Expected array delta entry to have an `index` property");if(typeof m!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${m}`);const f=h[m];f==null?h.push(p):h[m]=this.accumulateDelta(f,p)}continue}else throw Error(`Unhandled record type: ${u}, deltaValue: ${d}, accValue: ${h}`);s[u]=h}return s}_addRun(s){return s}async _threadAssistantStream(s,c,u){return await this._createThreadAssistantStream(c,s,u)}async _runAssistantStream(s,c,u,d){return await this._createAssistantStream(c,s,u,d)}async _runToolAssistantStream(s,c,u,d,h){return await this._createToolAssistantStream(u,s,c,d,h)}}_AssistantStream_addEvent=function a(s){if(!this.ended)switch(__classPrivateFieldSet$1(this,_AssistantStream_currentEvent,s,"f"),__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_handleEvent).call(this,s),s.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_handleRun).call(this,s);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_handleRunStep).call(this,s);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_handleMessage).call(this,s);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},_AssistantStream_endRequest=function a(){if(this.ended)throw new OpenAIError("stream has ended, this shouldn't happen");if(!__classPrivateFieldGet$1(this,_AssistantStream_finalRun,"f"))throw Error("Final run has not been received");return __classPrivateFieldGet$1(this,_AssistantStream_finalRun,"f")},_AssistantStream_handleMessage=function a(s){const[c,u]=__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_accumulateMessage).call(this,s,__classPrivateFieldGet$1(this,_AssistantStream_messageSnapshot,"f"));__classPrivateFieldSet$1(this,_AssistantStream_messageSnapshot,c,"f"),__classPrivateFieldGet$1(this,_AssistantStream_messageSnapshots,"f")[c.id]=c;for(const d of u){const h=c.content[d.index];(h==null?void 0:h.type)=="text"&&this._emit("textCreated",h.text)}switch(s.event){case"thread.message.created":this._emit("messageCreated",s.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",s.data.delta,c),s.data.delta.content)for(const d of s.data.delta.content){if(d.type=="text"&&d.text){let h=d.text,p=c.content[d.index];if(p&&p.type=="text")this._emit("textDelta",h,p.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(d.index!=__classPrivateFieldGet$1(this,_AssistantStream_currentContentIndex,"f")){if(__classPrivateFieldGet$1(this,_AssistantStream_currentContent,"f"))switch(__classPrivateFieldGet$1(this,_AssistantStream_currentContent,"f").type){case"text":this._emit("textDone",__classPrivateFieldGet$1(this,_AssistantStream_currentContent,"f").text,__classPrivateFieldGet$1(this,_AssistantStream_messageSnapshot,"f"));break;case"image_file":this._emit("imageFileDone",__classPrivateFieldGet$1(this,_AssistantStream_currentContent,"f").image_file,__classPrivateFieldGet$1(this,_AssistantStream_messageSnapshot,"f"));break}__classPrivateFieldSet$1(this,_AssistantStream_currentContentIndex,d.index,"f")}__classPrivateFieldSet$1(this,_AssistantStream_currentContent,c.content[d.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(__classPrivateFieldGet$1(this,_AssistantStream_currentContentIndex,"f")!==void 0){const d=s.data.content[__classPrivateFieldGet$1(this,_AssistantStream_currentContentIndex,"f")];if(d)switch(d.type){case"image_file":this._emit("imageFileDone",d.image_file,__classPrivateFieldGet$1(this,_AssistantStream_messageSnapshot,"f"));break;case"text":this._emit("textDone",d.text,__classPrivateFieldGet$1(this,_AssistantStream_messageSnapshot,"f"));break}}__classPrivateFieldGet$1(this,_AssistantStream_messageSnapshot,"f")&&this._emit("messageDone",s.data),__classPrivateFieldSet$1(this,_AssistantStream_messageSnapshot,void 0,"f")}},_AssistantStream_handleRunStep=function a(s){const c=__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_accumulateRunStep).call(this,s);switch(__classPrivateFieldSet$1(this,_AssistantStream_currentRunStepSnapshot,c,"f"),s.event){case"thread.run.step.created":this._emit("runStepCreated",s.data);break;case"thread.run.step.delta":const u=s.data.delta;if(u.step_details&&u.step_details.type=="tool_calls"&&u.step_details.tool_calls&&c.step_details.type=="tool_calls")for(const d of u.step_details.tool_calls)d.index==__classPrivateFieldGet$1(this,_AssistantStream_currentToolCallIndex,"f")?this._emit("toolCallDelta",d,c.step_details.tool_calls[d.index]):(__classPrivateFieldGet$1(this,_AssistantStream_currentToolCall,"f")&&this._emit("toolCallDone",__classPrivateFieldGet$1(this,_AssistantStream_currentToolCall,"f")),__classPrivateFieldSet$1(this,_AssistantStream_currentToolCallIndex,d.index,"f"),__classPrivateFieldSet$1(this,_AssistantStream_currentToolCall,c.step_details.tool_calls[d.index],"f"),__classPrivateFieldGet$1(this,_AssistantStream_currentToolCall,"f")&&this._emit("toolCallCreated",__classPrivateFieldGet$1(this,_AssistantStream_currentToolCall,"f")));this._emit("runStepDelta",s.data.delta,c);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":__classPrivateFieldSet$1(this,_AssistantStream_currentRunStepSnapshot,void 0,"f"),s.data.step_details.type=="tool_calls"&&__classPrivateFieldGet$1(this,_AssistantStream_currentToolCall,"f")&&(this._emit("toolCallDone",__classPrivateFieldGet$1(this,_AssistantStream_currentToolCall,"f")),__classPrivateFieldSet$1(this,_AssistantStream_currentToolCall,void 0,"f")),this._emit("runStepDone",s.data,c);break}},_AssistantStream_handleEvent=function a(s){__classPrivateFieldGet$1(this,_AssistantStream_events,"f").push(s),this._emit("event",s)},_AssistantStream_accumulateRunStep=function a(s){switch(s.event){case"thread.run.step.created":return __classPrivateFieldGet$1(this,_AssistantStream_runStepSnapshots,"f")[s.data.id]=s.data,s.data;case"thread.run.step.delta":let c=__classPrivateFieldGet$1(this,_AssistantStream_runStepSnapshots,"f")[s.data.id];if(!c)throw Error("Received a RunStepDelta before creation of a snapshot");let u=s.data;if(u.delta){const d=AssistantStream.accumulateDelta(c,u.delta);__classPrivateFieldGet$1(this,_AssistantStream_runStepSnapshots,"f")[s.data.id]=d}return __classPrivateFieldGet$1(this,_AssistantStream_runStepSnapshots,"f")[s.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":__classPrivateFieldGet$1(this,_AssistantStream_runStepSnapshots,"f")[s.data.id]=s.data;break}if(__classPrivateFieldGet$1(this,_AssistantStream_runStepSnapshots,"f")[s.data.id])return __classPrivateFieldGet$1(this,_AssistantStream_runStepSnapshots,"f")[s.data.id];throw new Error("No snapshot available")},_AssistantStream_accumulateMessage=function a(s,c){let u=[];switch(s.event){case"thread.message.created":return[s.data,u];case"thread.message.delta":if(!c)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let d=s.data;if(d.delta.content)for(const h of d.delta.content)if(h.index in c.content){let p=c.content[h.index];c.content[h.index]=__classPrivateFieldGet$1(this,_AssistantStream_instances,"m",_AssistantStream_accumulateContent).call(this,h,p)}else c.content[h.index]=h,u.push(h);return[c,u];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(c)return[c,u];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},_AssistantStream_accumulateContent=function a(s,c){return AssistantStream.accumulateDelta(c,s)},_AssistantStream_handleRun=function a(s){switch(__classPrivateFieldSet$1(this,_AssistantStream_currentRunSnapshot,s.data,"f"),s.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":__classPrivateFieldSet$1(this,_AssistantStream_finalRun,s.data,"f"),__classPrivateFieldGet$1(this,_AssistantStream_currentToolCall,"f")&&(this._emit("toolCallDone",__classPrivateFieldGet$1(this,_AssistantStream_currentToolCall,"f")),__classPrivateFieldSet$1(this,_AssistantStream_currentToolCall,void 0,"f"));break}};class Messages extends APIResource{create(s,c,u){return this._client.post(`/threads/${s}/messages`,{body:c,...u,headers:{"OpenAI-Beta":"assistants=v2",...u==null?void 0:u.headers}})}retrieve(s,c,u){return this._client.get(`/threads/${s}/messages/${c}`,{...u,headers:{"OpenAI-Beta":"assistants=v2",...u==null?void 0:u.headers}})}update(s,c,u,d){return this._client.post(`/threads/${s}/messages/${c}`,{body:u,...d,headers:{"OpenAI-Beta":"assistants=v2",...d==null?void 0:d.headers}})}list(s,c={},u){return isRequestOptions(c)?this.list(s,{},c):this._client.getAPIList(`/threads/${s}/messages`,MessagesPage,{query:c,...u,headers:{"OpenAI-Beta":"assistants=v2",...u==null?void 0:u.headers}})}del(s,c,u){return this._client.delete(`/threads/${s}/messages/${c}`,{...u,headers:{"OpenAI-Beta":"assistants=v2",...u==null?void 0:u.headers}})}}class MessagesPage extends CursorPage{}Messages.MessagesPage=MessagesPage;class Steps extends APIResource{retrieve(s,c,u,d={},h){return isRequestOptions(d)?this.retrieve(s,c,u,{},d):this._client.get(`/threads/${s}/runs/${c}/steps/${u}`,{query:d,...h,headers:{"OpenAI-Beta":"assistants=v2",...h==null?void 0:h.headers}})}list(s,c,u={},d){return isRequestOptions(u)?this.list(s,c,{},u):this._client.getAPIList(`/threads/${s}/runs/${c}/steps`,RunStepsPage,{query:u,...d,headers:{"OpenAI-Beta":"assistants=v2",...d==null?void 0:d.headers}})}}class RunStepsPage extends CursorPage{}Steps.RunStepsPage=RunStepsPage;let Runs$1=class extends APIResource{constructor(){super(...arguments),this.steps=new Steps(this._client)}create(a,s,c){const{include:u,...d}=s;return this._client.post(`/threads/${a}/runs`,{query:{include:u},body:d,...c,headers:{"OpenAI-Beta":"assistants=v2",...c==null?void 0:c.headers},stream:s.stream??!1})}retrieve(a,s,c){return this._client.get(`/threads/${a}/runs/${s}`,{...c,headers:{"OpenAI-Beta":"assistants=v2",...c==null?void 0:c.headers}})}update(a,s,c,u){return this._client.post(`/threads/${a}/runs/${s}`,{body:c,...u,headers:{"OpenAI-Beta":"assistants=v2",...u==null?void 0:u.headers}})}list(a,s={},c){return isRequestOptions(s)?this.list(a,{},s):this._client.getAPIList(`/threads/${a}/runs`,RunsPage,{query:s,...c,headers:{"OpenAI-Beta":"assistants=v2",...c==null?void 0:c.headers}})}cancel(a,s,c){return this._client.post(`/threads/${a}/runs/${s}/cancel`,{...c,headers:{"OpenAI-Beta":"assistants=v2",...c==null?void 0:c.headers}})}async createAndPoll(a,s,c){const u=await this.create(a,s,c);return await this.poll(a,u.id,c)}createAndStream(a,s,c){return AssistantStream.createAssistantStream(a,this._client.beta.threads.runs,s,c)}async poll(a,s,c){const u={...c==null?void 0:c.headers,"X-Stainless-Poll-Helper":"true"};for((c==null?void 0:c.pollIntervalMs)&&(u["X-Stainless-Custom-Poll-Interval"]=c.pollIntervalMs.toString());;){const{data:d,response:h}=await this.retrieve(a,s,{...c,headers:{...c==null?void 0:c.headers,...u}}).withResponse();switch(d.status){case"queued":case"in_progress":case"cancelling":let p=5e3;if(c!=null&&c.pollIntervalMs)p=c.pollIntervalMs;else{const m=h.headers.get("openai-poll-after-ms");if(m){const f=parseInt(m);isNaN(f)||(p=f)}}await sleep(p);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return d}}}stream(a,s,c){return AssistantStream.createAssistantStream(a,this._client.beta.threads.runs,s,c)}submitToolOutputs(a,s,c,u){return this._client.post(`/threads/${a}/runs/${s}/submit_tool_outputs`,{body:c,...u,headers:{"OpenAI-Beta":"assistants=v2",...u==null?void 0:u.headers},stream:c.stream??!1})}async submitToolOutputsAndPoll(a,s,c,u){const d=await this.submitToolOutputs(a,s,c,u);return await this.poll(a,d.id,u)}submitToolOutputsStream(a,s,c,u){return AssistantStream.createToolAssistantStream(a,s,this._client.beta.threads.runs,c,u)}};class RunsPage extends CursorPage{}Runs$1.RunsPage=RunsPage,Runs$1.Steps=Steps,Runs$1.RunStepsPage=RunStepsPage;class Threads extends APIResource{constructor(){super(...arguments),this.runs=new Runs$1(this._client),this.messages=new Messages(this._client)}create(s={},c){return isRequestOptions(s)?this.create({},s):this._client.post("/threads",{body:s,...c,headers:{"OpenAI-Beta":"assistants=v2",...c==null?void 0:c.headers}})}retrieve(s,c){return this._client.get(`/threads/${s}`,{...c,headers:{"OpenAI-Beta":"assistants=v2",...c==null?void 0:c.headers}})}update(s,c,u){return this._client.post(`/threads/${s}`,{body:c,...u,headers:{"OpenAI-Beta":"assistants=v2",...u==null?void 0:u.headers}})}del(s,c){return this._client.delete(`/threads/${s}`,{...c,headers:{"OpenAI-Beta":"assistants=v2",...c==null?void 0:c.headers}})}createAndRun(s,c){return this._client.post("/threads/runs",{body:s,...c,headers:{"OpenAI-Beta":"assistants=v2",...c==null?void 0:c.headers},stream:s.stream??!1})}async createAndRunPoll(s,c){const u=await this.createAndRun(s,c);return await this.runs.poll(u.thread_id,u.id,c)}createAndRunStream(s,c){return AssistantStream.createThreadAssistantStream(s,this._client.beta.threads,c)}}Threads.Runs=Runs$1,Threads.RunsPage=RunsPage,Threads.Messages=Messages,Threads.MessagesPage=MessagesPage;class Beta extends APIResource{constructor(){super(...arguments),this.realtime=new Realtime(this._client),this.chat=new Chat(this._client),this.assistants=new Assistants(this._client),this.threads=new Threads(this._client)}}Beta.Realtime=Realtime,Beta.Assistants=Assistants,Beta.AssistantsPage=AssistantsPage,Beta.Threads=Threads;class Completions extends APIResource{create(s,c){return this._client.post("/completions",{body:s,...c,stream:s.stream??!1})}}class Embeddings extends APIResource{create(s,c){const u=!!s.encoding_format;let d=u?s.encoding_format:"base64";u&&debug("Request","User defined encoding_format:",s.encoding_format);const h=this._client.post("/embeddings",{body:{...s,encoding_format:d},...c});return u?h:(debug("response","Decoding base64 embeddings to float32 array"),h._thenUnwrap(p=>(p&&p.data&&p.data.forEach(m=>{const f=m.embedding;m.embedding=toFloat32Array(f)}),p)))}}class OutputItems extends APIResource{retrieve(s,c,u,d){return this._client.get(`/evals/${s}/runs/${c}/output_items/${u}`,d)}list(s,c,u={},d){return isRequestOptions(u)?this.list(s,c,{},u):this._client.getAPIList(`/evals/${s}/runs/${c}/output_items`,OutputItemListResponsesPage,{query:u,...d})}}class OutputItemListResponsesPage extends CursorPage{}OutputItems.OutputItemListResponsesPage=OutputItemListResponsesPage;class Runs extends APIResource{constructor(){super(...arguments),this.outputItems=new OutputItems(this._client)}create(s,c,u){return this._client.post(`/evals/${s}/runs`,{body:c,...u})}retrieve(s,c,u){return this._client.get(`/evals/${s}/runs/${c}`,u)}list(s,c={},u){return isRequestOptions(c)?this.list(s,{},c):this._client.getAPIList(`/evals/${s}/runs`,RunListResponsesPage,{query:c,...u})}del(s,c,u){return this._client.delete(`/evals/${s}/runs/${c}`,u)}cancel(s,c,u){return this._client.post(`/evals/${s}/runs/${c}`,u)}}class RunListResponsesPage extends CursorPage{}Runs.RunListResponsesPage=RunListResponsesPage,Runs.OutputItems=OutputItems,Runs.OutputItemListResponsesPage=OutputItemListResponsesPage;class Evals extends APIResource{constructor(){super(...arguments),this.runs=new Runs(this._client)}create(s,c){return this._client.post("/evals",{body:s,...c})}retrieve(s,c){return this._client.get(`/evals/${s}`,c)}update(s,c,u){return this._client.post(`/evals/${s}`,{body:c,...u})}list(s={},c){return isRequestOptions(s)?this.list({},s):this._client.getAPIList("/evals",EvalListResponsesPage,{query:s,...c})}del(s,c){return this._client.delete(`/evals/${s}`,c)}}class EvalListResponsesPage extends CursorPage{}Evals.EvalListResponsesPage=EvalListResponsesPage,Evals.Runs=Runs,Evals.RunListResponsesPage=RunListResponsesPage;let Files$1=class extends APIResource{create(a,s){return this._client.post("/files",multipartFormRequestOptions({body:a,...s}))}retrieve(a,s){return this._client.get(`/files/${a}`,s)}list(a={},s){return isRequestOptions(a)?this.list({},a):this._client.getAPIList("/files",FileObjectsPage,{query:a,...s})}del(a,s){return this._client.delete(`/files/${a}`,s)}content(a,s){return this._client.get(`/files/${a}/content`,{...s,headers:{Accept:"application/binary",...s==null?void 0:s.headers},__binaryResponse:!0})}retrieveContent(a,s){return this._client.get(`/files/${a}/content`,s)}async waitForProcessing(a,{pollInterval:s=5e3,maxWait:c=30*60*1e3}={}){const u=new Set(["processed","error","deleted"]),d=Date.now();let h=await this.retrieve(a);for(;!h.status||!u.has(h.status);)if(await sleep(s),h=await this.retrieve(a),Date.now()-d>c)throw new APIConnectionTimeoutError({message:`Giving up on waiting for file ${a} to finish processing after ${c} milliseconds.`});return h}};class FileObjectsPage extends CursorPage{}Files$1.FileObjectsPage=FileObjectsPage;class Permissions extends APIResource{create(s,c,u){return this._client.getAPIList(`/fine_tuning/checkpoints/${s}/permissions`,PermissionCreateResponsesPage,{body:c,method:"post",...u})}retrieve(s,c={},u){return isRequestOptions(c)?this.retrieve(s,{},c):this._client.get(`/fine_tuning/checkpoints/${s}/permissions`,{query:c,...u})}del(s,c){return this._client.delete(`/fine_tuning/checkpoints/${s}/permissions`,c)}}class PermissionCreateResponsesPage extends Page{}Permissions.PermissionCreateResponsesPage=PermissionCreateResponsesPage;let Checkpoints$1=class extends APIResource{constructor(){super(...arguments),this.permissions=new Permissions(this._client)}};Checkpoints$1.Permissions=Permissions,Checkpoints$1.PermissionCreateResponsesPage=PermissionCreateResponsesPage;class Checkpoints extends APIResource{list(s,c={},u){return isRequestOptions(c)?this.list(s,{},c):this._client.getAPIList(`/fine_tuning/jobs/${s}/checkpoints`,FineTuningJobCheckpointsPage,{query:c,...u})}}class FineTuningJobCheckpointsPage extends CursorPage{}Checkpoints.FineTuningJobCheckpointsPage=FineTuningJobCheckpointsPage;class Jobs extends APIResource{constructor(){super(...arguments),this.checkpoints=new Checkpoints(this._client)}create(s,c){return this._client.post("/fine_tuning/jobs",{body:s,...c})}retrieve(s,c){return this._client.get(`/fine_tuning/jobs/${s}`,c)}list(s={},c){return isRequestOptions(s)?this.list({},s):this._client.getAPIList("/fine_tuning/jobs",FineTuningJobsPage,{query:s,...c})}cancel(s,c){return this._client.post(`/fine_tuning/jobs/${s}/cancel`,c)}listEvents(s,c={},u){return isRequestOptions(c)?this.listEvents(s,{},c):this._client.getAPIList(`/fine_tuning/jobs/${s}/events`,FineTuningJobEventsPage,{query:c,...u})}}class FineTuningJobsPage extends CursorPage{}class FineTuningJobEventsPage extends CursorPage{}Jobs.FineTuningJobsPage=FineTuningJobsPage,Jobs.FineTuningJobEventsPage=FineTuningJobEventsPage,Jobs.Checkpoints=Checkpoints,Jobs.FineTuningJobCheckpointsPage=FineTuningJobCheckpointsPage;class FineTuning extends APIResource{constructor(){super(...arguments),this.jobs=new Jobs(this._client),this.checkpoints=new Checkpoints$1(this._client)}}FineTuning.Jobs=Jobs,FineTuning.FineTuningJobsPage=FineTuningJobsPage,FineTuning.FineTuningJobEventsPage=FineTuningJobEventsPage,FineTuning.Checkpoints=Checkpoints$1;class Images extends APIResource{createVariation(s,c){return this._client.post("/images/variations",multipartFormRequestOptions({body:s,...c}))}edit(s,c){return this._client.post("/images/edits",multipartFormRequestOptions({body:s,...c}))}generate(s,c){return this._client.post("/images/generations",{body:s,...c})}}class Models extends APIResource{retrieve(s,c){return this._client.get(`/models/${s}`,c)}list(s){return this._client.getAPIList("/models",ModelsPage,s)}del(s,c){return this._client.delete(`/models/${s}`,c)}}class ModelsPage extends Page{}Models.ModelsPage=ModelsPage;class Moderations extends APIResource{create(s,c){return this._client.post("/moderations",{body:s,...c})}}function maybeParseResponse(a,s){return!s||!hasAutoParseableInput(s)?{...a,output_parsed:null,output:a.output.map(c=>c.type==="function_call"?{...c,parsed_arguments:null}:c.type==="message"?{...c,content:c.content.map(u=>({...u,parsed:null}))}:c)}:parseResponse(a,s)}function parseResponse(a,s){const c=a.output.map(d=>{if(d.type==="function_call")return{...d,parsed_arguments:parseToolCall(s,d)};if(d.type==="message"){const h=d.content.map(p=>p.type==="output_text"?{...p,parsed:parseTextFormat(s,p.text)}:p);return{...d,content:h}}return d}),u=Object.assign({},a,{output:c});return Object.getOwnPropertyDescriptor(a,"output_text")||addOutputText(u),Object.defineProperty(u,"output_parsed",{enumerable:!0,get(){for(const d of u.output)if(d.type==="message"){for(const h of d.content)if(h.type==="output_text"&&h.parsed!==null)return h.parsed}return null}}),u}function parseTextFormat(a,s){var c,u,d,h;return((u=(c=a.text)==null?void 0:c.format)==null?void 0:u.type)!=="json_schema"?null:"$parseRaw"in((d=a.text)==null?void 0:d.format)?((h=a.text)==null?void 0:h.format).$parseRaw(s):JSON.parse(s)}function hasAutoParseableInput(a){var s;return!!isAutoParsableResponseFormat((s=a.text)==null?void 0:s.format)}function isAutoParsableTool(a){return(a==null?void 0:a.$brand)==="auto-parseable-tool"}function getInputToolByName(a,s){return a.find(c=>c.type==="function"&&c.name===s)}function parseToolCall(a,s){const c=getInputToolByName(a.tools??[],s.name);return{...s,...s,parsed_arguments:isAutoParsableTool(c)?c.$parseRaw(s.arguments):c!=null&&c.strict?JSON.parse(s.arguments):null}}function addOutputText(a){const s=[];for(const c of a.output)if(c.type==="message")for(const u of c.content)u.type==="output_text"&&s.push(u.text);a.output_text=s.join("")}class InputItems extends APIResource{list(s,c={},u){return isRequestOptions(c)?this.list(s,{},c):this._client.getAPIList(`/responses/${s}/input_items`,ResponseItemsPage,{query:c,...u})}}var __classPrivateFieldSet=function(a,s,c,u,d){if(u==="m")throw new TypeError("Private method is not writable");if(u==="a"&&!d)throw new TypeError("Private accessor was defined without a setter");if(typeof s=="function"?a!==s||!d:!s.has(a))throw new TypeError("Cannot write private member to an object whose class did not declare it");return u==="a"?d.call(a,c):d?d.value=c:s.set(a,c),c},__classPrivateFieldGet=function(a,s,c,u){if(c==="a"&&!u)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?a!==s||!u:!s.has(a))throw new TypeError("Cannot read private member from an object whose class did not declare it");return c==="m"?u:c==="a"?u.call(a):u?u.value:s.get(a)},_ResponseStream_instances,_ResponseStream_params,_ResponseStream_currentResponseSnapshot,_ResponseStream_finalResponse,_ResponseStream_beginRequest,_ResponseStream_addEvent,_ResponseStream_endRequest,_ResponseStream_accumulateResponse;class ResponseStream extends EventStream{constructor(s){super(),_ResponseStream_instances.add(this),_ResponseStream_params.set(this,void 0),_ResponseStream_currentResponseSnapshot.set(this,void 0),_ResponseStream_finalResponse.set(this,void 0),__classPrivateFieldSet(this,_ResponseStream_params,s,"f")}static createResponse(s,c,u){const d=new ResponseStream(c);return d._run(()=>d._createResponse(s,c,{...u,headers:{...u==null?void 0:u.headers,"X-Stainless-Helper-Method":"stream"}})),d}async _createResponse(s,c,u){var p;const d=u==null?void 0:u.signal;d&&(d.aborted&&this.controller.abort(),d.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet(this,_ResponseStream_instances,"m",_ResponseStream_beginRequest).call(this);const h=await s.responses.create({...c,stream:!0},{...u,signal:this.controller.signal});this._connected();for await(const m of h)__classPrivateFieldGet(this,_ResponseStream_instances,"m",_ResponseStream_addEvent).call(this,m);if((p=h.controller.signal)!=null&&p.aborted)throw new APIUserAbortError;return __classPrivateFieldGet(this,_ResponseStream_instances,"m",_ResponseStream_endRequest).call(this)}[(_ResponseStream_params=new WeakMap,_ResponseStream_currentResponseSnapshot=new WeakMap,_ResponseStream_finalResponse=new WeakMap,_ResponseStream_instances=new WeakSet,_ResponseStream_beginRequest=function(){this.ended||__classPrivateFieldSet(this,_ResponseStream_currentResponseSnapshot,void 0,"f")},_ResponseStream_addEvent=function(s){if(this.ended)return;const c=__classPrivateFieldGet(this,_ResponseStream_instances,"m",_ResponseStream_accumulateResponse).call(this,s);switch(this._emit("event",s),s.type){case"response.output_text.delta":{const u=c.output[s.output_index];if(!u)throw new OpenAIError(`missing output at index ${s.output_index}`);if(u.type==="message"){const d=u.content[s.content_index];if(!d)throw new OpenAIError(`missing content at index ${s.content_index}`);if(d.type!=="output_text")throw new OpenAIError(`expected content to be 'output_text', got ${d.type}`);this._emit("response.output_text.delta",{...s,snapshot:d.text})}break}case"response.function_call_arguments.delta":{const u=c.output[s.output_index];if(!u)throw new OpenAIError(`missing output at index ${s.output_index}`);u.type==="function_call"&&this._emit("response.function_call_arguments.delta",{...s,snapshot:u.arguments});break}default:this._emit(s.type,s);break}},_ResponseStream_endRequest=function(){if(this.ended)throw new OpenAIError("stream has ended, this shouldn't happen");const s=__classPrivateFieldGet(this,_ResponseStream_currentResponseSnapshot,"f");if(!s)throw new OpenAIError("request ended without sending any events");__classPrivateFieldSet(this,_ResponseStream_currentResponseSnapshot,void 0,"f");const c=finalizeResponse(s,__classPrivateFieldGet(this,_ResponseStream_params,"f"));return __classPrivateFieldSet(this,_ResponseStream_finalResponse,c,"f"),c},_ResponseStream_accumulateResponse=function(s){let c=__classPrivateFieldGet(this,_ResponseStream_currentResponseSnapshot,"f");if(!c){if(s.type!=="response.created")throw new OpenAIError(`When snapshot hasn't been set yet, expected 'response.created' event, got ${s.type}`);return c=__classPrivateFieldSet(this,_ResponseStream_currentResponseSnapshot,s.response,"f"),c}switch(s.type){case"response.output_item.added":{c.output.push(s.item);break}case"response.content_part.added":{const u=c.output[s.output_index];if(!u)throw new OpenAIError(`missing output at index ${s.output_index}`);u.type==="message"&&u.content.push(s.part);break}case"response.output_text.delta":{const u=c.output[s.output_index];if(!u)throw new OpenAIError(`missing output at index ${s.output_index}`);if(u.type==="message"){const d=u.content[s.content_index];if(!d)throw new OpenAIError(`missing content at index ${s.content_index}`);if(d.type!=="output_text")throw new OpenAIError(`expected content to be 'output_text', got ${d.type}`);d.text+=s.delta}break}case"response.function_call_arguments.delta":{const u=c.output[s.output_index];if(!u)throw new OpenAIError(`missing output at index ${s.output_index}`);u.type==="function_call"&&(u.arguments+=s.delta);break}case"response.completed":{__classPrivateFieldSet(this,_ResponseStream_currentResponseSnapshot,s.response,"f");break}}return c},Symbol.asyncIterator)](){const s=[],c=[];let u=!1;return this.on("event",d=>{const h=c.shift();h?h.resolve(d):s.push(d)}),this.on("end",()=>{u=!0;for(const d of c)d.resolve(void 0);c.length=0}),this.on("abort",d=>{u=!0;for(const h of c)h.reject(d);c.length=0}),this.on("error",d=>{u=!0;for(const h of c)h.reject(d);c.length=0}),{next:async()=>s.length?{value:s.shift(),done:!1}:u?{value:void 0,done:!0}:new Promise((d,h)=>c.push({resolve:d,reject:h})).then(d=>d?{value:d,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const s=__classPrivateFieldGet(this,_ResponseStream_finalResponse,"f");if(!s)throw new OpenAIError("stream ended without producing a ChatCompletion");return s}}function finalizeResponse(a,s){return maybeParseResponse(a,s)}class Responses extends APIResource{constructor(){super(...arguments),this.inputItems=new InputItems(this._client)}create(s,c){return this._client.post("/responses",{body:s,...c,stream:s.stream??!1})._thenUnwrap(u=>("object"in u&&u.object==="response"&&addOutputText(u),u))}retrieve(s,c={},u){return isRequestOptions(c)?this.retrieve(s,{},c):this._client.get(`/responses/${s}`,{query:c,...u})}del(s,c){return this._client.delete(`/responses/${s}`,{...c,headers:{Accept:"*/*",...c==null?void 0:c.headers}})}parse(s,c){return this._client.responses.create(s,c)._thenUnwrap(u=>parseResponse(u,s))}stream(s,c){return ResponseStream.createResponse(this._client,s,c)}}class ResponseItemsPage extends CursorPage{}Responses.InputItems=InputItems;class Parts extends APIResource{create(s,c,u){return this._client.post(`/uploads/${s}/parts`,multipartFormRequestOptions({body:c,...u}))}}class Uploads extends APIResource{constructor(){super(...arguments),this.parts=new Parts(this._client)}create(s,c){return this._client.post("/uploads",{body:s,...c})}cancel(s,c){return this._client.post(`/uploads/${s}/cancel`,c)}complete(s,c,u){return this._client.post(`/uploads/${s}/complete`,{body:c,...u})}}Uploads.Parts=Parts;const allSettledWithThrow=async a=>{const s=await Promise.allSettled(a),c=s.filter(d=>d.status==="rejected");if(c.length){for(const d of c)console.error(d.reason);throw new Error(`${c.length} promise(s) failed - see the above errors`)}const u=[];for(const d of s)d.status==="fulfilled"&&u.push(d.value);return u};class Files extends APIResource{create(s,c,u){return this._client.post(`/vector_stores/${s}/files`,{body:c,...u,headers:{"OpenAI-Beta":"assistants=v2",...u==null?void 0:u.headers}})}retrieve(s,c,u){return this._client.get(`/vector_stores/${s}/files/${c}`,{...u,headers:{"OpenAI-Beta":"assistants=v2",...u==null?void 0:u.headers}})}update(s,c,u,d){return this._client.post(`/vector_stores/${s}/files/${c}`,{body:u,...d,headers:{"OpenAI-Beta":"assistants=v2",...d==null?void 0:d.headers}})}list(s,c={},u){return isRequestOptions(c)?this.list(s,{},c):this._client.getAPIList(`/vector_stores/${s}/files`,VectorStoreFilesPage,{query:c,...u,headers:{"OpenAI-Beta":"assistants=v2",...u==null?void 0:u.headers}})}del(s,c,u){return this._client.delete(`/vector_stores/${s}/files/${c}`,{...u,headers:{"OpenAI-Beta":"assistants=v2",...u==null?void 0:u.headers}})}async createAndPoll(s,c,u){const d=await this.create(s,c,u);return await this.poll(s,d.id,u)}async poll(s,c,u){const d={...u==null?void 0:u.headers,"X-Stainless-Poll-Helper":"true"};for((u==null?void 0:u.pollIntervalMs)&&(d["X-Stainless-Custom-Poll-Interval"]=u.pollIntervalMs.toString());;){const h=await this.retrieve(s,c,{...u,headers:d}).withResponse(),p=h.data;switch(p.status){case"in_progress":let m=5e3;if(u!=null&&u.pollIntervalMs)m=u.pollIntervalMs;else{const f=h.response.headers.get("openai-poll-after-ms");if(f){const _=parseInt(f);isNaN(_)||(m=_)}}await sleep(m);break;case"failed":case"completed":return p}}}async upload(s,c,u){const d=await this._client.files.create({file:c,purpose:"assistants"},u);return this.create(s,{file_id:d.id},u)}async uploadAndPoll(s,c,u){const d=await this.upload(s,c,u);return await this.poll(s,d.id,u)}content(s,c,u){return this._client.getAPIList(`/vector_stores/${s}/files/${c}/content`,FileContentResponsesPage,{...u,headers:{"OpenAI-Beta":"assistants=v2",...u==null?void 0:u.headers}})}}class VectorStoreFilesPage extends CursorPage{}class FileContentResponsesPage extends Page{}Files.VectorStoreFilesPage=VectorStoreFilesPage,Files.FileContentResponsesPage=FileContentResponsesPage;class FileBatches extends APIResource{create(s,c,u){return this._client.post(`/vector_stores/${s}/file_batches`,{body:c,...u,headers:{"OpenAI-Beta":"assistants=v2",...u==null?void 0:u.headers}})}retrieve(s,c,u){return this._client.get(`/vector_stores/${s}/file_batches/${c}`,{...u,headers:{"OpenAI-Beta":"assistants=v2",...u==null?void 0:u.headers}})}cancel(s,c,u){return this._client.post(`/vector_stores/${s}/file_batches/${c}/cancel`,{...u,headers:{"OpenAI-Beta":"assistants=v2",...u==null?void 0:u.headers}})}async createAndPoll(s,c,u){const d=await this.create(s,c);return await this.poll(s,d.id,u)}listFiles(s,c,u={},d){return isRequestOptions(u)?this.listFiles(s,c,{},u):this._client.getAPIList(`/vector_stores/${s}/file_batches/${c}/files`,VectorStoreFilesPage,{query:u,...d,headers:{"OpenAI-Beta":"assistants=v2",...d==null?void 0:d.headers}})}async poll(s,c,u){const d={...u==null?void 0:u.headers,"X-Stainless-Poll-Helper":"true"};for((u==null?void 0:u.pollIntervalMs)&&(d["X-Stainless-Custom-Poll-Interval"]=u.pollIntervalMs.toString());;){const{data:h,response:p}=await this.retrieve(s,c,{...u,headers:d}).withResponse();switch(h.status){case"in_progress":let m=5e3;if(u!=null&&u.pollIntervalMs)m=u.pollIntervalMs;else{const f=p.headers.get("openai-poll-after-ms");if(f){const _=parseInt(f);isNaN(_)||(m=_)}}await sleep(m);break;case"failed":case"cancelled":case"completed":return h}}}async uploadAndPoll(s,{files:c,fileIds:u=[]},d){if(c==null||c.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const h=(d==null?void 0:d.maxConcurrency)??5,p=Math.min(h,c.length),m=this._client,f=c.values(),_=[...u];async function y(b){for(let T of b){const A=await m.files.create({file:T,purpose:"assistants"},d);_.push(A.id)}}const E=Array(p).fill(f).map(y);return await allSettledWithThrow(E),await this.createAndPoll(s,{file_ids:_})}}class VectorStores extends APIResource{constructor(){super(...arguments),this.files=new Files(this._client),this.fileBatches=new FileBatches(this._client)}create(s,c){return this._client.post("/vector_stores",{body:s,...c,headers:{"OpenAI-Beta":"assistants=v2",...c==null?void 0:c.headers}})}retrieve(s,c){return this._client.get(`/vector_stores/${s}`,{...c,headers:{"OpenAI-Beta":"assistants=v2",...c==null?void 0:c.headers}})}update(s,c,u){return this._client.post(`/vector_stores/${s}`,{body:c,...u,headers:{"OpenAI-Beta":"assistants=v2",...u==null?void 0:u.headers}})}list(s={},c){return isRequestOptions(s)?this.list({},s):this._client.getAPIList("/vector_stores",VectorStoresPage,{query:s,...c,headers:{"OpenAI-Beta":"assistants=v2",...c==null?void 0:c.headers}})}del(s,c){return this._client.delete(`/vector_stores/${s}`,{...c,headers:{"OpenAI-Beta":"assistants=v2",...c==null?void 0:c.headers}})}search(s,c,u){return this._client.getAPIList(`/vector_stores/${s}/search`,VectorStoreSearchResponsesPage,{body:c,method:"post",...u,headers:{"OpenAI-Beta":"assistants=v2",...u==null?void 0:u.headers}})}}class VectorStoresPage extends CursorPage{}class VectorStoreSearchResponsesPage extends Page{}VectorStores.VectorStoresPage=VectorStoresPage,VectorStores.VectorStoreSearchResponsesPage=VectorStoreSearchResponsesPage,VectorStores.Files=Files,VectorStores.VectorStoreFilesPage=VectorStoreFilesPage,VectorStores.FileContentResponsesPage=FileContentResponsesPage,VectorStores.FileBatches=FileBatches;var _a;class OpenAI extends APIClient{constructor({baseURL:s=readEnv("OPENAI_BASE_URL"),apiKey:c=readEnv("OPENAI_API_KEY"),organization:u=readEnv("OPENAI_ORG_ID")??null,project:d=readEnv("OPENAI_PROJECT_ID")??null,...h}={}){if(c===void 0)throw new OpenAIError("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const p={apiKey:c,organization:u,project:d,...h,baseURL:s||"https://api.openai.com/v1"};if(!p.dangerouslyAllowBrowser&&isRunningInBrowser())throw new OpenAIError(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:p.baseURL,timeout:p.timeout??6e5,httpAgent:p.httpAgent,maxRetries:p.maxRetries,fetch:p.fetch}),this.completions=new Completions(this),this.chat=new Chat$1(this),this.embeddings=new Embeddings(this),this.files=new Files$1(this),this.images=new Images(this),this.audio=new Audio(this),this.moderations=new Moderations(this),this.models=new Models(this),this.fineTuning=new FineTuning(this),this.vectorStores=new VectorStores(this),this.beta=new Beta(this),this.batches=new Batches(this),this.uploads=new Uploads(this),this.responses=new Responses(this),this.evals=new Evals(this),this._options=p,this.apiKey=c,this.organization=u,this.project=d}defaultQuery(){return this._options.defaultQuery}defaultHeaders(s){return{...super.defaultHeaders(s),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(s){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(s){return stringify(s,{arrayFormat:"brackets"})}}_a=OpenAI,OpenAI.OpenAI=_a,OpenAI.DEFAULT_TIMEOUT=6e5,OpenAI.OpenAIError=OpenAIError,OpenAI.APIError=APIError,OpenAI.APIConnectionError=APIConnectionError,OpenAI.APIConnectionTimeoutError=APIConnectionTimeoutError,OpenAI.APIUserAbortError=APIUserAbortError,OpenAI.NotFoundError=NotFoundError,OpenAI.ConflictError=ConflictError,OpenAI.RateLimitError=RateLimitError,OpenAI.BadRequestError=BadRequestError,OpenAI.AuthenticationError=AuthenticationError,OpenAI.InternalServerError=InternalServerError,OpenAI.PermissionDeniedError=PermissionDeniedError,OpenAI.UnprocessableEntityError=UnprocessableEntityError,OpenAI.toFile=toFile,OpenAI.fileFromPath=fileFromPath,OpenAI.Completions=Completions,OpenAI.Chat=Chat$1,OpenAI.ChatCompletionsPage=ChatCompletionsPage,OpenAI.Embeddings=Embeddings,OpenAI.Files=Files$1,OpenAI.FileObjectsPage=FileObjectsPage,OpenAI.Images=Images,OpenAI.Audio=Audio,OpenAI.Moderations=Moderations,OpenAI.Models=Models,OpenAI.ModelsPage=ModelsPage,OpenAI.FineTuning=FineTuning,OpenAI.VectorStores=VectorStores,OpenAI.VectorStoresPage=VectorStoresPage,OpenAI.VectorStoreSearchResponsesPage=VectorStoreSearchResponsesPage,OpenAI.Beta=Beta,OpenAI.Batches=Batches,OpenAI.BatchesPage=BatchesPage,OpenAI.Uploads=Uploads,OpenAI.Responses=Responses,OpenAI.Evals=Evals,OpenAI.EvalListResponsesPage=EvalListResponsesPage;function wrapOpenAIClientError(a){let s;return a.constructor.name===APIConnectionTimeoutError.name?(s=new Error(a.message),s.name="TimeoutError"):a.constructor.name===APIUserAbortError.name?(s=new Error(a.message),s.name="AbortError"):s=a,s}class CustomAIMessageChunk{constructor(s){Re(this,"content");Re(this,"name");Re(this,"additional_kwargs");s.additional_kwargs||(s.additional_kwargs={}),this.name=s.name,this.content=s.content,this.additional_kwargs=s.additional_kwargs}static _mergeAdditionalKwargs(s,c){const u={...s};for(const[d,h]of Object.entries(c))if(u[d]===void 0)u[d]=h;else if(typeof u[d]=="string")u[d]=u[d]+h;else if(!Array.isArray(u[d])&&typeof u[d]=="object")u[d]=this._mergeAdditionalKwargs(u[d],h);else throw new Error(`additional_kwargs[${d}] already exists in this message chunk.`);return u}concat(s){return new CustomAIMessageChunk({content:this.content+s.content,additional_kwargs:CustomAIMessageChunk._mergeAdditionalKwargs(this.additional_kwargs,s.additional_kwargs)})}}function extractGenericMessageCustomRole(a){return a.role!=="system"&&a.role!=="assistant"&&a.role!=="user"&&a.role!=="function"&&a.role!=="tool"&&console.warn(`Unknown message role: ${a.role}`),a.role}function messageToOpenAIRole(a){const s=a._getType();switch(s){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":{if(!ChatMessage.isInstance(a))throw new Error("Invalid generic chat message");return extractGenericMessageCustomRole(a)}default:return s}}function openAIResponseToChatMessage(a){switch(a.role){case"assistant":return new AIMessage(a.content||"",{});default:return new ChatMessage(a.content||"",a.role??"unknown")}}function _convertDeltaToMessageChunk(a,s){const c=a.role??s,u=a.content??"",d=(a==null?void 0:a.reasoning_content)??void 0;let h;return a.function_call?h={function_call:a.function_call}:a.tool_calls?h={tool_calls:a.tool_calls}:h={},c==="user"?new HumanMessageChunk({content:u}):c==="assistant"?new CustomAIMessageChunk({content:u,additional_kwargs:{...h,reasoning_content:d}}):c==="system"?new SystemMessageChunk({content:u}):c==="function"?new FunctionMessageChunk({content:u,additional_kwargs:h,name:a.name}):c==="tool"?new ToolMessageChunk({content:u,additional_kwargs:h,tool_call_id:a.tool_call_id}):new ChatMessageChunk({content:u,role:c})}function convertMessagesToOpenAIParams(a){return a.map(s=>{const c={role:messageToOpenAIRole(s),content:s.content};return s.name!=null&&(c.name=s.name),c})}class CustomChatOpenAI extends BaseChatModel{constructor(c,u){var d,h,p,m,f,_,y;super(c??{});Re(this,"temperature",1);Re(this,"topP",1);Re(this,"frequencyPenalty",0);Re(this,"presencePenalty",0);Re(this,"n",1);Re(this,"logitBias");Re(this,"modelName","gpt-3.5-turbo");Re(this,"model","gpt-3.5-turbo");Re(this,"modelKwargs");Re(this,"stop");Re(this,"stopSequences");Re(this,"user");Re(this,"timeout");Re(this,"streaming",!1);Re(this,"streamUsage",!0);Re(this,"maxTokens");Re(this,"logprobs");Re(this,"topLogprobs");Re(this,"openAIApiKey");Re(this,"apiKey");Re(this,"azureOpenAIApiVersion");Re(this,"azureOpenAIApiKey");Re(this,"azureADTokenProvider");Re(this,"azureOpenAIApiInstanceName");Re(this,"azureOpenAIApiDeploymentName");Re(this,"azureOpenAIBasePath");Re(this,"organization");Re(this,"reasoning_effort");Re(this,"client");Re(this,"clientConfig");Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topLogprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=(c==null?void 0:c.openAIApiKey)??getEnvironmentVariable$1("OPENAI_API_KEY"),this.modelName=(c==null?void 0:c.modelName)??this.modelName,this.modelKwargs=(c==null?void 0:c.modelKwargs)??{},this.timeout=c==null?void 0:c.timeout,this.temperature=(c==null?void 0:c.temperature)??this.temperature,this.topP=(c==null?void 0:c.topP)??this.topP,this.frequencyPenalty=(c==null?void 0:c.frequencyPenalty)??this.frequencyPenalty,this.presencePenalty=(c==null?void 0:c.presencePenalty)??this.presencePenalty,this.maxTokens=c==null?void 0:c.maxTokens,this.logprobs=c==null?void 0:c.logprobs,this.topLogprobs=c==null?void 0:c.topLogprobs,this.n=(c==null?void 0:c.n)??this.n,this.logitBias=c==null?void 0:c.logitBias,this.stop=c==null?void 0:c.stop,this.user=c==null?void 0:c.user,this.streaming=(c==null?void 0:c.streaming)??!1,this.reasoning_effort=(c==null?void 0:c.reasoning_effort)??null,this.clientConfig={apiKey:this.openAIApiKey,organization:this.organization,baseURL:(u==null?void 0:u.basePath)??((d=c==null?void 0:c.configuration)==null?void 0:d.basePath),dangerouslyAllowBrowser:!0,defaultHeaders:((h=u==null?void 0:u.baseOptions)==null?void 0:h.headers)??((m=(p=c==null?void 0:c.configuration)==null?void 0:p.baseOptions)==null?void 0:m.headers),defaultQuery:((f=u==null?void 0:u.baseOptions)==null?void 0:f.params)??((y=(_=c==null?void 0:c.configuration)==null?void 0:_.baseOptions)==null?void 0:y.params),...u,...c==null?void 0:c.configuration}}static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",azureOpenAIApiVersion:"azure_openai_api_version",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIApiInstanceName:"azure_openai_api_instance_name",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}invocationParams(c){function u(d){return d!==void 0&&d.every(h=>Array.isArray(h.lc_namespace))}return{model:this.modelName,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,max_tokens:this.maxTokens===-1?void 0:this.maxTokens,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:(c==null?void 0:c.stop)??this.stop,user:this.user,stream:this.streaming,functions:c==null?void 0:c.functions,function_call:c==null?void 0:c.function_call,tools:u(c==null?void 0:c.tools)?c==null?void 0:c.tools.map(convertToOpenAITool):c==null?void 0:c.tools,tool_choice:c==null?void 0:c.tool_choice,response_format:c==null?void 0:c.response_format,seed:c==null?void 0:c.seed,reasoning:this.reasoning_effort?{method:this.reasoning_effort}:void 0,...this.modelKwargs}}_identifyingParams(){return{model_name:this.modelName,...this==null?void 0:this.invocationParams(),...this.clientConfig}}async*_streamResponseChunks(c,u,d){var _;const h=convertMessagesToOpenAIParams(c),p={...this.invocationParams(u),messages:h,stream:!0};let m;const f=await this.completionWithRetry(p,u);for await(const y of f){const E=y==null?void 0:y.choices[0];if(!E)continue;const{delta:b}=E;if(!b)continue;const T=_convertDeltaToMessageChunk(b,m);m=b.role??m;const A={prompt:(u==null?void 0:u.promptIndex)??0,completion:E.index??0};if(typeof T.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}const v={...A};E.finish_reason!==void 0&&(v.finish_reason=E.finish_reason),this.logprobs&&(v.logprobs=E.logprobs);const S=new ChatGenerationChunk({message:T,text:T.content,generationInfo:v});yield S,d==null||d.handleLLMNewToken(S.text??"",A,void 0,void 0,void 0,{chunk:S})}if((_=u.signal)!=null&&_.aborted)throw new Error("AbortError")}identifyingParams(){return this._identifyingParams()}async _generate(c,u,d){var f,_;const h={},p=this.invocationParams(u),m=convertMessagesToOpenAIParams(c);if(p.stream){const y=this._streamResponseChunks(c,u,d),E={};for await(const O of y){O.message.response_metadata={...O.generationInfo,...O.message.response_metadata};const I=((f=O.generationInfo)==null?void 0:f.completion)??0;E[I]===void 0?E[I]=O:E[I]=E[I].concat(O)}const b=Object.entries(E).sort(([O],[I])=>parseInt(O,10)-parseInt(I,10)).map(([O,I])=>I),{functions:T,function_call:A}=this.invocationParams(u),v=await this.getEstimatedTokenCountFromPrompt(c,T,A),S=await this.getNumTokensFromGenerations(b);return h.promptTokens=v,h.completionTokens=S,h.totalTokens=v+S,{generations:b,llmOutput:{estimatedTokenUsage:h}}}else{const y=await this.completionWithRetry({...p,stream:!1,messages:m},{signal:u==null?void 0:u.signal,...u==null?void 0:u.options}),{completion_tokens:E,prompt_tokens:b,total_tokens:T}=(y==null?void 0:y.usage)??{};E&&(h.completionTokens=(h.completionTokens??0)+E),b&&(h.promptTokens=(h.promptTokens??0)+b),T&&(h.totalTokens=(h.totalTokens??0)+T);const A=[];for(const v of(y==null?void 0:y.choices)??[]){const S={text:((_=v.message)==null?void 0:_.content)??"",message:openAIResponseToChatMessage(v.message??{role:"assistant"})};S.generationInfo={...v.finish_reason?{finish_reason:v.finish_reason}:{},...v.logprobs?{logprobs:v.logprobs}:{}},A.push(S)}return{generations:A,llmOutput:{tokenUsage:h}}}}async getEstimatedTokenCountFromPrompt(c,u,d){let h=(await this.getNumTokensFromMessages(c)).totalCount;return u&&c.find(p=>p._getType()==="system")&&(h-=4),d==="none"?h+=1:typeof d=="object"&&(h+=await this.getNumTokens(d.name)+4),h}async getNumTokensFromGenerations(c){return(await Promise.all(c.map(async u=>{var d;return(d=u.message.additional_kwargs)!=null&&d.function_call?(await this.getNumTokensFromMessages([u.message])).countPerMessage[0]:await this.getNumTokens(u.message.content)}))).reduce((u,d)=>u+d,0)}async getNumTokensFromMessages(c){let u=0,d=0,h=0;this.modelName==="gpt-3.5-turbo-0301"?(d=4,h=-1):(d=3,h=1);const p=await Promise.all(c.map(async m=>{var T,A,v,S,O,I;const f=await this.getNumTokens(m.content),_=await this.getNumTokens(messageToOpenAIRole(m)),y=m.name!==void 0?h+await this.getNumTokens(m.name):0;let E=f+d+_+y;const b=m;if(b._getType()==="function"&&(E-=2),(T=b.additional_kwargs)!=null&&T.function_call&&(E+=3),(A=b==null?void 0:b.additional_kwargs.function_call)!=null&&A.name&&(E+=await this.getNumTokens((v=b.additional_kwargs.function_call)==null?void 0:v.name)),(S=b.additional_kwargs.function_call)==null?void 0:S.arguments)try{E+=await this.getNumTokens(JSON.stringify(JSON.parse((O=b.additional_kwargs.function_call)==null?void 0:O.arguments)))}catch(x){console.error("Error parsing function arguments",x,JSON.stringify(b.additional_kwargs.function_call)),E+=await this.getNumTokens((I=b.additional_kwargs.function_call)==null?void 0:I.arguments)}return u+=E,E}));return u+=3,{totalCount:u,countPerMessage:p}}async completionWithRetry(c,u){const d=this._getClientOptions(u);return this.caller.call(async()=>{try{return await this.client.chat.completions.create(c,d)}catch(h){throw wrapOpenAIClientError(h)}})}_getClientOptions(c){if(!this.client){const d={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,baseURL:this.clientConfig.baseURL},h=getEndpoint(d),p={...this.clientConfig,baseURL:h,timeout:this.timeout,maxRetries:0};p.baseURL||delete p.baseURL,this.client=new OpenAI(p)}const u={...this.clientConfig,...c};return this.azureOpenAIApiKey&&(u.headers={"api-key":this.azureOpenAIApiKey,...u.headers},u.query={"api-version":this.azureOpenAIApiVersion,...u.query}),u}_llmType(){return"openai"}_combineLLMOutput(...c){return c.reduce((u,d)=>(d&&d.tokenUsage&&(u.tokenUsage.completionTokens+=d.tokenUsage.completionTokens??0,u.tokenUsage.promptTokens+=d.tokenUsage.promptTokens??0,u.tokenUsage.totalTokens+=d.tokenUsage.totalTokens??0),u),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}withStructuredOutput(c,u){let d,h,p,m;isStructuredOutputMethodParams(c)?(d=c.schema,h=c.name,p=c.method,m=c.includeRaw):(d=c,h=u==null?void 0:u.name,p=u==null?void 0:u.method,m=u==null?void 0:u.includeRaw);let f,_;if(p==="jsonMode")f=this.bind({}),isZodSchema(d)?_=StructuredOutputParser.fromZodSchema(d):_=new JsonOutputParser;else{let T=h??"extract";typeof d.name=="string"&&typeof d.parameters=="object"&&d.parameters!=null?T=d.name:(d.title,d.description),f=this.bind({}),_=new JsonOutputKeyToolsParser({returnSingle:!0,keyName:T})}if(!m)return f.pipe(_);const y=RunnablePassthrough.assign({parsed:(T,A)=>_.invoke(T.raw,A)}),E=RunnablePassthrough.assign({parsed:()=>null}),b=y.withFallbacks({fallbacks:[E]});return RunnableSequence.from([{raw:f},b])}}function isZodSchema(a){return typeof(a==null?void 0:a.parse)=="function"}function isStructuredOutputMethodParams(a){return a!==void 0&&typeof a.schema=="object"}class ScreenshotThrottler{constructor(){Re(this,"queue",[]);Re(this,"isProcessing",!1);Re(this,"lastCaptureTime",0);Re(this,"maxRequestsPerSecond",2);Re(this,"requestInterval",Math.ceil(1e3/this.maxRequestsPerSecond))}enqueue(s,c){return new Promise((u,d)=>{const h={tabId:s,options:c,resolve:u,reject:d,timestamp:Date.now()};this.queue.push(h),logger.debug("\u622A\u56FE\u8BF7\u6C42\u5DF2\u52A0\u5165\u961F\u5217",{queueLength:this.queue.length}),this.isProcessing||this.processQueue()})}async processQueue(){if(this.queue.length===0){this.isProcessing=!1;return}this.isProcessing=!0;const s=this.queue.shift();if(!s){this.isProcessing=!1;return}const c=Date.now()-this.lastCaptureTime,u=Math.max(0,this.requestInterval-c);u>0&&(logger.debug(`\u7B49\u5F85 ${u}ms \u540E\u6267\u884C\u622A\u56FE\u8BF7\u6C42\uFF0C\u4EE5\u907F\u514D\u8D85\u8FC7\u914D\u989D\u9650\u5236`),await new Promise(d=>setTimeout(d,u)));try{const d=await this.captureVisibleTab(s.tabId,s.options);this.lastCaptureTime=Date.now(),s.resolve(d)}catch(d){logger.error("\u622A\u56FE\u8BF7\u6C42\u5931\u8D25",d),s.reject(d instanceof Error?d:new Error(String(d)))}finally{setTimeout(()=>this.processQueue(),0)}}captureVisibleTab(s,c){return new Promise((u,d)=>{logger.debug("\u6267\u884C\u622A\u56FE\u64CD\u4F5C",{tabId:s,options:c}),browser.tabs.captureVisibleTab(s,c).then(h=>{if(!h){logger.error("\u622A\u56FE\u6570\u636E\u4E3A\u7A7A"),d(new Error("\u622A\u56FE\u6570\u636E\u4E3A\u7A7A"));return}logger.debug("\u6210\u529F\u6355\u83B7\u622A\u56FE",{dataUrlLength:h.length}),u(h)}).catch(h=>{logger.error("\u6D4F\u89C8\u5668\u622A\u56FE\u6355\u83B7\u5931\u8D25",h),d(h)})})}}const screenshotThrottler=new ScreenshotThrottler,captureSpecificTab=async a=>{logger.debug("\u5F00\u59CB\u6355\u83B7\u6307\u5B9A\u6807\u7B7E\u9875\u622A\u56FE",{tabId:a});try{logger.debug("\u901A\u8FC7\u622A\u56FE\u8282\u6D41\u7BA1\u7406\u5668\u8BF7\u6C42\u622A\u56FE",{tabId:a});const s=await screenshotThrottler.enqueue(a,{format:"png"});return logger.debug("\u6210\u529F\u83B7\u53D6\u622A\u56FE",{tabId:a,dataUrlLength:s.length}),s}catch(s){throw logger.error("\u622A\u56FE\u8FC7\u7A0B\u4E2D\u51FA\u9519",{tabId:a,error:s}),s}},captureVisibleTab=async()=>{logger.debug("\u5F00\u59CB\u6355\u83B7\u5F53\u524D\u6807\u7B7E\u9875\u622A\u56FE");try{let a;if(a=await browser.tabs.query({active:!0,currentWindow:!0}),!a||a.length===0)throw logger.error("\u65E0\u6CD5\u83B7\u53D6\u5F53\u524D\u6807\u7B7E\u9875"),new Error("\u65E0\u6CD5\u83B7\u53D6\u5F53\u524D\u6807\u7B7E\u9875");const s=a[0];logger.debug("\u83B7\u53D6\u5230\u5F53\u524D\u6807\u7B7E\u9875",{tabId:s.id,url:s.url}),logger.debug("\u901A\u8FC7\u622A\u56FE\u8282\u6D41\u7BA1\u7406\u5668\u8BF7\u6C42\u622A\u56FE");const c=await screenshotThrottler.enqueue(null,{format:"png"});return logger.debug("\u6210\u529F\u83B7\u53D6\u622A\u56FE",{dataUrlLength:c.length}),c}catch(a){throw logger.error("\u622A\u56FE\u8FC7\u7A0B\u4E2D\u51FA\u9519",a),a}},getScreenshotFromSpecificTab=async a=>{logger.info("\u5F00\u59CB\u83B7\u53D6\u6307\u5B9A\u6807\u7B7E\u9875\u622A\u56FE",{tabId:a});try{const s=await captureSpecificTab(a);return logger.info("\u6210\u529F\u83B7\u53D6\u622A\u56FE",{tabId:a,dataUrlLength:s.length}),{success:!0,screenshot:s,error:null}}catch(s){const c=s instanceof Error?s.message:"\u622A\u56FE\u6355\u83B7\u5931\u8D25",u=c.includes("MAX_CAPTURE_VISIBLE_TAB_CALLS_PER_SECOND");return u?logger.warn("\u622A\u56FE\u914D\u989D\u9650\u5236\u9519\u8BEF\uFF0C\u5DF2\u901A\u8FC7\u8282\u6D41\u7BA1\u7406\u5668\u5904\u7406",{tabId:a,error:c}):logger.error("\u83B7\u53D6\u622A\u56FE\u5931\u8D25",{tabId:a,error:c}),{success:!1,screenshot:null,error:c,isQuotaError:u}}},getScreenshotFromCurrentTab=async()=>{logger.info("\u5F00\u59CB\u83B7\u53D6\u5F53\u524D\u6807\u7B7E\u9875\u622A\u56FE");try{const a=await captureVisibleTab();return logger.info("\u6210\u529F\u83B7\u53D6\u622A\u56FE",{dataUrlLength:a.length}),{success:!0,screenshot:a,error:null}}catch(a){const s=a instanceof Error?a.message:"\u622A\u56FE\u6355\u83B7\u5931\u8D25",c=s.includes("MAX_CAPTURE_VISIBLE_TAB_CALLS_PER_SECOND");return c?logger.warn("\u622A\u56FE\u914D\u989D\u9650\u5236\u9519\u8BEF\uFF0C\u5DF2\u901A\u8FC7\u8282\u6D41\u7BA1\u7406\u5668\u5904\u7406",{error:s}):logger.error("\u83B7\u53D6\u622A\u56FE\u5931\u8D25",{error:s}),{success:!1,screenshot:null,error:s,isQuotaError:c}}};export{createManyModels as $,getEmbeddingModels as A,defaultEmbeddingChunkOverlap as B,defaultEmbeddingChunkSize as C,Divider$1 as D,defaultEmbeddingModelForRag as E,Form as F,getTotalFilePerKB as G,getNoOfRetrievedDocs as H,Input$1 as I,defaultSplittingStrategy as J,defaultSsplttingSeparator as K,SearchOutlined$1 as L,Modal$1 as M,Button$1 as N,EyeOutlined$1 as O,setSystemPromptForNonRag as P,Collapse$1 as Q,setOllamaURL as R,Switch$1 as S,Tooltip$1 as T,getOllamaURL as U,systemPromptForNonRag as V,Link as W,omit as X,useSize as Y,getOpenAIConfigById as Z,getAllOpenAIModels as _,setRewriteUrl as a,isCustomModel as a$,addOpenAICofig as a0,updateOpenAIConfig as a1,deleteOpenAIConfig as a2,getAllOpenAIConfig as a3,FormItemInputContext as a4,useCSSVarCls as a5,TARGET_CLS as a6,Wave$1 as a7,Keyframe as a8,CONTAINER_MAX_OFFSET as a9,CheckOutlined$1 as aA,AntdIcon as aB,removeModelSuffix as aC,NavLink as aD,KeyCode as aE,initComponentToken as aF,initInputToken as aG,genInputSmallStyle as aH,genBasicInputStyle as aI,genBaseOutlinedStyle as aJ,genDisabledStyle as aK,RightOutlined$1 as aL,LeftOutlined$1 as aM,cloneElement as aN,Trigger as aO,isVisible as aP,ForwardOverflow as aQ,genPresetColor as aR,isPresetColor as aS,Col$1 as aT,responsiveArray as aU,Row$1 as aV,DefaultRenderEmpty$1 as aW,TextArea$1 as aX,RefResizeObserver as aY,logger as aZ,getSelectedModel as a_,Notify as aa,InfoCircleFilled$1 as ab,CheckCircleFilled$1 as ac,CloseCircleFilled$1 as ad,ExclamationCircleFilled$1 as ae,LoadingOutlined$1 as af,useNotification as ag,CloseOutlined$1 as ah,NotificationProvider as ai,render$2 as aj,AppConfigContext as ak,pickAttrs as al,browser as am,isOllamaRunning as an,webUIResumeLastChat as ao,fetchChatModels as ap,copilotResumeLastChat as aq,matchScreen as ar,toArray$6 as as,useBreakpoint as at,saveModelNickname as au,deleteModel as av,getAllModels as aw,deleteModel$1 as ax,getAllCustomModels as ay,createModel as az,setCustomOllamaHeaders as b,ensureConfig as b$,getModelInfo as b0,isOllamaModel as b1,ChatOllama as b2,CustomChatOpenAI as b3,getDataFromSpecificTab as b4,getDataFromCurrentTab as b5,getScreenshotFromSpecificTab as b6,getScreenshotFromCurrentTab as b7,SyncServiceStatus as b8,syncService as b9,getArrowOffsetToken as bA,Popup as bB,useZIndex as bC,NoCompactStyle as bD,slideUpIn as bE,slideDownIn as bF,slideUpOut as bG,slideDownOut as bH,initMoveMotion as bI,getPlacements as bJ,zIndexContext$1 as bK,genPurePanel as bL,Portal as bM,useClosable as bN,pickClosable as bO,usePanelRef as bP,NoFormStyle as bQ,useCompactItemContext as bR,DialogWrap as bS,genModalMaskStyle as bT,getAllModelNicknames as bU,HumanMessage as bV,AIMessage as bW,Runnable as bX,load as bY,defaultExtractContent as bZ,readability as b_,Space$1 as ba,getSyncConfig as bb,updateSyncConfig as bc,replaceElement$1 as bd,useEvent as be,isMobile as bf,getTransitionName as bg,initSlideMotion as bh,useForceUpdate as bi,getScrollBarSize as bj,getTargetScrollBarSize as bk,List$1 as bl,DownOutlined$1 as bm,genCollapseMotion$1 as bn,initCollapseMotion as bo,_asyncToGenerator as bp,_regeneratorRuntime as bq,initFadeMotion as br,processPdf as bs,commonjsRequire as bt,base64Js as bu,require$$0 as bv,initZoomMotion as bw,getArrowStyle as bx,PresetColors as by,getArrowToken as bz,createLucideIcon as c,CallbackManager as c0,parseCallbackConfigArg as c1,Serializable as c2,SimpleChatModel as c3,IterableReadableStream as c4,ChatGenerationChunk as c5,AIMessageChunk as c6,BaseChatModel as c7,getEnvironmentVariable$1 as c8,convertToOpenAITool as c9,isBaseMessageChunk as cA,coerceMessageLikeToMessage as cB,getBufferString as cC,getEndpoint as ca,StructuredOutputParser as cb,JsonOutputParser as cc,zodToJsonSchema as cd,JsonOutputKeyToolsParser as ce,RunnablePassthrough as cf,RunnableSequence as cg,ChatMessage as ch,HumanMessageChunk as ci,SystemMessageChunk as cj,FunctionMessageChunk as ck,ToolMessageChunk as cl,ChatMessageChunk as cm,AsyncCaller as cn,urlRewriteRuntime as co,getCustomHeaders as cp,parseKeepAlive as cq,getCustomOllamaHeaders as cr,OpenAI as cs,wrapOpenAIClientError as ct,SystemMessage as cu,getModelNicknameByID as cv,systemPromptForNonRagOption as cw,BaseMessage as cx,BaseMessageChunk as cy,isBaseMessage as cz,setAutoCORSFix as d,customOllamaHeaders as e,getIsAutoCORSFix as f,getRewriteUrl as g,syncHooks as h,isUrlRewriteEnabled as i,InputNumber$1 as j,Skeleton$1 as k,Tag$2 as l,g as m,fetcher as n,cleanUrl as o,getPageShareUrl as p,setPageShareUrl as q,setPromptForRag as r,setUrlRewriteEnabled as s,setWebPrompts as t,useMergedState as u,promptForRag as v,getWebSearchPrompt as w,geWebSearchFollowUpPrompt as x,Select$1 as y,saveForRag as z};
