import{e as Z,r as n,a as $,j as e,__tla as M}from"./FontSizeProvider-D4Gh80tw.js";import{S as U,__tla as W}from"./SettingsOptionLayout-gi-p9doQ.js";import{O as X,__tla as Y}from"./Layout-B2rmxZ24.js";import{F as a,u as _,e as l,D as m,o as S,k as N,T as f,G as ee}from"./SaveButton-Dir2VHfX.js";import{t as x,z as te,n as o,F as re,G as ae,H as se,J as oe,Z as ne,T as me,K as ie,L as le,__tla as ce}from"./Sidebar-uBkE2MHz.js";import{P as F,t as de}from"./color-Rv4jN5Lm.js";import{S as pe}from"./index-CqZ2TOEX.js";import{T as q,__tla as ge}from"./Table-IhjToR31.js";import"./chevron-right-CDZTKm5_.js";import"./index-B2Ick9Fr.js";import"./index-DZCUgEun.js";import"./index-Bbm-Nfcp.js";let I,ue=Promise.all([(()=>{try{return M}catch{}})(),(()=>{try{return W}catch{}})(),(()=>{try{return Y}catch{}})(),(()=>{try{return ce}catch{}})(),(()=>{try{return ge}catch{}})()]).then(async()=>{let h;h=()=>{const i=Z(),[E,c]=n.useState(!1),[z,d]=n.useState(!1),[C,T]=n.useState(""),[y]=a.useForm(),[p]=a.useForm(),{t}=$(["settings","common"]),[P,K]=n.useState("custom"),[A,g]=n.useState(!1),[R,D]=n.useState(""),[u]=a.useForm(),{data:Q,status:j}=_({queryKey:["fetchAllPrompts"],queryFn:ie}),{data:G,status:b}=_({queryKey:["fetchCopilotPrompts"],queryFn:le}),{mutate:V}=l({mutationFn:te,onSuccess:()=>{i.invalidateQueries({queryKey:["fetchAllPrompts"]}),o.success({message:t("managePrompts.notification.deletedSuccess"),description:t("managePrompts.notification.deletedSuccessDesc")})},onError:r=>{o.error({message:t("managePrompts.notification.error"),description:(r==null?void 0:r.message)||t("managePrompts.notification.someError")})}}),{mutate:B,isPending:k}=l({mutationFn:re,onSuccess:()=>{i.invalidateQueries({queryKey:["fetchAllPrompts"]}),c(!1),y.resetFields(),o.success({message:t("managePrompts.notification.addSuccess"),description:t("managePrompts.notification.addSuccessDesc")})},onError:r=>{o.error({message:t("managePrompts.notification.error"),description:(r==null?void 0:r.message)||t("managePrompts.notification.someError")})}}),{mutate:H,isPending:v}=l({mutationFn:async r=>await ae({...r,id:C}),onSuccess:()=>{i.invalidateQueries({queryKey:["fetchAllPrompts"]}),d(!1),p.resetFields(),o.success({message:t("managePrompts.notification.updatedSuccess"),description:t("managePrompts.notification.updatedSuccessDesc")})},onError:r=>{o.error({message:t("managePrompts.notification.error"),description:(r==null?void 0:r.message)||t("managePrompts.notification.someError")})}}),{mutate:J,isPending:w}=l({mutationFn:async r=>await se([{key:r.key,prompt:r.prompt}]),onSuccess:()=>{i.invalidateQueries({queryKey:["fetchCopilotPrompts"]}),g(!1),u.resetFields(),o.success({message:t("managePrompts.notification.updatedSuccess"),description:t("managePrompts.notification.updatedSuccessDesc")})},onError:r=>{o.error({message:t("managePrompts.notification.error"),description:(r==null?void 0:r.message)||t("managePrompts.notification.someError")})}});function L(){return e.jsxs("div",{children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"-ml-4 -mt-2 flex flex-wrap items-center justify-end sm:flex-nowrap",children:e.jsx("div",{className:"ml-4 mt-2 flex-shrink-0",children:e.jsx("button",{onClick:()=>c(!0),className:"inline-flex items-center rounded-md border border-transparent bg-black px-2 py-2 text-md font-medium leading-4 text-white shadow-sm hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:bg-white dark:text-gray-800 dark:hover:bg-gray-100 dark:focus:ring-gray-500 dark:focus:ring-offset-gray-100 disabled:opacity-50",children:t("managePrompts.addBtn")})})})}),j==="pending"&&e.jsx(N,{paragraph:{rows:8}}),j==="success"&&e.jsx(q,{columns:[{title:t("managePrompts.columns.title"),dataIndex:"title",key:"title",render:r=>e.jsx("span",{className:"line-clamp-1",children:r})},{title:t("managePrompts.columns.prompt"),dataIndex:"content",key:"content",render:r=>e.jsx("span",{className:"line-clamp-1",children:r})},{title:t("managePrompts.columns.type"),dataIndex:"is_system",key:"is_system",render:r=>e.jsx("span",{className:"flex items-center gap-2 text-xs w-32",children:r?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"size-4"})," ",t("managePrompts.systemPrompt")]}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"size-4"})," ",t("managePrompts.quickPrompt")]})})},{title:t("managePrompts.columns.actions"),render:(r,s)=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx(f,{title:t("managePrompts.tooltip.delete"),children:e.jsx("button",{onClick:()=>{window.confirm(t("managePrompts.confirm.delete"))&&V(s.id)},className:"text-red-500 dark:text-red-400",children:e.jsx(ee,{className:"size-4"})})}),e.jsx(f,{title:t("managePrompts.tooltip.edit"),children:e.jsx("button",{onClick:()=>{T(s.id),p.setFieldsValue(s),d(!0)},className:"text-gray-500 dark:text-gray-400",children:e.jsx(F,{className:"size-4"})})})]})}],bordered:!0,dataSource:Q,rowKey:r=>r.id})]})}function O(){return e.jsxs("div",{children:[b==="pending"&&e.jsx(N,{paragraph:{rows:8}}),b==="success"&&e.jsx(q,{columns:[{title:t("managePrompts.columns.title"),dataIndex:"key",key:"key",render:r=>e.jsx("span",{className:"line-clamp-1",children:e.jsx(me,{color:de[r||"default"],children:t(`common:copilot.${r}`)})})},{title:t("managePrompts.columns.prompt"),dataIndex:"prompt",key:"prompt",render:r=>e.jsx("span",{className:"line-clamp-1",children:r})},{render:(r,s)=>e.jsx("div",{className:"flex gap-4",children:e.jsx(f,{title:t("managePrompts.tooltip.edit"),children:e.jsx("button",{onClick:()=>{D(s.key),u.setFieldsValue(s),g(!0)},className:"text-gray-500 dark:text-gray-400",children:e.jsx(F,{className:"size-4"})})})})}],bordered:!0,dataSource:G,rowKey:r=>r.key})]})}return e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-end mb-6",children:e.jsx(pe,{size:"large",options:[{label:t("managePrompts.segmented.custom"),value:"custom"},{label:t("managePrompts.segmented.copilot"),value:"copilot"}],onChange:r=>{K(r)}})}),P==="custom"&&L(),P==="copilot"&&O(),e.jsx(x,{title:t("managePrompts.modal.addTitle"),open:E,onCancel:()=>c(!1),footer:null,children:e.jsxs(a,{onFinish:r=>B(r),layout:"vertical",form:y,children:[e.jsx(a.Item,{name:"title",label:t("managePrompts.form.title.label"),rules:[{required:!0,message:t("managePrompts.form.title.required")}],children:e.jsx(m,{placeholder:t("managePrompts.form.title.placeholder")})}),e.jsx(a.Item,{name:"content",label:t("managePrompts.form.prompt.label"),rules:[{required:!0,message:t("managePrompts.form.prompt.required")}],help:t("managePrompts.form.prompt.help"),children:e.jsx(m.TextArea,{placeholder:t("managePrompts.form.prompt.placeholder"),autoSize:{minRows:3,maxRows:10}})}),e.jsx(a.Item,{name:"is_system",label:t("managePrompts.form.isSystem.label"),valuePropName:"checked",children:e.jsx(S,{})}),e.jsx(a.Item,{children:e.jsx("button",{disabled:k,className:"inline-flex justify-center w-full text-center mt-4 items-center rounded-md border border-transparent bg-black px-2 py-2 text-sm font-medium leading-4 text-white shadow-sm hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:bg-white dark:text-gray-800 dark:hover:bg-gray-100 dark:focus:ring-gray-500 dark:focus:ring-offset-gray-100 disabled:opacity-50 ",children:t(k?"managePrompts.form.btnSave.saving":"managePrompts.form.btnSave.save")})})]})}),e.jsx(x,{title:t("managePrompts.modal.editTitle"),open:z,onCancel:()=>d(!1),footer:null,children:e.jsxs(a,{onFinish:r=>H(r),layout:"vertical",form:p,children:[e.jsx(a.Item,{name:"title",label:t("managePrompts.form.title.label"),rules:[{required:!0,message:t("managePrompts.form.title.required")}],children:e.jsx(m,{placeholder:t("managePrompts.form.title.placeholder")})}),e.jsx(a.Item,{name:"content",label:t("managePrompts.form.prompt.label"),rules:[{required:!0,message:t("managePrompts.form.prompt.required")}],help:t("managePrompts.form.prompt.help"),children:e.jsx(m.TextArea,{placeholder:t("managePrompts.form.prompt.placeholder"),autoSize:{minRows:3,maxRows:10}})}),e.jsx(a.Item,{name:"is_system",label:t("managePrompts.form.isSystem.label"),valuePropName:"checked",children:e.jsx(S,{})}),e.jsx(a.Item,{children:e.jsx("button",{disabled:v,className:"inline-flex justify-center w-full text-center mt-4 items-center rounded-md border border-transparent bg-black px-2 py-2 text-sm font-medium leading-4 text-white shadow-sm hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:bg-white dark:text-gray-800 dark:hover:bg-gray-100 dark:focus:ring-gray-500 dark:focus:ring-offset-gray-100 disabled:opacity-50 ",children:t(v?"managePrompts.form.btnEdit.saving":"managePrompts.form.btnEdit.save")})})]})}),e.jsx(x,{title:t("managePrompts.modal.editTitle"),open:A,onCancel:()=>g(!1),footer:null,children:e.jsxs(a,{onFinish:r=>J({key:R,prompt:r.prompt}),layout:"vertical",form:u,children:[e.jsx(a.Item,{name:"prompt",label:t("managePrompts.form.prompt.label"),rules:[{required:!0,message:t("managePrompts.form.prompt.required")},{validator:(r,s)=>s&&s.includes("{text}")?Promise.resolve():Promise.reject(new Error(t("managePrompts.form.prompt.missingTextPlaceholder")))}],children:e.jsx(m.TextArea,{placeholder:t("managePrompts.form.prompt.placeholder"),autoSize:{minRows:3,maxRows:10}})}),e.jsx(a.Item,{children:e.jsx("button",{disabled:w,className:"inline-flex justify-center w-full text-center mt-4 items-center rounded-md border border-transparent bg-black px-2 py-2 text-sm font-medium leading-4 text-white shadow-sm hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:bg-white dark:text-gray-800 dark:hover:bg-gray-100 dark:focus:ring-gray-500 dark:focus:ring-offset-gray-100 disabled:opacity-50 ",children:t(w?"managePrompts.form.btnEdit.saving":"managePrompts.form.btnEdit.save")})})]})})]})},I=()=>e.jsx(X,{children:e.jsx(U,{children:e.jsx(h,{})})})});export{ue as __tla,I as default};
