import{u as x,R as h,j as e}from"./FontSizeProvider-BQs3lYNB.js";import{F as l,s as u,a as b,b as j,d as g,S as m,I as i,D as f,i as v,g as w,e as p,f as S}from"./get-screenshot-dbUggNeo.js";import{T as N,S as y}from"./SaveButton-_URAgOyg.js";const k=()=>{const[d]=l.useForm(),c=l.useWatch("urlRewriteEnabled",d),{t:s}=x("settings"),o=async()=>{try{const[a,r,n,t]=await Promise.all([v(),w(),p(),S()]);d.setFieldsValue({urlRewriteEnabled:a,rewriteUrl:r,headers:n,autoCORSFix:t})}catch(a){console.error(a)}};return h.useEffect(()=>{o()},[]),e.jsxs(l,{onFinish:a=>{var n;const r=(n=a==null?void 0:a.headers)==null?void 0:n.filter(t=>t.key&&t.value);u(a.urlRewriteEnabled),b(a.rewriteUrl),j(r),g(a.autoCORSFix)},form:d,layout:"vertical",className:"space-y-4",children:[e.jsx(l.Item,{name:"urlRewriteEnabled",label:s("ollamaSettings.settings.advanced.urlRewriteEnabled.label"),children:e.jsx(m,{})}),e.jsx(l.Item,{required:c,name:"rewriteUrl",label:s("ollamaSettings.settings.advanced.rewriteUrl.label"),children:e.jsx(i,{disabled:!c,className:"w-full",placeholder:s("ollamaSettings.settings.advanced.rewriteUrl.placeholder")})}),e.jsx(l.Item,{name:"autoCORSFix",label:s("ollamaSettings.settings.advanced.autoCORSFix.label"),children:e.jsx(m,{})}),e.jsx(l.List,{name:"headers",children:(a,{add:r,remove:n})=>e.jsxs("div",{className:"flex flex-col ",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-md font-semibold",children:s("ollamaSettings.settings.advanced.headers.label")}),e.jsx("button",{type:"button",className:"dark:bg-white dark:text-black text-white bg-black p-1.5 text-xs rounded-md",onClick:()=>{r()},children:s("ollamaSettings.settings.advanced.headers.add")})]}),a.map((t,R)=>e.jsxs("div",{className:"flex items-center   w-full",children:[e.jsxs("div",{className:"flex-grow flex mt-3 space-x-4",children:[e.jsx(l.Item,{label:s("ollamaSettings.settings.advanced.headers.key.label"),name:[t.name,"key"],className:"flex-1 mb-0",children:e.jsx(i,{className:"w-full",placeholder:s("ollamaSettings.settings.advanced.headers.key.placeholder")})}),e.jsx(l.Item,{label:s("ollamaSettings.settings.advanced.headers.value.label"),name:[t.name,"value"],className:"flex-1 mb-0",children:e.jsx(i,{className:"w-full",placeholder:s("ollamaSettings.settings.advanced.headers.value.placeholder")})})]}),e.jsx("button",{type:"button",onClick:()=>{n(t.name)},className:"shrink-0 ml-2 text-red-500 dark:text-red-400",children:e.jsx(N,{className:"w-5 h-5"})})]},t.key))]})}),e.jsx(f,{}),e.jsx(l.Item,{className:"flex justify-end",children:e.jsx(y,{btnType:"submit"})})]})};export{k as A};
