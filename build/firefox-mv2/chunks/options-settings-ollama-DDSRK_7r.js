import{a as h,e as y,j as e,R as S,r as k,f as g}from"./FontSizeProvider-D3enan1E.js";import{B as v,S as N}from"./SettingsOptionLayout-s4bKEO4h.js";import{O as w}from"./Layout-_1TcQUPd.js";import{c as I,F as t,u as p,I as s,C as b,n as c,k as j,S as f,s as P,L as K,g as C}from"./SaveButton-DmOKJM4n.js";import{A as F}from"./AdvanceOllamaSettings-C0ZzCIGe.js";import{L,N as M}from"./Sidebar-BePlkV0h.js";import{I as z}from"./browser-polyfill-0iagK1yo.js";import{T as u}from"./Trans-BZF7cJyC.js";import"./pdfjs-Dk_2IB0p.js";import"./index-FcDqmjI2.js";import"./chevron-right-CQkEQ8H0.js";/**
* @license lucide-react v0.350.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const A=I("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),q=()=>{const{t:l}=h("common"),[m]=t.useForm(),i=y(),{isPending:d}=p({queryKey:["fetchModelConfig"],queryFn:async()=>{const n=await M();return m.setFieldsValue(n),n}});return e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2",children:[e.jsx(v,{}),e.jsx("h2",{className:"text-base font-semibold leading-7 text-gray-900 dark:text-white",children:l("modelSettings.label")})]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-neutral-400 mt-1",children:l("modelSettings.description")}),e.jsx("div",{className:"border border-b border-gray-200 dark:border-gray-600 mt-3 mb-6"})]}),d?e.jsx(f,{active:!0}):e.jsxs(t,{onFinish:n=>{Object.entries(n).forEach(([o,r])=>{L(o,r)}),i.invalidateQueries({queryKey:["fetchModelConfig"]})},form:m,layout:"vertical",children:[e.jsx(t.Item,{name:"keepAlive",help:l("modelSettings.form.keepAlive.help"),label:l("modelSettings.form.keepAlive.label"),children:e.jsx(z,{size:"large",placeholder:l("modelSettings.form.keepAlive.placeholder")})}),e.jsx(t.Item,{name:"temperature",label:l("modelSettings.form.temperature.label"),children:e.jsx(s,{size:"large",style:{width:"100%"},placeholder:l("modelSettings.form.temperature.placeholder")})}),e.jsx(t.Item,{name:"numCtx",label:l("modelSettings.form.numCtx.label"),children:e.jsx(s,{style:{width:"100%"},placeholder:l("modelSettings.form.numCtx.placeholder"),size:"large"})}),e.jsx(t.Item,{name:"numPredict",label:l("modelSettings.form.numPredict.label"),children:e.jsx(s,{style:{width:"100%"},placeholder:l("modelSettings.form.numPredict.placeholder")})}),e.jsx(b,{ghost:!0,className:"border-none bg-transparent",items:[{key:"1",label:l("modelSettings.advanced"),children:e.jsxs(S.Fragment,{children:[e.jsx(t.Item,{name:"topK",label:l("modelSettings.form.topK.label"),children:e.jsx(s,{style:{width:"100%"},placeholder:l("modelSettings.form.topK.placeholder"),size:"large"})}),e.jsx(t.Item,{name:"topP",label:l("modelSettings.form.topP.label"),children:e.jsx(s,{style:{width:"100%"},size:"large",placeholder:l("modelSettings.form.topP.placeholder")})}),e.jsx(t.Item,{name:"numGpu",label:l("modelSettings.form.numGpu.label"),children:e.jsx(s,{style:{width:"100%"},size:"large",placeholder:l("modelSettings.form.numGpu.placeholder")})}),e.jsx(t.Item,{name:"minP",label:l("modelSettings.form.minP.label"),children:e.jsx(s,{style:{width:"100%"},placeholder:l("modelSettings.form.minP.placeholder")})}),e.jsx(t.Item,{name:"repeatPenalty",label:l("modelSettings.form.repeatPenalty.label"),children:e.jsx(s,{style:{width:"100%"},placeholder:l("modelSettings.form.repeatPenalty.placeholder")})}),e.jsx(t.Item,{name:"repeatLastN",label:l("modelSettings.form.repeatLastN.label"),children:e.jsx(s,{style:{width:"100%"},placeholder:l("modelSettings.form.repeatLastN.placeholder")})}),e.jsx(t.Item,{name:"tfsZ",label:l("modelSettings.form.tfsZ.label"),children:e.jsx(s,{style:{width:"100%"},placeholder:l("modelSettings.form.tfsZ.placeholder")})}),e.jsx(t.Item,{name:"numKeep",label:l("modelSettings.form.numKeep.label"),children:e.jsx(s,{style:{width:"100%"},placeholder:l("modelSettings.form.numKeep.placeholder")})}),e.jsx(t.Item,{name:"numThread",label:l("modelSettings.form.numThread.label"),children:e.jsx(s,{style:{width:"100%"},placeholder:l("modelSettings.form.numThread.placeholder")})}),e.jsx(t.Item,{name:"useMMap",label:l("modelSettings.form.useMMap.label"),children:e.jsx(c,{})}),e.jsx(t.Item,{name:"useMlock",label:l("modelSettings.form.useMlock.label"),children:e.jsx(c,{})})]})}]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(j,{btnType:"submit"})})]})]})},U=()=>{const[l,m]=k.useState(""),[i,d]=g("ollamaEnabledStatus",!0),[n,o]=g("checkOllamaStatus",!0),{t:r}=h("settings"),{status:x}=p({queryKey:["fetchOllamURL"],queryFn:async()=>{try{const[a]=await Promise.all([C()]);return m(a),{}}catch(a){return console.error(a),{}}}});return e.jsxs("div",{className:"flex flex-col space-y-3",children:[x==="pending"&&e.jsx(f,{paragraph:{rows:4},active:!0}),x==="success"&&e.jsxs("div",{className:"flex flex-col space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold leading-7 text-gray-900 dark:text-white",children:r("ollamaSettings.heading")}),e.jsx("div",{className:"border border-b border-gray-200 dark:border-gray-600 mt-3 mb-6"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"ollamaURL",className:"text-sm font-medium dark:text-gray-200",children:r("ollamaSettings.settings.ollamaUrl.label")}),e.jsx("input",{type:"url",id:"ollamaURL",value:l,onChange:a=>{m(a.target.value)},placeholder:r("ollamaSettings.settings.ollamaUrl.placeholder"),className:"w-full p-2 border border-gray-300 rounded-md dark:bg-[#262626] dark:text-gray-100"})]}),e.jsx("div",{className:"flex justify-end mb-3",children:e.jsx(j,{onClick:()=>{P(l)},className:"mt-2"})}),e.jsx(b,{size:"small",items:[{key:"1",label:e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold leading-7 text-gray-900 dark:text-white",children:r("ollamaSettings.settings.advanced.label")}),e.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-400 mb-4",children:e.jsx(u,{i18nKey:"settings:ollamaSettings.settings.advanced.help",components:{anchor:e.jsx("a",{href:"https://github.com/n4ze3m/page-assist/blob/main/docs/connection-issue.md#solutions",target:"__blank",className:"text-blue-600 dark:text-blue-400"})}})})]}),children:e.jsx(F,{})}]}),e.jsxs("div",{className:"mt-8 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium dark:text-gray-200",children:r("ollamaSettings.settings.globalEnable.label")}),e.jsx(c,{checked:i,onChange:a=>{d(a),o(a)}})]}),!i&&e.jsx("div",{className:"mt-2 p-3 bg-yellow-50 dark:bg-yellow-900/30 rounded-md",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(A,{className:"h-5 w-5 text-yellow-400 dark:text-yellow-500"})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:e.jsx(u,{i18nKey:"settings:ollamaSettings.settings.globalEnable.warning",components:{anchor:e.jsx(K,{to:"/settings/openai",className:"text-blue-600 dark:text-blue-400"})}})})})]})})," "]})]}),e.jsx(q,{})]})]})},O=()=>e.jsx(w,{children:e.jsx(N,{children:e.jsx(U,{})})});export{O as default};
