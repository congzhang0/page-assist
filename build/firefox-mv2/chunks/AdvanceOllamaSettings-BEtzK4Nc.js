import{a as x,R as h,j as e}from"./FontSizeProvider-D4Gh80tw.js";import{F as s,R as u,U as b,V as j,W as g,o as m,D as i,G as f,X as v,l as w,Y as p,Z as N,_ as y,$ as S}from"./SaveButton-Dir2VHfX.js";const k=()=>{const[d]=s.useForm(),c=s.useWatch("urlRewriteEnabled",d),{t:l}=x("settings"),o=async()=>{try{const[a,r,n,t]=await Promise.all([p(),N(),y(),S()]);d.setFieldsValue({urlRewriteEnabled:a,rewriteUrl:r,headers:n,autoCORSFix:t})}catch(a){console.error(a)}};return h.useEffect(()=>{o()},[]),e.jsxs(s,{onFinish:a=>{var n;const r=(n=a==null?void 0:a.headers)==null?void 0:n.filter(t=>t.key&&t.value);u(a.urlRewriteEnabled),b(a.rewriteUrl),j(r),g(a.autoCORSFix)},form:d,layout:"vertical",className:"space-y-4",children:[e.jsx(s.Item,{name:"urlRewriteEnabled",label:l("ollamaSettings.settings.advanced.urlRewriteEnabled.label"),children:e.jsx(m,{})}),e.jsx(s.Item,{required:c,name:"rewriteUrl",label:l("ollamaSettings.settings.advanced.rewriteUrl.label"),children:e.jsx(i,{disabled:!c,className:"w-full",placeholder:l("ollamaSettings.settings.advanced.rewriteUrl.placeholder")})}),e.jsx(s.Item,{name:"autoCORSFix",label:l("ollamaSettings.settings.advanced.autoCORSFix.label"),children:e.jsx(m,{})}),e.jsx(s.List,{name:"headers",children:(a,{add:r,remove:n})=>e.jsxs("div",{className:"flex flex-col ",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-md font-semibold",children:l("ollamaSettings.settings.advanced.headers.label")}),e.jsx("button",{type:"button",className:"dark:bg-white dark:text-black text-white bg-black p-1.5 text-xs rounded-md",onClick:()=>{r()},children:l("ollamaSettings.settings.advanced.headers.add")})]}),a.map((t,R)=>e.jsxs("div",{className:"flex items-center   w-full",children:[e.jsxs("div",{className:"flex-grow flex mt-3 space-x-4",children:[e.jsx(s.Item,{label:l("ollamaSettings.settings.advanced.headers.key.label"),name:[t.name,"key"],className:"flex-1 mb-0",children:e.jsx(i,{className:"w-full",placeholder:l("ollamaSettings.settings.advanced.headers.key.placeholder")})}),e.jsx(s.Item,{label:l("ollamaSettings.settings.advanced.headers.value.label"),name:[t.name,"value"],className:"flex-1 mb-0",children:e.jsx(i,{className:"w-full",placeholder:l("ollamaSettings.settings.advanced.headers.value.placeholder")})})]}),e.jsx("button",{type:"button",onClick:()=>{n(t.name)},className:"shrink-0 ml-2 text-red-500 dark:text-red-400",children:e.jsx(f,{className:"w-5 h-5"})})]},t.key))]})}),e.jsx(v,{}),e.jsx(s.Item,{className:"flex justify-end",children:e.jsx(w,{btnType:"submit"})})]})};export{k as A};
