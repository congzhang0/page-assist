import{a as N,R as d,f as x,u as H,e as J,j as e}from"./FontSizeProvider-D3enan1E.js";import{u as W,e as X,S as n,k as o,l as Y,m as Z,C as $,s as ee,F as c,I as C,n as P,o as ae,g as re,p as se,q as te,r as le,t as de,v as ie,h as ne,w as oe,L as ce}from"./SaveButton-DmOKJM4n.js";import{u as ge,S as xe,a as me,T as he,b as ue,M as pe}from"./sst-settings-CgXlW4p1.js";import{A as be}from"./AdvanceOllamaSettings-C0ZzCIGe.js";import{S as ke}from"./sidepanel-rag-DfB3eeVF.js";import{R as m}from"./index-C5awg_Th.js";import{T as ye}from"./Trans-BZF7cJyC.js";import{S as h}from"./browser-polyfill-0iagK1yo.js";import{l as je}from"./icon-BmsVQuvA.js";import{C as fe,a as ve}from"./chevron-right-CQkEQ8H0.js";import"./elevenlabs-DyuDyElx.js";import"./use-form-CoJzCIEa.js";import"./index-FcDqmjI2.js";import"./index-Ci6F2mfP.js";const we=()=>{var w;const{t:r}=N("settings"),[l,i]=d.useState(""),[u,p]=d.useState(""),[b,k]=d.useState(""),[y,j]=d.useState(""),[g,L]=d.useState("normal"),[O,z]=x("copilotResumeLastChat",!1),[M,q]=x("hideCurrentChatModelSettings",!1),[E,B]=x("speechToTextLanguage","en-US"),{mode:F,toggleDarkMode:f}=H(),R=J(),{changeLocale:K,locale:T,supportLanguage:I}=ge(),{data:s,status:v}=W({queryKey:["sidebarSettings"],queryFn:async()=>{const[a,t,S,U,V,_,D,G]=await Promise.all([re(),se(),te(),le({returnEmpty:!0}),de(),ie(),ne(),oe()]);return{url:a,normalSystemPrompt:t,ragSystemPrompt:S.ragPrompt,ragQuestionPrompt:S.ragQuestionPrompt,models:U,chunkOverlap:V,chunkSize:_,defaultEM:D,totalFilePerKB:G}}}),{mutate:Q,isPending:A}=X({mutationFn:async a=>{await ae(a.model,a.chunkSize,a.overlap,s.totalFilePerKB),await R.invalidateQueries({queryKey:["sidebarSettings"]})}});return d.useEffect(()=>{s&&(i(s.url),p(s.normalSystemPrompt),k(s.ragSystemPrompt),j(s.ragQuestionPrompt))},[s]),v==="pending"?e.jsxs("div",{className:"flex flex-col gap-4 p-4",children:[e.jsx(n,{active:!0}),e.jsx(n,{active:!0}),e.jsx(n,{active:!0}),e.jsx(n,{active:!0})]}):v==="error"?e.jsx("div",{children:"Error"}):e.jsxs("div",{className:"flex flex-col gap-4 p-4 max-w-2xl mx-auto lg:max-w-3xl xl:max-w-4xl 2xl:max-w-5xl",children:[e.jsxs("div",{className:"border border-gray-300 dark:border-gray-700 rounded p-4 bg-white dark:bg-[#171717]",children:[e.jsx("h2",{className:"text-md font-semibold dark:text-white",children:r("managePrompts.title")}),e.jsx("div",{className:"my-3 flex justify-end",children:e.jsxs(m.Group,{defaultValue:g,onChange:a=>L(a.target.value),children:[e.jsx(m.Button,{value:"normal",children:r("managePrompts.option1")}),e.jsx(m.Button,{value:"rag",children:r("managePrompts.option2")})]})}),g==="normal"&&e.jsxs("div",{children:[e.jsx("span",{className:"text-md font-thin text-gray-500 dark:text-gray-400",children:r("managePrompts.systemPrompt")}),e.jsx("textarea",{className:"w-full border border-gray-300 dark:border-gray-700 rounded p-2 dark:bg-[#171717] dark:text-white dark:placeholder-gray-400",value:u,onChange:a=>p(a.target.value)}),e.jsx("div",{className:"flex justify-end",children:e.jsx(o,{onClick:()=>{Y(u)}})})]}),g==="rag"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("span",{className:"text-md font-thin text-gray-500 dark:text-gray-400",children:r("managePrompts.systemPrompt")}),e.jsx("textarea",{className:"w-full border border-gray-300 dark:border-gray-700 rounded p-2 dark:bg-[#171717] dark:text-white dark:placeholder-gray-400",value:b,onChange:a=>k(a.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("span",{className:"text-md  font-thin text-gray-500 dark:text-gray-400",children:r("managePrompts.questionPrompt")}),e.jsx("textarea",{className:"w-full border border-gray-300 dark:border-gray-700 rounded p-2 dark:bg-[#171717] dark:text-white dark:placeholder-gray-400",value:y,onChange:a=>j(a.target.value)})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(o,{onClick:()=>{Z(b,y)}})})]})]}),e.jsx("div",{className:"border border-gray-300 dark:border-gray-700 rounded p-4 bg-white dark:bg-[#171717]",children:e.jsx(ke,{hideBorder:!0})}),e.jsxs("div",{className:"border flex flex-col gap-4 border-gray-300 dark:border-gray-700 rounded p-4 bg-white dark:bg-[#171717]",children:[e.jsx("h2",{className:"text-md font-semibold dark:text-white",children:r("ollamaSettings.heading")}),e.jsx("input",{className:"w-full border border-gray-300 dark:border-gray-700 rounded p-2 dark:bg-[#171717] dark:text-white dark:placeholder-gray-400",value:l,type:"url",onChange:a=>i(a.target.value),placeholder:r("ollamaSettings.settings.ollamaUrl.placeholder")}),e.jsx($,{size:"small",items:[{key:"1",label:e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold leading-7 text-gray-900 dark:text-white",children:r("ollamaSettings.settings.advanced.label")}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4",children:e.jsx(ye,{i18nKey:"settings:ollamaSettings.settings.advanced.help",components:{anchor:e.jsx("a",{href:"https://github.com/n4ze3m/page-assist/blob/main/docs/connection-issue.md#solutions",target:"__blank",className:"text-blue-600 dark:text-blue-400"})}})})]}),children:e.jsx(be,{})}]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(o,{onClick:()=>{ee(l)}})})]}),e.jsxs("div",{className:"border border-gray-300 dark:border-gray-700 rounded p-4 bg-white dark:bg-[#171717]",children:[e.jsx("h2",{className:"text-md mb-4 font-semibold dark:text-white",children:r("rag.ragSettings.label")}),e.jsxs(c,{onFinish:a=>{Q({model:a.defaultEM,chunkSize:a.chunkSize,overlap:a.chunkOverlap})},initialValues:{chunkSize:s.chunkSize,chunkOverlap:s.chunkOverlap,defaultEM:s.defaultEM},children:[e.jsx(c.Item,{name:"defaultEM",label:r("rag.ragSettings.model.label"),help:r("rag.ragSettings.model.help"),rules:[{required:!0,message:r("rag.ragSettings.model.required")}],children:e.jsx(h,{size:"large",filterOption:(a,t)=>t.label.toLowerCase().indexOf(a.toLowerCase())>=0||t.value.toLowerCase().indexOf(a.toLowerCase())>=0,showSearch:!0,placeholder:"Select a model",style:{width:"100%"},className:"mt-4",options:(w=s.models)==null?void 0:w.map(a=>({label:a.name,value:a.model}))})}),e.jsx(c.Item,{name:"chunkSize",label:r("rag.ragSettings.chunkSize.label"),rules:[{required:!0,message:r("rag.ragSettings.chunkSize.required")}],children:e.jsx(C,{style:{width:"100%"},placeholder:r("rag.ragSettings.chunkSize.placeholder")})}),e.jsx(c.Item,{name:"chunkOverlap",label:r("rag.ragSettings.chunkOverlap.label"),rules:[{required:!0,message:r("rag.ragSettings.chunkOverlap.required")}],children:e.jsx(C,{style:{width:"100%"},placeholder:r("rag.ragSettings.chunkOverlap.placeholder")})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(o,{disabled:A,btnType:"submit"})})]})]}),e.jsxs("div",{className:"border space-y-3 w-full border-gray-300 dark:border-gray-700 rounded p-4 bg-white dark:bg-[#171717]",children:[e.jsx("h2",{className:"text-base mb-4 font-semibold leading-7 text-gray-900 dark:text-white",children:r("generalSettings.title")}),e.jsxs("div",{className:"flex flex-col  space-y-4",children:[e.jsx("span",{className:"text-gray-500   dark:text-neutral-50",children:r("generalSettings.settings.copilotResumeLastChat.label")}),e.jsx("div",{children:e.jsx(P,{checked:O,onChange:a=>z(a)})})]}),e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx("div",{className:"inline-flex items-center gap-2",children:e.jsx("span",{className:"text-gray-500   dark:text-neutral-50",children:r("generalSettings.settings.hideCurrentChatModelSettings.label")})}),e.jsx("div",{children:e.jsx(P,{checked:M,onChange:a=>q(a)})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs mb-2  dark:text-white",children:[r("generalSettings.settings.speechRecognitionLang.label")," "]}),e.jsx(h,{placeholder:r("generalSettings.settings.speechRecognitionLang.placeholder"),allowClear:!0,showSearch:!0,options:xe,value:E,filterOption:(a,t)=>t.label.toLowerCase().indexOf(a.toLowerCase())>=0||t.value.toLowerCase().indexOf(a.toLowerCase())>=0,onChange:a=>{B(a)},style:{width:"100%"}})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-xs mb-2  dark:text-white",children:[r("generalSettings.settings.language.label")," "]}),e.jsx(h,{placeholder:r("generalSettings.settings.language.placeholder"),showSearch:!0,options:I,value:T,filterOption:(a,t)=>t.label.toLowerCase().indexOf(a.toLowerCase())>=0||t.value.toLowerCase().indexOf(a.toLowerCase())>=0,onChange:a=>{K(a)},style:{width:"100%"}})]})]}),e.jsx("div",{className:"border border-gray-300 dark:border-gray-700 rounded p-4 bg-white dark:bg-[#171717]",children:e.jsx(me,{hideBorder:!0})}),e.jsx("div",{className:"border border-gray-300 dark:border-gray-700 rounded p-4 bg-white dark:bg-[#171717]",children:e.jsx(he,{hideBorder:!0})}),e.jsxs("div",{className:"border border-gray-300 dark:border-gray-700 rounded p-4 bg-white dark:bg-[#171717]",children:[e.jsxs("h2",{className:"text-md mb-4 font-semibold dark:text-white",children:[r("generalSettings.settings.darkMode.label")," "]}),F==="dark"?e.jsxs("button",{onClick:f,className:"select-none inline-flex text-center w-full rounded-lg border border-gray-900 py-3 px-6 justify-center font-sans text-xs font-bold uppercase text-gray-900 transition-all hover:opacity-75 focus:ring focus:ring-gray-300 active:opacity-[0.85] disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none dark:border-gray-100 dark:text-white dark:hover:opacity-75 dark:focus:ring-dark dark:active:opacity-75 dark:disabled:pointer-events-none dark:disabled:opacity-50 dark:disabled:shadow-none",children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),r("generalSettings.settings.darkMode.options.light")]}):e.jsxs("button",{onClick:f,className:"select-none inline-flex text-center w-full rounded-lg border border-gray-900 py-3 px-6 justify-center font-sans text-xs font-bold uppercase text-gray-900 transition-all hover:opacity-75 focus:ring focus:ring-gray-300 active:opacity-[0.85] disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none dark:border-gray-100 dark:text-white dark:hover:opacity-75 dark:focus:ring-dark dark:active:opacity-75 dark:disabled:pointer-events-none dark:disabled:opacity-50 dark:disabled:shadow-none",children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),r("generalSettings.settings.darkMode.options.dark")]})]})]})},Se=()=>{const{t:r,i18n:l}=N("common"),i=(l==null?void 0:l.dir())==="rtl";return e.jsxs("div",{className:"flex px-3 justify-start gap-3 bg-white dark:bg-[#171717] border-b border-gray-300 dark:border-gray-700  py-4 items-center",children:[e.jsx(ce,{to:"/",children:i?e.jsx(fe,{className:"h-5 w-5 text-gray-500"}):e.jsx(ve,{className:"h-5 w-5 text-gray-500"})}),e.jsxs("div",{className:"focus:outline-none focus-visible:ring-2 focus-visible:ring-pink-700 flex items-center dark:text-white",children:[e.jsx("img",{className:"h-6 w-auto",src:je,alt:r("pageAssist")}),e.jsx("span",{className:"ml-1 text-sm ",children:r("pageAssist")})]})]})},Ne=()=>e.jsxs("div",{className:"flex bg-neutral-50 dark:bg-[#171717] flex-col min-h-screen mx-auto max-w-7xl",children:[e.jsx("div",{className:"sticky bg-white dark:bg-[#171717] top-0 z-10",children:e.jsx(Se,{})}),e.jsx(we,{})]});export{Ne as default};
