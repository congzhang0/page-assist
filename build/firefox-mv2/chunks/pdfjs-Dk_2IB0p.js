var es=Object.defineProperty;var ns=(t,e,n)=>e in t?es(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ne=(t,e,n)=>(ns(t,typeof e!="symbol"?e+"":e,n),n),Ge=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var l=(t,e,n)=>(Ge(t,e,"read from private field"),n?n.call(t):e.get(t)),j=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},it=(t,e,n,s)=>(Ge(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n);var fe=(t,e,n,s)=>({set _(r){it(t,e,r,n)},get _(){return l(t,e,s)}}),K=(t,e,n)=>(Ge(t,e,"access private method"),n);import{r as reactExports,X as _toConsumableArray,aN as useSafeState,R as React,ak as useComposeRef,n as classNames,l as _objectSpread2,s as _typeof,p as _extends,_ as _slicedToArray,k as CSSMotion,aQ as contains$1,K as canUseDom,a2 as useLocale,aR as getConfirmLocale,aL as DisabledContextProvider,v as genStyleHooks,z as unit,y as resetComponent,ai as genFocusStyle,w as merge$1,A as ConfigContext,aj as genSubStyleComponent,Z as clearFix,C as ConfigProvider,ae as useToken,an as globalConfig,a3 as localeValues,i as useLayoutEffect,af as TinyColor,h as getDefaultExportFromCjs,a5 as getAugmentedNamespace}from"./FontSizeProvider-D3enan1E.js";import{B as Button,aP as convertLegacyProps,p as pickAttrs,aQ as useId,n as KeyCode,aa as Portal,b as CloseOutlined,g as useEvent,K as Keyframe,aR as initMotion,J as initZoomMotion,r as useCSSVarCls,Z as useZIndex,$ as NoCompactStyle,ab as NoFormStyle,a7 as zIndexContext,V as getTransitionName,y as ExclamationCircleFilled,C as CloseCircleFilled,c as CheckCircleFilled,x as InfoCircleFilled,w as CONTAINER_MAX_OFFSET,aS as unmount,ad as render$2,aT as useResponsiveObserver,A as AntdIcon,aU as Compact,t as toArray$1,aV as useStyle$2,aW as withPureRenderTheme,aX as genPresetColor,o as omit,aY as isPresetColor,aZ as isPresetStatusColor,W as Wave,a_ as replaceElement$1}from"./browser-polyfill-0iagK1yo.js";function _mergeNamespaces(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in t)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}function usePatchElement(){const[t,e]=reactExports.useState([]),n=reactExports.useCallback(s=>(e(r=>[].concat(_toConsumableArray(r),[s])),()=>{e(r=>r.filter(i=>i!==s))}),[]);return[t,n]}function isThenable(t){return!!(t&&t.then)}const ActionButton=t=>{const{type:e,children:n,prefixCls:s,buttonProps:r,close:i,autoFocus:a,emitEvent:c,isSilent:o,quitOnNullishReturnValue:m,actionFn:h}=t,A=reactExports.useRef(!1),y=reactExports.useRef(null),[C,D]=useSafeState(!1),b=function(){i==null||i.apply(void 0,arguments)};reactExports.useEffect(()=>{let v=null;return a&&(v=setTimeout(()=>{var M;(M=y.current)===null||M===void 0||M.focus()})),()=>{v&&clearTimeout(v)}},[]);const S=v=>{isThenable(v)&&(D(!0),v.then(function(){D(!1,!0),b.apply(void 0,arguments),A.current=!1},M=>{if(D(!1,!0),A.current=!1,!(o!=null&&o()))return Promise.reject(M)}))},O=v=>{if(A.current)return;if(A.current=!0,!h){b();return}let M;if(c){if(M=h(v),m&&!isThenable(M)){A.current=!1,b(v);return}}else if(h.length)M=h(i),A.current=!1;else if(M=h(),!M){b();return}S(M)};return reactExports.createElement(Button,Object.assign({},convertLegacyProps(e),{onClick:O,loading:C,prefixCls:s},r,{ref:y}),n)},ActionButton$1=ActionButton,ModalContext=React.createContext({}),{Provider:ModalContextProvider}=ModalContext,ConfirmCancelBtn=()=>{const{autoFocusButton:t,cancelButtonProps:e,cancelTextLocale:n,isSilent:s,mergedOkCancel:r,rootPrefixCls:i,close:a,onCancel:c,onConfirm:o}=reactExports.useContext(ModalContext);return r?React.createElement(ActionButton$1,{isSilent:s,actionFn:c,close:function(){a==null||a.apply(void 0,arguments),o==null||o(!1)},autoFocus:t==="cancel",buttonProps:e,prefixCls:`${i}-btn`},n):null},CancelBtn=ConfirmCancelBtn,ConfirmOkBtn=()=>{const{autoFocusButton:t,close:e,isSilent:n,okButtonProps:s,rootPrefixCls:r,okTextLocale:i,okType:a,onConfirm:c,onOk:o}=reactExports.useContext(ModalContext);return React.createElement(ActionButton$1,{isSilent:n,type:a||"primary",actionFn:o,close:function(){e==null||e.apply(void 0,arguments),c==null||c(!0)},autoFocus:t==="ok",buttonProps:s,prefixCls:`${r}-btn`},i)},OkBtn=ConfirmOkBtn;var RefContext=reactExports.createContext({});function getMotionName(t,e,n){var s=e;return!s&&n&&(s="".concat(t,"-").concat(n)),s}function getScroll(t,e){var n=t["page".concat(e?"Y":"X","Offset")],s="scroll".concat(e?"Top":"Left");if(typeof n!="number"){var r=t.document;n=r.documentElement[s],typeof n!="number"&&(n=r.body[s])}return n}function offset(t){var e=t.getBoundingClientRect(),n={left:e.left,top:e.top},s=t.ownerDocument,r=s.defaultView||s.parentWindow;return n.left+=getScroll(r),n.top+=getScroll(r,!0),n}const MemoChildren=reactExports.memo(function(t){var e=t.children;return e},function(t,e){var n=e.shouldUpdate;return!n});var sentinelStyle={width:0,height:0,overflow:"hidden",outline:"none"},entityStyle={outline:"none"},Panel=React.forwardRef(function(t,e){var n=t.prefixCls,s=t.className,r=t.style,i=t.title,a=t.ariaId,c=t.footer,o=t.closable,m=t.closeIcon,h=t.onClose,A=t.children,y=t.bodyStyle,C=t.bodyProps,D=t.modalRender,b=t.onMouseDown,S=t.onMouseUp,O=t.holderRef,v=t.visible,M=t.forceRender,R=t.width,g=t.height,f=t.classNames,L=t.styles,N=React.useContext(RefContext),E=N.panel,F=useComposeRef(O,E),P=reactExports.useRef(),W=reactExports.useRef(),z=reactExports.useRef();React.useImperativeHandle(e,function(){return{focus:function(){var Et;(Et=z.current)===null||Et===void 0||Et.focus()},changeActive:function(Et){var gt=document,G=gt.activeElement;Et&&G===W.current?P.current.focus():!Et&&G===P.current&&W.current.focus()}}});var w={};R!==void 0&&(w.width=R),g!==void 0&&(w.height=g);var Y;c&&(Y=React.createElement("div",{className:classNames("".concat(n,"-footer"),f==null?void 0:f.footer),style:_objectSpread2({},L==null?void 0:L.footer)},c));var ot;i&&(ot=React.createElement("div",{className:classNames("".concat(n,"-header"),f==null?void 0:f.header),style:_objectSpread2({},L==null?void 0:L.header)},React.createElement("div",{className:"".concat(n,"-title"),id:a},i)));var et=reactExports.useMemo(function(){return _typeof(o)==="object"&&o!==null?o:o?{closeIcon:m??React.createElement("span",{className:"".concat(n,"-close-x")})}:{}},[o,m]),q=pickAttrs(et,!0),ht;o&&(ht=React.createElement("button",_extends({type:"button",onClick:h,"aria-label":"Close"},q,{className:"".concat(n,"-close")}),et.closeIcon));var dt=React.createElement("div",{className:classNames("".concat(n,"-content"),f==null?void 0:f.content),style:L==null?void 0:L.content},ht,ot,React.createElement("div",_extends({className:classNames("".concat(n,"-body"),f==null?void 0:f.body),style:_objectSpread2(_objectSpread2({},y),L==null?void 0:L.body)},C),A),Y);return React.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":i?a:null,"aria-modal":"true",ref:F,style:_objectSpread2(_objectSpread2({},r),w),className:classNames(n,s),onMouseDown:b,onMouseUp:S},React.createElement("div",{tabIndex:0,ref:P,style:sentinelStyle,"aria-hidden":"true"}),React.createElement("div",{ref:z,tabIndex:-1,style:entityStyle},React.createElement(MemoChildren,{shouldUpdate:v||M},D?D(dt):dt)),React.createElement("div",{tabIndex:0,ref:W,style:sentinelStyle,"aria-hidden":"true"}))}),Content=reactExports.forwardRef(function(t,e){var n=t.prefixCls,s=t.title,r=t.style,i=t.className,a=t.visible,c=t.forceRender,o=t.destroyOnClose,m=t.motionName,h=t.ariaId,A=t.onVisibleChanged,y=t.mousePosition,C=reactExports.useRef(),D=reactExports.useState(),b=_slicedToArray(D,2),S=b[0],O=b[1],v={};S&&(v.transformOrigin=S);function M(){var R=offset(C.current);O(y?"".concat(y.x-R.left,"px ").concat(y.y-R.top,"px"):"")}return reactExports.createElement(CSSMotion,{visible:a,onVisibleChanged:A,onAppearPrepare:M,onEnterPrepare:M,forceRender:c,motionName:m,removeOnLeave:o,ref:C},function(R,g){var f=R.className,L=R.style;return reactExports.createElement(Panel,_extends({},t,{ref:e,title:s,ariaId:h,prefixCls:n,holderRef:g,style:_objectSpread2(_objectSpread2(_objectSpread2({},L),r),v),className:classNames(i,f)}))})});Content.displayName="Content";function Mask(t){var e=t.prefixCls,n=t.style,s=t.visible,r=t.maskProps,i=t.motionName,a=t.className;return reactExports.createElement(CSSMotion,{key:"mask",visible:s,motionName:i,leavedClassName:"".concat(e,"-mask-hidden")},function(c,o){var m=c.className,h=c.style;return reactExports.createElement("div",_extends({ref:o,style:_objectSpread2(_objectSpread2({},h),n),className:classNames("".concat(e,"-mask"),m,a)},r))})}function Dialog(t){var e=t.prefixCls,n=e===void 0?"rc-dialog":e,s=t.zIndex,r=t.visible,i=r===void 0?!1:r,a=t.keyboard,c=a===void 0?!0:a,o=t.focusTriggerAfterClose,m=o===void 0?!0:o,h=t.wrapStyle,A=t.wrapClassName,y=t.wrapProps,C=t.onClose,D=t.afterOpenChange,b=t.afterClose,S=t.transitionName,O=t.animation,v=t.closable,M=v===void 0?!0:v,R=t.mask,g=R===void 0?!0:R,f=t.maskTransitionName,L=t.maskAnimation,N=t.maskClosable,E=N===void 0?!0:N,F=t.maskStyle,P=t.maskProps,W=t.rootClassName,z=t.classNames,w=t.styles,Y=reactExports.useRef(),ot=reactExports.useRef(),et=reactExports.useRef(),q=reactExports.useState(i),ht=_slicedToArray(q,2),dt=ht[0],Et=ht[1],gt=useId();function G(){contains$1(ot.current,document.activeElement)||(Y.current=document.activeElement)}function u(){if(!contains$1(ot.current,document.activeElement)){var Q;(Q=et.current)===null||Q===void 0||Q.focus()}}function T(Q){if(Q)u();else{if(Et(!1),g&&Y.current&&m){try{Y.current.focus({preventScroll:!0})}catch{}Y.current=null}dt&&(b==null||b())}D==null||D(Q)}function p(Q){C==null||C(Q)}var _=reactExports.useRef(!1),I=reactExports.useRef(),k=function(){clearTimeout(I.current),_.current=!0},B=function(){I.current=setTimeout(function(){_.current=!1})},X=null;E&&(X=function(Q){_.current?_.current=!1:ot.current===Q.target&&p(Q)});function nt(Q){if(c&&Q.keyCode===KeyCode.ESC){Q.stopPropagation(),p(Q);return}i&&Q.keyCode===KeyCode.TAB&&et.current.changeActive(!Q.shiftKey)}return reactExports.useEffect(function(){i&&(Et(!0),G())},[i]),reactExports.useEffect(function(){return function(){clearTimeout(I.current)}},[]),reactExports.createElement("div",_extends({className:classNames("".concat(n,"-root"),W)},pickAttrs(t,{data:!0})),reactExports.createElement(Mask,{prefixCls:n,visible:g&&i,motionName:getMotionName(n,f,L),style:_objectSpread2(_objectSpread2({zIndex:s},F),w==null?void 0:w.mask),maskProps:P,className:z==null?void 0:z.mask}),reactExports.createElement("div",_extends({tabIndex:-1,onKeyDown:nt,className:classNames("".concat(n,"-wrap"),A,z==null?void 0:z.wrapper),ref:ot,onClick:X,style:_objectSpread2(_objectSpread2(_objectSpread2({zIndex:s},h),w==null?void 0:w.wrapper),{},{display:dt?null:"none"})},y),reactExports.createElement(Content,_extends({},t,{onMouseDown:k,onMouseUp:B,ref:et,closable:M,ariaId:gt,prefixCls:n,visible:i&&dt,onClose:p,onVisibleChanged:T,motionName:getMotionName(n,S,O)}))))}var DialogWrap=function(t){var e=t.visible,n=t.getContainer,s=t.forceRender,r=t.destroyOnClose,i=r===void 0?!1:r,a=t.afterClose,c=t.panelRef,o=reactExports.useState(e),m=_slicedToArray(o,2),h=m[0],A=m[1],y=reactExports.useMemo(function(){return{panel:c}},[c]);return reactExports.useEffect(function(){e&&A(!0)},[e]),!s&&i&&!h?null:reactExports.createElement(RefContext.Provider,{value:y},reactExports.createElement(Portal,{open:e||s||h,autoDestroy:!1,getContainer:n,autoLock:e||h},reactExports.createElement(Dialog,_extends({},t,{destroyOnClose:i,afterClose:function(){a==null||a(),A(!1)}}))))};DialogWrap.displayName="Dialog";function pickClosable(t){if(t)return{closable:t.closable,closeIcon:t.closeIcon}}function useClosableConfig(t){const{closable:e,closeIcon:n}=t||{};return React.useMemo(()=>{if(!e&&(e===!1||n===!1||n===null))return!1;if(e===void 0&&n===void 0)return null;let s={closeIcon:typeof n!="boolean"&&n!==null?n:void 0};return e&&typeof e=="object"&&(s=Object.assign(Object.assign({},s),e)),s},[e,n])}function assignWithoutUndefined(){const t={};for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return n.forEach(r=>{r&&Object.keys(r).forEach(i=>{r[i]!==void 0&&(t[i]=r[i])})}),t}const EmptyFallbackCloseCollection={};function useClosable(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:EmptyFallbackCloseCollection;const s=useClosableConfig(t),r=useClosableConfig(e),i=React.useMemo(()=>Object.assign({closeIcon:React.createElement(CloseOutlined,null)},n),[n]),a=React.useMemo(()=>s===!1?!1:s?assignWithoutUndefined(i,r,s):r===!1?!1:r?assignWithoutUndefined(i,r):i.closable?i:!1,[s,r,i]);return React.useMemo(()=>{if(a===!1)return[!1,null];const{closeIconRender:c}=i,{closeIcon:o}=a;let m=o;if(m!=null){c&&(m=c(o));const h=pickAttrs(a,!0);Object.keys(h).length&&(m=React.isValidElement(m)?React.cloneElement(m,h):React.createElement("span",Object.assign({},h),m))}return[!0,m]},[a,i])}const canUseDocElement=()=>canUseDom()&&window.document.documentElement;function voidFunc(){}const WatermarkContext=reactExports.createContext({add:voidFunc,remove:voidFunc});function usePanelRef(t){const e=reactExports.useContext(WatermarkContext),n=reactExports.useRef();return useEvent(s=>{if(s){const r=t?s.querySelector(t):s;e.add(r),n.current=r}else e.remove(n.current)})}const NormalCancelBtn=()=>{const{cancelButtonProps:t,cancelTextLocale:e,onCancel:n}=reactExports.useContext(ModalContext);return React.createElement(Button,Object.assign({onClick:n},t),e)},NormalCancelBtn$1=NormalCancelBtn,NormalOkBtn=()=>{const{confirmLoading:t,okButtonProps:e,okType:n,okTextLocale:s,onOk:r}=reactExports.useContext(ModalContext);return React.createElement(Button,Object.assign({},convertLegacyProps(n),{loading:t,onClick:r},e),s)},NormalOkBtn$1=NormalOkBtn;function renderCloseIcon(t,e){return React.createElement("span",{className:`${t}-close-x`},e||React.createElement(CloseOutlined,{className:`${t}-close-icon`}))}const Footer=t=>{const{okText:e,okType:n="primary",cancelText:s,confirmLoading:r,onOk:i,onCancel:a,okButtonProps:c,cancelButtonProps:o,footer:m}=t,[h]=useLocale("Modal",getConfirmLocale()),A=e||(h==null?void 0:h.okText),y=s||(h==null?void 0:h.cancelText),C={confirmLoading:r,okButtonProps:c,cancelButtonProps:o,okTextLocale:A,cancelTextLocale:y,okType:n,onOk:i,onCancel:a},D=React.useMemo(()=>C,_toConsumableArray(Object.values(C)));let b;return typeof m=="function"||typeof m>"u"?(b=React.createElement(React.Fragment,null,React.createElement(NormalCancelBtn$1,null),React.createElement(NormalOkBtn$1,null)),typeof m=="function"&&(b=m(b,{OkBtn:NormalOkBtn$1,CancelBtn:NormalCancelBtn$1})),b=React.createElement(ModalContextProvider,{value:D},b)):b=m,React.createElement(DisabledContextProvider,{disabled:!1},b)},fadeIn=new Keyframe("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),fadeOut=new Keyframe("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),initFadeMotion=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:n}=t,s=`${n}-fade`,r=e?"&":"";return[initMotion(s,fadeIn,fadeOut,t.motionDurationMid,e),{[`
        ${r}${s}-enter,
        ${r}${s}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${r}${s}-leave`]:{animationTimingFunction:"linear"}}]};function box(t){return{position:t,inset:0}}const genModalMaskStyle=t=>{const{componentCls:e,antCls:n}=t;return[{[`${e}-root`]:{[`${e}${n}-zoom-enter, ${e}${n}-zoom-appear`]:{transform:"none",opacity:0,animationDuration:t.motionDurationSlow,userSelect:"none"},[`${e}${n}-zoom-leave ${e}-content`]:{pointerEvents:"none"},[`${e}-mask`]:Object.assign(Object.assign({},box("fixed")),{zIndex:t.zIndexPopupBase,height:"100%",backgroundColor:t.colorBgMask,pointerEvents:"none",[`${e}-hidden`]:{display:"none"}}),[`${e}-wrap`]:Object.assign(Object.assign({},box("fixed")),{zIndex:t.zIndexPopupBase,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"})}},{[`${e}-root`]:initFadeMotion(t)}]},genModalStyle=t=>{const{componentCls:e}=t;return[{[`${e}-root`]:{[`${e}-wrap-rtl`]:{direction:"rtl"},[`${e}-centered`]:{textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'},[e]:{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"}},[`@media (max-width: ${t.screenSMMax}px)`]:{[e]:{maxWidth:"calc(100vw - 16px)",margin:`${unit(t.marginXS)} auto`},[`${e}-centered`]:{[e]:{flex:1}}}}},{[e]:Object.assign(Object.assign({},resetComponent(t)),{pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:`calc(100vw - ${unit(t.calc(t.margin).mul(2).equal())})`,margin:"0 auto",paddingBottom:t.paddingLG,[`${e}-title`]:{margin:0,color:t.titleColor,fontWeight:t.fontWeightStrong,fontSize:t.titleFontSize,lineHeight:t.titleLineHeight,wordWrap:"break-word"},[`${e}-content`]:{position:"relative",backgroundColor:t.contentBg,backgroundClip:"padding-box",border:0,borderRadius:t.borderRadiusLG,boxShadow:t.boxShadow,pointerEvents:"auto",padding:t.contentPadding},[`${e}-close`]:Object.assign({position:"absolute",top:t.calc(t.modalHeaderHeight).sub(t.modalCloseBtnSize).div(2).equal(),insetInlineEnd:t.calc(t.modalHeaderHeight).sub(t.modalCloseBtnSize).div(2).equal(),zIndex:t.calc(t.zIndexPopupBase).add(10).equal(),padding:0,color:t.modalCloseIconColor,fontWeight:t.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:t.borderRadiusSM,width:t.modalCloseBtnSize,height:t.modalCloseBtnSize,border:0,outline:0,cursor:"pointer",transition:`color ${t.motionDurationMid}, background-color ${t.motionDurationMid}`,"&-x":{display:"flex",fontSize:t.fontSizeLG,fontStyle:"normal",lineHeight:`${unit(t.modalCloseBtnSize)}`,justifyContent:"center",textTransform:"none",textRendering:"auto"},"&:hover":{color:t.modalCloseIconHoverColor,backgroundColor:t.colorBgTextHover,textDecoration:"none"},"&:active":{backgroundColor:t.colorBgTextActive}},genFocusStyle(t)),[`${e}-header`]:{color:t.colorText,background:t.headerBg,borderRadius:`${unit(t.borderRadiusLG)} ${unit(t.borderRadiusLG)} 0 0`,marginBottom:t.headerMarginBottom,padding:t.headerPadding,borderBottom:t.headerBorderBottom},[`${e}-body`]:{fontSize:t.fontSize,lineHeight:t.lineHeight,wordWrap:"break-word",padding:t.bodyPadding},[`${e}-footer`]:{textAlign:"end",background:t.footerBg,marginTop:t.footerMarginTop,padding:t.footerPadding,borderTop:t.footerBorderTop,borderRadius:t.footerBorderRadius,[`> ${t.antCls}-btn + ${t.antCls}-btn`]:{marginInlineStart:t.marginXS}},[`${e}-open`]:{overflow:"hidden"}})},{[`${e}-pure-panel`]:{top:"auto",padding:0,display:"flex",flexDirection:"column",[`${e}-content,
          ${e}-body,
          ${e}-confirm-body-wrapper`]:{display:"flex",flexDirection:"column",flex:"auto"},[`${e}-confirm-body`]:{marginBottom:"auto"}}}]},genRTLStyle=t=>{const{componentCls:e}=t;return{[`${e}-root`]:{[`${e}-wrap-rtl`]:{direction:"rtl",[`${e}-confirm-body`]:{direction:"rtl"}}}}},prepareToken$1=t=>{const e=t.padding,n=t.fontSizeHeading5,s=t.lineHeightHeading5;return merge$1(t,{modalHeaderHeight:t.calc(t.calc(s).mul(n).equal()).add(t.calc(e).mul(2).equal()).equal(),modalFooterBorderColorSplit:t.colorSplit,modalFooterBorderStyle:t.lineType,modalFooterBorderWidth:t.lineWidth,modalCloseIconColor:t.colorIcon,modalCloseIconHoverColor:t.colorIconHover,modalCloseBtnSize:t.controlHeight,modalConfirmIconSize:t.fontHeight,modalTitleHeight:t.calc(t.titleFontSize).mul(t.titleLineHeight).equal()})},prepareComponentToken$1=t=>({footerBg:"transparent",headerBg:t.colorBgElevated,titleLineHeight:t.lineHeightHeading5,titleFontSize:t.fontSizeHeading5,contentBg:t.colorBgElevated,titleColor:t.colorTextHeading,contentPadding:t.wireframe?0:`${unit(t.paddingMD)} ${unit(t.paddingContentHorizontalLG)}`,headerPadding:t.wireframe?`${unit(t.padding)} ${unit(t.paddingLG)}`:0,headerBorderBottom:t.wireframe?`${unit(t.lineWidth)} ${t.lineType} ${t.colorSplit}`:"none",headerMarginBottom:t.wireframe?0:t.marginXS,bodyPadding:t.wireframe?t.paddingLG:0,footerPadding:t.wireframe?`${unit(t.paddingXS)} ${unit(t.padding)}`:0,footerBorderTop:t.wireframe?`${unit(t.lineWidth)} ${t.lineType} ${t.colorSplit}`:"none",footerBorderRadius:t.wireframe?`0 0 ${unit(t.borderRadiusLG)} ${unit(t.borderRadiusLG)}`:0,footerMarginTop:t.wireframe?0:t.marginSM,confirmBodyPadding:t.wireframe?`${unit(t.padding*2)} ${unit(t.padding*2)} ${unit(t.paddingLG)}`:0,confirmIconMarginInlineEnd:t.wireframe?t.margin:t.marginSM,confirmBtnsMarginTop:t.wireframe?t.marginLG:t.marginSM}),useStyle$1=genStyleHooks("Modal",t=>{const e=prepareToken$1(t);return[genModalStyle(e),genRTLStyle(e),genModalMaskStyle(e),initZoomMotion(e,"zoom")]},prepareComponentToken$1,{unitless:{titleLineHeight:!0}});var __rest$6=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n};let mousePosition;const getClickPosition=t=>{mousePosition={x:t.pageX,y:t.pageY},setTimeout(()=>{mousePosition=null},100)};canUseDocElement()&&document.documentElement.addEventListener("click",getClickPosition,!0);const Modal$2=t=>{var e;const{getPopupContainer:n,getPrefixCls:s,direction:r,modal:i}=reactExports.useContext(ConfigContext),a=dt=>{const{onCancel:Et}=t;Et==null||Et(dt)},c=dt=>{const{onOk:Et}=t;Et==null||Et(dt)},{prefixCls:o,className:m,rootClassName:h,open:A,wrapClassName:y,centered:C,getContainer:D,focusTriggerAfterClose:b=!0,style:S,visible:O,width:v=520,footer:M,classNames:R,styles:g}=t,f=__rest$6(t,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles"]),L=s("modal",o),N=s(),E=useCSSVarCls(L),[F,P,W]=useStyle$1(L,E),z=classNames(y,{[`${L}-centered`]:!!C,[`${L}-wrap-rtl`]:r==="rtl"}),w=M!==null&&reactExports.createElement(Footer,Object.assign({},t,{onOk:c,onCancel:a})),[Y,ot]=useClosable(pickClosable(t),pickClosable(i),{closable:!0,closeIcon:reactExports.createElement(CloseOutlined,{className:`${L}-close-icon`}),closeIconRender:dt=>renderCloseIcon(L,dt)}),et=usePanelRef(`.${L}-content`),[q,ht]=useZIndex("Modal",f.zIndex);return F(reactExports.createElement(NoCompactStyle,null,reactExports.createElement(NoFormStyle,{status:!0,override:!0},reactExports.createElement(zIndexContext.Provider,{value:ht},reactExports.createElement(DialogWrap,Object.assign({width:v},f,{zIndex:q,getContainer:D===void 0?n:D,prefixCls:L,rootClassName:classNames(P,h,W,E),footer:w,visible:A??O,mousePosition:(e=f.mousePosition)!==null&&e!==void 0?e:mousePosition,onClose:a,closable:Y,closeIcon:ot,focusTriggerAfterClose:b,transitionName:getTransitionName(N,"zoom",t.transitionName),maskTransitionName:getTransitionName(N,"fade",t.maskTransitionName),className:classNames(P,m,i==null?void 0:i.className),style:Object.assign(Object.assign({},i==null?void 0:i.style),S),classNames:Object.assign(Object.assign(Object.assign({},i==null?void 0:i.classNames),R),{wrapper:classNames(z,R==null?void 0:R.wrapper)}),styles:Object.assign(Object.assign({},i==null?void 0:i.styles),g),panelRef:et}))))))},OriginModal=Modal$2,genModalConfirmStyle=t=>{const{componentCls:e,titleFontSize:n,titleLineHeight:s,modalConfirmIconSize:r,fontSize:i,lineHeight:a,modalTitleHeight:c,fontHeight:o,confirmBodyPadding:m}=t,h=`${e}-confirm`;return{[h]:{"&-rtl":{direction:"rtl"},[`${t.antCls}-modal-header`]:{display:"none"},[`${h}-body-wrapper`]:Object.assign({},clearFix()),[`&${e} ${e}-body`]:{padding:m},[`${h}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${t.iconCls}`]:{flex:"none",fontSize:r,marginInlineEnd:t.confirmIconMarginInlineEnd,marginTop:t.calc(t.calc(o).sub(r).equal()).div(2).equal()},[`&-has-title > ${t.iconCls}`]:{marginTop:t.calc(t.calc(c).sub(r).equal()).div(2).equal()}},[`${h}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:t.marginXS},[`${t.iconCls} + ${h}-paragraph`]:{maxWidth:`calc(100% - ${unit(t.calc(t.modalConfirmIconSize).add(t.marginSM).equal())})`},[`${h}-title`]:{color:t.colorTextHeading,fontWeight:t.fontWeightStrong,fontSize:n,lineHeight:s},[`${h}-content`]:{color:t.colorText,fontSize:i,lineHeight:a},[`${h}-btns`]:{textAlign:"end",marginTop:t.confirmBtnsMarginTop,[`${t.antCls}-btn + ${t.antCls}-btn`]:{marginBottom:0,marginInlineStart:t.marginXS}}},[`${h}-error ${h}-body > ${t.iconCls}`]:{color:t.colorError},[`${h}-warning ${h}-body > ${t.iconCls},
        ${h}-confirm ${h}-body > ${t.iconCls}`]:{color:t.colorWarning},[`${h}-info ${h}-body > ${t.iconCls}`]:{color:t.colorInfo},[`${h}-success ${h}-body > ${t.iconCls}`]:{color:t.colorSuccess}}},Confirm=genSubStyleComponent(["Modal","confirm"],t=>{const e=prepareToken$1(t);return[genModalConfirmStyle(e)]},prepareComponentToken$1,{order:-1e3});var __rest$5=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n};function ConfirmContent(t){const{prefixCls:e,icon:n,okText:s,cancelText:r,confirmPrefixCls:i,type:a,okCancel:c,footer:o,locale:m}=t,h=__rest$5(t,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let A=n;if(!n&&n!==null)switch(a){case"info":A=reactExports.createElement(InfoCircleFilled,null);break;case"success":A=reactExports.createElement(CheckCircleFilled,null);break;case"error":A=reactExports.createElement(CloseCircleFilled,null);break;default:A=reactExports.createElement(ExclamationCircleFilled,null)}const y=c??a==="confirm",C=t.autoFocusButton===null?!1:t.autoFocusButton||"ok",[D]=useLocale("Modal"),b=m||D,S=s||(y?b==null?void 0:b.okText:b==null?void 0:b.justOkText),O=r||(b==null?void 0:b.cancelText),v=Object.assign({autoFocusButton:C,cancelTextLocale:O,okTextLocale:S,mergedOkCancel:y},h),M=reactExports.useMemo(()=>v,_toConsumableArray(Object.values(v))),R=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(CancelBtn,null),reactExports.createElement(OkBtn,null)),g=t.title!==void 0&&t.title!==null,f=`${i}-body`;return reactExports.createElement("div",{className:`${i}-body-wrapper`},reactExports.createElement("div",{className:classNames(f,{[`${f}-has-title`]:g})},A,reactExports.createElement("div",{className:`${i}-paragraph`},g&&reactExports.createElement("span",{className:`${i}-title`},t.title),reactExports.createElement("div",{className:`${i}-content`},t.content))),o===void 0||typeof o=="function"?reactExports.createElement(ModalContextProvider,{value:M},reactExports.createElement("div",{className:`${i}-btns`},typeof o=="function"?o(R,{OkBtn,CancelBtn}):R)):o,reactExports.createElement(Confirm,{prefixCls:e}))}const ConfirmDialog=t=>{const{close:e,zIndex:n,afterClose:s,open:r,keyboard:i,centered:a,getContainer:c,maskStyle:o,direction:m,prefixCls:h,wrapClassName:A,rootPrefixCls:y,bodyStyle:C,closable:D=!1,closeIcon:b,modalRender:S,focusTriggerAfterClose:O,onConfirm:v,styles:M}=t,R=`${h}-confirm`,g=t.width||416,f=t.style||{},L=t.mask===void 0?!0:t.mask,N=t.maskClosable===void 0?!1:t.maskClosable,E=classNames(R,`${R}-${t.type}`,{[`${R}-rtl`]:m==="rtl"},t.className),[,F]=useToken(),P=reactExports.useMemo(()=>n!==void 0?n:F.zIndexPopupBase+CONTAINER_MAX_OFFSET,[n,F]);return reactExports.createElement(OriginModal,{prefixCls:h,className:E,wrapClassName:classNames({[`${R}-centered`]:!!t.centered},A),onCancel:()=>{e==null||e({triggerCancel:!0}),v==null||v(!1)},open:r,title:"",footer:null,transitionName:getTransitionName(y||"","zoom",t.transitionName),maskTransitionName:getTransitionName(y||"","fade",t.maskTransitionName),mask:L,maskClosable:N,style:f,styles:Object.assign({body:C,mask:o},M),width:g,zIndex:P,afterClose:s,keyboard:i,centered:a,getContainer:c,closable:D,closeIcon:b,modalRender:S,focusTriggerAfterClose:O},reactExports.createElement(ConfirmContent,Object.assign({},t,{confirmPrefixCls:R})))},ConfirmDialogWrapper$1=t=>{const{rootPrefixCls:e,iconPrefixCls:n,direction:s,theme:r}=t;return reactExports.createElement(ConfigProvider,{prefixCls:e,iconPrefixCls:n,direction:s,theme:r},reactExports.createElement(ConfirmDialog,Object.assign({},t)))},ConfirmDialog$1=ConfirmDialogWrapper$1,destroyFns=[];let defaultRootPrefixCls="";function getRootPrefixCls(){return defaultRootPrefixCls}const ConfirmDialogWrapper=t=>{var e,n;const{prefixCls:s,getContainer:r,direction:i}=t,a=getConfirmLocale(),c=reactExports.useContext(ConfigContext),o=getRootPrefixCls()||c.getPrefixCls(),m=s||`${o}-modal`;let h=r;return h===!1&&(h=void 0),React.createElement(ConfirmDialog$1,Object.assign({},t,{rootPrefixCls:o,prefixCls:m,iconPrefixCls:c.iconPrefixCls,theme:c.theme,direction:i??c.direction,locale:(n=(e=c.locale)===null||e===void 0?void 0:e.Modal)!==null&&n!==void 0?n:a,getContainer:h}))};function confirm(t){const e=globalConfig(),n=document.createDocumentFragment();let s=Object.assign(Object.assign({},t),{close:c,open:!0}),r;function i(){for(var m=arguments.length,h=new Array(m),A=0;A<m;A++)h[A]=arguments[A];const y=h.some(C=>C&&C.triggerCancel);t.onCancel&&y&&t.onCancel.apply(t,[()=>{}].concat(_toConsumableArray(h.slice(1))));for(let C=0;C<destroyFns.length;C++)if(destroyFns[C]===c){destroyFns.splice(C,1);break}unmount(n)}function a(m){clearTimeout(r),r=setTimeout(()=>{const h=e.getPrefixCls(void 0,getRootPrefixCls()),A=e.getIconPrefixCls(),y=e.getTheme(),C=React.createElement(ConfirmDialogWrapper,Object.assign({},m));render$2(React.createElement(ConfigProvider,{prefixCls:h,iconPrefixCls:A,theme:y},e.holderRender?e.holderRender(C):C),n)})}function c(){for(var m=arguments.length,h=new Array(m),A=0;A<m;A++)h[A]=arguments[A];s=Object.assign(Object.assign({},s),{open:!1,afterClose:()=>{typeof t.afterClose=="function"&&t.afterClose(),i.apply(this,h)}}),s.visible&&delete s.visible,a(s)}function o(m){typeof m=="function"?s=m(s):s=Object.assign(Object.assign({},s),m),a(s)}return a(s),destroyFns.push(c),{destroy:c,update:o}}function withWarn(t){return Object.assign(Object.assign({},t),{type:"warning"})}function withInfo(t){return Object.assign(Object.assign({},t),{type:"info"})}function withSuccess(t){return Object.assign(Object.assign({},t),{type:"success"})}function withError(t){return Object.assign(Object.assign({},t),{type:"error"})}function withConfirm(t){return Object.assign(Object.assign({},t),{type:"confirm"})}function modalGlobalConfig(t){let{rootPrefixCls:e}=t;defaultRootPrefixCls=e}var __rest$4=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n};const HookModal=(t,e)=>{var n,{afterClose:s,config:r}=t,i=__rest$4(t,["afterClose","config"]);const[a,c]=reactExports.useState(!0),[o,m]=reactExports.useState(r),{direction:h,getPrefixCls:A}=reactExports.useContext(ConfigContext),y=A("modal"),C=A(),D=()=>{var v;s(),(v=o.afterClose)===null||v===void 0||v.call(o)},b=function(){c(!1);for(var v=arguments.length,M=new Array(v),R=0;R<v;R++)M[R]=arguments[R];const g=M.some(f=>f&&f.triggerCancel);o.onCancel&&g&&o.onCancel.apply(o,[()=>{}].concat(_toConsumableArray(M.slice(1))))};reactExports.useImperativeHandle(e,()=>({destroy:b,update:v=>{m(M=>Object.assign(Object.assign({},M),v))}}));const S=(n=o.okCancel)!==null&&n!==void 0?n:o.type==="confirm",[O]=useLocale("Modal",localeValues.Modal);return reactExports.createElement(ConfirmDialog$1,Object.assign({prefixCls:y,rootPrefixCls:C},o,{close:b,open:a,afterClose:D,okText:o.okText||(S?O==null?void 0:O.okText:O==null?void 0:O.justOkText),direction:o.direction||h,cancelText:o.cancelText||(O==null?void 0:O.cancelText)},i))},HookModal$1=reactExports.forwardRef(HookModal);let uuid=0;const ElementsHolder=reactExports.memo(reactExports.forwardRef((t,e)=>{const[n,s]=usePatchElement();return reactExports.useImperativeHandle(e,()=>({patchElement:s}),[]),reactExports.createElement(reactExports.Fragment,null,n)}));function useModal(){const t=reactExports.useRef(null),[e,n]=reactExports.useState([]);reactExports.useEffect(()=>{e.length&&(_toConsumableArray(e).forEach(r=>{r()}),n([]))},[e]);const s=reactExports.useCallback(r=>function(i){var a;uuid+=1;const c=reactExports.createRef();let o;const m=new Promise(C=>{o=C});let h=!1,A;const y=reactExports.createElement(HookModal$1,{key:`modal-${uuid}`,config:r(i),ref:c,afterClose:()=>{A==null||A()},isSilent:()=>h,onConfirm:C=>{o(C)}});return A=(a=t.current)===null||a===void 0?void 0:a.patchElement(y),A&&destroyFns.push(A),{destroy:()=>{function C(){var D;(D=c.current)===null||D===void 0||D.destroy()}c.current?C():n(D=>[].concat(_toConsumableArray(D),[C]))},update:C=>{function D(){var b;(b=c.current)===null||b===void 0||b.update(C)}c.current?D():n(b=>[].concat(_toConsumableArray(b),[D]))},then:C=>(h=!0,m.then(C))}},[]);return[reactExports.useMemo(()=>({info:s(withInfo),success:s(withSuccess),error:s(withError),warning:s(withWarn),confirm:s(withConfirm)}),[]),reactExports.createElement(ElementsHolder,{key:"modal-holder",ref:t})]}function useForceUpdate(){const[,t]=reactExports.useReducer(e=>e+1,0);return t}function useBreakpoint(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const e=reactExports.useRef({}),n=useForceUpdate(),s=useResponsiveObserver();return useLayoutEffect(()=>{const r=s.subscribe(i=>{e.current=i,t&&n()});return()=>s.unsubscribe(r)},[]),e.current}var LeftOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"};const LeftOutlinedSvg=LeftOutlined$2;var LeftOutlined=function(t,e){return reactExports.createElement(AntdIcon,_extends({},t,{ref:e,icon:LeftOutlinedSvg}))},RefIcon=reactExports.forwardRef(LeftOutlined);const LeftOutlined$1=RefIcon;function isPresetSize(t){return["small","middle","large"].includes(t)}function isValidGapNumber(t){return t?typeof t=="number"&&!Number.isNaN(t):!1}const SpaceContext=React.createContext({latestIndex:0}),SpaceContextProvider=SpaceContext.Provider,Item=t=>{let{className:e,index:n,children:s,split:r,style:i}=t;const{latestIndex:a}=reactExports.useContext(SpaceContext);return s==null?null:reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("div",{className:e,style:i},s),n<a&&r&&reactExports.createElement("span",{className:`${e}-split`},r))},Item$1=Item;var __rest$3=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n};const Space=reactExports.forwardRef((t,e)=>{var n,s;const{getPrefixCls:r,space:i,direction:a}=reactExports.useContext(ConfigContext),{size:c=(i==null?void 0:i.size)||"small",align:o,className:m,rootClassName:h,children:A,direction:y="horizontal",prefixCls:C,split:D,style:b,wrap:S=!1,classNames:O,styles:v}=t,M=__rest$3(t,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[R,g]=Array.isArray(c)?c:[c,c],f=isPresetSize(g),L=isPresetSize(R),N=isValidGapNumber(g),E=isValidGapNumber(R),F=toArray$1(A,{keepEmpty:!0}),P=o===void 0&&y==="horizontal"?"center":o,W=r("space",C),[z,w,Y]=useStyle$2(W),ot=classNames(W,i==null?void 0:i.className,w,`${W}-${y}`,{[`${W}-rtl`]:a==="rtl",[`${W}-align-${P}`]:P,[`${W}-gap-row-${g}`]:f,[`${W}-gap-col-${R}`]:L},m,h,Y),et=classNames(`${W}-item`,(n=O==null?void 0:O.item)!==null&&n!==void 0?n:(s=i==null?void 0:i.classNames)===null||s===void 0?void 0:s.item);let q=0;const ht=F.map((gt,G)=>{var u,T;gt!=null&&(q=G);const p=gt&&gt.key||`${et}-${G}`;return reactExports.createElement(Item$1,{className:et,key:p,index:G,split:D,style:(u=v==null?void 0:v.item)!==null&&u!==void 0?u:(T=i==null?void 0:i.styles)===null||T===void 0?void 0:T.item},gt)}),dt=reactExports.useMemo(()=>({latestIndex:q}),[q]);if(F.length===0)return null;const Et={};return S&&(Et.flexWrap="wrap"),!L&&E&&(Et.columnGap=R),!f&&N&&(Et.rowGap=g),z(reactExports.createElement("div",Object.assign({ref:e,className:ot,style:Object.assign(Object.assign(Object.assign({},Et),i==null?void 0:i.style),b)},M),reactExports.createElement(SpaceContextProvider,{value:dt},ht)))}),CompoundedSpace=Space;CompoundedSpace.Compact=Compact;const Space$1=CompoundedSpace;var __rest$2=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n};const PurePanel=t=>{const{prefixCls:e,className:n,closeIcon:s,closable:r,type:i,title:a,children:c,footer:o}=t,m=__rest$2(t,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:h}=reactExports.useContext(ConfigContext),A=h(),y=e||h("modal"),C=useCSSVarCls(A),[D,b,S]=useStyle$1(y,C),O=`${y}-confirm`;let v={};return i?v={closable:r??!1,title:"",footer:"",children:reactExports.createElement(ConfirmContent,Object.assign({},t,{prefixCls:y,confirmPrefixCls:O,rootPrefixCls:A,content:c}))}:v={closable:r??!0,title:a,footer:o!==null&&reactExports.createElement(Footer,Object.assign({},t)),children:c},D(reactExports.createElement(Panel,Object.assign({prefixCls:y,className:classNames(b,`${y}-pure-panel`,i&&O,i&&`${O}-${i}`,n,S,C)},m,{closeIcon:renderCloseIcon(y,s),closable:r},v)))},PurePanel$1=withPureRenderTheme(PurePanel);function modalWarn(t){return confirm(withWarn(t))}const Modal=OriginModal;Modal.useModal=useModal,Modal.info=function(t){return confirm(withInfo(t))},Modal.success=function(t){return confirm(withSuccess(t))},Modal.error=function(t){return confirm(withError(t))},Modal.warning=modalWarn,Modal.warn=modalWarn,Modal.confirm=function(t){return confirm(withConfirm(t))},Modal.destroyAll=function(){for(;destroyFns.length;){const t=destroyFns.pop();t&&t()}},Modal.config=modalGlobalConfig,Modal._InternalPanelDoNotUseOrYouWillBeFired=PurePanel$1;const Modal$1=Modal,genBaseStyle=t=>{const{paddingXXS:e,lineWidth:n,tagPaddingHorizontal:s,componentCls:r,calc:i}=t,a=i(s).sub(n).equal(),c=i(e).sub(n).equal();return{[r]:Object.assign(Object.assign({},resetComponent(t)),{display:"inline-block",height:"auto",marginInlineEnd:t.marginXS,paddingInline:a,fontSize:t.tagFontSize,lineHeight:t.tagLineHeight,whiteSpace:"nowrap",background:t.defaultBg,border:`${unit(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderRadius:t.borderRadiusSM,opacity:1,transition:`all ${t.motionDurationMid}`,textAlign:"start",position:"relative",[`&${r}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:t.defaultColor},[`${r}-close-icon`]:{marginInlineStart:c,fontSize:t.tagIconSize,color:t.colorTextDescription,cursor:"pointer",transition:`all ${t.motionDurationMid}`,"&:hover":{color:t.colorTextHeading}},[`&${r}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${t.iconCls}-close, ${t.iconCls}-close:hover`]:{color:t.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${r}-checkable-checked):hover`]:{color:t.colorPrimary,backgroundColor:t.colorFillSecondary},"&:active, &-checked":{color:t.colorTextLightSolid},"&-checked":{backgroundColor:t.colorPrimary,"&:hover":{backgroundColor:t.colorPrimaryHover}},"&:active":{backgroundColor:t.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${t.iconCls} + span, > span + ${t.iconCls}`]:{marginInlineStart:a}}),[`${r}-borderless`]:{borderColor:"transparent",background:t.tagBorderlessBg}}},prepareToken=t=>{const{lineWidth:e,fontSizeIcon:n,calc:s}=t,r=t.fontSizeSM;return merge$1(t,{tagFontSize:r,tagLineHeight:unit(s(t.lineHeightSM).mul(r).equal()),tagIconSize:s(n).sub(s(e).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:t.defaultBg})},prepareComponentToken=t=>({defaultBg:new TinyColor(t.colorFillQuaternary).onBackground(t.colorBgContainer).toHexString(),defaultColor:t.colorText}),useStyle=genStyleHooks("Tag",t=>{const e=prepareToken(t);return genBaseStyle(e)},prepareComponentToken);var __rest$1=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n};const CheckableTag=reactExports.forwardRef((t,e)=>{const{prefixCls:n,style:s,className:r,checked:i,onChange:a,onClick:c}=t,o=__rest$1(t,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:m,tag:h}=reactExports.useContext(ConfigContext),A=O=>{a==null||a(!i),c==null||c(O)},y=m("tag",n),[C,D,b]=useStyle(y),S=classNames(y,`${y}-checkable`,{[`${y}-checkable-checked`]:i},h==null?void 0:h.className,r,D,b);return C(reactExports.createElement("span",Object.assign({},o,{ref:e,style:Object.assign(Object.assign({},s),h==null?void 0:h.style),className:S,onClick:A})))}),CheckableTag$1=CheckableTag,genPresetStyle=t=>genPresetColor(t,(e,n)=>{let{textColor:s,lightBorderColor:r,lightColor:i,darkColor:a}=n;return{[`${t.componentCls}${t.componentCls}-${e}`]:{color:s,background:i,borderColor:r,"&-inverse":{color:t.colorTextLightSolid,background:a,borderColor:a},[`&${t.componentCls}-borderless`]:{borderColor:"transparent"}}}}),PresetCmp=genSubStyleComponent(["Tag","preset"],t=>{const e=prepareToken(t);return genPresetStyle(e)},prepareComponentToken);function capitalize(t){return typeof t!="string"?t:t.charAt(0).toUpperCase()+t.slice(1)}const genTagStatusStyle=(t,e,n)=>{const s=capitalize(n);return{[`${t.componentCls}${t.componentCls}-${e}`]:{color:t[`color${n}`],background:t[`color${s}Bg`],borderColor:t[`color${s}Border`],[`&${t.componentCls}-borderless`]:{borderColor:"transparent"}}}},StatusCmp=genSubStyleComponent(["Tag","status"],t=>{const e=prepareToken(t);return[genTagStatusStyle(e,"success","Success"),genTagStatusStyle(e,"processing","Info"),genTagStatusStyle(e,"error","Error"),genTagStatusStyle(e,"warning","Warning")]},prepareComponentToken);var __rest=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n};const InternalTag=(t,e)=>{const{prefixCls:n,className:s,rootClassName:r,style:i,children:a,icon:c,color:o,onClose:m,bordered:h=!0,visible:A}=t,y=__rest(t,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:C,direction:D,tag:b}=reactExports.useContext(ConfigContext),[S,O]=reactExports.useState(!0),v=omit(y,["closeIcon","closable"]);reactExports.useEffect(()=>{A!==void 0&&O(A)},[A]);const M=isPresetColor(o),R=isPresetStatusColor(o),g=M||R,f=Object.assign(Object.assign({backgroundColor:o&&!g?o:void 0},b==null?void 0:b.style),i),L=C("tag",n),[N,E,F]=useStyle(L),P=classNames(L,b==null?void 0:b.className,{[`${L}-${o}`]:g,[`${L}-has-color`]:o&&!g,[`${L}-hidden`]:!S,[`${L}-rtl`]:D==="rtl",[`${L}-borderless`]:!h},s,r,E,F),W=q=>{q.stopPropagation(),m==null||m(q),!q.defaultPrevented&&O(!1)},[,z]=useClosable(pickClosable(t),pickClosable(b),{closable:!1,closeIconRender:q=>{const ht=reactExports.createElement("span",{className:`${L}-close-icon`,onClick:W},q);return replaceElement$1(q,ht,dt=>({onClick:Et=>{var gt;(gt=dt==null?void 0:dt.onClick)===null||gt===void 0||gt.call(dt,Et),W(Et)},className:classNames(dt==null?void 0:dt.className,`${L}-close-icon`)}))}}),w=typeof y.onClick=="function"||a&&a.type==="a",Y=c||null,ot=Y?reactExports.createElement(reactExports.Fragment,null,Y,a&&reactExports.createElement("span",null,a)):a,et=reactExports.createElement("span",Object.assign({},v,{ref:e,className:P,style:f}),ot,z,M&&reactExports.createElement(PresetCmp,{key:"preset",prefixCls:L}),R&&reactExports.createElement(StatusCmp,{key:"status",prefixCls:L}));return N(w?reactExports.createElement(Wave,{component:"Tag"},et):et)},Tag$1=reactExports.forwardRef(InternalTag);Tag$1.CheckableTag=CheckableTag$1;const Tag$2=Tag$1;let currentLogLevel=1;const setLogLevel=t=>{currentLogLevel=t},formatLogMessage=(t,e,n)=>{const s=`[${new Date().toISOString()}] [${t}] [Page-Assist]`;if(n!==void 0)try{const r=typeof n=="object"?JSON.stringify(n):String(n);return`${s} ${e} - ${r}`}catch{return`${s} ${e} - [\u65E0\u6CD5\u5E8F\u5217\u5316\u7684\u6570\u636E]`}return`${s} ${e}`},debug=(t,e)=>{currentLogLevel<=0&&console.debug(formatLogMessage("DEBUG",t,e))},info=(t,e)=>{currentLogLevel<=1&&console.info(formatLogMessage("INFO",t,e))},warn=(t,e)=>{currentLogLevel<=2&&console.warn(formatLogMessage("WARN",t,e))},error=(t,e)=>{currentLogLevel<=3&&(e instanceof Error?console.error(formatLogMessage("ERROR",t,{message:e.message,stack:e.stack,name:e.name})):console.error(formatLogMessage("ERROR",t,e)))},performance=(t,e)=>{currentLogLevel<=0&&(e==="start"?console.time(`\u23F1\uFE0F ${t}`):console.timeEnd(`\u23F1\uFE0F ${t}`))};setLogLevel(2);const logger={debug,info,warn,error,performance,setLogLevel},defaultOpts$2={xml:!1,decodeEntities:!0},xmlModeDefault={_useHtmlParser2:!0,xmlMode:!0};function flatten(t){return t!=null&&t.xml?typeof t.xml=="boolean"?xmlModeDefault:{...xmlModeDefault,...t.xml}:t??void 0}var ElementType;(function(t){t.Root="root",t.Text="text",t.Directive="directive",t.Comment="comment",t.Script="script",t.Style="style",t.Tag="tag",t.CDATA="cdata",t.Doctype="doctype"})(ElementType||(ElementType={}));function isTag$1(t){return t.type===ElementType.Tag||t.type===ElementType.Script||t.type===ElementType.Style}const Root=ElementType.Root,Text$1=ElementType.Text,Directive=ElementType.Directive,Comment$1=ElementType.Comment,Script=ElementType.Script,Style=ElementType.Style,Tag=ElementType.Tag,CDATA$1=ElementType.CDATA,Doctype=ElementType.Doctype;let Node$1=class{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(t){this.parent=t}get previousSibling(){return this.prev}set previousSibling(t){this.prev=t}get nextSibling(){return this.next}set nextSibling(t){this.next=t}cloneNode(t=!1){return cloneNode(this,t)}};class DataNode extends Node$1{constructor(e){super(),this.data=e}get nodeValue(){return this.data}set nodeValue(e){this.data=e}}class Text extends DataNode{constructor(){super(...arguments),this.type=ElementType.Text}get nodeType(){return 3}}class Comment extends DataNode{constructor(){super(...arguments),this.type=ElementType.Comment}get nodeType(){return 8}}class ProcessingInstruction extends DataNode{constructor(e,n){super(n),this.name=e,this.type=ElementType.Directive}get nodeType(){return 1}}class NodeWithChildren extends Node$1{constructor(e){super(),this.children=e}get firstChild(){var e;return(e=this.children[0])!==null&&e!==void 0?e:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(e){this.children=e}}class CDATA extends NodeWithChildren{constructor(){super(...arguments),this.type=ElementType.CDATA}get nodeType(){return 4}}class Document extends NodeWithChildren{constructor(){super(...arguments),this.type=ElementType.Root}get nodeType(){return 9}}class Element extends NodeWithChildren{constructor(e,n,s=[],r=e==="script"?ElementType.Script:e==="style"?ElementType.Style:ElementType.Tag){super(s),this.name=e,this.attribs=n,this.type=r}get nodeType(){return 1}get tagName(){return this.name}set tagName(e){this.name=e}get attributes(){return Object.keys(this.attribs).map(e=>{var n,s;return{name:e,value:this.attribs[e],namespace:(n=this["x-attribsNamespace"])===null||n===void 0?void 0:n[e],prefix:(s=this["x-attribsPrefix"])===null||s===void 0?void 0:s[e]}})}}function isTag(t){return isTag$1(t)}function isCDATA(t){return t.type===ElementType.CDATA}function isText(t){return t.type===ElementType.Text}function isComment(t){return t.type===ElementType.Comment}function isDirective(t){return t.type===ElementType.Directive}function isDocument(t){return t.type===ElementType.Root}function hasChildren(t){return Object.prototype.hasOwnProperty.call(t,"children")}function cloneNode(t,e=!1){let n;if(isText(t))n=new Text(t.data);else if(isComment(t))n=new Comment(t.data);else if(isTag(t)){const s=e?cloneChildren(t.children):[],r=new Element(t.name,{...t.attribs},s);s.forEach(i=>i.parent=r),t.namespace!=null&&(r.namespace=t.namespace),t["x-attribsNamespace"]&&(r["x-attribsNamespace"]={...t["x-attribsNamespace"]}),t["x-attribsPrefix"]&&(r["x-attribsPrefix"]={...t["x-attribsPrefix"]}),n=r}else if(isCDATA(t)){const s=e?cloneChildren(t.children):[],r=new CDATA(s);s.forEach(i=>i.parent=r),n=r}else if(isDocument(t)){const s=e?cloneChildren(t.children):[],r=new Document(s);s.forEach(i=>i.parent=r),t["x-mode"]&&(r["x-mode"]=t["x-mode"]),n=r}else if(isDirective(t)){const s=new ProcessingInstruction(t.name,t.data);t["x-name"]!=null&&(s["x-name"]=t["x-name"],s["x-publicId"]=t["x-publicId"],s["x-systemId"]=t["x-systemId"]),n=s}else throw new Error(`Not implemented yet: ${t.type}`);return n.startIndex=t.startIndex,n.endIndex=t.endIndex,t.sourceCodeLocation!=null&&(n.sourceCodeLocation=t.sourceCodeLocation),n}function cloneChildren(t){const e=t.map(n=>cloneNode(n,!0));for(let n=1;n<e.length;n++)e[n].prev=e[n-1],e[n-1].next=e[n];return e}const defaultOpts$1={withStartIndices:!1,withEndIndices:!1,xmlMode:!1};class DomHandler{constructor(e,n,s){this.dom=[],this.root=new Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof n=="function"&&(s=n,n=defaultOpts$1),typeof e=="object"&&(n=e,e=void 0),this.callback=e??null,this.options=n??defaultOpts$1,this.elementCB=s??null}onparserinit(e){this.parser=e}onreset(){this.dom=[],this.root=new Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(e){this.handleCallback(e)}onclosetag(){this.lastNode=null;const e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)}onopentag(e,n){const s=this.options.xmlMode?ElementType.Tag:void 0,r=new Element(e,n,void 0,s);this.addNode(r),this.tagStack.push(r)}ontext(e){const{lastNode:n}=this;if(n&&n.type===ElementType.Text)n.data+=e,this.options.withEndIndices&&(n.endIndex=this.parser.endIndex);else{const s=new Text(e);this.addNode(s),this.lastNode=s}}oncomment(e){if(this.lastNode&&this.lastNode.type===ElementType.Comment){this.lastNode.data+=e;return}const n=new Comment(e);this.addNode(n),this.lastNode=n}oncommentend(){this.lastNode=null}oncdatastart(){const e=new Text(""),n=new CDATA([e]);this.addNode(n),e.parent=n,this.lastNode=e}oncdataend(){this.lastNode=null}onprocessinginstruction(e,n){const s=new ProcessingInstruction(e,n);this.addNode(s)}handleCallback(e){if(typeof this.callback=="function")this.callback(e,this.dom);else if(e)throw e}addNode(e){const n=this.tagStack[this.tagStack.length-1],s=n.children[n.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),n.children.push(e),s&&(e.prev=s,s.next=e),e.parent=n,this.lastNode=null}}const htmlDecodeTree=new Uint16Array('\u1D41<\xD5\u0131\u028A\u049D\u057B\u05D0\u0675\u06DE\u07A2\u07D6\u080F\u0A4A\u0A91\u0DA1\u0E6D\u0F09\u0F26\u10CA\u1228\u12E1\u1415\u149D\u14C3\u14DF\u1525\0\0\0\0\0\0\u156B\u16CD\u198D\u1C12\u1DDD\u1F7E\u2060\u21B0\u228D\u23C0\u23FB\u2442\u2824\u2912\u2D08\u2E48\u2FCE\u3016\u32BA\u3639\u37AC\u38FE\u3A28\u3A71\u3AE0\u3B2E\u0800EMabcfglmnoprstu\\bfms\x7F\x84\x8B\x90\x95\x98\xA6\xB3\xB9\xC8\xCFlig\u803B\xC6\u40C6P\u803B&\u4026cute\u803B\xC1\u40C1reve;\u4102\u0100iyx}rc\u803B\xC2\u40C2;\u4410r;\uC000\u{1D504}rave\u803B\xC0\u40C0pha;\u4391acr;\u4100d;\u6A53\u0100gp\x9D\xA1on;\u4104f;\uC000\u{1D538}plyFunction;\u6061ing\u803B\xC5\u40C5\u0100cs\xBE\xC3r;\uC000\u{1D49C}ign;\u6254ilde\u803B\xC3\u40C3ml\u803B\xC4\u40C4\u0400aceforsu\xE5\xFB\xFE\u0117\u011C\u0122\u0127\u012A\u0100cr\xEA\xF2kslash;\u6216\u0176\xF6\xF8;\u6AE7ed;\u6306y;\u4411\u0180crt\u0105\u010B\u0114ause;\u6235noullis;\u612Ca;\u4392r;\uC000\u{1D505}pf;\uC000\u{1D539}eve;\u42D8c\xF2\u0113mpeq;\u624E\u0700HOacdefhilorsu\u014D\u0151\u0156\u0180\u019E\u01A2\u01B5\u01B7\u01BA\u01DC\u0215\u0273\u0278\u027Ecy;\u4427PY\u803B\xA9\u40A9\u0180cpy\u015D\u0162\u017Aute;\u4106\u0100;i\u0167\u0168\u62D2talDifferentialD;\u6145leys;\u612D\u0200aeio\u0189\u018E\u0194\u0198ron;\u410Cdil\u803B\xC7\u40C7rc;\u4108nint;\u6230ot;\u410A\u0100dn\u01A7\u01ADilla;\u40B8terDot;\u40B7\xF2\u017Fi;\u43A7rcle\u0200DMPT\u01C7\u01CB\u01D1\u01D6ot;\u6299inus;\u6296lus;\u6295imes;\u6297o\u0100cs\u01E2\u01F8kwiseContourIntegral;\u6232eCurly\u0100DQ\u0203\u020FoubleQuote;\u601Duote;\u6019\u0200lnpu\u021E\u0228\u0247\u0255on\u0100;e\u0225\u0226\u6237;\u6A74\u0180git\u022F\u0236\u023Aruent;\u6261nt;\u622FourIntegral;\u622E\u0100fr\u024C\u024E;\u6102oduct;\u6210nterClockwiseContourIntegral;\u6233oss;\u6A2Fcr;\uC000\u{1D49E}p\u0100;C\u0284\u0285\u62D3ap;\u624D\u0580DJSZacefios\u02A0\u02AC\u02B0\u02B4\u02B8\u02CB\u02D7\u02E1\u02E6\u0333\u048D\u0100;o\u0179\u02A5trahd;\u6911cy;\u4402cy;\u4405cy;\u440F\u0180grs\u02BF\u02C4\u02C7ger;\u6021r;\u61A1hv;\u6AE4\u0100ay\u02D0\u02D5ron;\u410E;\u4414l\u0100;t\u02DD\u02DE\u6207a;\u4394r;\uC000\u{1D507}\u0100af\u02EB\u0327\u0100cm\u02F0\u0322ritical\u0200ADGT\u0300\u0306\u0316\u031Ccute;\u40B4o\u0174\u030B\u030D;\u42D9bleAcute;\u42DDrave;\u4060ilde;\u42DCond;\u62C4ferentialD;\u6146\u0470\u033D\0\0\0\u0342\u0354\0\u0405f;\uC000\u{1D53B}\u0180;DE\u0348\u0349\u034D\u40A8ot;\u60DCqual;\u6250ble\u0300CDLRUV\u0363\u0372\u0382\u03CF\u03E2\u03F8ontourIntegra\xEC\u0239o\u0274\u0379\0\0\u037B\xBB\u0349nArrow;\u61D3\u0100eo\u0387\u03A4ft\u0180ART\u0390\u0396\u03A1rrow;\u61D0ightArrow;\u61D4e\xE5\u02CAng\u0100LR\u03AB\u03C4eft\u0100AR\u03B3\u03B9rrow;\u67F8ightArrow;\u67FAightArrow;\u67F9ight\u0100AT\u03D8\u03DErrow;\u61D2ee;\u62A8p\u0241\u03E9\0\0\u03EFrrow;\u61D1ownArrow;\u61D5erticalBar;\u6225n\u0300ABLRTa\u0412\u042A\u0430\u045E\u047F\u037Crrow\u0180;BU\u041D\u041E\u0422\u6193ar;\u6913pArrow;\u61F5reve;\u4311eft\u02D2\u043A\0\u0446\0\u0450ightVector;\u6950eeVector;\u695Eector\u0100;B\u0459\u045A\u61BDar;\u6956ight\u01D4\u0467\0\u0471eeVector;\u695Fector\u0100;B\u047A\u047B\u61C1ar;\u6957ee\u0100;A\u0486\u0487\u62A4rrow;\u61A7\u0100ct\u0492\u0497r;\uC000\u{1D49F}rok;\u4110\u0800NTacdfglmopqstux\u04BD\u04C0\u04C4\u04CB\u04DE\u04E2\u04E7\u04EE\u04F5\u0521\u052F\u0536\u0552\u055D\u0560\u0565G;\u414AH\u803B\xD0\u40D0cute\u803B\xC9\u40C9\u0180aiy\u04D2\u04D7\u04DCron;\u411Arc\u803B\xCA\u40CA;\u442Dot;\u4116r;\uC000\u{1D508}rave\u803B\xC8\u40C8ement;\u6208\u0100ap\u04FA\u04FEcr;\u4112ty\u0253\u0506\0\0\u0512mallSquare;\u65FBerySmallSquare;\u65AB\u0100gp\u0526\u052Aon;\u4118f;\uC000\u{1D53C}silon;\u4395u\u0100ai\u053C\u0549l\u0100;T\u0542\u0543\u6A75ilde;\u6242librium;\u61CC\u0100ci\u0557\u055Ar;\u6130m;\u6A73a;\u4397ml\u803B\xCB\u40CB\u0100ip\u056A\u056Fsts;\u6203onentialE;\u6147\u0280cfios\u0585\u0588\u058D\u05B2\u05CCy;\u4424r;\uC000\u{1D509}lled\u0253\u0597\0\0\u05A3mallSquare;\u65FCerySmallSquare;\u65AA\u0370\u05BA\0\u05BF\0\0\u05C4f;\uC000\u{1D53D}All;\u6200riertrf;\u6131c\xF2\u05CB\u0600JTabcdfgorst\u05E8\u05EC\u05EF\u05FA\u0600\u0612\u0616\u061B\u061D\u0623\u066C\u0672cy;\u4403\u803B>\u403Emma\u0100;d\u05F7\u05F8\u4393;\u43DCreve;\u411E\u0180eiy\u0607\u060C\u0610dil;\u4122rc;\u411C;\u4413ot;\u4120r;\uC000\u{1D50A};\u62D9pf;\uC000\u{1D53E}eater\u0300EFGLST\u0635\u0644\u064E\u0656\u065B\u0666qual\u0100;L\u063E\u063F\u6265ess;\u62DBullEqual;\u6267reater;\u6AA2ess;\u6277lantEqual;\u6A7Eilde;\u6273cr;\uC000\u{1D4A2};\u626B\u0400Aacfiosu\u0685\u068B\u0696\u069B\u069E\u06AA\u06BE\u06CARDcy;\u442A\u0100ct\u0690\u0694ek;\u42C7;\u405Eirc;\u4124r;\u610ClbertSpace;\u610B\u01F0\u06AF\0\u06B2f;\u610DizontalLine;\u6500\u0100ct\u06C3\u06C5\xF2\u06A9rok;\u4126mp\u0144\u06D0\u06D8ownHum\xF0\u012Fqual;\u624F\u0700EJOacdfgmnostu\u06FA\u06FE\u0703\u0707\u070E\u071A\u071E\u0721\u0728\u0744\u0778\u078B\u078F\u0795cy;\u4415lig;\u4132cy;\u4401cute\u803B\xCD\u40CD\u0100iy\u0713\u0718rc\u803B\xCE\u40CE;\u4418ot;\u4130r;\u6111rave\u803B\xCC\u40CC\u0180;ap\u0720\u072F\u073F\u0100cg\u0734\u0737r;\u412AinaryI;\u6148lie\xF3\u03DD\u01F4\u0749\0\u0762\u0100;e\u074D\u074E\u622C\u0100gr\u0753\u0758ral;\u622Bsection;\u62C2isible\u0100CT\u076C\u0772omma;\u6063imes;\u6062\u0180gpt\u077F\u0783\u0788on;\u412Ef;\uC000\u{1D540}a;\u4399cr;\u6110ilde;\u4128\u01EB\u079A\0\u079Ecy;\u4406l\u803B\xCF\u40CF\u0280cfosu\u07AC\u07B7\u07BC\u07C2\u07D0\u0100iy\u07B1\u07B5rc;\u4134;\u4419r;\uC000\u{1D50D}pf;\uC000\u{1D541}\u01E3\u07C7\0\u07CCr;\uC000\u{1D4A5}rcy;\u4408kcy;\u4404\u0380HJacfos\u07E4\u07E8\u07EC\u07F1\u07FD\u0802\u0808cy;\u4425cy;\u440Cppa;\u439A\u0100ey\u07F6\u07FBdil;\u4136;\u441Ar;\uC000\u{1D50E}pf;\uC000\u{1D542}cr;\uC000\u{1D4A6}\u0580JTaceflmost\u0825\u0829\u082C\u0850\u0863\u09B3\u09B8\u09C7\u09CD\u0A37\u0A47cy;\u4409\u803B<\u403C\u0280cmnpr\u0837\u083C\u0841\u0844\u084Dute;\u4139bda;\u439Bg;\u67EAlacetrf;\u6112r;\u619E\u0180aey\u0857\u085C\u0861ron;\u413Ddil;\u413B;\u441B\u0100fs\u0868\u0970t\u0500ACDFRTUVar\u087E\u08A9\u08B1\u08E0\u08E6\u08FC\u092F\u095B\u0390\u096A\u0100nr\u0883\u088FgleBracket;\u67E8row\u0180;BR\u0899\u089A\u089E\u6190ar;\u61E4ightArrow;\u61C6eiling;\u6308o\u01F5\u08B7\0\u08C3bleBracket;\u67E6n\u01D4\u08C8\0\u08D2eeVector;\u6961ector\u0100;B\u08DB\u08DC\u61C3ar;\u6959loor;\u630Aight\u0100AV\u08EF\u08F5rrow;\u6194ector;\u694E\u0100er\u0901\u0917e\u0180;AV\u0909\u090A\u0910\u62A3rrow;\u61A4ector;\u695Aiangle\u0180;BE\u0924\u0925\u0929\u62B2ar;\u69CFqual;\u62B4p\u0180DTV\u0937\u0942\u094CownVector;\u6951eeVector;\u6960ector\u0100;B\u0956\u0957\u61BFar;\u6958ector\u0100;B\u0965\u0966\u61BCar;\u6952ight\xE1\u039Cs\u0300EFGLST\u097E\u098B\u0995\u099D\u09A2\u09ADqualGreater;\u62DAullEqual;\u6266reater;\u6276ess;\u6AA1lantEqual;\u6A7Dilde;\u6272r;\uC000\u{1D50F}\u0100;e\u09BD\u09BE\u62D8ftarrow;\u61DAidot;\u413F\u0180npw\u09D4\u0A16\u0A1Bg\u0200LRlr\u09DE\u09F7\u0A02\u0A10eft\u0100AR\u09E6\u09ECrrow;\u67F5ightArrow;\u67F7ightArrow;\u67F6eft\u0100ar\u03B3\u0A0Aight\xE1\u03BFight\xE1\u03CAf;\uC000\u{1D543}er\u0100LR\u0A22\u0A2CeftArrow;\u6199ightArrow;\u6198\u0180cht\u0A3E\u0A40\u0A42\xF2\u084C;\u61B0rok;\u4141;\u626A\u0400acefiosu\u0A5A\u0A5D\u0A60\u0A77\u0A7C\u0A85\u0A8B\u0A8Ep;\u6905y;\u441C\u0100dl\u0A65\u0A6FiumSpace;\u605Flintrf;\u6133r;\uC000\u{1D510}nusPlus;\u6213pf;\uC000\u{1D544}c\xF2\u0A76;\u439C\u0480Jacefostu\u0AA3\u0AA7\u0AAD\u0AC0\u0B14\u0B19\u0D91\u0D97\u0D9Ecy;\u440Acute;\u4143\u0180aey\u0AB4\u0AB9\u0ABEron;\u4147dil;\u4145;\u441D\u0180gsw\u0AC7\u0AF0\u0B0Eative\u0180MTV\u0AD3\u0ADF\u0AE8ediumSpace;\u600Bhi\u0100cn\u0AE6\u0AD8\xEB\u0AD9eryThi\xEE\u0AD9ted\u0100GL\u0AF8\u0B06reaterGreate\xF2\u0673essLes\xF3\u0A48Line;\u400Ar;\uC000\u{1D511}\u0200Bnpt\u0B22\u0B28\u0B37\u0B3Areak;\u6060BreakingSpace;\u40A0f;\u6115\u0680;CDEGHLNPRSTV\u0B55\u0B56\u0B6A\u0B7C\u0BA1\u0BEB\u0C04\u0C5E\u0C84\u0CA6\u0CD8\u0D61\u0D85\u6AEC\u0100ou\u0B5B\u0B64ngruent;\u6262pCap;\u626DoubleVerticalBar;\u6226\u0180lqx\u0B83\u0B8A\u0B9Bement;\u6209ual\u0100;T\u0B92\u0B93\u6260ilde;\uC000\u2242\u0338ists;\u6204reater\u0380;EFGLST\u0BB6\u0BB7\u0BBD\u0BC9\u0BD3\u0BD8\u0BE5\u626Fqual;\u6271ullEqual;\uC000\u2267\u0338reater;\uC000\u226B\u0338ess;\u6279lantEqual;\uC000\u2A7E\u0338ilde;\u6275ump\u0144\u0BF2\u0BFDownHump;\uC000\u224E\u0338qual;\uC000\u224F\u0338e\u0100fs\u0C0A\u0C27tTriangle\u0180;BE\u0C1A\u0C1B\u0C21\u62EAar;\uC000\u29CF\u0338qual;\u62ECs\u0300;EGLST\u0C35\u0C36\u0C3C\u0C44\u0C4B\u0C58\u626Equal;\u6270reater;\u6278ess;\uC000\u226A\u0338lantEqual;\uC000\u2A7D\u0338ilde;\u6274ested\u0100GL\u0C68\u0C79reaterGreater;\uC000\u2AA2\u0338essLess;\uC000\u2AA1\u0338recedes\u0180;ES\u0C92\u0C93\u0C9B\u6280qual;\uC000\u2AAF\u0338lantEqual;\u62E0\u0100ei\u0CAB\u0CB9verseElement;\u620CghtTriangle\u0180;BE\u0CCB\u0CCC\u0CD2\u62EBar;\uC000\u29D0\u0338qual;\u62ED\u0100qu\u0CDD\u0D0CuareSu\u0100bp\u0CE8\u0CF9set\u0100;E\u0CF0\u0CF3\uC000\u228F\u0338qual;\u62E2erset\u0100;E\u0D03\u0D06\uC000\u2290\u0338qual;\u62E3\u0180bcp\u0D13\u0D24\u0D4Eset\u0100;E\u0D1B\u0D1E\uC000\u2282\u20D2qual;\u6288ceeds\u0200;EST\u0D32\u0D33\u0D3B\u0D46\u6281qual;\uC000\u2AB0\u0338lantEqual;\u62E1ilde;\uC000\u227F\u0338erset\u0100;E\u0D58\u0D5B\uC000\u2283\u20D2qual;\u6289ilde\u0200;EFT\u0D6E\u0D6F\u0D75\u0D7F\u6241qual;\u6244ullEqual;\u6247ilde;\u6249erticalBar;\u6224cr;\uC000\u{1D4A9}ilde\u803B\xD1\u40D1;\u439D\u0700Eacdfgmoprstuv\u0DBD\u0DC2\u0DC9\u0DD5\u0DDB\u0DE0\u0DE7\u0DFC\u0E02\u0E20\u0E22\u0E32\u0E3F\u0E44lig;\u4152cute\u803B\xD3\u40D3\u0100iy\u0DCE\u0DD3rc\u803B\xD4\u40D4;\u441Eblac;\u4150r;\uC000\u{1D512}rave\u803B\xD2\u40D2\u0180aei\u0DEE\u0DF2\u0DF6cr;\u414Cga;\u43A9cron;\u439Fpf;\uC000\u{1D546}enCurly\u0100DQ\u0E0E\u0E1AoubleQuote;\u601Cuote;\u6018;\u6A54\u0100cl\u0E27\u0E2Cr;\uC000\u{1D4AA}ash\u803B\xD8\u40D8i\u016C\u0E37\u0E3Cde\u803B\xD5\u40D5es;\u6A37ml\u803B\xD6\u40D6er\u0100BP\u0E4B\u0E60\u0100ar\u0E50\u0E53r;\u603Eac\u0100ek\u0E5A\u0E5C;\u63DEet;\u63B4arenthesis;\u63DC\u0480acfhilors\u0E7F\u0E87\u0E8A\u0E8F\u0E92\u0E94\u0E9D\u0EB0\u0EFCrtialD;\u6202y;\u441Fr;\uC000\u{1D513}i;\u43A6;\u43A0usMinus;\u40B1\u0100ip\u0EA2\u0EADncareplan\xE5\u069Df;\u6119\u0200;eio\u0EB9\u0EBA\u0EE0\u0EE4\u6ABBcedes\u0200;EST\u0EC8\u0EC9\u0ECF\u0EDA\u627Aqual;\u6AAFlantEqual;\u627Cilde;\u627Eme;\u6033\u0100dp\u0EE9\u0EEEuct;\u620Fortion\u0100;a\u0225\u0EF9l;\u621D\u0100ci\u0F01\u0F06r;\uC000\u{1D4AB};\u43A8\u0200Ufos\u0F11\u0F16\u0F1B\u0F1FOT\u803B"\u4022r;\uC000\u{1D514}pf;\u611Acr;\uC000\u{1D4AC}\u0600BEacefhiorsu\u0F3E\u0F43\u0F47\u0F60\u0F73\u0FA7\u0FAA\u0FAD\u1096\u10A9\u10B4\u10BEarr;\u6910G\u803B\xAE\u40AE\u0180cnr\u0F4E\u0F53\u0F56ute;\u4154g;\u67EBr\u0100;t\u0F5C\u0F5D\u61A0l;\u6916\u0180aey\u0F67\u0F6C\u0F71ron;\u4158dil;\u4156;\u4420\u0100;v\u0F78\u0F79\u611Cerse\u0100EU\u0F82\u0F99\u0100lq\u0F87\u0F8Eement;\u620Builibrium;\u61CBpEquilibrium;\u696Fr\xBB\u0F79o;\u43A1ght\u0400ACDFTUVa\u0FC1\u0FEB\u0FF3\u1022\u1028\u105B\u1087\u03D8\u0100nr\u0FC6\u0FD2gleBracket;\u67E9row\u0180;BL\u0FDC\u0FDD\u0FE1\u6192ar;\u61E5eftArrow;\u61C4eiling;\u6309o\u01F5\u0FF9\0\u1005bleBracket;\u67E7n\u01D4\u100A\0\u1014eeVector;\u695Dector\u0100;B\u101D\u101E\u61C2ar;\u6955loor;\u630B\u0100er\u102D\u1043e\u0180;AV\u1035\u1036\u103C\u62A2rrow;\u61A6ector;\u695Biangle\u0180;BE\u1050\u1051\u1055\u62B3ar;\u69D0qual;\u62B5p\u0180DTV\u1063\u106E\u1078ownVector;\u694FeeVector;\u695Cector\u0100;B\u1082\u1083\u61BEar;\u6954ector\u0100;B\u1091\u1092\u61C0ar;\u6953\u0100pu\u109B\u109Ef;\u611DndImplies;\u6970ightarrow;\u61DB\u0100ch\u10B9\u10BCr;\u611B;\u61B1leDelayed;\u69F4\u0680HOacfhimoqstu\u10E4\u10F1\u10F7\u10FD\u1119\u111E\u1151\u1156\u1161\u1167\u11B5\u11BB\u11BF\u0100Cc\u10E9\u10EEHcy;\u4429y;\u4428FTcy;\u442Ccute;\u415A\u0280;aeiy\u1108\u1109\u110E\u1113\u1117\u6ABCron;\u4160dil;\u415Erc;\u415C;\u4421r;\uC000\u{1D516}ort\u0200DLRU\u112A\u1134\u113E\u1149ownArrow\xBB\u041EeftArrow\xBB\u089AightArrow\xBB\u0FDDpArrow;\u6191gma;\u43A3allCircle;\u6218pf;\uC000\u{1D54A}\u0272\u116D\0\0\u1170t;\u621Aare\u0200;ISU\u117B\u117C\u1189\u11AF\u65A1ntersection;\u6293u\u0100bp\u118F\u119Eset\u0100;E\u1197\u1198\u628Fqual;\u6291erset\u0100;E\u11A8\u11A9\u6290qual;\u6292nion;\u6294cr;\uC000\u{1D4AE}ar;\u62C6\u0200bcmp\u11C8\u11DB\u1209\u120B\u0100;s\u11CD\u11CE\u62D0et\u0100;E\u11CD\u11D5qual;\u6286\u0100ch\u11E0\u1205eeds\u0200;EST\u11ED\u11EE\u11F4\u11FF\u627Bqual;\u6AB0lantEqual;\u627Dilde;\u627FTh\xE1\u0F8C;\u6211\u0180;es\u1212\u1213\u1223\u62D1rset\u0100;E\u121C\u121D\u6283qual;\u6287et\xBB\u1213\u0580HRSacfhiors\u123E\u1244\u1249\u1255\u125E\u1271\u1276\u129F\u12C2\u12C8\u12D1ORN\u803B\xDE\u40DEADE;\u6122\u0100Hc\u124E\u1252cy;\u440By;\u4426\u0100bu\u125A\u125C;\u4009;\u43A4\u0180aey\u1265\u126A\u126Fron;\u4164dil;\u4162;\u4422r;\uC000\u{1D517}\u0100ei\u127B\u1289\u01F2\u1280\0\u1287efore;\u6234a;\u4398\u0100cn\u128E\u1298kSpace;\uC000\u205F\u200ASpace;\u6009lde\u0200;EFT\u12AB\u12AC\u12B2\u12BC\u623Cqual;\u6243ullEqual;\u6245ilde;\u6248pf;\uC000\u{1D54B}ipleDot;\u60DB\u0100ct\u12D6\u12DBr;\uC000\u{1D4AF}rok;\u4166\u0AE1\u12F7\u130E\u131A\u1326\0\u132C\u1331\0\0\0\0\0\u1338\u133D\u1377\u1385\0\u13FF\u1404\u140A\u1410\u0100cr\u12FB\u1301ute\u803B\xDA\u40DAr\u0100;o\u1307\u1308\u619Fcir;\u6949r\u01E3\u1313\0\u1316y;\u440Eve;\u416C\u0100iy\u131E\u1323rc\u803B\xDB\u40DB;\u4423blac;\u4170r;\uC000\u{1D518}rave\u803B\xD9\u40D9acr;\u416A\u0100di\u1341\u1369er\u0100BP\u1348\u135D\u0100ar\u134D\u1350r;\u405Fac\u0100ek\u1357\u1359;\u63DFet;\u63B5arenthesis;\u63DDon\u0100;P\u1370\u1371\u62C3lus;\u628E\u0100gp\u137B\u137Fon;\u4172f;\uC000\u{1D54C}\u0400ADETadps\u1395\u13AE\u13B8\u13C4\u03E8\u13D2\u13D7\u13F3rrow\u0180;BD\u1150\u13A0\u13A4ar;\u6912ownArrow;\u61C5ownArrow;\u6195quilibrium;\u696Eee\u0100;A\u13CB\u13CC\u62A5rrow;\u61A5own\xE1\u03F3er\u0100LR\u13DE\u13E8eftArrow;\u6196ightArrow;\u6197i\u0100;l\u13F9\u13FA\u43D2on;\u43A5ing;\u416Ecr;\uC000\u{1D4B0}ilde;\u4168ml\u803B\xDC\u40DC\u0480Dbcdefosv\u1427\u142C\u1430\u1433\u143E\u1485\u148A\u1490\u1496ash;\u62ABar;\u6AEBy;\u4412ash\u0100;l\u143B\u143C\u62A9;\u6AE6\u0100er\u1443\u1445;\u62C1\u0180bty\u144C\u1450\u147Aar;\u6016\u0100;i\u144F\u1455cal\u0200BLST\u1461\u1465\u146A\u1474ar;\u6223ine;\u407Ceparator;\u6758ilde;\u6240ThinSpace;\u600Ar;\uC000\u{1D519}pf;\uC000\u{1D54D}cr;\uC000\u{1D4B1}dash;\u62AA\u0280cefos\u14A7\u14AC\u14B1\u14B6\u14BCirc;\u4174dge;\u62C0r;\uC000\u{1D51A}pf;\uC000\u{1D54E}cr;\uC000\u{1D4B2}\u0200fios\u14CB\u14D0\u14D2\u14D8r;\uC000\u{1D51B};\u439Epf;\uC000\u{1D54F}cr;\uC000\u{1D4B3}\u0480AIUacfosu\u14F1\u14F5\u14F9\u14FD\u1504\u150F\u1514\u151A\u1520cy;\u442Fcy;\u4407cy;\u442Ecute\u803B\xDD\u40DD\u0100iy\u1509\u150Drc;\u4176;\u442Br;\uC000\u{1D51C}pf;\uC000\u{1D550}cr;\uC000\u{1D4B4}ml;\u4178\u0400Hacdefos\u1535\u1539\u153F\u154B\u154F\u155D\u1560\u1564cy;\u4416cute;\u4179\u0100ay\u1544\u1549ron;\u417D;\u4417ot;\u417B\u01F2\u1554\0\u155BoWidt\xE8\u0AD9a;\u4396r;\u6128pf;\u6124cr;\uC000\u{1D4B5}\u0BE1\u1583\u158A\u1590\0\u15B0\u15B6\u15BF\0\0\0\0\u15C6\u15DB\u15EB\u165F\u166D\0\u1695\u169B\u16B2\u16B9\0\u16BEcute\u803B\xE1\u40E1reve;\u4103\u0300;Ediuy\u159C\u159D\u15A1\u15A3\u15A8\u15AD\u623E;\uC000\u223E\u0333;\u623Frc\u803B\xE2\u40E2te\u80BB\xB4\u0306;\u4430lig\u803B\xE6\u40E6\u0100;r\xB2\u15BA;\uC000\u{1D51E}rave\u803B\xE0\u40E0\u0100ep\u15CA\u15D6\u0100fp\u15CF\u15D4sym;\u6135\xE8\u15D3ha;\u43B1\u0100ap\u15DFc\u0100cl\u15E4\u15E7r;\u4101g;\u6A3F\u0264\u15F0\0\0\u160A\u0280;adsv\u15FA\u15FB\u15FF\u1601\u1607\u6227nd;\u6A55;\u6A5Clope;\u6A58;\u6A5A\u0380;elmrsz\u1618\u1619\u161B\u161E\u163F\u164F\u1659\u6220;\u69A4e\xBB\u1619sd\u0100;a\u1625\u1626\u6221\u0461\u1630\u1632\u1634\u1636\u1638\u163A\u163C\u163E;\u69A8;\u69A9;\u69AA;\u69AB;\u69AC;\u69AD;\u69AE;\u69AFt\u0100;v\u1645\u1646\u621Fb\u0100;d\u164C\u164D\u62BE;\u699D\u0100pt\u1654\u1657h;\u6222\xBB\xB9arr;\u637C\u0100gp\u1663\u1667on;\u4105f;\uC000\u{1D552}\u0380;Eaeiop\u12C1\u167B\u167D\u1682\u1684\u1687\u168A;\u6A70cir;\u6A6F;\u624Ad;\u624Bs;\u4027rox\u0100;e\u12C1\u1692\xF1\u1683ing\u803B\xE5\u40E5\u0180cty\u16A1\u16A6\u16A8r;\uC000\u{1D4B6};\u402Amp\u0100;e\u12C1\u16AF\xF1\u0288ilde\u803B\xE3\u40E3ml\u803B\xE4\u40E4\u0100ci\u16C2\u16C8onin\xF4\u0272nt;\u6A11\u0800Nabcdefiklnoprsu\u16ED\u16F1\u1730\u173C\u1743\u1748\u1778\u177D\u17E0\u17E6\u1839\u1850\u170D\u193D\u1948\u1970ot;\u6AED\u0100cr\u16F6\u171Ek\u0200ceps\u1700\u1705\u170D\u1713ong;\u624Cpsilon;\u43F6rime;\u6035im\u0100;e\u171A\u171B\u623Dq;\u62CD\u0176\u1722\u1726ee;\u62BDed\u0100;g\u172C\u172D\u6305e\xBB\u172Drk\u0100;t\u135C\u1737brk;\u63B6\u0100oy\u1701\u1741;\u4431quo;\u601E\u0280cmprt\u1753\u175B\u1761\u1764\u1768aus\u0100;e\u010A\u0109ptyv;\u69B0s\xE9\u170Cno\xF5\u0113\u0180ahw\u176F\u1771\u1773;\u43B2;\u6136een;\u626Cr;\uC000\u{1D51F}g\u0380costuvw\u178D\u179D\u17B3\u17C1\u17D5\u17DB\u17DE\u0180aiu\u1794\u1796\u179A\xF0\u0760rc;\u65EFp\xBB\u1371\u0180dpt\u17A4\u17A8\u17ADot;\u6A00lus;\u6A01imes;\u6A02\u0271\u17B9\0\0\u17BEcup;\u6A06ar;\u6605riangle\u0100du\u17CD\u17D2own;\u65BDp;\u65B3plus;\u6A04e\xE5\u1444\xE5\u14ADarow;\u690D\u0180ako\u17ED\u1826\u1835\u0100cn\u17F2\u1823k\u0180lst\u17FA\u05AB\u1802ozenge;\u69EBriangle\u0200;dlr\u1812\u1813\u1818\u181D\u65B4own;\u65BEeft;\u65C2ight;\u65B8k;\u6423\u01B1\u182B\0\u1833\u01B2\u182F\0\u1831;\u6592;\u65914;\u6593ck;\u6588\u0100eo\u183E\u184D\u0100;q\u1843\u1846\uC000=\u20E5uiv;\uC000\u2261\u20E5t;\u6310\u0200ptwx\u1859\u185E\u1867\u186Cf;\uC000\u{1D553}\u0100;t\u13CB\u1863om\xBB\u13CCtie;\u62C8\u0600DHUVbdhmptuv\u1885\u1896\u18AA\u18BB\u18D7\u18DB\u18EC\u18FF\u1905\u190A\u1910\u1921\u0200LRlr\u188E\u1890\u1892\u1894;\u6557;\u6554;\u6556;\u6553\u0280;DUdu\u18A1\u18A2\u18A4\u18A6\u18A8\u6550;\u6566;\u6569;\u6564;\u6567\u0200LRlr\u18B3\u18B5\u18B7\u18B9;\u655D;\u655A;\u655C;\u6559\u0380;HLRhlr\u18CA\u18CB\u18CD\u18CF\u18D1\u18D3\u18D5\u6551;\u656C;\u6563;\u6560;\u656B;\u6562;\u655Fox;\u69C9\u0200LRlr\u18E4\u18E6\u18E8\u18EA;\u6555;\u6552;\u6510;\u650C\u0280;DUdu\u06BD\u18F7\u18F9\u18FB\u18FD;\u6565;\u6568;\u652C;\u6534inus;\u629Flus;\u629Eimes;\u62A0\u0200LRlr\u1919\u191B\u191D\u191F;\u655B;\u6558;\u6518;\u6514\u0380;HLRhlr\u1930\u1931\u1933\u1935\u1937\u1939\u193B\u6502;\u656A;\u6561;\u655E;\u653C;\u6524;\u651C\u0100ev\u0123\u1942bar\u803B\xA6\u40A6\u0200ceio\u1951\u1956\u195A\u1960r;\uC000\u{1D4B7}mi;\u604Fm\u0100;e\u171A\u171Cl\u0180;bh\u1968\u1969\u196B\u405C;\u69C5sub;\u67C8\u016C\u1974\u197El\u0100;e\u1979\u197A\u6022t\xBB\u197Ap\u0180;Ee\u012F\u1985\u1987;\u6AAE\u0100;q\u06DC\u06DB\u0CE1\u19A7\0\u19E8\u1A11\u1A15\u1A32\0\u1A37\u1A50\0\0\u1AB4\0\0\u1AC1\0\0\u1B21\u1B2E\u1B4D\u1B52\0\u1BFD\0\u1C0C\u0180cpr\u19AD\u19B2\u19DDute;\u4107\u0300;abcds\u19BF\u19C0\u19C4\u19CA\u19D5\u19D9\u6229nd;\u6A44rcup;\u6A49\u0100au\u19CF\u19D2p;\u6A4Bp;\u6A47ot;\u6A40;\uC000\u2229\uFE00\u0100eo\u19E2\u19E5t;\u6041\xEE\u0693\u0200aeiu\u19F0\u19FB\u1A01\u1A05\u01F0\u19F5\0\u19F8s;\u6A4Don;\u410Ddil\u803B\xE7\u40E7rc;\u4109ps\u0100;s\u1A0C\u1A0D\u6A4Cm;\u6A50ot;\u410B\u0180dmn\u1A1B\u1A20\u1A26il\u80BB\xB8\u01ADptyv;\u69B2t\u8100\xA2;e\u1A2D\u1A2E\u40A2r\xE4\u01B2r;\uC000\u{1D520}\u0180cei\u1A3D\u1A40\u1A4Dy;\u4447ck\u0100;m\u1A47\u1A48\u6713ark\xBB\u1A48;\u43C7r\u0380;Ecefms\u1A5F\u1A60\u1A62\u1A6B\u1AA4\u1AAA\u1AAE\u65CB;\u69C3\u0180;el\u1A69\u1A6A\u1A6D\u42C6q;\u6257e\u0261\u1A74\0\0\u1A88rrow\u0100lr\u1A7C\u1A81eft;\u61BAight;\u61BB\u0280RSacd\u1A92\u1A94\u1A96\u1A9A\u1A9F\xBB\u0F47;\u64C8st;\u629Birc;\u629Aash;\u629Dnint;\u6A10id;\u6AEFcir;\u69C2ubs\u0100;u\u1ABB\u1ABC\u6663it\xBB\u1ABC\u02EC\u1AC7\u1AD4\u1AFA\0\u1B0Aon\u0100;e\u1ACD\u1ACE\u403A\u0100;q\xC7\xC6\u026D\u1AD9\0\0\u1AE2a\u0100;t\u1ADE\u1ADF\u402C;\u4040\u0180;fl\u1AE8\u1AE9\u1AEB\u6201\xEE\u1160e\u0100mx\u1AF1\u1AF6ent\xBB\u1AE9e\xF3\u024D\u01E7\u1AFE\0\u1B07\u0100;d\u12BB\u1B02ot;\u6A6Dn\xF4\u0246\u0180fry\u1B10\u1B14\u1B17;\uC000\u{1D554}o\xE4\u0254\u8100\xA9;s\u0155\u1B1Dr;\u6117\u0100ao\u1B25\u1B29rr;\u61B5ss;\u6717\u0100cu\u1B32\u1B37r;\uC000\u{1D4B8}\u0100bp\u1B3C\u1B44\u0100;e\u1B41\u1B42\u6ACF;\u6AD1\u0100;e\u1B49\u1B4A\u6AD0;\u6AD2dot;\u62EF\u0380delprvw\u1B60\u1B6C\u1B77\u1B82\u1BAC\u1BD4\u1BF9arr\u0100lr\u1B68\u1B6A;\u6938;\u6935\u0270\u1B72\0\0\u1B75r;\u62DEc;\u62DFarr\u0100;p\u1B7F\u1B80\u61B6;\u693D\u0300;bcdos\u1B8F\u1B90\u1B96\u1BA1\u1BA5\u1BA8\u622Arcap;\u6A48\u0100au\u1B9B\u1B9Ep;\u6A46p;\u6A4Aot;\u628Dr;\u6A45;\uC000\u222A\uFE00\u0200alrv\u1BB5\u1BBF\u1BDE\u1BE3rr\u0100;m\u1BBC\u1BBD\u61B7;\u693Cy\u0180evw\u1BC7\u1BD4\u1BD8q\u0270\u1BCE\0\0\u1BD2re\xE3\u1B73u\xE3\u1B75ee;\u62CEedge;\u62CFen\u803B\xA4\u40A4earrow\u0100lr\u1BEE\u1BF3eft\xBB\u1B80ight\xBB\u1BBDe\xE4\u1BDD\u0100ci\u1C01\u1C07onin\xF4\u01F7nt;\u6231lcty;\u632D\u0980AHabcdefhijlorstuwz\u1C38\u1C3B\u1C3F\u1C5D\u1C69\u1C75\u1C8A\u1C9E\u1CAC\u1CB7\u1CFB\u1CFF\u1D0D\u1D7B\u1D91\u1DAB\u1DBB\u1DC6\u1DCDr\xF2\u0381ar;\u6965\u0200glrs\u1C48\u1C4D\u1C52\u1C54ger;\u6020eth;\u6138\xF2\u1133h\u0100;v\u1C5A\u1C5B\u6010\xBB\u090A\u016B\u1C61\u1C67arow;\u690Fa\xE3\u0315\u0100ay\u1C6E\u1C73ron;\u410F;\u4434\u0180;ao\u0332\u1C7C\u1C84\u0100gr\u02BF\u1C81r;\u61CAtseq;\u6A77\u0180glm\u1C91\u1C94\u1C98\u803B\xB0\u40B0ta;\u43B4ptyv;\u69B1\u0100ir\u1CA3\u1CA8sht;\u697F;\uC000\u{1D521}ar\u0100lr\u1CB3\u1CB5\xBB\u08DC\xBB\u101E\u0280aegsv\u1CC2\u0378\u1CD6\u1CDC\u1CE0m\u0180;os\u0326\u1CCA\u1CD4nd\u0100;s\u0326\u1CD1uit;\u6666amma;\u43DDin;\u62F2\u0180;io\u1CE7\u1CE8\u1CF8\u40F7de\u8100\xF7;o\u1CE7\u1CF0ntimes;\u62C7n\xF8\u1CF7cy;\u4452c\u026F\u1D06\0\0\u1D0Arn;\u631Eop;\u630D\u0280lptuw\u1D18\u1D1D\u1D22\u1D49\u1D55lar;\u4024f;\uC000\u{1D555}\u0280;emps\u030B\u1D2D\u1D37\u1D3D\u1D42q\u0100;d\u0352\u1D33ot;\u6251inus;\u6238lus;\u6214quare;\u62A1blebarwedg\xE5\xFAn\u0180adh\u112E\u1D5D\u1D67ownarrow\xF3\u1C83arpoon\u0100lr\u1D72\u1D76ef\xF4\u1CB4igh\xF4\u1CB6\u0162\u1D7F\u1D85karo\xF7\u0F42\u026F\u1D8A\0\0\u1D8Ern;\u631Fop;\u630C\u0180cot\u1D98\u1DA3\u1DA6\u0100ry\u1D9D\u1DA1;\uC000\u{1D4B9};\u4455l;\u69F6rok;\u4111\u0100dr\u1DB0\u1DB4ot;\u62F1i\u0100;f\u1DBA\u1816\u65BF\u0100ah\u1DC0\u1DC3r\xF2\u0429a\xF2\u0FA6angle;\u69A6\u0100ci\u1DD2\u1DD5y;\u445Fgrarr;\u67FF\u0900Dacdefglmnopqrstux\u1E01\u1E09\u1E19\u1E38\u0578\u1E3C\u1E49\u1E61\u1E7E\u1EA5\u1EAF\u1EBD\u1EE1\u1F2A\u1F37\u1F44\u1F4E\u1F5A\u0100Do\u1E06\u1D34o\xF4\u1C89\u0100cs\u1E0E\u1E14ute\u803B\xE9\u40E9ter;\u6A6E\u0200aioy\u1E22\u1E27\u1E31\u1E36ron;\u411Br\u0100;c\u1E2D\u1E2E\u6256\u803B\xEA\u40EAlon;\u6255;\u444Dot;\u4117\u0100Dr\u1E41\u1E45ot;\u6252;\uC000\u{1D522}\u0180;rs\u1E50\u1E51\u1E57\u6A9Aave\u803B\xE8\u40E8\u0100;d\u1E5C\u1E5D\u6A96ot;\u6A98\u0200;ils\u1E6A\u1E6B\u1E72\u1E74\u6A99nters;\u63E7;\u6113\u0100;d\u1E79\u1E7A\u6A95ot;\u6A97\u0180aps\u1E85\u1E89\u1E97cr;\u4113ty\u0180;sv\u1E92\u1E93\u1E95\u6205et\xBB\u1E93p\u01001;\u1E9D\u1EA4\u0133\u1EA1\u1EA3;\u6004;\u6005\u6003\u0100gs\u1EAA\u1EAC;\u414Bp;\u6002\u0100gp\u1EB4\u1EB8on;\u4119f;\uC000\u{1D556}\u0180als\u1EC4\u1ECE\u1ED2r\u0100;s\u1ECA\u1ECB\u62D5l;\u69E3us;\u6A71i\u0180;lv\u1EDA\u1EDB\u1EDF\u43B5on\xBB\u1EDB;\u43F5\u0200csuv\u1EEA\u1EF3\u1F0B\u1F23\u0100io\u1EEF\u1E31rc\xBB\u1E2E\u0269\u1EF9\0\0\u1EFB\xED\u0548ant\u0100gl\u1F02\u1F06tr\xBB\u1E5Dess\xBB\u1E7A\u0180aei\u1F12\u1F16\u1F1Als;\u403Dst;\u625Fv\u0100;D\u0235\u1F20D;\u6A78parsl;\u69E5\u0100Da\u1F2F\u1F33ot;\u6253rr;\u6971\u0180cdi\u1F3E\u1F41\u1EF8r;\u612Fo\xF4\u0352\u0100ah\u1F49\u1F4B;\u43B7\u803B\xF0\u40F0\u0100mr\u1F53\u1F57l\u803B\xEB\u40EBo;\u60AC\u0180cip\u1F61\u1F64\u1F67l;\u4021s\xF4\u056E\u0100eo\u1F6C\u1F74ctatio\xEE\u0559nential\xE5\u0579\u09E1\u1F92\0\u1F9E\0\u1FA1\u1FA7\0\0\u1FC6\u1FCC\0\u1FD3\0\u1FE6\u1FEA\u2000\0\u2008\u205Allingdotse\xF1\u1E44y;\u4444male;\u6640\u0180ilr\u1FAD\u1FB3\u1FC1lig;\u8000\uFB03\u0269\u1FB9\0\0\u1FBDg;\u8000\uFB00ig;\u8000\uFB04;\uC000\u{1D523}lig;\u8000\uFB01lig;\uC000fj\u0180alt\u1FD9\u1FDC\u1FE1t;\u666Dig;\u8000\uFB02ns;\u65B1of;\u4192\u01F0\u1FEE\0\u1FF3f;\uC000\u{1D557}\u0100ak\u05BF\u1FF7\u0100;v\u1FFC\u1FFD\u62D4;\u6AD9artint;\u6A0D\u0100ao\u200C\u2055\u0100cs\u2011\u2052\u03B1\u201A\u2030\u2038\u2045\u2048\0\u2050\u03B2\u2022\u2025\u2027\u202A\u202C\0\u202E\u803B\xBD\u40BD;\u6153\u803B\xBC\u40BC;\u6155;\u6159;\u615B\u01B3\u2034\0\u2036;\u6154;\u6156\u02B4\u203E\u2041\0\0\u2043\u803B\xBE\u40BE;\u6157;\u615C5;\u6158\u01B6\u204C\0\u204E;\u615A;\u615D8;\u615El;\u6044wn;\u6322cr;\uC000\u{1D4BB}\u0880Eabcdefgijlnorstv\u2082\u2089\u209F\u20A5\u20B0\u20B4\u20F0\u20F5\u20FA\u20FF\u2103\u2112\u2138\u0317\u213E\u2152\u219E\u0100;l\u064D\u2087;\u6A8C\u0180cmp\u2090\u2095\u209Dute;\u41F5ma\u0100;d\u209C\u1CDA\u43B3;\u6A86reve;\u411F\u0100iy\u20AA\u20AErc;\u411D;\u4433ot;\u4121\u0200;lqs\u063E\u0642\u20BD\u20C9\u0180;qs\u063E\u064C\u20C4lan\xF4\u0665\u0200;cdl\u0665\u20D2\u20D5\u20E5c;\u6AA9ot\u0100;o\u20DC\u20DD\u6A80\u0100;l\u20E2\u20E3\u6A82;\u6A84\u0100;e\u20EA\u20ED\uC000\u22DB\uFE00s;\u6A94r;\uC000\u{1D524}\u0100;g\u0673\u061Bmel;\u6137cy;\u4453\u0200;Eaj\u065A\u210C\u210E\u2110;\u6A92;\u6AA5;\u6AA4\u0200Eaes\u211B\u211D\u2129\u2134;\u6269p\u0100;p\u2123\u2124\u6A8Arox\xBB\u2124\u0100;q\u212E\u212F\u6A88\u0100;q\u212E\u211Bim;\u62E7pf;\uC000\u{1D558}\u0100ci\u2143\u2146r;\u610Am\u0180;el\u066B\u214E\u2150;\u6A8E;\u6A90\u8300>;cdlqr\u05EE\u2160\u216A\u216E\u2173\u2179\u0100ci\u2165\u2167;\u6AA7r;\u6A7Aot;\u62D7Par;\u6995uest;\u6A7C\u0280adels\u2184\u216A\u2190\u0656\u219B\u01F0\u2189\0\u218Epro\xF8\u209Er;\u6978q\u0100lq\u063F\u2196les\xF3\u2088i\xED\u066B\u0100en\u21A3\u21ADrtneqq;\uC000\u2269\uFE00\xC5\u21AA\u0500Aabcefkosy\u21C4\u21C7\u21F1\u21F5\u21FA\u2218\u221D\u222F\u2268\u227Dr\xF2\u03A0\u0200ilmr\u21D0\u21D4\u21D7\u21DBrs\xF0\u1484f\xBB\u2024il\xF4\u06A9\u0100dr\u21E0\u21E4cy;\u444A\u0180;cw\u08F4\u21EB\u21EFir;\u6948;\u61ADar;\u610Firc;\u4125\u0180alr\u2201\u220E\u2213rts\u0100;u\u2209\u220A\u6665it\xBB\u220Alip;\u6026con;\u62B9r;\uC000\u{1D525}s\u0100ew\u2223\u2229arow;\u6925arow;\u6926\u0280amopr\u223A\u223E\u2243\u225E\u2263rr;\u61FFtht;\u623Bk\u0100lr\u2249\u2253eftarrow;\u61A9ightarrow;\u61AAf;\uC000\u{1D559}bar;\u6015\u0180clt\u226F\u2274\u2278r;\uC000\u{1D4BD}as\xE8\u21F4rok;\u4127\u0100bp\u2282\u2287ull;\u6043hen\xBB\u1C5B\u0AE1\u22A3\0\u22AA\0\u22B8\u22C5\u22CE\0\u22D5\u22F3\0\0\u22F8\u2322\u2367\u2362\u237F\0\u2386\u23AA\u23B4cute\u803B\xED\u40ED\u0180;iy\u0771\u22B0\u22B5rc\u803B\xEE\u40EE;\u4438\u0100cx\u22BC\u22BFy;\u4435cl\u803B\xA1\u40A1\u0100fr\u039F\u22C9;\uC000\u{1D526}rave\u803B\xEC\u40EC\u0200;ino\u073E\u22DD\u22E9\u22EE\u0100in\u22E2\u22E6nt;\u6A0Ct;\u622Dfin;\u69DCta;\u6129lig;\u4133\u0180aop\u22FE\u231A\u231D\u0180cgt\u2305\u2308\u2317r;\u412B\u0180elp\u071F\u230F\u2313in\xE5\u078Ear\xF4\u0720h;\u4131f;\u62B7ed;\u41B5\u0280;cfot\u04F4\u232C\u2331\u233D\u2341are;\u6105in\u0100;t\u2338\u2339\u621Eie;\u69DDdo\xF4\u2319\u0280;celp\u0757\u234C\u2350\u235B\u2361al;\u62BA\u0100gr\u2355\u2359er\xF3\u1563\xE3\u234Darhk;\u6A17rod;\u6A3C\u0200cgpt\u236F\u2372\u2376\u237By;\u4451on;\u412Ff;\uC000\u{1D55A}a;\u43B9uest\u803B\xBF\u40BF\u0100ci\u238A\u238Fr;\uC000\u{1D4BE}n\u0280;Edsv\u04F4\u239B\u239D\u23A1\u04F3;\u62F9ot;\u62F5\u0100;v\u23A6\u23A7\u62F4;\u62F3\u0100;i\u0777\u23AElde;\u4129\u01EB\u23B8\0\u23BCcy;\u4456l\u803B\xEF\u40EF\u0300cfmosu\u23CC\u23D7\u23DC\u23E1\u23E7\u23F5\u0100iy\u23D1\u23D5rc;\u4135;\u4439r;\uC000\u{1D527}ath;\u4237pf;\uC000\u{1D55B}\u01E3\u23EC\0\u23F1r;\uC000\u{1D4BF}rcy;\u4458kcy;\u4454\u0400acfghjos\u240B\u2416\u2422\u2427\u242D\u2431\u2435\u243Bppa\u0100;v\u2413\u2414\u43BA;\u43F0\u0100ey\u241B\u2420dil;\u4137;\u443Ar;\uC000\u{1D528}reen;\u4138cy;\u4445cy;\u445Cpf;\uC000\u{1D55C}cr;\uC000\u{1D4C0}\u0B80ABEHabcdefghjlmnoprstuv\u2470\u2481\u2486\u248D\u2491\u250E\u253D\u255A\u2580\u264E\u265E\u2665\u2679\u267D\u269A\u26B2\u26D8\u275D\u2768\u278B\u27C0\u2801\u2812\u0180art\u2477\u247A\u247Cr\xF2\u09C6\xF2\u0395ail;\u691Barr;\u690E\u0100;g\u0994\u248B;\u6A8Bar;\u6962\u0963\u24A5\0\u24AA\0\u24B1\0\0\0\0\0\u24B5\u24BA\0\u24C6\u24C8\u24CD\0\u24F9ute;\u413Amptyv;\u69B4ra\xEE\u084Cbda;\u43BBg\u0180;dl\u088E\u24C1\u24C3;\u6991\xE5\u088E;\u6A85uo\u803B\xAB\u40ABr\u0400;bfhlpst\u0899\u24DE\u24E6\u24E9\u24EB\u24EE\u24F1\u24F5\u0100;f\u089D\u24E3s;\u691Fs;\u691D\xEB\u2252p;\u61ABl;\u6939im;\u6973l;\u61A2\u0180;ae\u24FF\u2500\u2504\u6AABil;\u6919\u0100;s\u2509\u250A\u6AAD;\uC000\u2AAD\uFE00\u0180abr\u2515\u2519\u251Drr;\u690Crk;\u6772\u0100ak\u2522\u252Cc\u0100ek\u2528\u252A;\u407B;\u405B\u0100es\u2531\u2533;\u698Bl\u0100du\u2539\u253B;\u698F;\u698D\u0200aeuy\u2546\u254B\u2556\u2558ron;\u413E\u0100di\u2550\u2554il;\u413C\xEC\u08B0\xE2\u2529;\u443B\u0200cqrs\u2563\u2566\u256D\u257Da;\u6936uo\u0100;r\u0E19\u1746\u0100du\u2572\u2577har;\u6967shar;\u694Bh;\u61B2\u0280;fgqs\u258B\u258C\u0989\u25F3\u25FF\u6264t\u0280ahlrt\u2598\u25A4\u25B7\u25C2\u25E8rrow\u0100;t\u0899\u25A1a\xE9\u24F6arpoon\u0100du\u25AF\u25B4own\xBB\u045Ap\xBB\u0966eftarrows;\u61C7ight\u0180ahs\u25CD\u25D6\u25DErrow\u0100;s\u08F4\u08A7arpoon\xF3\u0F98quigarro\xF7\u21F0hreetimes;\u62CB\u0180;qs\u258B\u0993\u25FAlan\xF4\u09AC\u0280;cdgs\u09AC\u260A\u260D\u261D\u2628c;\u6AA8ot\u0100;o\u2614\u2615\u6A7F\u0100;r\u261A\u261B\u6A81;\u6A83\u0100;e\u2622\u2625\uC000\u22DA\uFE00s;\u6A93\u0280adegs\u2633\u2639\u263D\u2649\u264Bppro\xF8\u24C6ot;\u62D6q\u0100gq\u2643\u2645\xF4\u0989gt\xF2\u248C\xF4\u099Bi\xED\u09B2\u0180ilr\u2655\u08E1\u265Asht;\u697C;\uC000\u{1D529}\u0100;E\u099C\u2663;\u6A91\u0161\u2669\u2676r\u0100du\u25B2\u266E\u0100;l\u0965\u2673;\u696Alk;\u6584cy;\u4459\u0280;acht\u0A48\u2688\u268B\u2691\u2696r\xF2\u25C1orne\xF2\u1D08ard;\u696Bri;\u65FA\u0100io\u269F\u26A4dot;\u4140ust\u0100;a\u26AC\u26AD\u63B0che\xBB\u26AD\u0200Eaes\u26BB\u26BD\u26C9\u26D4;\u6268p\u0100;p\u26C3\u26C4\u6A89rox\xBB\u26C4\u0100;q\u26CE\u26CF\u6A87\u0100;q\u26CE\u26BBim;\u62E6\u0400abnoptwz\u26E9\u26F4\u26F7\u271A\u272F\u2741\u2747\u2750\u0100nr\u26EE\u26F1g;\u67ECr;\u61FDr\xEB\u08C1g\u0180lmr\u26FF\u270D\u2714eft\u0100ar\u09E6\u2707ight\xE1\u09F2apsto;\u67FCight\xE1\u09FDparrow\u0100lr\u2725\u2729ef\xF4\u24EDight;\u61AC\u0180afl\u2736\u2739\u273Dr;\u6985;\uC000\u{1D55D}us;\u6A2Dimes;\u6A34\u0161\u274B\u274Fst;\u6217\xE1\u134E\u0180;ef\u2757\u2758\u1800\u65CAnge\xBB\u2758ar\u0100;l\u2764\u2765\u4028t;\u6993\u0280achmt\u2773\u2776\u277C\u2785\u2787r\xF2\u08A8orne\xF2\u1D8Car\u0100;d\u0F98\u2783;\u696D;\u600Eri;\u62BF\u0300achiqt\u2798\u279D\u0A40\u27A2\u27AE\u27BBquo;\u6039r;\uC000\u{1D4C1}m\u0180;eg\u09B2\u27AA\u27AC;\u6A8D;\u6A8F\u0100bu\u252A\u27B3o\u0100;r\u0E1F\u27B9;\u601Arok;\u4142\u8400<;cdhilqr\u082B\u27D2\u2639\u27DC\u27E0\u27E5\u27EA\u27F0\u0100ci\u27D7\u27D9;\u6AA6r;\u6A79re\xE5\u25F2mes;\u62C9arr;\u6976uest;\u6A7B\u0100Pi\u27F5\u27F9ar;\u6996\u0180;ef\u2800\u092D\u181B\u65C3r\u0100du\u2807\u280Dshar;\u694Ahar;\u6966\u0100en\u2817\u2821rtneqq;\uC000\u2268\uFE00\xC5\u281E\u0700Dacdefhilnopsu\u2840\u2845\u2882\u288E\u2893\u28A0\u28A5\u28A8\u28DA\u28E2\u28E4\u0A83\u28F3\u2902Dot;\u623A\u0200clpr\u284E\u2852\u2863\u287Dr\u803B\xAF\u40AF\u0100et\u2857\u2859;\u6642\u0100;e\u285E\u285F\u6720se\xBB\u285F\u0100;s\u103B\u2868to\u0200;dlu\u103B\u2873\u2877\u287Bow\xEE\u048Cef\xF4\u090F\xF0\u13D1ker;\u65AE\u0100oy\u2887\u288Cmma;\u6A29;\u443Cash;\u6014asuredangle\xBB\u1626r;\uC000\u{1D52A}o;\u6127\u0180cdn\u28AF\u28B4\u28C9ro\u803B\xB5\u40B5\u0200;acd\u1464\u28BD\u28C0\u28C4s\xF4\u16A7ir;\u6AF0ot\u80BB\xB7\u01B5us\u0180;bd\u28D2\u1903\u28D3\u6212\u0100;u\u1D3C\u28D8;\u6A2A\u0163\u28DE\u28E1p;\u6ADB\xF2\u2212\xF0\u0A81\u0100dp\u28E9\u28EEels;\u62A7f;\uC000\u{1D55E}\u0100ct\u28F8\u28FDr;\uC000\u{1D4C2}pos\xBB\u159D\u0180;lm\u2909\u290A\u290D\u43BCtimap;\u62B8\u0C00GLRVabcdefghijlmoprstuvw\u2942\u2953\u297E\u2989\u2998\u29DA\u29E9\u2A15\u2A1A\u2A58\u2A5D\u2A83\u2A95\u2AA4\u2AA8\u2B04\u2B07\u2B44\u2B7F\u2BAE\u2C34\u2C67\u2C7C\u2CE9\u0100gt\u2947\u294B;\uC000\u22D9\u0338\u0100;v\u2950\u0BCF\uC000\u226B\u20D2\u0180elt\u295A\u2972\u2976ft\u0100ar\u2961\u2967rrow;\u61CDightarrow;\u61CE;\uC000\u22D8\u0338\u0100;v\u297B\u0C47\uC000\u226A\u20D2ightarrow;\u61CF\u0100Dd\u298E\u2993ash;\u62AFash;\u62AE\u0280bcnpt\u29A3\u29A7\u29AC\u29B1\u29CCla\xBB\u02DEute;\u4144g;\uC000\u2220\u20D2\u0280;Eiop\u0D84\u29BC\u29C0\u29C5\u29C8;\uC000\u2A70\u0338d;\uC000\u224B\u0338s;\u4149ro\xF8\u0D84ur\u0100;a\u29D3\u29D4\u666El\u0100;s\u29D3\u0B38\u01F3\u29DF\0\u29E3p\u80BB\xA0\u0B37mp\u0100;e\u0BF9\u0C00\u0280aeouy\u29F4\u29FE\u2A03\u2A10\u2A13\u01F0\u29F9\0\u29FB;\u6A43on;\u4148dil;\u4146ng\u0100;d\u0D7E\u2A0Aot;\uC000\u2A6D\u0338p;\u6A42;\u443Dash;\u6013\u0380;Aadqsx\u0B92\u2A29\u2A2D\u2A3B\u2A41\u2A45\u2A50rr;\u61D7r\u0100hr\u2A33\u2A36k;\u6924\u0100;o\u13F2\u13F0ot;\uC000\u2250\u0338ui\xF6\u0B63\u0100ei\u2A4A\u2A4Ear;\u6928\xED\u0B98ist\u0100;s\u0BA0\u0B9Fr;\uC000\u{1D52B}\u0200Eest\u0BC5\u2A66\u2A79\u2A7C\u0180;qs\u0BBC\u2A6D\u0BE1\u0180;qs\u0BBC\u0BC5\u2A74lan\xF4\u0BE2i\xED\u0BEA\u0100;r\u0BB6\u2A81\xBB\u0BB7\u0180Aap\u2A8A\u2A8D\u2A91r\xF2\u2971rr;\u61AEar;\u6AF2\u0180;sv\u0F8D\u2A9C\u0F8C\u0100;d\u2AA1\u2AA2\u62FC;\u62FAcy;\u445A\u0380AEadest\u2AB7\u2ABA\u2ABE\u2AC2\u2AC5\u2AF6\u2AF9r\xF2\u2966;\uC000\u2266\u0338rr;\u619Ar;\u6025\u0200;fqs\u0C3B\u2ACE\u2AE3\u2AEFt\u0100ar\u2AD4\u2AD9rro\xF7\u2AC1ightarro\xF7\u2A90\u0180;qs\u0C3B\u2ABA\u2AEAlan\xF4\u0C55\u0100;s\u0C55\u2AF4\xBB\u0C36i\xED\u0C5D\u0100;r\u0C35\u2AFEi\u0100;e\u0C1A\u0C25i\xE4\u0D90\u0100pt\u2B0C\u2B11f;\uC000\u{1D55F}\u8180\xAC;in\u2B19\u2B1A\u2B36\u40ACn\u0200;Edv\u0B89\u2B24\u2B28\u2B2E;\uC000\u22F9\u0338ot;\uC000\u22F5\u0338\u01E1\u0B89\u2B33\u2B35;\u62F7;\u62F6i\u0100;v\u0CB8\u2B3C\u01E1\u0CB8\u2B41\u2B43;\u62FE;\u62FD\u0180aor\u2B4B\u2B63\u2B69r\u0200;ast\u0B7B\u2B55\u2B5A\u2B5Flle\xEC\u0B7Bl;\uC000\u2AFD\u20E5;\uC000\u2202\u0338lint;\u6A14\u0180;ce\u0C92\u2B70\u2B73u\xE5\u0CA5\u0100;c\u0C98\u2B78\u0100;e\u0C92\u2B7D\xF1\u0C98\u0200Aait\u2B88\u2B8B\u2B9D\u2BA7r\xF2\u2988rr\u0180;cw\u2B94\u2B95\u2B99\u619B;\uC000\u2933\u0338;\uC000\u219D\u0338ghtarrow\xBB\u2B95ri\u0100;e\u0CCB\u0CD6\u0380chimpqu\u2BBD\u2BCD\u2BD9\u2B04\u0B78\u2BE4\u2BEF\u0200;cer\u0D32\u2BC6\u0D37\u2BC9u\xE5\u0D45;\uC000\u{1D4C3}ort\u026D\u2B05\0\0\u2BD6ar\xE1\u2B56m\u0100;e\u0D6E\u2BDF\u0100;q\u0D74\u0D73su\u0100bp\u2BEB\u2BED\xE5\u0CF8\xE5\u0D0B\u0180bcp\u2BF6\u2C11\u2C19\u0200;Ees\u2BFF\u2C00\u0D22\u2C04\u6284;\uC000\u2AC5\u0338et\u0100;e\u0D1B\u2C0Bq\u0100;q\u0D23\u2C00c\u0100;e\u0D32\u2C17\xF1\u0D38\u0200;Ees\u2C22\u2C23\u0D5F\u2C27\u6285;\uC000\u2AC6\u0338et\u0100;e\u0D58\u2C2Eq\u0100;q\u0D60\u2C23\u0200gilr\u2C3D\u2C3F\u2C45\u2C47\xEC\u0BD7lde\u803B\xF1\u40F1\xE7\u0C43iangle\u0100lr\u2C52\u2C5Ceft\u0100;e\u0C1A\u2C5A\xF1\u0C26ight\u0100;e\u0CCB\u2C65\xF1\u0CD7\u0100;m\u2C6C\u2C6D\u43BD\u0180;es\u2C74\u2C75\u2C79\u4023ro;\u6116p;\u6007\u0480DHadgilrs\u2C8F\u2C94\u2C99\u2C9E\u2CA3\u2CB0\u2CB6\u2CD3\u2CE3ash;\u62ADarr;\u6904p;\uC000\u224D\u20D2ash;\u62AC\u0100et\u2CA8\u2CAC;\uC000\u2265\u20D2;\uC000>\u20D2nfin;\u69DE\u0180Aet\u2CBD\u2CC1\u2CC5rr;\u6902;\uC000\u2264\u20D2\u0100;r\u2CCA\u2CCD\uC000<\u20D2ie;\uC000\u22B4\u20D2\u0100At\u2CD8\u2CDCrr;\u6903rie;\uC000\u22B5\u20D2im;\uC000\u223C\u20D2\u0180Aan\u2CF0\u2CF4\u2D02rr;\u61D6r\u0100hr\u2CFA\u2CFDk;\u6923\u0100;o\u13E7\u13E5ear;\u6927\u1253\u1A95\0\0\0\0\0\0\0\0\0\0\0\0\0\u2D2D\0\u2D38\u2D48\u2D60\u2D65\u2D72\u2D84\u1B07\0\0\u2D8D\u2DAB\0\u2DC8\u2DCE\0\u2DDC\u2E19\u2E2B\u2E3E\u2E43\u0100cs\u2D31\u1A97ute\u803B\xF3\u40F3\u0100iy\u2D3C\u2D45r\u0100;c\u1A9E\u2D42\u803B\xF4\u40F4;\u443E\u0280abios\u1AA0\u2D52\u2D57\u01C8\u2D5Alac;\u4151v;\u6A38old;\u69BClig;\u4153\u0100cr\u2D69\u2D6Dir;\u69BF;\uC000\u{1D52C}\u036F\u2D79\0\0\u2D7C\0\u2D82n;\u42DBave\u803B\xF2\u40F2;\u69C1\u0100bm\u2D88\u0DF4ar;\u69B5\u0200acit\u2D95\u2D98\u2DA5\u2DA8r\xF2\u1A80\u0100ir\u2D9D\u2DA0r;\u69BEoss;\u69BBn\xE5\u0E52;\u69C0\u0180aei\u2DB1\u2DB5\u2DB9cr;\u414Dga;\u43C9\u0180cdn\u2DC0\u2DC5\u01CDron;\u43BF;\u69B6pf;\uC000\u{1D560}\u0180ael\u2DD4\u2DD7\u01D2r;\u69B7rp;\u69B9\u0380;adiosv\u2DEA\u2DEB\u2DEE\u2E08\u2E0D\u2E10\u2E16\u6228r\xF2\u1A86\u0200;efm\u2DF7\u2DF8\u2E02\u2E05\u6A5Dr\u0100;o\u2DFE\u2DFF\u6134f\xBB\u2DFF\u803B\xAA\u40AA\u803B\xBA\u40BAgof;\u62B6r;\u6A56lope;\u6A57;\u6A5B\u0180clo\u2E1F\u2E21\u2E27\xF2\u2E01ash\u803B\xF8\u40F8l;\u6298i\u016C\u2E2F\u2E34de\u803B\xF5\u40F5es\u0100;a\u01DB\u2E3As;\u6A36ml\u803B\xF6\u40F6bar;\u633D\u0AE1\u2E5E\0\u2E7D\0\u2E80\u2E9D\0\u2EA2\u2EB9\0\0\u2ECB\u0E9C\0\u2F13\0\0\u2F2B\u2FBC\0\u2FC8r\u0200;ast\u0403\u2E67\u2E72\u0E85\u8100\xB6;l\u2E6D\u2E6E\u40B6le\xEC\u0403\u0269\u2E78\0\0\u2E7Bm;\u6AF3;\u6AFDy;\u443Fr\u0280cimpt\u2E8B\u2E8F\u2E93\u1865\u2E97nt;\u4025od;\u402Eil;\u6030enk;\u6031r;\uC000\u{1D52D}\u0180imo\u2EA8\u2EB0\u2EB4\u0100;v\u2EAD\u2EAE\u43C6;\u43D5ma\xF4\u0A76ne;\u660E\u0180;tv\u2EBF\u2EC0\u2EC8\u43C0chfork\xBB\u1FFD;\u43D6\u0100au\u2ECF\u2EDFn\u0100ck\u2ED5\u2EDDk\u0100;h\u21F4\u2EDB;\u610E\xF6\u21F4s\u0480;abcdemst\u2EF3\u2EF4\u1908\u2EF9\u2EFD\u2F04\u2F06\u2F0A\u2F0E\u402Bcir;\u6A23ir;\u6A22\u0100ou\u1D40\u2F02;\u6A25;\u6A72n\u80BB\xB1\u0E9Dim;\u6A26wo;\u6A27\u0180ipu\u2F19\u2F20\u2F25ntint;\u6A15f;\uC000\u{1D561}nd\u803B\xA3\u40A3\u0500;Eaceinosu\u0EC8\u2F3F\u2F41\u2F44\u2F47\u2F81\u2F89\u2F92\u2F7E\u2FB6;\u6AB3p;\u6AB7u\xE5\u0ED9\u0100;c\u0ECE\u2F4C\u0300;acens\u0EC8\u2F59\u2F5F\u2F66\u2F68\u2F7Eppro\xF8\u2F43urlye\xF1\u0ED9\xF1\u0ECE\u0180aes\u2F6F\u2F76\u2F7Approx;\u6AB9qq;\u6AB5im;\u62E8i\xED\u0EDFme\u0100;s\u2F88\u0EAE\u6032\u0180Eas\u2F78\u2F90\u2F7A\xF0\u2F75\u0180dfp\u0EEC\u2F99\u2FAF\u0180als\u2FA0\u2FA5\u2FAAlar;\u632Eine;\u6312urf;\u6313\u0100;t\u0EFB\u2FB4\xEF\u0EFBrel;\u62B0\u0100ci\u2FC0\u2FC5r;\uC000\u{1D4C5};\u43C8ncsp;\u6008\u0300fiopsu\u2FDA\u22E2\u2FDF\u2FE5\u2FEB\u2FF1r;\uC000\u{1D52E}pf;\uC000\u{1D562}rime;\u6057cr;\uC000\u{1D4C6}\u0180aeo\u2FF8\u3009\u3013t\u0100ei\u2FFE\u3005rnion\xF3\u06B0nt;\u6A16st\u0100;e\u3010\u3011\u403F\xF1\u1F19\xF4\u0F14\u0A80ABHabcdefhilmnoprstux\u3040\u3051\u3055\u3059\u30E0\u310E\u312B\u3147\u3162\u3172\u318E\u3206\u3215\u3224\u3229\u3258\u326E\u3272\u3290\u32B0\u32B7\u0180art\u3047\u304A\u304Cr\xF2\u10B3\xF2\u03DDail;\u691Car\xF2\u1C65ar;\u6964\u0380cdenqrt\u3068\u3075\u3078\u307F\u308F\u3094\u30CC\u0100eu\u306D\u3071;\uC000\u223D\u0331te;\u4155i\xE3\u116Emptyv;\u69B3g\u0200;del\u0FD1\u3089\u308B\u308D;\u6992;\u69A5\xE5\u0FD1uo\u803B\xBB\u40BBr\u0580;abcfhlpstw\u0FDC\u30AC\u30AF\u30B7\u30B9\u30BC\u30BE\u30C0\u30C3\u30C7\u30CAp;\u6975\u0100;f\u0FE0\u30B4s;\u6920;\u6933s;\u691E\xEB\u225D\xF0\u272El;\u6945im;\u6974l;\u61A3;\u619D\u0100ai\u30D1\u30D5il;\u691Ao\u0100;n\u30DB\u30DC\u6236al\xF3\u0F1E\u0180abr\u30E7\u30EA\u30EEr\xF2\u17E5rk;\u6773\u0100ak\u30F3\u30FDc\u0100ek\u30F9\u30FB;\u407D;\u405D\u0100es\u3102\u3104;\u698Cl\u0100du\u310A\u310C;\u698E;\u6990\u0200aeuy\u3117\u311C\u3127\u3129ron;\u4159\u0100di\u3121\u3125il;\u4157\xEC\u0FF2\xE2\u30FA;\u4440\u0200clqs\u3134\u3137\u313D\u3144a;\u6937dhar;\u6969uo\u0100;r\u020E\u020Dh;\u61B3\u0180acg\u314E\u315F\u0F44l\u0200;ips\u0F78\u3158\u315B\u109Cn\xE5\u10BBar\xF4\u0FA9t;\u65AD\u0180ilr\u3169\u1023\u316Esht;\u697D;\uC000\u{1D52F}\u0100ao\u3177\u3186r\u0100du\u317D\u317F\xBB\u047B\u0100;l\u1091\u3184;\u696C\u0100;v\u318B\u318C\u43C1;\u43F1\u0180gns\u3195\u31F9\u31FCht\u0300ahlrst\u31A4\u31B0\u31C2\u31D8\u31E4\u31EErrow\u0100;t\u0FDC\u31ADa\xE9\u30C8arpoon\u0100du\u31BB\u31BFow\xEE\u317Ep\xBB\u1092eft\u0100ah\u31CA\u31D0rrow\xF3\u0FEAarpoon\xF3\u0551ightarrows;\u61C9quigarro\xF7\u30CBhreetimes;\u62CCg;\u42DAingdotse\xF1\u1F32\u0180ahm\u320D\u3210\u3213r\xF2\u0FEAa\xF2\u0551;\u600Foust\u0100;a\u321E\u321F\u63B1che\xBB\u321Fmid;\u6AEE\u0200abpt\u3232\u323D\u3240\u3252\u0100nr\u3237\u323Ag;\u67EDr;\u61FEr\xEB\u1003\u0180afl\u3247\u324A\u324Er;\u6986;\uC000\u{1D563}us;\u6A2Eimes;\u6A35\u0100ap\u325D\u3267r\u0100;g\u3263\u3264\u4029t;\u6994olint;\u6A12ar\xF2\u31E3\u0200achq\u327B\u3280\u10BC\u3285quo;\u603Ar;\uC000\u{1D4C7}\u0100bu\u30FB\u328Ao\u0100;r\u0214\u0213\u0180hir\u3297\u329B\u32A0re\xE5\u31F8mes;\u62CAi\u0200;efl\u32AA\u1059\u1821\u32AB\u65B9tri;\u69CEluhar;\u6968;\u611E\u0D61\u32D5\u32DB\u32DF\u332C\u3338\u3371\0\u337A\u33A4\0\0\u33EC\u33F0\0\u3428\u3448\u345A\u34AD\u34B1\u34CA\u34F1\0\u3616\0\0\u3633cute;\u415Bqu\xEF\u27BA\u0500;Eaceinpsy\u11ED\u32F3\u32F5\u32FF\u3302\u330B\u330F\u331F\u3326\u3329;\u6AB4\u01F0\u32FA\0\u32FC;\u6AB8on;\u4161u\xE5\u11FE\u0100;d\u11F3\u3307il;\u415Frc;\u415D\u0180Eas\u3316\u3318\u331B;\u6AB6p;\u6ABAim;\u62E9olint;\u6A13i\xED\u1204;\u4441ot\u0180;be\u3334\u1D47\u3335\u62C5;\u6A66\u0380Aacmstx\u3346\u334A\u3357\u335B\u335E\u3363\u336Drr;\u61D8r\u0100hr\u3350\u3352\xEB\u2228\u0100;o\u0A36\u0A34t\u803B\xA7\u40A7i;\u403Bwar;\u6929m\u0100in\u3369\xF0nu\xF3\xF1t;\u6736r\u0100;o\u3376\u2055\uC000\u{1D530}\u0200acoy\u3382\u3386\u3391\u33A0rp;\u666F\u0100hy\u338B\u338Fcy;\u4449;\u4448rt\u026D\u3399\0\0\u339Ci\xE4\u1464ara\xEC\u2E6F\u803B\xAD\u40AD\u0100gm\u33A8\u33B4ma\u0180;fv\u33B1\u33B2\u33B2\u43C3;\u43C2\u0400;deglnpr\u12AB\u33C5\u33C9\u33CE\u33D6\u33DE\u33E1\u33E6ot;\u6A6A\u0100;q\u12B1\u12B0\u0100;E\u33D3\u33D4\u6A9E;\u6AA0\u0100;E\u33DB\u33DC\u6A9D;\u6A9Fe;\u6246lus;\u6A24arr;\u6972ar\xF2\u113D\u0200aeit\u33F8\u3408\u340F\u3417\u0100ls\u33FD\u3404lsetm\xE9\u336Ahp;\u6A33parsl;\u69E4\u0100dl\u1463\u3414e;\u6323\u0100;e\u341C\u341D\u6AAA\u0100;s\u3422\u3423\u6AAC;\uC000\u2AAC\uFE00\u0180flp\u342E\u3433\u3442tcy;\u444C\u0100;b\u3438\u3439\u402F\u0100;a\u343E\u343F\u69C4r;\u633Ff;\uC000\u{1D564}a\u0100dr\u344D\u0402es\u0100;u\u3454\u3455\u6660it\xBB\u3455\u0180csu\u3460\u3479\u349F\u0100au\u3465\u346Fp\u0100;s\u1188\u346B;\uC000\u2293\uFE00p\u0100;s\u11B4\u3475;\uC000\u2294\uFE00u\u0100bp\u347F\u348F\u0180;es\u1197\u119C\u3486et\u0100;e\u1197\u348D\xF1\u119D\u0180;es\u11A8\u11AD\u3496et\u0100;e\u11A8\u349D\xF1\u11AE\u0180;af\u117B\u34A6\u05B0r\u0165\u34AB\u05B1\xBB\u117Car\xF2\u1148\u0200cemt\u34B9\u34BE\u34C2\u34C5r;\uC000\u{1D4C8}tm\xEE\xF1i\xEC\u3415ar\xE6\u11BE\u0100ar\u34CE\u34D5r\u0100;f\u34D4\u17BF\u6606\u0100an\u34DA\u34EDight\u0100ep\u34E3\u34EApsilo\xEE\u1EE0h\xE9\u2EAFs\xBB\u2852\u0280bcmnp\u34FB\u355E\u1209\u358B\u358E\u0480;Edemnprs\u350E\u350F\u3511\u3515\u351E\u3523\u352C\u3531\u3536\u6282;\u6AC5ot;\u6ABD\u0100;d\u11DA\u351Aot;\u6AC3ult;\u6AC1\u0100Ee\u3528\u352A;\u6ACB;\u628Alus;\u6ABFarr;\u6979\u0180eiu\u353D\u3552\u3555t\u0180;en\u350E\u3545\u354Bq\u0100;q\u11DA\u350Feq\u0100;q\u352B\u3528m;\u6AC7\u0100bp\u355A\u355C;\u6AD5;\u6AD3c\u0300;acens\u11ED\u356C\u3572\u3579\u357B\u3326ppro\xF8\u32FAurlye\xF1\u11FE\xF1\u11F3\u0180aes\u3582\u3588\u331Bppro\xF8\u331Aq\xF1\u3317g;\u666A\u0680123;Edehlmnps\u35A9\u35AC\u35AF\u121C\u35B2\u35B4\u35C0\u35C9\u35D5\u35DA\u35DF\u35E8\u35ED\u803B\xB9\u40B9\u803B\xB2\u40B2\u803B\xB3\u40B3;\u6AC6\u0100os\u35B9\u35BCt;\u6ABEub;\u6AD8\u0100;d\u1222\u35C5ot;\u6AC4s\u0100ou\u35CF\u35D2l;\u67C9b;\u6AD7arr;\u697Bult;\u6AC2\u0100Ee\u35E4\u35E6;\u6ACC;\u628Blus;\u6AC0\u0180eiu\u35F4\u3609\u360Ct\u0180;en\u121C\u35FC\u3602q\u0100;q\u1222\u35B2eq\u0100;q\u35E7\u35E4m;\u6AC8\u0100bp\u3611\u3613;\u6AD4;\u6AD6\u0180Aan\u361C\u3620\u362Drr;\u61D9r\u0100hr\u3626\u3628\xEB\u222E\u0100;o\u0A2B\u0A29war;\u692Alig\u803B\xDF\u40DF\u0BE1\u3651\u365D\u3660\u12CE\u3673\u3679\0\u367E\u36C2\0\0\0\0\0\u36DB\u3703\0\u3709\u376C\0\0\0\u3787\u0272\u3656\0\0\u365Bget;\u6316;\u43C4r\xEB\u0E5F\u0180aey\u3666\u366B\u3670ron;\u4165dil;\u4163;\u4442lrec;\u6315r;\uC000\u{1D531}\u0200eiko\u3686\u369D\u36B5\u36BC\u01F2\u368B\0\u3691e\u01004f\u1284\u1281a\u0180;sv\u3698\u3699\u369B\u43B8ym;\u43D1\u0100cn\u36A2\u36B2k\u0100as\u36A8\u36AEppro\xF8\u12C1im\xBB\u12ACs\xF0\u129E\u0100as\u36BA\u36AE\xF0\u12C1rn\u803B\xFE\u40FE\u01EC\u031F\u36C6\u22E7es\u8180\xD7;bd\u36CF\u36D0\u36D8\u40D7\u0100;a\u190F\u36D5r;\u6A31;\u6A30\u0180eps\u36E1\u36E3\u3700\xE1\u2A4D\u0200;bcf\u0486\u36EC\u36F0\u36F4ot;\u6336ir;\u6AF1\u0100;o\u36F9\u36FC\uC000\u{1D565}rk;\u6ADA\xE1\u3362rime;\u6034\u0180aip\u370F\u3712\u3764d\xE5\u1248\u0380adempst\u3721\u374D\u3740\u3751\u3757\u375C\u375Fngle\u0280;dlqr\u3730\u3731\u3736\u3740\u3742\u65B5own\xBB\u1DBBeft\u0100;e\u2800\u373E\xF1\u092E;\u625Cight\u0100;e\u32AA\u374B\xF1\u105Aot;\u65ECinus;\u6A3Alus;\u6A39b;\u69CDime;\u6A3Bezium;\u63E2\u0180cht\u3772\u377D\u3781\u0100ry\u3777\u377B;\uC000\u{1D4C9};\u4446cy;\u445Brok;\u4167\u0100io\u378B\u378Ex\xF4\u1777head\u0100lr\u3797\u37A0eftarro\xF7\u084Fightarrow\xBB\u0F5D\u0900AHabcdfghlmoprstuw\u37D0\u37D3\u37D7\u37E4\u37F0\u37FC\u380E\u381C\u3823\u3834\u3851\u385D\u386B\u38A9\u38CC\u38D2\u38EA\u38F6r\xF2\u03EDar;\u6963\u0100cr\u37DC\u37E2ute\u803B\xFA\u40FA\xF2\u1150r\u01E3\u37EA\0\u37EDy;\u445Eve;\u416D\u0100iy\u37F5\u37FArc\u803B\xFB\u40FB;\u4443\u0180abh\u3803\u3806\u380Br\xF2\u13ADlac;\u4171a\xF2\u13C3\u0100ir\u3813\u3818sht;\u697E;\uC000\u{1D532}rave\u803B\xF9\u40F9\u0161\u3827\u3831r\u0100lr\u382C\u382E\xBB\u0957\xBB\u1083lk;\u6580\u0100ct\u3839\u384D\u026F\u383F\0\0\u384Arn\u0100;e\u3845\u3846\u631Cr\xBB\u3846op;\u630Fri;\u65F8\u0100al\u3856\u385Acr;\u416B\u80BB\xA8\u0349\u0100gp\u3862\u3866on;\u4173f;\uC000\u{1D566}\u0300adhlsu\u114B\u3878\u387D\u1372\u3891\u38A0own\xE1\u13B3arpoon\u0100lr\u3888\u388Cef\xF4\u382Digh\xF4\u382Fi\u0180;hl\u3899\u389A\u389C\u43C5\xBB\u13FAon\xBB\u389Aparrows;\u61C8\u0180cit\u38B0\u38C4\u38C8\u026F\u38B6\0\0\u38C1rn\u0100;e\u38BC\u38BD\u631Dr\xBB\u38BDop;\u630Eng;\u416Fri;\u65F9cr;\uC000\u{1D4CA}\u0180dir\u38D9\u38DD\u38E2ot;\u62F0lde;\u4169i\u0100;f\u3730\u38E8\xBB\u1813\u0100am\u38EF\u38F2r\xF2\u38A8l\u803B\xFC\u40FCangle;\u69A7\u0780ABDacdeflnoprsz\u391C\u391F\u3929\u392D\u39B5\u39B8\u39BD\u39DF\u39E4\u39E8\u39F3\u39F9\u39FD\u3A01\u3A20r\xF2\u03F7ar\u0100;v\u3926\u3927\u6AE8;\u6AE9as\xE8\u03E1\u0100nr\u3932\u3937grt;\u699C\u0380eknprst\u34E3\u3946\u394B\u3952\u395D\u3964\u3996app\xE1\u2415othin\xE7\u1E96\u0180hir\u34EB\u2EC8\u3959op\xF4\u2FB5\u0100;h\u13B7\u3962\xEF\u318D\u0100iu\u3969\u396Dgm\xE1\u33B3\u0100bp\u3972\u3984setneq\u0100;q\u397D\u3980\uC000\u228A\uFE00;\uC000\u2ACB\uFE00setneq\u0100;q\u398F\u3992\uC000\u228B\uFE00;\uC000\u2ACC\uFE00\u0100hr\u399B\u399Fet\xE1\u369Ciangle\u0100lr\u39AA\u39AFeft\xBB\u0925ight\xBB\u1051y;\u4432ash\xBB\u1036\u0180elr\u39C4\u39D2\u39D7\u0180;be\u2DEA\u39CB\u39CFar;\u62BBq;\u625Alip;\u62EE\u0100bt\u39DC\u1468a\xF2\u1469r;\uC000\u{1D533}tr\xE9\u39AEsu\u0100bp\u39EF\u39F1\xBB\u0D1C\xBB\u0D59pf;\uC000\u{1D567}ro\xF0\u0EFBtr\xE9\u39B4\u0100cu\u3A06\u3A0Br;\uC000\u{1D4CB}\u0100bp\u3A10\u3A18n\u0100Ee\u3980\u3A16\xBB\u397En\u0100Ee\u3992\u3A1E\xBB\u3990igzag;\u699A\u0380cefoprs\u3A36\u3A3B\u3A56\u3A5B\u3A54\u3A61\u3A6Airc;\u4175\u0100di\u3A40\u3A51\u0100bg\u3A45\u3A49ar;\u6A5Fe\u0100;q\u15FA\u3A4F;\u6259erp;\u6118r;\uC000\u{1D534}pf;\uC000\u{1D568}\u0100;e\u1479\u3A66at\xE8\u1479cr;\uC000\u{1D4CC}\u0AE3\u178E\u3A87\0\u3A8B\0\u3A90\u3A9B\0\0\u3A9D\u3AA8\u3AAB\u3AAF\0\0\u3AC3\u3ACE\0\u3AD8\u17DC\u17DFtr\xE9\u17D1r;\uC000\u{1D535}\u0100Aa\u3A94\u3A97r\xF2\u03C3r\xF2\u09F6;\u43BE\u0100Aa\u3AA1\u3AA4r\xF2\u03B8r\xF2\u09EBa\xF0\u2713is;\u62FB\u0180dpt\u17A4\u3AB5\u3ABE\u0100fl\u3ABA\u17A9;\uC000\u{1D569}im\xE5\u17B2\u0100Aa\u3AC7\u3ACAr\xF2\u03CEr\xF2\u0A01\u0100cq\u3AD2\u17B8r;\uC000\u{1D4CD}\u0100pt\u17D6\u3ADCr\xE9\u17D4\u0400acefiosu\u3AF0\u3AFD\u3B08\u3B0C\u3B11\u3B15\u3B1B\u3B21c\u0100uy\u3AF6\u3AFBte\u803B\xFD\u40FD;\u444F\u0100iy\u3B02\u3B06rc;\u4177;\u444Bn\u803B\xA5\u40A5r;\uC000\u{1D536}cy;\u4457pf;\uC000\u{1D56A}cr;\uC000\u{1D4CE}\u0100cm\u3B26\u3B29y;\u444El\u803B\xFF\u40FF\u0500acdefhiosw\u3B42\u3B48\u3B54\u3B58\u3B64\u3B69\u3B6D\u3B74\u3B7A\u3B80cute;\u417A\u0100ay\u3B4D\u3B52ron;\u417E;\u4437ot;\u417C\u0100et\u3B5D\u3B61tr\xE6\u155Fa;\u43B6r;\uC000\u{1D537}cy;\u4436grarr;\u61DDpf;\uC000\u{1D56B}cr;\uC000\u{1D4CF}\u0100jn\u3B85\u3B87;\u600Dj;\u600C'.split("").map(t=>t.charCodeAt(0))),xmlDecodeTree=new Uint16Array("\u0200aglq	\x1B\u026D\0\0p;\u4026os;\u4027t;\u403Et;\u403Cuot;\u4022".split("").map(t=>t.charCodeAt(0)));var _a;const decodeMap=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),fromCodePoint=(_a=String.fromCodePoint)!==null&&_a!==void 0?_a:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function replaceCodePoint(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=decodeMap.get(t))!==null&&e!==void 0?e:t}var CharCodes$1;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(CharCodes$1||(CharCodes$1={}));const TO_LOWER_BIT=32;var BinTrieFlags;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(BinTrieFlags||(BinTrieFlags={}));function isNumber$1(t){return t>=CharCodes$1.ZERO&&t<=CharCodes$1.NINE}function isHexadecimalCharacter(t){return t>=CharCodes$1.UPPER_A&&t<=CharCodes$1.UPPER_F||t>=CharCodes$1.LOWER_A&&t<=CharCodes$1.LOWER_F}function isAsciiAlphaNumeric$1(t){return t>=CharCodes$1.UPPER_A&&t<=CharCodes$1.UPPER_Z||t>=CharCodes$1.LOWER_A&&t<=CharCodes$1.LOWER_Z||isNumber$1(t)}function isEntityInAttributeInvalidEnd$1(t){return t===CharCodes$1.EQUALS||isAsciiAlphaNumeric$1(t)}var EntityDecoderState;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(EntityDecoderState||(EntityDecoderState={}));var DecodingMode;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(DecodingMode||(DecodingMode={}));class EntityDecoder{constructor(e,n,s){this.decodeTree=e,this.emitCodePoint=n,this.errors=s,this.state=EntityDecoderState.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=DecodingMode.Strict}startEntity(e){this.decodeMode=e,this.state=EntityDecoderState.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case EntityDecoderState.EntityStart:return e.charCodeAt(n)===CharCodes$1.NUM?(this.state=EntityDecoderState.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=EntityDecoderState.NamedEntity,this.stateNamedEntity(e,n));case EntityDecoderState.NumericStart:return this.stateNumericStart(e,n);case EntityDecoderState.NumericDecimal:return this.stateNumericDecimal(e,n);case EntityDecoderState.NumericHex:return this.stateNumericHex(e,n);case EntityDecoderState.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|TO_LOWER_BIT)===CharCodes$1.LOWER_X?(this.state=EntityDecoderState.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=EntityDecoderState.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,s,r){if(n!==s){const i=s-n;this.result=this.result*Math.pow(r,i)+parseInt(e.substr(n,i),r),this.consumed+=i}}stateNumericHex(e,n){const s=n;for(;n<e.length;){const r=e.charCodeAt(n);if(isNumber$1(r)||isHexadecimalCharacter(r))n+=1;else return this.addToNumericResult(e,s,n,16),this.emitNumericEntity(r,3)}return this.addToNumericResult(e,s,n,16),-1}stateNumericDecimal(e,n){const s=n;for(;n<e.length;){const r=e.charCodeAt(n);if(isNumber$1(r))n+=1;else return this.addToNumericResult(e,s,n,10),this.emitNumericEntity(r,2)}return this.addToNumericResult(e,s,n,10),-1}emitNumericEntity(e,n){var s;if(this.consumed<=n)return(s=this.errors)===null||s===void 0||s.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===CharCodes$1.SEMI)this.consumed+=1;else if(this.decodeMode===DecodingMode.Strict)return 0;return this.emitCodePoint(replaceCodePoint(this.result),this.consumed),this.errors&&(e!==CharCodes$1.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:s}=this;let r=s[this.treeIndex],i=(r&BinTrieFlags.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const a=e.charCodeAt(n);if(this.treeIndex=determineBranch(s,r,this.treeIndex+Math.max(1,i),a),this.treeIndex<0)return this.result===0||this.decodeMode===DecodingMode.Attribute&&(i===0||isEntityInAttributeInvalidEnd$1(a))?0:this.emitNotTerminatedNamedEntity();if(r=s[this.treeIndex],i=(r&BinTrieFlags.VALUE_LENGTH)>>14,i!==0){if(a===CharCodes$1.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==DecodingMode.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:s}=this,r=(s[n]&BinTrieFlags.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,r,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,s){const{decodeTree:r}=this;return this.emitCodePoint(n===1?r[e]&~BinTrieFlags.VALUE_LENGTH:r[e+1],s),n===3&&this.emitCodePoint(r[e+2],s),s}end(){var e;switch(this.state){case EntityDecoderState.NamedEntity:return this.result!==0&&(this.decodeMode!==DecodingMode.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case EntityDecoderState.NumericDecimal:return this.emitNumericEntity(0,2);case EntityDecoderState.NumericHex:return this.emitNumericEntity(0,3);case EntityDecoderState.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case EntityDecoderState.EntityStart:return 0}}}function getDecoder(t){let e="";const n=new EntityDecoder(t,s=>e+=fromCodePoint(s));return function(s,r){let i=0,a=0;for(;(a=s.indexOf("&",a))>=0;){e+=s.slice(i,a),n.startEntity(r);const o=n.write(s,a+1);if(o<0){i=a+n.end();break}i=a+o,a=o===0?i+1:i}const c=e+s.slice(i);return e="",c}}function determineBranch(t,e,n,s){const r=(e&BinTrieFlags.BRANCH_LENGTH)>>7,i=e&BinTrieFlags.JUMP_TABLE;if(r===0)return i!==0&&s===i?n:-1;if(i){const o=s-i;return o<0||o>=r?-1:t[n+o]-1}let a=n,c=a+r-1;for(;a<=c;){const o=a+c>>>1,m=t[o];if(m<s)a=o+1;else if(m>s)c=o-1;else return t[o+r]}return-1}getDecoder(htmlDecodeTree),getDecoder(xmlDecodeTree);const xmlReplacer=/["&'<>$\x80-\uFFFF]/g,xmlCodeMap=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),getCodePoint=String.prototype.codePointAt!=null?(t,e)=>t.codePointAt(e):(t,e)=>(t.charCodeAt(e)&64512)===55296?(t.charCodeAt(e)-55296)*1024+t.charCodeAt(e+1)-56320+65536:t.charCodeAt(e);function encodeXML(t){let e="",n=0,s;for(;(s=xmlReplacer.exec(t))!==null;){const r=s.index,i=t.charCodeAt(r),a=xmlCodeMap.get(i);a!==void 0?(e+=t.substring(n,r)+a,n=r+1):(e+=`${t.substring(n,r)}&#x${getCodePoint(t,r).toString(16)};`,n=xmlReplacer.lastIndex+=+((i&64512)===55296))}return e+t.substr(n)}function getEscaper(t,e){return function(n){let s,r=0,i="";for(;s=t.exec(n);)r!==s.index&&(i+=n.substring(r,s.index)),i+=e.get(s[0].charCodeAt(0)),r=s.index+1;return i+n.substring(r)}}const escapeAttribute=getEscaper(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),escapeText=getEscaper(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),unencodedElements=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function replaceQuotes(t){return t.replace(/"/g,"&quot;")}function formatAttributes(t,e){var n;if(!t)return;const s=((n=e.encodeEntities)!==null&&n!==void 0?n:e.decodeEntities)===!1?replaceQuotes:e.xmlMode||e.encodeEntities!=="utf8"?encodeXML:escapeAttribute;return Object.keys(t).map(r=>{var i,a;const c=(i=t[r])!==null&&i!==void 0?i:"";return e.xmlMode==="foreign"&&(r=(a=attributeNames.get(r))!==null&&a!==void 0?a:r),!e.emptyAttrs&&!e.xmlMode&&c===""?r:`${r}="${s(c)}"`}).join(" ")}const singleTag=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function render$1(t,e={}){const n="length"in t?t:[t];let s="";for(let r=0;r<n.length;r++)s+=renderNode(n[r],e);return s}function renderNode(t,e){switch(t.type){case Root:return render$1(t.children,e);case Doctype:case Directive:return renderDirective(t);case Comment$1:return renderComment(t);case CDATA$1:return renderCdata(t);case Script:case Style:case Tag:return renderTag(t,e);case Text$1:return renderText(t,e)}}const foreignModeIntegrationPoints=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),foreignElements=new Set(["svg","math"]);function renderTag(t,e){var n;e.xmlMode==="foreign"&&(t.name=(n=elementNames.get(t.name))!==null&&n!==void 0?n:t.name,t.parent&&foreignModeIntegrationPoints.has(t.parent.name)&&(e={...e,xmlMode:!1})),!e.xmlMode&&foreignElements.has(t.name)&&(e={...e,xmlMode:"foreign"});let s=`<${t.name}`;const r=formatAttributes(t.attribs,e);return r&&(s+=` ${r}`),t.children.length===0&&(e.xmlMode?e.selfClosingTags!==!1:e.selfClosingTags&&singleTag.has(t.name))?(e.xmlMode||(s+=" "),s+="/>"):(s+=">",t.children.length>0&&(s+=render$1(t.children,e)),(e.xmlMode||!singleTag.has(t.name))&&(s+=`</${t.name}>`)),s}function renderDirective(t){return`<${t.data}>`}function renderText(t,e){var n;let s=t.data||"";return((n=e.encodeEntities)!==null&&n!==void 0?n:e.decodeEntities)!==!1&&!(!e.xmlMode&&t.parent&&unencodedElements.has(t.parent.name))&&(s=e.xmlMode||e.encodeEntities!=="utf8"?encodeXML(s):escapeText(s)),s}function renderCdata(t){return`<![CDATA[${t.children[0].data}]]>`}function renderComment(t){return`<!--${t.data}-->`}function getOuterHTML(t,e){return render$1(t,e)}function getInnerHTML(t,e){return hasChildren(t)?t.children.map(n=>getOuterHTML(n,e)).join(""):""}function getText(t){return Array.isArray(t)?t.map(getText).join(""):isTag(t)?t.name==="br"?`
`:getText(t.children):isCDATA(t)?getText(t.children):isText(t)?t.data:""}function textContent(t){return Array.isArray(t)?t.map(textContent).join(""):hasChildren(t)&&!isComment(t)?textContent(t.children):isText(t)?t.data:""}function innerText(t){return Array.isArray(t)?t.map(innerText).join(""):hasChildren(t)&&(t.type===ElementType.Tag||isCDATA(t))?innerText(t.children):isText(t)?t.data:""}function getChildren(t){return hasChildren(t)?t.children:[]}function getParent(t){return t.parent||null}function getSiblings(t){const e=getParent(t);if(e!=null)return getChildren(e);const n=[t];let{prev:s,next:r}=t;for(;s!=null;)n.unshift(s),{prev:s}=s;for(;r!=null;)n.push(r),{next:r}=r;return n}function getAttributeValue(t,e){var n;return(n=t.attribs)===null||n===void 0?void 0:n[e]}function hasAttrib(t,e){return t.attribs!=null&&Object.prototype.hasOwnProperty.call(t.attribs,e)&&t.attribs[e]!=null}function getName(t){return t.name}function nextElementSibling(t){let{next:e}=t;for(;e!==null&&!isTag(e);)({next:e}=e);return e}function prevElementSibling(t){let{prev:e}=t;for(;e!==null&&!isTag(e);)({prev:e}=e);return e}function removeElement(t){if(t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t.parent){const e=t.parent.children,n=e.lastIndexOf(t);n>=0&&e.splice(n,1)}t.next=null,t.prev=null,t.parent=null}function replaceElement(t,e){const n=e.prev=t.prev;n&&(n.next=e);const s=e.next=t.next;s&&(s.prev=e);const r=e.parent=t.parent;if(r){const i=r.children;i[i.lastIndexOf(t)]=e,t.parent=null}}function appendChild(t,e){if(removeElement(e),e.next=null,e.parent=t,t.children.push(e)>1){const n=t.children[t.children.length-2];n.next=e,e.prev=n}else e.prev=null}function append$1(t,e){removeElement(e);const{parent:n}=t,s=t.next;if(e.next=s,e.prev=t,t.next=e,e.parent=n,s){if(s.prev=e,n){const r=n.children;r.splice(r.lastIndexOf(s),0,e)}}else n&&n.children.push(e)}function prependChild(t,e){if(removeElement(e),e.parent=t,e.prev=null,t.children.unshift(e)!==1){const n=t.children[1];n.prev=e,e.next=n}else e.next=null}function prepend$1(t,e){removeElement(e);const{parent:n}=t;if(n){const s=n.children;s.splice(s.indexOf(t),0,e)}t.prev&&(t.prev.next=e),e.parent=n,e.prev=t.prev,e.next=t,t.prev=e}function filter$2(t,e,n=!0,s=1/0){return find$2(t,Array.isArray(e)?e:[e],n,s)}function find$2(t,e,n,s){const r=[],i=[e],a=[0];for(;;){if(a[0]>=i[0].length){if(a.length===1)return r;i.shift(),a.shift();continue}const c=i[0][a[0]++];if(t(c)&&(r.push(c),--s<=0))return r;n&&hasChildren(c)&&c.children.length>0&&(a.unshift(0),i.unshift(c.children))}}function findOneChild(t,e){return e.find(t)}function findOne(t,e,n=!0){let s=null;for(let r=0;r<e.length&&!s;r++){const i=e[r];if(isTag(i))t(i)?s=i:n&&i.children.length>0&&(s=findOne(t,i.children,!0));else continue}return s}function existsOne(t,e){return e.some(n=>isTag(n)&&(t(n)||existsOne(t,n.children)))}function findAll(t,e){const n=[],s=[e],r=[0];for(;;){if(r[0]>=s[0].length){if(s.length===1)return n;s.shift(),r.shift();continue}const i=s[0][r[0]++];isTag(i)&&(t(i)&&n.push(i),i.children.length>0&&(r.unshift(0),s.unshift(i.children)))}}const Checks={tag_name(t){return typeof t=="function"?e=>isTag(e)&&t(e.name):t==="*"?isTag:e=>isTag(e)&&e.name===t},tag_type(t){return typeof t=="function"?e=>t(e.type):e=>e.type===t},tag_contains(t){return typeof t=="function"?e=>isText(e)&&t(e.data):e=>isText(e)&&e.data===t}};function getAttribCheck(t,e){return typeof e=="function"?n=>isTag(n)&&e(n.attribs[t]):n=>isTag(n)&&n.attribs[t]===e}function combineFuncs(t,e){return n=>t(n)||e(n)}function compileTest(t){const e=Object.keys(t).map(n=>{const s=t[n];return Object.prototype.hasOwnProperty.call(Checks,n)?Checks[n](s):getAttribCheck(n,s)});return e.length===0?null:e.reduce(combineFuncs)}function testElement(t,e){const n=compileTest(t);return n?n(e):!0}function getElements(t,e,n,s=1/0){const r=compileTest(t);return r?filter$2(r,e,n,s):[]}function getElementById(t,e,n=!0){return Array.isArray(e)||(e=[e]),findOne(getAttribCheck("id",t),e,n)}function getElementsByTagName(t,e,n=!0,s=1/0){return filter$2(Checks.tag_name(t),e,n,s)}function getElementsByTagType(t,e,n=!0,s=1/0){return filter$2(Checks.tag_type(t),e,n,s)}function removeSubsets(t){let e=t.length;for(;--e>=0;){const n=t[e];if(e>0&&t.lastIndexOf(n,e-1)>=0){t.splice(e,1);continue}for(let s=n.parent;s;s=s.parent)if(t.includes(s)){t.splice(e,1);break}}return t}var DocumentPosition;(function(t){t[t.DISCONNECTED=1]="DISCONNECTED",t[t.PRECEDING=2]="PRECEDING",t[t.FOLLOWING=4]="FOLLOWING",t[t.CONTAINS=8]="CONTAINS",t[t.CONTAINED_BY=16]="CONTAINED_BY"})(DocumentPosition||(DocumentPosition={}));function compareDocumentPosition(t,e){const n=[],s=[];if(t===e)return 0;let r=hasChildren(t)?t:t.parent;for(;r;)n.unshift(r),r=r.parent;for(r=hasChildren(e)?e:e.parent;r;)s.unshift(r),r=r.parent;const i=Math.min(n.length,s.length);let a=0;for(;a<i&&n[a]===s[a];)a++;if(a===0)return DocumentPosition.DISCONNECTED;const c=n[a-1],o=c.children,m=n[a],h=s[a];return o.indexOf(m)>o.indexOf(h)?c===e?DocumentPosition.FOLLOWING|DocumentPosition.CONTAINED_BY:DocumentPosition.FOLLOWING:c===t?DocumentPosition.PRECEDING|DocumentPosition.CONTAINS:DocumentPosition.PRECEDING}function uniqueSort(t){return t=t.filter((e,n,s)=>!s.includes(e,n+1)),t.sort((e,n)=>{const s=compareDocumentPosition(e,n);return s&DocumentPosition.PRECEDING?-1:s&DocumentPosition.FOLLOWING?1:0}),t}function getFeed(t){const e=getOneElement(isValidFeed,t);return e?e.name==="feed"?getAtomFeed(e):getRssFeed(e):null}function getAtomFeed(t){var e;const n=t.children,s={type:"atom",items:getElementsByTagName("entry",n).map(a=>{var c;const{children:o}=a,m={media:getMediaElements(o)};addConditionally(m,"id","id",o),addConditionally(m,"title","title",o);const h=(c=getOneElement("link",o))===null||c===void 0?void 0:c.attribs.href;h&&(m.link=h);const A=fetch$1("summary",o)||fetch$1("content",o);A&&(m.description=A);const y=fetch$1("updated",o);return y&&(m.pubDate=new Date(y)),m})};addConditionally(s,"id","id",n),addConditionally(s,"title","title",n);const r=(e=getOneElement("link",n))===null||e===void 0?void 0:e.attribs.href;r&&(s.link=r),addConditionally(s,"description","subtitle",n);const i=fetch$1("updated",n);return i&&(s.updated=new Date(i)),addConditionally(s,"author","email",n,!0),s}function getRssFeed(t){var e,n;const s=(n=(e=getOneElement("channel",t.children))===null||e===void 0?void 0:e.children)!==null&&n!==void 0?n:[],r={type:t.name.substr(0,3),id:"",items:getElementsByTagName("item",t.children).map(a=>{const{children:c}=a,o={media:getMediaElements(c)};addConditionally(o,"id","guid",c),addConditionally(o,"title","title",c),addConditionally(o,"link","link",c),addConditionally(o,"description","description",c);const m=fetch$1("pubDate",c)||fetch$1("dc:date",c);return m&&(o.pubDate=new Date(m)),o})};addConditionally(r,"title","title",s),addConditionally(r,"link","link",s),addConditionally(r,"description","description",s);const i=fetch$1("lastBuildDate",s);return i&&(r.updated=new Date(i)),addConditionally(r,"author","managingEditor",s,!0),r}const MEDIA_KEYS_STRING=["url","type","lang"],MEDIA_KEYS_INT=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function getMediaElements(t){return getElementsByTagName("media:content",t).map(e=>{const{attribs:n}=e,s={medium:n.medium,isDefault:!!n.isDefault};for(const r of MEDIA_KEYS_STRING)n[r]&&(s[r]=n[r]);for(const r of MEDIA_KEYS_INT)n[r]&&(s[r]=parseInt(n[r],10));return n.expression&&(s.expression=n.expression),s})}function getOneElement(t,e){return getElementsByTagName(t,e,!0,1)[0]}function fetch$1(t,e,n=!1){return textContent(getElementsByTagName(t,e,n,1)).trim()}function addConditionally(t,e,n,s,r=!1){const i=fetch$1(n,s,r);i&&(t[e]=i)}function isValidFeed(t){return t==="rss"||t==="feed"||t==="rdf:RDF"}const DomUtils=Object.freeze(Object.defineProperty({__proto__:null,get DocumentPosition(){return DocumentPosition},append:append$1,appendChild,compareDocumentPosition,existsOne,filter:filter$2,find:find$2,findAll,findOne,findOneChild,getAttributeValue,getChildren,getElementById,getElements,getElementsByTagName,getElementsByTagType,getFeed,getInnerHTML,getName,getOuterHTML,getParent,getSiblings,getText,hasAttrib,hasChildren,innerText,isCDATA,isComment,isDocument,isTag,isText,nextElementSibling,prepend:prepend$1,prependChild,prevElementSibling,removeElement,removeSubsets,replaceElement,testElement,textContent,uniqueSort},Symbol.toStringTag,{value:"Module"}));function render(t,e,n){return t?t(e??t._root.children,null,void 0,n).toString():""}function isOptions(t,e){return!e&&typeof t=="object"&&t!=null&&!("length"in t)&&!("type"in t)}function html$1(t,e){const n=isOptions(t)?(e=t,void 0):t,s={...defaultOpts$2,...this===null||this===void 0?void 0:this._options,...flatten(e??{})};return render(this,n,s)}function xml(t){const e={...this._options,xmlMode:!0};return render(this,t,e)}function text$1(t){const e=t||(this?this.root():[]);let n="";for(let s=0;s<e.length;s++)n+=textContent(e[s]);return n}function parseHTML(t,e,n=typeof e=="boolean"?e:!1){if(!t||typeof t!="string")return null;typeof e=="boolean"&&(n=e);const s=this.load(t,defaultOpts$2,!1);return n||s("script").remove(),s.root()[0].children.slice()}function root$1(){return this(this._root)}function contains(t,e){if(e===t)return!1;let n=e;for(;n&&n!==n.parent;)if(n=n.parent,n===t)return!0;return!1}function merge(t,e){if(!isArrayLike(t)||!isArrayLike(e))return;let n=t.length;const s=+e.length;for(let r=0;r<s;r++)t[n++]=e[r];return t.length=n,t}function isArrayLike(t){if(Array.isArray(t))return!0;if(typeof t!="object"||!Object.prototype.hasOwnProperty.call(t,"length")||typeof t.length!="number"||t.length<0)return!1;for(let e=0;e<t.length;e++)if(!(e in t))return!1;return!0}const staticMethods=Object.freeze(Object.defineProperty({__proto__:null,contains,html:html$1,merge,parseHTML,root:root$1,text:text$1,xml},Symbol.toStringTag,{value:"Module"}));function isCheerio(t){return t.cheerio!=null}function camelCase(t){return t.replace(/[_.-](\w|$)/g,(e,n)=>n.toUpperCase())}function cssCase(t){return t.replace(/[A-Z]/g,"-$&").toLowerCase()}function domEach(t,e){const n=t.length;for(let s=0;s<n;s++)e(t[s],s);return t}function cloneDom(t){const e="length"in t?Array.prototype.map.call(t,s=>cloneNode(s,!0)):[cloneNode(t,!0)],n=new Document(e);return e.forEach(s=>{s.parent=n}),e}var CharacterCodes;(function(t){t[t.LowerA=97]="LowerA",t[t.LowerZ=122]="LowerZ",t[t.UpperA=65]="UpperA",t[t.UpperZ=90]="UpperZ",t[t.Exclamation=33]="Exclamation"})(CharacterCodes||(CharacterCodes={}));function isHtml(t){const e=t.indexOf("<");if(e<0||e>t.length-3)return!1;const n=t.charCodeAt(e+1);return(n>=CharacterCodes.LowerA&&n<=CharacterCodes.LowerZ||n>=CharacterCodes.UpperA&&n<=CharacterCodes.UpperZ||n===CharacterCodes.Exclamation)&&t.includes(">",e+2)}const hasOwn=Object.prototype.hasOwnProperty,rspace=/\s+/,dataAttrPrefix="data-",primitives={null:null,true:!0,false:!1},rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,rbrace=/^{[^]*}$|^\[[^]*]$/;function getAttr(t,e,n){var s;if(!(!t||!isTag(t))){if((s=t.attribs)!==null&&s!==void 0||(t.attribs={}),!e)return t.attribs;if(hasOwn.call(t.attribs,e))return!n&&rboolean.test(e)?e:t.attribs[e];if(t.name==="option"&&e==="value")return text$1(t.children);if(t.name==="input"&&(t.attribs.type==="radio"||t.attribs.type==="checkbox")&&e==="value")return"on"}}function setAttr(t,e,n){n===null?removeAttribute(t,e):t.attribs[e]=`${n}`}function attr(t,e){if(typeof t=="object"||e!==void 0){if(typeof e=="function"){if(typeof t!="string")throw new Error("Bad combination of arguments.");return domEach(this,(n,s)=>{isTag(n)&&setAttr(n,t,e.call(n,s,n.attribs[t]))})}return domEach(this,n=>{isTag(n)&&(typeof t=="object"?Object.keys(t).forEach(s=>{const r=t[s];setAttr(n,s,r)}):setAttr(n,t,e))})}return arguments.length>1?this:getAttr(this[0],t,this.options.xmlMode)}function getProp(t,e,n){return e in t?t[e]:!n&&rboolean.test(e)?getAttr(t,e,!1)!==void 0:getAttr(t,e,n)}function setProp(t,e,n,s){e in t?t[e]=n:setAttr(t,e,!s&&rboolean.test(e)?n?"":null:`${n}`)}function prop(t,e){var n;if(typeof t=="string"&&e===void 0){const s=this[0];if(!s||!isTag(s))return;switch(t){case"style":{const r=this.css(),i=Object.keys(r);return i.forEach((a,c)=>{r[c]=a}),r.length=i.length,r}case"tagName":case"nodeName":return s.name.toUpperCase();case"href":case"src":{const r=(n=s.attribs)===null||n===void 0?void 0:n[t];return typeof URL<"u"&&(t==="href"&&(s.tagName==="a"||s.name==="link")||t==="src"&&(s.tagName==="img"||s.tagName==="iframe"||s.tagName==="audio"||s.tagName==="video"||s.tagName==="source"))&&r!==void 0&&this.options.baseURI?new URL(r,this.options.baseURI).href:r}case"innerText":return innerText(s);case"textContent":return textContent(s);case"outerHTML":return this.clone().wrap("<container />").parent().html();case"innerHTML":return this.html();default:return getProp(s,t,this.options.xmlMode)}}if(typeof t=="object"||e!==void 0){if(typeof e=="function"){if(typeof t=="object")throw new Error("Bad combination of arguments.");return domEach(this,(s,r)=>{isTag(s)&&setProp(s,t,e.call(s,r,getProp(s,t,this.options.xmlMode)),this.options.xmlMode)})}return domEach(this,s=>{isTag(s)&&(typeof t=="object"?Object.keys(t).forEach(r=>{const i=t[r];setProp(s,r,i,this.options.xmlMode)}):setProp(s,t,e,this.options.xmlMode))})}}function setData(t,e,n){var s;const r=t;(s=r.data)!==null&&s!==void 0||(r.data={}),typeof e=="object"?Object.assign(r.data,e):typeof e=="string"&&n!==void 0&&(r.data[e]=n)}function readData(t,e){let n,s,r;e==null?(n=Object.keys(t.attribs).filter(i=>i.startsWith(dataAttrPrefix)),s=n.map(i=>camelCase(i.slice(dataAttrPrefix.length)))):(n=[dataAttrPrefix+cssCase(e)],s=[e]);for(let i=0;i<n.length;++i){const a=n[i],c=s[i];if(hasOwn.call(t.attribs,a)&&!hasOwn.call(t.data,c)){if(r=t.attribs[a],hasOwn.call(primitives,r))r=primitives[r];else if(r===String(Number(r)))r=Number(r);else if(rbrace.test(r))try{r=JSON.parse(r)}catch{}t.data[c]=r}}return e==null?t.data:r}function data(t,e){var n;const s=this[0];if(!s||!isTag(s))return;const r=s;return(n=r.data)!==null&&n!==void 0||(r.data={}),t?typeof t=="object"||e!==void 0?(domEach(this,i=>{isTag(i)&&(typeof t=="object"?setData(i,t):setData(i,t,e))}),this):hasOwn.call(r.data,t)?r.data[t]:readData(r,t):readData(r)}function val(t){const e=arguments.length===0,n=this[0];if(!n||!isTag(n))return e?void 0:this;switch(n.name){case"textarea":return this.text(t);case"select":{const s=this.find("option:selected");if(!e){if(this.attr("multiple")==null&&typeof t=="object")return this;this.find("option").removeAttr("selected");const r=typeof t!="object"?[t]:t;for(let i=0;i<r.length;i++)this.find(`option[value="${r[i]}"]`).attr("selected","");return this}return this.attr("multiple")?s.toArray().map(r=>text$1(r.children)):s.attr("value")}case"input":case"option":return e?this.attr("value"):this.attr("value",t)}}function removeAttribute(t,e){!t.attribs||!hasOwn.call(t.attribs,e)||delete t.attribs[e]}function splitNames(t){return t?t.trim().split(rspace):[]}function removeAttr(t){const e=splitNames(t);for(let n=0;n<e.length;n++)domEach(this,s=>{isTag(s)&&removeAttribute(s,e[n])});return this}function hasClass(t){return this.toArray().some(e=>{const n=isTag(e)&&e.attribs.class;let s=-1;if(n&&t.length)for(;(s=n.indexOf(t,s+1))>-1;){const r=s+t.length;if((s===0||rspace.test(n[s-1]))&&(r===n.length||rspace.test(n[r])))return!0}return!1})}function addClass(t){if(typeof t=="function")return domEach(this,(s,r)=>{if(isTag(s)){const i=s.attribs.class||"";addClass.call([s],t.call(s,r,i))}});if(!t||typeof t!="string")return this;const e=t.split(rspace),n=this.length;for(let s=0;s<n;s++){const r=this[s];if(!isTag(r))continue;const i=getAttr(r,"class",!1);if(!i)setAttr(r,"class",e.join(" ").trim());else{let a=` ${i} `;for(let c=0;c<e.length;c++){const o=`${e[c]} `;a.includes(` ${o}`)||(a+=o)}setAttr(r,"class",a.trim())}}return this}function removeClass(t){if(typeof t=="function")return domEach(this,(r,i)=>{isTag(r)&&removeClass.call([r],t.call(r,i,r.attribs.class||""))});const e=splitNames(t),n=e.length,s=arguments.length===0;return domEach(this,r=>{if(isTag(r))if(s)r.attribs.class="";else{const i=splitNames(r.attribs.class);let a=!1;for(let c=0;c<n;c++){const o=i.indexOf(e[c]);o>=0&&(i.splice(o,1),a=!0,c--)}a&&(r.attribs.class=i.join(" "))}})}function toggleClass(t,e){if(typeof t=="function")return domEach(this,(a,c)=>{isTag(a)&&toggleClass.call([a],t.call(a,c,a.attribs.class||"",e),e)});if(!t||typeof t!="string")return this;const n=t.split(rspace),s=n.length,r=typeof e=="boolean"?e?1:-1:0,i=this.length;for(let a=0;a<i;a++){const c=this[a];if(!isTag(c))continue;const o=splitNames(c.attribs.class);for(let m=0;m<s;m++){const h=o.indexOf(n[m]);r>=0&&h<0?o.push(n[m]):r<=0&&h>=0&&o.splice(h,1)}c.attribs.class=o.join(" ")}return this}const Attributes=Object.freeze(Object.defineProperty({__proto__:null,addClass,attr,data,hasClass,prop,removeAttr,removeClass,toggleClass,val},Symbol.toStringTag,{value:"Module"}));var SelectorType;(function(t){t.Attribute="attribute",t.Pseudo="pseudo",t.PseudoElement="pseudo-element",t.Tag="tag",t.Universal="universal",t.Adjacent="adjacent",t.Child="child",t.Descendant="descendant",t.Parent="parent",t.Sibling="sibling",t.ColumnCombinator="column-combinator"})(SelectorType||(SelectorType={}));var AttributeAction;(function(t){t.Any="any",t.Element="element",t.End="end",t.Equals="equals",t.Exists="exists",t.Hyphen="hyphen",t.Not="not",t.Start="start"})(AttributeAction||(AttributeAction={}));const reName=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,reEscape=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,actionTypes=new Map([[126,AttributeAction.Element],[94,AttributeAction.Start],[36,AttributeAction.End],[42,AttributeAction.Any],[33,AttributeAction.Not],[124,AttributeAction.Hyphen]]),unpackPseudos=new Set(["has","not","matches","is","where","host","host-context"]);function isTraversal$1(t){switch(t.type){case SelectorType.Adjacent:case SelectorType.Child:case SelectorType.Descendant:case SelectorType.Parent:case SelectorType.Sibling:case SelectorType.ColumnCombinator:return!0;default:return!1}}const stripQuotesFromPseudos=new Set(["contains","icontains"]);function funescape(t,e,n){const s=parseInt(e,16)-65536;return s!==s||n?e:s<0?String.fromCharCode(s+65536):String.fromCharCode(s>>10|55296,s&1023|56320)}function unescapeCSS(t){return t.replace(reEscape,funescape)}function isQuote(t){return t===39||t===34}function isWhitespace$2(t){return t===32||t===9||t===10||t===12||t===13}function parse$4(t){const e=[],n=parseSelector(e,`${t}`,0);if(n<t.length)throw new Error(`Unmatched selector: ${t.slice(n)}`);return e}function parseSelector(t,e,n){let s=[];function r(y){const C=e.slice(n+y).match(reName);if(!C)throw new Error(`Expected name, found ${e.slice(n)}`);const[D]=C;return n+=y+D.length,unescapeCSS(D)}function i(y){for(n+=y;n<e.length&&isWhitespace$2(e.charCodeAt(n));)n++}function a(){n+=1;const y=n;let C=1;for(;C>0&&n<e.length;n++)e.charCodeAt(n)===40&&!c(n)?C++:e.charCodeAt(n)===41&&!c(n)&&C--;if(C)throw new Error("Parenthesis not matched");return unescapeCSS(e.slice(y,n-1))}function c(y){let C=0;for(;e.charCodeAt(--y)===92;)C++;return(C&1)===1}function o(){if(s.length>0&&isTraversal$1(s[s.length-1]))throw new Error("Did not expect successive traversals.")}function m(y){if(s.length>0&&s[s.length-1].type===SelectorType.Descendant){s[s.length-1].type=y;return}o(),s.push({type:y})}function h(y,C){s.push({type:SelectorType.Attribute,name:y,action:C,value:r(1),namespace:null,ignoreCase:"quirks"})}function A(){if(s.length&&s[s.length-1].type===SelectorType.Descendant&&s.pop(),s.length===0)throw new Error("Empty sub-selector");t.push(s)}if(i(0),e.length===n)return n;t:for(;n<e.length;){const y=e.charCodeAt(n);switch(y){case 32:case 9:case 10:case 12:case 13:{(s.length===0||s[0].type!==SelectorType.Descendant)&&(o(),s.push({type:SelectorType.Descendant})),i(1);break}case 62:{m(SelectorType.Child),i(1);break}case 60:{m(SelectorType.Parent),i(1);break}case 126:{m(SelectorType.Sibling),i(1);break}case 43:{m(SelectorType.Adjacent),i(1);break}case 46:{h("class",AttributeAction.Element);break}case 35:{h("id",AttributeAction.Equals);break}case 91:{i(1);let C,D=null;e.charCodeAt(n)===124?C=r(1):e.startsWith("*|",n)?(D="*",C=r(2)):(C=r(0),e.charCodeAt(n)===124&&e.charCodeAt(n+1)!==61&&(D=C,C=r(1))),i(0);let b=AttributeAction.Exists;const S=actionTypes.get(e.charCodeAt(n));if(S){if(b=S,e.charCodeAt(n+1)!==61)throw new Error("Expected `=`");i(2)}else e.charCodeAt(n)===61&&(b=AttributeAction.Equals,i(1));let O="",v=null;if(b!=="exists"){if(isQuote(e.charCodeAt(n))){const g=e.charCodeAt(n);let f=n+1;for(;f<e.length&&(e.charCodeAt(f)!==g||c(f));)f+=1;if(e.charCodeAt(f)!==g)throw new Error("Attribute value didn't end");O=unescapeCSS(e.slice(n+1,f)),n=f+1}else{const g=n;for(;n<e.length&&(!isWhitespace$2(e.charCodeAt(n))&&e.charCodeAt(n)!==93||c(n));)n+=1;O=unescapeCSS(e.slice(g,n))}i(0);const R=e.charCodeAt(n)|32;R===115?(v=!1,i(1)):R===105&&(v=!0,i(1))}if(e.charCodeAt(n)!==93)throw new Error("Attribute selector didn't terminate");n+=1;const M={type:SelectorType.Attribute,name:C,action:b,value:O,namespace:D,ignoreCase:v};s.push(M);break}case 58:{if(e.charCodeAt(n+1)===58){s.push({type:SelectorType.PseudoElement,name:r(2).toLowerCase(),data:e.charCodeAt(n)===40?a():null});continue}const C=r(1).toLowerCase();let D=null;if(e.charCodeAt(n)===40)if(unpackPseudos.has(C)){if(isQuote(e.charCodeAt(n+1)))throw new Error(`Pseudo-selector ${C} cannot be quoted`);if(D=[],n=parseSelector(D,e,n+1),e.charCodeAt(n)!==41)throw new Error(`Missing closing parenthesis in :${C} (${e})`);n+=1}else{if(D=a(),stripQuotesFromPseudos.has(C)){const b=D.charCodeAt(0);b===D.charCodeAt(D.length-1)&&isQuote(b)&&(D=D.slice(1,-1))}D=unescapeCSS(D)}s.push({type:SelectorType.Pseudo,name:C,data:D});break}case 44:{A(),s=[],i(1);break}default:{if(e.startsWith("/*",n)){const b=e.indexOf("*/",n+2);if(b<0)throw new Error("Comment was not terminated");n=b+2,s.length===0&&i(0);break}let C=null,D;if(y===42)n+=1,D="*";else if(y===124){if(D="",e.charCodeAt(n+1)===124){m(SelectorType.ColumnCombinator),i(2);break}}else if(reName.test(e.slice(n)))D=r(0);else break t;e.charCodeAt(n)===124&&e.charCodeAt(n+1)!==124&&(C=D,e.charCodeAt(n+1)===42?(D="*",n+=2):D=r(1)),s.push(D==="*"?{type:SelectorType.Universal,namespace:C}:{type:SelectorType.Tag,name:D,namespace:C})}}}return A(),n}var boolbase={trueFunc:function(){return!0},falseFunc:function(){return!1}};const boolbase$1=getDefaultExportFromCjs(boolbase),procedure=new Map([[SelectorType.Universal,50],[SelectorType.Tag,30],[SelectorType.Attribute,1],[SelectorType.Pseudo,0]]);function isTraversal(t){return!procedure.has(t.type)}const attributes=new Map([[AttributeAction.Exists,10],[AttributeAction.Equals,8],[AttributeAction.Not,7],[AttributeAction.Start,6],[AttributeAction.End,6],[AttributeAction.Any,5]]);function sortByProcedure(t){const e=t.map(getProcedure);for(let n=1;n<t.length;n++){const s=e[n];if(!(s<0))for(let r=n-1;r>=0&&s<e[r];r--){const i=t[r+1];t[r+1]=t[r],t[r]=i,e[r+1]=e[r],e[r]=s}}}function getProcedure(t){var e,n;let s=(e=procedure.get(t.type))!==null&&e!==void 0?e:-1;return t.type===SelectorType.Attribute?(s=(n=attributes.get(t.action))!==null&&n!==void 0?n:4,t.action===AttributeAction.Equals&&t.name==="id"&&(s=9),t.ignoreCase&&(s>>=1)):t.type===SelectorType.Pseudo&&(t.data?t.name==="has"||t.name==="contains"?s=0:Array.isArray(t.data)?(s=Math.min(...t.data.map(r=>Math.min(...r.map(getProcedure)))),s<0&&(s=0)):s=2:s=3),s}const reChars=/[-[\]{}()*+?.,\\^$|#\s]/g;function escapeRegex(t){return t.replace(reChars,"\\$&")}const caseInsensitiveAttributes=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function shouldIgnoreCase(t,e){return typeof t.ignoreCase=="boolean"?t.ignoreCase:t.ignoreCase==="quirks"?!!e.quirksMode:!e.xmlMode&&caseInsensitiveAttributes.has(t.name)}const attributeRules={equals(t,e,n){const{adapter:s}=n,{name:r}=e;let{value:i}=e;return shouldIgnoreCase(e,n)?(i=i.toLowerCase(),a=>{const c=s.getAttributeValue(a,r);return c!=null&&c.length===i.length&&c.toLowerCase()===i&&t(a)}):a=>s.getAttributeValue(a,r)===i&&t(a)},hyphen(t,e,n){const{adapter:s}=n,{name:r}=e;let{value:i}=e;const a=i.length;return shouldIgnoreCase(e,n)?(i=i.toLowerCase(),function(c){const o=s.getAttributeValue(c,r);return o!=null&&(o.length===a||o.charAt(a)==="-")&&o.substr(0,a).toLowerCase()===i&&t(c)}):function(c){const o=s.getAttributeValue(c,r);return o!=null&&(o.length===a||o.charAt(a)==="-")&&o.substr(0,a)===i&&t(c)}},element(t,e,n){const{adapter:s}=n,{name:r,value:i}=e;if(/\s/.test(i))return boolbase$1.falseFunc;const a=new RegExp(`(?:^|\\s)${escapeRegex(i)}(?:$|\\s)`,shouldIgnoreCase(e,n)?"i":"");return function(c){const o=s.getAttributeValue(c,r);return o!=null&&o.length>=i.length&&a.test(o)&&t(c)}},exists(t,{name:e},{adapter:n}){return s=>n.hasAttrib(s,e)&&t(s)},start(t,e,n){const{adapter:s}=n,{name:r}=e;let{value:i}=e;const a=i.length;return a===0?boolbase$1.falseFunc:shouldIgnoreCase(e,n)?(i=i.toLowerCase(),c=>{const o=s.getAttributeValue(c,r);return o!=null&&o.length>=a&&o.substr(0,a).toLowerCase()===i&&t(c)}):c=>{var o;return!!(!((o=s.getAttributeValue(c,r))===null||o===void 0)&&o.startsWith(i))&&t(c)}},end(t,e,n){const{adapter:s}=n,{name:r}=e;let{value:i}=e;const a=-i.length;return a===0?boolbase$1.falseFunc:shouldIgnoreCase(e,n)?(i=i.toLowerCase(),c=>{var o;return((o=s.getAttributeValue(c,r))===null||o===void 0?void 0:o.substr(a).toLowerCase())===i&&t(c)}):c=>{var o;return!!(!((o=s.getAttributeValue(c,r))===null||o===void 0)&&o.endsWith(i))&&t(c)}},any(t,e,n){const{adapter:s}=n,{name:r,value:i}=e;if(i==="")return boolbase$1.falseFunc;if(shouldIgnoreCase(e,n)){const a=new RegExp(escapeRegex(i),"i");return function(c){const o=s.getAttributeValue(c,r);return o!=null&&o.length>=i.length&&a.test(o)&&t(c)}}return a=>{var c;return!!(!((c=s.getAttributeValue(a,r))===null||c===void 0)&&c.includes(i))&&t(a)}},not(t,e,n){const{adapter:s}=n,{name:r}=e;let{value:i}=e;return i===""?a=>!!s.getAttributeValue(a,r)&&t(a):shouldIgnoreCase(e,n)?(i=i.toLowerCase(),a=>{const c=s.getAttributeValue(a,r);return(c==null||c.length!==i.length||c.toLowerCase()!==i)&&t(a)}):a=>s.getAttributeValue(a,r)!==i&&t(a)}},whitespace=new Set([9,10,12,13,32]),ZERO=48,NINE=57;function parse$3(t){if(t=t.trim().toLowerCase(),t==="even")return[2,0];if(t==="odd")return[2,1];let e=0,n=0,s=i(),r=a();if(e<t.length&&t.charAt(e)==="n"&&(e++,n=s*(r??1),c(),e<t.length?(s=i(),c(),r=a()):s=r=0),r===null||e<t.length)throw new Error(`n-th rule couldn't be parsed ('${t}')`);return[n,s*r];function i(){return t.charAt(e)==="-"?(e++,-1):(t.charAt(e)==="+"&&e++,1)}function a(){const o=e;let m=0;for(;e<t.length&&t.charCodeAt(e)>=ZERO&&t.charCodeAt(e)<=NINE;)m=m*10+(t.charCodeAt(e)-ZERO),e++;return e===o?null:m}function c(){for(;e<t.length&&whitespace.has(t.charCodeAt(e));)e++}}function compile(t){const e=t[0],n=t[1]-1;if(n<0&&e<=0)return boolbase$1.falseFunc;if(e===-1)return i=>i<=n;if(e===0)return i=>i===n;if(e===1)return n<0?boolbase$1.trueFunc:i=>i>=n;const s=Math.abs(e),r=(n%s+s)%s;return e>1?i=>i>=n&&i%s===r:i=>i<=n&&i%s===r}function nthCheck(t){return compile(parse$3(t))}function getChildFunc(t,e){return n=>{const s=e.getParent(n);return s!=null&&e.isTag(s)&&t(n)}}const filters={contains(t,e,{adapter:n}){return function(s){return t(s)&&n.getText(s).includes(e)}},icontains(t,e,{adapter:n}){const s=e.toLowerCase();return function(r){return t(r)&&n.getText(r).toLowerCase().includes(s)}},"nth-child"(t,e,{adapter:n,equals:s}){const r=nthCheck(e);return r===boolbase$1.falseFunc?boolbase$1.falseFunc:r===boolbase$1.trueFunc?getChildFunc(t,n):function(i){const a=n.getSiblings(i);let c=0;for(let o=0;o<a.length&&!s(i,a[o]);o++)n.isTag(a[o])&&c++;return r(c)&&t(i)}},"nth-last-child"(t,e,{adapter:n,equals:s}){const r=nthCheck(e);return r===boolbase$1.falseFunc?boolbase$1.falseFunc:r===boolbase$1.trueFunc?getChildFunc(t,n):function(i){const a=n.getSiblings(i);let c=0;for(let o=a.length-1;o>=0&&!s(i,a[o]);o--)n.isTag(a[o])&&c++;return r(c)&&t(i)}},"nth-of-type"(t,e,{adapter:n,equals:s}){const r=nthCheck(e);return r===boolbase$1.falseFunc?boolbase$1.falseFunc:r===boolbase$1.trueFunc?getChildFunc(t,n):function(i){const a=n.getSiblings(i);let c=0;for(let o=0;o<a.length;o++){const m=a[o];if(s(i,m))break;n.isTag(m)&&n.getName(m)===n.getName(i)&&c++}return r(c)&&t(i)}},"nth-last-of-type"(t,e,{adapter:n,equals:s}){const r=nthCheck(e);return r===boolbase$1.falseFunc?boolbase$1.falseFunc:r===boolbase$1.trueFunc?getChildFunc(t,n):function(i){const a=n.getSiblings(i);let c=0;for(let o=a.length-1;o>=0;o--){const m=a[o];if(s(i,m))break;n.isTag(m)&&n.getName(m)===n.getName(i)&&c++}return r(c)&&t(i)}},root(t,e,{adapter:n}){return s=>{const r=n.getParent(s);return(r==null||!n.isTag(r))&&t(s)}},scope(t,e,n,s){const{equals:r}=n;return!s||s.length===0?filters.root(t,e,n):s.length===1?i=>r(s[0],i)&&t(i):i=>s.includes(i)&&t(i)},hover:dynamicStatePseudo("isHovered"),visited:dynamicStatePseudo("isVisited"),active:dynamicStatePseudo("isActive")};function dynamicStatePseudo(t){return function(e,n,{adapter:s}){const r=s[t];return typeof r!="function"?boolbase$1.falseFunc:function(i){return r(i)&&e(i)}}}const pseudos={empty(t,{adapter:e}){return!e.getChildren(t).some(n=>e.isTag(n)||e.getText(n)!=="")},"first-child"(t,{adapter:e,equals:n}){if(e.prevElementSibling)return e.prevElementSibling(t)==null;const s=e.getSiblings(t).find(r=>e.isTag(r));return s!=null&&n(t,s)},"last-child"(t,{adapter:e,equals:n}){const s=e.getSiblings(t);for(let r=s.length-1;r>=0;r--){if(n(t,s[r]))return!0;if(e.isTag(s[r]))break}return!1},"first-of-type"(t,{adapter:e,equals:n}){const s=e.getSiblings(t),r=e.getName(t);for(let i=0;i<s.length;i++){const a=s[i];if(n(t,a))return!0;if(e.isTag(a)&&e.getName(a)===r)break}return!1},"last-of-type"(t,{adapter:e,equals:n}){const s=e.getSiblings(t),r=e.getName(t);for(let i=s.length-1;i>=0;i--){const a=s[i];if(n(t,a))return!0;if(e.isTag(a)&&e.getName(a)===r)break}return!1},"only-of-type"(t,{adapter:e,equals:n}){const s=e.getName(t);return e.getSiblings(t).every(r=>n(t,r)||!e.isTag(r)||e.getName(r)!==s)},"only-child"(t,{adapter:e,equals:n}){return e.getSiblings(t).every(s=>n(t,s)||!e.isTag(s))}};function verifyPseudoArgs(t,e,n,s){if(n===null){if(t.length>s)throw new Error(`Pseudo-class :${e} requires an argument`)}else if(t.length===s)throw new Error(`Pseudo-class :${e} doesn't have any arguments`)}const aliases={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:`:is(
        :is(button, input, select, textarea, optgroup, option)[disabled],
        optgroup[disabled] > option,
        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)
    )`,enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"},PLACEHOLDER_ELEMENT={};function ensureIsTag(t,e){return t===boolbase$1.falseFunc?boolbase$1.falseFunc:n=>e.isTag(n)&&t(n)}function getNextSiblings(t,e){const n=e.getSiblings(t);if(n.length<=1)return[];const s=n.indexOf(t);return s<0||s===n.length-1?[]:n.slice(s+1).filter(e.isTag)}function copyOptions(t){return{xmlMode:!!t.xmlMode,lowerCaseAttributeNames:!!t.lowerCaseAttributeNames,lowerCaseTags:!!t.lowerCaseTags,quirksMode:!!t.quirksMode,cacheResults:!!t.cacheResults,pseudos:t.pseudos,adapter:t.adapter,equals:t.equals}}const is$3=(t,e,n,s,r)=>{const i=r(e,copyOptions(n),s);return i===boolbase$1.trueFunc?t:i===boolbase$1.falseFunc?boolbase$1.falseFunc:a=>i(a)&&t(a)},subselects={is:is$3,matches:is$3,where:is$3,not(t,e,n,s,r){const i=r(e,copyOptions(n),s);return i===boolbase$1.falseFunc?t:i===boolbase$1.trueFunc?boolbase$1.falseFunc:a=>!i(a)&&t(a)},has(t,e,n,s,r){const{adapter:i}=n,a=copyOptions(n);a.relativeSelector=!0;const c=e.some(h=>h.some(isTraversal))?[PLACEHOLDER_ELEMENT]:void 0,o=r(e,a,c);if(o===boolbase$1.falseFunc)return boolbase$1.falseFunc;const m=ensureIsTag(o,i);if(c&&o!==boolbase$1.trueFunc){const{shouldTestNextSiblings:h=!1}=o;return A=>{if(!t(A))return!1;c[0]=A;const y=i.getChildren(A),C=h?[...y,...getNextSiblings(A,i)]:y;return i.existsOne(m,C)}}return h=>t(h)&&i.existsOne(m,i.getChildren(h))}};function compilePseudoSelector(t,e,n,s,r){var i;const{name:a,data:c}=e;if(Array.isArray(c)){if(!(a in subselects))throw new Error(`Unknown pseudo-class :${a}(${c})`);return subselects[a](t,c,n,s,r)}const o=(i=n.pseudos)===null||i===void 0?void 0:i[a],m=typeof o=="string"?o:aliases[a];if(typeof m=="string"){if(c!=null)throw new Error(`Pseudo ${a} doesn't have any arguments`);const h=parse$4(m);return subselects.is(t,h,n,s,r)}if(typeof o=="function")return verifyPseudoArgs(o,a,c,1),h=>o(h,c)&&t(h);if(a in filters)return filters[a](t,c,n,s);if(a in pseudos){const h=pseudos[a];return verifyPseudoArgs(h,a,c,2),A=>h(A,n,c)&&t(A)}throw new Error(`Unknown pseudo-class :${a}`)}function getElementParent(t,e){const n=e.getParent(t);return n&&e.isTag(n)?n:null}function compileGeneralSelector(t,e,n,s,r){const{adapter:i,equals:a}=n;switch(e.type){case SelectorType.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case SelectorType.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case SelectorType.Attribute:{if(e.namespace!=null)throw new Error("Namespaced attributes are not yet supported by css-select");return(!n.xmlMode||n.lowerCaseAttributeNames)&&(e.name=e.name.toLowerCase()),attributeRules[e.action](t,e,n)}case SelectorType.Pseudo:return compilePseudoSelector(t,e,n,s,r);case SelectorType.Tag:{if(e.namespace!=null)throw new Error("Namespaced tag names are not yet supported by css-select");let{name:c}=e;return(!n.xmlMode||n.lowerCaseTags)&&(c=c.toLowerCase()),function(o){return i.getName(o)===c&&t(o)}}case SelectorType.Descendant:{if(n.cacheResults===!1||typeof WeakSet>"u")return function(o){let m=o;for(;m=getElementParent(m,i);)if(t(m))return!0;return!1};const c=new WeakSet;return function(o){let m=o;for(;m=getElementParent(m,i);)if(!c.has(m)){if(i.isTag(m)&&t(m))return!0;c.add(m)}return!1}}case"_flexibleDescendant":return function(c){let o=c;do if(t(o))return!0;while(o=getElementParent(o,i));return!1};case SelectorType.Parent:return function(c){return i.getChildren(c).some(o=>i.isTag(o)&&t(o))};case SelectorType.Child:return function(c){const o=i.getParent(c);return o!=null&&i.isTag(o)&&t(o)};case SelectorType.Sibling:return function(c){const o=i.getSiblings(c);for(let m=0;m<o.length;m++){const h=o[m];if(a(c,h))break;if(i.isTag(h)&&t(h))return!0}return!1};case SelectorType.Adjacent:return i.prevElementSibling?function(c){const o=i.prevElementSibling(c);return o!=null&&t(o)}:function(c){const o=i.getSiblings(c);let m;for(let h=0;h<o.length;h++){const A=o[h];if(a(c,A))break;i.isTag(A)&&(m=A)}return!!m&&t(m)};case SelectorType.Universal:{if(e.namespace!=null&&e.namespace!=="*")throw new Error("Namespaced universal selectors are not yet supported by css-select");return t}}}function includesScopePseudo(t){return t.type===SelectorType.Pseudo&&(t.name==="scope"||Array.isArray(t.data)&&t.data.some(e=>e.some(includesScopePseudo)))}const DESCENDANT_TOKEN={type:SelectorType.Descendant},FLEXIBLE_DESCENDANT_TOKEN={type:"_flexibleDescendant"},SCOPE_TOKEN={type:SelectorType.Pseudo,name:"scope",data:null};function absolutize(t,{adapter:e},n){const s=!!(n!=null&&n.every(r=>{const i=e.isTag(r)&&e.getParent(r);return r===PLACEHOLDER_ELEMENT||i&&e.isTag(i)}));for(const r of t){if(!(r.length>0&&isTraversal(r[0])&&r[0].type!==SelectorType.Descendant))if(s&&!r.some(includesScopePseudo))r.unshift(DESCENDANT_TOKEN);else continue;r.unshift(SCOPE_TOKEN)}}function compileToken(t,e,n){var s;t.forEach(sortByProcedure),n=(s=e.context)!==null&&s!==void 0?s:n;const r=Array.isArray(n),i=n&&(Array.isArray(n)?n:[n]);if(e.relativeSelector!==!1)absolutize(t,e,i);else if(t.some(o=>o.length>0&&isTraversal(o[0])))throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");let a=!1;const c=t.map(o=>{if(o.length>=2){const[m,h]=o;m.type!==SelectorType.Pseudo||m.name!=="scope"||(r&&h.type===SelectorType.Descendant?o[1]=FLEXIBLE_DESCENDANT_TOKEN:(h.type===SelectorType.Adjacent||h.type===SelectorType.Sibling)&&(a=!0))}return compileRules(o,e,i)}).reduce(reduceRules,boolbase$1.falseFunc);return c.shouldTestNextSiblings=a,c}function compileRules(t,e,n){var s;return t.reduce((r,i)=>r===boolbase$1.falseFunc?boolbase$1.falseFunc:compileGeneralSelector(r,i,e,n,compileToken),(s=e.rootFunc)!==null&&s!==void 0?s:boolbase$1.trueFunc)}function reduceRules(t,e){return e===boolbase$1.falseFunc||t===boolbase$1.trueFunc?t:t===boolbase$1.falseFunc||e===boolbase$1.trueFunc?e:function(n){return t(n)||e(n)}}const defaultEquals=(t,e)=>t===e,defaultOptions={adapter:DomUtils,equals:defaultEquals};function convertOptionFormats(t){var e,n,s,r;const i=t??defaultOptions;return(e=i.adapter)!==null&&e!==void 0||(i.adapter=DomUtils),(n=i.equals)!==null&&n!==void 0||(i.equals=(r=(s=i.adapter)===null||s===void 0?void 0:s.equals)!==null&&r!==void 0?r:defaultEquals),i}function wrapCompile(t){return function(e,n,s){const r=convertOptionFormats(n);return t(e,r,s)}}const _compileToken=wrapCompile(compileToken);function prepareContext(t,e,n=!1){return n&&(t=appendNextSiblings(t,e)),Array.isArray(t)?e.removeSubsets(t):e.getChildren(t)}function appendNextSiblings(t,e){const n=Array.isArray(t)?t.slice(0):[t],s=n.length;for(let r=0;r<s;r++){const i=getNextSiblings(n[r],e);n.push(...i)}return n}const filterNames=new Set(["first","last","eq","gt","nth","lt","even","odd"]);function isFilter(t){return t.type!=="pseudo"?!1:filterNames.has(t.name)?!0:t.name==="not"&&Array.isArray(t.data)?t.data.some(e=>e.some(isFilter)):!1}function getLimit(t,e,n){const s=e!=null?parseInt(e,10):NaN;switch(t){case"first":return 1;case"nth":case"eq":return isFinite(s)?s>=0?s+1:1/0:0;case"lt":return isFinite(s)?s>=0?Math.min(s,n):1/0:0;case"gt":return isFinite(s)?1/0:0;case"odd":return 2*n;case"even":return 2*n-1;case"last":case"not":return 1/0}}function getDocumentRoot(t){for(;t.parent;)t=t.parent;return t}function groupSelectors(t){const e=[],n=[];for(const s of t)s.some(isFilter)?e.push(s):n.push(s);return[n,e]}const UNIVERSAL_SELECTOR={type:SelectorType.Universal,namespace:null},SCOPE_PSEUDO={type:SelectorType.Pseudo,name:"scope",data:null};function is$2(t,e,n={}){return some([t],e,n)}function some(t,e,n={}){if(typeof e=="function")return t.some(e);const[s,r]=groupSelectors(parse$4(e));return s.length>0&&t.some(_compileToken(s,n))||r.some(i=>filterBySelector(i,t,n).length>0)}function filterByPosition(t,e,n,s){const r=typeof n=="string"?parseInt(n,10):NaN;switch(t){case"first":case"lt":return e;case"last":return e.length>0?[e[e.length-1]]:e;case"nth":case"eq":return isFinite(r)&&Math.abs(r)<e.length?[r<0?e[e.length+r]:e[r]]:[];case"gt":return isFinite(r)?e.slice(r+1):[];case"even":return e.filter((i,a)=>a%2===0);case"odd":return e.filter((i,a)=>a%2===1);case"not":{const i=new Set(filterParsed(n,e,s));return e.filter(a=>!i.has(a))}}}function filter$1(t,e,n={}){return filterParsed(parse$4(t),e,n)}function filterParsed(t,e,n){if(e.length===0)return[];const[s,r]=groupSelectors(t);let i;if(s.length){const a=filterElements(e,s,n);if(r.length===0)return a;a.length&&(i=new Set(a))}for(let a=0;a<r.length&&(i==null?void 0:i.size)!==e.length;a++){const c=r[a];if((i?e.filter(m=>isTag(m)&&!i.has(m)):e).length===0)break;const o=filterBySelector(c,e,n);if(o.length)if(i)o.forEach(m=>i.add(m));else{if(a===r.length-1)return o;i=new Set(o)}}return typeof i<"u"?i.size===e.length?e:e.filter(a=>i.has(a)):[]}function filterBySelector(t,e,n){var s;if(t.some(isTraversal$1)){const r=(s=n.root)!==null&&s!==void 0?s:getDocumentRoot(e[0]),i={...n,context:e,relativeSelector:!1};return t.push(SCOPE_PSEUDO),findFilterElements(r,t,i,!0,e.length)}return findFilterElements(e,t,n,!1,e.length)}function select(t,e,n={},s=1/0){if(typeof t=="function")return find$1(e,t);const[r,i]=groupSelectors(parse$4(t)),a=i.map(c=>findFilterElements(e,c,n,!0,s));return r.length&&a.push(findElements(e,r,n,s)),a.length===0?[]:a.length===1?a[0]:uniqueSort(a.reduce((c,o)=>[...c,...o]))}function findFilterElements(t,e,n,s,r){const i=e.findIndex(isFilter),a=e.slice(0,i),c=e[i],o=e.length-1===i?r:1/0,m=getLimit(c.name,c.data,o);if(m===0)return[];const h=(a.length===0&&!Array.isArray(t)?getChildren(t).filter(isTag):a.length===0?(Array.isArray(t)?t:[t]).filter(isTag):s||a.some(isTraversal$1)?findElements(t,[a],n,m):filterElements(t,[a],n)).slice(0,m);let A=filterByPosition(c.name,h,c.data,n);if(A.length===0||e.length===i+1)return A;const y=e.slice(i+1),C=y.some(isTraversal$1);if(C){if(isTraversal$1(y[0])){const{type:D}=y[0];(D===SelectorType.Sibling||D===SelectorType.Adjacent)&&(A=prepareContext(A,DomUtils,!0)),y.unshift(UNIVERSAL_SELECTOR)}n={...n,relativeSelector:!1,rootFunc:D=>A.includes(D)}}else n.rootFunc&&n.rootFunc!==boolbase.trueFunc&&(n={...n,rootFunc:boolbase.trueFunc});return y.some(isFilter)?findFilterElements(A,y,n,!1,r):C?findElements(A,[y],n,r):filterElements(A,[y],n)}function findElements(t,e,n,s){const r=_compileToken(e,n,t);return find$1(t,r,s)}function find$1(t,e,n=1/0){const s=prepareContext(t,DomUtils,e.shouldTestNextSiblings);return find$2(r=>isTag(r)&&e(r),s,!0,n)}function filterElements(t,e,n){const s=(Array.isArray(t)?t:[t]).filter(isTag);if(s.length===0)return s;const r=_compileToken(e,n);return r===boolbase.trueFunc?s:s.filter(r)}const reSiblingSelector=/^\s*[~+]/;function find(t){var e;if(!t)return this._make([]);const n=this.toArray();if(typeof t!="string"){const i=isCheerio(t)?t.toArray():[t];return this._make(i.filter(a=>n.some(c=>contains(c,a))))}const s=reSiblingSelector.test(t)?n:this.children().toArray(),r={context:n,root:(e=this._root)===null||e===void 0?void 0:e[0],xmlMode:this.options.xmlMode,lowerCaseTags:this.options.lowerCaseTags,lowerCaseAttributeNames:this.options.lowerCaseAttributeNames,pseudos:this.options.pseudos,quirksMode:this.options.quirksMode};return this._make(select(t,s,r))}function _getMatcher(t){return function(e,...n){return function(s){var r;let i=t(e,this);return s&&(i=filterArray(i,s,this.options.xmlMode,(r=this._root)===null||r===void 0?void 0:r[0])),this._make(this.length>1&&i.length>1?n.reduce((a,c)=>c(a),i):i)}}}const _matcher=_getMatcher((t,e)=>{const n=[];for(let s=0;s<e.length;s++){const r=t(e[s]);n.push(r)}return new Array().concat(...n)}),_singleMatcher=_getMatcher((t,e)=>{const n=[];for(let s=0;s<e.length;s++){const r=t(e[s]);r!==null&&n.push(r)}return n});function _matchUntil(t,...e){let n=null;const s=_getMatcher((r,i)=>{const a=[];return domEach(i,c=>{for(let o;(o=r(c))&&!(n!=null&&n(o,a.length));c=o)a.push(o)}),a})(t,...e);return function(r,i){n=typeof r=="string"?c=>is$2(c,r,this.options):r?getFilterFn(r):null;const a=s.call(this,i);return n=null,a}}function _removeDuplicates(t){return Array.from(new Set(t))}const parent=_singleMatcher(({parent:t})=>t&&!isDocument(t)?t:null,_removeDuplicates),parents=_matcher(t=>{const e=[];for(;t.parent&&!isDocument(t.parent);)e.push(t.parent),t=t.parent;return e},uniqueSort,t=>t.reverse()),parentsUntil=_matchUntil(({parent:t})=>t&&!isDocument(t)?t:null,uniqueSort,t=>t.reverse());function closest(t){var e;const n=[];if(!t)return this._make(n);const s={xmlMode:this.options.xmlMode,root:(e=this._root)===null||e===void 0?void 0:e[0]},r=typeof t=="string"?i=>is$2(i,t,s):getFilterFn(t);return domEach(this,i=>{for(;i&&isTag(i);){if(r(i,0)){n.includes(i)||n.push(i);break}i=i.parent}}),this._make(n)}const next$1=_singleMatcher(t=>nextElementSibling(t)),nextAll=_matcher(t=>{const e=[];for(;t.next;)t=t.next,isTag(t)&&e.push(t);return e},_removeDuplicates),nextUntil=_matchUntil(t=>nextElementSibling(t),_removeDuplicates),prev=_singleMatcher(t=>prevElementSibling(t)),prevAll=_matcher(t=>{const e=[];for(;t.prev;)t=t.prev,isTag(t)&&e.push(t);return e},_removeDuplicates),prevUntil=_matchUntil(t=>prevElementSibling(t),_removeDuplicates),siblings=_matcher(t=>getSiblings(t).filter(e=>isTag(e)&&e!==t),uniqueSort),children=_matcher(t=>getChildren(t).filter(isTag),_removeDuplicates);function contents(){const t=this.toArray().reduce((e,n)=>hasChildren(n)?e.concat(n.children):e,[]);return this._make(t)}function each(t){let e=0;const n=this.length;for(;e<n&&t.call(this[e],e,this[e])!==!1;)++e;return this}function map(t){let e=[];for(let n=0;n<this.length;n++){const s=this[n],r=t.call(s,n,s);r!=null&&(e=e.concat(r))}return this._make(e)}function getFilterFn(t){return typeof t=="function"?(e,n)=>t.call(e,n,e):isCheerio(t)?e=>Array.prototype.includes.call(t,e):function(e){return t===e}}function filter(t){var e;return this._make(filterArray(this.toArray(),t,this.options.xmlMode,(e=this._root)===null||e===void 0?void 0:e[0]))}function filterArray(t,e,n,s){return typeof e=="string"?filter$1(e,t,{xmlMode:n,root:s}):t.filter(getFilterFn(e))}function is$1(t){const e=this.toArray();return typeof t=="string"?some(e.filter(isTag),t,this.options):t?e.some(getFilterFn(t)):!1}function not(t){let e=this.toArray();if(typeof t=="string"){const n=new Set(filter$1(t,e,this.options));e=e.filter(s=>!n.has(s))}else{const n=getFilterFn(t);e=e.filter((s,r)=>!n(s,r))}return this._make(e)}function has$1(t){return this.filter(typeof t=="string"?`:has(${t})`:(e,n)=>this._make(n).find(t).length>0)}function first(){return this.length>1?this._make(this[0]):this}function last(){return this.length>0?this._make(this[this.length-1]):this}function eq(t){var e;return t=+t,t===0&&this.length<=1?this:(t<0&&(t=this.length+t),this._make((e=this[t])!==null&&e!==void 0?e:[]))}function get(t){return t==null?this.toArray():this[t<0?this.length+t:t]}function toArray(){return Array.prototype.slice.call(this)}function index(t){let e,n;return t==null?(e=this.parent().children(),n=this[0]):typeof t=="string"?(e=this._make(t),n=this[0]):(e=this,n=isCheerio(t)?t[0]:t),Array.prototype.indexOf.call(e,n)}function slice(t,e){return this._make(Array.prototype.slice.call(this,t,e))}function end(){var t;return(t=this.prevObject)!==null&&t!==void 0?t:this._make([])}function add(t,e){const n=this._make(t,e),s=uniqueSort([...this.get(),...n.get()]);return this._make(s)}function addBack(t){return this.prevObject?this.add(t?this.prevObject.filter(t):this.prevObject):this}const Traversing=Object.freeze(Object.defineProperty({__proto__:null,add,addBack,children,closest,contents,each,end,eq,filter,filterArray,find,first,get,has:has$1,index,is:is$1,last,map,next:next$1,nextAll,nextUntil,not,parent,parents,parentsUntil,prev,prevAll,prevUntil,siblings,slice,toArray},Symbol.toStringTag,{value:"Module"}));function getParse(t){return function(e,n,s,r){if(typeof Buffer<"u"&&Buffer.isBuffer(e)&&(e=e.toString()),typeof e=="string")return t(e,n,s,r);const i=e;if(!Array.isArray(i)&&isDocument(i))return i;const a=new Document([]);return update(i,a),a}}function update(t,e){const n=Array.isArray(t)?t:[t];e?e.children=n:e=null;for(let s=0;s<n.length;s++){const r=n[s];r.parent&&r.parent.children!==n&&removeElement(r),e?(r.prev=n[s-1]||null,r.next=n[s+1]||null):r.prev=r.next=null,r.parent=e}return e}function _makeDomArray(t,e){return t==null?[]:isCheerio(t)?e?cloneDom(t.get()):t.get():Array.isArray(t)?t.reduce((n,s)=>n.concat(this._makeDomArray(s,e)),[]):typeof t=="string"?this._parse(t,this.options,!1,null).children:e?cloneDom([t]):[t]}function _insert(t){return function(...e){const n=this.length-1;return domEach(this,(s,r)=>{if(!hasChildren(s))return;const i=typeof e[0]=="function"?e[0].call(s,r,this._render(s.children)):e,a=this._makeDomArray(i,r<n);t(a,s.children,s)})}}function uniqueSplice(t,e,n,s,r){var i,a;const c=[e,n,...s],o=e===0?null:t[e-1],m=e+n>=t.length?null:t[e+n];for(let h=0;h<s.length;++h){const A=s[h],y=A.parent;if(y){const C=y.children.indexOf(A);C>-1&&(y.children.splice(C,1),r===y&&e>C&&c[0]--)}A.parent=r,A.prev&&(A.prev.next=(i=A.next)!==null&&i!==void 0?i:null),A.next&&(A.next.prev=(a=A.prev)!==null&&a!==void 0?a:null),A.prev=h===0?o:s[h-1],A.next=h===s.length-1?m:s[h+1]}return o&&(o.next=s[0]),m&&(m.prev=s[s.length-1]),t.splice(...c)}function appendTo(t){return(isCheerio(t)?t:this._make(t)).append(this),this}function prependTo(t){return(isCheerio(t)?t:this._make(t)).prepend(this),this}const append=_insert((t,e,n)=>{uniqueSplice(e,e.length,0,t,n)}),prepend=_insert((t,e,n)=>{uniqueSplice(e,0,0,t,n)});function _wrap(t){return function(e){const n=this.length-1,s=this.parents().last();for(let r=0;r<this.length;r++){const i=this[r],a=typeof e=="function"?e.call(i,r,i):typeof e=="string"&&!isHtml(e)?s.find(e).clone():e,[c]=this._makeDomArray(a,r<n);if(!c||!hasChildren(c))continue;let o=c,m=0;for(;m<o.children.length;){const h=o.children[m];isTag(h)?(o=h,m=0):m++}t(i,o,[c])}return this}}const wrap=_wrap((t,e,n)=>{const{parent:s}=t;if(!s)return;const r=s.children,i=r.indexOf(t);update([t],e),uniqueSplice(r,i,0,n,s)}),wrapInner=_wrap((t,e,n)=>{hasChildren(t)&&(update(t.children,e),update(n,t))});function unwrap(t){return this.parent(t).not("body").each((e,n)=>{this._make(n).replaceWith(n.children)}),this}function wrapAll(t){const e=this[0];if(e){const n=this._make(typeof t=="function"?t.call(e,0,e):t).insertBefore(e);let s;for(let i=0;i<n.length;i++)n[i].type==="tag"&&(s=n[i]);let r=0;for(;s&&r<s.children.length;){const i=s.children[r];i.type==="tag"?(s=i,r=0):r++}s&&this._make(s).append(this)}return this}function after(...t){const e=this.length-1;return domEach(this,(n,s)=>{const{parent:r}=n;if(!hasChildren(n)||!r)return;const i=r.children,a=i.indexOf(n);if(a<0)return;const c=typeof t[0]=="function"?t[0].call(n,s,this._render(n.children)):t,o=this._makeDomArray(c,s<e);uniqueSplice(i,a+1,0,o,r)})}function insertAfter(t){typeof t=="string"&&(t=this._make(t)),this.remove();const e=[];return this._makeDomArray(t).forEach(n=>{const s=this.clone().toArray(),{parent:r}=n;if(!r)return;const i=r.children,a=i.indexOf(n);a<0||(uniqueSplice(i,a+1,0,s,r),e.push(...s))}),this._make(e)}function before(...t){const e=this.length-1;return domEach(this,(n,s)=>{const{parent:r}=n;if(!hasChildren(n)||!r)return;const i=r.children,a=i.indexOf(n);if(a<0)return;const c=typeof t[0]=="function"?t[0].call(n,s,this._render(n.children)):t,o=this._makeDomArray(c,s<e);uniqueSplice(i,a,0,o,r)})}function insertBefore(t){const e=this._make(t);this.remove();const n=[];return domEach(e,s=>{const r=this.clone().toArray(),{parent:i}=s;if(!i)return;const a=i.children,c=a.indexOf(s);c<0||(uniqueSplice(a,c,0,r,i),n.push(...r))}),this._make(n)}function remove$1(t){const e=t?this.filter(t):this;return domEach(e,n=>{removeElement(n),n.prev=n.next=n.parent=null}),this}function replaceWith(t){return domEach(this,(e,n)=>{const{parent:s}=e;if(!s)return;const r=s.children,i=typeof t=="function"?t.call(e,n,e):t,a=this._makeDomArray(i);update(a,null);const c=r.indexOf(e);uniqueSplice(r,c,1,a,s),a.includes(e)||(e.parent=e.prev=e.next=null)})}function empty(){return domEach(this,t=>{hasChildren(t)&&(t.children.forEach(e=>{e.next=e.prev=e.parent=null}),t.children.length=0)})}function html(t){if(t===void 0){const e=this[0];return!e||!hasChildren(e)?null:this._render(e.children)}return domEach(this,e=>{if(!hasChildren(e))return;e.children.forEach(s=>{s.next=s.prev=s.parent=null});const n=isCheerio(t)?t.toArray():this._parse(`${t}`,this.options,!1,e).children;update(n,e)})}function toString(){return this._render(this)}function text(t){return t===void 0?text$1(this):typeof t=="function"?domEach(this,(e,n)=>this._make(e).text(t.call(e,n,text$1([e])))):domEach(this,e=>{if(!hasChildren(e))return;e.children.forEach(s=>{s.next=s.prev=s.parent=null});const n=new Text(`${t}`);update(n,e)})}function clone(){return this._make(cloneDom(this.get()))}const Manipulation=Object.freeze(Object.defineProperty({__proto__:null,_makeDomArray,after,append,appendTo,before,clone,empty,html,insertAfter,insertBefore,prepend,prependTo,remove:remove$1,replaceWith,text,toString,unwrap,wrap,wrapAll,wrapInner},Symbol.toStringTag,{value:"Module"}));function css(t,e){if(t!=null&&e!=null||typeof t=="object"&&!Array.isArray(t))return domEach(this,(n,s)=>{isTag(n)&&setCss(n,t,e,s)});if(this.length!==0)return getCss(this[0],t)}function setCss(t,e,n,s){if(typeof e=="string"){const r=getCss(t),i=typeof n=="function"?n.call(t,s,r[e]):n;i===""?delete r[e]:i!=null&&(r[e]=i),t.attribs.style=stringify(r)}else typeof e=="object"&&Object.keys(e).forEach((r,i)=>{setCss(t,r,e[r],i)})}function getCss(t,e){if(!t||!isTag(t))return;const n=parse$2(t.attribs.style);if(typeof e=="string")return n[e];if(Array.isArray(e)){const s={};return e.forEach(r=>{n[r]!=null&&(s[r]=n[r])}),s}return n}function stringify(t){return Object.keys(t).reduce((e,n)=>`${e}${e?" ":""}${n}: ${t[n]};`,"")}function parse$2(t){if(t=(t||"").trim(),!t)return{};const e={};let n;for(const s of t.split(";")){const r=s.indexOf(":");if(r<1||r===s.length-1){const i=s.trimEnd();i.length>0&&n!==void 0&&(e[n]+=`;${i}`)}else n=s.slice(0,r).trim(),e[n]=s.slice(r+1).trim()}return e}const Css=Object.freeze(Object.defineProperty({__proto__:null,css},Symbol.toStringTag,{value:"Module"})),submittableSelector="input,select,textarea,keygen",r20=/%20/g,rCRLF=/\r?\n/g;function serialize(){return this.serializeArray().map(t=>`${encodeURIComponent(t.name)}=${encodeURIComponent(t.value)}`).join("&").replace(r20,"+")}function serializeArray(){return this.map((t,e)=>{const n=this._make(e);return isTag(e)&&e.name==="form"?n.find(submittableSelector).toArray():n.filter(submittableSelector).toArray()}).filter('[name!=""]:enabled:not(:submit, :button, :image, :reset, :file):matches([checked], :not(:checkbox, :radio))').map((t,e)=>{var n;const s=this._make(e),r=s.attr("name"),i=(n=s.val())!==null&&n!==void 0?n:"";return Array.isArray(i)?i.map(a=>({name:r,value:a.replace(rCRLF,`\r
`)})):{name:r,value:i.replace(rCRLF,`\r
`)}}).toArray()}const Forms=Object.freeze(Object.defineProperty({__proto__:null,serialize,serializeArray},Symbol.toStringTag,{value:"Module"}));class Cheerio{constructor(e,n,s){if(this.length=0,this.options=s,this._root=n,e){for(let r=0;r<e.length;r++)this[r]=e[r];this.length=e.length}}}Cheerio.prototype.cheerio="[cheerio object]",Cheerio.prototype.splice=Array.prototype.splice,Cheerio.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator],Object.assign(Cheerio.prototype,Attributes,Traversing,Manipulation,Css,Forms);function getLoad(t,e){return function n(s,r,i=!0){if(s==null)throw new Error("cheerio.load() expects a string");const a={...defaultOpts$2,...flatten(r)},c=t(s,a,i,null);class o extends Cheerio{_make(A,y){const C=m(A,y);return C.prevObject=this,C}_parse(A,y,C,D){return t(A,y,C,D)}_render(A){return e(A,this.options)}}function m(h,A,y=c,C){if(h&&isCheerio(h))return h;const D={...a,...flatten(C)},b=typeof y=="string"?[t(y,D,!1,null)]:"length"in y?y:[y],S=isCheerio(b)?b:new o(b,null,D);if(S._root=S,!h)return new o(void 0,S,D);const O=typeof h=="string"&&isHtml(h)?t(h,D,!1,null).children:isNode(h)?[h]:Array.isArray(h)?h:void 0,v=new o(O,S,D);if(O)return v;if(typeof h!="string")throw new Error("Unexpected type of selector");let M=h;const R=A?typeof A=="string"?isHtml(A)?new o([t(A,D,!1,null)],S,D):(M=`${A} ${M}`,S):isCheerio(A)?A:new o(Array.isArray(A)?A:[A],S,D):S;return R?R.find(M):v}return Object.assign(m,staticMethods,{load:n,_root:c,_options:a,fn:o.prototype,prototype:o.prototype}),m}}function isNode(t){return!!t.name||t.type==="root"||t.type==="text"||t.type==="comment"}const UNDEFINED_CODE_POINTS=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),REPLACEMENT_CHARACTER="\uFFFD";var CODE_POINTS;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.NUMBER_SIGN=35]="NUMBER_SIGN",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",t[t.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_F=102]="LATIN_SMALL_F",t[t.LATIN_SMALL_X=120]="LATIN_SMALL_X",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",t[t.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(CODE_POINTS=CODE_POINTS||(CODE_POINTS={}));const SEQUENCES={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function isSurrogate(t){return t>=55296&&t<=57343}function isSurrogatePair(t){return t>=56320&&t<=57343}function getSurrogatePairCodePoint(t,e){return(t-55296)*1024+9216+e}function isControlCodePoint(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function isUndefinedCodePoint(t){return t>=64976&&t<=65007||UNDEFINED_CODE_POINTS.has(t)}var ERR;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(ERR=ERR||(ERR={}));const DEFAULT_BUFFER_WATERLINE=65536;class Preprocessor{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=DEFAULT_BUFFER_WATERLINE,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e){const{line:n,col:s,offset:r}=this;return{code:e,startLine:n,endLine:n,startCol:s,endCol:s,startOffset:r,endOffset:r}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(isSurrogatePair(n))return this.pos++,this._addGap(),getSurrogatePairCodePoint(e,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,CODE_POINTS.EOF;return this._err(ERR.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,n){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,n){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(e,this.pos);for(let s=0;s<e.length;s++)if((this.html.charCodeAt(this.pos+s)|32)!==e.charCodeAt(s))return!1;return!0}peek(e){const n=this.pos+e;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,CODE_POINTS.EOF;const s=this.html.charCodeAt(n);return s===CODE_POINTS.CARRIAGE_RETURN?CODE_POINTS.LINE_FEED:s}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,CODE_POINTS.EOF;let e=this.html.charCodeAt(this.pos);return e===CODE_POINTS.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,CODE_POINTS.LINE_FEED):e===CODE_POINTS.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,isSurrogate(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===CODE_POINTS.LINE_FEED||e===CODE_POINTS.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){isControlCodePoint(e)?this._err(ERR.controlCharacterInInputStream):isUndefinedCodePoint(e)&&this._err(ERR.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var TokenType;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(TokenType=TokenType||(TokenType={}));function getTokenAttr(t,e){for(let n=t.attrs.length-1;n>=0;n--)if(t.attrs[n].name===e)return t.attrs[n].value;return null}var NS;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(NS=NS||(NS={}));var ATTRS;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(ATTRS=ATTRS||(ATTRS={}));var DOCUMENT_MODE;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(DOCUMENT_MODE=DOCUMENT_MODE||(DOCUMENT_MODE={}));var TAG_NAMES;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(TAG_NAMES=TAG_NAMES||(TAG_NAMES={}));var TAG_ID;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SECTION=94]="SECTION",t[t.SELECT=95]="SELECT",t[t.SOURCE=96]="SOURCE",t[t.SMALL=97]="SMALL",t[t.SPAN=98]="SPAN",t[t.STRIKE=99]="STRIKE",t[t.STRONG=100]="STRONG",t[t.STYLE=101]="STYLE",t[t.SUB=102]="SUB",t[t.SUMMARY=103]="SUMMARY",t[t.SUP=104]="SUP",t[t.TABLE=105]="TABLE",t[t.TBODY=106]="TBODY",t[t.TEMPLATE=107]="TEMPLATE",t[t.TEXTAREA=108]="TEXTAREA",t[t.TFOOT=109]="TFOOT",t[t.TD=110]="TD",t[t.TH=111]="TH",t[t.THEAD=112]="THEAD",t[t.TITLE=113]="TITLE",t[t.TR=114]="TR",t[t.TRACK=115]="TRACK",t[t.TT=116]="TT",t[t.U=117]="U",t[t.UL=118]="UL",t[t.SVG=119]="SVG",t[t.VAR=120]="VAR",t[t.WBR=121]="WBR",t[t.XMP=122]="XMP"})(TAG_ID=TAG_ID||(TAG_ID={}));const TAG_NAME_TO_ID=new Map([[TAG_NAMES.A,TAG_ID.A],[TAG_NAMES.ADDRESS,TAG_ID.ADDRESS],[TAG_NAMES.ANNOTATION_XML,TAG_ID.ANNOTATION_XML],[TAG_NAMES.APPLET,TAG_ID.APPLET],[TAG_NAMES.AREA,TAG_ID.AREA],[TAG_NAMES.ARTICLE,TAG_ID.ARTICLE],[TAG_NAMES.ASIDE,TAG_ID.ASIDE],[TAG_NAMES.B,TAG_ID.B],[TAG_NAMES.BASE,TAG_ID.BASE],[TAG_NAMES.BASEFONT,TAG_ID.BASEFONT],[TAG_NAMES.BGSOUND,TAG_ID.BGSOUND],[TAG_NAMES.BIG,TAG_ID.BIG],[TAG_NAMES.BLOCKQUOTE,TAG_ID.BLOCKQUOTE],[TAG_NAMES.BODY,TAG_ID.BODY],[TAG_NAMES.BR,TAG_ID.BR],[TAG_NAMES.BUTTON,TAG_ID.BUTTON],[TAG_NAMES.CAPTION,TAG_ID.CAPTION],[TAG_NAMES.CENTER,TAG_ID.CENTER],[TAG_NAMES.CODE,TAG_ID.CODE],[TAG_NAMES.COL,TAG_ID.COL],[TAG_NAMES.COLGROUP,TAG_ID.COLGROUP],[TAG_NAMES.DD,TAG_ID.DD],[TAG_NAMES.DESC,TAG_ID.DESC],[TAG_NAMES.DETAILS,TAG_ID.DETAILS],[TAG_NAMES.DIALOG,TAG_ID.DIALOG],[TAG_NAMES.DIR,TAG_ID.DIR],[TAG_NAMES.DIV,TAG_ID.DIV],[TAG_NAMES.DL,TAG_ID.DL],[TAG_NAMES.DT,TAG_ID.DT],[TAG_NAMES.EM,TAG_ID.EM],[TAG_NAMES.EMBED,TAG_ID.EMBED],[TAG_NAMES.FIELDSET,TAG_ID.FIELDSET],[TAG_NAMES.FIGCAPTION,TAG_ID.FIGCAPTION],[TAG_NAMES.FIGURE,TAG_ID.FIGURE],[TAG_NAMES.FONT,TAG_ID.FONT],[TAG_NAMES.FOOTER,TAG_ID.FOOTER],[TAG_NAMES.FOREIGN_OBJECT,TAG_ID.FOREIGN_OBJECT],[TAG_NAMES.FORM,TAG_ID.FORM],[TAG_NAMES.FRAME,TAG_ID.FRAME],[TAG_NAMES.FRAMESET,TAG_ID.FRAMESET],[TAG_NAMES.H1,TAG_ID.H1],[TAG_NAMES.H2,TAG_ID.H2],[TAG_NAMES.H3,TAG_ID.H3],[TAG_NAMES.H4,TAG_ID.H4],[TAG_NAMES.H5,TAG_ID.H5],[TAG_NAMES.H6,TAG_ID.H6],[TAG_NAMES.HEAD,TAG_ID.HEAD],[TAG_NAMES.HEADER,TAG_ID.HEADER],[TAG_NAMES.HGROUP,TAG_ID.HGROUP],[TAG_NAMES.HR,TAG_ID.HR],[TAG_NAMES.HTML,TAG_ID.HTML],[TAG_NAMES.I,TAG_ID.I],[TAG_NAMES.IMG,TAG_ID.IMG],[TAG_NAMES.IMAGE,TAG_ID.IMAGE],[TAG_NAMES.INPUT,TAG_ID.INPUT],[TAG_NAMES.IFRAME,TAG_ID.IFRAME],[TAG_NAMES.KEYGEN,TAG_ID.KEYGEN],[TAG_NAMES.LABEL,TAG_ID.LABEL],[TAG_NAMES.LI,TAG_ID.LI],[TAG_NAMES.LINK,TAG_ID.LINK],[TAG_NAMES.LISTING,TAG_ID.LISTING],[TAG_NAMES.MAIN,TAG_ID.MAIN],[TAG_NAMES.MALIGNMARK,TAG_ID.MALIGNMARK],[TAG_NAMES.MARQUEE,TAG_ID.MARQUEE],[TAG_NAMES.MATH,TAG_ID.MATH],[TAG_NAMES.MENU,TAG_ID.MENU],[TAG_NAMES.META,TAG_ID.META],[TAG_NAMES.MGLYPH,TAG_ID.MGLYPH],[TAG_NAMES.MI,TAG_ID.MI],[TAG_NAMES.MO,TAG_ID.MO],[TAG_NAMES.MN,TAG_ID.MN],[TAG_NAMES.MS,TAG_ID.MS],[TAG_NAMES.MTEXT,TAG_ID.MTEXT],[TAG_NAMES.NAV,TAG_ID.NAV],[TAG_NAMES.NOBR,TAG_ID.NOBR],[TAG_NAMES.NOFRAMES,TAG_ID.NOFRAMES],[TAG_NAMES.NOEMBED,TAG_ID.NOEMBED],[TAG_NAMES.NOSCRIPT,TAG_ID.NOSCRIPT],[TAG_NAMES.OBJECT,TAG_ID.OBJECT],[TAG_NAMES.OL,TAG_ID.OL],[TAG_NAMES.OPTGROUP,TAG_ID.OPTGROUP],[TAG_NAMES.OPTION,TAG_ID.OPTION],[TAG_NAMES.P,TAG_ID.P],[TAG_NAMES.PARAM,TAG_ID.PARAM],[TAG_NAMES.PLAINTEXT,TAG_ID.PLAINTEXT],[TAG_NAMES.PRE,TAG_ID.PRE],[TAG_NAMES.RB,TAG_ID.RB],[TAG_NAMES.RP,TAG_ID.RP],[TAG_NAMES.RT,TAG_ID.RT],[TAG_NAMES.RTC,TAG_ID.RTC],[TAG_NAMES.RUBY,TAG_ID.RUBY],[TAG_NAMES.S,TAG_ID.S],[TAG_NAMES.SCRIPT,TAG_ID.SCRIPT],[TAG_NAMES.SECTION,TAG_ID.SECTION],[TAG_NAMES.SELECT,TAG_ID.SELECT],[TAG_NAMES.SOURCE,TAG_ID.SOURCE],[TAG_NAMES.SMALL,TAG_ID.SMALL],[TAG_NAMES.SPAN,TAG_ID.SPAN],[TAG_NAMES.STRIKE,TAG_ID.STRIKE],[TAG_NAMES.STRONG,TAG_ID.STRONG],[TAG_NAMES.STYLE,TAG_ID.STYLE],[TAG_NAMES.SUB,TAG_ID.SUB],[TAG_NAMES.SUMMARY,TAG_ID.SUMMARY],[TAG_NAMES.SUP,TAG_ID.SUP],[TAG_NAMES.TABLE,TAG_ID.TABLE],[TAG_NAMES.TBODY,TAG_ID.TBODY],[TAG_NAMES.TEMPLATE,TAG_ID.TEMPLATE],[TAG_NAMES.TEXTAREA,TAG_ID.TEXTAREA],[TAG_NAMES.TFOOT,TAG_ID.TFOOT],[TAG_NAMES.TD,TAG_ID.TD],[TAG_NAMES.TH,TAG_ID.TH],[TAG_NAMES.THEAD,TAG_ID.THEAD],[TAG_NAMES.TITLE,TAG_ID.TITLE],[TAG_NAMES.TR,TAG_ID.TR],[TAG_NAMES.TRACK,TAG_ID.TRACK],[TAG_NAMES.TT,TAG_ID.TT],[TAG_NAMES.U,TAG_ID.U],[TAG_NAMES.UL,TAG_ID.UL],[TAG_NAMES.SVG,TAG_ID.SVG],[TAG_NAMES.VAR,TAG_ID.VAR],[TAG_NAMES.WBR,TAG_ID.WBR],[TAG_NAMES.XMP,TAG_ID.XMP]]);function getTagID(t){var e;return(e=TAG_NAME_TO_ID.get(t))!==null&&e!==void 0?e:TAG_ID.UNKNOWN}const $=TAG_ID,SPECIAL_ELEMENTS={[NS.HTML]:new Set([$.ADDRESS,$.APPLET,$.AREA,$.ARTICLE,$.ASIDE,$.BASE,$.BASEFONT,$.BGSOUND,$.BLOCKQUOTE,$.BODY,$.BR,$.BUTTON,$.CAPTION,$.CENTER,$.COL,$.COLGROUP,$.DD,$.DETAILS,$.DIR,$.DIV,$.DL,$.DT,$.EMBED,$.FIELDSET,$.FIGCAPTION,$.FIGURE,$.FOOTER,$.FORM,$.FRAME,$.FRAMESET,$.H1,$.H2,$.H3,$.H4,$.H5,$.H6,$.HEAD,$.HEADER,$.HGROUP,$.HR,$.HTML,$.IFRAME,$.IMG,$.INPUT,$.LI,$.LINK,$.LISTING,$.MAIN,$.MARQUEE,$.MENU,$.META,$.NAV,$.NOEMBED,$.NOFRAMES,$.NOSCRIPT,$.OBJECT,$.OL,$.P,$.PARAM,$.PLAINTEXT,$.PRE,$.SCRIPT,$.SECTION,$.SELECT,$.SOURCE,$.STYLE,$.SUMMARY,$.TABLE,$.TBODY,$.TD,$.TEMPLATE,$.TEXTAREA,$.TFOOT,$.TH,$.THEAD,$.TITLE,$.TR,$.TRACK,$.UL,$.WBR,$.XMP]),[NS.MATHML]:new Set([$.MI,$.MO,$.MN,$.MS,$.MTEXT,$.ANNOTATION_XML]),[NS.SVG]:new Set([$.TITLE,$.FOREIGN_OBJECT,$.DESC]),[NS.XLINK]:new Set,[NS.XML]:new Set,[NS.XMLNS]:new Set};function isNumberedHeader(t){return t===$.H1||t===$.H2||t===$.H3||t===$.H4||t===$.H5||t===$.H6}const UNESCAPED_TEXT=new Set([TAG_NAMES.STYLE,TAG_NAMES.SCRIPT,TAG_NAMES.XMP,TAG_NAMES.IFRAME,TAG_NAMES.NOEMBED,TAG_NAMES.NOFRAMES,TAG_NAMES.PLAINTEXT]);function hasUnescapedText(t,e){return UNESCAPED_TEXT.has(t)||e&&t===TAG_NAMES.NOSCRIPT}const C1_CONTROLS_REFERENCE_REPLACEMENTS=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var State$1;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",t[t.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",t[t.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",t[t.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",t[t.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",t[t.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(State$1||(State$1={}));const TokenizerMode={DATA:State$1.DATA,RCDATA:State$1.RCDATA,RAWTEXT:State$1.RAWTEXT,SCRIPT_DATA:State$1.SCRIPT_DATA,PLAINTEXT:State$1.PLAINTEXT,CDATA_SECTION:State$1.CDATA_SECTION};function isAsciiDigit(t){return t>=CODE_POINTS.DIGIT_0&&t<=CODE_POINTS.DIGIT_9}function isAsciiUpper(t){return t>=CODE_POINTS.LATIN_CAPITAL_A&&t<=CODE_POINTS.LATIN_CAPITAL_Z}function isAsciiLower(t){return t>=CODE_POINTS.LATIN_SMALL_A&&t<=CODE_POINTS.LATIN_SMALL_Z}function isAsciiLetter(t){return isAsciiLower(t)||isAsciiUpper(t)}function isAsciiAlphaNumeric(t){return isAsciiLetter(t)||isAsciiDigit(t)}function isAsciiUpperHexDigit(t){return t>=CODE_POINTS.LATIN_CAPITAL_A&&t<=CODE_POINTS.LATIN_CAPITAL_F}function isAsciiLowerHexDigit(t){return t>=CODE_POINTS.LATIN_SMALL_A&&t<=CODE_POINTS.LATIN_SMALL_F}function isAsciiHexDigit(t){return isAsciiDigit(t)||isAsciiUpperHexDigit(t)||isAsciiLowerHexDigit(t)}function toAsciiLower(t){return t+32}function isWhitespace$1(t){return t===CODE_POINTS.SPACE||t===CODE_POINTS.LINE_FEED||t===CODE_POINTS.TABULATION||t===CODE_POINTS.FORM_FEED}function isEntityInAttributeInvalidEnd(t){return t===CODE_POINTS.EQUALS_SIGN||isAsciiAlphaNumeric(t)}function isScriptDataDoubleEscapeSequenceEnd(t){return isWhitespace$1(t)||t===CODE_POINTS.SOLIDUS||t===CODE_POINTS.GREATER_THAN_SIGN}let Tokenizer$1=class{constructor(t,e){this.options=t,this.handler=e,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=State$1.DATA,this.returnState=State$1.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Preprocessor(e),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var e,n;(n=(e=this.handler).onParseError)===null||n===void 0||n.call(e,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||(t==null||t()))}write(t,e,n){this.active=!0,this.preprocessor.write(t,e),this._runParsingLoop(),this.paused||(n==null||n())}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,e){this.state=t,this._callState(e)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let e=0;e<t;e++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,e){return this.preprocessor.startsWith(t,e)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:TokenType.START_TAG,tagName:"",tagID:TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:TokenType.END_TAG,tagName:"",tagID:TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:TokenType.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:TokenType.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,e){this.currentCharacterToken={type:t,chars:e,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,e;const n=this.currentToken;if(getTokenAttr(n,this.currentAttr.name)===null){if(n.attrs.push(this.currentAttr),n.location&&this.currentLocation){const s=(t=(e=n.location).attrs)!==null&&t!==void 0?t:e.attrs=Object.create(null);s[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(ERR.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=getTagID(t.tagName),t.type===TokenType.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(ERR.endTagWithAttributes),t.selfClosing&&this._err(ERR.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case TokenType.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case TokenType.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case TokenType.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:TokenType.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,e){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=e;return}this._createCharacterToken(t,e)}_emitCodePoint(t){const e=isWhitespace$1(t)?TokenType.WHITESPACE_CHARACTER:t===CODE_POINTS.NULL?TokenType.NULL_CHARACTER:TokenType.CHARACTER;this._appendCharToCurrentCharacterToken(e,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(TokenType.CHARACTER,t)}_matchNamedCharacterReference(t){let e=null,n=0,s=!1;for(let r=0,i=htmlDecodeTree[0];r>=0&&(r=determineBranch(htmlDecodeTree,i,r+1,t),!(r<0));t=this._consume()){n+=1,i=htmlDecodeTree[r];const a=i&BinTrieFlags.VALUE_LENGTH;if(a){const c=(a>>14)-1;if(t!==CODE_POINTS.SEMICOLON&&this._isCharacterReferenceInAttribute()&&isEntityInAttributeInvalidEnd(this.preprocessor.peek(1))?(e=[CODE_POINTS.AMPERSAND],r+=c):(e=c===0?[htmlDecodeTree[r]&~BinTrieFlags.VALUE_LENGTH]:c===1?[htmlDecodeTree[++r]]:[htmlDecodeTree[++r],htmlDecodeTree[++r]],n=0,s=t!==CODE_POINTS.SEMICOLON),c===0){this._consume();break}}}return this._unconsume(n),s&&!this.preprocessor.endOfChunkHit&&this._err(ERR.missingSemicolonAfterCharacterReference),this._unconsume(1),e}_isCharacterReferenceInAttribute(){return this.returnState===State$1.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===State$1.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===State$1.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case State$1.DATA:{this._stateData(t);break}case State$1.RCDATA:{this._stateRcdata(t);break}case State$1.RAWTEXT:{this._stateRawtext(t);break}case State$1.SCRIPT_DATA:{this._stateScriptData(t);break}case State$1.PLAINTEXT:{this._statePlaintext(t);break}case State$1.TAG_OPEN:{this._stateTagOpen(t);break}case State$1.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case State$1.TAG_NAME:{this._stateTagName(t);break}case State$1.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case State$1.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case State$1.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case State$1.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case State$1.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case State$1.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case State$1.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case State$1.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case State$1.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case State$1.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case State$1.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case State$1.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case State$1.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case State$1.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case State$1.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case State$1.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case State$1.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case State$1.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case State$1.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case State$1.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case State$1.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case State$1.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case State$1.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case State$1.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case State$1.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case State$1.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case State$1.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case State$1.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case State$1.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case State$1.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case State$1.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case State$1.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case State$1.BOGUS_COMMENT:{this._stateBogusComment(t);break}case State$1.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case State$1.COMMENT_START:{this._stateCommentStart(t);break}case State$1.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case State$1.COMMENT:{this._stateComment(t);break}case State$1.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case State$1.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case State$1.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case State$1.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case State$1.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case State$1.COMMENT_END:{this._stateCommentEnd(t);break}case State$1.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case State$1.DOCTYPE:{this._stateDoctype(t);break}case State$1.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case State$1.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case State$1.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case State$1.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case State$1.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case State$1.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case State$1.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case State$1.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case State$1.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case State$1.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case State$1.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case State$1.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case State$1.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case State$1.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case State$1.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case State$1.CDATA_SECTION:{this._stateCdataSection(t);break}case State$1.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case State$1.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case State$1.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case State$1.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case State$1.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case State$1.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case State$1.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case State$1.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case State$1.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case State$1.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.TAG_OPEN;break}case CODE_POINTS.AMPERSAND:{this.returnState=State$1.DATA,this.state=State$1.CHARACTER_REFERENCE;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitCodePoint(t);break}case CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case CODE_POINTS.AMPERSAND:{this.returnState=State$1.RCDATA,this.state=State$1.CHARACTER_REFERENCE;break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.RCDATA_LESS_THAN_SIGN;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.RAWTEXT_LESS_THAN_SIGN;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.SCRIPT_DATA_LESS_THAN_SIGN;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(isAsciiLetter(t))this._createStartTagToken(),this.state=State$1.TAG_NAME,this._stateTagName(t);else switch(t){case CODE_POINTS.EXCLAMATION_MARK:{this.state=State$1.MARKUP_DECLARATION_OPEN;break}case CODE_POINTS.SOLIDUS:{this.state=State$1.END_TAG_OPEN;break}case CODE_POINTS.QUESTION_MARK:{this._err(ERR.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=State$1.BOGUS_COMMENT,this._stateBogusComment(t);break}case CODE_POINTS.EOF:{this._err(ERR.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(ERR.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=State$1.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(isAsciiLetter(t))this._createEndTagToken(),this.state=State$1.TAG_NAME,this._stateTagName(t);else switch(t){case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingEndTagName),this.state=State$1.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(ERR.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=State$1.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const e=this.currentToken;switch(t){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this.state=State$1.BEFORE_ATTRIBUTE_NAME;break}case CODE_POINTS.SOLIDUS:{this.state=State$1.SELF_CLOSING_START_TAG;break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.DATA,this.emitCurrentTagToken();break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),e.tagName+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:e.tagName+=String.fromCodePoint(isAsciiUpper(t)?toAsciiLower(t):t)}}_stateRcdataLessThanSign(t){t===CODE_POINTS.SOLIDUS?this.state=State$1.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=State$1.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){isAsciiLetter(t)?(this.state=State$1.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=State$1.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const e=this.currentToken;switch(e.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=State$1.BEFORE_ATTRIBUTE_NAME,!1;case CODE_POINTS.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=State$1.SELF_CLOSING_START_TAG,!1;case CODE_POINTS.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=State$1.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=State$1.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===CODE_POINTS.SOLIDUS?this.state=State$1.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=State$1.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){isAsciiLetter(t)?(this.state=State$1.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=State$1.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=State$1.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case CODE_POINTS.SOLIDUS:{this.state=State$1.SCRIPT_DATA_END_TAG_OPEN;break}case CODE_POINTS.EXCLAMATION_MARK:{this.state=State$1.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=State$1.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){isAsciiLetter(t)?(this.state=State$1.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=State$1.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=State$1.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===CODE_POINTS.HYPHEN_MINUS?(this.state=State$1.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=State$1.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===CODE_POINTS.HYPHEN_MINUS?(this.state=State$1.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=State$1.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case CODE_POINTS.HYPHEN_MINUS:{this.state=State$1.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case CODE_POINTS.HYPHEN_MINUS:{this.state=State$1.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.state=State$1.SCRIPT_DATA_ESCAPED,this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=State$1.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case CODE_POINTS.HYPHEN_MINUS:{this._emitChars("-");break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.SCRIPT_DATA,this._emitChars(">");break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.state=State$1.SCRIPT_DATA_ESCAPED,this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=State$1.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===CODE_POINTS.SOLIDUS?this.state=State$1.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:isAsciiLetter(t)?(this._emitChars("<"),this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=State$1.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){isAsciiLetter(t)?(this.state=State$1.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=State$1.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=State$1.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(SEQUENCES.SCRIPT,!1)&&isScriptDataDoubleEscapeSequenceEnd(this.preprocessor.peek(SEQUENCES.SCRIPT.length))){this._emitCodePoint(t);for(let e=0;e<SEQUENCES.SCRIPT.length;e++)this._emitCodePoint(this._consume());this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=State$1.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case CODE_POINTS.HYPHEN_MINUS:{this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case CODE_POINTS.HYPHEN_MINUS:{this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case CODE_POINTS.HYPHEN_MINUS:{this._emitChars("-");break}case CODE_POINTS.LESS_THAN_SIGN:{this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.SCRIPT_DATA,this._emitChars(">");break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(REPLACEMENT_CHARACTER);break}case CODE_POINTS.EOF:{this._err(ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===CODE_POINTS.SOLIDUS?(this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(SEQUENCES.SCRIPT,!1)&&isScriptDataDoubleEscapeSequenceEnd(this.preprocessor.peek(SEQUENCES.SCRIPT.length))){this._emitCodePoint(t);for(let e=0;e<SEQUENCES.SCRIPT.length;e++)this._emitCodePoint(this._consume());this.state=State$1.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=State$1.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.SOLIDUS:case CODE_POINTS.GREATER_THAN_SIGN:case CODE_POINTS.EOF:{this.state=State$1.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case CODE_POINTS.EQUALS_SIGN:{this._err(ERR.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=State$1.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=State$1.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:case CODE_POINTS.SOLIDUS:case CODE_POINTS.GREATER_THAN_SIGN:case CODE_POINTS.EOF:{this._leaveAttrName(),this.state=State$1.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case CODE_POINTS.EQUALS_SIGN:{this._leaveAttrName(),this.state=State$1.BEFORE_ATTRIBUTE_VALUE;break}case CODE_POINTS.QUOTATION_MARK:case CODE_POINTS.APOSTROPHE:case CODE_POINTS.LESS_THAN_SIGN:{this._err(ERR.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.currentAttr.name+=REPLACEMENT_CHARACTER;break}default:this.currentAttr.name+=String.fromCodePoint(isAsciiUpper(t)?toAsciiLower(t):t)}}_stateAfterAttributeName(t){switch(t){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.SOLIDUS:{this.state=State$1.SELF_CLOSING_START_TAG;break}case CODE_POINTS.EQUALS_SIGN:{this.state=State$1.BEFORE_ATTRIBUTE_VALUE;break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.DATA,this.emitCurrentTagToken();break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=State$1.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.QUOTATION_MARK:{this.state=State$1.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{this.state=State$1.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingAttributeValue),this.state=State$1.DATA,this.emitCurrentTagToken();break}default:this.state=State$1.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case CODE_POINTS.QUOTATION_MARK:{this.state=State$1.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case CODE_POINTS.AMPERSAND:{this.returnState=State$1.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=State$1.CHARACTER_REFERENCE;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.currentAttr.value+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case CODE_POINTS.APOSTROPHE:{this.state=State$1.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case CODE_POINTS.AMPERSAND:{this.returnState=State$1.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=State$1.CHARACTER_REFERENCE;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.currentAttr.value+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this._leaveAttrValue(),this.state=State$1.BEFORE_ATTRIBUTE_NAME;break}case CODE_POINTS.AMPERSAND:{this.returnState=State$1.ATTRIBUTE_VALUE_UNQUOTED,this.state=State$1.CHARACTER_REFERENCE;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=State$1.DATA,this.emitCurrentTagToken();break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this.currentAttr.value+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.QUOTATION_MARK:case CODE_POINTS.APOSTROPHE:case CODE_POINTS.LESS_THAN_SIGN:case CODE_POINTS.EQUALS_SIGN:case CODE_POINTS.GRAVE_ACCENT:{this._err(ERR.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this._leaveAttrValue(),this.state=State$1.BEFORE_ATTRIBUTE_NAME;break}case CODE_POINTS.SOLIDUS:{this._leaveAttrValue(),this.state=State$1.SELF_CLOSING_START_TAG;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=State$1.DATA,this.emitCurrentTagToken();break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:this._err(ERR.missingWhitespaceBetweenAttributes),this.state=State$1.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case CODE_POINTS.GREATER_THAN_SIGN:{const e=this.currentToken;e.selfClosing=!0,this.state=State$1.DATA,this.emitCurrentTagToken();break}case CODE_POINTS.EOF:{this._err(ERR.eofInTag),this._emitEOFToken();break}default:this._err(ERR.unexpectedSolidusInTag),this.state=State$1.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const e=this.currentToken;switch(t){case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.DATA,this.emitCurrentComment(e);break}case CODE_POINTS.EOF:{this.emitCurrentComment(e),this._emitEOFToken();break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),e.data+=REPLACEMENT_CHARACTER;break}default:e.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(SEQUENCES.DASH_DASH,!0)?(this._createCommentToken(SEQUENCES.DASH_DASH.length+1),this.state=State$1.COMMENT_START):this._consumeSequenceIfMatch(SEQUENCES.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(SEQUENCES.DOCTYPE.length+1),this.state=State$1.DOCTYPE):this._consumeSequenceIfMatch(SEQUENCES.CDATA_START,!0)?this.inForeignNode?this.state=State$1.CDATA_SECTION:(this._err(ERR.cdataInHtmlContent),this._createCommentToken(SEQUENCES.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=State$1.BOGUS_COMMENT):this._ensureHibernation()||(this._err(ERR.incorrectlyOpenedComment),this._createCommentToken(2),this.state=State$1.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case CODE_POINTS.HYPHEN_MINUS:{this.state=State$1.COMMENT_START_DASH;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptClosingOfEmptyComment),this.state=State$1.DATA;const e=this.currentToken;this.emitCurrentComment(e);break}default:this.state=State$1.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const e=this.currentToken;switch(t){case CODE_POINTS.HYPHEN_MINUS:{this.state=State$1.COMMENT_END;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptClosingOfEmptyComment),this.state=State$1.DATA,this.emitCurrentComment(e);break}case CODE_POINTS.EOF:{this._err(ERR.eofInComment),this.emitCurrentComment(e),this._emitEOFToken();break}default:e.data+="-",this.state=State$1.COMMENT,this._stateComment(t)}}_stateComment(t){const e=this.currentToken;switch(t){case CODE_POINTS.HYPHEN_MINUS:{this.state=State$1.COMMENT_END_DASH;break}case CODE_POINTS.LESS_THAN_SIGN:{e.data+="<",this.state=State$1.COMMENT_LESS_THAN_SIGN;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),e.data+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.EOF:{this._err(ERR.eofInComment),this.emitCurrentComment(e),this._emitEOFToken();break}default:e.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const e=this.currentToken;switch(t){case CODE_POINTS.EXCLAMATION_MARK:{e.data+="!",this.state=State$1.COMMENT_LESS_THAN_SIGN_BANG;break}case CODE_POINTS.LESS_THAN_SIGN:{e.data+="<";break}default:this.state=State$1.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===CODE_POINTS.HYPHEN_MINUS?this.state=State$1.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=State$1.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===CODE_POINTS.HYPHEN_MINUS?this.state=State$1.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=State$1.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==CODE_POINTS.GREATER_THAN_SIGN&&t!==CODE_POINTS.EOF&&this._err(ERR.nestedComment),this.state=State$1.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const e=this.currentToken;switch(t){case CODE_POINTS.HYPHEN_MINUS:{this.state=State$1.COMMENT_END;break}case CODE_POINTS.EOF:{this._err(ERR.eofInComment),this.emitCurrentComment(e),this._emitEOFToken();break}default:e.data+="-",this.state=State$1.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const e=this.currentToken;switch(t){case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.DATA,this.emitCurrentComment(e);break}case CODE_POINTS.EXCLAMATION_MARK:{this.state=State$1.COMMENT_END_BANG;break}case CODE_POINTS.HYPHEN_MINUS:{e.data+="-";break}case CODE_POINTS.EOF:{this._err(ERR.eofInComment),this.emitCurrentComment(e),this._emitEOFToken();break}default:e.data+="--",this.state=State$1.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const e=this.currentToken;switch(t){case CODE_POINTS.HYPHEN_MINUS:{e.data+="--!",this.state=State$1.COMMENT_END_DASH;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.incorrectlyClosedComment),this.state=State$1.DATA,this.emitCurrentComment(e);break}case CODE_POINTS.EOF:{this._err(ERR.eofInComment),this.emitCurrentComment(e),this._emitEOFToken();break}default:e.data+="--!",this.state=State$1.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this.state=State$1.BEFORE_DOCTYPE_NAME;break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._err(ERR.missingWhitespaceBeforeDoctypeName),this.state=State$1.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(isAsciiUpper(t))this._createDoctypeToken(String.fromCharCode(toAsciiLower(t))),this.state=State$1.DOCTYPE_NAME;else switch(t){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),this._createDoctypeToken(REPLACEMENT_CHARACTER),this.state=State$1.DOCTYPE_NAME;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingDoctypeName),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this.state=State$1.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=State$1.DOCTYPE_NAME}}_stateDoctypeName(t){const e=this.currentToken;switch(t){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this.state=State$1.AFTER_DOCTYPE_NAME;break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.DATA,this.emitCurrentDoctype(e);break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),e.name+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:e.name+=String.fromCodePoint(isAsciiUpper(t)?toAsciiLower(t):t)}}_stateAfterDoctypeName(t){const e=this.currentToken;switch(t){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.DATA,this.emitCurrentDoctype(e);break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(SEQUENCES.PUBLIC,!1)?this.state=State$1.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(SEQUENCES.SYSTEM,!1)?this.state=State$1.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(ERR.invalidCharacterSequenceAfterDoctypeName),e.forceQuirks=!0,this.state=State$1.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const e=this.currentToken;switch(t){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this.state=State$1.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case CODE_POINTS.QUOTATION_MARK:{this._err(ERR.missingWhitespaceAfterDoctypePublicKeyword),e.publicId="",this.state=State$1.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{this._err(ERR.missingWhitespaceAfterDoctypePublicKeyword),e.publicId="",this.state=State$1.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingDoctypePublicIdentifier),e.forceQuirks=!0,this.state=State$1.DATA,this.emitCurrentDoctype(e);break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._err(ERR.missingQuoteBeforeDoctypePublicIdentifier),e.forceQuirks=!0,this.state=State$1.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const e=this.currentToken;switch(t){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.QUOTATION_MARK:{e.publicId="",this.state=State$1.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{e.publicId="",this.state=State$1.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingDoctypePublicIdentifier),e.forceQuirks=!0,this.state=State$1.DATA,this.emitCurrentDoctype(e);break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._err(ERR.missingQuoteBeforeDoctypePublicIdentifier),e.forceQuirks=!0,this.state=State$1.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const e=this.currentToken;switch(t){case CODE_POINTS.QUOTATION_MARK:{this.state=State$1.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),e.publicId+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptDoctypePublicIdentifier),e.forceQuirks=!0,this.emitCurrentDoctype(e),this.state=State$1.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:e.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const e=this.currentToken;switch(t){case CODE_POINTS.APOSTROPHE:{this.state=State$1.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),e.publicId+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptDoctypePublicIdentifier),e.forceQuirks=!0,this.emitCurrentDoctype(e),this.state=State$1.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:e.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const e=this.currentToken;switch(t){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this.state=State$1.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.DATA,this.emitCurrentDoctype(e);break}case CODE_POINTS.QUOTATION_MARK:{this._err(ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),e.systemId="",this.state=State$1.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{this._err(ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),e.systemId="",this.state=State$1.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier),e.forceQuirks=!0,this.state=State$1.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const e=this.currentToken;switch(t){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(e),this.state=State$1.DATA;break}case CODE_POINTS.QUOTATION_MARK:{e.systemId="",this.state=State$1.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{e.systemId="",this.state=State$1.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier),e.forceQuirks=!0,this.state=State$1.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const e=this.currentToken;switch(t){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:{this.state=State$1.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case CODE_POINTS.QUOTATION_MARK:{this._err(ERR.missingWhitespaceAfterDoctypeSystemKeyword),e.systemId="",this.state=State$1.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{this._err(ERR.missingWhitespaceAfterDoctypeSystemKeyword),e.systemId="",this.state=State$1.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingDoctypeSystemIdentifier),e.forceQuirks=!0,this.state=State$1.DATA,this.emitCurrentDoctype(e);break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier),e.forceQuirks=!0,this.state=State$1.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const e=this.currentToken;switch(t){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.QUOTATION_MARK:{e.systemId="",this.state=State$1.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case CODE_POINTS.APOSTROPHE:{e.systemId="",this.state=State$1.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.missingDoctypeSystemIdentifier),e.forceQuirks=!0,this.state=State$1.DATA,this.emitCurrentDoctype(e);break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._err(ERR.missingQuoteBeforeDoctypeSystemIdentifier),e.forceQuirks=!0,this.state=State$1.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const e=this.currentToken;switch(t){case CODE_POINTS.QUOTATION_MARK:{this.state=State$1.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),e.systemId+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptDoctypeSystemIdentifier),e.forceQuirks=!0,this.emitCurrentDoctype(e),this.state=State$1.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:e.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const e=this.currentToken;switch(t){case CODE_POINTS.APOSTROPHE:{this.state=State$1.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter),e.systemId+=REPLACEMENT_CHARACTER;break}case CODE_POINTS.GREATER_THAN_SIGN:{this._err(ERR.abruptDoctypeSystemIdentifier),e.forceQuirks=!0,this.emitCurrentDoctype(e),this.state=State$1.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:e.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const e=this.currentToken;switch(t){case CODE_POINTS.SPACE:case CODE_POINTS.LINE_FEED:case CODE_POINTS.TABULATION:case CODE_POINTS.FORM_FEED:break;case CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(e),this.state=State$1.DATA;break}case CODE_POINTS.EOF:{this._err(ERR.eofInDoctype),e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._err(ERR.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=State$1.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const e=this.currentToken;switch(t){case CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(e),this.state=State$1.DATA;break}case CODE_POINTS.NULL:{this._err(ERR.unexpectedNullCharacter);break}case CODE_POINTS.EOF:{this.emitCurrentDoctype(e),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case CODE_POINTS.RIGHT_SQUARE_BRACKET:{this.state=State$1.CDATA_SECTION_BRACKET;break}case CODE_POINTS.EOF:{this._err(ERR.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===CODE_POINTS.RIGHT_SQUARE_BRACKET?this.state=State$1.CDATA_SECTION_END:(this._emitChars("]"),this.state=State$1.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case CODE_POINTS.GREATER_THAN_SIGN:{this.state=State$1.DATA;break}case CODE_POINTS.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=State$1.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===CODE_POINTS.NUMBER_SIGN?this.state=State$1.NUMERIC_CHARACTER_REFERENCE:isAsciiAlphaNumeric(t)?(this.state=State$1.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(CODE_POINTS.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const e=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(e){for(let n=0;n<e.length;n++)this._flushCodePointConsumedAsCharacterReference(e[n]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(CODE_POINTS.AMPERSAND),this.state=State$1.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){isAsciiAlphaNumeric(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===CODE_POINTS.SEMICOLON&&this._err(ERR.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===CODE_POINTS.LATIN_SMALL_X||t===CODE_POINTS.LATIN_CAPITAL_X?this.state=State$1.HEXADEMICAL_CHARACTER_REFERENCE_START:isAsciiDigit(t)?(this.state=State$1.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(ERR.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(CODE_POINTS.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(CODE_POINTS.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){isAsciiHexDigit(t)?(this.state=State$1.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(ERR.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(CODE_POINTS.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(CODE_POINTS.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){isAsciiUpperHexDigit(t)?this.charRefCode=this.charRefCode*16+t-55:isAsciiLowerHexDigit(t)?this.charRefCode=this.charRefCode*16+t-87:isAsciiDigit(t)?this.charRefCode=this.charRefCode*16+t-48:t===CODE_POINTS.SEMICOLON?this.state=State$1.NUMERIC_CHARACTER_REFERENCE_END:(this._err(ERR.missingSemicolonAfterCharacterReference),this.state=State$1.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){isAsciiDigit(t)?this.charRefCode=this.charRefCode*10+t-48:t===CODE_POINTS.SEMICOLON?this.state=State$1.NUMERIC_CHARACTER_REFERENCE_END:(this._err(ERR.missingSemicolonAfterCharacterReference),this.state=State$1.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===CODE_POINTS.NULL)this._err(ERR.nullCharacterReference),this.charRefCode=CODE_POINTS.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(ERR.characterReferenceOutsideUnicodeRange),this.charRefCode=CODE_POINTS.REPLACEMENT_CHARACTER;else if(isSurrogate(this.charRefCode))this._err(ERR.surrogateCharacterReference),this.charRefCode=CODE_POINTS.REPLACEMENT_CHARACTER;else if(isUndefinedCodePoint(this.charRefCode))this._err(ERR.noncharacterCharacterReference);else if(isControlCodePoint(this.charRefCode)||this.charRefCode===CODE_POINTS.CARRIAGE_RETURN){this._err(ERR.controlCharacterReference);const e=C1_CONTROLS_REFERENCE_REPLACEMENTS.get(this.charRefCode);e!==void 0&&(this.charRefCode=e)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}};const IMPLICIT_END_TAG_REQUIRED=new Set([TAG_ID.DD,TAG_ID.DT,TAG_ID.LI,TAG_ID.OPTGROUP,TAG_ID.OPTION,TAG_ID.P,TAG_ID.RB,TAG_ID.RP,TAG_ID.RT,TAG_ID.RTC]),IMPLICIT_END_TAG_REQUIRED_THOROUGHLY=new Set([...IMPLICIT_END_TAG_REQUIRED,TAG_ID.CAPTION,TAG_ID.COLGROUP,TAG_ID.TBODY,TAG_ID.TD,TAG_ID.TFOOT,TAG_ID.TH,TAG_ID.THEAD,TAG_ID.TR]),SCOPING_ELEMENT_NS=new Map([[TAG_ID.APPLET,NS.HTML],[TAG_ID.CAPTION,NS.HTML],[TAG_ID.HTML,NS.HTML],[TAG_ID.MARQUEE,NS.HTML],[TAG_ID.OBJECT,NS.HTML],[TAG_ID.TABLE,NS.HTML],[TAG_ID.TD,NS.HTML],[TAG_ID.TEMPLATE,NS.HTML],[TAG_ID.TH,NS.HTML],[TAG_ID.ANNOTATION_XML,NS.MATHML],[TAG_ID.MI,NS.MATHML],[TAG_ID.MN,NS.MATHML],[TAG_ID.MO,NS.MATHML],[TAG_ID.MS,NS.MATHML],[TAG_ID.MTEXT,NS.MATHML],[TAG_ID.DESC,NS.SVG],[TAG_ID.FOREIGN_OBJECT,NS.SVG],[TAG_ID.TITLE,NS.SVG]]),NAMED_HEADERS=[TAG_ID.H1,TAG_ID.H2,TAG_ID.H3,TAG_ID.H4,TAG_ID.H5,TAG_ID.H6],TABLE_ROW_CONTEXT=[TAG_ID.TR,TAG_ID.TEMPLATE,TAG_ID.HTML],TABLE_BODY_CONTEXT=[TAG_ID.TBODY,TAG_ID.TFOOT,TAG_ID.THEAD,TAG_ID.TEMPLATE,TAG_ID.HTML],TABLE_CONTEXT=[TAG_ID.TABLE,TAG_ID.TEMPLATE,TAG_ID.HTML],TABLE_CELLS=[TAG_ID.TD,TAG_ID.TH];class OpenElementStack{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,n,s){this.treeAdapter=n,this.handler=s,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=TAG_ID.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===TAG_ID.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===NS.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,n){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,n,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,n){const s=this._indexOf(e);this.items[s]=n,s===this.stackTop&&(this.current=n)}insertAfter(e,n,s){const r=this._indexOf(e)+1;this.items.splice(r,0,n),this.tagIDs.splice(r,0,s),this.stackTop++,r===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,r===this.stackTop)}popUntilTagNamePopped(e){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(e,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==NS.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(e){for(;this.stackTop>=e;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<e)}}popUntilElementPopped(e){const n=this._indexOf(e);this.shortenToLength(n<0?0:n)}popUntilPopped(e,n){const s=this._indexOfTagNames(e,n);this.shortenToLength(s<0?0:s)}popUntilNumberedHeaderPopped(){this.popUntilPopped(NAMED_HEADERS,NS.HTML)}popUntilTableCellPopped(){this.popUntilPopped(TABLE_CELLS,NS.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,n){for(let s=this.stackTop;s>=0;s--)if(e.includes(this.tagIDs[s])&&this.treeAdapter.getNamespaceURI(this.items[s])===n)return s;return-1}clearBackTo(e,n){const s=this._indexOfTagNames(e,n);this.shortenToLength(s+1)}clearBackToTableContext(){this.clearBackTo(TABLE_CONTEXT,NS.HTML)}clearBackToTableBodyContext(){this.clearBackTo(TABLE_BODY_CONTEXT,NS.HTML)}clearBackToTableRowContext(){this.clearBackTo(TABLE_ROW_CONTEXT,NS.HTML)}remove(e){const n=this._indexOf(e);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===TAG_ID.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const n=this._indexOf(e)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===TAG_ID.HTML}hasInScope(e){for(let n=this.stackTop;n>=0;n--){const s=this.tagIDs[n],r=this.treeAdapter.getNamespaceURI(this.items[n]);if(s===e&&r===NS.HTML)return!0;if(SCOPING_ELEMENT_NS.get(s)===r)return!1}return!0}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const n=this.tagIDs[e],s=this.treeAdapter.getNamespaceURI(this.items[e]);if(isNumberedHeader(n)&&s===NS.HTML)return!0;if(SCOPING_ELEMENT_NS.get(n)===s)return!1}return!0}hasInListItemScope(e){for(let n=this.stackTop;n>=0;n--){const s=this.tagIDs[n],r=this.treeAdapter.getNamespaceURI(this.items[n]);if(s===e&&r===NS.HTML)return!0;if((s===TAG_ID.UL||s===TAG_ID.OL)&&r===NS.HTML||SCOPING_ELEMENT_NS.get(s)===r)return!1}return!0}hasInButtonScope(e){for(let n=this.stackTop;n>=0;n--){const s=this.tagIDs[n],r=this.treeAdapter.getNamespaceURI(this.items[n]);if(s===e&&r===NS.HTML)return!0;if(s===TAG_ID.BUTTON&&r===NS.HTML||SCOPING_ELEMENT_NS.get(s)===r)return!1}return!0}hasInTableScope(e){for(let n=this.stackTop;n>=0;n--){const s=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===NS.HTML){if(s===e)return!0;if(s===TAG_ID.TABLE||s===TAG_ID.TEMPLATE||s===TAG_ID.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--){const n=this.tagIDs[e];if(this.treeAdapter.getNamespaceURI(this.items[e])===NS.HTML){if(n===TAG_ID.TBODY||n===TAG_ID.THEAD||n===TAG_ID.TFOOT)return!0;if(n===TAG_ID.TABLE||n===TAG_ID.HTML)return!1}}return!0}hasInSelectScope(e){for(let n=this.stackTop;n>=0;n--){const s=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===NS.HTML){if(s===e)return!0;if(s!==TAG_ID.OPTION&&s!==TAG_ID.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;IMPLICIT_END_TAG_REQUIRED.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;IMPLICIT_END_TAG_REQUIRED_THOROUGHLY.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==e&&IMPLICIT_END_TAG_REQUIRED_THOROUGHLY.has(this.currentTagId);)this.pop()}}const NOAH_ARK_CAPACITY=3;var EntryType;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(EntryType=EntryType||(EntryType={}));const MARKER={type:EntryType.Marker};class FormattingElementList{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,n){const s=[],r=n.length,i=this.treeAdapter.getTagName(e),a=this.treeAdapter.getNamespaceURI(e);for(let c=0;c<this.entries.length;c++){const o=this.entries[c];if(o.type===EntryType.Marker)break;const{element:m}=o;if(this.treeAdapter.getTagName(m)===i&&this.treeAdapter.getNamespaceURI(m)===a){const h=this.treeAdapter.getAttrList(m);h.length===r&&s.push({idx:c,attrs:h})}}return s}_ensureNoahArkCondition(e){if(this.entries.length<NOAH_ARK_CAPACITY)return;const n=this.treeAdapter.getAttrList(e),s=this._getNoahArkConditionCandidates(e,n);if(s.length<NOAH_ARK_CAPACITY)return;const r=new Map(n.map(a=>[a.name,a.value]));let i=0;for(let a=0;a<s.length;a++){const c=s[a];c.attrs.every(o=>r.get(o.name)===o.value)&&(i+=1,i>=NOAH_ARK_CAPACITY&&this.entries.splice(c.idx,1))}}insertMarker(){this.entries.unshift(MARKER)}pushElement(e,n){this._ensureNoahArkCondition(e),this.entries.unshift({type:EntryType.Element,element:e,token:n})}insertElementAfterBookmark(e,n){const s=this.entries.indexOf(this.bookmark);this.entries.splice(s,0,{type:EntryType.Element,element:e,token:n})}removeEntry(e){const n=this.entries.indexOf(e);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const e=this.entries.indexOf(MARKER);e>=0?this.entries.splice(0,e+1):this.entries.length=0}getElementEntryInScopeWithTagName(e){const n=this.entries.find(s=>s.type===EntryType.Marker||this.treeAdapter.getTagName(s.element)===e);return n&&n.type===EntryType.Element?n:null}getElementEntry(e){return this.entries.find(n=>n.type===EntryType.Element&&n.element===e)}}function createTextNode$1(t){return{nodeName:"#text",value:t,parentNode:null}}const defaultTreeAdapter={createDocument(){return{nodeName:"#document",mode:DOCUMENT_MODE.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,n){return{nodeName:t,tagName:t,attrs:n,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,n){const s=t.childNodes.indexOf(n);t.childNodes.splice(s,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,n,s){const r=t.childNodes.find(i=>i.nodeName==="#documentType");if(r)r.name=e,r.publicId=n,r.systemId=s;else{const i={nodeName:"#documentType",name:e,publicId:n,systemId:s,parentNode:null};defaultTreeAdapter.appendChild(t,i)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const n=t.childNodes[t.childNodes.length-1];if(defaultTreeAdapter.isTextNode(n)){n.value+=e;return}}defaultTreeAdapter.appendChild(t,createTextNode$1(e))},insertTextBefore(t,e,n){const s=t.childNodes[t.childNodes.indexOf(n)-1];s&&defaultTreeAdapter.isTextNode(s)?s.value+=e:defaultTreeAdapter.insertBefore(t,createTextNode$1(e),n)},adoptAttributes(t,e){const n=new Set(t.attrs.map(s=>s.name));for(let s=0;s<e.length;s++)n.has(e[s].name)||t.attrs.push(e[s])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},VALID_DOCTYPE_NAME="html",VALID_SYSTEM_ID="about:legacy-compat",QUIRKS_MODE_SYSTEM_ID="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",QUIRKS_MODE_PUBLIC_ID_PREFIXES=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],QUIRKS_MODE_NO_SYSTEM_ID_PUBLIC_ID_PREFIXES=[...QUIRKS_MODE_PUBLIC_ID_PREFIXES,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],QUIRKS_MODE_PUBLIC_IDS=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),LIMITED_QUIRKS_PUBLIC_ID_PREFIXES=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],LIMITED_QUIRKS_WITH_SYSTEM_ID_PUBLIC_ID_PREFIXES=[...LIMITED_QUIRKS_PUBLIC_ID_PREFIXES,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function hasPrefix(t,e){return e.some(n=>t.startsWith(n))}function isConforming(t){return t.name===VALID_DOCTYPE_NAME&&t.publicId===null&&(t.systemId===null||t.systemId===VALID_SYSTEM_ID)}function getDocumentMode(t){if(t.name!==VALID_DOCTYPE_NAME)return DOCUMENT_MODE.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===QUIRKS_MODE_SYSTEM_ID)return DOCUMENT_MODE.QUIRKS;let{publicId:n}=t;if(n!==null){if(n=n.toLowerCase(),QUIRKS_MODE_PUBLIC_IDS.has(n))return DOCUMENT_MODE.QUIRKS;let s=e===null?QUIRKS_MODE_NO_SYSTEM_ID_PUBLIC_ID_PREFIXES:QUIRKS_MODE_PUBLIC_ID_PREFIXES;if(hasPrefix(n,s))return DOCUMENT_MODE.QUIRKS;if(s=e===null?LIMITED_QUIRKS_PUBLIC_ID_PREFIXES:LIMITED_QUIRKS_WITH_SYSTEM_ID_PUBLIC_ID_PREFIXES,hasPrefix(n,s))return DOCUMENT_MODE.LIMITED_QUIRKS}return DOCUMENT_MODE.NO_QUIRKS}const MIME_TYPES={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},DEFINITION_URL_ATTR="definitionurl",ADJUSTED_DEFINITION_URL_ATTR="definitionURL",SVG_ATTRS_ADJUSTMENT_MAP=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),XML_ATTRS_ADJUSTMENT_MAP=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:NS.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:NS.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:NS.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:NS.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:NS.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:NS.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:NS.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:NS.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:NS.XML}],["xml:space",{prefix:"xml",name:"space",namespace:NS.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:NS.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:NS.XMLNS}]]),SVG_TAG_NAMES_ADJUSTMENT_MAP=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),EXITS_FOREIGN_CONTENT=new Set([TAG_ID.B,TAG_ID.BIG,TAG_ID.BLOCKQUOTE,TAG_ID.BODY,TAG_ID.BR,TAG_ID.CENTER,TAG_ID.CODE,TAG_ID.DD,TAG_ID.DIV,TAG_ID.DL,TAG_ID.DT,TAG_ID.EM,TAG_ID.EMBED,TAG_ID.H1,TAG_ID.H2,TAG_ID.H3,TAG_ID.H4,TAG_ID.H5,TAG_ID.H6,TAG_ID.HEAD,TAG_ID.HR,TAG_ID.I,TAG_ID.IMG,TAG_ID.LI,TAG_ID.LISTING,TAG_ID.MENU,TAG_ID.META,TAG_ID.NOBR,TAG_ID.OL,TAG_ID.P,TAG_ID.PRE,TAG_ID.RUBY,TAG_ID.S,TAG_ID.SMALL,TAG_ID.SPAN,TAG_ID.STRONG,TAG_ID.STRIKE,TAG_ID.SUB,TAG_ID.SUP,TAG_ID.TABLE,TAG_ID.TT,TAG_ID.U,TAG_ID.UL,TAG_ID.VAR]);function causesExit(t){const e=t.tagID;return e===TAG_ID.FONT&&t.attrs.some(({name:n})=>n===ATTRS.COLOR||n===ATTRS.SIZE||n===ATTRS.FACE)||EXITS_FOREIGN_CONTENT.has(e)}function adjustTokenMathMLAttrs(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===DEFINITION_URL_ATTR){t.attrs[e].name=ADJUSTED_DEFINITION_URL_ATTR;break}}function adjustTokenSVGAttrs(t){for(let e=0;e<t.attrs.length;e++){const n=SVG_ATTRS_ADJUSTMENT_MAP.get(t.attrs[e].name);n!=null&&(t.attrs[e].name=n)}}function adjustTokenXMLAttrs(t){for(let e=0;e<t.attrs.length;e++){const n=XML_ATTRS_ADJUSTMENT_MAP.get(t.attrs[e].name);n&&(t.attrs[e].prefix=n.prefix,t.attrs[e].name=n.name,t.attrs[e].namespace=n.namespace)}}function adjustTokenSVGTagName(t){const e=SVG_TAG_NAMES_ADJUSTMENT_MAP.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=getTagID(t.tagName))}function isMathMLTextIntegrationPoint(t,e){return e===NS.MATHML&&(t===TAG_ID.MI||t===TAG_ID.MO||t===TAG_ID.MN||t===TAG_ID.MS||t===TAG_ID.MTEXT)}function isHtmlIntegrationPoint(t,e,n){if(e===NS.MATHML&&t===TAG_ID.ANNOTATION_XML){for(let s=0;s<n.length;s++)if(n[s].name===ATTRS.ENCODING){const r=n[s].value.toLowerCase();return r===MIME_TYPES.TEXT_HTML||r===MIME_TYPES.APPLICATION_XML}}return e===NS.SVG&&(t===TAG_ID.FOREIGN_OBJECT||t===TAG_ID.DESC||t===TAG_ID.TITLE)}function isIntegrationPoint(t,e,n,s){return(!s||s===NS.HTML)&&isHtmlIntegrationPoint(t,e,n)||(!s||s===NS.MATHML)&&isMathMLTextIntegrationPoint(t,e)}const HIDDEN_INPUT_TYPE="hidden",AA_OUTER_LOOP_ITER=8,AA_INNER_LOOP_ITER=3;var InsertionMode;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(InsertionMode||(InsertionMode={}));const BASE_LOC={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},TABLE_STRUCTURE_TAGS=new Set([TAG_ID.TABLE,TAG_ID.TBODY,TAG_ID.TFOOT,TAG_ID.THEAD,TAG_ID.TR]),defaultParserOptions={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:defaultTreeAdapter,onParseError:null};let Parser$1=class{constructor(t,e,n=null,s=null){this.fragmentContext=n,this.scriptHandler=s,this.currentToken=null,this.stopped=!1,this.insertionMode=InsertionMode.INITIAL,this.originalInsertionMode=InsertionMode.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...defaultParserOptions,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=e??this.treeAdapter.createDocument(),this.tokenizer=new Tokenizer$1(this.options,this),this.activeFormattingElements=new FormattingElementList(this.treeAdapter),this.fragmentContextID=n?getTagID(this.treeAdapter.getTagName(n)):TAG_ID.UNKNOWN,this._setContextModes(n??this.document,this.fragmentContextID),this.openElements=new OpenElementStack(this.document,this.treeAdapter,this)}static parse(t,e){const n=new this(e);return n.tokenizer.write(t,!0),n.document}static getFragmentParser(t,e){const n={...defaultParserOptions,...e};t??(t=n.treeAdapter.createElement(TAG_NAMES.TEMPLATE,NS.HTML,[]));const s=n.treeAdapter.createElement("documentmock",NS.HTML,[]),r=new this(n,s,t);return r.fragmentContextID===TAG_ID.TEMPLATE&&r.tmplInsertionModeStack.unshift(InsertionMode.IN_TEMPLATE),r._initTokenizerForFragmentParsing(),r._insertFakeRootElement(),r._resetInsertionMode(),r._findFormInFragmentContext(),r}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),e=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,e),e}_err(t,e,n){var s;if(!this.onParseError)return;const r=(s=t.location)!==null&&s!==void 0?s:BASE_LOC,i={code:e,startLine:r.startLine,startCol:r.startCol,startOffset:r.startOffset,endLine:n?r.startLine:r.endLine,endCol:n?r.startCol:r.endCol,endOffset:n?r.startOffset:r.endOffset};this.onParseError(i)}onItemPush(t,e,n){var s,r;(r=(s=this.treeAdapter).onItemPush)===null||r===void 0||r.call(s,t),n&&this.openElements.stackTop>0&&this._setContextModes(t,e)}onItemPop(t,e){var n,s;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(s=(n=this.treeAdapter).onItemPop)===null||s===void 0||s.call(n,t,this.openElements.current),e){let r,i;this.openElements.stackTop===0&&this.fragmentContext?(r=this.fragmentContext,i=this.fragmentContextID):{current:r,currentTagId:i}=this.openElements,this._setContextModes(r,i)}}_setContextModes(t,e){const n=t===this.document||this.treeAdapter.getNamespaceURI(t)===NS.HTML;this.currentNotInHTML=!n,this.tokenizer.inForeignNode=!n&&!this._isIntegrationPoint(e,t)}_switchToTextParsing(t,e){this._insertElement(t,NS.HTML),this.tokenizer.state=e,this.originalInsertionMode=this.insertionMode,this.insertionMode=InsertionMode.TEXT}switchToPlaintextParsing(){this.insertionMode=InsertionMode.TEXT,this.originalInsertionMode=InsertionMode.IN_BODY,this.tokenizer.state=TokenizerMode.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===TAG_NAMES.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==NS.HTML))switch(this.fragmentContextID){case TAG_ID.TITLE:case TAG_ID.TEXTAREA:{this.tokenizer.state=TokenizerMode.RCDATA;break}case TAG_ID.STYLE:case TAG_ID.XMP:case TAG_ID.IFRAME:case TAG_ID.NOEMBED:case TAG_ID.NOFRAMES:case TAG_ID.NOSCRIPT:{this.tokenizer.state=TokenizerMode.RAWTEXT;break}case TAG_ID.SCRIPT:{this.tokenizer.state=TokenizerMode.SCRIPT_DATA;break}case TAG_ID.PLAINTEXT:{this.tokenizer.state=TokenizerMode.PLAINTEXT;break}}}_setDocumentType(t){const e=t.name||"",n=t.publicId||"",s=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,e,n,s),t.location){const r=this.treeAdapter.getChildNodes(this.document).find(i=>this.treeAdapter.isDocumentTypeNode(i));r&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}}_attachElementToTree(t,e){if(this.options.sourceCodeLocationInfo){const n=e&&{...e,startTag:e};this.treeAdapter.setNodeSourceCodeLocation(t,n)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const n=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(n,t)}}_appendElement(t,e){const n=this.treeAdapter.createElement(t.tagName,e,t.attrs);this._attachElementToTree(n,t.location)}_insertElement(t,e){const n=this.treeAdapter.createElement(t.tagName,e,t.attrs);this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID)}_insertFakeElement(t,e){const n=this.treeAdapter.createElement(t,NS.HTML,[]);this._attachElementToTree(n,null),this.openElements.push(n,e)}_insertTemplate(t){const e=this.treeAdapter.createElement(t.tagName,NS.HTML,t.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(e,n),this._attachElementToTree(e,t.location),this.openElements.push(e,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(TAG_NAMES.HTML,NS.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,TAG_ID.HTML)}_appendCommentNode(t,e){const n=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(e,n),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,t.location)}_insertCharacters(t){let e,n;if(this._shouldFosterParentOnInsertion()?({parent:e,beforeElement:n}=this._findFosterParentingLocation(),n?this.treeAdapter.insertTextBefore(e,t.chars,n):this.treeAdapter.insertText(e,t.chars)):(e=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(e,t.chars)),!t.location)return;const s=this.treeAdapter.getChildNodes(e),r=n?s.lastIndexOf(n):s.length,i=s[r-1];if(this.treeAdapter.getNodeSourceCodeLocation(i)){const{endLine:a,endCol:c,endOffset:o}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(i,{endLine:a,endCol:c,endOffset:o})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(i,t.location)}_adoptNodes(t,e){for(let n=this.treeAdapter.getFirstChild(t);n;n=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(e,n)}_setEndLocation(t,e){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&e.location){const n=e.location,s=this.treeAdapter.getTagName(t),r=e.type===TokenType.END_TAG&&s===e.tagName?{endTag:{...n},endLine:n.endLine,endCol:n.endCol,endOffset:n.endOffset}:{endLine:n.startLine,endCol:n.startCol,endOffset:n.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,r)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let e,n;return this.openElements.stackTop===0&&this.fragmentContext?(e=this.fragmentContext,n=this.fragmentContextID):{current:e,currentTagId:n}=this.openElements,t.tagID===TAG_ID.SVG&&this.treeAdapter.getTagName(e)===TAG_NAMES.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(e)===NS.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===TAG_ID.MGLYPH||t.tagID===TAG_ID.MALIGNMARK)&&!this._isIntegrationPoint(n,e,NS.HTML)}_processToken(t){switch(t.type){case TokenType.CHARACTER:{this.onCharacter(t);break}case TokenType.NULL_CHARACTER:{this.onNullCharacter(t);break}case TokenType.COMMENT:{this.onComment(t);break}case TokenType.DOCTYPE:{this.onDoctype(t);break}case TokenType.START_TAG:{this._processStartTag(t);break}case TokenType.END_TAG:{this.onEndTag(t);break}case TokenType.EOF:{this.onEof(t);break}case TokenType.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,e,n){const s=this.treeAdapter.getNamespaceURI(e),r=this.treeAdapter.getAttrList(e);return isIntegrationPoint(t,s,r,n)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const e=this.activeFormattingElements.entries.findIndex(s=>s.type===EntryType.Marker||this.openElements.contains(s.element)),n=e<0?t-1:e-1;for(let s=n;s>=0;s--){const r=this.activeFormattingElements.entries[s];this._insertElement(r.token,this.treeAdapter.getNamespaceURI(r.element)),r.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=InsertionMode.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(TAG_ID.P),this.openElements.popUntilTagNamePopped(TAG_ID.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case TAG_ID.TR:{this.insertionMode=InsertionMode.IN_ROW;return}case TAG_ID.TBODY:case TAG_ID.THEAD:case TAG_ID.TFOOT:{this.insertionMode=InsertionMode.IN_TABLE_BODY;return}case TAG_ID.CAPTION:{this.insertionMode=InsertionMode.IN_CAPTION;return}case TAG_ID.COLGROUP:{this.insertionMode=InsertionMode.IN_COLUMN_GROUP;return}case TAG_ID.TABLE:{this.insertionMode=InsertionMode.IN_TABLE;return}case TAG_ID.BODY:{this.insertionMode=InsertionMode.IN_BODY;return}case TAG_ID.FRAMESET:{this.insertionMode=InsertionMode.IN_FRAMESET;return}case TAG_ID.SELECT:{this._resetInsertionModeForSelect(t);return}case TAG_ID.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case TAG_ID.HTML:{this.insertionMode=this.headElement?InsertionMode.AFTER_HEAD:InsertionMode.BEFORE_HEAD;return}case TAG_ID.TD:case TAG_ID.TH:{if(t>0){this.insertionMode=InsertionMode.IN_CELL;return}break}case TAG_ID.HEAD:{if(t>0){this.insertionMode=InsertionMode.IN_HEAD;return}break}}this.insertionMode=InsertionMode.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let e=t-1;e>0;e--){const n=this.openElements.tagIDs[e];if(n===TAG_ID.TEMPLATE)break;if(n===TAG_ID.TABLE){this.insertionMode=InsertionMode.IN_SELECT_IN_TABLE;return}}this.insertionMode=InsertionMode.IN_SELECT}_isElementCausesFosterParenting(t){return TABLE_STRUCTURE_TAGS.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const e=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case TAG_ID.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(e)===NS.HTML)return{parent:this.treeAdapter.getTemplateContent(e),beforeElement:null};break}case TAG_ID.TABLE:{const n=this.treeAdapter.getParentNode(e);return n?{parent:n,beforeElement:e}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const e=this._findFosterParentingLocation();e.beforeElement?this.treeAdapter.insertBefore(e.parent,t,e.beforeElement):this.treeAdapter.appendChild(e.parent,t)}_isSpecialElement(t,e){const n=this.treeAdapter.getNamespaceURI(t);return SPECIAL_ELEMENTS[n].has(e)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){characterInForeignContent(this,t);return}switch(this.insertionMode){case InsertionMode.INITIAL:{tokenInInitialMode(this,t);break}case InsertionMode.BEFORE_HTML:{tokenBeforeHtml(this,t);break}case InsertionMode.BEFORE_HEAD:{tokenBeforeHead(this,t);break}case InsertionMode.IN_HEAD:{tokenInHead(this,t);break}case InsertionMode.IN_HEAD_NO_SCRIPT:{tokenInHeadNoScript(this,t);break}case InsertionMode.AFTER_HEAD:{tokenAfterHead(this,t);break}case InsertionMode.IN_BODY:case InsertionMode.IN_CAPTION:case InsertionMode.IN_CELL:case InsertionMode.IN_TEMPLATE:{characterInBody(this,t);break}case InsertionMode.TEXT:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case InsertionMode.IN_TABLE:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:{characterInTable(this,t);break}case InsertionMode.IN_TABLE_TEXT:{characterInTableText(this,t);break}case InsertionMode.IN_COLUMN_GROUP:{tokenInColumnGroup(this,t);break}case InsertionMode.AFTER_BODY:{tokenAfterBody(this,t);break}case InsertionMode.AFTER_AFTER_BODY:{tokenAfterAfterBody(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){nullCharacterInForeignContent(this,t);return}switch(this.insertionMode){case InsertionMode.INITIAL:{tokenInInitialMode(this,t);break}case InsertionMode.BEFORE_HTML:{tokenBeforeHtml(this,t);break}case InsertionMode.BEFORE_HEAD:{tokenBeforeHead(this,t);break}case InsertionMode.IN_HEAD:{tokenInHead(this,t);break}case InsertionMode.IN_HEAD_NO_SCRIPT:{tokenInHeadNoScript(this,t);break}case InsertionMode.AFTER_HEAD:{tokenAfterHead(this,t);break}case InsertionMode.TEXT:{this._insertCharacters(t);break}case InsertionMode.IN_TABLE:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:{characterInTable(this,t);break}case InsertionMode.IN_COLUMN_GROUP:{tokenInColumnGroup(this,t);break}case InsertionMode.AFTER_BODY:{tokenAfterBody(this,t);break}case InsertionMode.AFTER_AFTER_BODY:{tokenAfterAfterBody(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){appendComment(this,t);return}switch(this.insertionMode){case InsertionMode.INITIAL:case InsertionMode.BEFORE_HTML:case InsertionMode.BEFORE_HEAD:case InsertionMode.IN_HEAD:case InsertionMode.IN_HEAD_NO_SCRIPT:case InsertionMode.AFTER_HEAD:case InsertionMode.IN_BODY:case InsertionMode.IN_TABLE:case InsertionMode.IN_CAPTION:case InsertionMode.IN_COLUMN_GROUP:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:case InsertionMode.IN_CELL:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:case InsertionMode.IN_TEMPLATE:case InsertionMode.IN_FRAMESET:case InsertionMode.AFTER_FRAMESET:{appendComment(this,t);break}case InsertionMode.IN_TABLE_TEXT:{tokenInTableText(this,t);break}case InsertionMode.AFTER_BODY:{appendCommentToRootHtmlElement(this,t);break}case InsertionMode.AFTER_AFTER_BODY:case InsertionMode.AFTER_AFTER_FRAMESET:{appendCommentToDocument(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case InsertionMode.INITIAL:{doctypeInInitialMode(this,t);break}case InsertionMode.BEFORE_HEAD:case InsertionMode.IN_HEAD:case InsertionMode.IN_HEAD_NO_SCRIPT:case InsertionMode.AFTER_HEAD:{this._err(t,ERR.misplacedDoctype);break}case InsertionMode.IN_TABLE_TEXT:{tokenInTableText(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,ERR.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?startTagInForeignContent(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case InsertionMode.INITIAL:{tokenInInitialMode(this,t);break}case InsertionMode.BEFORE_HTML:{startTagBeforeHtml(this,t);break}case InsertionMode.BEFORE_HEAD:{startTagBeforeHead(this,t);break}case InsertionMode.IN_HEAD:{startTagInHead(this,t);break}case InsertionMode.IN_HEAD_NO_SCRIPT:{startTagInHeadNoScript(this,t);break}case InsertionMode.AFTER_HEAD:{startTagAfterHead(this,t);break}case InsertionMode.IN_BODY:{startTagInBody(this,t);break}case InsertionMode.IN_TABLE:{startTagInTable(this,t);break}case InsertionMode.IN_TABLE_TEXT:{tokenInTableText(this,t);break}case InsertionMode.IN_CAPTION:{startTagInCaption(this,t);break}case InsertionMode.IN_COLUMN_GROUP:{startTagInColumnGroup(this,t);break}case InsertionMode.IN_TABLE_BODY:{startTagInTableBody(this,t);break}case InsertionMode.IN_ROW:{startTagInRow(this,t);break}case InsertionMode.IN_CELL:{startTagInCell(this,t);break}case InsertionMode.IN_SELECT:{startTagInSelect(this,t);break}case InsertionMode.IN_SELECT_IN_TABLE:{startTagInSelectInTable(this,t);break}case InsertionMode.IN_TEMPLATE:{startTagInTemplate(this,t);break}case InsertionMode.AFTER_BODY:{startTagAfterBody(this,t);break}case InsertionMode.IN_FRAMESET:{startTagInFrameset(this,t);break}case InsertionMode.AFTER_FRAMESET:{startTagAfterFrameset(this,t);break}case InsertionMode.AFTER_AFTER_BODY:{startTagAfterAfterBody(this,t);break}case InsertionMode.AFTER_AFTER_FRAMESET:{startTagAfterAfterFrameset(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?endTagInForeignContent(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case InsertionMode.INITIAL:{tokenInInitialMode(this,t);break}case InsertionMode.BEFORE_HTML:{endTagBeforeHtml(this,t);break}case InsertionMode.BEFORE_HEAD:{endTagBeforeHead(this,t);break}case InsertionMode.IN_HEAD:{endTagInHead(this,t);break}case InsertionMode.IN_HEAD_NO_SCRIPT:{endTagInHeadNoScript(this,t);break}case InsertionMode.AFTER_HEAD:{endTagAfterHead(this,t);break}case InsertionMode.IN_BODY:{endTagInBody(this,t);break}case InsertionMode.TEXT:{endTagInText(this,t);break}case InsertionMode.IN_TABLE:{endTagInTable(this,t);break}case InsertionMode.IN_TABLE_TEXT:{tokenInTableText(this,t);break}case InsertionMode.IN_CAPTION:{endTagInCaption(this,t);break}case InsertionMode.IN_COLUMN_GROUP:{endTagInColumnGroup(this,t);break}case InsertionMode.IN_TABLE_BODY:{endTagInTableBody(this,t);break}case InsertionMode.IN_ROW:{endTagInRow(this,t);break}case InsertionMode.IN_CELL:{endTagInCell(this,t);break}case InsertionMode.IN_SELECT:{endTagInSelect(this,t);break}case InsertionMode.IN_SELECT_IN_TABLE:{endTagInSelectInTable(this,t);break}case InsertionMode.IN_TEMPLATE:{endTagInTemplate(this,t);break}case InsertionMode.AFTER_BODY:{endTagAfterBody(this,t);break}case InsertionMode.IN_FRAMESET:{endTagInFrameset(this,t);break}case InsertionMode.AFTER_FRAMESET:{endTagAfterFrameset(this,t);break}case InsertionMode.AFTER_AFTER_BODY:{tokenAfterAfterBody(this,t);break}}}onEof(t){switch(this.insertionMode){case InsertionMode.INITIAL:{tokenInInitialMode(this,t);break}case InsertionMode.BEFORE_HTML:{tokenBeforeHtml(this,t);break}case InsertionMode.BEFORE_HEAD:{tokenBeforeHead(this,t);break}case InsertionMode.IN_HEAD:{tokenInHead(this,t);break}case InsertionMode.IN_HEAD_NO_SCRIPT:{tokenInHeadNoScript(this,t);break}case InsertionMode.AFTER_HEAD:{tokenAfterHead(this,t);break}case InsertionMode.IN_BODY:case InsertionMode.IN_TABLE:case InsertionMode.IN_CAPTION:case InsertionMode.IN_COLUMN_GROUP:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:case InsertionMode.IN_CELL:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:{eofInBody(this,t);break}case InsertionMode.TEXT:{eofInText(this,t);break}case InsertionMode.IN_TABLE_TEXT:{tokenInTableText(this,t);break}case InsertionMode.IN_TEMPLATE:{eofInTemplate(this,t);break}case InsertionMode.AFTER_BODY:case InsertionMode.IN_FRAMESET:case InsertionMode.AFTER_FRAMESET:case InsertionMode.AFTER_AFTER_BODY:case InsertionMode.AFTER_AFTER_FRAMESET:{stopParsing(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===CODE_POINTS.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case InsertionMode.IN_HEAD:case InsertionMode.IN_HEAD_NO_SCRIPT:case InsertionMode.AFTER_HEAD:case InsertionMode.TEXT:case InsertionMode.IN_COLUMN_GROUP:case InsertionMode.IN_SELECT:case InsertionMode.IN_SELECT_IN_TABLE:case InsertionMode.IN_FRAMESET:case InsertionMode.AFTER_FRAMESET:{this._insertCharacters(t);break}case InsertionMode.IN_BODY:case InsertionMode.IN_CAPTION:case InsertionMode.IN_CELL:case InsertionMode.IN_TEMPLATE:case InsertionMode.AFTER_BODY:case InsertionMode.AFTER_AFTER_BODY:case InsertionMode.AFTER_AFTER_FRAMESET:{whitespaceCharacterInBody(this,t);break}case InsertionMode.IN_TABLE:case InsertionMode.IN_TABLE_BODY:case InsertionMode.IN_ROW:{characterInTable(this,t);break}case InsertionMode.IN_TABLE_TEXT:{whitespaceCharacterInTableText(this,t);break}}}};function aaObtainFormattingElementEntry(t,e){let n=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return n?t.openElements.contains(n.element)?t.openElements.hasInScope(e.tagID)||(n=null):(t.activeFormattingElements.removeEntry(n),n=null):genericEndTagInBody(t,e),n}function aaObtainFurthestBlock(t,e){let n=null,s=t.openElements.stackTop;for(;s>=0;s--){const r=t.openElements.items[s];if(r===e.element)break;t._isSpecialElement(r,t.openElements.tagIDs[s])&&(n=r)}return n||(t.openElements.shortenToLength(s<0?0:s),t.activeFormattingElements.removeEntry(e)),n}function aaInnerLoop(t,e,n){let s=e,r=t.openElements.getCommonAncestor(e);for(let i=0,a=r;a!==n;i++,a=r){r=t.openElements.getCommonAncestor(a);const c=t.activeFormattingElements.getElementEntry(a),o=c&&i>=AA_INNER_LOOP_ITER;!c||o?(o&&t.activeFormattingElements.removeEntry(c),t.openElements.remove(a)):(a=aaRecreateElementFromEntry(t,c),s===e&&(t.activeFormattingElements.bookmark=c),t.treeAdapter.detachNode(s),t.treeAdapter.appendChild(a,s),s=a)}return s}function aaRecreateElementFromEntry(t,e){const n=t.treeAdapter.getNamespaceURI(e.element),s=t.treeAdapter.createElement(e.token.tagName,n,e.token.attrs);return t.openElements.replace(e.element,s),e.element=s,s}function aaInsertLastNodeInCommonAncestor(t,e,n){const s=t.treeAdapter.getTagName(e),r=getTagID(s);if(t._isElementCausesFosterParenting(r))t._fosterParentElement(n);else{const i=t.treeAdapter.getNamespaceURI(e);r===TAG_ID.TEMPLATE&&i===NS.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,n)}}function aaReplaceFormattingElement(t,e,n){const s=t.treeAdapter.getNamespaceURI(n.element),{token:r}=n,i=t.treeAdapter.createElement(r.tagName,s,r.attrs);t._adoptNodes(e,i),t.treeAdapter.appendChild(e,i),t.activeFormattingElements.insertElementAfterBookmark(i,r),t.activeFormattingElements.removeEntry(n),t.openElements.remove(n.element),t.openElements.insertAfter(e,i,r.tagID)}function callAdoptionAgency(t,e){for(let n=0;n<AA_OUTER_LOOP_ITER;n++){const s=aaObtainFormattingElementEntry(t,e);if(!s)break;const r=aaObtainFurthestBlock(t,s);if(!r)break;t.activeFormattingElements.bookmark=s;const i=aaInnerLoop(t,r,s.element),a=t.openElements.getCommonAncestor(s.element);t.treeAdapter.detachNode(i),a&&aaInsertLastNodeInCommonAncestor(t,a,i),aaReplaceFormattingElement(t,r,s)}}function appendComment(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function appendCommentToRootHtmlElement(t,e){t._appendCommentNode(e,t.openElements.items[0])}function appendCommentToDocument(t,e){t._appendCommentNode(e,t.document)}function stopParsing(t,e){if(t.stopped=!0,e.location){const n=t.fragmentContext?0:2;for(let s=t.openElements.stackTop;s>=n;s--)t._setEndLocation(t.openElements.items[s],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const s=t.openElements.items[0],r=t.treeAdapter.getNodeSourceCodeLocation(s);if(r&&!r.endTag&&(t._setEndLocation(s,e),t.openElements.stackTop>=1)){const i=t.openElements.items[1],a=t.treeAdapter.getNodeSourceCodeLocation(i);a&&!a.endTag&&t._setEndLocation(i,e)}}}}function doctypeInInitialMode(t,e){t._setDocumentType(e);const n=e.forceQuirks?DOCUMENT_MODE.QUIRKS:getDocumentMode(e);isConforming(e)||t._err(e,ERR.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,n),t.insertionMode=InsertionMode.BEFORE_HTML}function tokenInInitialMode(t,e){t._err(e,ERR.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,DOCUMENT_MODE.QUIRKS),t.insertionMode=InsertionMode.BEFORE_HTML,t._processToken(e)}function startTagBeforeHtml(t,e){e.tagID===TAG_ID.HTML?(t._insertElement(e,NS.HTML),t.insertionMode=InsertionMode.BEFORE_HEAD):tokenBeforeHtml(t,e)}function endTagBeforeHtml(t,e){const n=e.tagID;(n===TAG_ID.HTML||n===TAG_ID.HEAD||n===TAG_ID.BODY||n===TAG_ID.BR)&&tokenBeforeHtml(t,e)}function tokenBeforeHtml(t,e){t._insertFakeRootElement(),t.insertionMode=InsertionMode.BEFORE_HEAD,t._processToken(e)}function startTagBeforeHead(t,e){switch(e.tagID){case TAG_ID.HTML:{startTagInBody(t,e);break}case TAG_ID.HEAD:{t._insertElement(e,NS.HTML),t.headElement=t.openElements.current,t.insertionMode=InsertionMode.IN_HEAD;break}default:tokenBeforeHead(t,e)}}function endTagBeforeHead(t,e){const n=e.tagID;n===TAG_ID.HEAD||n===TAG_ID.BODY||n===TAG_ID.HTML||n===TAG_ID.BR?tokenBeforeHead(t,e):t._err(e,ERR.endTagWithoutMatchingOpenElement)}function tokenBeforeHead(t,e){t._insertFakeElement(TAG_NAMES.HEAD,TAG_ID.HEAD),t.headElement=t.openElements.current,t.insertionMode=InsertionMode.IN_HEAD,t._processToken(e)}function startTagInHead(t,e){switch(e.tagID){case TAG_ID.HTML:{startTagInBody(t,e);break}case TAG_ID.BASE:case TAG_ID.BASEFONT:case TAG_ID.BGSOUND:case TAG_ID.LINK:case TAG_ID.META:{t._appendElement(e,NS.HTML),e.ackSelfClosing=!0;break}case TAG_ID.TITLE:{t._switchToTextParsing(e,TokenizerMode.RCDATA);break}case TAG_ID.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,TokenizerMode.RAWTEXT):(t._insertElement(e,NS.HTML),t.insertionMode=InsertionMode.IN_HEAD_NO_SCRIPT);break}case TAG_ID.NOFRAMES:case TAG_ID.STYLE:{t._switchToTextParsing(e,TokenizerMode.RAWTEXT);break}case TAG_ID.SCRIPT:{t._switchToTextParsing(e,TokenizerMode.SCRIPT_DATA);break}case TAG_ID.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=InsertionMode.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(InsertionMode.IN_TEMPLATE);break}case TAG_ID.HEAD:{t._err(e,ERR.misplacedStartTagForHeadElement);break}default:tokenInHead(t,e)}}function endTagInHead(t,e){switch(e.tagID){case TAG_ID.HEAD:{t.openElements.pop(),t.insertionMode=InsertionMode.AFTER_HEAD;break}case TAG_ID.BODY:case TAG_ID.BR:case TAG_ID.HTML:{tokenInHead(t,e);break}case TAG_ID.TEMPLATE:{templateEndTagInHead(t,e);break}default:t._err(e,ERR.endTagWithoutMatchingOpenElement)}}function templateEndTagInHead(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==TAG_ID.TEMPLATE&&t._err(e,ERR.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(TAG_ID.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,ERR.endTagWithoutMatchingOpenElement)}function tokenInHead(t,e){t.openElements.pop(),t.insertionMode=InsertionMode.AFTER_HEAD,t._processToken(e)}function startTagInHeadNoScript(t,e){switch(e.tagID){case TAG_ID.HTML:{startTagInBody(t,e);break}case TAG_ID.BASEFONT:case TAG_ID.BGSOUND:case TAG_ID.HEAD:case TAG_ID.LINK:case TAG_ID.META:case TAG_ID.NOFRAMES:case TAG_ID.STYLE:{startTagInHead(t,e);break}case TAG_ID.NOSCRIPT:{t._err(e,ERR.nestedNoscriptInHead);break}default:tokenInHeadNoScript(t,e)}}function endTagInHeadNoScript(t,e){switch(e.tagID){case TAG_ID.NOSCRIPT:{t.openElements.pop(),t.insertionMode=InsertionMode.IN_HEAD;break}case TAG_ID.BR:{tokenInHeadNoScript(t,e);break}default:t._err(e,ERR.endTagWithoutMatchingOpenElement)}}function tokenInHeadNoScript(t,e){const n=e.type===TokenType.EOF?ERR.openElementsLeftAfterEof:ERR.disallowedContentInNoscriptInHead;t._err(e,n),t.openElements.pop(),t.insertionMode=InsertionMode.IN_HEAD,t._processToken(e)}function startTagAfterHead(t,e){switch(e.tagID){case TAG_ID.HTML:{startTagInBody(t,e);break}case TAG_ID.BODY:{t._insertElement(e,NS.HTML),t.framesetOk=!1,t.insertionMode=InsertionMode.IN_BODY;break}case TAG_ID.FRAMESET:{t._insertElement(e,NS.HTML),t.insertionMode=InsertionMode.IN_FRAMESET;break}case TAG_ID.BASE:case TAG_ID.BASEFONT:case TAG_ID.BGSOUND:case TAG_ID.LINK:case TAG_ID.META:case TAG_ID.NOFRAMES:case TAG_ID.SCRIPT:case TAG_ID.STYLE:case TAG_ID.TEMPLATE:case TAG_ID.TITLE:{t._err(e,ERR.abandonedHeadElementChild),t.openElements.push(t.headElement,TAG_ID.HEAD),startTagInHead(t,e),t.openElements.remove(t.headElement);break}case TAG_ID.HEAD:{t._err(e,ERR.misplacedStartTagForHeadElement);break}default:tokenAfterHead(t,e)}}function endTagAfterHead(t,e){switch(e.tagID){case TAG_ID.BODY:case TAG_ID.HTML:case TAG_ID.BR:{tokenAfterHead(t,e);break}case TAG_ID.TEMPLATE:{templateEndTagInHead(t,e);break}default:t._err(e,ERR.endTagWithoutMatchingOpenElement)}}function tokenAfterHead(t,e){t._insertFakeElement(TAG_NAMES.BODY,TAG_ID.BODY),t.insertionMode=InsertionMode.IN_BODY,modeInBody(t,e)}function modeInBody(t,e){switch(e.type){case TokenType.CHARACTER:{characterInBody(t,e);break}case TokenType.WHITESPACE_CHARACTER:{whitespaceCharacterInBody(t,e);break}case TokenType.COMMENT:{appendComment(t,e);break}case TokenType.START_TAG:{startTagInBody(t,e);break}case TokenType.END_TAG:{endTagInBody(t,e);break}case TokenType.EOF:{eofInBody(t,e);break}}}function whitespaceCharacterInBody(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function characterInBody(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function htmlStartTagInBody(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function bodyStartTagInBody(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(n,e.attrs))}function framesetStartTagInBody(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&n&&(t.treeAdapter.detachNode(n),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,NS.HTML),t.insertionMode=InsertionMode.IN_FRAMESET)}function addressStartTagInBody(t,e){t.openElements.hasInButtonScope(TAG_ID.P)&&t._closePElement(),t._insertElement(e,NS.HTML)}function numberedHeaderStartTagInBody(t,e){t.openElements.hasInButtonScope(TAG_ID.P)&&t._closePElement(),isNumberedHeader(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,NS.HTML)}function preStartTagInBody(t,e){t.openElements.hasInButtonScope(TAG_ID.P)&&t._closePElement(),t._insertElement(e,NS.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function formStartTagInBody(t,e){const n=t.openElements.tmplCount>0;(!t.formElement||n)&&(t.openElements.hasInButtonScope(TAG_ID.P)&&t._closePElement(),t._insertElement(e,NS.HTML),n||(t.formElement=t.openElements.current))}function listItemStartTagInBody(t,e){t.framesetOk=!1;const n=e.tagID;for(let s=t.openElements.stackTop;s>=0;s--){const r=t.openElements.tagIDs[s];if(n===TAG_ID.LI&&r===TAG_ID.LI||(n===TAG_ID.DD||n===TAG_ID.DT)&&(r===TAG_ID.DD||r===TAG_ID.DT)){t.openElements.generateImpliedEndTagsWithExclusion(r),t.openElements.popUntilTagNamePopped(r);break}if(r!==TAG_ID.ADDRESS&&r!==TAG_ID.DIV&&r!==TAG_ID.P&&t._isSpecialElement(t.openElements.items[s],r))break}t.openElements.hasInButtonScope(TAG_ID.P)&&t._closePElement(),t._insertElement(e,NS.HTML)}function plaintextStartTagInBody(t,e){t.openElements.hasInButtonScope(TAG_ID.P)&&t._closePElement(),t._insertElement(e,NS.HTML),t.tokenizer.state=TokenizerMode.PLAINTEXT}function buttonStartTagInBody(t,e){t.openElements.hasInScope(TAG_ID.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(TAG_ID.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,NS.HTML),t.framesetOk=!1}function aStartTagInBody(t,e){const n=t.activeFormattingElements.getElementEntryInScopeWithTagName(TAG_NAMES.A);n&&(callAdoptionAgency(t,e),t.openElements.remove(n.element),t.activeFormattingElements.removeEntry(n)),t._reconstructActiveFormattingElements(),t._insertElement(e,NS.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function bStartTagInBody(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,NS.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function nobrStartTagInBody(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(TAG_ID.NOBR)&&(callAdoptionAgency(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,NS.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function appletStartTagInBody(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,NS.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function tableStartTagInBody(t,e){t.treeAdapter.getDocumentMode(t.document)!==DOCUMENT_MODE.QUIRKS&&t.openElements.hasInButtonScope(TAG_ID.P)&&t._closePElement(),t._insertElement(e,NS.HTML),t.framesetOk=!1,t.insertionMode=InsertionMode.IN_TABLE}function areaStartTagInBody(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,NS.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function isHiddenInput(t){const e=getTokenAttr(t,ATTRS.TYPE);return e!=null&&e.toLowerCase()===HIDDEN_INPUT_TYPE}function inputStartTagInBody(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,NS.HTML),isHiddenInput(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function paramStartTagInBody(t,e){t._appendElement(e,NS.HTML),e.ackSelfClosing=!0}function hrStartTagInBody(t,e){t.openElements.hasInButtonScope(TAG_ID.P)&&t._closePElement(),t._appendElement(e,NS.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function imageStartTagInBody(t,e){e.tagName=TAG_NAMES.IMG,e.tagID=TAG_ID.IMG,areaStartTagInBody(t,e)}function textareaStartTagInBody(t,e){t._insertElement(e,NS.HTML),t.skipNextNewLine=!0,t.tokenizer.state=TokenizerMode.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=InsertionMode.TEXT}function xmpStartTagInBody(t,e){t.openElements.hasInButtonScope(TAG_ID.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,TokenizerMode.RAWTEXT)}function iframeStartTagInBody(t,e){t.framesetOk=!1,t._switchToTextParsing(e,TokenizerMode.RAWTEXT)}function noembedStartTagInBody(t,e){t._switchToTextParsing(e,TokenizerMode.RAWTEXT)}function selectStartTagInBody(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,NS.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===InsertionMode.IN_TABLE||t.insertionMode===InsertionMode.IN_CAPTION||t.insertionMode===InsertionMode.IN_TABLE_BODY||t.insertionMode===InsertionMode.IN_ROW||t.insertionMode===InsertionMode.IN_CELL?InsertionMode.IN_SELECT_IN_TABLE:InsertionMode.IN_SELECT}function optgroupStartTagInBody(t,e){t.openElements.currentTagId===TAG_ID.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,NS.HTML)}function rbStartTagInBody(t,e){t.openElements.hasInScope(TAG_ID.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,NS.HTML)}function rtStartTagInBody(t,e){t.openElements.hasInScope(TAG_ID.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(TAG_ID.RTC),t._insertElement(e,NS.HTML)}function mathStartTagInBody(t,e){t._reconstructActiveFormattingElements(),adjustTokenMathMLAttrs(e),adjustTokenXMLAttrs(e),e.selfClosing?t._appendElement(e,NS.MATHML):t._insertElement(e,NS.MATHML),e.ackSelfClosing=!0}function svgStartTagInBody(t,e){t._reconstructActiveFormattingElements(),adjustTokenSVGAttrs(e),adjustTokenXMLAttrs(e),e.selfClosing?t._appendElement(e,NS.SVG):t._insertElement(e,NS.SVG),e.ackSelfClosing=!0}function genericStartTagInBody(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,NS.HTML)}function startTagInBody(t,e){switch(e.tagID){case TAG_ID.I:case TAG_ID.S:case TAG_ID.B:case TAG_ID.U:case TAG_ID.EM:case TAG_ID.TT:case TAG_ID.BIG:case TAG_ID.CODE:case TAG_ID.FONT:case TAG_ID.SMALL:case TAG_ID.STRIKE:case TAG_ID.STRONG:{bStartTagInBody(t,e);break}case TAG_ID.A:{aStartTagInBody(t,e);break}case TAG_ID.H1:case TAG_ID.H2:case TAG_ID.H3:case TAG_ID.H4:case TAG_ID.H5:case TAG_ID.H6:{numberedHeaderStartTagInBody(t,e);break}case TAG_ID.P:case TAG_ID.DL:case TAG_ID.OL:case TAG_ID.UL:case TAG_ID.DIV:case TAG_ID.DIR:case TAG_ID.NAV:case TAG_ID.MAIN:case TAG_ID.MENU:case TAG_ID.ASIDE:case TAG_ID.CENTER:case TAG_ID.FIGURE:case TAG_ID.FOOTER:case TAG_ID.HEADER:case TAG_ID.HGROUP:case TAG_ID.DIALOG:case TAG_ID.DETAILS:case TAG_ID.ADDRESS:case TAG_ID.ARTICLE:case TAG_ID.SECTION:case TAG_ID.SUMMARY:case TAG_ID.FIELDSET:case TAG_ID.BLOCKQUOTE:case TAG_ID.FIGCAPTION:{addressStartTagInBody(t,e);break}case TAG_ID.LI:case TAG_ID.DD:case TAG_ID.DT:{listItemStartTagInBody(t,e);break}case TAG_ID.BR:case TAG_ID.IMG:case TAG_ID.WBR:case TAG_ID.AREA:case TAG_ID.EMBED:case TAG_ID.KEYGEN:{areaStartTagInBody(t,e);break}case TAG_ID.HR:{hrStartTagInBody(t,e);break}case TAG_ID.RB:case TAG_ID.RTC:{rbStartTagInBody(t,e);break}case TAG_ID.RT:case TAG_ID.RP:{rtStartTagInBody(t,e);break}case TAG_ID.PRE:case TAG_ID.LISTING:{preStartTagInBody(t,e);break}case TAG_ID.XMP:{xmpStartTagInBody(t,e);break}case TAG_ID.SVG:{svgStartTagInBody(t,e);break}case TAG_ID.HTML:{htmlStartTagInBody(t,e);break}case TAG_ID.BASE:case TAG_ID.LINK:case TAG_ID.META:case TAG_ID.STYLE:case TAG_ID.TITLE:case TAG_ID.SCRIPT:case TAG_ID.BGSOUND:case TAG_ID.BASEFONT:case TAG_ID.TEMPLATE:{startTagInHead(t,e);break}case TAG_ID.BODY:{bodyStartTagInBody(t,e);break}case TAG_ID.FORM:{formStartTagInBody(t,e);break}case TAG_ID.NOBR:{nobrStartTagInBody(t,e);break}case TAG_ID.MATH:{mathStartTagInBody(t,e);break}case TAG_ID.TABLE:{tableStartTagInBody(t,e);break}case TAG_ID.INPUT:{inputStartTagInBody(t,e);break}case TAG_ID.PARAM:case TAG_ID.TRACK:case TAG_ID.SOURCE:{paramStartTagInBody(t,e);break}case TAG_ID.IMAGE:{imageStartTagInBody(t,e);break}case TAG_ID.BUTTON:{buttonStartTagInBody(t,e);break}case TAG_ID.APPLET:case TAG_ID.OBJECT:case TAG_ID.MARQUEE:{appletStartTagInBody(t,e);break}case TAG_ID.IFRAME:{iframeStartTagInBody(t,e);break}case TAG_ID.SELECT:{selectStartTagInBody(t,e);break}case TAG_ID.OPTION:case TAG_ID.OPTGROUP:{optgroupStartTagInBody(t,e);break}case TAG_ID.NOEMBED:{noembedStartTagInBody(t,e);break}case TAG_ID.FRAMESET:{framesetStartTagInBody(t,e);break}case TAG_ID.TEXTAREA:{textareaStartTagInBody(t,e);break}case TAG_ID.NOSCRIPT:{t.options.scriptingEnabled?noembedStartTagInBody(t,e):genericStartTagInBody(t,e);break}case TAG_ID.PLAINTEXT:{plaintextStartTagInBody(t,e);break}case TAG_ID.COL:case TAG_ID.TH:case TAG_ID.TD:case TAG_ID.TR:case TAG_ID.HEAD:case TAG_ID.FRAME:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:case TAG_ID.CAPTION:case TAG_ID.COLGROUP:break;default:genericStartTagInBody(t,e)}}function bodyEndTagInBody(t,e){if(t.openElements.hasInScope(TAG_ID.BODY)&&(t.insertionMode=InsertionMode.AFTER_BODY,t.options.sourceCodeLocationInfo)){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t._setEndLocation(n,e)}}function htmlEndTagInBody(t,e){t.openElements.hasInScope(TAG_ID.BODY)&&(t.insertionMode=InsertionMode.AFTER_BODY,endTagAfterBody(t,e))}function addressEndTagInBody(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n))}function formEndTagInBody(t){const e=t.openElements.tmplCount>0,{formElement:n}=t;e||(t.formElement=null),(n||e)&&t.openElements.hasInScope(TAG_ID.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(TAG_ID.FORM):n&&t.openElements.remove(n))}function pEndTagInBody(t){t.openElements.hasInButtonScope(TAG_ID.P)||t._insertFakeElement(TAG_NAMES.P,TAG_ID.P),t._closePElement()}function liEndTagInBody(t){t.openElements.hasInListItemScope(TAG_ID.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(TAG_ID.LI),t.openElements.popUntilTagNamePopped(TAG_ID.LI))}function ddEndTagInBody(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.popUntilTagNamePopped(n))}function numberedHeaderEndTagInBody(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function appletEndTagInBody(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker())}function brEndTagInBody(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(TAG_NAMES.BR,TAG_ID.BR),t.openElements.pop(),t.framesetOk=!1}function genericEndTagInBody(t,e){const n=e.tagName,s=e.tagID;for(let r=t.openElements.stackTop;r>0;r--){const i=t.openElements.items[r],a=t.openElements.tagIDs[r];if(s===a&&(s!==TAG_ID.UNKNOWN||t.treeAdapter.getTagName(i)===n)){t.openElements.generateImpliedEndTagsWithExclusion(s),t.openElements.stackTop>=r&&t.openElements.shortenToLength(r);break}if(t._isSpecialElement(i,a))break}}function endTagInBody(t,e){switch(e.tagID){case TAG_ID.A:case TAG_ID.B:case TAG_ID.I:case TAG_ID.S:case TAG_ID.U:case TAG_ID.EM:case TAG_ID.TT:case TAG_ID.BIG:case TAG_ID.CODE:case TAG_ID.FONT:case TAG_ID.NOBR:case TAG_ID.SMALL:case TAG_ID.STRIKE:case TAG_ID.STRONG:{callAdoptionAgency(t,e);break}case TAG_ID.P:{pEndTagInBody(t);break}case TAG_ID.DL:case TAG_ID.UL:case TAG_ID.OL:case TAG_ID.DIR:case TAG_ID.DIV:case TAG_ID.NAV:case TAG_ID.PRE:case TAG_ID.MAIN:case TAG_ID.MENU:case TAG_ID.ASIDE:case TAG_ID.BUTTON:case TAG_ID.CENTER:case TAG_ID.FIGURE:case TAG_ID.FOOTER:case TAG_ID.HEADER:case TAG_ID.HGROUP:case TAG_ID.DIALOG:case TAG_ID.ADDRESS:case TAG_ID.ARTICLE:case TAG_ID.DETAILS:case TAG_ID.SECTION:case TAG_ID.SUMMARY:case TAG_ID.LISTING:case TAG_ID.FIELDSET:case TAG_ID.BLOCKQUOTE:case TAG_ID.FIGCAPTION:{addressEndTagInBody(t,e);break}case TAG_ID.LI:{liEndTagInBody(t);break}case TAG_ID.DD:case TAG_ID.DT:{ddEndTagInBody(t,e);break}case TAG_ID.H1:case TAG_ID.H2:case TAG_ID.H3:case TAG_ID.H4:case TAG_ID.H5:case TAG_ID.H6:{numberedHeaderEndTagInBody(t);break}case TAG_ID.BR:{brEndTagInBody(t);break}case TAG_ID.BODY:{bodyEndTagInBody(t,e);break}case TAG_ID.HTML:{htmlEndTagInBody(t,e);break}case TAG_ID.FORM:{formEndTagInBody(t);break}case TAG_ID.APPLET:case TAG_ID.OBJECT:case TAG_ID.MARQUEE:{appletEndTagInBody(t,e);break}case TAG_ID.TEMPLATE:{templateEndTagInHead(t,e);break}default:genericEndTagInBody(t,e)}}function eofInBody(t,e){t.tmplInsertionModeStack.length>0?eofInTemplate(t,e):stopParsing(t,e)}function endTagInText(t,e){var n;e.tagID===TAG_ID.SCRIPT&&((n=t.scriptHandler)===null||n===void 0||n.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function eofInText(t,e){t._err(e,ERR.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function characterInTable(t,e){if(TABLE_STRUCTURE_TAGS.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=InsertionMode.IN_TABLE_TEXT,e.type){case TokenType.CHARACTER:{characterInTableText(t,e);break}case TokenType.WHITESPACE_CHARACTER:{whitespaceCharacterInTableText(t,e);break}}else tokenInTable(t,e)}function captionStartTagInTable(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,NS.HTML),t.insertionMode=InsertionMode.IN_CAPTION}function colgroupStartTagInTable(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,NS.HTML),t.insertionMode=InsertionMode.IN_COLUMN_GROUP}function colStartTagInTable(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(TAG_NAMES.COLGROUP,TAG_ID.COLGROUP),t.insertionMode=InsertionMode.IN_COLUMN_GROUP,startTagInColumnGroup(t,e)}function tbodyStartTagInTable(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,NS.HTML),t.insertionMode=InsertionMode.IN_TABLE_BODY}function tdStartTagInTable(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(TAG_NAMES.TBODY,TAG_ID.TBODY),t.insertionMode=InsertionMode.IN_TABLE_BODY,startTagInTableBody(t,e)}function tableStartTagInTable(t,e){t.openElements.hasInTableScope(TAG_ID.TABLE)&&(t.openElements.popUntilTagNamePopped(TAG_ID.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function inputStartTagInTable(t,e){isHiddenInput(e)?t._appendElement(e,NS.HTML):tokenInTable(t,e),e.ackSelfClosing=!0}function formStartTagInTable(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,NS.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function startTagInTable(t,e){switch(e.tagID){case TAG_ID.TD:case TAG_ID.TH:case TAG_ID.TR:{tdStartTagInTable(t,e);break}case TAG_ID.STYLE:case TAG_ID.SCRIPT:case TAG_ID.TEMPLATE:{startTagInHead(t,e);break}case TAG_ID.COL:{colStartTagInTable(t,e);break}case TAG_ID.FORM:{formStartTagInTable(t,e);break}case TAG_ID.TABLE:{tableStartTagInTable(t,e);break}case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:{tbodyStartTagInTable(t,e);break}case TAG_ID.INPUT:{inputStartTagInTable(t,e);break}case TAG_ID.CAPTION:{captionStartTagInTable(t,e);break}case TAG_ID.COLGROUP:{colgroupStartTagInTable(t,e);break}default:tokenInTable(t,e)}}function endTagInTable(t,e){switch(e.tagID){case TAG_ID.TABLE:{t.openElements.hasInTableScope(TAG_ID.TABLE)&&(t.openElements.popUntilTagNamePopped(TAG_ID.TABLE),t._resetInsertionMode());break}case TAG_ID.TEMPLATE:{templateEndTagInHead(t,e);break}case TAG_ID.BODY:case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:case TAG_ID.TBODY:case TAG_ID.TD:case TAG_ID.TFOOT:case TAG_ID.TH:case TAG_ID.THEAD:case TAG_ID.TR:break;default:tokenInTable(t,e)}}function tokenInTable(t,e){const n=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,modeInBody(t,e),t.fosterParentingEnabled=n}function whitespaceCharacterInTableText(t,e){t.pendingCharacterTokens.push(e)}function characterInTableText(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function tokenInTableText(t,e){let n=0;if(t.hasNonWhitespacePendingCharacterToken)for(;n<t.pendingCharacterTokens.length;n++)tokenInTable(t,t.pendingCharacterTokens[n]);else for(;n<t.pendingCharacterTokens.length;n++)t._insertCharacters(t.pendingCharacterTokens[n]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const TABLE_VOID_ELEMENTS=new Set([TAG_ID.CAPTION,TAG_ID.COL,TAG_ID.COLGROUP,TAG_ID.TBODY,TAG_ID.TD,TAG_ID.TFOOT,TAG_ID.TH,TAG_ID.THEAD,TAG_ID.TR]);function startTagInCaption(t,e){const n=e.tagID;TABLE_VOID_ELEMENTS.has(n)?t.openElements.hasInTableScope(TAG_ID.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(TAG_ID.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=InsertionMode.IN_TABLE,startTagInTable(t,e)):startTagInBody(t,e)}function endTagInCaption(t,e){const n=e.tagID;switch(n){case TAG_ID.CAPTION:case TAG_ID.TABLE:{t.openElements.hasInTableScope(TAG_ID.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(TAG_ID.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=InsertionMode.IN_TABLE,n===TAG_ID.TABLE&&endTagInTable(t,e));break}case TAG_ID.BODY:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:case TAG_ID.TBODY:case TAG_ID.TD:case TAG_ID.TFOOT:case TAG_ID.TH:case TAG_ID.THEAD:case TAG_ID.TR:break;default:endTagInBody(t,e)}}function startTagInColumnGroup(t,e){switch(e.tagID){case TAG_ID.HTML:{startTagInBody(t,e);break}case TAG_ID.COL:{t._appendElement(e,NS.HTML),e.ackSelfClosing=!0;break}case TAG_ID.TEMPLATE:{startTagInHead(t,e);break}default:tokenInColumnGroup(t,e)}}function endTagInColumnGroup(t,e){switch(e.tagID){case TAG_ID.COLGROUP:{t.openElements.currentTagId===TAG_ID.COLGROUP&&(t.openElements.pop(),t.insertionMode=InsertionMode.IN_TABLE);break}case TAG_ID.TEMPLATE:{templateEndTagInHead(t,e);break}case TAG_ID.COL:break;default:tokenInColumnGroup(t,e)}}function tokenInColumnGroup(t,e){t.openElements.currentTagId===TAG_ID.COLGROUP&&(t.openElements.pop(),t.insertionMode=InsertionMode.IN_TABLE,t._processToken(e))}function startTagInTableBody(t,e){switch(e.tagID){case TAG_ID.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,NS.HTML),t.insertionMode=InsertionMode.IN_ROW;break}case TAG_ID.TH:case TAG_ID.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(TAG_NAMES.TR,TAG_ID.TR),t.insertionMode=InsertionMode.IN_ROW,startTagInRow(t,e);break}case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=InsertionMode.IN_TABLE,startTagInTable(t,e));break}default:startTagInTable(t,e)}}function endTagInTableBody(t,e){const n=e.tagID;switch(e.tagID){case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:{t.openElements.hasInTableScope(n)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=InsertionMode.IN_TABLE);break}case TAG_ID.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=InsertionMode.IN_TABLE,endTagInTable(t,e));break}case TAG_ID.BODY:case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:case TAG_ID.TD:case TAG_ID.TH:case TAG_ID.TR:break;default:endTagInTable(t,e)}}function startTagInRow(t,e){switch(e.tagID){case TAG_ID.TH:case TAG_ID.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,NS.HTML),t.insertionMode=InsertionMode.IN_CELL,t.activeFormattingElements.insertMarker();break}case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:case TAG_ID.TR:{t.openElements.hasInTableScope(TAG_ID.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=InsertionMode.IN_TABLE_BODY,startTagInTableBody(t,e));break}default:startTagInTable(t,e)}}function endTagInRow(t,e){switch(e.tagID){case TAG_ID.TR:{t.openElements.hasInTableScope(TAG_ID.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=InsertionMode.IN_TABLE_BODY);break}case TAG_ID.TABLE:{t.openElements.hasInTableScope(TAG_ID.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=InsertionMode.IN_TABLE_BODY,endTagInTableBody(t,e));break}case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope(TAG_ID.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=InsertionMode.IN_TABLE_BODY,endTagInTableBody(t,e));break}case TAG_ID.BODY:case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:case TAG_ID.TD:case TAG_ID.TH:break;default:endTagInTable(t,e)}}function startTagInCell(t,e){const n=e.tagID;TABLE_VOID_ELEMENTS.has(n)?(t.openElements.hasInTableScope(TAG_ID.TD)||t.openElements.hasInTableScope(TAG_ID.TH))&&(t._closeTableCell(),startTagInRow(t,e)):startTagInBody(t,e)}function endTagInCell(t,e){const n=e.tagID;switch(n){case TAG_ID.TD:case TAG_ID.TH:{t.openElements.hasInTableScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=InsertionMode.IN_ROW);break}case TAG_ID.TABLE:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:case TAG_ID.TR:{t.openElements.hasInTableScope(n)&&(t._closeTableCell(),endTagInRow(t,e));break}case TAG_ID.BODY:case TAG_ID.CAPTION:case TAG_ID.COL:case TAG_ID.COLGROUP:case TAG_ID.HTML:break;default:endTagInBody(t,e)}}function startTagInSelect(t,e){switch(e.tagID){case TAG_ID.HTML:{startTagInBody(t,e);break}case TAG_ID.OPTION:{t.openElements.currentTagId===TAG_ID.OPTION&&t.openElements.pop(),t._insertElement(e,NS.HTML);break}case TAG_ID.OPTGROUP:{t.openElements.currentTagId===TAG_ID.OPTION&&t.openElements.pop(),t.openElements.currentTagId===TAG_ID.OPTGROUP&&t.openElements.pop(),t._insertElement(e,NS.HTML);break}case TAG_ID.INPUT:case TAG_ID.KEYGEN:case TAG_ID.TEXTAREA:case TAG_ID.SELECT:{t.openElements.hasInSelectScope(TAG_ID.SELECT)&&(t.openElements.popUntilTagNamePopped(TAG_ID.SELECT),t._resetInsertionMode(),e.tagID!==TAG_ID.SELECT&&t._processStartTag(e));break}case TAG_ID.SCRIPT:case TAG_ID.TEMPLATE:{startTagInHead(t,e);break}}}function endTagInSelect(t,e){switch(e.tagID){case TAG_ID.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===TAG_ID.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===TAG_ID.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===TAG_ID.OPTGROUP&&t.openElements.pop();break}case TAG_ID.OPTION:{t.openElements.currentTagId===TAG_ID.OPTION&&t.openElements.pop();break}case TAG_ID.SELECT:{t.openElements.hasInSelectScope(TAG_ID.SELECT)&&(t.openElements.popUntilTagNamePopped(TAG_ID.SELECT),t._resetInsertionMode());break}case TAG_ID.TEMPLATE:{templateEndTagInHead(t,e);break}}}function startTagInSelectInTable(t,e){const n=e.tagID;n===TAG_ID.CAPTION||n===TAG_ID.TABLE||n===TAG_ID.TBODY||n===TAG_ID.TFOOT||n===TAG_ID.THEAD||n===TAG_ID.TR||n===TAG_ID.TD||n===TAG_ID.TH?(t.openElements.popUntilTagNamePopped(TAG_ID.SELECT),t._resetInsertionMode(),t._processStartTag(e)):startTagInSelect(t,e)}function endTagInSelectInTable(t,e){const n=e.tagID;n===TAG_ID.CAPTION||n===TAG_ID.TABLE||n===TAG_ID.TBODY||n===TAG_ID.TFOOT||n===TAG_ID.THEAD||n===TAG_ID.TR||n===TAG_ID.TD||n===TAG_ID.TH?t.openElements.hasInTableScope(n)&&(t.openElements.popUntilTagNamePopped(TAG_ID.SELECT),t._resetInsertionMode(),t.onEndTag(e)):endTagInSelect(t,e)}function startTagInTemplate(t,e){switch(e.tagID){case TAG_ID.BASE:case TAG_ID.BASEFONT:case TAG_ID.BGSOUND:case TAG_ID.LINK:case TAG_ID.META:case TAG_ID.NOFRAMES:case TAG_ID.SCRIPT:case TAG_ID.STYLE:case TAG_ID.TEMPLATE:case TAG_ID.TITLE:{startTagInHead(t,e);break}case TAG_ID.CAPTION:case TAG_ID.COLGROUP:case TAG_ID.TBODY:case TAG_ID.TFOOT:case TAG_ID.THEAD:{t.tmplInsertionModeStack[0]=InsertionMode.IN_TABLE,t.insertionMode=InsertionMode.IN_TABLE,startTagInTable(t,e);break}case TAG_ID.COL:{t.tmplInsertionModeStack[0]=InsertionMode.IN_COLUMN_GROUP,t.insertionMode=InsertionMode.IN_COLUMN_GROUP,startTagInColumnGroup(t,e);break}case TAG_ID.TR:{t.tmplInsertionModeStack[0]=InsertionMode.IN_TABLE_BODY,t.insertionMode=InsertionMode.IN_TABLE_BODY,startTagInTableBody(t,e);break}case TAG_ID.TD:case TAG_ID.TH:{t.tmplInsertionModeStack[0]=InsertionMode.IN_ROW,t.insertionMode=InsertionMode.IN_ROW,startTagInRow(t,e);break}default:t.tmplInsertionModeStack[0]=InsertionMode.IN_BODY,t.insertionMode=InsertionMode.IN_BODY,startTagInBody(t,e)}}function endTagInTemplate(t,e){e.tagID===TAG_ID.TEMPLATE&&templateEndTagInHead(t,e)}function eofInTemplate(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(TAG_ID.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):stopParsing(t,e)}function startTagAfterBody(t,e){e.tagID===TAG_ID.HTML?startTagInBody(t,e):tokenAfterBody(t,e)}function endTagAfterBody(t,e){var n;if(e.tagID===TAG_ID.HTML){if(t.fragmentContext||(t.insertionMode=InsertionMode.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===TAG_ID.HTML){t._setEndLocation(t.openElements.items[0],e);const s=t.openElements.items[1];s&&!(!((n=t.treeAdapter.getNodeSourceCodeLocation(s))===null||n===void 0)&&n.endTag)&&t._setEndLocation(s,e)}}else tokenAfterBody(t,e)}function tokenAfterBody(t,e){t.insertionMode=InsertionMode.IN_BODY,modeInBody(t,e)}function startTagInFrameset(t,e){switch(e.tagID){case TAG_ID.HTML:{startTagInBody(t,e);break}case TAG_ID.FRAMESET:{t._insertElement(e,NS.HTML);break}case TAG_ID.FRAME:{t._appendElement(e,NS.HTML),e.ackSelfClosing=!0;break}case TAG_ID.NOFRAMES:{startTagInHead(t,e);break}}}function endTagInFrameset(t,e){e.tagID===TAG_ID.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==TAG_ID.FRAMESET&&(t.insertionMode=InsertionMode.AFTER_FRAMESET))}function startTagAfterFrameset(t,e){switch(e.tagID){case TAG_ID.HTML:{startTagInBody(t,e);break}case TAG_ID.NOFRAMES:{startTagInHead(t,e);break}}}function endTagAfterFrameset(t,e){e.tagID===TAG_ID.HTML&&(t.insertionMode=InsertionMode.AFTER_AFTER_FRAMESET)}function startTagAfterAfterBody(t,e){e.tagID===TAG_ID.HTML?startTagInBody(t,e):tokenAfterAfterBody(t,e)}function tokenAfterAfterBody(t,e){t.insertionMode=InsertionMode.IN_BODY,modeInBody(t,e)}function startTagAfterAfterFrameset(t,e){switch(e.tagID){case TAG_ID.HTML:{startTagInBody(t,e);break}case TAG_ID.NOFRAMES:{startTagInHead(t,e);break}}}function nullCharacterInForeignContent(t,e){e.chars=REPLACEMENT_CHARACTER,t._insertCharacters(e)}function characterInForeignContent(t,e){t._insertCharacters(e),t.framesetOk=!1}function popUntilHtmlOrIntegrationPoint(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==NS.HTML&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function startTagInForeignContent(t,e){if(causesExit(e))popUntilHtmlOrIntegrationPoint(t),t._startTagOutsideForeignContent(e);else{const n=t._getAdjustedCurrentElement(),s=t.treeAdapter.getNamespaceURI(n);s===NS.MATHML?adjustTokenMathMLAttrs(e):s===NS.SVG&&(adjustTokenSVGTagName(e),adjustTokenSVGAttrs(e)),adjustTokenXMLAttrs(e),e.selfClosing?t._appendElement(e,s):t._insertElement(e,s),e.ackSelfClosing=!0}}function endTagInForeignContent(t,e){if(e.tagID===TAG_ID.P||e.tagID===TAG_ID.BR){popUntilHtmlOrIntegrationPoint(t),t._endTagOutsideForeignContent(e);return}for(let n=t.openElements.stackTop;n>0;n--){const s=t.openElements.items[n];if(t.treeAdapter.getNamespaceURI(s)===NS.HTML){t._endTagOutsideForeignContent(e);break}const r=t.treeAdapter.getTagName(s);if(r.toLowerCase()===e.tagName){e.tagName=r,t.openElements.shortenToLength(n);break}}}const VOID_ELEMENTS=new Set([TAG_NAMES.AREA,TAG_NAMES.BASE,TAG_NAMES.BASEFONT,TAG_NAMES.BGSOUND,TAG_NAMES.BR,TAG_NAMES.COL,TAG_NAMES.EMBED,TAG_NAMES.FRAME,TAG_NAMES.HR,TAG_NAMES.IMG,TAG_NAMES.INPUT,TAG_NAMES.KEYGEN,TAG_NAMES.LINK,TAG_NAMES.META,TAG_NAMES.PARAM,TAG_NAMES.SOURCE,TAG_NAMES.TRACK,TAG_NAMES.WBR]);function isVoidElement(t,e){return e.treeAdapter.isElementNode(t)&&e.treeAdapter.getNamespaceURI(t)===NS.HTML&&VOID_ELEMENTS.has(e.treeAdapter.getTagName(t))}const defaultOpts={treeAdapter:defaultTreeAdapter,scriptingEnabled:!0};function serializeOuter(t,e){const n={...defaultOpts,...e};return serializeNode(t,n)}function serializeChildNodes(t,e){let n="";const s=e.treeAdapter.isElementNode(t)&&e.treeAdapter.getTagName(t)===TAG_NAMES.TEMPLATE&&e.treeAdapter.getNamespaceURI(t)===NS.HTML?e.treeAdapter.getTemplateContent(t):t,r=e.treeAdapter.getChildNodes(s);if(r)for(const i of r)n+=serializeNode(i,e);return n}function serializeNode(t,e){return e.treeAdapter.isElementNode(t)?serializeElement(t,e):e.treeAdapter.isTextNode(t)?serializeTextNode(t,e):e.treeAdapter.isCommentNode(t)?serializeCommentNode(t,e):e.treeAdapter.isDocumentTypeNode(t)?serializeDocumentTypeNode(t,e):""}function serializeElement(t,e){const n=e.treeAdapter.getTagName(t);return`<${n}${serializeAttributes(t,e)}>${isVoidElement(t,e)?"":`${serializeChildNodes(t,e)}</${n}>`}`}function serializeAttributes(t,{treeAdapter:e}){let n="";for(const s of e.getAttrList(t)){if(n+=" ",!s.namespace)n+=s.name;else switch(s.namespace){case NS.XML:{n+=`xml:${s.name}`;break}case NS.XMLNS:{s.name!=="xmlns"&&(n+="xmlns:"),n+=s.name;break}case NS.XLINK:{n+=`xlink:${s.name}`;break}default:n+=`${s.prefix}:${s.name}`}n+=`="${escapeAttribute(s.value)}"`}return n}function serializeTextNode(t,e){const{treeAdapter:n}=e,s=n.getTextNodeContent(t),r=n.getParentNode(t),i=r&&n.isElementNode(r)&&n.getTagName(r);return i&&n.getNamespaceURI(r)===NS.HTML&&hasUnescapedText(i,e.scriptingEnabled)?s:escapeText(s)}function serializeCommentNode(t,{treeAdapter:e}){return`<!--${e.getCommentNodeContent(t)}-->`}function serializeDocumentTypeNode(t,{treeAdapter:e}){return`<!DOCTYPE ${e.getDocumentTypeNodeName(t)}>`}function parse$1(t,e){return Parser$1.parse(t,e)}function parseFragment(t,e,n){typeof t=="string"&&(n=e,e=t,t=null);const s=Parser$1.getFragmentParser(t,n);return s.tokenizer.write(e,!0),s.getFragment()}function createTextNode(t){return new Text(t)}function enquoteDoctypeId(t){const e=t.includes('"')?"'":'"';return e+t+e}function serializeDoctypeContent(t,e,n){let s="!DOCTYPE ";return t&&(s+=t),e?s+=` PUBLIC ${enquoteDoctypeId(e)}`:n&&(s+=" SYSTEM"),n&&(s+=` ${enquoteDoctypeId(n)}`),s}const adapter={isCommentNode:isComment,isElementNode:isTag,isTextNode:isText,createDocument(){const t=new Document([]);return t["x-mode"]=DOCUMENT_MODE.NO_QUIRKS,t},createDocumentFragment(){return new Document([])},createElement(t,e,n){const s=Object.create(null),r=Object.create(null),i=Object.create(null);for(let c=0;c<n.length;c++){const o=n[c].name;s[o]=n[c].value,r[o]=n[c].namespace,i[o]=n[c].prefix}const a=new Element(t,s,[]);return a.namespace=e,a["x-attribsNamespace"]=r,a["x-attribsPrefix"]=i,a},createCommentNode(t){return new Comment(t)},appendChild(t,e){const n=t.children[t.children.length-1];n&&(n.next=e,e.prev=n),t.children.push(e),e.parent=t},insertBefore(t,e,n){const s=t.children.indexOf(n),{prev:r}=n;r&&(r.next=e,e.prev=r),n.prev=e,e.next=n,t.children.splice(s,0,e),e.parent=t},setTemplateContent(t,e){adapter.appendChild(t,e)},getTemplateContent(t){return t.children[0]},setDocumentType(t,e,n,s){const r=serializeDoctypeContent(e,n,s);let i=t.children.find(a=>isDirective(a)&&a.name==="!doctype");i?i.data=r??null:(i=new ProcessingInstruction("!doctype",r),adapter.appendChild(t,i)),i["x-name"]=e??void 0,i["x-publicId"]=n??void 0,i["x-systemId"]=s??void 0},setDocumentMode(t,e){t["x-mode"]=e},getDocumentMode(t){return t["x-mode"]},detachNode(t){if(t.parent){const e=t.parent.children.indexOf(t),{prev:n,next:s}=t;t.prev=null,t.next=null,n&&(n.next=s),s&&(s.prev=n),t.parent.children.splice(e,1),t.parent=null}},insertText(t,e){const n=t.children[t.children.length-1];n&&isText(n)?n.data+=e:adapter.appendChild(t,createTextNode(e))},insertTextBefore(t,e,n){const s=t.children[t.children.indexOf(n)-1];s&&isText(s)?s.data+=e:adapter.insertBefore(t,createTextNode(e),n)},adoptAttributes(t,e){for(let n=0;n<e.length;n++){const s=e[n].name;typeof t.attribs[s]>"u"&&(t.attribs[s]=e[n].value,t["x-attribsNamespace"][s]=e[n].namespace,t["x-attribsPrefix"][s]=e[n].prefix)}},getFirstChild(t){return t.children[0]},getChildNodes(t){return t.children},getParentNode(t){return t.parent},getAttrList(t){return t.attributes},getTagName(t){return t.name},getNamespaceURI(t){return t.namespace},getTextNodeContent(t){return t.data},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){var e;return(e=t["x-name"])!==null&&e!==void 0?e:""},getDocumentTypeNodePublicId(t){var e;return(e=t["x-publicId"])!==null&&e!==void 0?e:""},getDocumentTypeNodeSystemId(t){var e;return(e=t["x-systemId"])!==null&&e!==void 0?e:""},isDocumentTypeNode(t){return isDirective(t)&&t.name==="!doctype"},setNodeSourceCodeLocation(t,e){e&&(t.startIndex=e.startOffset,t.endIndex=e.endOffset),t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){e.endOffset!=null&&(t.endIndex=e.endOffset),t.sourceCodeLocation={...t.sourceCodeLocation,...e}}};function parseWithParse5(t,e,n,s){const r={scriptingEnabled:typeof e.scriptingEnabled=="boolean"?e.scriptingEnabled:!0,treeAdapter:adapter,sourceCodeLocationInfo:e.sourceCodeLocationInfo};return n?parse$1(t,r):parseFragment(s,t,r)}const renderOpts={treeAdapter:adapter};function renderWithParse5(t){const e="length"in t?t:[t];for(let s=0;s<e.length;s+=1){const r=e[s];isDocument(r)&&Array.prototype.splice.call(e,s,1,...r.children)}let n="";for(let s=0;s<e.length;s+=1){const r=e[s];n+=serializeOuter(r,renderOpts)}return n}var CharCodes;(function(t){t[t.Tab=9]="Tab",t[t.NewLine=10]="NewLine",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.ExclamationMark=33]="ExclamationMark",t[t.Number=35]="Number",t[t.Amp=38]="Amp",t[t.SingleQuote=39]="SingleQuote",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dash=45]="Dash",t[t.Slash=47]="Slash",t[t.Zero=48]="Zero",t[t.Nine=57]="Nine",t[t.Semi=59]="Semi",t[t.Lt=60]="Lt",t[t.Eq=61]="Eq",t[t.Gt=62]="Gt",t[t.Questionmark=63]="Questionmark",t[t.UpperA=65]="UpperA",t[t.LowerA=97]="LowerA",t[t.UpperF=70]="UpperF",t[t.LowerF=102]="LowerF",t[t.UpperZ=90]="UpperZ",t[t.LowerZ=122]="LowerZ",t[t.LowerX=120]="LowerX",t[t.OpeningSquareBracket=91]="OpeningSquareBracket"})(CharCodes||(CharCodes={}));var State;(function(t){t[t.Text=1]="Text",t[t.BeforeTagName=2]="BeforeTagName",t[t.InTagName=3]="InTagName",t[t.InSelfClosingTag=4]="InSelfClosingTag",t[t.BeforeClosingTagName=5]="BeforeClosingTagName",t[t.InClosingTagName=6]="InClosingTagName",t[t.AfterClosingTagName=7]="AfterClosingTagName",t[t.BeforeAttributeName=8]="BeforeAttributeName",t[t.InAttributeName=9]="InAttributeName",t[t.AfterAttributeName=10]="AfterAttributeName",t[t.BeforeAttributeValue=11]="BeforeAttributeValue",t[t.InAttributeValueDq=12]="InAttributeValueDq",t[t.InAttributeValueSq=13]="InAttributeValueSq",t[t.InAttributeValueNq=14]="InAttributeValueNq",t[t.BeforeDeclaration=15]="BeforeDeclaration",t[t.InDeclaration=16]="InDeclaration",t[t.InProcessingInstruction=17]="InProcessingInstruction",t[t.BeforeComment=18]="BeforeComment",t[t.CDATASequence=19]="CDATASequence",t[t.InSpecialComment=20]="InSpecialComment",t[t.InCommentLike=21]="InCommentLike",t[t.BeforeSpecialS=22]="BeforeSpecialS",t[t.SpecialStartSequence=23]="SpecialStartSequence",t[t.InSpecialTag=24]="InSpecialTag",t[t.BeforeEntity=25]="BeforeEntity",t[t.BeforeNumericEntity=26]="BeforeNumericEntity",t[t.InNamedEntity=27]="InNamedEntity",t[t.InNumericEntity=28]="InNumericEntity",t[t.InHexEntity=29]="InHexEntity"})(State||(State={}));function isWhitespace(t){return t===CharCodes.Space||t===CharCodes.NewLine||t===CharCodes.Tab||t===CharCodes.FormFeed||t===CharCodes.CarriageReturn}function isEndOfTagSection(t){return t===CharCodes.Slash||t===CharCodes.Gt||isWhitespace(t)}function isNumber(t){return t>=CharCodes.Zero&&t<=CharCodes.Nine}function isASCIIAlpha(t){return t>=CharCodes.LowerA&&t<=CharCodes.LowerZ||t>=CharCodes.UpperA&&t<=CharCodes.UpperZ}function isHexDigit(t){return t>=CharCodes.UpperA&&t<=CharCodes.UpperF||t>=CharCodes.LowerA&&t<=CharCodes.LowerF}var QuoteType;(function(t){t[t.NoValue=0]="NoValue",t[t.Unquoted=1]="Unquoted",t[t.Single=2]="Single",t[t.Double=3]="Double"})(QuoteType||(QuoteType={}));const Sequences={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])};class Tokenizer{constructor({xmlMode:e=!1,decodeEntities:n=!0},s){this.cbs=s,this.state=State.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=State.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=e,this.decodeEntities=n,this.entityTrie=e?xmlDecodeTree:htmlDecodeTree}reset(){this.state=State.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=State.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(e){this.offset+=this.buffer.length,this.buffer=e,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}getIndex(){return this.index}getSectionStart(){return this.sectionStart}stateText(e){e===CharCodes.Lt||!this.decodeEntities&&this.fastForwardTo(CharCodes.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=State.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&e===CharCodes.Amp&&(this.state=State.BeforeEntity)}stateSpecialStartSequence(e){const n=this.sequenceIndex===this.currentSequence.length;if(!(n?isEndOfTagSection(e):(e|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!n){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=State.InTagName,this.stateInTagName(e)}stateInSpecialTag(e){if(this.sequenceIndex===this.currentSequence.length){if(e===CharCodes.Gt||isWhitespace(e)){const n=this.index-this.currentSequence.length;if(this.sectionStart<n){const s=this.index;this.index=n,this.cbs.ontext(this.sectionStart,n),this.index=s}this.isSpecial=!1,this.sectionStart=n+2,this.stateInClosingTagName(e);return}this.sequenceIndex=0}(e|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===Sequences.TitleEnd?this.decodeEntities&&e===CharCodes.Amp&&(this.state=State.BeforeEntity):this.fastForwardTo(CharCodes.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(e===CharCodes.Lt)}stateCDATASequence(e){e===Sequences.Cdata[this.sequenceIndex]?++this.sequenceIndex===Sequences.Cdata.length&&(this.state=State.InCommentLike,this.currentSequence=Sequences.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=State.InDeclaration,this.stateInDeclaration(e))}fastForwardTo(e){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===e)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===Sequences.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=State.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(e){return this.xmlMode?!isEndOfTagSection(e):isASCIIAlpha(e)}startSpecial(e,n){this.isSpecial=!0,this.currentSequence=e,this.sequenceIndex=n,this.state=State.SpecialStartSequence}stateBeforeTagName(e){if(e===CharCodes.ExclamationMark)this.state=State.BeforeDeclaration,this.sectionStart=this.index+1;else if(e===CharCodes.Questionmark)this.state=State.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(e)){const n=e|32;this.sectionStart=this.index,!this.xmlMode&&n===Sequences.TitleEnd[2]?this.startSpecial(Sequences.TitleEnd,3):this.state=!this.xmlMode&&n===Sequences.ScriptEnd[2]?State.BeforeSpecialS:State.InTagName}else e===CharCodes.Slash?this.state=State.BeforeClosingTagName:(this.state=State.Text,this.stateText(e))}stateInTagName(e){isEndOfTagSection(e)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=State.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateBeforeClosingTagName(e){isWhitespace(e)||(e===CharCodes.Gt?this.state=State.Text:(this.state=this.isTagStartChar(e)?State.InClosingTagName:State.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(e){(e===CharCodes.Gt||isWhitespace(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=State.AfterClosingTagName,this.stateAfterClosingTagName(e))}stateAfterClosingTagName(e){(e===CharCodes.Gt||this.fastForwardTo(CharCodes.Gt))&&(this.state=State.Text,this.baseState=State.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(e){e===CharCodes.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=State.InSpecialTag,this.sequenceIndex=0):this.state=State.Text,this.baseState=this.state,this.sectionStart=this.index+1):e===CharCodes.Slash?this.state=State.InSelfClosingTag:isWhitespace(e)||(this.state=State.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(e){e===CharCodes.Gt?(this.cbs.onselfclosingtag(this.index),this.state=State.Text,this.baseState=State.Text,this.sectionStart=this.index+1,this.isSpecial=!1):isWhitespace(e)||(this.state=State.BeforeAttributeName,this.stateBeforeAttributeName(e))}stateInAttributeName(e){(e===CharCodes.Eq||isEndOfTagSection(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=State.AfterAttributeName,this.stateAfterAttributeName(e))}stateAfterAttributeName(e){e===CharCodes.Eq?this.state=State.BeforeAttributeValue:e===CharCodes.Slash||e===CharCodes.Gt?(this.cbs.onattribend(QuoteType.NoValue,this.index),this.state=State.BeforeAttributeName,this.stateBeforeAttributeName(e)):isWhitespace(e)||(this.cbs.onattribend(QuoteType.NoValue,this.index),this.state=State.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(e){e===CharCodes.DoubleQuote?(this.state=State.InAttributeValueDq,this.sectionStart=this.index+1):e===CharCodes.SingleQuote?(this.state=State.InAttributeValueSq,this.sectionStart=this.index+1):isWhitespace(e)||(this.sectionStart=this.index,this.state=State.InAttributeValueNq,this.stateInAttributeValueNoQuotes(e))}handleInAttributeValue(e,n){e===n||!this.decodeEntities&&this.fastForwardTo(n)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(n===CharCodes.DoubleQuote?QuoteType.Double:QuoteType.Single,this.index),this.state=State.BeforeAttributeName):this.decodeEntities&&e===CharCodes.Amp&&(this.baseState=this.state,this.state=State.BeforeEntity)}stateInAttributeValueDoubleQuotes(e){this.handleInAttributeValue(e,CharCodes.DoubleQuote)}stateInAttributeValueSingleQuotes(e){this.handleInAttributeValue(e,CharCodes.SingleQuote)}stateInAttributeValueNoQuotes(e){isWhitespace(e)||e===CharCodes.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(QuoteType.Unquoted,this.index),this.state=State.BeforeAttributeName,this.stateBeforeAttributeName(e)):this.decodeEntities&&e===CharCodes.Amp&&(this.baseState=this.state,this.state=State.BeforeEntity)}stateBeforeDeclaration(e){e===CharCodes.OpeningSquareBracket?(this.state=State.CDATASequence,this.sequenceIndex=0):this.state=e===CharCodes.Dash?State.BeforeComment:State.InDeclaration}stateInDeclaration(e){(e===CharCodes.Gt||this.fastForwardTo(CharCodes.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=State.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(e){(e===CharCodes.Gt||this.fastForwardTo(CharCodes.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=State.Text,this.sectionStart=this.index+1)}stateBeforeComment(e){e===CharCodes.Dash?(this.state=State.InCommentLike,this.currentSequence=Sequences.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=State.InDeclaration}stateInSpecialComment(e){(e===CharCodes.Gt||this.fastForwardTo(CharCodes.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=State.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(e){const n=e|32;n===Sequences.ScriptEnd[3]?this.startSpecial(Sequences.ScriptEnd,4):n===Sequences.StyleEnd[3]?this.startSpecial(Sequences.StyleEnd,4):(this.state=State.InTagName,this.stateInTagName(e))}stateBeforeEntity(e){this.entityExcess=1,this.entityResult=0,e===CharCodes.Number?this.state=State.BeforeNumericEntity:e===CharCodes.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=State.InNamedEntity,this.stateInNamedEntity(e))}stateInNamedEntity(e){if(this.entityExcess+=1,this.trieIndex=determineBranch(this.entityTrie,this.trieCurrent,this.trieIndex+1,e),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];const n=this.trieCurrent&BinTrieFlags.VALUE_LENGTH;if(n){const s=(n>>14)-1;if(!this.allowLegacyEntity()&&e!==CharCodes.Semi)this.trieIndex+=s;else{const r=this.index-this.entityExcess+1;r>this.sectionStart&&this.emitPartial(this.sectionStart,r),this.entityResult=this.trieIndex,this.trieIndex+=s,this.entityExcess=0,this.sectionStart=this.index+1,s===0&&this.emitNamedEntity()}}}emitNamedEntity(){if(this.state=this.baseState,this.entityResult!==0)switch((this.entityTrie[this.entityResult]&BinTrieFlags.VALUE_LENGTH)>>14){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}stateBeforeNumericEntity(e){(e|32)===CharCodes.LowerX?(this.entityExcess++,this.state=State.InHexEntity):(this.state=State.InNumericEntity,this.stateInNumericEntity(e))}emitNumericEntity(e){const n=this.index-this.entityExcess-1;n+2+ +(this.state===State.InHexEntity)!==this.index&&(n>this.sectionStart&&this.emitPartial(this.sectionStart,n),this.sectionStart=this.index+Number(e),this.emitCodePoint(replaceCodePoint(this.entityResult))),this.state=this.baseState}stateInNumericEntity(e){e===CharCodes.Semi?this.emitNumericEntity(!0):isNumber(e)?(this.entityResult=this.entityResult*10+(e-CharCodes.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}stateInHexEntity(e){e===CharCodes.Semi?this.emitNumericEntity(!0):isNumber(e)?(this.entityResult=this.entityResult*16+(e-CharCodes.Zero),this.entityExcess++):isHexDigit(e)?(this.entityResult=this.entityResult*16+((e|32)-CharCodes.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}allowLegacyEntity(){return!this.xmlMode&&(this.baseState===State.Text||this.baseState===State.InSpecialTag)}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===State.Text||this.state===State.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===State.InAttributeValueDq||this.state===State.InAttributeValueSq||this.state===State.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const e=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case State.Text:{this.stateText(e);break}case State.SpecialStartSequence:{this.stateSpecialStartSequence(e);break}case State.InSpecialTag:{this.stateInSpecialTag(e);break}case State.CDATASequence:{this.stateCDATASequence(e);break}case State.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(e);break}case State.InAttributeName:{this.stateInAttributeName(e);break}case State.InCommentLike:{this.stateInCommentLike(e);break}case State.InSpecialComment:{this.stateInSpecialComment(e);break}case State.BeforeAttributeName:{this.stateBeforeAttributeName(e);break}case State.InTagName:{this.stateInTagName(e);break}case State.InClosingTagName:{this.stateInClosingTagName(e);break}case State.BeforeTagName:{this.stateBeforeTagName(e);break}case State.AfterAttributeName:{this.stateAfterAttributeName(e);break}case State.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(e);break}case State.BeforeAttributeValue:{this.stateBeforeAttributeValue(e);break}case State.BeforeClosingTagName:{this.stateBeforeClosingTagName(e);break}case State.AfterClosingTagName:{this.stateAfterClosingTagName(e);break}case State.BeforeSpecialS:{this.stateBeforeSpecialS(e);break}case State.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(e);break}case State.InSelfClosingTag:{this.stateInSelfClosingTag(e);break}case State.InDeclaration:{this.stateInDeclaration(e);break}case State.BeforeDeclaration:{this.stateBeforeDeclaration(e);break}case State.BeforeComment:{this.stateBeforeComment(e);break}case State.InProcessingInstruction:{this.stateInProcessingInstruction(e);break}case State.InNamedEntity:{this.stateInNamedEntity(e);break}case State.BeforeEntity:{this.stateBeforeEntity(e);break}case State.InHexEntity:{this.stateInHexEntity(e);break}case State.InNumericEntity:{this.stateInNumericEntity(e);break}default:this.stateBeforeNumericEntity(e)}this.index++}this.cleanup()}finish(){this.state===State.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const e=this.buffer.length+this.offset;this.state===State.InCommentLike?this.currentSequence===Sequences.CdataEnd?this.cbs.oncdata(this.sectionStart,e,0):this.cbs.oncomment(this.sectionStart,e,0):this.state===State.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===State.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===State.InTagName||this.state===State.BeforeAttributeName||this.state===State.BeforeAttributeValue||this.state===State.AfterAttributeName||this.state===State.InAttributeName||this.state===State.InAttributeValueSq||this.state===State.InAttributeValueDq||this.state===State.InAttributeValueNq||this.state===State.InClosingTagName||this.cbs.ontext(this.sectionStart,e)}emitPartial(e,n){this.baseState!==State.Text&&this.baseState!==State.InSpecialTag?this.cbs.onattribdata(e,n):this.cbs.ontext(e,n)}emitCodePoint(e){this.baseState!==State.Text&&this.baseState!==State.InSpecialTag?this.cbs.onattribentity(e):this.cbs.ontextentity(e)}}const formTags=new Set(["input","option","optgroup","select","button","datalist","textarea"]),pTag=new Set(["p"]),tableSectionTags=new Set(["thead","tbody"]),ddtTags=new Set(["dd","dt"]),rtpTags=new Set(["rt","rp"]),openImpliesClose=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",pTag],["h1",pTag],["h2",pTag],["h3",pTag],["h4",pTag],["h5",pTag],["h6",pTag],["select",formTags],["input",formTags],["output",formTags],["button",formTags],["datalist",formTags],["textarea",formTags],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",ddtTags],["dt",ddtTags],["address",pTag],["article",pTag],["aside",pTag],["blockquote",pTag],["details",pTag],["div",pTag],["dl",pTag],["fieldset",pTag],["figcaption",pTag],["figure",pTag],["footer",pTag],["form",pTag],["header",pTag],["hr",pTag],["main",pTag],["nav",pTag],["ol",pTag],["pre",pTag],["section",pTag],["table",pTag],["ul",pTag],["rt",rtpTags],["rp",rtpTags],["tbody",tableSectionTags],["tfoot",tableSectionTags]]),voidElements$1=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),foreignContextElements=new Set(["math","svg"]),htmlIntegrationElements=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),reNameEnd=/\s|\//;class Parser{constructor(e,n={}){var s,r,i,a,c;this.options=n,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=e??{},this.lowerCaseTagNames=(s=n.lowerCaseTags)!==null&&s!==void 0?s:!n.xmlMode,this.lowerCaseAttributeNames=(r=n.lowerCaseAttributeNames)!==null&&r!==void 0?r:!n.xmlMode,this.tokenizer=new((i=n.Tokenizer)!==null&&i!==void 0?i:Tokenizer)(this.options,this),(c=(a=this.cbs).onparserinit)===null||c===void 0||c.call(a,this)}ontext(e,n){var s,r;const i=this.getSlice(e,n);this.endIndex=n-1,(r=(s=this.cbs).ontext)===null||r===void 0||r.call(s,i),this.startIndex=n}ontextentity(e){var n,s;const r=this.tokenizer.getSectionStart();this.endIndex=r-1,(s=(n=this.cbs).ontext)===null||s===void 0||s.call(n,fromCodePoint(e)),this.startIndex=r}isVoidElement(e){return!this.options.xmlMode&&voidElements$1.has(e)}onopentagname(e,n){this.endIndex=n;let s=this.getSlice(e,n);this.lowerCaseTagNames&&(s=s.toLowerCase()),this.emitOpenTag(s)}emitOpenTag(e){var n,s,r,i;this.openTagStart=this.startIndex,this.tagname=e;const a=!this.options.xmlMode&&openImpliesClose.get(e);if(a)for(;this.stack.length>0&&a.has(this.stack[this.stack.length-1]);){const c=this.stack.pop();(s=(n=this.cbs).onclosetag)===null||s===void 0||s.call(n,c,!0)}this.isVoidElement(e)||(this.stack.push(e),foreignContextElements.has(e)?this.foreignContext.push(!0):htmlIntegrationElements.has(e)&&this.foreignContext.push(!1)),(i=(r=this.cbs).onopentagname)===null||i===void 0||i.call(r,e),this.cbs.onopentag&&(this.attribs={})}endOpenTag(e){var n,s;this.startIndex=this.openTagStart,this.attribs&&((s=(n=this.cbs).onopentag)===null||s===void 0||s.call(n,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1}onclosetag(e,n){var s,r,i,a,c,o;this.endIndex=n;let m=this.getSlice(e,n);if(this.lowerCaseTagNames&&(m=m.toLowerCase()),(foreignContextElements.has(m)||htmlIntegrationElements.has(m))&&this.foreignContext.pop(),this.isVoidElement(m))!this.options.xmlMode&&m==="br"&&((r=(s=this.cbs).onopentagname)===null||r===void 0||r.call(s,"br"),(a=(i=this.cbs).onopentag)===null||a===void 0||a.call(i,"br",{},!0),(o=(c=this.cbs).onclosetag)===null||o===void 0||o.call(c,"br",!1));else{const h=this.stack.lastIndexOf(m);if(h!==-1)if(this.cbs.onclosetag){let A=this.stack.length-h;for(;A--;)this.cbs.onclosetag(this.stack.pop(),A!==0)}else this.stack.length=h;else!this.options.xmlMode&&m==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=n+1}onselfclosingtag(e){this.endIndex=e,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)}closeCurrentTag(e){var n,s;const r=this.tagname;this.endOpenTag(e),this.stack[this.stack.length-1]===r&&((s=(n=this.cbs).onclosetag)===null||s===void 0||s.call(n,r,!e),this.stack.pop())}onattribname(e,n){this.startIndex=e;const s=this.getSlice(e,n);this.attribname=this.lowerCaseAttributeNames?s.toLowerCase():s}onattribdata(e,n){this.attribvalue+=this.getSlice(e,n)}onattribentity(e){this.attribvalue+=fromCodePoint(e)}onattribend(e,n){var s,r;this.endIndex=n,(r=(s=this.cbs).onattribute)===null||r===void 0||r.call(s,this.attribname,this.attribvalue,e===QuoteType.Double?'"':e===QuoteType.Single?"'":e===QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(e){const n=e.search(reNameEnd);let s=n<0?e:e.substr(0,n);return this.lowerCaseTagNames&&(s=s.toLowerCase()),s}ondeclaration(e,n){this.endIndex=n;const s=this.getSlice(e,n);if(this.cbs.onprocessinginstruction){const r=this.getInstructionName(s);this.cbs.onprocessinginstruction(`!${r}`,`!${s}`)}this.startIndex=n+1}onprocessinginstruction(e,n){this.endIndex=n;const s=this.getSlice(e,n);if(this.cbs.onprocessinginstruction){const r=this.getInstructionName(s);this.cbs.onprocessinginstruction(`?${r}`,`?${s}`)}this.startIndex=n+1}oncomment(e,n,s){var r,i,a,c;this.endIndex=n,(i=(r=this.cbs).oncomment)===null||i===void 0||i.call(r,this.getSlice(e,n-s)),(c=(a=this.cbs).oncommentend)===null||c===void 0||c.call(a),this.startIndex=n+1}oncdata(e,n,s){var r,i,a,c,o,m,h,A,y,C;this.endIndex=n;const D=this.getSlice(e,n-s);this.options.xmlMode||this.options.recognizeCDATA?((i=(r=this.cbs).oncdatastart)===null||i===void 0||i.call(r),(c=(a=this.cbs).ontext)===null||c===void 0||c.call(a,D),(m=(o=this.cbs).oncdataend)===null||m===void 0||m.call(o)):((A=(h=this.cbs).oncomment)===null||A===void 0||A.call(h,`[CDATA[${D}]]`),(C=(y=this.cbs).oncommentend)===null||C===void 0||C.call(y)),this.startIndex=n+1}onend(){var e,n;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let s=this.stack.length;s>0;this.cbs.onclosetag(this.stack[--s],!0));}(n=(e=this.cbs).onend)===null||n===void 0||n.call(e)}reset(){var e,n,s,r;(n=(e=this.cbs).onreset)===null||n===void 0||n.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(r=(s=this.cbs).onparserinit)===null||r===void 0||r.call(s,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(e){this.reset(),this.end(e)}getSlice(e,n){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let s=this.buffers[0].slice(e-this.bufferOffset,n-this.bufferOffset);for(;n-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),s+=this.buffers[0].slice(0,n-this.bufferOffset);return s}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(e){var n,s;if(this.ended){(s=(n=this.cbs).onerror)===null||s===void 0||s.call(n,new Error(".write() after done!"));return}this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++)}end(e){var n,s;if(this.ended){(s=(n=this.cbs).onerror)===null||s===void 0||s.call(n,new Error(".end() after done!"));return}e&&this.write(e),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(e){this.write(e)}done(e){this.end(e)}}function parseDocument(t,e){const n=new DomHandler(void 0,e);return new Parser(n,e).end(t),n.root}const parse=getParse((t,e,n,s)=>e.xmlMode||e._useHtmlParser2?parseDocument(t,e):parseWithParse5(t,e,n,s)),load=getLoad(parse,(t,e)=>e.xmlMode||e._useHtmlParser2?render$1(t,e):renderWithParse5(t));load([]);function extend(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])}return t}function repeat(t,e){return Array(e+1).join(t)}function trimLeadingNewlines(t){return t.replace(/^\n*/,"")}function trimTrailingNewlines(t){for(var e=t.length;e>0&&t[e-1]===`
`;)e--;return t.substring(0,e)}var blockElements=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function isBlock(t){return is(t,blockElements)}var voidElements=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function isVoid(t){return is(t,voidElements)}function hasVoid(t){return has(t,voidElements)}var meaningfulWhenBlankElements=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function isMeaningfulWhenBlank(t){return is(t,meaningfulWhenBlankElements)}function hasMeaningfulWhenBlank(t){return has(t,meaningfulWhenBlankElements)}function is(t,e){return e.indexOf(t.nodeName)>=0}function has(t,e){return t.getElementsByTagName&&e.some(function(n){return t.getElementsByTagName(n).length})}var rules={};rules.paragraph={filter:"p",replacement:function(t){return`

`+t+`

`}},rules.lineBreak={filter:"br",replacement:function(t,e,n){return n.br+`
`}},rules.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(t,e,n){var s=Number(e.nodeName.charAt(1));if(n.headingStyle==="setext"&&s<3){var r=repeat(s===1?"=":"-",t.length);return`

`+t+`
`+r+`

`}else return`

`+repeat("#",s)+" "+t+`

`}},rules.blockquote={filter:"blockquote",replacement:function(t){return t=t.replace(/^\n+|\n+$/g,""),t=t.replace(/^/gm,"> "),`

`+t+`

`}},rules.list={filter:["ul","ol"],replacement:function(t,e){var n=e.parentNode;return n.nodeName==="LI"&&n.lastElementChild===e?`
`+t:`

`+t+`

`}},rules.listItem={filter:"li",replacement:function(t,e,n){t=t.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var s=n.bulletListMarker+"   ",r=e.parentNode;if(r.nodeName==="OL"){var i=r.getAttribute("start"),a=Array.prototype.indexOf.call(r.children,e);s=(i?Number(i)+a:a+1)+".  "}return s+t+(e.nextSibling&&!/\n$/.test(t)?`
`:"")}},rules.indentedCodeBlock={filter:function(t,e){return e.codeBlockStyle==="indented"&&t.nodeName==="PRE"&&t.firstChild&&t.firstChild.nodeName==="CODE"},replacement:function(t,e,n){return`

    `+e.firstChild.textContent.replace(/\n/g,`
    `)+`

`}},rules.fencedCodeBlock={filter:function(t,e){return e.codeBlockStyle==="fenced"&&t.nodeName==="PRE"&&t.firstChild&&t.firstChild.nodeName==="CODE"},replacement:function(t,e,n){for(var s=e.firstChild.getAttribute("class")||"",r=(s.match(/language-(\S+)/)||[null,""])[1],i=e.firstChild.textContent,a=n.fence.charAt(0),c=3,o=new RegExp("^"+a+"{3,}","gm"),m;m=o.exec(i);)m[0].length>=c&&(c=m[0].length+1);var h=repeat(a,c);return`

`+h+r+`
`+i.replace(/\n$/,"")+`
`+h+`

`}},rules.horizontalRule={filter:"hr",replacement:function(t,e,n){return`

`+n.hr+`

`}},rules.inlineLink={filter:function(t,e){return e.linkStyle==="inlined"&&t.nodeName==="A"&&t.getAttribute("href")},replacement:function(t,e){var n=e.getAttribute("href"),s=cleanAttribute(e.getAttribute("title"));return s&&(s=' "'+s+'"'),"["+t+"]("+n+s+")"}},rules.referenceLink={filter:function(t,e){return e.linkStyle==="referenced"&&t.nodeName==="A"&&t.getAttribute("href")},replacement:function(t,e,n){var s=e.getAttribute("href"),r=cleanAttribute(e.getAttribute("title"));r&&(r=' "'+r+'"');var i,a;switch(n.linkReferenceStyle){case"collapsed":i="["+t+"][]",a="["+t+"]: "+s+r;break;case"shortcut":i="["+t+"]",a="["+t+"]: "+s+r;break;default:var c=this.references.length+1;i="["+t+"]["+c+"]",a="["+c+"]: "+s+r}return this.references.push(a),i},references:[],append:function(t){var e="";return this.references.length&&(e=`

`+this.references.join(`
`)+`

`,this.references=[]),e}},rules.emphasis={filter:["em","i"],replacement:function(t,e,n){return t.trim()?n.emDelimiter+t+n.emDelimiter:""}},rules.strong={filter:["strong","b"],replacement:function(t,e,n){return t.trim()?n.strongDelimiter+t+n.strongDelimiter:""}},rules.code={filter:function(t){var e=t.previousSibling||t.nextSibling,n=t.parentNode.nodeName==="PRE"&&!e;return t.nodeName==="CODE"&&!n},replacement:function(t){if(!t)return"";t=t.replace(/\r?\n|\r/g," ");for(var e=/^`|^ .*?[^ ].* $|`$/.test(t)?" ":"",n="`",s=t.match(/`+/gm)||[];s.indexOf(n)!==-1;)n=n+"`";return n+e+t+e+n}},rules.image={filter:"img",replacement:function(t,e){var n=cleanAttribute(e.getAttribute("alt")),s=e.getAttribute("src")||"",r=cleanAttribute(e.getAttribute("title")),i=r?' "'+r+'"':"";return s?"!["+n+"]("+s+i+")":""}};function cleanAttribute(t){return t?t.replace(/(\n+\s*)+/g,`
`):""}function Rules(t){this.options=t,this._keep=[],this._remove=[],this.blankRule={replacement:t.blankReplacement},this.keepReplacement=t.keepReplacement,this.defaultRule={replacement:t.defaultReplacement},this.array=[];for(var e in t.rules)this.array.push(t.rules[e])}Rules.prototype={add:function(t,e){this.array.unshift(e)},keep:function(t){this._keep.unshift({filter:t,replacement:this.keepReplacement})},remove:function(t){this._remove.unshift({filter:t,replacement:function(){return""}})},forNode:function(t){if(t.isBlank)return this.blankRule;var e;return(e=findRule(this.array,t,this.options))||(e=findRule(this._keep,t,this.options))||(e=findRule(this._remove,t,this.options))?e:this.defaultRule},forEach:function(t){for(var e=0;e<this.array.length;e++)t(this.array[e],e)}};function findRule(t,e,n){for(var s=0;s<t.length;s++){var r=t[s];if(filterValue(r,e,n))return r}}function filterValue(t,e,n){var s=t.filter;if(typeof s=="string"){if(s===e.nodeName.toLowerCase())return!0}else if(Array.isArray(s)){if(s.indexOf(e.nodeName.toLowerCase())>-1)return!0}else if(typeof s=="function"){if(s.call(t,e,n))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function collapseWhitespace(t){var e=t.element,n=t.isBlock,s=t.isVoid,r=t.isPre||function(A){return A.nodeName==="PRE"};if(!(!e.firstChild||r(e))){for(var i=null,a=!1,c=null,o=next(c,e,r);o!==e;){if(o.nodeType===3||o.nodeType===4){var m=o.data.replace(/[ \r\n\t]+/g," ");if((!i||/ $/.test(i.data))&&!a&&m[0]===" "&&(m=m.substr(1)),!m){o=remove(o);continue}o.data=m,i=o}else if(o.nodeType===1)n(o)||o.nodeName==="BR"?(i&&(i.data=i.data.replace(/ $/,"")),i=null,a=!1):s(o)||r(o)?(i=null,a=!0):i&&(a=!1);else{o=remove(o);continue}var h=next(c,o,r);c=o,o=h}i&&(i.data=i.data.replace(/ $/,""),i.data||remove(i))}}function remove(t){var e=t.nextSibling||t.parentNode;return t.parentNode.removeChild(t),e}function next(t,e,n){return t&&t.parentNode===e||n(e)?e.nextSibling||e.parentNode:e.firstChild||e.nextSibling||e.parentNode}var root=typeof window<"u"?window:{};function canParseHTMLNatively(){var t=root.DOMParser,e=!1;try{new t().parseFromString("","text/html")&&(e=!0)}catch{}return e}function createHTMLParser(){var t=function(){};return shouldUseActiveX()?t.prototype.parseFromString=function(e){var n=new window.ActiveXObject("htmlfile");return n.designMode="on",n.open(),n.write(e),n.close(),n}:t.prototype.parseFromString=function(e){var n=document.implementation.createHTMLDocument("");return n.open(),n.write(e),n.close(),n},t}function shouldUseActiveX(){var t=!1;try{document.implementation.createHTMLDocument("").open()}catch{root.ActiveXObject&&(t=!0)}return t}var HTMLParser=canParseHTMLNatively()?root.DOMParser:createHTMLParser();function RootNode(t,e){var n;if(typeof t=="string"){var s=htmlParser().parseFromString('<x-turndown id="turndown-root">'+t+"</x-turndown>","text/html");n=s.getElementById("turndown-root")}else n=t.cloneNode(!0);return collapseWhitespace({element:n,isBlock,isVoid,isPre:e.preformattedCode?isPreOrCode:null}),n}var _htmlParser;function htmlParser(){return _htmlParser=_htmlParser||new HTMLParser,_htmlParser}function isPreOrCode(t){return t.nodeName==="PRE"||t.nodeName==="CODE"}function Node(t,e){return t.isBlock=isBlock(t),t.isCode=t.nodeName==="CODE"||t.parentNode.isCode,t.isBlank=isBlank(t),t.flankingWhitespace=flankingWhitespace(t,e),t}function isBlank(t){return!isVoid(t)&&!isMeaningfulWhenBlank(t)&&/^\s*$/i.test(t.textContent)&&!hasVoid(t)&&!hasMeaningfulWhenBlank(t)}function flankingWhitespace(t,e){if(t.isBlock||e.preformattedCode&&t.isCode)return{leading:"",trailing:""};var n=edgeWhitespace(t.textContent);return n.leadingAscii&&isFlankedByWhitespace("left",t,e)&&(n.leading=n.leadingNonAscii),n.trailingAscii&&isFlankedByWhitespace("right",t,e)&&(n.trailing=n.trailingNonAscii),{leading:n.leading,trailing:n.trailing}}function edgeWhitespace(t){var e=t.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:e[1],leadingAscii:e[2],leadingNonAscii:e[3],trailing:e[4],trailingNonAscii:e[5],trailingAscii:e[6]}}function isFlankedByWhitespace(t,e,n){var s,r,i;return t==="left"?(s=e.previousSibling,r=/ $/):(s=e.nextSibling,r=/^ /),s&&(s.nodeType===3?i=r.test(s.nodeValue):n.preformattedCode&&s.nodeName==="CODE"?i=!1:s.nodeType===1&&!isBlock(s)&&(i=r.test(s.textContent))),i}var reduce=Array.prototype.reduce,escapes=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function TurndownService(t){if(!(this instanceof TurndownService))return new TurndownService(t);var e={rules,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(n,s){return s.isBlock?`

`:""},keepReplacement:function(n,s){return s.isBlock?`

`+s.outerHTML+`

`:s.outerHTML},defaultReplacement:function(n,s){return s.isBlock?`

`+n+`

`:n}};this.options=extend({},e,t),this.rules=new Rules(this.options)}TurndownService.prototype={turndown:function(t){if(!canConvert(t))throw new TypeError(t+" is not a string, or an element/document/fragment node.");if(t==="")return"";var e=process$1.call(this,new RootNode(t,this.options));return postProcess.call(this,e)},use:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.use(t[e]);else if(typeof t=="function")t(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(t,e){return this.rules.add(t,e),this},keep:function(t){return this.rules.keep(t),this},remove:function(t){return this.rules.remove(t),this},escape:function(t){return escapes.reduce(function(e,n){return e.replace(n[0],n[1])},t)}};function process$1(t){var e=this;return reduce.call(t.childNodes,function(n,s){s=new Node(s,e.options);var r="";return s.nodeType===3?r=s.isCode?s.nodeValue:e.escape(s.nodeValue):s.nodeType===1&&(r=replacementForNode.call(e,s)),join(n,r)},"")}function postProcess(t){var e=this;return this.rules.forEach(function(n){typeof n.append=="function"&&(t=join(t,n.append(e.options)))}),t.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function replacementForNode(t){var e=this.rules.forNode(t),n=process$1.call(this,t),s=t.flankingWhitespace;return(s.leading||s.trailing)&&(n=n.trim()),s.leading+e.replacement(n,t,this.options)+s.trailing}function join(t,e){var n=trimTrailingNewlines(t),s=trimLeadingNewlines(e),r=Math.max(t.length-n.length,e.length-s.length),i=`

`.substring(0,r);return n+i+s}function canConvert(t){return t!=null&&(typeof t=="string"||t.nodeType&&(t.nodeType===1||t.nodeType===9||t.nodeType===11))}var Readability={exports:{}};(function(t){function e(n,s){if(s&&s.documentElement)n=s,s=arguments[2];else if(!n||!n.documentElement)throw new Error("First argument to Readability constructor should be a document object.");if(s=s||{},this._doc=n,this._docJSDOMParser=this._doc.firstChild.__JSDOMParser__,this._articleTitle=null,this._articleByline=null,this._articleDir=null,this._articleSiteName=null,this._attempts=[],this._debug=!!s.debug,this._maxElemsToParse=s.maxElemsToParse||this.DEFAULT_MAX_ELEMS_TO_PARSE,this._nbTopCandidates=s.nbTopCandidates||this.DEFAULT_N_TOP_CANDIDATES,this._charThreshold=s.charThreshold||this.DEFAULT_CHAR_THRESHOLD,this._classesToPreserve=this.CLASSES_TO_PRESERVE.concat(s.classesToPreserve||[]),this._keepClasses=!!s.keepClasses,this._serializer=s.serializer||function(r){return r.innerHTML},this._disableJSONLD=!!s.disableJSONLD,this._allowedVideoRegex=s.allowedVideoRegex||this.REGEXPS.videos,this._flags=this.FLAG_STRIP_UNLIKELYS|this.FLAG_WEIGHT_CLASSES|this.FLAG_CLEAN_CONDITIONALLY,this._debug){let r=function(i){if(i.nodeType==i.TEXT_NODE)return`${i.nodeName} ("${i.textContent}")`;let a=Array.from(i.attributes||[],function(c){return`${c.name}="${c.value}"`}).join(" ");return`<${i.localName} ${a}>`};this.log=function(){if(typeof console<"u"){let a=Array.from(arguments,c=>c&&c.nodeType==this.ELEMENT_NODE?r(c):c);a.unshift("Reader: (Readability)"),console.log.apply(console,a)}else if(typeof dump<"u"){var i=Array.prototype.map.call(arguments,function(a){return a&&a.nodeName?r(a):a}).join(" ");dump("Reader: (Readability) "+i+`
`)}}}else this.log=function(){}}e.prototype={FLAG_STRIP_UNLIKELYS:1,FLAG_WEIGHT_CLASSES:2,FLAG_CLEAN_CONDITIONALLY:4,ELEMENT_NODE:1,TEXT_NODE:3,DEFAULT_MAX_ELEMS_TO_PARSE:0,DEFAULT_N_TOP_CANDIDATES:5,DEFAULT_TAGS_TO_SCORE:"section,h2,h3,h4,h5,h6,p,td,pre".toUpperCase().split(","),DEFAULT_CHAR_THRESHOLD:500,REGEXPS:{unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i,positive:/article|body|content|entry|hentry|h-entry|main|page|pagination|post|text|blog|story/i,negative:/-ad-|hidden|^hid$| hid$| hid |^hid |banner|combx|comment|com-|contact|foot|footer|footnote|gdpr|masthead|media|meta|outbrain|promo|related|scroll|share|shoutbox|sidebar|skyscraper|sponsor|shopping|tags|tool|widget/i,extraneous:/print|archive|comment|discuss|e[\-]?mail|share|reply|all|login|sign|single|utility/i,byline:/byline|author|dateline|writtenby|p-author/i,replaceFonts:/<(\/?)font[^>]*>/gi,normalize:/\s{2,}/g,videos:/\/\/(www\.)?((dailymotion|youtube|youtube-nocookie|player\.vimeo|v\.qq)\.com|(archive|upload\.wikimedia)\.org|player\.twitch\.tv)/i,shareElements:/(\b|_)(share|sharedaddy)(\b|_)/i,nextLink:/(next|weiter|continue|>([^\|]|$)|([^\|]|$))/i,prevLink:/(prev|earl|old|new|<|)/i,tokenize:/\W+/g,whitespace:/^\s*$/,hasContent:/\S$/,hashUrl:/^#.+/,srcsetUrl:/(\S+)(\s+[\d.]+[xw])?(\s*(?:,|$))/g,b64DataUrl:/^data:\s*([^\s;,]+)\s*;\s*base64\s*,/i,commas:/\u002C|\u060C|\uFE50|\uFE10|\uFE11|\u2E41|\u2E34|\u2E32|\uFF0C/g,jsonLdArticleTypes:/^Article|AdvertiserContentArticle|NewsArticle|AnalysisNewsArticle|AskPublicNewsArticle|BackgroundNewsArticle|OpinionNewsArticle|ReportageNewsArticle|ReviewNewsArticle|Report|SatiricalArticle|ScholarlyArticle|MedicalScholarlyArticle|SocialMediaPosting|BlogPosting|LiveBlogPosting|DiscussionForumPosting|TechArticle|APIReference$/},UNLIKELY_ROLES:["menu","menubar","complementary","navigation","alert","alertdialog","dialog"],DIV_TO_P_ELEMS:new Set(["BLOCKQUOTE","DL","DIV","IMG","OL","P","PRE","TABLE","UL"]),ALTER_TO_DIV_EXCEPTIONS:["DIV","ARTICLE","SECTION","P"],PRESENTATIONAL_ATTRIBUTES:["align","background","bgcolor","border","cellpadding","cellspacing","frame","hspace","rules","style","valign","vspace"],DEPRECATED_SIZE_ATTRIBUTE_ELEMS:["TABLE","TH","TD","HR","PRE"],PHRASING_ELEMS:["ABBR","AUDIO","B","BDO","BR","BUTTON","CITE","CODE","DATA","DATALIST","DFN","EM","EMBED","I","IMG","INPUT","KBD","LABEL","MARK","MATH","METER","NOSCRIPT","OBJECT","OUTPUT","PROGRESS","Q","RUBY","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRONG","SUB","SUP","TEXTAREA","TIME","VAR","WBR"],CLASSES_TO_PRESERVE:["page"],HTML_ESCAPE_MAP:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"},_postProcessContent:function(n){this._fixRelativeUris(n),this._simplifyNestedElements(n),this._keepClasses||this._cleanClasses(n)},_removeNodes:function(n,s){if(this._docJSDOMParser&&n._isLiveNodeList)throw new Error("Do not pass live node lists to _removeNodes");for(var r=n.length-1;r>=0;r--){var i=n[r],a=i.parentNode;a&&(!s||s.call(this,i,r,n))&&a.removeChild(i)}},_replaceNodeTags:function(n,s){if(this._docJSDOMParser&&n._isLiveNodeList)throw new Error("Do not pass live node lists to _replaceNodeTags");for(const r of n)this._setNodeTag(r,s)},_forEachNode:function(n,s){Array.prototype.forEach.call(n,s,this)},_findNode:function(n,s){return Array.prototype.find.call(n,s,this)},_someNode:function(n,s){return Array.prototype.some.call(n,s,this)},_everyNode:function(n,s){return Array.prototype.every.call(n,s,this)},_concatNodeLists:function(){var n=Array.prototype.slice,s=n.call(arguments),r=s.map(function(i){return n.call(i)});return Array.prototype.concat.apply([],r)},_getAllNodesWithTag:function(n,s){return n.querySelectorAll?n.querySelectorAll(s.join(",")):[].concat.apply([],s.map(function(r){var i=n.getElementsByTagName(r);return Array.isArray(i)?i:Array.from(i)}))},_cleanClasses:function(n){var s=this._classesToPreserve,r=(n.getAttribute("class")||"").split(/\s+/).filter(function(i){return s.indexOf(i)!=-1}).join(" ");for(r?n.setAttribute("class",r):n.removeAttribute("class"),n=n.firstElementChild;n;n=n.nextElementSibling)this._cleanClasses(n)},_fixRelativeUris:function(n){var s=this._doc.baseURI,r=this._doc.documentURI;function i(o){if(s==r&&o.charAt(0)=="#")return o;try{return new URL(o,s).href}catch{}return o}var a=this._getAllNodesWithTag(n,["a"]);this._forEachNode(a,function(o){var m=o.getAttribute("href");if(m)if(m.indexOf("javascript:")===0)if(o.childNodes.length===1&&o.childNodes[0].nodeType===this.TEXT_NODE){var h=this._doc.createTextNode(o.textContent);o.parentNode.replaceChild(h,o)}else{for(var A=this._doc.createElement("span");o.firstChild;)A.appendChild(o.firstChild);o.parentNode.replaceChild(A,o)}else o.setAttribute("href",i(m))});var c=this._getAllNodesWithTag(n,["img","picture","figure","video","audio","source"]);this._forEachNode(c,function(o){var m=o.getAttribute("src"),h=o.getAttribute("poster"),A=o.getAttribute("srcset");if(m&&o.setAttribute("src",i(m)),h&&o.setAttribute("poster",i(h)),A){var y=A.replace(this.REGEXPS.srcsetUrl,function(C,D,b,S){return i(D)+(b||"")+S});o.setAttribute("srcset",y)}})},_simplifyNestedElements:function(n){for(var s=n;s;){if(s.parentNode&&["DIV","SECTION"].includes(s.tagName)&&!(s.id&&s.id.startsWith("readability"))){if(this._isElementWithoutContent(s)){s=this._removeAndGetNext(s);continue}else if(this._hasSingleTagInsideElement(s,"DIV")||this._hasSingleTagInsideElement(s,"SECTION")){for(var r=s.children[0],i=0;i<s.attributes.length;i++)r.setAttribute(s.attributes[i].name,s.attributes[i].value);s.parentNode.replaceChild(r,s),s=r;continue}}s=this._getNextNode(s)}},_getArticleTitle:function(){var n=this._doc,s="",r="";try{s=r=n.title.trim(),typeof s!="string"&&(s=r=this._getInnerText(n.getElementsByTagName("title")[0]))}catch{}var i=!1;function a(y){return y.split(/\s+/).length}if(/ [\|\-\\\/>] /.test(s))i=/ [\\\/>] /.test(s),s=r.replace(/(.*)[\|\-\\\/>] .*/gi,"$1"),a(s)<3&&(s=r.replace(/[^\|\-\\\/>]*[\|\-\\\/>](.*)/gi,"$1"));else if(s.indexOf(": ")!==-1){var c=this._concatNodeLists(n.getElementsByTagName("h1"),n.getElementsByTagName("h2")),o=s.trim(),m=this._someNode(c,function(y){return y.textContent.trim()===o});m||(s=r.substring(r.lastIndexOf(":")+1),a(s)<3?s=r.substring(r.indexOf(":")+1):a(r.substr(0,r.indexOf(":")))>5&&(s=r))}else if(s.length>150||s.length<15){var h=n.getElementsByTagName("h1");h.length===1&&(s=this._getInnerText(h[0]))}s=s.trim().replace(this.REGEXPS.normalize," ");var A=a(s);return A<=4&&(!i||A!=a(r.replace(/[\|\-\\\/>]+/g,""))-1)&&(s=r),s},_prepDocument:function(){var n=this._doc;this._removeNodes(this._getAllNodesWithTag(n,["style"])),n.body&&this._replaceBrs(n.body),this._replaceNodeTags(this._getAllNodesWithTag(n,["font"]),"SPAN")},_nextNode:function(n){for(var s=n;s&&s.nodeType!=this.ELEMENT_NODE&&this.REGEXPS.whitespace.test(s.textContent);)s=s.nextSibling;return s},_replaceBrs:function(n){this._forEachNode(this._getAllNodesWithTag(n,["br"]),function(s){for(var r=s.nextSibling,i=!1;(r=this._nextNode(r))&&r.tagName=="BR";){i=!0;var a=r.nextSibling;r.parentNode.removeChild(r),r=a}if(i){var c=this._doc.createElement("p");for(s.parentNode.replaceChild(c,s),r=c.nextSibling;r;){if(r.tagName=="BR"){var o=this._nextNode(r.nextSibling);if(o&&o.tagName=="BR")break}if(!this._isPhrasingContent(r))break;var m=r.nextSibling;c.appendChild(r),r=m}for(;c.lastChild&&this._isWhitespace(c.lastChild);)c.removeChild(c.lastChild);c.parentNode.tagName==="P"&&this._setNodeTag(c.parentNode,"DIV")}})},_setNodeTag:function(n,s){if(this.log("_setNodeTag",n,s),this._docJSDOMParser)return n.localName=s.toLowerCase(),n.tagName=s.toUpperCase(),n;for(var r=n.ownerDocument.createElement(s);n.firstChild;)r.appendChild(n.firstChild);n.parentNode.replaceChild(r,n),n.readability&&(r.readability=n.readability);for(var i=0;i<n.attributes.length;i++)try{r.setAttribute(n.attributes[i].name,n.attributes[i].value)}catch{}return r},_prepArticle:function(n){this._cleanStyles(n),this._markDataTables(n),this._fixLazyImages(n),this._cleanConditionally(n,"form"),this._cleanConditionally(n,"fieldset"),this._clean(n,"object"),this._clean(n,"embed"),this._clean(n,"footer"),this._clean(n,"link"),this._clean(n,"aside");var s=this.DEFAULT_CHAR_THRESHOLD;this._forEachNode(n.children,function(r){this._cleanMatchedNodes(r,function(i,a){return this.REGEXPS.shareElements.test(a)&&i.textContent.length<s})}),this._clean(n,"iframe"),this._clean(n,"input"),this._clean(n,"textarea"),this._clean(n,"select"),this._clean(n,"button"),this._cleanHeaders(n),this._cleanConditionally(n,"table"),this._cleanConditionally(n,"ul"),this._cleanConditionally(n,"div"),this._replaceNodeTags(this._getAllNodesWithTag(n,["h1"]),"h2"),this._removeNodes(this._getAllNodesWithTag(n,["p"]),function(r){var i=r.getElementsByTagName("img").length,a=r.getElementsByTagName("embed").length,c=r.getElementsByTagName("object").length,o=r.getElementsByTagName("iframe").length,m=i+a+c+o;return m===0&&!this._getInnerText(r,!1)}),this._forEachNode(this._getAllNodesWithTag(n,["br"]),function(r){var i=this._nextNode(r.nextSibling);i&&i.tagName=="P"&&r.parentNode.removeChild(r)}),this._forEachNode(this._getAllNodesWithTag(n,["table"]),function(r){var i=this._hasSingleTagInsideElement(r,"TBODY")?r.firstElementChild:r;if(this._hasSingleTagInsideElement(i,"TR")){var a=i.firstElementChild;if(this._hasSingleTagInsideElement(a,"TD")){var c=a.firstElementChild;c=this._setNodeTag(c,this._everyNode(c.childNodes,this._isPhrasingContent)?"P":"DIV"),r.parentNode.replaceChild(c,r)}}})},_initializeNode:function(n){switch(n.readability={contentScore:0},n.tagName){case"DIV":n.readability.contentScore+=5;break;case"PRE":case"TD":case"BLOCKQUOTE":n.readability.contentScore+=3;break;case"ADDRESS":case"OL":case"UL":case"DL":case"DD":case"DT":case"LI":case"FORM":n.readability.contentScore-=3;break;case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"TH":n.readability.contentScore-=5;break}n.readability.contentScore+=this._getClassWeight(n)},_removeAndGetNext:function(n){var s=this._getNextNode(n,!0);return n.parentNode.removeChild(n),s},_getNextNode:function(n,s){if(!s&&n.firstElementChild)return n.firstElementChild;if(n.nextElementSibling)return n.nextElementSibling;do n=n.parentNode;while(n&&!n.nextElementSibling);return n&&n.nextElementSibling},_textSimilarity:function(n,s){var r=n.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean),i=s.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean);if(!r.length||!i.length)return 0;var a=i.filter(o=>!r.includes(o)),c=a.join(" ").length/i.join(" ").length;return 1-c},_checkByline:function(n,s){if(this._articleByline)return!1;if(n.getAttribute!==void 0)var r=n.getAttribute("rel"),i=n.getAttribute("itemprop");return(r==="author"||i&&i.indexOf("author")!==-1||this.REGEXPS.byline.test(s))&&this._isValidByline(n.textContent)?(this._articleByline=n.textContent.trim(),!0):!1},_getNodeAncestors:function(n,s){s=s||0;for(var r=0,i=[];n.parentNode&&(i.push(n.parentNode),!(s&&++r===s));)n=n.parentNode;return i},_grabArticle:function(n){this.log("**** grabArticle ****");var s=this._doc,r=n!==null;if(n=n||this._doc.body,!n)return this.log("No body found in document. Abort."),null;for(var i=n.innerHTML;;){this.log("Starting grabArticle loop");var a=this._flagIsActive(this.FLAG_STRIP_UNLIKELYS),c=[],o=this._doc.documentElement;let nt=!0;for(;o;){o.tagName==="HTML"&&(this._articleLang=o.getAttribute("lang"));var m=o.className+" "+o.id;if(!this._isProbablyVisible(o)){this.log("Removing hidden node - "+m),o=this._removeAndGetNext(o);continue}if(o.getAttribute("aria-modal")=="true"&&o.getAttribute("role")=="dialog"){o=this._removeAndGetNext(o);continue}if(this._checkByline(o,m)){o=this._removeAndGetNext(o);continue}if(nt&&this._headerDuplicatesTitle(o)){this.log("Removing header: ",o.textContent.trim(),this._articleTitle.trim()),nt=!1,o=this._removeAndGetNext(o);continue}if(a){if(this.REGEXPS.unlikelyCandidates.test(m)&&!this.REGEXPS.okMaybeItsACandidate.test(m)&&!this._hasAncestorTag(o,"table")&&!this._hasAncestorTag(o,"code")&&o.tagName!=="BODY"&&o.tagName!=="A"){this.log("Removing unlikely candidate - "+m),o=this._removeAndGetNext(o);continue}if(this.UNLIKELY_ROLES.includes(o.getAttribute("role"))){this.log("Removing content with role "+o.getAttribute("role")+" - "+m),o=this._removeAndGetNext(o);continue}}if((o.tagName==="DIV"||o.tagName==="SECTION"||o.tagName==="HEADER"||o.tagName==="H1"||o.tagName==="H2"||o.tagName==="H3"||o.tagName==="H4"||o.tagName==="H5"||o.tagName==="H6")&&this._isElementWithoutContent(o)){o=this._removeAndGetNext(o);continue}if(this.DEFAULT_TAGS_TO_SCORE.indexOf(o.tagName)!==-1&&c.push(o),o.tagName==="DIV"){for(var h=null,A=o.firstChild;A;){var y=A.nextSibling;if(this._isPhrasingContent(A))h!==null?h.appendChild(A):this._isWhitespace(A)||(h=s.createElement("p"),o.replaceChild(h,A),h.appendChild(A));else if(h!==null){for(;h.lastChild&&this._isWhitespace(h.lastChild);)h.removeChild(h.lastChild);h=null}A=y}if(this._hasSingleTagInsideElement(o,"P")&&this._getLinkDensity(o)<.25){var C=o.children[0];o.parentNode.replaceChild(C,o),o=C,c.push(o)}else this._hasChildBlockElement(o)||(o=this._setNodeTag(o,"P"),c.push(o))}o=this._getNextNode(o)}var D=[];this._forEachNode(c,function(Q){if(!(!Q.parentNode||typeof Q.parentNode.tagName>"u")){var lt=this._getInnerText(Q);if(!(lt.length<25)){var pt=this._getNodeAncestors(Q,5);if(pt.length!==0){var Ct=0;Ct+=1,Ct+=lt.split(this.REGEXPS.commas).length,Ct+=Math.min(Math.floor(lt.length/100),3),this._forEachNode(pt,function(mt,Pt){if(!(!mt.tagName||!mt.parentNode||typeof mt.parentNode.tagName>"u")){if(typeof mt.readability>"u"&&(this._initializeNode(mt),D.push(mt)),Pt===0)var Dt=1;else Pt===1?Dt=2:Dt=Pt*3;mt.readability.contentScore+=Ct/Dt}})}}}});for(var b=[],S=0,O=D.length;S<O;S+=1){var v=D[S],M=v.readability.contentScore*(1-this._getLinkDensity(v));v.readability.contentScore=M,this.log("Candidate:",v,"with score "+M);for(var R=0;R<this._nbTopCandidates;R++){var g=b[R];if(!g||M>g.readability.contentScore){b.splice(R,0,v),b.length>this._nbTopCandidates&&b.pop();break}}}var f=b[0]||null,L=!1,N;if(f===null||f.tagName==="BODY"){for(f=s.createElement("DIV"),L=!0;n.firstChild;)this.log("Moving child out:",n.firstChild),f.appendChild(n.firstChild);n.appendChild(f),this._initializeNode(f)}else if(f){for(var E=[],F=1;F<b.length;F++)b[F].readability.contentScore/f.readability.contentScore>=.75&&E.push(this._getNodeAncestors(b[F]));var P=3;if(E.length>=P)for(N=f.parentNode;N.tagName!=="BODY";){for(var W=0,z=0;z<E.length&&W<P;z++)W+=Number(E[z].includes(N));if(W>=P){f=N;break}N=N.parentNode}f.readability||this._initializeNode(f),N=f.parentNode;for(var w=f.readability.contentScore,Y=w/3;N.tagName!=="BODY";){if(!N.readability){N=N.parentNode;continue}var ot=N.readability.contentScore;if(ot<Y)break;if(ot>w){f=N;break}w=N.readability.contentScore,N=N.parentNode}for(N=f.parentNode;N.tagName!="BODY"&&N.children.length==1;)f=N,N=f.parentNode;f.readability||this._initializeNode(f)}var et=s.createElement("DIV");r&&(et.id="readability-content");var q=Math.max(10,f.readability.contentScore*.2);N=f.parentNode;for(var ht=N.children,dt=0,Et=ht.length;dt<Et;dt++){var gt=ht[dt],G=!1;if(this.log("Looking at sibling node:",gt,gt.readability?"with score "+gt.readability.contentScore:""),this.log("Sibling has score",gt.readability?gt.readability.contentScore:"Unknown"),gt===f)G=!0;else{var u=0;if(gt.className===f.className&&f.className!==""&&(u+=f.readability.contentScore*.2),gt.readability&&gt.readability.contentScore+u>=q)G=!0;else if(gt.nodeName==="P"){var T=this._getLinkDensity(gt),p=this._getInnerText(gt),_=p.length;(_>80&&T<.25||_<80&&_>0&&T===0&&p.search(/\.( |$)/)!==-1)&&(G=!0)}}G&&(this.log("Appending node:",gt),this.ALTER_TO_DIV_EXCEPTIONS.indexOf(gt.nodeName)===-1&&(this.log("Altering sibling:",gt,"to div."),gt=this._setNodeTag(gt,"DIV")),et.appendChild(gt),ht=N.children,dt-=1,Et-=1)}if(this._debug&&this.log("Article content pre-prep: "+et.innerHTML),this._prepArticle(et),this._debug&&this.log("Article content post-prep: "+et.innerHTML),L)f.id="readability-page-1",f.className="page";else{var I=s.createElement("DIV");for(I.id="readability-page-1",I.className="page";et.firstChild;)I.appendChild(et.firstChild);et.appendChild(I)}this._debug&&this.log("Article content after paging: "+et.innerHTML);var k=!0,B=this._getInnerText(et,!0).length;if(B<this._charThreshold)if(k=!1,n.innerHTML=i,this._flagIsActive(this.FLAG_STRIP_UNLIKELYS))this._removeFlag(this.FLAG_STRIP_UNLIKELYS),this._attempts.push({articleContent:et,textLength:B});else if(this._flagIsActive(this.FLAG_WEIGHT_CLASSES))this._removeFlag(this.FLAG_WEIGHT_CLASSES),this._attempts.push({articleContent:et,textLength:B});else if(this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY))this._removeFlag(this.FLAG_CLEAN_CONDITIONALLY),this._attempts.push({articleContent:et,textLength:B});else{if(this._attempts.push({articleContent:et,textLength:B}),this._attempts.sort(function(Q,lt){return lt.textLength-Q.textLength}),!this._attempts[0].textLength)return null;et=this._attempts[0].articleContent,k=!0}if(k){var X=[N,f].concat(this._getNodeAncestors(N));return this._someNode(X,function(Q){if(!Q.tagName)return!1;var lt=Q.getAttribute("dir");return lt?(this._articleDir=lt,!0):!1}),et}}},_isValidByline:function(n){return typeof n=="string"||n instanceof String?(n=n.trim(),n.length>0&&n.length<100):!1},_unescapeHtmlEntities:function(n){if(!n)return n;var s=this.HTML_ESCAPE_MAP;return n.replace(/&(quot|amp|apos|lt|gt);/g,function(r,i){return s[i]}).replace(/&#(?:x([0-9a-z]{1,4})|([0-9]{1,4}));/gi,function(r,i,a){var c=parseInt(i||a,i?16:10);return String.fromCharCode(c)})},_getJSONLD:function(n){var s=this._getAllNodesWithTag(n,["script"]),r;return this._forEachNode(s,function(i){if(!r&&i.getAttribute("type")==="application/ld+json")try{var a=i.textContent.replace(/^\s*<!\[CDATA\[|\]\]>\s*$/g,""),c=JSON.parse(a);if(!c["@context"]||!c["@context"].match(/^https?\:\/\/schema\.org$/)||(!c["@type"]&&Array.isArray(c["@graph"])&&(c=c["@graph"].find(function(A){return(A["@type"]||"").match(this.REGEXPS.jsonLdArticleTypes)})),!c||!c["@type"]||!c["@type"].match(this.REGEXPS.jsonLdArticleTypes)))return;if(r={},typeof c.name=="string"&&typeof c.headline=="string"&&c.name!==c.headline){var o=this._getArticleTitle(),m=this._textSimilarity(c.name,o)>.75,h=this._textSimilarity(c.headline,o)>.75;h&&!m?r.title=c.headline:r.title=c.name}else typeof c.name=="string"?r.title=c.name.trim():typeof c.headline=="string"&&(r.title=c.headline.trim());c.author&&(typeof c.author.name=="string"?r.byline=c.author.name.trim():Array.isArray(c.author)&&c.author[0]&&typeof c.author[0].name=="string"&&(r.byline=c.author.filter(function(A){return A&&typeof A.name=="string"}).map(function(A){return A.name.trim()}).join(", "))),typeof c.description=="string"&&(r.excerpt=c.description.trim()),c.publisher&&typeof c.publisher.name=="string"&&(r.siteName=c.publisher.name.trim()),typeof c.datePublished=="string"&&(r.datePublished=c.datePublished.trim());return}catch(A){this.log(A.message)}}),r||{}},_getArticleMetadata:function(n){var s={},r={},i=this._doc.getElementsByTagName("meta"),a=/\s*(article|dc|dcterm|og|twitter)\s*:\s*(author|creator|description|published_time|title|site_name)\s*/gi,c=/^\s*(?:(dc|dcterm|og|twitter|weibo:(article|webpage))\s*[\.:]\s*)?(author|creator|description|title|site_name)\s*$/i;return this._forEachNode(i,function(o){var m=o.getAttribute("name"),h=o.getAttribute("property"),A=o.getAttribute("content");if(A){var y=null,C=null;h&&(y=h.match(a),y&&(C=y[0].toLowerCase().replace(/\s/g,""),r[C]=A.trim())),!y&&m&&c.test(m)&&(C=m,A&&(C=C.toLowerCase().replace(/\s/g,"").replace(/\./g,":"),r[C]=A.trim()))}}),s.title=n.title||r["dc:title"]||r["dcterm:title"]||r["og:title"]||r["weibo:article:title"]||r["weibo:webpage:title"]||r.title||r["twitter:title"],s.title||(s.title=this._getArticleTitle()),s.byline=n.byline||r["dc:creator"]||r["dcterm:creator"]||r.author,s.excerpt=n.excerpt||r["dc:description"]||r["dcterm:description"]||r["og:description"]||r["weibo:article:description"]||r["weibo:webpage:description"]||r.description||r["twitter:description"],s.siteName=n.siteName||r["og:site_name"],s.publishedTime=n.datePublished||r["article:published_time"]||null,s.title=this._unescapeHtmlEntities(s.title),s.byline=this._unescapeHtmlEntities(s.byline),s.excerpt=this._unescapeHtmlEntities(s.excerpt),s.siteName=this._unescapeHtmlEntities(s.siteName),s.publishedTime=this._unescapeHtmlEntities(s.publishedTime),s},_isSingleImage:function(n){return n.tagName==="IMG"?!0:n.children.length!==1||n.textContent.trim()!==""?!1:this._isSingleImage(n.children[0])},_unwrapNoscriptImages:function(n){var s=Array.from(n.getElementsByTagName("img"));this._forEachNode(s,function(i){for(var a=0;a<i.attributes.length;a++){var c=i.attributes[a];switch(c.name){case"src":case"srcset":case"data-src":case"data-srcset":return}if(/\.(jpg|jpeg|png|webp)/i.test(c.value))return}i.parentNode.removeChild(i)});var r=Array.from(n.getElementsByTagName("noscript"));this._forEachNode(r,function(i){var a=n.createElement("div");if(a.innerHTML=i.innerHTML,!!this._isSingleImage(a)){var c=i.previousElementSibling;if(c&&this._isSingleImage(c)){var o=c;o.tagName!=="IMG"&&(o=c.getElementsByTagName("img")[0]);for(var m=a.getElementsByTagName("img")[0],h=0;h<o.attributes.length;h++){var A=o.attributes[h];if(A.value!==""&&(A.name==="src"||A.name==="srcset"||/\.(jpg|jpeg|png|webp)/i.test(A.value))){if(m.getAttribute(A.name)===A.value)continue;var y=A.name;m.hasAttribute(y)&&(y="data-old-"+y),m.setAttribute(y,A.value)}}i.parentNode.replaceChild(a.firstElementChild,c)}}})},_removeScripts:function(n){this._removeNodes(this._getAllNodesWithTag(n,["script","noscript"]))},_hasSingleTagInsideElement:function(n,s){return n.children.length!=1||n.children[0].tagName!==s?!1:!this._someNode(n.childNodes,function(r){return r.nodeType===this.TEXT_NODE&&this.REGEXPS.hasContent.test(r.textContent)})},_isElementWithoutContent:function(n){return n.nodeType===this.ELEMENT_NODE&&n.textContent.trim().length==0&&(n.children.length==0||n.children.length==n.getElementsByTagName("br").length+n.getElementsByTagName("hr").length)},_hasChildBlockElement:function(n){return this._someNode(n.childNodes,function(s){return this.DIV_TO_P_ELEMS.has(s.tagName)||this._hasChildBlockElement(s)})},_isPhrasingContent:function(n){return n.nodeType===this.TEXT_NODE||this.PHRASING_ELEMS.indexOf(n.tagName)!==-1||(n.tagName==="A"||n.tagName==="DEL"||n.tagName==="INS")&&this._everyNode(n.childNodes,this._isPhrasingContent)},_isWhitespace:function(n){return n.nodeType===this.TEXT_NODE&&n.textContent.trim().length===0||n.nodeType===this.ELEMENT_NODE&&n.tagName==="BR"},_getInnerText:function(n,s){s=typeof s>"u"?!0:s;var r=n.textContent.trim();return s?r.replace(this.REGEXPS.normalize," "):r},_getCharCount:function(n,s){return s=s||",",this._getInnerText(n).split(s).length-1},_cleanStyles:function(n){if(!(!n||n.tagName.toLowerCase()==="svg")){for(var s=0;s<this.PRESENTATIONAL_ATTRIBUTES.length;s++)n.removeAttribute(this.PRESENTATIONAL_ATTRIBUTES[s]);this.DEPRECATED_SIZE_ATTRIBUTE_ELEMS.indexOf(n.tagName)!==-1&&(n.removeAttribute("width"),n.removeAttribute("height"));for(var r=n.firstElementChild;r!==null;)this._cleanStyles(r),r=r.nextElementSibling}},_getLinkDensity:function(n){var s=this._getInnerText(n).length;if(s===0)return 0;var r=0;return this._forEachNode(n.getElementsByTagName("a"),function(i){var a=i.getAttribute("href"),c=a&&this.REGEXPS.hashUrl.test(a)?.3:1;r+=this._getInnerText(i).length*c}),r/s},_getClassWeight:function(n){if(!this._flagIsActive(this.FLAG_WEIGHT_CLASSES))return 0;var s=0;return typeof n.className=="string"&&n.className!==""&&(this.REGEXPS.negative.test(n.className)&&(s-=25),this.REGEXPS.positive.test(n.className)&&(s+=25)),typeof n.id=="string"&&n.id!==""&&(this.REGEXPS.negative.test(n.id)&&(s-=25),this.REGEXPS.positive.test(n.id)&&(s+=25)),s},_clean:function(n,s){var r=["object","embed","iframe"].indexOf(s)!==-1;this._removeNodes(this._getAllNodesWithTag(n,[s]),function(i){if(r){for(var a=0;a<i.attributes.length;a++)if(this._allowedVideoRegex.test(i.attributes[a].value))return!1;if(i.tagName==="object"&&this._allowedVideoRegex.test(i.innerHTML))return!1}return!0})},_hasAncestorTag:function(n,s,r,i){r=r||3,s=s.toUpperCase();for(var a=0;n.parentNode;){if(r>0&&a>r)return!1;if(n.parentNode.tagName===s&&(!i||i(n.parentNode)))return!0;n=n.parentNode,a++}return!1},_getRowAndColumnCount:function(n){for(var s=0,r=0,i=n.getElementsByTagName("tr"),a=0;a<i.length;a++){var c=i[a].getAttribute("rowspan")||0;c&&(c=parseInt(c,10)),s+=c||1;for(var o=0,m=i[a].getElementsByTagName("td"),h=0;h<m.length;h++){var A=m[h].getAttribute("colspan")||0;A&&(A=parseInt(A,10)),o+=A||1}r=Math.max(r,o)}return{rows:s,columns:r}},_markDataTables:function(n){for(var s=n.getElementsByTagName("table"),r=0;r<s.length;r++){var i=s[r],a=i.getAttribute("role");if(a=="presentation"){i._readabilityDataTable=!1;continue}var c=i.getAttribute("datatable");if(c=="0"){i._readabilityDataTable=!1;continue}var o=i.getAttribute("summary");if(o){i._readabilityDataTable=!0;continue}var m=i.getElementsByTagName("caption")[0];if(m&&m.childNodes.length>0){i._readabilityDataTable=!0;continue}var h=["col","colgroup","tfoot","thead","th"],A=function(C){return!!i.getElementsByTagName(C)[0]};if(h.some(A)){this.log("Data table because found data-y descendant"),i._readabilityDataTable=!0;continue}if(i.getElementsByTagName("table")[0]){i._readabilityDataTable=!1;continue}var y=this._getRowAndColumnCount(i);if(y.rows>=10||y.columns>4){i._readabilityDataTable=!0;continue}i._readabilityDataTable=y.rows*y.columns>10}},_fixLazyImages:function(n){this._forEachNode(this._getAllNodesWithTag(n,["img","picture","figure"]),function(s){if(s.src&&this.REGEXPS.b64DataUrl.test(s.src)){var r=this.REGEXPS.b64DataUrl.exec(s.src);if(r[1]==="image/svg+xml")return;for(var i=!1,a=0;a<s.attributes.length;a++){var c=s.attributes[a];if(c.name!=="src"&&/\.(jpg|jpeg|png|webp)/i.test(c.value)){i=!0;break}}if(i){var o=s.src.search(/base64\s*/i)+7,m=s.src.length-o;m<133&&s.removeAttribute("src")}}if(!((s.src||s.srcset&&s.srcset!="null")&&s.className.toLowerCase().indexOf("lazy")===-1)){for(var h=0;h<s.attributes.length;h++)if(c=s.attributes[h],!(c.name==="src"||c.name==="srcset"||c.name==="alt")){var A=null;if(/\.(jpg|jpeg|png|webp)\s+\d/.test(c.value)?A="srcset":/^\s*\S+\.(jpg|jpeg|png|webp)\S*\s*$/.test(c.value)&&(A="src"),A){if(s.tagName==="IMG"||s.tagName==="PICTURE")s.setAttribute(A,c.value);else if(s.tagName==="FIGURE"&&!this._getAllNodesWithTag(s,["img","picture"]).length){var y=this._doc.createElement("img");y.setAttribute(A,c.value),s.appendChild(y)}}}}})},_getTextDensity:function(n,s){var r=this._getInnerText(n,!0).length;if(r===0)return 0;var i=0,a=this._getAllNodesWithTag(n,s);return this._forEachNode(a,c=>i+=this._getInnerText(c,!0).length),i/r},_cleanConditionally:function(n,s){this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY)&&this._removeNodes(this._getAllNodesWithTag(n,[s]),function(r){var i=function(N){return N._readabilityDataTable},a=s==="ul"||s==="ol";if(!a){var c=0,o=this._getAllNodesWithTag(r,["ul","ol"]);this._forEachNode(o,N=>c+=this._getInnerText(N).length),a=c/this._getInnerText(r).length>.9}if(s==="table"&&i(r)||this._hasAncestorTag(r,"table",-1,i)||this._hasAncestorTag(r,"code"))return!1;var m=this._getClassWeight(r);this.log("Cleaning Conditionally",r);var h=0;if(m+h<0)return!0;if(this._getCharCount(r,",")<10){for(var A=r.getElementsByTagName("p").length,y=r.getElementsByTagName("img").length,C=r.getElementsByTagName("li").length-100,D=r.getElementsByTagName("input").length,b=this._getTextDensity(r,["h1","h2","h3","h4","h5","h6"]),S=0,O=this._getAllNodesWithTag(r,["object","embed","iframe"]),v=0;v<O.length;v++){for(var M=0;M<O[v].attributes.length;M++)if(this._allowedVideoRegex.test(O[v].attributes[M].value))return!1;if(O[v].tagName==="object"&&this._allowedVideoRegex.test(O[v].innerHTML))return!1;S++}var R=this._getLinkDensity(r),g=this._getInnerText(r).length,f=y>1&&A/y<.5&&!this._hasAncestorTag(r,"figure")||!a&&C>A||D>Math.floor(A/3)||!a&&b<.9&&g<25&&(y===0||y>2)&&!this._hasAncestorTag(r,"figure")||!a&&m<25&&R>.2||m>=25&&R>.5||S===1&&g<75||S>1;if(a&&f){for(var L=0;L<r.children.length;L++)if(r.children[L].children.length>1)return f;let N=r.getElementsByTagName("li").length;if(y==N)return!1}return f}return!1})},_cleanMatchedNodes:function(n,s){for(var r=this._getNextNode(n,!0),i=this._getNextNode(n);i&&i!=r;)s.call(this,i,i.className+" "+i.id)?i=this._removeAndGetNext(i):i=this._getNextNode(i)},_cleanHeaders:function(n){let s=this._getAllNodesWithTag(n,["h1","h2"]);this._removeNodes(s,function(r){let i=this._getClassWeight(r)<0;return i&&this.log("Removing header with low class weight:",r),i})},_headerDuplicatesTitle:function(n){if(n.tagName!="H1"&&n.tagName!="H2")return!1;var s=this._getInnerText(n,!1);return this.log("Evaluating similarity of header:",s,this._articleTitle),this._textSimilarity(this._articleTitle,s)>.75},_flagIsActive:function(n){return(this._flags&n)>0},_removeFlag:function(n){this._flags=this._flags&~n},_isProbablyVisible:function(n){return(!n.style||n.style.display!="none")&&(!n.style||n.style.visibility!="hidden")&&!n.hasAttribute("hidden")&&(!n.hasAttribute("aria-hidden")||n.getAttribute("aria-hidden")!="true"||n.className&&n.className.indexOf&&n.className.indexOf("fallback-image")!==-1)},parse:function(){if(this._maxElemsToParse>0){var n=this._doc.getElementsByTagName("*").length;if(n>this._maxElemsToParse)throw new Error("Aborting parsing document; "+n+" elements found")}this._unwrapNoscriptImages(this._doc);var s=this._disableJSONLD?{}:this._getJSONLD(this._doc);this._removeScripts(this._doc),this._prepDocument();var r=this._getArticleMetadata(s);this._articleTitle=r.title;var i=this._grabArticle();if(!i)return null;if(this.log("Grabbed: "+i.innerHTML),this._postProcessContent(i),!r.excerpt){var a=i.getElementsByTagName("p");a.length>0&&(r.excerpt=a[0].textContent.trim())}var c=i.textContent;return{title:this._articleTitle,byline:r.byline||this._articleByline,dir:this._articleDir,lang:this._articleLang,content:this._serializer(i),textContent:c,length:c.length,excerpt:r.excerpt,siteName:r.siteName||this._articleSiteName,publishedTime:r.publishedTime}}},t.exports=e})(Readability);var ReadabilityExports=Readability.exports,ReadabilityReaderable={exports:{}};(function(t){var e={unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i};function n(r){return(!r.style||r.style.display!="none")&&!r.hasAttribute("hidden")&&(!r.hasAttribute("aria-hidden")||r.getAttribute("aria-hidden")!="true"||r.className&&r.className.indexOf&&r.className.indexOf("fallback-image")!==-1)}function s(r,i={}){typeof i=="function"&&(i={visibilityChecker:i});var a={minScore:20,minContentLength:140,visibilityChecker:n};i=Object.assign(a,i);var c=r.querySelectorAll("p, pre, article"),o=r.querySelectorAll("div > br");if(o.length){var m=new Set(c);[].forEach.call(o,function(A){m.add(A.parentNode)}),c=Array.from(m)}var h=0;return[].some.call(c,function(A){if(!i.visibilityChecker(A))return!1;var y=A.className+" "+A.id;if(e.unlikelyCandidates.test(y)&&!e.okMaybeItsACandidate.test(y)||A.matches("li p"))return!1;var C=A.textContent.trim().length;return C<i.minContentLength?!1:(h+=Math.sqrt(C-i.minContentLength),h>i.minScore)})}t.exports=s})(ReadabilityReaderable);var ReadabilityReaderableExports=ReadabilityReaderable.exports;function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(t,e){module.exports=t.pdfjsLib=e()})(globalThis,()=>(()=>{var __webpack_modules__=[,(t,e)=>{var Vt;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=ht,e.bytesToString=X,e.createValidAbsoluteUrl=Et,e.getModificationDate=yt,e.getUuid=qt,e.getVerbosityLevel=Y,e.info=ot,e.isArrayBuffer=Tt,e.isArrayEqual=Nt,e.isNodeJS=void 0,e.normalizeUnicode=Xt,e.objectFromMap=pt,e.objectSize=lt,e.setVerbosityLevel=w,e.shadow=gt,e.string32=Q,e.stringToBytes=nt,e.stringToPDFString=ft,e.stringToUTF8String=at,e.unreachable=q,e.utf8StringToString=st,e.warn=et;const n=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=n;const s=[1,0,0,1,0,0];e.IDENTITY_MATRIX=s;const r=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=r;const i=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=i;const a=1.35;e.LINE_FACTOR=a;const c=.35;e.LINE_DESCENT_FACTOR=c;const o=c/a;e.BASELINE_FACTOR=o;const m={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=m;const h={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=h;const A="pdfjs_internal_editor_";e.AnnotationEditorPrefix=A;const y={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=y;const C={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=C;const D={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=D;const b={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=b;const S={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=S;const O={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=O;const v={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=v;const M={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=M;const R={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=R;const g={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=g;const f={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=f;const L={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=L;const N={O:"PageOpen",C:"PageClose"};e.PageActionEventType=N;const E={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=E;const F={NONE:0,BINARY:1};e.CMapCompressionType=F;const P={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=P;const W={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=W;let z=E.WARNINGS;function w(ut){Number.isInteger(ut)&&(z=ut)}function Y(){return z}function ot(ut){z>=E.INFOS&&console.log(`Info: ${ut}`)}function et(ut){z>=E.WARNINGS&&console.log(`Warning: ${ut}`)}function q(ut){throw new Error(ut)}function ht(ut,rt){ut||q(rt)}function dt(ut){switch(ut==null?void 0:ut.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Et(ut,rt=null,J=null){var _t;if(!ut)return null;try{if(J&&typeof ut=="string"&&(J.addDefaultProtocol&&ut.startsWith("www.")&&((_t=ut.match(/\./g))==null?void 0:_t.length)>=2&&(ut=`http://${ut}`),J.tryConvertEncoding))try{ut=at(ut)}catch{}const It=rt?new URL(ut,rt):new URL(ut);if(dt(It))return It}catch{}return null}function gt(ut,rt,J,_t=!1){return Object.defineProperty(ut,rt,{value:J,enumerable:!_t,configurable:!0,writable:!1}),J}const G=function(){function ut(rt,J){this.constructor===ut&&q("Cannot initialize BaseException."),this.message=rt,this.name=J}return ut.prototype=new Error,ut.constructor=ut,ut}();e.BaseException=G;class u extends G{constructor(rt,J){super(rt,"PasswordException"),this.code=J}}e.PasswordException=u;class T extends G{constructor(rt,J){super(rt,"UnknownErrorException"),this.details=J}}e.UnknownErrorException=T;class p extends G{constructor(rt){super(rt,"InvalidPDFException")}}e.InvalidPDFException=p;class _ extends G{constructor(rt){super(rt,"MissingPDFException")}}e.MissingPDFException=_;class I extends G{constructor(rt,J){super(rt,"UnexpectedResponseException"),this.status=J}}e.UnexpectedResponseException=I;class k extends G{constructor(rt){super(rt,"FormatError")}}e.FormatError=k;class B extends G{constructor(rt){super(rt,"AbortException")}}e.AbortException=B;function X(ut){(typeof ut!="object"||(ut==null?void 0:ut.length)===void 0)&&q("Invalid argument for bytesToString");const rt=ut.length,J=8192;if(rt<J)return String.fromCharCode.apply(null,ut);const _t=[];for(let It=0;It<rt;It+=J){const ee=Math.min(It+J,rt),te=ut.subarray(It,ee);_t.push(String.fromCharCode.apply(null,te))}return _t.join("")}function nt(ut){typeof ut!="string"&&q("Invalid argument for stringToBytes");const rt=ut.length,J=new Uint8Array(rt);for(let _t=0;_t<rt;++_t)J[_t]=ut.charCodeAt(_t)&255;return J}function Q(ut){return String.fromCharCode(ut>>24&255,ut>>16&255,ut>>8&255,ut&255)}function lt(ut){return Object.keys(ut).length}function pt(ut){const rt=Object.create(null);for(const[J,_t]of ut)rt[J]=_t;return rt}function Ct(){const ut=new Uint8Array(4);return ut[0]=1,new Uint32Array(ut.buffer,0,1)[0]===1}function mt(){try{return new Function(""),!0}catch{return!1}}class Pt{static get isLittleEndian(){return gt(this,"isLittleEndian",Ct())}static get isEvalSupported(){return gt(this,"isEvalSupported",mt())}static get isOffscreenCanvasSupported(){return gt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?gt(this,"platform",{isWin:!1,isMac:!1}):gt(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var rt,J;return gt(this,"isCSSRoundSupported",(J=(rt=globalThis.CSS)==null?void 0:rt.supports)==null?void 0:J.call(rt,"width: round(1.5px, 1px)"))}}e.FeatureTest=Pt;const Dt=[...Array(256).keys()].map(ut=>ut.toString(16).padStart(2,"0"));class xt{static makeHexColor(rt,J,_t){return`#${Dt[rt]}${Dt[J]}${Dt[_t]}`}static scaleMinMax(rt,J){let _t;rt[0]?(rt[0]<0&&(_t=J[0],J[0]=J[1],J[1]=_t),J[0]*=rt[0],J[1]*=rt[0],rt[3]<0&&(_t=J[2],J[2]=J[3],J[3]=_t),J[2]*=rt[3],J[3]*=rt[3]):(_t=J[0],J[0]=J[2],J[2]=_t,_t=J[1],J[1]=J[3],J[3]=_t,rt[1]<0&&(_t=J[2],J[2]=J[3],J[3]=_t),J[2]*=rt[1],J[3]*=rt[1],rt[2]<0&&(_t=J[0],J[0]=J[1],J[1]=_t),J[0]*=rt[2],J[1]*=rt[2]),J[0]+=rt[4],J[1]+=rt[4],J[2]+=rt[5],J[3]+=rt[5]}static transform(rt,J){return[rt[0]*J[0]+rt[2]*J[1],rt[1]*J[0]+rt[3]*J[1],rt[0]*J[2]+rt[2]*J[3],rt[1]*J[2]+rt[3]*J[3],rt[0]*J[4]+rt[2]*J[5]+rt[4],rt[1]*J[4]+rt[3]*J[5]+rt[5]]}static applyTransform(rt,J){const _t=rt[0]*J[0]+rt[1]*J[2]+J[4],It=rt[0]*J[1]+rt[1]*J[3]+J[5];return[_t,It]}static applyInverseTransform(rt,J){const _t=J[0]*J[3]-J[1]*J[2],It=(rt[0]*J[3]-rt[1]*J[2]+J[2]*J[5]-J[4]*J[3])/_t,ee=(-rt[0]*J[1]+rt[1]*J[0]+J[4]*J[1]-J[5]*J[0])/_t;return[It,ee]}static getAxialAlignedBoundingBox(rt,J){const _t=this.applyTransform(rt,J),It=this.applyTransform(rt.slice(2,4),J),ee=this.applyTransform([rt[0],rt[3]],J),te=this.applyTransform([rt[2],rt[1]],J);return[Math.min(_t[0],It[0],ee[0],te[0]),Math.min(_t[1],It[1],ee[1],te[1]),Math.max(_t[0],It[0],ee[0],te[0]),Math.max(_t[1],It[1],ee[1],te[1])]}static inverseTransform(rt){const J=rt[0]*rt[3]-rt[1]*rt[2];return[rt[3]/J,-rt[1]/J,-rt[2]/J,rt[0]/J,(rt[2]*rt[5]-rt[4]*rt[3])/J,(rt[4]*rt[1]-rt[5]*rt[0])/J]}static singularValueDecompose2dScale(rt){const J=[rt[0],rt[2],rt[1],rt[3]],_t=rt[0]*J[0]+rt[1]*J[2],It=rt[0]*J[1]+rt[1]*J[3],ee=rt[2]*J[0]+rt[3]*J[2],te=rt[2]*J[1]+rt[3]*J[3],tt=(_t+te)/2,bt=Math.sqrt((_t+te)**2-4*(_t*te-ee*It))/2,wt=tt+bt||1,Ot=tt-bt||1;return[Math.sqrt(wt),Math.sqrt(Ot)]}static normalizeRect(rt){const J=rt.slice(0);return rt[0]>rt[2]&&(J[0]=rt[2],J[2]=rt[0]),rt[1]>rt[3]&&(J[1]=rt[3],J[3]=rt[1]),J}static intersect(rt,J){const _t=Math.max(Math.min(rt[0],rt[2]),Math.min(J[0],J[2])),It=Math.min(Math.max(rt[0],rt[2]),Math.max(J[0],J[2]));if(_t>It)return null;const ee=Math.max(Math.min(rt[1],rt[3]),Math.min(J[1],J[3])),te=Math.min(Math.max(rt[1],rt[3]),Math.max(J[1],J[3]));return ee>te?null:[_t,ee,It,te]}static bezierBoundingBox(rt,J,_t,It,ee,te,tt,bt){const wt=[],Ot=[[],[]];let Ft,Gt,Qt,St,Kt,Lt,U,d;for(let Z=0;Z<2;++Z){if(Z===0?(Gt=6*rt-12*_t+6*ee,Ft=-3*rt+9*_t-9*ee+3*tt,Qt=3*_t-3*rt):(Gt=6*J-12*It+6*te,Ft=-3*J+9*It-9*te+3*bt,Qt=3*It-3*J),Math.abs(Ft)<1e-12){if(Math.abs(Gt)<1e-12)continue;St=-Qt/Gt,0<St&&St<1&&wt.push(St);continue}U=Gt*Gt-4*Qt*Ft,d=Math.sqrt(U),!(U<0)&&(Kt=(-Gt+d)/(2*Ft),0<Kt&&Kt<1&&wt.push(Kt),Lt=(-Gt-d)/(2*Ft),0<Lt&&Lt<1&&wt.push(Lt))}let x=wt.length,H;const V=x;for(;x--;)St=wt[x],H=1-St,Ot[0][x]=H*H*H*rt+3*H*H*St*_t+3*H*St*St*ee+St*St*St*tt,Ot[1][x]=H*H*H*J+3*H*H*St*It+3*H*St*St*te+St*St*St*bt;return Ot[0][V]=rt,Ot[1][V]=J,Ot[0][V+1]=tt,Ot[1][V+1]=bt,Ot[0].length=Ot[1].length=V+2,[Math.min(...Ot[0]),Math.min(...Ot[1]),Math.max(...Ot[0]),Math.max(...Ot[1])]}}e.Util=xt;const Bt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ft(ut){if(ut[0]>="\xEF"){let J;if(ut[0]==="\xFE"&&ut[1]==="\xFF"?J="utf-16be":ut[0]==="\xFF"&&ut[1]==="\xFE"?J="utf-16le":ut[0]==="\xEF"&&ut[1]==="\xBB"&&ut[2]==="\xBF"&&(J="utf-8"),J)try{const _t=new TextDecoder(J,{fatal:!0}),It=nt(ut);return _t.decode(It)}catch(_t){et(`stringToPDFString: "${_t}".`)}}const rt=[];for(let J=0,_t=ut.length;J<_t;J++){const It=Bt[ut.charCodeAt(J)];rt.push(It?String.fromCharCode(It):ut.charAt(J))}return rt.join("")}function at(ut){return decodeURIComponent(escape(ut))}function st(ut){return unescape(encodeURIComponent(ut))}function Tt(ut){return typeof ut=="object"&&(ut==null?void 0:ut.byteLength)!==void 0}function Nt(ut,rt){if(ut.length!==rt.length)return!1;for(let J=0,_t=ut.length;J<_t;J++)if(ut[J]!==rt[J])return!1;return!0}function yt(ut=new Date){return[ut.getUTCFullYear().toString(),(ut.getUTCMonth()+1).toString().padStart(2,"0"),ut.getUTCDate().toString().padStart(2,"0"),ut.getUTCHours().toString().padStart(2,"0"),ut.getUTCMinutes().toString().padStart(2,"0"),ut.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ht{constructor(){j(this,Vt,!1);this.promise=new Promise((rt,J)=>{this.resolve=_t=>{it(this,Vt,!0),rt(_t)},this.reject=_t=>{it(this,Vt,!0),J(_t)}})}get settled(){return l(this,Vt)}}Vt=new WeakMap,e.PromiseCapability=Ht;let jt=null,$t=null;function Xt(ut){return jt||(jt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,$t=new Map([["\uFB05","\u017Ft"]])),ut.replaceAll(jt,(rt,J,_t)=>J?J.normalize("NFKC"):$t.get(_t))}function qt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const ut=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(ut);else for(let rt=0;rt<32;rt++)ut[rt]=Math.floor(Math.random()*255);return X(ut)}const zt="pdfjs_internal_id_";e.AnnotationPrefix=zt},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var t,n,s,r,he,a,be,o,m,h,A,y,C,D,b,S,De,v,M,Be,g,f;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(N){if(typeof N=="string"||N instanceof URL?N={url:N}:(0,_util.isArrayBuffer)(N)&&(N={data:N}),typeof N!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!N.url&&!N.data&&!N.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const E=new PDFDocumentLoadingTask,{docId:F}=E,P=N.url?getUrlProp(N.url):null,W=N.data?getDataProp(N.data):null,z=N.httpHeaders||null,w=N.withCredentials===!0,Y=N.password??null,ot=N.range instanceof PDFDataRangeTransport?N.range:null,et=Number.isInteger(N.rangeChunkSize)&&N.rangeChunkSize>0?N.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let q=N.worker instanceof PDFWorker?N.worker:null;const ht=N.verbosity,dt=typeof N.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(N.docBaseUrl)?N.docBaseUrl:null,Et=typeof N.cMapUrl=="string"?N.cMapUrl:null,gt=N.cMapPacked!==!1,G=N.CMapReaderFactory||DefaultCMapReaderFactory,u=typeof N.standardFontDataUrl=="string"?N.standardFontDataUrl:null,T=N.StandardFontDataFactory||DefaultStandardFontDataFactory,p=N.stopAtErrors!==!0,_=Number.isInteger(N.maxImageSize)&&N.maxImageSize>-1?N.maxImageSize:-1,I=N.isEvalSupported!==!1,k=typeof N.isOffscreenCanvasSupported=="boolean"?N.isOffscreenCanvasSupported:!_util.isNodeJS,B=Number.isInteger(N.canvasMaxAreaInBytes)?N.canvasMaxAreaInBytes:-1,X=typeof N.disableFontFace=="boolean"?N.disableFontFace:_util.isNodeJS,nt=N.fontExtraProperties===!0,Q=N.enableXfa===!0,lt=N.ownerDocument||globalThis.document,pt=N.disableRange===!0,Ct=N.disableStream===!0,mt=N.disableAutoFetch===!0,Pt=N.pdfBug===!0,Dt=ot?ot.length:N.length??NaN,xt=typeof N.useSystemFonts=="boolean"?N.useSystemFonts:!_util.isNodeJS&&!X,Bt=typeof N.useWorkerFetch=="boolean"?N.useWorkerFetch:G===_display_utils.DOMCMapReaderFactory&&T===_display_utils.DOMStandardFontDataFactory&&Et&&u&&(0,_display_utils.isValidFetchUrl)(Et,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(u,document.baseURI),ft=N.canvasFactory||new DefaultCanvasFactory({ownerDocument:lt}),at=N.filterFactory||new DefaultFilterFactory({docId:F,ownerDocument:lt}),st=null;(0,_util.setVerbosityLevel)(ht);const Tt={canvasFactory:ft,filterFactory:at};if(Bt||(Tt.cMapReaderFactory=new G({baseUrl:Et,isCompressed:gt}),Tt.standardFontDataFactory=new T({baseUrl:u})),!q){const Ht={verbosity:ht,port:_worker_options.GlobalWorkerOptions.workerPort};q=Ht.port?PDFWorker.fromPort(Ht):new PDFWorker(Ht),E._worker=q}const Nt={docId:F,apiVersion:"3.11.174",data:W,password:Y,disableAutoFetch:mt,rangeChunkSize:et,length:Dt,docBaseUrl:dt,enableXfa:Q,evaluatorOptions:{maxImageSize:_,disableFontFace:X,ignoreErrors:p,isEvalSupported:I,isOffscreenCanvasSupported:k,canvasMaxAreaInBytes:B,fontExtraProperties:nt,useSystemFonts:xt,cMapUrl:Bt?Et:null,standardFontDataUrl:Bt?u:null}},yt={ignoreErrors:p,isEvalSupported:I,disableFontFace:X,fontExtraProperties:nt,enableXfa:Q,ownerDocument:lt,disableAutoFetch:mt,pdfBug:Pt,styleElement:st};return q.promise.then(function(){if(E.destroyed)throw new Error("Loading aborted");const Ht=_fetchDocument(q,Nt),jt=new Promise(function($t){let Xt;ot?Xt=new _transport_stream.PDFDataTransportStream({length:Dt,initialData:ot.initialData,progressiveDone:ot.progressiveDone,contentDispositionFilename:ot.contentDispositionFilename,disableRange:pt,disableStream:Ct},ot):W||(Xt=(qt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(qt):(0,_display_utils.isValidFetchUrl)(qt.url)?new _displayFetch_stream.PDFFetchStream(qt):new _displayNetwork.PDFNetworkStream(qt))({url:P,length:Dt,httpHeaders:z,withCredentials:w,rangeChunkSize:et,disableRange:pt,disableStream:Ct})),$t(Xt)});return Promise.all([Ht,jt]).then(function([$t,Xt]){if(E.destroyed)throw new Error("Loading aborted");const qt=new _message_handler.MessageHandler(F,$t,q.port),zt=new WorkerTransport(qt,E,Xt,yt,Tt);E._transport=zt,qt.send("Ready",null)})}).catch(E._capability.reject),E}async function _fetchDocument(N,E){if(N.destroyed)throw new Error("Worker was destroyed");const F=await N.messageHandler.sendWithPromise("GetDocRequest",E,E.data?[E.data.buffer]:null);if(N.destroyed)throw new Error("Worker was destroyed");return F}function getUrlProp(N){if(N instanceof URL)return N.href;try{return new URL(N,window.location).href}catch{if(_util.isNodeJS&&typeof N=="string")return N}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(N){if(_util.isNodeJS&&typeof Buffer<"u"&&N instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(N instanceof Uint8Array&&N.byteLength===N.buffer.byteLength)return N;if(typeof N=="string")return(0,_util.stringToBytes)(N);if(typeof N=="object"&&!isNaN(N==null?void 0:N.length)||(0,_util.isArrayBuffer)(N))return new Uint8Array(N);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${fe(e,t)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var E,F,P;this.destroyed=!0;try{(E=this._worker)!=null&&E.port&&(this._worker._pendingDestroy=!0),await((F=this._transport)==null?void 0:F.destroy())}catch(W){throw(P=this._worker)!=null&&P.port&&delete this._worker._pendingDestroy,W}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};t=new WeakMap,j(e,t,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(E,F,P=!1,W=null){this.length=E,this.initialData=F,this.progressiveDone=P,this.contentDispositionFilename=W,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(E){this._rangeListeners.push(E)}addProgressListener(E){this._progressListeners.push(E)}addProgressiveReadListener(E){this._progressiveReadListeners.push(E)}addProgressiveDoneListener(E){this._progressiveDoneListeners.push(E)}onDataRange(E,F){for(const P of this._rangeListeners)P(E,F)}onDataProgress(E,F){this._readyCapability.promise.then(()=>{for(const P of this._progressListeners)P(E,F)})}onDataProgressiveRead(E){this._readyCapability.promise.then(()=>{for(const F of this._progressiveReadListeners)F(E)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const E of this._progressiveDoneListeners)E()})}transportReady(){this._readyCapability.resolve()}requestDataRange(E,F){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(E,F){this._pdfInfo=E,this._transport=F,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(P=>{if(!P)return P;const W=[];for(const z in P)W.push(...P[z]);return W}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(E){return this._transport.getPage(E)}getPageIndex(E){return this._transport.getPageIndex(E)}getDestinations(){return this._transport.getDestinations()}getDestination(E){return this._transport.getDestination(E)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(E=!1){return this._transport.startCleanup(E||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(E,F,P,W=!1){j(this,r);j(this,a);j(this,n,null);j(this,s,!1);this._pageIndex=E,this._pageInfo=F,this._transport=P,this._stats=W?new _display_utils.StatTimer:null,this._pdfBug=W,this.commonObjs=P.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:E,rotation:F=this.rotate,offsetX:P=0,offsetY:W=0,dontFlip:z=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:E,rotation:F,offsetX:P,offsetY:W,dontFlip:z})}getAnnotations({intent:E="display"}={}){const F=this._transport.getRenderingIntent(E);return this._transport.getAnnotations(this._pageIndex,F.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var E;return((E=this._transport._htmlForXfa)==null?void 0:E.children[this._pageIndex])||null}render({canvasContext:E,viewport:F,intent:P="display",annotationMode:W=_util.AnnotationMode.ENABLE,transform:z=null,background:w=null,optionalContentConfigPromise:Y=null,annotationCanvasMap:ot=null,pageColors:et=null,printAnnotationStorage:q=null}){var T,p;(T=this._stats)==null||T.time("Overall");const ht=this._transport.getRenderingIntent(P,W,q);it(this,s,!1),K(this,a,be).call(this),Y||(Y=this._transport.getOptionalContentConfig());let dt=this._intentStates.get(ht.cacheKey);dt||(dt=Object.create(null),this._intentStates.set(ht.cacheKey,dt)),dt.streamReaderCancelTimeout&&(clearTimeout(dt.streamReaderCancelTimeout),dt.streamReaderCancelTimeout=null);const Et=!!(ht.renderingIntent&_util.RenderingIntentFlag.PRINT);dt.displayReadyCapability||(dt.displayReadyCapability=new _util.PromiseCapability,dt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(ht));const gt=_=>{var I,k;dt.renderTasks.delete(G),(this._maybeCleanupAfterRender||Et)&&it(this,s,!0),K(this,r,he).call(this,!Et),_?(G.capability.reject(_),this._abortOperatorList({intentState:dt,reason:_ instanceof Error?_:new Error(_)})):G.capability.resolve(),(I=this._stats)==null||I.timeEnd("Rendering"),(k=this._stats)==null||k.timeEnd("Overall")},G=new InternalRenderTask({callback:gt,params:{canvasContext:E,viewport:F,transform:z,background:w},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:ot,operatorList:dt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Et,pdfBug:this._pdfBug,pageColors:et});(dt.renderTasks||(dt.renderTasks=new Set)).add(G);const u=G.task;return Promise.all([dt.displayReadyCapability.promise,Y]).then(([_,I])=>{var k;if(this.destroyed){gt();return}(k=this._stats)==null||k.time("Rendering"),G.initializeGraphics({transparency:_,optionalContentConfig:I}),G.operatorListChanged()}).catch(gt),u}getOperatorList({intent:E="display",annotationMode:F=_util.AnnotationMode.ENABLE,printAnnotationStorage:P=null}={}){var ot;function W(){w.operatorList.lastChunk&&(w.opListReadCapability.resolve(w.operatorList),w.renderTasks.delete(Y))}const z=this._transport.getRenderingIntent(E,F,P,!0);let w=this._intentStates.get(z.cacheKey);w||(w=Object.create(null),this._intentStates.set(z.cacheKey,w));let Y;return w.opListReadCapability||(Y=Object.create(null),Y.operatorListChanged=W,w.opListReadCapability=new _util.PromiseCapability,(w.renderTasks||(w.renderTasks=new Set)).add(Y),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(ot=this._stats)==null||ot.time("Page Request"),this._pumpOperatorList(z)),w.opListReadCapability.promise}streamTextContent({includeMarkedContent:E=!1,disableNormalization:F=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:E===!0,disableNormalization:F===!0},{highWaterMark:100,size(P){return P.items.length}})}getTextContent(E={}){if(this._transport._htmlForXfa)return this.getXfa().then(P=>_xfa_text.XfaText.textContent(P));const F=this.streamTextContent(E);return new Promise(function(P,W){function z(){w.read().then(function({value:ot,done:et}){if(et){P(Y);return}Object.assign(Y.styles,ot.styles),Y.items.push(...ot.items),z()},W)}const w=F.getReader(),Y={items:[],styles:Object.create(null)};z()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const E=[];for(const F of this._intentStates.values())if(this._abortOperatorList({intentState:F,reason:new Error("Page was destroyed."),force:!0}),!F.opListReadCapability)for(const P of F.renderTasks)E.push(P.completed),P.cancel();return this.objs.clear(),it(this,s,!1),K(this,a,be).call(this),Promise.all(E)}cleanup(E=!1){it(this,s,!0);const F=K(this,r,he).call(this,!1);return E&&F&&this._stats&&(this._stats=new _display_utils.StatTimer),F}_startRenderPage(E,F){var W,z;const P=this._intentStates.get(F);P&&((W=this._stats)==null||W.timeEnd("Page Request"),(z=P.displayReadyCapability)==null||z.resolve(E))}_renderPageChunk(E,F){for(let P=0,W=E.length;P<W;P++)F.operatorList.fnArray.push(E.fnArray[P]),F.operatorList.argsArray.push(E.argsArray[P]);F.operatorList.lastChunk=E.lastChunk,F.operatorList.separateAnnots=E.separateAnnots;for(const P of F.renderTasks)P.operatorListChanged();E.lastChunk&&K(this,r,he).call(this,!0)}_pumpOperatorList({renderingIntent:E,cacheKey:F,annotationStorageSerializable:P}){const{map:W,transfers:z}=P,w=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:E,cacheKey:F,annotationStorage:W},z).getReader(),Y=this._intentStates.get(F);Y.streamReader=w;const ot=()=>{w.read().then(({value:et,done:q})=>{if(q){Y.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(et,Y),ot())},et=>{if(Y.streamReader=null,!this._transport.destroyed){if(Y.operatorList){Y.operatorList.lastChunk=!0;for(const q of Y.renderTasks)q.operatorListChanged();K(this,r,he).call(this,!0)}if(Y.displayReadyCapability)Y.displayReadyCapability.reject(et);else if(Y.opListReadCapability)Y.opListReadCapability.reject(et);else throw et}})};ot()}_abortOperatorList({intentState:E,reason:F,force:P=!1}){if(E.streamReader){if(E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null),!P){if(E.renderTasks.size>0)return;if(F instanceof _display_utils.RenderingCancelledException){let W=RENDERING_CANCELLED_TIMEOUT;F.extraDelay>0&&F.extraDelay<1e3&&(W+=F.extraDelay),E.streamReaderCancelTimeout=setTimeout(()=>{E.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:E,reason:F,force:!0})},W);return}}if(E.streamReader.cancel(new _util.AbortException(F.message)).catch(()=>{}),E.streamReader=null,!this._transport.destroyed){for(const[W,z]of this._intentStates)if(z===E){this._intentStates.delete(W);break}this.cleanup()}}}get stats(){return this._stats}}n=new WeakMap,s=new WeakMap,r=new WeakSet,he=function(E=!1){if(K(this,a,be).call(this),!l(this,s)||this.destroyed)return!1;if(E)return it(this,n,setTimeout(()=>{it(this,n,null),K(this,r,he).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:F,operatorList:P}of this._intentStates.values())if(F.size>0||!P.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),it(this,s,!1),!0},a=new WeakSet,be=function(){l(this,n)&&(clearTimeout(l(this,n)),it(this,n,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){j(this,o,new Set);j(this,m,Promise.resolve())}postMessage(E,F){const P={data:structuredClone(E,F?{transfer:F}:null)};l(this,m).then(()=>{for(const W of l(this,o))W.call(this,P)})}addEventListener(E,F){l(this,o).add(F)}removeEventListener(E,F){l(this,o).delete(F)}terminate(){l(this,o).clear()}}o=new WeakMap,m=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const N=(h=document==null?void 0:document.currentScript)==null?void 0:h.src;N&&(PDFWorkerUtil.fallbackWorkerSrc=N.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(N,E){let F;try{if(F=new URL(N),!F.origin||F.origin==="null")return!1}catch{return!1}const P=new URL(E,F);return F.origin===P.origin},PDFWorkerUtil.createCDNWrapper=function(N){const E=`importScripts("${N}");`;return URL.createObjectURL(new Blob([E]))}}const _PDFWorker=class _PDFWorker{constructor({name:N=null,port:E=null,verbosity:F=(0,_util.getVerbosityLevel)()}={}){var P;if(this.name=N,this.destroyed=!1,this.verbosity=F,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,E){if((P=l(_PDFWorker,A))!=null&&P.has(E))throw new Error("Cannot use more than one PDFWorker per port.");(l(_PDFWorker,A)||it(_PDFWorker,A,new WeakMap)).set(E,this),this._initializeFromPort(E);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(N){this._port=N,this._messageHandler=new _message_handler.MessageHandler("main","worker",N),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:N}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,N)||(N=PDFWorkerUtil.createCDNWrapper(new URL(N,window.location).href));const E=new Worker(N),F=new _message_handler.MessageHandler("main","worker",E),P=()=>{E.removeEventListener("error",W),F.destroy(),E.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},W=()=>{this._webWorker||P()};E.addEventListener("error",W),F.on("test",w=>{if(E.removeEventListener("error",W),this.destroyed){P();return}w?(this._messageHandler=F,this._port=E,this._webWorker=E,this._readyCapability.resolve(),F.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),F.destroy(),E.terminate())}),F.on("ready",w=>{if(E.removeEventListener("error",W),this.destroyed){P();return}try{z()}catch{this._setupFakeWorker()}});const z=()=>{const w=new Uint8Array;F.send("test",w,[w.buffer])};z();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(N=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const E=new LoopbackPort;this._port=E;const F=`fake${PDFWorkerUtil.fakeWorkerId++}`,P=new _message_handler.MessageHandler(F+"_worker",F,E);N.setup(P,E);const W=new _message_handler.MessageHandler(F,F+"_worker",E);this._messageHandler=W,this._readyCapability.resolve(),W.send("configure",{verbosity:this.verbosity})}).catch(N=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${N.message}".`))})}destroy(){var N;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(N=l(_PDFWorker,A))==null||N.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(N){var F;if(!(N!=null&&N.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const E=(F=l(this,A))==null?void 0:F.get(N.port);if(E){if(E._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return E}return new _PDFWorker(N)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var N;try{return((N=globalThis.pdfjsWorker)==null?void 0:N.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};A=new WeakMap,j(_PDFWorker,A,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(E,F,P,W,z){j(this,S);j(this,y,new Map);j(this,C,new Map);j(this,D,new Map);j(this,b,null);this.messageHandler=E,this.loadingTask=F,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:W.ownerDocument,styleElement:W.styleElement}),this._params=W,this.canvasFactory=z.canvasFactory,this.filterFactory=z.filterFactory,this.cMapReaderFactory=z.cMapReaderFactory,this.standardFontDataFactory=z.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=P,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(E,F=_util.AnnotationMode.ENABLE,P=null,W=!1){let z=_util.RenderingIntentFlag.DISPLAY,w=_annotation_storage.SerializableEmpty;switch(E){case"any":z=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":z=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${E}`)}switch(F){case _util.AnnotationMode.DISABLE:z+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:z+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:z+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,w=(z&_util.RenderingIntentFlag.PRINT&&P instanceof _annotation_storage.PrintAnnotationStorage?P:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${F}`)}return W&&(z+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:z,cacheKey:`${z}_${w.hash}`,annotationStorageSerializable:w}}destroy(){var P;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(P=l(this,b))==null||P.reject(new Error("Worker was destroyed during onPassword callback"));const E=[];for(const W of l(this,C).values())E.push(W._destroy());l(this,C).clear(),l(this,D).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const F=this.messageHandler.sendWithPromise("Terminate",null);return E.push(F),Promise.all(E).then(()=>{var W;this.commonObjs.clear(),this.fontLoader.clear(),l(this,y).clear(),this.filterFactory.destroy(),(W=this._networkStream)==null||W.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:E,loadingTask:F}=this;E.on("GetReader",(P,W)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=z=>{this._lastProgress={loaded:z.loaded,total:z.total}},W.onPull=()=>{this._fullReader.read().then(function({value:z,done:w}){if(w){W.close();return}(0,_util.assert)(z instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),W.enqueue(new Uint8Array(z),1,[z])}).catch(z=>{W.error(z)})},W.onCancel=z=>{this._fullReader.cancel(z),W.ready.catch(w=>{if(!this.destroyed)throw w})}}),E.on("ReaderHeadersReady",P=>{const W=new _util.PromiseCapability,z=this._fullReader;return z.headersReady.then(()=>{var w;(!z.isStreamingSupported||!z.isRangeSupported)&&(this._lastProgress&&((w=F.onProgress)==null||w.call(F,this._lastProgress)),z.onProgress=Y=>{var ot;(ot=F.onProgress)==null||ot.call(F,{loaded:Y.loaded,total:Y.total})}),W.resolve({isStreamingSupported:z.isStreamingSupported,isRangeSupported:z.isRangeSupported,contentLength:z.contentLength})},W.reject),W.promise}),E.on("GetRangeReader",(P,W)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const z=this._networkStream.getRangeReader(P.begin,P.end);if(!z){W.close();return}W.onPull=()=>{z.read().then(function({value:w,done:Y}){if(Y){W.close();return}(0,_util.assert)(w instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),W.enqueue(new Uint8Array(w),1,[w])}).catch(w=>{W.error(w)})},W.onCancel=w=>{z.cancel(w),W.ready.catch(Y=>{if(!this.destroyed)throw Y})}}),E.on("GetDoc",({pdfInfo:P})=>{this._numPages=P.numPages,this._htmlForXfa=P.htmlForXfa,delete P.htmlForXfa,F._capability.resolve(new PDFDocumentProxy(P,this))}),E.on("DocException",function(P){let W;switch(P.name){case"PasswordException":W=new _util.PasswordException(P.message,P.code);break;case"InvalidPDFException":W=new _util.InvalidPDFException(P.message);break;case"MissingPDFException":W=new _util.MissingPDFException(P.message);break;case"UnexpectedResponseException":W=new _util.UnexpectedResponseException(P.message,P.status);break;case"UnknownErrorException":W=new _util.UnknownErrorException(P.message,P.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}F._capability.reject(W)}),E.on("PasswordRequest",P=>{if(it(this,b,new _util.PromiseCapability),F.onPassword){const W=z=>{z instanceof Error?l(this,b).reject(z):l(this,b).resolve({password:z})};try{F.onPassword(W,P.code)}catch(z){l(this,b).reject(z)}}else l(this,b).reject(new _util.PasswordException(P.message,P.code));return l(this,b).promise}),E.on("DataLoaded",P=>{var W;(W=F.onProgress)==null||W.call(F,{loaded:P.length,total:P.length}),this.downloadInfoCapability.resolve(P)}),E.on("StartRenderPage",P=>{this.destroyed||l(this,C).get(P.pageIndex)._startRenderPage(P.transparency,P.cacheKey)}),E.on("commonobj",([P,W,z])=>{var w;if(!this.destroyed&&!this.commonObjs.has(P))switch(W){case"Font":const Y=this._params;if("error"in z){const q=z.error;(0,_util.warn)(`Error during font loading: ${q}`),this.commonObjs.resolve(P,q);break}const ot=Y.pdfBug&&((w=globalThis.FontInspector)!=null&&w.enabled)?(q,ht)=>globalThis.FontInspector.fontAdded(q,ht):null,et=new _font_loader.FontFaceObject(z,{isEvalSupported:Y.isEvalSupported,disableFontFace:Y.disableFontFace,ignoreErrors:Y.ignoreErrors,inspectFont:ot});this.fontLoader.bind(et).catch(q=>E.sendWithPromise("FontFallback",{id:P})).finally(()=>{!Y.fontExtraProperties&&et.data&&(et.data=null),this.commonObjs.resolve(P,et)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(P,z);break;default:throw new Error(`Got unknown common object type ${W}`)}}),E.on("obj",([P,W,z,w])=>{var ot;if(this.destroyed)return;const Y=l(this,C).get(W);if(!Y.objs.has(P))switch(z){case"Image":if(Y.objs.resolve(P,w),w){let et;if(w.bitmap){const{width:q,height:ht}=w;et=q*ht*4}else et=((ot=w.data)==null?void 0:ot.length)||0;et>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Y._maybeCleanupAfterRender=!0)}break;case"Pattern":Y.objs.resolve(P,w);break;default:throw new Error(`Got unknown object type ${z}`)}}),E.on("DocProgress",P=>{var W;this.destroyed||((W=F.onProgress)==null||W.call(F,{loaded:P.loaded,total:P.total}))}),E.on("FetchBuiltInCMap",P=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(P):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),E.on("FetchStandardFontData",P=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(P):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var P;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:E,transfers:F}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:E,filename:((P=this._fullReader)==null?void 0:P.filename)??null},F).finally(()=>{this.annotationStorage.resetModified()})}getPage(E){if(!Number.isInteger(E)||E<=0||E>this._numPages)return Promise.reject(new Error("Invalid page request."));const F=E-1,P=l(this,D).get(F);if(P)return P;const W=this.messageHandler.sendWithPromise("GetPage",{pageIndex:F}).then(z=>{if(this.destroyed)throw new Error("Transport destroyed");const w=new PDFPageProxy(F,z,this,this._params.pdfBug);return l(this,C).set(F,w),w});return l(this,D).set(F,W),W}getPageIndex(E){return typeof E!="object"||E===null||!Number.isInteger(E.num)||E.num<0||!Number.isInteger(E.gen)||E.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:E.num,gen:E.gen})}getAnnotations(E,F){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:E,intent:F})}getFieldObjects(){return K(this,S,De).call(this,"GetFieldObjects")}hasJSActions(){return K(this,S,De).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(E){return typeof E!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:E})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return K(this,S,De).call(this,"GetDocJSActions")}getPageJSActions(E){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:E})}getStructTree(E){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:E})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(E=>new _optional_content_config.OptionalContentConfig(E))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const E="GetMetadata",F=l(this,y).get(E);if(F)return F;const P=this.messageHandler.sendWithPromise(E,null).then(W=>{var z,w;return{info:W[0],metadata:W[1]?new _metadata.Metadata(W[1]):null,contentDispositionFilename:((z=this._fullReader)==null?void 0:z.filename)??null,contentLength:((w=this._fullReader)==null?void 0:w.contentLength)??null}});return l(this,y).set(E,P),P}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(E=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const F of l(this,C).values())if(!F.cleanup())throw new Error(`startCleanup: Page ${F.pageNumber} is currently rendering.`);this.commonObjs.clear(),E||this.fontLoader.clear(),l(this,y).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:E,enableXfa:F}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:E,enableXfa:F})}}y=new WeakMap,C=new WeakMap,D=new WeakMap,b=new WeakMap,S=new WeakSet,De=function(E,F=null){const P=l(this,y).get(E);if(P)return P;const W=this.messageHandler.sendWithPromise(E,F);return l(this,y).set(E,W),W};class PDFObjects{constructor(){j(this,M);j(this,v,Object.create(null))}get(E,F=null){if(F){const W=K(this,M,Be).call(this,E);return W.capability.promise.then(()=>F(W.data)),null}const P=l(this,v)[E];if(!(P!=null&&P.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${E}.`);return P.data}has(E){var F;return((F=l(this,v)[E])==null?void 0:F.capability.settled)||!1}resolve(E,F=null){const P=K(this,M,Be).call(this,E);P.data=F,P.capability.resolve()}clear(){var E;for(const F in l(this,v)){const{data:P}=l(this,v)[F];(E=P==null?void 0:P.bitmap)==null||E.close()}it(this,v,Object.create(null))}}v=new WeakMap,M=new WeakSet,Be=function(E){var F;return(F=l(this,v))[E]||(F[E]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(E){j(this,g,null);it(this,g,E),this.onContinue=null}get promise(){return l(this,g).capability.promise}cancel(E=0){l(this,g).cancel(null,E)}get separateAnnots(){const{separateAnnots:E}=l(this,g).operatorList;if(!E)return!1;const{annotationCanvasMap:F}=l(this,g);return E.form||E.canvas&&(F==null?void 0:F.size)>0}}g=new WeakMap,exports.RenderTask=RenderTask;const L=class L{constructor({callback:E,params:F,objs:P,commonObjs:W,annotationCanvasMap:z,operatorList:w,pageIndex:Y,canvasFactory:ot,filterFactory:et,useRequestAnimationFrame:q=!1,pdfBug:ht=!1,pageColors:dt=null}){this.callback=E,this.params=F,this.objs=P,this.commonObjs=W,this.annotationCanvasMap=z,this.operatorListIdx=null,this.operatorList=w,this._pageIndex=Y,this.canvasFactory=ot,this.filterFactory=et,this._pdfBug=ht,this.pageColors=dt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=q===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=F.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:E=!1,optionalContentConfig:F}){var Y,ot;if(this.cancelled)return;if(this._canvas){if(l(L,f).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(L,f).add(this._canvas)}this._pdfBug&&((Y=globalThis.StepperManager)!=null&&Y.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:P,viewport:W,transform:z,background:w}=this.params;this.gfx=new _canvas.CanvasGraphics(P,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:F},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:z,viewport:W,transparency:E,background:w}),this.operatorListIdx=0,this.graphicsReady=!0,(ot=this.graphicsReadyCallback)==null||ot.call(this)}cancel(E=null,F=0){var P;this.running=!1,this.cancelled=!0,(P=this.gfx)==null||P.endDrawing(),l(L,f).delete(this._canvas),this.callback(E||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,F))}operatorListChanged(){var E;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(E=this.stepper)==null||E.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(L,f).delete(this._canvas),this.callback())))}};f=new WeakMap,j(L,f,new WeakSet);let InternalRenderTask=L;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(t,e,n)=>{var m,h,A,Sn,C;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var s=n(1),r=n(4),i=n(8);const a=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=a;class c{constructor(){j(this,A);j(this,m,!1);j(this,h,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(b,S){const O=l(this,h).get(b);return O===void 0?S:Object.assign(S,O)}getRawValue(b){return l(this,h).get(b)}remove(b){if(l(this,h).delete(b),l(this,h).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const S of l(this,h).values())if(S instanceof r.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(b,S){const O=l(this,h).get(b);let v=!1;if(O!==void 0)for(const[M,R]of Object.entries(S))O[M]!==R&&(v=!0,O[M]=R);else v=!0,l(this,h).set(b,S);v&&K(this,A,Sn).call(this),S instanceof r.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(S.constructor._type)}has(b){return l(this,h).has(b)}getAll(){return l(this,h).size>0?(0,s.objectFromMap)(l(this,h)):null}setAll(b){for(const[S,O]of Object.entries(b))this.setValue(S,O)}get size(){return l(this,h).size}resetModified(){l(this,m)&&(it(this,m,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new o(this)}get serializable(){if(l(this,h).size===0)return a;const b=new Map,S=new i.MurmurHash3_64,O=[],v=Object.create(null);let M=!1;for(const[R,g]of l(this,h)){const f=g instanceof r.AnnotationEditor?g.serialize(!1,v):g;f&&(b.set(R,f),S.update(`${R}:${JSON.stringify(f)}`),M||(M=!!f.bitmap))}if(M)for(const R of b.values())R.bitmap&&O.push(R.bitmap);return b.size>0?{map:b,hash:S.hexdigest(),transfers:O}:a}}m=new WeakMap,h=new WeakMap,A=new WeakSet,Sn=function(){l(this,m)||(it(this,m,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=c;class o extends c{constructor(S){super();j(this,C,void 0);const{map:O,hash:v,transfers:M}=S.serializable,R=structuredClone(O,M?{transfer:M}:null);it(this,C,{map:R,hash:v,transfers:M})}get print(){(0,s.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,C)}}C=new WeakMap,e.PrintAnnotationStorage=o},(t,e,n)=>{var o,m,h,A,y,C,D,b,S,O,v,M,R,g,f,Ue,N,He,F,$e,W,je,w,In,ot,Cn,q,bn,dt,qe,gt,Dn;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var s=n(5),r=n(1),i=n(6);const u=class u{constructor(p){j(this,f);j(this,N);j(this,W);j(this,w);j(this,ot);j(this,q);j(this,dt);j(this,gt);j(this,o,"");j(this,m,!1);j(this,h,null);j(this,A,null);j(this,y,null);j(this,C,!1);j(this,D,null);j(this,b,this.focusin.bind(this));j(this,S,this.focusout.bind(this));j(this,O,!1);j(this,v,!1);j(this,M,!1);ne(this,"_initialOptions",Object.create(null));ne(this,"_uiManager",null);ne(this,"_focusEventsAllowed",!0);ne(this,"_l10nPromise",null);j(this,R,!1);j(this,g,u._zIndex++);this.constructor===u&&(0,r.unreachable)("Cannot initialize AnnotationEditor."),this.parent=p.parent,this.id=p.id,this.width=this.height=null,this.pageIndex=p.parent.pageIndex,this.name=p.name,this.div=null,this._uiManager=p.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=p.isCentered,this._structTreeParentId=null;const{rotation:_,rawDims:{pageWidth:I,pageHeight:k,pageX:B,pageY:X}}=this.parent.viewport;this.rotation=_,this.pageRotation=(360+_-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[I,k],this.pageTranslation=[B,X];const[nt,Q]=this.parentDimensions;this.x=p.x/nt,this.y=p.y/Q,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,r.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(p){const _=new c({id:p.parent.getNextId(),parent:p.parent,uiManager:p._uiManager});_.annotationElementId=p.annotationElementId,_.deleted=!0,_._uiManager.addToAnnotationStorage(_)}static initialize(p,_=null){if(u._l10nPromise||(u._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(k=>[k,p.get(k)]))),_==null?void 0:_.strings)for(const k of _.strings)u._l10nPromise.set(k,p.get(k));if(u._borderLineWidth!==-1)return;const I=getComputedStyle(document.documentElement);u._borderLineWidth=parseFloat(I.getPropertyValue("--outline-width"))||0}static updateDefaultParams(p,_){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(p){return!1}static paste(p,_){(0,r.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,R)}set _isDraggable(p){var _;it(this,R,p),(_=this.div)==null||_.classList.toggle("draggable",p)}center(){const[p,_]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*_/(p*2),this.y+=this.width*p/(_*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*_/(p*2),this.y-=this.width*p/(_*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(p){this._uiManager.addCommands(p)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,g)}setParent(p){p!==null&&(this.pageIndex=p.pageIndex,this.pageDimensions=p.pageDimensions),this.parent=p}focusin(p){this._focusEventsAllowed&&(l(this,O)?it(this,O,!1):this.parent.setSelected(this))}focusout(p){var _,I;!this._focusEventsAllowed||!this.isAttachedToDOM||(_=p.relatedTarget)!=null&&_.closest(`#${this.id}`)||(p.preventDefault(),(I=this.parent)!=null&&I.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(p,_,I,k){const[B,X]=this.parentDimensions;[I,k]=this.screenToPageTranslation(I,k),this.x=(p+I)/B,this.y=(_+k)/X,this.fixAndSetPosition()}translate(p,_){K(this,f,Ue).call(this,this.parentDimensions,p,_)}translateInPage(p,_){K(this,f,Ue).call(this,this.pageDimensions,p,_),this.div.scrollIntoView({block:"nearest"})}drag(p,_){const[I,k]=this.parentDimensions;if(this.x+=p/I,this.y+=_/k,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:lt,y:pt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,lt,pt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:B,y:X}=this;const[nt,Q]=K(this,N,He).call(this);B+=nt,X+=Q,this.div.style.left=`${(100*B).toFixed(2)}%`,this.div.style.top=`${(100*X).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[p,_]=this.pageDimensions;let{x:I,y:k,width:B,height:X}=this;switch(B*=p,X*=_,I*=p,k*=_,this.rotation){case 0:I=Math.max(0,Math.min(p-B,I)),k=Math.max(0,Math.min(_-X,k));break;case 90:I=Math.max(0,Math.min(p-X,I)),k=Math.min(_,Math.max(B,k));break;case 180:I=Math.min(p,Math.max(B,I)),k=Math.min(_,Math.max(X,k));break;case 270:I=Math.min(p,Math.max(X,I)),k=Math.max(0,Math.min(_-B,k));break}this.x=I/=p,this.y=k/=_;const[nt,Q]=K(this,N,He).call(this);I+=nt,k+=Q;const{style:lt}=this.div;lt.left=`${(100*I).toFixed(2)}%`,lt.top=`${(100*k).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(p,_){var I;return K(I=u,F,$e).call(I,p,_,this.parentRotation)}pageTranslationToScreen(p,_){var I;return K(I=u,F,$e).call(I,p,_,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:p,pageDimensions:[_,I]}=this,k=_*p,B=I*p;return r.FeatureTest.isCSSRoundSupported?[Math.round(k),Math.round(B)]:[k,B]}setDims(p,_){var B;const[I,k]=this.parentDimensions;this.div.style.width=`${(100*p/I).toFixed(2)}%`,l(this,C)||(this.div.style.height=`${(100*_/k).toFixed(2)}%`),(B=l(this,h))==null||B.classList.toggle("small",p<u.SMALL_EDITOR_SIZE||_<u.SMALL_EDITOR_SIZE)}fixDims(){const{style:p}=this.div,{height:_,width:I}=p,k=I.endsWith("%"),B=!l(this,C)&&_.endsWith("%");if(k&&B)return;const[X,nt]=this.parentDimensions;k||(p.width=`${(100*parseFloat(I)/X).toFixed(2)}%`),!l(this,C)&&!B&&(p.height=`${(100*parseFloat(_)/nt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(l(this,h))return;const p=it(this,h,document.createElement("button"));p.className="altText";const _=await u._l10nPromise.get("editor_alt_text_button_label");p.textContent=_,p.setAttribute("aria-label",_),p.tabIndex="0",p.addEventListener("contextmenu",i.noContextMenu),p.addEventListener("pointerdown",I=>I.stopPropagation()),p.addEventListener("click",I=>{I.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),p.addEventListener("keydown",I=>{I.target===p&&I.key==="Enter"&&(I.preventDefault(),this._uiManager.editAltText(this))}),K(this,dt,qe).call(this),this.div.append(p),u.SMALL_EDITOR_SIZE||(u.SMALL_EDITOR_SIZE=Math.min(128,Math.round(p.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:l(this,o),decorative:l(this,m)}}set altTextData({altText:p,decorative:_}){l(this,o)===p&&l(this,m)===_||(it(this,o,p),it(this,m,_),K(this,dt,qe).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",l(this,b)),this.div.addEventListener("focusout",l(this,S));const[p,_]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*_/p).toFixed(2)}%`,this.div.style.maxHeight=`${(100*p/_).toFixed(2)}%`);const[I,k]=this.getInitialTranslation();return this.translate(I,k),(0,s.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(p){const{isMac:_}=r.FeatureTest.platform;if(p.button!==0||p.ctrlKey&&_){p.preventDefault();return}it(this,O,!0),K(this,gt,Dn).call(this,p)}moveInDOM(){var p;(p=this.parent)==null||p.moveEditorInDOM(this)}_setParentAndPosition(p,_,I){p.changeParent(this),this.x=_,this.y=I,this.fixAndSetPosition()}getRect(p,_){const I=this.parentScale,[k,B]=this.pageDimensions,[X,nt]=this.pageTranslation,Q=p/I,lt=_/I,pt=this.x*k,Ct=this.y*B,mt=this.width*k,Pt=this.height*B;switch(this.rotation){case 0:return[pt+Q+X,B-Ct-lt-Pt+nt,pt+Q+mt+X,B-Ct-lt+nt];case 90:return[pt+lt+X,B-Ct+Q+nt,pt+lt+Pt+X,B-Ct+Q+mt+nt];case 180:return[pt-Q-mt+X,B-Ct+lt+nt,pt-Q+X,B-Ct+lt+Pt+nt];case 270:return[pt-lt-Pt+X,B-Ct-Q-mt+nt,pt-lt+X,B-Ct-Q+nt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(p,_){const[I,k,B,X]=p,nt=B-I,Q=X-k;switch(this.rotation){case 0:return[I,_-X,nt,Q];case 90:return[I,_-k,Q,nt];case 180:return[B,_-k,nt,Q];case 270:return[B,_-X,Q,nt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){it(this,M,!0)}disableEditMode(){it(this,M,!1)}isInEditMode(){return l(this,M)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var p,_;(p=this.div)==null||p.addEventListener("focusin",l(this,b)),(_=this.div)==null||_.addEventListener("focusout",l(this,S))}serialize(p=!1,_=null){(0,r.unreachable)("An editor must be serializable")}static deserialize(p,_,I){const k=new this.prototype.constructor({parent:_,id:_.getNextId(),uiManager:I});k.rotation=p.rotation;const[B,X]=k.pageDimensions,[nt,Q,lt,pt]=k.getRectInCurrentCoords(p.rect,X);return k.x=nt/B,k.y=Q/X,k.width=lt/B,k.height=pt/X,k}remove(){var p;this.div.removeEventListener("focusin",l(this,b)),this.div.removeEventListener("focusout",l(this,S)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(p=l(this,h))==null||p.remove(),it(this,h,null),it(this,A,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(K(this,w,In).call(this),l(this,D).classList.remove("hidden"))}select(){var p;this.makeResizable(),(p=this.div)==null||p.classList.add("selectedEditor")}unselect(){var p,_,I;(p=l(this,D))==null||p.classList.add("hidden"),(_=this.div)==null||_.classList.remove("selectedEditor"),(I=this.div)!=null&&I.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(p,_){}disableEditing(){l(this,h)&&(l(this,h).hidden=!0)}enableEditing(){l(this,h)&&(l(this,h).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return l(this,v)}set isEditing(p){it(this,v,p),this.parent&&(p?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(p,_){it(this,C,!0);const I=p/_,{style:k}=this.div;k.aspectRatio=I,k.height="auto"}static get MIN_SIZE(){return 16}};o=new WeakMap,m=new WeakMap,h=new WeakMap,A=new WeakMap,y=new WeakMap,C=new WeakMap,D=new WeakMap,b=new WeakMap,S=new WeakMap,O=new WeakMap,v=new WeakMap,M=new WeakMap,R=new WeakMap,g=new WeakMap,f=new WeakSet,Ue=function([p,_],I,k){[I,k]=this.screenToPageTranslation(I,k),this.x+=I/p,this.y+=k/_,this.fixAndSetPosition()},N=new WeakSet,He=function(){const[p,_]=this.parentDimensions,{_borderLineWidth:I}=u,k=I/p,B=I/_;switch(this.rotation){case 90:return[-k,B];case 180:return[k,B];case 270:return[k,-B];default:return[-k,-B]}},F=new WeakSet,$e=function(p,_,I){switch(I){case 90:return[_,-p];case 180:return[-p,-_];case 270:return[-_,p];default:return[p,_]}},W=new WeakSet,je=function(p){switch(p){case 90:{const[_,I]=this.pageDimensions;return[0,-_/I,I/_,0]}case 180:return[-1,0,0,-1];case 270:{const[_,I]=this.pageDimensions;return[0,_/I,-I/_,0]}default:return[1,0,0,1]}},w=new WeakSet,In=function(){if(l(this,D))return;it(this,D,document.createElement("div")),l(this,D).classList.add("resizers");const p=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||p.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const _ of p){const I=document.createElement("div");l(this,D).append(I),I.classList.add("resizer",_),I.addEventListener("pointerdown",K(this,ot,Cn).bind(this,_)),I.addEventListener("contextmenu",i.noContextMenu)}this.div.prepend(l(this,D))},ot=new WeakSet,Cn=function(p,_){_.preventDefault();const{isMac:I}=r.FeatureTest.platform;if(_.button!==0||_.ctrlKey&&I)return;const k=K(this,q,bn).bind(this,p),B=this._isDraggable;this._isDraggable=!1;const X={passive:!0,capture:!0};window.addEventListener("pointermove",k,X);const nt=this.x,Q=this.y,lt=this.width,pt=this.height,Ct=this.parent.div.style.cursor,mt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(_.target).cursor;const Pt=()=>{this._isDraggable=B,window.removeEventListener("pointerup",Pt),window.removeEventListener("blur",Pt),window.removeEventListener("pointermove",k,X),this.parent.div.style.cursor=Ct,this.div.style.cursor=mt;const Dt=this.x,xt=this.y,Bt=this.width,ft=this.height;Dt===nt&&xt===Q&&Bt===lt&&ft===pt||this.addCommands({cmd:()=>{this.width=Bt,this.height=ft,this.x=Dt,this.y=xt;const[at,st]=this.parentDimensions;this.setDims(at*Bt,st*ft),this.fixAndSetPosition()},undo:()=>{this.width=lt,this.height=pt,this.x=nt,this.y=Q;const[at,st]=this.parentDimensions;this.setDims(at*lt,st*pt),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Pt),window.addEventListener("blur",Pt)},q=new WeakSet,bn=function(p,_){const[I,k]=this.parentDimensions,B=this.x,X=this.y,nt=this.width,Q=this.height,lt=u.MIN_SIZE/I,pt=u.MIN_SIZE/k,Ct=_t=>Math.round(_t*1e4)/1e4,mt=K(this,W,je).call(this,this.rotation),Pt=(_t,It)=>[mt[0]*_t+mt[2]*It,mt[1]*_t+mt[3]*It],Dt=K(this,W,je).call(this,360-this.rotation),xt=(_t,It)=>[Dt[0]*_t+Dt[2]*It,Dt[1]*_t+Dt[3]*It];let Bt,ft,at=!1,st=!1;switch(p){case"topLeft":at=!0,Bt=(_t,It)=>[0,0],ft=(_t,It)=>[_t,It];break;case"topMiddle":Bt=(_t,It)=>[_t/2,0],ft=(_t,It)=>[_t/2,It];break;case"topRight":at=!0,Bt=(_t,It)=>[_t,0],ft=(_t,It)=>[0,It];break;case"middleRight":st=!0,Bt=(_t,It)=>[_t,It/2],ft=(_t,It)=>[0,It/2];break;case"bottomRight":at=!0,Bt=(_t,It)=>[_t,It],ft=(_t,It)=>[0,0];break;case"bottomMiddle":Bt=(_t,It)=>[_t/2,It],ft=(_t,It)=>[_t/2,0];break;case"bottomLeft":at=!0,Bt=(_t,It)=>[0,It],ft=(_t,It)=>[_t,0];break;case"middleLeft":st=!0,Bt=(_t,It)=>[0,It/2],ft=(_t,It)=>[_t,It/2];break}const Tt=Bt(nt,Q),Nt=ft(nt,Q);let yt=Pt(...Nt);const Ht=Ct(B+yt[0]),jt=Ct(X+yt[1]);let $t=1,Xt=1,[qt,zt]=this.screenToPageTranslation(_.movementX,_.movementY);if([qt,zt]=xt(qt/I,zt/k),at){const _t=Math.hypot(nt,Q);$t=Xt=Math.max(Math.min(Math.hypot(Nt[0]-Tt[0]-qt,Nt[1]-Tt[1]-zt)/_t,1/nt,1/Q),lt/nt,pt/Q)}else st?$t=Math.max(lt,Math.min(1,Math.abs(Nt[0]-Tt[0]-qt)))/nt:Xt=Math.max(pt,Math.min(1,Math.abs(Nt[1]-Tt[1]-zt)))/Q;const Vt=Ct(nt*$t),ut=Ct(Q*Xt);yt=Pt(...ft(Vt,ut));const rt=Ht-yt[0],J=jt-yt[1];this.width=Vt,this.height=ut,this.x=rt,this.y=J,this.setDims(I*Vt,k*ut),this.fixAndSetPosition()},dt=new WeakSet,qe=async function(){var I;const p=l(this,h);if(!p)return;if(!l(this,o)&&!l(this,m)){p.classList.remove("done"),(I=l(this,A))==null||I.remove();return}u._l10nPromise.get("editor_alt_text_edit_button_label").then(k=>{p.setAttribute("aria-label",k)});let _=l(this,A);if(!_){it(this,A,_=document.createElement("span")),_.className="tooltip",_.setAttribute("role","tooltip");const k=_.id=`alt-text-tooltip-${this.id}`;p.setAttribute("aria-describedby",k);const B=100;p.addEventListener("mouseenter",()=>{it(this,y,setTimeout(()=>{it(this,y,null),l(this,A).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},B))}),p.addEventListener("mouseleave",()=>{var X;clearTimeout(l(this,y)),it(this,y,null),(X=l(this,A))==null||X.classList.remove("show")})}p.classList.add("done"),_.innerText=l(this,m)?await u._l10nPromise.get("editor_alt_text_decorative_tooltip"):l(this,o),_.parentNode||p.append(_)},gt=new WeakSet,Dn=function(p){if(!this._isDraggable)return;const _=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let I,k;_&&(I={passive:!0,capture:!0},k=X=>{const[nt,Q]=this.screenToPageTranslation(X.movementX,X.movementY);this._uiManager.dragSelectedEditors(nt,Q)},window.addEventListener("pointermove",k,I));const B=()=>{if(window.removeEventListener("pointerup",B),window.removeEventListener("blur",B),_&&window.removeEventListener("pointermove",k,I),it(this,O,!1),!this._uiManager.endDragSession()){const{isMac:X}=r.FeatureTest.platform;p.ctrlKey&&!X||p.shiftKey||p.metaKey&&X?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",B),window.addEventListener("blur",B)},j(u,F),ne(u,"_borderLineWidth",-1),ne(u,"_colorManager",new s.ColorManager),ne(u,"_zIndex",1),ne(u,"SMALL_EDITOR_SIZE",0);let a=u;e.AnnotationEditor=a;class c extends a{constructor(p){super(p),this.annotationElementId=p.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(t,e,n)=>{var C,D,b,S,O,We,R,g,f,L,N,Nn,P,W,z,w,Y,ot,et,q,ht,dt,Et,gt,G,u,T,p,_,I,k,B,X,nt,Q,lt,pt,Ct,mt,Pt,Dt,xt,Bt,ft,at,st,Tt,yn,yt,Xe,jt,ze,Xt,Ne,zt,Ye,ut,Ve,J,ie,It,ge,te,On,bt,Rn,Ot,Ke,Gt,Ee,St,Qe;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=i,e.opacityToHex=a;var s=n(1),r=n(6);function i(U,d,x){for(const H of x)d.addEventListener(H,U[H].bind(U))}function a(U){return Math.round(Math.min(255,Math.max(1,255*U))).toString(16).padStart(2,"0")}class c{constructor(){j(this,C,0)}getId(){return`${s.AnnotationEditorPrefix}${fe(this,C)._++}`}}C=new WeakMap;const M=class M{constructor(){j(this,O);j(this,D,(0,s.getUuid)());j(this,b,0);j(this,S,null)}static get _isSVGFittingCanvas(){const d='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',x=new OffscreenCanvas(1,3).getContext("2d"),H=new Image;H.src=d;const V=H.decode().then(()=>(x.drawImage(H,0,0,1,1,0,0,1,3),new Uint32Array(x.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,s.shadow)(this,"_isSVGFittingCanvas",V)}async getFromFile(d){const{lastModified:x,name:H,size:V,type:Z}=d;return K(this,O,We).call(this,`${x}_${H}_${V}_${Z}`,d)}async getFromUrl(d){return K(this,O,We).call(this,d,d)}async getFromId(d){l(this,S)||it(this,S,new Map);const x=l(this,S).get(d);return x?x.bitmap?(x.refCounter+=1,x):x.file?this.getFromFile(x.file):this.getFromUrl(x.url):null}getSvgUrl(d){const x=l(this,S).get(d);return x!=null&&x.isSvg?x.svgUrl:null}deleteId(d){l(this,S)||it(this,S,new Map);const x=l(this,S).get(d);x&&(x.refCounter-=1,x.refCounter===0&&(x.bitmap=null))}isValidId(d){return d.startsWith(`image_${l(this,D)}_`)}};D=new WeakMap,b=new WeakMap,S=new WeakMap,O=new WeakSet,We=async function(d,x){l(this,S)||it(this,S,new Map);let H=l(this,S).get(d);if(H===null)return null;if(H!=null&&H.bitmap)return H.refCounter+=1,H;try{H||(H={bitmap:null,id:`image_${l(this,D)}_${fe(this,b)._++}`,refCounter:0,isSvg:!1});let V;if(typeof x=="string"){H.url=x;const Z=await fetch(x);if(!Z.ok)throw new Error(Z.statusText);V=await Z.blob()}else V=H.file=x;if(V.type==="image/svg+xml"){const Z=M._isSVGFittingCanvas,ct=new FileReader,At=new Image,vt=new Promise((Rt,Wt)=>{At.onload=()=>{H.bitmap=At,H.isSvg=!0,Rt()},ct.onload=async()=>{const Mt=H.svgUrl=ct.result;At.src=await Z?`${Mt}#svgView(preserveAspectRatio(none))`:Mt},At.onerror=ct.onerror=Wt});ct.readAsDataURL(V),await vt}else H.bitmap=await createImageBitmap(V);H.refCounter=1}catch(V){console.error(V),H=null}return l(this,S).set(d,H),H&&l(this,S).set(H.id,H),H};let o=M;class m{constructor(d=128){j(this,R,[]);j(this,g,!1);j(this,f,void 0);j(this,L,-1);it(this,f,d)}add({cmd:d,undo:x,mustExec:H,type:V=NaN,overwriteIfSameType:Z=!1,keepUndo:ct=!1}){if(H&&d(),l(this,g))return;const At={cmd:d,undo:x,type:V};if(l(this,L)===-1){l(this,R).length>0&&(l(this,R).length=0),it(this,L,0),l(this,R).push(At);return}if(Z&&l(this,R)[l(this,L)].type===V){ct&&(At.undo=l(this,R)[l(this,L)].undo),l(this,R)[l(this,L)]=At;return}const vt=l(this,L)+1;vt===l(this,f)?l(this,R).splice(0,1):(it(this,L,vt),vt<l(this,R).length&&l(this,R).splice(vt)),l(this,R).push(At)}undo(){l(this,L)!==-1&&(it(this,g,!0),l(this,R)[l(this,L)].undo(),it(this,g,!1),it(this,L,l(this,L)-1))}redo(){l(this,L)<l(this,R).length-1&&(it(this,L,l(this,L)+1),it(this,g,!0),l(this,R)[l(this,L)].cmd(),it(this,g,!1))}hasSomethingToUndo(){return l(this,L)!==-1}hasSomethingToRedo(){return l(this,L)<l(this,R).length-1}destroy(){it(this,R,null)}}R=new WeakMap,g=new WeakMap,f=new WeakMap,L=new WeakMap,e.CommandManager=m;class h{constructor(d){j(this,N);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:x}=s.FeatureTest.platform;for(const[H,V,Z={}]of d)for(const ct of H){const At=ct.startsWith("mac+");x&&At?(this.callbacks.set(ct.slice(4),{callback:V,options:Z}),this.allKeys.add(ct.split("+").at(-1))):!x&&!At&&(this.callbacks.set(ct,{callback:V,options:Z}),this.allKeys.add(ct.split("+").at(-1)))}}exec(d,x){if(!this.allKeys.has(x.key))return;const H=this.callbacks.get(K(this,N,Nn).call(this,x));if(!H)return;const{callback:V,options:{bubbles:Z=!1,args:ct=[],checker:At=null}}=H;At&&!At(d,x)||(V.bind(d,...ct)(),Z||(x.stopPropagation(),x.preventDefault()))}}N=new WeakSet,Nn=function(d){d.altKey&&this.buffer.push("alt"),d.ctrlKey&&this.buffer.push("ctrl"),d.metaKey&&this.buffer.push("meta"),d.shiftKey&&this.buffer.push("shift"),this.buffer.push(d.key);const x=this.buffer.join("+");return this.buffer.length=0,x},e.KeyboardManager=h;const F=class F{get _colors(){const d=new Map([["CanvasText",null],["Canvas",null]]);return(0,r.getColorValues)(d),(0,s.shadow)(this,"_colors",d)}convert(d){const x=(0,r.getRGB)(d);if(!window.matchMedia("(forced-colors: active)").matches)return x;for(const[H,V]of this._colors)if(V.every((Z,ct)=>Z===x[ct]))return F._colorsMapping.get(H);return x}getHexCode(d){const x=this._colors.get(d);return x?s.Util.makeHexColor(...x):d}};ne(F,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let A=F;e.ColorManager=A;const Lt=class Lt{constructor(d,x,H,V,Z,ct){j(this,Tt);j(this,yt);j(this,jt);j(this,Xt);j(this,zt);j(this,ut);j(this,J);j(this,It);j(this,te);j(this,bt);j(this,Ot);j(this,Gt);j(this,St);j(this,P,null);j(this,W,new Map);j(this,z,new Map);j(this,w,null);j(this,Y,null);j(this,ot,new m);j(this,et,0);j(this,q,new Set);j(this,ht,null);j(this,dt,null);j(this,Et,new Set);j(this,gt,null);j(this,G,new c);j(this,u,!1);j(this,T,!1);j(this,p,null);j(this,_,s.AnnotationEditorType.NONE);j(this,I,new Set);j(this,k,null);j(this,B,this.blur.bind(this));j(this,X,this.focus.bind(this));j(this,nt,this.copy.bind(this));j(this,Q,this.cut.bind(this));j(this,lt,this.paste.bind(this));j(this,pt,this.keydown.bind(this));j(this,Ct,this.onEditingAction.bind(this));j(this,mt,this.onPageChanging.bind(this));j(this,Pt,this.onScaleChanging.bind(this));j(this,Dt,this.onRotationChanging.bind(this));j(this,xt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});j(this,Bt,[0,0]);j(this,ft,null);j(this,at,null);j(this,st,null);it(this,at,d),it(this,st,x),it(this,w,H),this._eventBus=V,this._eventBus._on("editingaction",l(this,Ct)),this._eventBus._on("pagechanging",l(this,mt)),this._eventBus._on("scalechanging",l(this,Pt)),this._eventBus._on("rotationchanging",l(this,Dt)),it(this,Y,Z.annotationStorage),it(this,gt,Z.filterFactory),it(this,k,ct),this.viewParameters={realScale:r.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const d=Lt.prototype,x=Z=>{const{activeElement:ct}=document;return ct&&l(Z,at).contains(ct)&&Z.hasSomethingToControl()},H=this.TRANSLATE_SMALL,V=this.TRANSLATE_BIG;return(0,s.shadow)(this,"_keyboardManager",new h([[["ctrl+a","mac+meta+a"],d.selectAll],[["ctrl+z","mac+meta+z"],d.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],d.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],d.delete],[["Escape","mac+Escape"],d.unselectAll],[["ArrowLeft","mac+ArrowLeft"],d.translateSelectedEditors,{args:[-H,0],checker:x}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],d.translateSelectedEditors,{args:[-V,0],checker:x}],[["ArrowRight","mac+ArrowRight"],d.translateSelectedEditors,{args:[H,0],checker:x}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],d.translateSelectedEditors,{args:[V,0],checker:x}],[["ArrowUp","mac+ArrowUp"],d.translateSelectedEditors,{args:[0,-H],checker:x}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],d.translateSelectedEditors,{args:[0,-V],checker:x}],[["ArrowDown","mac+ArrowDown"],d.translateSelectedEditors,{args:[0,H],checker:x}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],d.translateSelectedEditors,{args:[0,V],checker:x}]]))}destroy(){K(this,Xt,Ne).call(this),K(this,yt,Xe).call(this),this._eventBus._off("editingaction",l(this,Ct)),this._eventBus._off("pagechanging",l(this,mt)),this._eventBus._off("scalechanging",l(this,Pt)),this._eventBus._off("rotationchanging",l(this,Dt));for(const d of l(this,z).values())d.destroy();l(this,z).clear(),l(this,W).clear(),l(this,Et).clear(),it(this,P,null),l(this,I).clear(),l(this,ot).destroy(),l(this,w).destroy()}get hcmFilter(){return(0,s.shadow)(this,"hcmFilter",l(this,k)?l(this,gt).addHCMFilter(l(this,k).foreground,l(this,k).background):"none")}get direction(){return(0,s.shadow)(this,"direction",getComputedStyle(l(this,at)).direction)}editAltText(d){var x;(x=l(this,w))==null||x.editAltText(this,d)}onPageChanging({pageNumber:d}){it(this,et,d-1)}focusMainContainer(){l(this,at).focus()}findParent(d,x){for(const H of l(this,z).values()){const{x:V,y:Z,width:ct,height:At}=H.div.getBoundingClientRect();if(d>=V&&d<=V+ct&&x>=Z&&x<=Z+At)return H}return null}disableUserSelect(d=!1){l(this,st).classList.toggle("noUserSelect",d)}addShouldRescale(d){l(this,Et).add(d)}removeShouldRescale(d){l(this,Et).delete(d)}onScaleChanging({scale:d}){this.commitOrRemove(),this.viewParameters.realScale=d*r.PixelsPerInch.PDF_TO_CSS_UNITS;for(const x of l(this,Et))x.onScaleChanging()}onRotationChanging({pagesRotation:d}){this.commitOrRemove(),this.viewParameters.rotation=d}addToAnnotationStorage(d){!d.isEmpty()&&l(this,Y)&&!l(this,Y).has(d.id)&&l(this,Y).setValue(d.id,d)}blur(){if(!this.hasSelection)return;const{activeElement:d}=document;for(const x of l(this,I))if(x.div.contains(d)){it(this,p,[x,d]),x._focusEventsAllowed=!1;break}}focus(){if(!l(this,p))return;const[d,x]=l(this,p);it(this,p,null),x.addEventListener("focusin",()=>{d._focusEventsAllowed=!0},{once:!0}),x.focus()}addEditListeners(){K(this,jt,ze).call(this),K(this,zt,Ye).call(this)}removeEditListeners(){K(this,Xt,Ne).call(this),K(this,ut,Ve).call(this)}copy(d){var H;if(d.preventDefault(),(H=l(this,P))==null||H.commitOrRemove(),!this.hasSelection)return;const x=[];for(const V of l(this,I)){const Z=V.serialize(!0);Z&&x.push(Z)}x.length!==0&&d.clipboardData.setData("application/pdfjs",JSON.stringify(x))}cut(d){this.copy(d),this.delete()}paste(d){d.preventDefault();const{clipboardData:x}=d;for(const Z of x.items)for(const ct of l(this,dt))if(ct.isHandlingMimeForPasting(Z.type)){ct.paste(Z,this.currentLayer);return}let H=x.getData("application/pdfjs");if(!H)return;try{H=JSON.parse(H)}catch(Z){(0,s.warn)(`paste: "${Z.message}".`);return}if(!Array.isArray(H))return;this.unselectAll();const V=this.currentLayer;try{const Z=[];for(const vt of H){const Rt=V.deserialize(vt);if(!Rt)return;Z.push(Rt)}const ct=()=>{for(const vt of Z)K(this,Ot,Ke).call(this,vt);K(this,St,Qe).call(this,Z)},At=()=>{for(const vt of Z)vt.remove()};this.addCommands({cmd:ct,undo:At,mustExec:!0})}catch(Z){(0,s.warn)(`paste: "${Z.message}".`)}}keydown(d){var x;(x=this.getActive())!=null&&x.shouldGetKeyboardEvents()||Lt._keyboardManager.exec(this,d)}onEditingAction(d){["undo","redo","delete","selectAll"].includes(d.name)&&this[d.name]()}setEditingState(d){d?(K(this,Tt,yn).call(this),K(this,jt,ze).call(this),K(this,zt,Ye).call(this),K(this,J,ie).call(this,{isEditing:l(this,_)!==s.AnnotationEditorType.NONE,isEmpty:K(this,Gt,Ee).call(this),hasSomethingToUndo:l(this,ot).hasSomethingToUndo(),hasSomethingToRedo:l(this,ot).hasSomethingToRedo(),hasSelectedEditor:!1})):(K(this,yt,Xe).call(this),K(this,Xt,Ne).call(this),K(this,ut,Ve).call(this),K(this,J,ie).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(d){if(!l(this,dt)){it(this,dt,d);for(const x of l(this,dt))K(this,It,ge).call(this,x.defaultPropertiesToUpdate)}}getId(){return l(this,G).getId()}get currentLayer(){return l(this,z).get(l(this,et))}getLayer(d){return l(this,z).get(d)}get currentPageIndex(){return l(this,et)}addLayer(d){l(this,z).set(d.pageIndex,d),l(this,u)?d.enable():d.disable()}removeLayer(d){l(this,z).delete(d.pageIndex)}updateMode(d,x=null){if(l(this,_)!==d){if(it(this,_,d),d===s.AnnotationEditorType.NONE){this.setEditingState(!1),K(this,bt,Rn).call(this);return}this.setEditingState(!0),K(this,te,On).call(this),this.unselectAll();for(const H of l(this,z).values())H.updateMode(d);if(x){for(const H of l(this,W).values())if(H.annotationElementId===x){this.setSelected(H),H.enterInEditMode();break}}}}updateToolbar(d){d!==l(this,_)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:d})}updateParams(d,x){if(l(this,dt)){if(d===s.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(d);return}for(const H of l(this,I))H.updateParams(d,x);for(const H of l(this,dt))H.updateDefaultParams(d,x)}}enableWaiting(d=!1){if(l(this,T)!==d){it(this,T,d);for(const x of l(this,z).values())d?x.disableClick():x.enableClick(),x.div.classList.toggle("waiting",d)}}getEditors(d){const x=[];for(const H of l(this,W).values())H.pageIndex===d&&x.push(H);return x}getEditor(d){return l(this,W).get(d)}addEditor(d){l(this,W).set(d.id,d)}removeEditor(d){var x;l(this,W).delete(d.id),this.unselect(d),(!d.annotationElementId||!l(this,q).has(d.annotationElementId))&&((x=l(this,Y))==null||x.remove(d.id))}addDeletedAnnotationElement(d){l(this,q).add(d.annotationElementId),d.deleted=!0}isDeletedAnnotationElement(d){return l(this,q).has(d)}removeDeletedAnnotationElement(d){l(this,q).delete(d.annotationElementId),d.deleted=!1}setActiveEditor(d){l(this,P)!==d&&(it(this,P,d),d&&K(this,It,ge).call(this,d.propertiesToUpdate))}toggleSelected(d){if(l(this,I).has(d)){l(this,I).delete(d),d.unselect(),K(this,J,ie).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,I).add(d),d.select(),K(this,It,ge).call(this,d.propertiesToUpdate),K(this,J,ie).call(this,{hasSelectedEditor:!0})}setSelected(d){for(const x of l(this,I))x!==d&&x.unselect();l(this,I).clear(),l(this,I).add(d),d.select(),K(this,It,ge).call(this,d.propertiesToUpdate),K(this,J,ie).call(this,{hasSelectedEditor:!0})}isSelected(d){return l(this,I).has(d)}unselect(d){d.unselect(),l(this,I).delete(d),K(this,J,ie).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,I).size!==0}undo(){l(this,ot).undo(),K(this,J,ie).call(this,{hasSomethingToUndo:l(this,ot).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:K(this,Gt,Ee).call(this)})}redo(){l(this,ot).redo(),K(this,J,ie).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,ot).hasSomethingToRedo(),isEmpty:K(this,Gt,Ee).call(this)})}addCommands(d){l(this,ot).add(d),K(this,J,ie).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:K(this,Gt,Ee).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const d=[...l(this,I)],x=()=>{for(const V of d)V.remove()},H=()=>{for(const V of d)K(this,Ot,Ke).call(this,V)};this.addCommands({cmd:x,undo:H,mustExec:!0})}commitOrRemove(){var d;(d=l(this,P))==null||d.commitOrRemove()}hasSomethingToControl(){return l(this,P)||this.hasSelection}selectAll(){for(const d of l(this,I))d.commit();K(this,St,Qe).call(this,l(this,W).values())}unselectAll(){if(l(this,P)){l(this,P).commitOrRemove();return}if(this.hasSelection){for(const d of l(this,I))d.unselect();l(this,I).clear(),K(this,J,ie).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(d,x,H=!1){if(H||this.commitOrRemove(),!this.hasSelection)return;l(this,Bt)[0]+=d,l(this,Bt)[1]+=x;const[V,Z]=l(this,Bt),ct=[...l(this,I)];l(this,ft)&&clearTimeout(l(this,ft)),it(this,ft,setTimeout(()=>{it(this,ft,null),l(this,Bt)[0]=l(this,Bt)[1]=0,this.addCommands({cmd:()=>{for(const vt of ct)l(this,W).has(vt.id)&&vt.translateInPage(V,Z)},undo:()=>{for(const vt of ct)l(this,W).has(vt.id)&&vt.translateInPage(-V,-Z)},mustExec:!1})},1e3));for(const vt of ct)vt.translateInPage(d,x)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),it(this,ht,new Map);for(const d of l(this,I))l(this,ht).set(d,{savedX:d.x,savedY:d.y,savedPageIndex:d.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,ht))return!1;this.disableUserSelect(!1);const d=l(this,ht);it(this,ht,null);let x=!1;for(const[{x:V,y:Z,pageIndex:ct},At]of d)At.newX=V,At.newY=Z,At.newPageIndex=ct,x||(x=V!==At.savedX||Z!==At.savedY||ct!==At.savedPageIndex);if(!x)return!1;const H=(V,Z,ct,At)=>{if(l(this,W).has(V.id)){const vt=l(this,z).get(At);vt?V._setParentAndPosition(vt,Z,ct):(V.pageIndex=At,V.x=Z,V.y=ct)}};return this.addCommands({cmd:()=>{for(const[V,{newX:Z,newY:ct,newPageIndex:At}]of d)H(V,Z,ct,At)},undo:()=>{for(const[V,{savedX:Z,savedY:ct,savedPageIndex:At}]of d)H(V,Z,ct,At)},mustExec:!0}),!0}dragSelectedEditors(d,x){if(l(this,ht))for(const H of l(this,ht).keys())H.drag(d,x)}rebuild(d){if(d.parent===null){const x=this.getLayer(d.pageIndex);x?(x.changeParent(d),x.addOrRebuild(d)):(this.addEditor(d),this.addToAnnotationStorage(d),d.rebuild())}else d.parent.addOrRebuild(d)}isActive(d){return l(this,P)===d}getActive(){return l(this,P)}getMode(){return l(this,_)}get imageManager(){return(0,s.shadow)(this,"imageManager",new o)}};P=new WeakMap,W=new WeakMap,z=new WeakMap,w=new WeakMap,Y=new WeakMap,ot=new WeakMap,et=new WeakMap,q=new WeakMap,ht=new WeakMap,dt=new WeakMap,Et=new WeakMap,gt=new WeakMap,G=new WeakMap,u=new WeakMap,T=new WeakMap,p=new WeakMap,_=new WeakMap,I=new WeakMap,k=new WeakMap,B=new WeakMap,X=new WeakMap,nt=new WeakMap,Q=new WeakMap,lt=new WeakMap,pt=new WeakMap,Ct=new WeakMap,mt=new WeakMap,Pt=new WeakMap,Dt=new WeakMap,xt=new WeakMap,Bt=new WeakMap,ft=new WeakMap,at=new WeakMap,st=new WeakMap,Tt=new WeakSet,yn=function(){window.addEventListener("focus",l(this,X)),window.addEventListener("blur",l(this,B))},yt=new WeakSet,Xe=function(){window.removeEventListener("focus",l(this,X)),window.removeEventListener("blur",l(this,B))},jt=new WeakSet,ze=function(){window.addEventListener("keydown",l(this,pt),{capture:!0})},Xt=new WeakSet,Ne=function(){window.removeEventListener("keydown",l(this,pt),{capture:!0})},zt=new WeakSet,Ye=function(){document.addEventListener("copy",l(this,nt)),document.addEventListener("cut",l(this,Q)),document.addEventListener("paste",l(this,lt))},ut=new WeakSet,Ve=function(){document.removeEventListener("copy",l(this,nt)),document.removeEventListener("cut",l(this,Q)),document.removeEventListener("paste",l(this,lt))},J=new WeakSet,ie=function(d){Object.entries(d).some(([x,H])=>l(this,xt)[x]!==H)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,xt),d)})},It=new WeakSet,ge=function(d){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:d})},te=new WeakSet,On=function(){if(!l(this,u)){it(this,u,!0);for(const d of l(this,z).values())d.enable()}},bt=new WeakSet,Rn=function(){if(this.unselectAll(),l(this,u)){it(this,u,!1);for(const d of l(this,z).values())d.disable()}},Ot=new WeakSet,Ke=function(d){const x=l(this,z).get(d.pageIndex);x?x.addOrRebuild(d):this.addEditor(d)},Gt=new WeakSet,Ee=function(){if(l(this,W).size===0)return!0;if(l(this,W).size===1)for(const d of l(this,W).values())return d.isEmpty();return!1},St=new WeakSet,Qe=function(d){l(this,I).clear();for(const x of d)x.isEmpty()||(l(this,I).add(x),x.select());K(this,J,ie).call(this,{hasSelectedEditor:!0})},ne(Lt,"TRANSLATE_SMALL",1),ne(Lt,"TRANSLATE_BIG",10);let y=Lt;e.AnnotationEditorUIManager=y},(t,e,n)=>{var et,q,ht,dt,Et,gt,G,u,T,p,_,I,de,B,ue,nt,Je,lt,ye,Ct,Oe,Pt,Ae,xt,_e;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=L,e.getColorValues=W,e.getCurrentTransform=z,e.getCurrentTransformInverse=w,e.getFilenameFromUrl=O,e.getPdfFilenameFromUrl=v,e.getRGB=P,e.getXfaPageViewport=F,e.isDataScheme=b,e.isPdfFile=S,e.isValidFetchUrl=R,e.loadScript=f,e.noContextMenu=g,e.setLayerDimensions=Y;var s=n(7),r=n(1);const i="http://www.w3.org/2000/svg",ot=class ot{};ne(ot,"CSS",96),ne(ot,"PDF",72),ne(ot,"PDF_TO_CSS_UNITS",ot.CSS/ot.PDF);let a=ot;e.PixelsPerInch=a;class c extends s.BaseFilterFactory{constructor({docId:st,ownerDocument:Tt=globalThis.document}={}){super();j(this,I);j(this,B);j(this,nt);j(this,lt);j(this,Ct);j(this,Pt);j(this,xt);j(this,et,void 0);j(this,q,void 0);j(this,ht,void 0);j(this,dt,void 0);j(this,Et,void 0);j(this,gt,void 0);j(this,G,void 0);j(this,u,void 0);j(this,T,void 0);j(this,p,void 0);j(this,_,0);it(this,ht,st),it(this,dt,Tt)}addFilter(st){if(!st)return"none";let Tt=l(this,I,de).get(st);if(Tt)return Tt;let Nt,yt,Ht,jt;if(st.length===1){const zt=st[0],Vt=new Array(256);for(let ut=0;ut<256;ut++)Vt[ut]=zt[ut]/255;jt=Nt=yt=Ht=Vt.join(",")}else{const[zt,Vt,ut]=st,rt=new Array(256),J=new Array(256),_t=new Array(256);for(let It=0;It<256;It++)rt[It]=zt[It]/255,J[It]=Vt[It]/255,_t[It]=ut[It]/255;Nt=rt.join(","),yt=J.join(","),Ht=_t.join(","),jt=`${Nt}${yt}${Ht}`}if(Tt=l(this,I,de).get(jt),Tt)return l(this,I,de).set(st,Tt),Tt;const $t=`g_${l(this,ht)}_transfer_map_${fe(this,_)._++}`,Xt=`url(#${$t})`;l(this,I,de).set(st,Xt),l(this,I,de).set(jt,Xt);const qt=K(this,lt,ye).call(this,$t);return K(this,Pt,Ae).call(this,Nt,yt,Ht,qt),Xt}addHCMFilter(st,Tt){var Vt;const Nt=`${st}-${Tt}`;if(l(this,gt)===Nt)return l(this,G);if(it(this,gt,Nt),it(this,G,"none"),(Vt=l(this,Et))==null||Vt.remove(),!st||!Tt)return l(this,G);const yt=K(this,xt,_e).call(this,st);st=r.Util.makeHexColor(...yt);const Ht=K(this,xt,_e).call(this,Tt);if(Tt=r.Util.makeHexColor(...Ht),l(this,B,ue).style.color="",st==="#000000"&&Tt==="#ffffff"||st===Tt)return l(this,G);const jt=new Array(256);for(let ut=0;ut<=255;ut++){const rt=ut/255;jt[ut]=rt<=.03928?rt/12.92:((rt+.055)/1.055)**2.4}const $t=jt.join(","),Xt=`g_${l(this,ht)}_hcm_filter`,qt=it(this,u,K(this,lt,ye).call(this,Xt));K(this,Pt,Ae).call(this,$t,$t,$t,qt),K(this,nt,Je).call(this,qt);const zt=(ut,rt)=>{const J=yt[ut]/255,_t=Ht[ut]/255,It=new Array(rt+1);for(let ee=0;ee<=rt;ee++)It[ee]=J+ee/rt*(_t-J);return It.join(",")};return K(this,Pt,Ae).call(this,zt(0,5),zt(1,5),zt(2,5),qt),it(this,G,`url(#${Xt})`),l(this,G)}addHighlightHCMFilter(st,Tt,Nt,yt){var _t;const Ht=`${st}-${Tt}-${Nt}-${yt}`;if(l(this,T)===Ht)return l(this,p);if(it(this,T,Ht),it(this,p,"none"),(_t=l(this,u))==null||_t.remove(),!st||!Tt)return l(this,p);const[jt,$t]=[st,Tt].map(K(this,xt,_e).bind(this));let Xt=Math.round(.2126*jt[0]+.7152*jt[1]+.0722*jt[2]),qt=Math.round(.2126*$t[0]+.7152*$t[1]+.0722*$t[2]),[zt,Vt]=[Nt,yt].map(K(this,xt,_e).bind(this));qt<Xt&&([Xt,qt,zt,Vt]=[qt,Xt,Vt,zt]),l(this,B,ue).style.color="";const ut=(It,ee,te)=>{const tt=new Array(256),bt=(qt-Xt)/te,wt=It/255,Ot=(ee-It)/(255*te);let Ft=0;for(let Gt=0;Gt<=te;Gt++){const Qt=Math.round(Xt+Gt*bt),St=wt+Gt*Ot;for(let Kt=Ft;Kt<=Qt;Kt++)tt[Kt]=St;Ft=Qt+1}for(let Gt=Ft;Gt<256;Gt++)tt[Gt]=tt[Ft-1];return tt.join(",")},rt=`g_${l(this,ht)}_hcm_highlight_filter`,J=it(this,u,K(this,lt,ye).call(this,rt));return K(this,nt,Je).call(this,J),K(this,Pt,Ae).call(this,ut(zt[0],Vt[0],5),ut(zt[1],Vt[1],5),ut(zt[2],Vt[2],5),J),it(this,p,`url(#${rt})`),l(this,p)}destroy(st=!1){st&&(l(this,G)||l(this,p))||(l(this,q)&&(l(this,q).parentNode.parentNode.remove(),it(this,q,null)),l(this,et)&&(l(this,et).clear(),it(this,et,null)),it(this,_,0))}}et=new WeakMap,q=new WeakMap,ht=new WeakMap,dt=new WeakMap,Et=new WeakMap,gt=new WeakMap,G=new WeakMap,u=new WeakMap,T=new WeakMap,p=new WeakMap,_=new WeakMap,I=new WeakSet,de=function(){return l(this,et)||it(this,et,new Map)},B=new WeakSet,ue=function(){if(!l(this,q)){const st=l(this,dt).createElement("div"),{style:Tt}=st;Tt.visibility="hidden",Tt.contain="strict",Tt.width=Tt.height=0,Tt.position="absolute",Tt.top=Tt.left=0,Tt.zIndex=-1;const Nt=l(this,dt).createElementNS(i,"svg");Nt.setAttribute("width",0),Nt.setAttribute("height",0),it(this,q,l(this,dt).createElementNS(i,"defs")),st.append(Nt),Nt.append(l(this,q)),l(this,dt).body.append(st)}return l(this,q)},nt=new WeakSet,Je=function(st){const Tt=l(this,dt).createElementNS(i,"feColorMatrix");Tt.setAttribute("type","matrix"),Tt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),st.append(Tt)},lt=new WeakSet,ye=function(st){const Tt=l(this,dt).createElementNS(i,"filter");return Tt.setAttribute("color-interpolation-filters","sRGB"),Tt.setAttribute("id",st),l(this,B,ue).append(Tt),Tt},Ct=new WeakSet,Oe=function(st,Tt,Nt){const yt=l(this,dt).createElementNS(i,Tt);yt.setAttribute("type","discrete"),yt.setAttribute("tableValues",Nt),st.append(yt)},Pt=new WeakSet,Ae=function(st,Tt,Nt,yt){const Ht=l(this,dt).createElementNS(i,"feComponentTransfer");yt.append(Ht),K(this,Ct,Oe).call(this,Ht,"feFuncR",st),K(this,Ct,Oe).call(this,Ht,"feFuncG",Tt),K(this,Ct,Oe).call(this,Ht,"feFuncB",Nt)},xt=new WeakSet,_e=function(st){return l(this,B,ue).style.color=st,P(getComputedStyle(l(this,B,ue)).getPropertyValue("color"))},e.DOMFilterFactory=c;class o extends s.BaseCanvasFactory{constructor({ownerDocument:at=globalThis.document}={}){super(),this._document=at}_createCanvas(at,st){const Tt=this._document.createElement("canvas");return Tt.width=at,Tt.height=st,Tt}}e.DOMCanvasFactory=o;async function m(ft,at=!1){if(R(ft,document.baseURI)){const st=await fetch(ft);if(!st.ok)throw new Error(st.statusText);return at?new Uint8Array(await st.arrayBuffer()):(0,r.stringToBytes)(await st.text())}return new Promise((st,Tt)=>{const Nt=new XMLHttpRequest;Nt.open("GET",ft,!0),at&&(Nt.responseType="arraybuffer"),Nt.onreadystatechange=()=>{if(Nt.readyState===XMLHttpRequest.DONE){if(Nt.status===200||Nt.status===0){let yt;if(at&&Nt.response?yt=new Uint8Array(Nt.response):!at&&Nt.responseText&&(yt=(0,r.stringToBytes)(Nt.responseText)),yt){st(yt);return}}Tt(new Error(Nt.statusText))}},Nt.send(null)})}class h extends s.BaseCMapReaderFactory{_fetchData(at,st){return m(at,this.isCompressed).then(Tt=>({cMapData:Tt,compressionType:st}))}}e.DOMCMapReaderFactory=h;class A extends s.BaseStandardFontDataFactory{_fetchData(at){return m(at,!0)}}e.DOMStandardFontDataFactory=A;class y extends s.BaseSVGFactory{_createSVG(at){return document.createElementNS(i,at)}}e.DOMSVGFactory=y;class C{constructor({viewBox:at,scale:st,rotation:Tt,offsetX:Nt=0,offsetY:yt=0,dontFlip:Ht=!1}){this.viewBox=at,this.scale=st,this.rotation=Tt,this.offsetX=Nt,this.offsetY=yt;const jt=(at[2]+at[0])/2,$t=(at[3]+at[1])/2;let Xt,qt,zt,Vt;switch(Tt%=360,Tt<0&&(Tt+=360),Tt){case 180:Xt=-1,qt=0,zt=0,Vt=1;break;case 90:Xt=0,qt=1,zt=1,Vt=0;break;case 270:Xt=0,qt=-1,zt=-1,Vt=0;break;case 0:Xt=1,qt=0,zt=0,Vt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Ht&&(zt=-zt,Vt=-Vt);let ut,rt,J,_t;Xt===0?(ut=Math.abs($t-at[1])*st+Nt,rt=Math.abs(jt-at[0])*st+yt,J=(at[3]-at[1])*st,_t=(at[2]-at[0])*st):(ut=Math.abs(jt-at[0])*st+Nt,rt=Math.abs($t-at[1])*st+yt,J=(at[2]-at[0])*st,_t=(at[3]-at[1])*st),this.transform=[Xt*st,qt*st,zt*st,Vt*st,ut-Xt*st*jt-zt*st*$t,rt-qt*st*jt-Vt*st*$t],this.width=J,this.height=_t}get rawDims(){const{viewBox:at}=this;return(0,r.shadow)(this,"rawDims",{pageWidth:at[2]-at[0],pageHeight:at[3]-at[1],pageX:at[0],pageY:at[1]})}clone({scale:at=this.scale,rotation:st=this.rotation,offsetX:Tt=this.offsetX,offsetY:Nt=this.offsetY,dontFlip:yt=!1}={}){return new C({viewBox:this.viewBox.slice(),scale:at,rotation:st,offsetX:Tt,offsetY:Nt,dontFlip:yt})}convertToViewportPoint(at,st){return r.Util.applyTransform([at,st],this.transform)}convertToViewportRectangle(at){const st=r.Util.applyTransform([at[0],at[1]],this.transform),Tt=r.Util.applyTransform([at[2],at[3]],this.transform);return[st[0],st[1],Tt[0],Tt[1]]}convertToPdfPoint(at,st){return r.Util.applyInverseTransform([at,st],this.transform)}}e.PageViewport=C;class D extends r.BaseException{constructor(at,st=0){super(at,"RenderingCancelledException"),this.extraDelay=st}}e.RenderingCancelledException=D;function b(ft){const at=ft.length;let st=0;for(;st<at&&ft[st].trim()==="";)st++;return ft.substring(st,st+5).toLowerCase()==="data:"}function S(ft){return typeof ft=="string"&&/\.pdf$/i.test(ft)}function O(ft,at=!1){return at||([ft]=ft.split(/[#?]/,1)),ft.substring(ft.lastIndexOf("/")+1)}function v(ft,at="document.pdf"){if(typeof ft!="string")return at;if(b(ft))return(0,r.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),at;const st=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Tt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Nt=st.exec(ft);let yt=Tt.exec(Nt[1])||Tt.exec(Nt[2])||Tt.exec(Nt[3]);if(yt&&(yt=yt[0],yt.includes("%")))try{yt=Tt.exec(decodeURIComponent(yt))[0]}catch{}return yt||at}class M{constructor(){ne(this,"started",Object.create(null));ne(this,"times",[])}time(at){at in this.started&&(0,r.warn)(`Timer is already running for ${at}`),this.started[at]=Date.now()}timeEnd(at){at in this.started||(0,r.warn)(`Timer has not been started for ${at}`),this.times.push({name:at,start:this.started[at],end:Date.now()}),delete this.started[at]}toString(){const at=[];let st=0;for(const{name:Tt}of this.times)st=Math.max(Tt.length,st);for(const{name:Tt,start:Nt,end:yt}of this.times)at.push(`${Tt.padEnd(st)} ${yt-Nt}ms
`);return at.join("")}}e.StatTimer=M;function R(ft,at){try{const{protocol:st}=at?new URL(ft,at):new URL(ft);return st==="http:"||st==="https:"}catch{return!1}}function g(ft){ft.preventDefault()}function f(ft,at=!1){return new Promise((st,Tt)=>{const Nt=document.createElement("script");Nt.src=ft,Nt.onload=function(yt){at&&Nt.remove(),st(yt)},Nt.onerror=function(){Tt(new Error(`Cannot load script at: ${Nt.src}`))},(document.head||document.documentElement).append(Nt)})}function L(ft){console.log("Deprecated API usage: "+ft)}let N;class E{static toDateObject(at){if(!at||typeof at!="string")return null;N||(N=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const st=N.exec(at);if(!st)return null;const Tt=parseInt(st[1],10);let Nt=parseInt(st[2],10);Nt=Nt>=1&&Nt<=12?Nt-1:0;let yt=parseInt(st[3],10);yt=yt>=1&&yt<=31?yt:1;let Ht=parseInt(st[4],10);Ht=Ht>=0&&Ht<=23?Ht:0;let jt=parseInt(st[5],10);jt=jt>=0&&jt<=59?jt:0;let $t=parseInt(st[6],10);$t=$t>=0&&$t<=59?$t:0;const Xt=st[7]||"Z";let qt=parseInt(st[8],10);qt=qt>=0&&qt<=23?qt:0;let zt=parseInt(st[9],10)||0;return zt=zt>=0&&zt<=59?zt:0,Xt==="-"?(Ht+=qt,jt+=zt):Xt==="+"&&(Ht-=qt,jt-=zt),new Date(Date.UTC(Tt,Nt,yt,Ht,jt,$t))}}e.PDFDateString=E;function F(ft,{scale:at=1,rotation:st=0}){const{width:Tt,height:Nt}=ft.attributes.style,yt=[0,0,parseInt(Tt),parseInt(Nt)];return new C({viewBox:yt,scale:at,rotation:st})}function P(ft){if(ft.startsWith("#")){const at=parseInt(ft.slice(1),16);return[(at&16711680)>>16,(at&65280)>>8,at&255]}return ft.startsWith("rgb(")?ft.slice(4,-1).split(",").map(at=>parseInt(at)):ft.startsWith("rgba(")?ft.slice(5,-1).split(",").map(at=>parseInt(at)).slice(0,3):((0,r.warn)(`Not a valid color format: "${ft}"`),[0,0,0])}function W(ft){const at=document.createElement("span");at.style.visibility="hidden",document.body.append(at);for(const st of ft.keys()){at.style.color=st;const Tt=window.getComputedStyle(at).color;ft.set(st,P(Tt))}at.remove()}function z(ft){const{a:at,b:st,c:Tt,d:Nt,e:yt,f:Ht}=ft.getTransform();return[at,st,Tt,Nt,yt,Ht]}function w(ft){const{a:at,b:st,c:Tt,d:Nt,e:yt,f:Ht}=ft.getTransform().invertSelf();return[at,st,Tt,Nt,yt,Ht]}function Y(ft,at,st=!1,Tt=!0){if(at instanceof C){const{pageWidth:Nt,pageHeight:yt}=at.rawDims,{style:Ht}=ft,jt=r.FeatureTest.isCSSRoundSupported,$t=`var(--scale-factor) * ${Nt}px`,Xt=`var(--scale-factor) * ${yt}px`,qt=jt?`round(${$t}, 1px)`:`calc(${$t})`,zt=jt?`round(${Xt}, 1px)`:`calc(${Xt})`;!st||at.rotation%180===0?(Ht.width=qt,Ht.height=zt):(Ht.width=zt,Ht.height=qt)}Tt&&ft.setAttribute("data-main-rotation",at.rotation)}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var s=n(1);class r{constructor(){this.constructor===r&&(0,s.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(h){return"none"}addHCMFilter(h,A){return"none"}addHighlightHCMFilter(h,A,y,C){return"none"}destroy(h=!1){}}e.BaseFilterFactory=r;class i{constructor(){this.constructor===i&&(0,s.unreachable)("Cannot initialize BaseCanvasFactory.")}create(h,A){if(h<=0||A<=0)throw new Error("Invalid canvas size");const y=this._createCanvas(h,A);return{canvas:y,context:y.getContext("2d")}}reset(h,A,y){if(!h.canvas)throw new Error("Canvas is not specified");if(A<=0||y<=0)throw new Error("Invalid canvas size");h.canvas.width=A,h.canvas.height=y}destroy(h){if(!h.canvas)throw new Error("Canvas is not specified");h.canvas.width=0,h.canvas.height=0,h.canvas=null,h.context=null}_createCanvas(h,A){(0,s.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=i;class a{constructor({baseUrl:h=null,isCompressed:A=!0}){this.constructor===a&&(0,s.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=h,this.isCompressed=A}async fetch({name:h}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!h)throw new Error("CMap name must be specified.");const A=this.baseUrl+h+(this.isCompressed?".bcmap":""),y=this.isCompressed?s.CMapCompressionType.BINARY:s.CMapCompressionType.NONE;return this._fetchData(A,y).catch(C=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${A}`)})}_fetchData(h,A){(0,s.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=a;class c{constructor({baseUrl:h=null}){this.constructor===c&&(0,s.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=h}async fetch({filename:h}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!h)throw new Error("Font filename must be specified.");const A=`${this.baseUrl}${h}`;return this._fetchData(A).catch(y=>{throw new Error(`Unable to load font data at: ${A}`)})}_fetchData(h){(0,s.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=c;class o{constructor(){this.constructor===o&&(0,s.unreachable)("Cannot initialize BaseSVGFactory.")}create(h,A,y=!1){if(h<=0||A<=0)throw new Error("Invalid SVG dimensions");const C=this._createSVG("svg:svg");return C.setAttribute("version","1.1"),y||(C.setAttribute("width",`${h}px`),C.setAttribute("height",`${A}px`)),C.setAttribute("preserveAspectRatio","none"),C.setAttribute("viewBox",`0 0 ${h} ${A}`),C}createElement(h){if(typeof h!="string")throw new Error("Invalid SVG element type");return this._createSVG(h)}_createSVG(h){(0,s.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=o},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var s=n(1);const r=3285377520,i=4294901760,a=65535;class c{constructor(m){this.h1=m?m&4294967295:r,this.h2=m?m&4294967295:r}update(m){let h,A;if(typeof m=="string"){h=new Uint8Array(m.length*2),A=0;for(let L=0,N=m.length;L<N;L++){const E=m.charCodeAt(L);E<=255?h[A++]=E:(h[A++]=E>>>8,h[A++]=E&255)}}else if((0,s.isArrayBuffer)(m))h=m.slice(),A=h.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const y=A>>2,C=A-y*4,D=new Uint32Array(h.buffer,0,y);let b=0,S=0,O=this.h1,v=this.h2;const M=3432918353,R=461845907,g=M&a,f=R&a;for(let L=0;L<y;L++)L&1?(b=D[L],b=b*M&i|b*g&a,b=b<<15|b>>>17,b=b*R&i|b*f&a,O^=b,O=O<<13|O>>>19,O=O*5+3864292196):(S=D[L],S=S*M&i|S*g&a,S=S<<15|S>>>17,S=S*R&i|S*f&a,v^=S,v=v<<13|v>>>19,v=v*5+3864292196);switch(b=0,C){case 3:b^=h[y*4+2]<<16;case 2:b^=h[y*4+1]<<8;case 1:b^=h[y*4],b=b*M&i|b*g&a,b=b<<15|b>>>17,b=b*R&i|b*f&a,y&1?O^=b:v^=b}this.h1=O,this.h2=v}hexdigest(){let m=this.h1,h=this.h2;return m^=h>>>1,m=m*3981806797&i|m*36045&a,h=h*4283543511&i|((h<<16|m>>>16)*2950163797&i)>>>16,m^=h>>>1,m=m*444984403&i|m*60499&a,h=h*3301882366&i|((h<<16|m>>>16)*3120437893&i)>>>16,m^=h>>>1,(m>>>0).toString(16).padStart(8,"0")+(h>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=c},(t,e,n)=>{var a;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var s=n(1);class r{constructor({ownerDocument:o=globalThis.document,styleElement:m=null}){j(this,a,new Set);this._document=o,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(o){this.nativeFontFaces.add(o),this._document.fonts.add(o)}removeNativeFontFace(o){this.nativeFontFaces.delete(o),this._document.fonts.delete(o)}insertRule(o){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const m=this.styleElement.sheet;m.insertRule(o,m.cssRules.length)}clear(){for(const o of this.nativeFontFaces)this._document.fonts.delete(o);this.nativeFontFaces.clear(),l(this,a).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(o){if(!(!o||l(this,a).has(o.loadedName))){if((0,s.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:m,src:h,style:A}=o,y=new FontFace(m,h,A);this.addNativeFontFace(y);try{await y.load(),l(this,a).add(m)}catch{(0,s.warn)(`Cannot load system font: ${o.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(y)}return}(0,s.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(o){if(o.attached||o.missingFile&&!o.systemFontInfo)return;if(o.attached=!0,o.systemFontInfo){await this.loadSystemFont(o.systemFontInfo);return}if(this.isFontLoadingAPISupported){const h=o.createNativeFontFace();if(h){this.addNativeFontFace(h);try{await h.loaded}catch(A){throw(0,s.warn)(`Failed to load font '${h.family}': '${A}'.`),o.disableFontFace=!0,A}}return}const m=o.createFontFaceRule();if(m){if(this.insertRule(m),this.isSyncFontLoadingSupported)return;await new Promise(h=>{const A=this._queueLoadingCallback(h);this._prepareFontLoadEvent(o,A)})}}get isFontLoadingAPISupported(){var m;const o=!!((m=this._document)!=null&&m.fonts);return(0,s.shadow)(this,"isFontLoadingAPISupported",o)}get isSyncFontLoadingSupported(){let o=!1;return(s.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(o=!0),(0,s.shadow)(this,"isSyncFontLoadingSupported",o)}_queueLoadingCallback(o){function m(){for((0,s.assert)(!A.done,"completeRequest() cannot be called twice."),A.done=!0;h.length>0&&h[0].done;){const y=h.shift();setTimeout(y.callback,0)}}const{loadingRequests:h}=this,A={done:!1,complete:m,callback:o};return h.push(A),A}get _loadTestFont(){const o=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,s.shadow)(this,"_loadTestFont",o)}_prepareFontLoadEvent(o,m){function h(F,P){return F.charCodeAt(P)<<24|F.charCodeAt(P+1)<<16|F.charCodeAt(P+2)<<8|F.charCodeAt(P+3)&255}function A(F,P,W,z){const w=F.substring(0,P),Y=F.substring(P+W);return w+z+Y}let y,C;const D=this._document.createElement("canvas");D.width=1,D.height=1;const b=D.getContext("2d");let S=0;function O(F,P){if(++S>30){(0,s.warn)("Load test font never loaded."),P();return}if(b.font="30px "+F,b.fillText(".",0,20),b.getImageData(0,0,1,1).data[3]>0){P();return}setTimeout(O.bind(null,F,P))}const v=`lt${Date.now()}${this.loadTestFontId++}`;let M=this._loadTestFont;M=A(M,976,v.length,v);const R=16,g=1482184792;let f=h(M,R);for(y=0,C=v.length-3;y<C;y+=4)f=f-g+h(v,y)|0;y<v.length&&(f=f-g+h(v+"XXX",y)|0),M=A(M,R,4,(0,s.string32)(f));const L=`url(data:font/opentype;base64,${btoa(M)});`,N=`@font-face {font-family:"${v}";src:${L}}`;this.insertRule(N);const E=this._document.createElement("div");E.style.visibility="hidden",E.style.width=E.style.height="10px",E.style.position="absolute",E.style.top=E.style.left="0px";for(const F of[o.loadedName,v]){const P=this._document.createElement("span");P.textContent="Hi",P.style.fontFamily=F,E.append(P)}this._document.body.append(E),O(v,()=>{E.remove(),m.complete()})}}a=new WeakMap,e.FontLoader=r;class i{constructor(o,{isEvalSupported:m=!0,disableFontFace:h=!1,ignoreErrors:A=!1,inspectFont:y=null}){this.compiledGlyphs=Object.create(null);for(const C in o)this[C]=o[C];this.isEvalSupported=m!==!1,this.disableFontFace=h===!0,this.ignoreErrors=A===!0,this._inspectFont=y}createNativeFontFace(){var m;if(!this.data||this.disableFontFace)return null;let o;if(!this.cssFontInfo)o=new FontFace(this.loadedName,this.data,{});else{const h={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(h.style=`oblique ${this.cssFontInfo.italicAngle}deg`),o=new FontFace(this.cssFontInfo.fontFamily,this.data,h)}return(m=this._inspectFont)==null||m.call(this,this),o}createFontFaceRule(){var A;if(!this.data||this.disableFontFace)return null;const o=(0,s.bytesToString)(this.data),m=`url(data:${this.mimetype};base64,${btoa(o)});`;let h;if(!this.cssFontInfo)h=`@font-face {font-family:"${this.loadedName}";src:${m}}`;else{let y=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(y+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),h=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${y}src:${m}}`}return(A=this._inspectFont)==null||A.call(this,this,m),h}getPathGenerator(o,m){if(this.compiledGlyphs[m]!==void 0)return this.compiledGlyphs[m];let h;try{h=o.get(this.loadedName+"_path_"+m)}catch(A){if(!this.ignoreErrors)throw A;return(0,s.warn)(`getPathGenerator - ignoring character: "${A}".`),this.compiledGlyphs[m]=function(y,C){}}if(this.isEvalSupported&&s.FeatureTest.isEvalSupported){const A=[];for(const y of h){const C=y.args!==void 0?y.args.join(","):"";A.push("c.",y.cmd,"(",C,`);
`)}return this.compiledGlyphs[m]=new Function("c","size",A.join(""))}return this.compiledGlyphs[m]=function(A,y){for(const C of h)C.cmd==="scale"&&(C.args=[y,-y]),A[C.cmd].apply(A,C.args)}}}e.FontFaceObject=i},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var s=n(7);n(1);const r=function(m){return new Promise((h,A)=>{require$$0.readFile(m,(y,C)=>{if(y||!C){A(new Error(y));return}h(new Uint8Array(C))})})};class i extends s.BaseFilterFactory{}e.NodeFilterFactory=i;class a extends s.BaseCanvasFactory{_createCanvas(h,A){return require$$0.createCanvas(h,A)}}e.NodeCanvasFactory=a;class c extends s.BaseCMapReaderFactory{_fetchData(h,A){return r(h).then(y=>({cMapData:y,compressionType:A}))}}e.NodeCMapReaderFactory=c;class o extends s.BaseStandardFontDataFactory{_fetchData(h){return r(h)}}e.NodeStandardFontDataFactory=o},(t,e,n)=>{var q,Ze,dt,tn;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var s=n(1),r=n(6),i=n(12),a=n(13);const c=16,o=100,m=4096,h=15,A=10,y=1e3,C=16;function D(G,u){if(G._removeMirroring)throw new Error("Context is already forwarding operations.");G.__originalSave=G.save,G.__originalRestore=G.restore,G.__originalRotate=G.rotate,G.__originalScale=G.scale,G.__originalTranslate=G.translate,G.__originalTransform=G.transform,G.__originalSetTransform=G.setTransform,G.__originalResetTransform=G.resetTransform,G.__originalClip=G.clip,G.__originalMoveTo=G.moveTo,G.__originalLineTo=G.lineTo,G.__originalBezierCurveTo=G.bezierCurveTo,G.__originalRect=G.rect,G.__originalClosePath=G.closePath,G.__originalBeginPath=G.beginPath,G._removeMirroring=()=>{G.save=G.__originalSave,G.restore=G.__originalRestore,G.rotate=G.__originalRotate,G.scale=G.__originalScale,G.translate=G.__originalTranslate,G.transform=G.__originalTransform,G.setTransform=G.__originalSetTransform,G.resetTransform=G.__originalResetTransform,G.clip=G.__originalClip,G.moveTo=G.__originalMoveTo,G.lineTo=G.__originalLineTo,G.bezierCurveTo=G.__originalBezierCurveTo,G.rect=G.__originalRect,G.closePath=G.__originalClosePath,G.beginPath=G.__originalBeginPath,delete G._removeMirroring},G.save=function(){u.save(),this.__originalSave()},G.restore=function(){u.restore(),this.__originalRestore()},G.translate=function(T,p){u.translate(T,p),this.__originalTranslate(T,p)},G.scale=function(T,p){u.scale(T,p),this.__originalScale(T,p)},G.transform=function(T,p,_,I,k,B){u.transform(T,p,_,I,k,B),this.__originalTransform(T,p,_,I,k,B)},G.setTransform=function(T,p,_,I,k,B){u.setTransform(T,p,_,I,k,B),this.__originalSetTransform(T,p,_,I,k,B)},G.resetTransform=function(){u.resetTransform(),this.__originalResetTransform()},G.rotate=function(T){u.rotate(T),this.__originalRotate(T)},G.clip=function(T){u.clip(T),this.__originalClip(T)},G.moveTo=function(T,p){u.moveTo(T,p),this.__originalMoveTo(T,p)},G.lineTo=function(T,p){u.lineTo(T,p),this.__originalLineTo(T,p)},G.bezierCurveTo=function(T,p,_,I,k,B){u.bezierCurveTo(T,p,_,I,k,B),this.__originalBezierCurveTo(T,p,_,I,k,B)},G.rect=function(T,p,_,I){u.rect(T,p,_,I),this.__originalRect(T,p,_,I)},G.closePath=function(){u.closePath(),this.__originalClosePath()},G.beginPath=function(){u.beginPath(),this.__originalBeginPath()}}class b{constructor(u){this.canvasFactory=u,this.cache=Object.create(null)}getCanvas(u,T,p){let _;return this.cache[u]!==void 0?(_=this.cache[u],this.canvasFactory.reset(_,T,p)):(_=this.canvasFactory.create(T,p),this.cache[u]=_),_}delete(u){delete this.cache[u]}clear(){for(const u in this.cache){const T=this.cache[u];this.canvasFactory.destroy(T),delete this.cache[u]}}}function S(G,u,T,p,_,I,k,B,X,nt){const[Q,lt,pt,Ct,mt,Pt]=(0,r.getCurrentTransform)(G);if(lt===0&&pt===0){const Bt=k*Q+mt,ft=Math.round(Bt),at=B*Ct+Pt,st=Math.round(at),Tt=(k+X)*Q+mt,Nt=Math.abs(Math.round(Tt)-ft)||1,yt=(B+nt)*Ct+Pt,Ht=Math.abs(Math.round(yt)-st)||1;return G.setTransform(Math.sign(Q),0,0,Math.sign(Ct),ft,st),G.drawImage(u,T,p,_,I,0,0,Nt,Ht),G.setTransform(Q,lt,pt,Ct,mt,Pt),[Nt,Ht]}if(Q===0&&Ct===0){const Bt=B*pt+mt,ft=Math.round(Bt),at=k*lt+Pt,st=Math.round(at),Tt=(B+nt)*pt+mt,Nt=Math.abs(Math.round(Tt)-ft)||1,yt=(k+X)*lt+Pt,Ht=Math.abs(Math.round(yt)-st)||1;return G.setTransform(0,Math.sign(lt),Math.sign(pt),0,ft,st),G.drawImage(u,T,p,_,I,0,0,Ht,Nt),G.setTransform(Q,lt,pt,Ct,mt,Pt),[Ht,Nt]}G.drawImage(u,T,p,_,I,k,B,X,nt);const Dt=Math.hypot(Q,lt),xt=Math.hypot(pt,Ct);return[Dt*X,xt*nt]}function O(G){const{width:u,height:T}=G;if(u>y||T>y)return null;const p=1e3,_=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),I=u+1;let k=new Uint8Array(I*(T+1)),B,X,nt;const Q=u+7&-8;let lt=new Uint8Array(Q*T),pt=0;for(const Dt of G.data){let xt=128;for(;xt>0;)lt[pt++]=Dt&xt?0:255,xt>>=1}let Ct=0;for(pt=0,lt[pt]!==0&&(k[0]=1,++Ct),X=1;X<u;X++)lt[pt]!==lt[pt+1]&&(k[X]=lt[pt]?2:1,++Ct),pt++;for(lt[pt]!==0&&(k[X]=2,++Ct),B=1;B<T;B++){pt=B*Q,nt=B*I,lt[pt-Q]!==lt[pt]&&(k[nt]=lt[pt]?1:8,++Ct);let Dt=(lt[pt]?4:0)+(lt[pt-Q]?8:0);for(X=1;X<u;X++)Dt=(Dt>>2)+(lt[pt+1]?4:0)+(lt[pt-Q+1]?8:0),_[Dt]&&(k[nt+X]=_[Dt],++Ct),pt++;if(lt[pt-Q]!==lt[pt]&&(k[nt+X]=lt[pt]?2:4,++Ct),Ct>p)return null}for(pt=Q*(T-1),nt=B*I,lt[pt]!==0&&(k[nt]=8,++Ct),X=1;X<u;X++)lt[pt]!==lt[pt+1]&&(k[nt+X]=lt[pt]?4:8,++Ct),pt++;if(lt[pt]!==0&&(k[nt+X]=4,++Ct),Ct>p)return null;const mt=new Int32Array([0,I,-1,0,-I,0,0,0,1]),Pt=new Path2D;for(B=0;Ct&&B<=T;B++){let Dt=B*I;const xt=Dt+u;for(;Dt<xt&&!k[Dt];)Dt++;if(Dt===xt)continue;Pt.moveTo(Dt%I,B);const Bt=Dt;let ft=k[Dt];do{const at=mt[ft];do Dt+=at;while(!k[Dt]);const st=k[Dt];st!==5&&st!==10?(ft=st,k[Dt]=0):(ft=st&51*ft>>4,k[Dt]&=ft>>2|ft<<2),Pt.lineTo(Dt%I,Dt/I|0),k[Dt]||--Ct}while(Bt!==Dt);--B}return lt=null,k=null,function(Dt){Dt.save(),Dt.scale(1/u,-1/T),Dt.translate(0,-T),Dt.fill(Pt),Dt.beginPath(),Dt.restore()}}class v{constructor(u,T){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=s.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=s.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,u,T])}clone(){const u=Object.create(this);return u.clipBox=this.clipBox.slice(),u}setCurrentPoint(u,T){this.x=u,this.y=T}updatePathMinMax(u,T,p){[T,p]=s.Util.applyTransform([T,p],u),this.minX=Math.min(this.minX,T),this.minY=Math.min(this.minY,p),this.maxX=Math.max(this.maxX,T),this.maxY=Math.max(this.maxY,p)}updateRectMinMax(u,T){const p=s.Util.applyTransform(T,u),_=s.Util.applyTransform(T.slice(2),u);this.minX=Math.min(this.minX,p[0],_[0]),this.minY=Math.min(this.minY,p[1],_[1]),this.maxX=Math.max(this.maxX,p[0],_[0]),this.maxY=Math.max(this.maxY,p[1],_[1])}updateScalingPathMinMax(u,T){s.Util.scaleMinMax(u,T),this.minX=Math.min(this.minX,T[0]),this.maxX=Math.max(this.maxX,T[1]),this.minY=Math.min(this.minY,T[2]),this.maxY=Math.max(this.maxY,T[3])}updateCurvePathMinMax(u,T,p,_,I,k,B,X,nt,Q){const lt=s.Util.bezierBoundingBox(T,p,_,I,k,B,X,nt);if(Q){Q[0]=Math.min(Q[0],lt[0],lt[2]),Q[1]=Math.max(Q[1],lt[0],lt[2]),Q[2]=Math.min(Q[2],lt[1],lt[3]),Q[3]=Math.max(Q[3],lt[1],lt[3]);return}this.updateRectMinMax(u,lt)}getPathBoundingBox(u=i.PathType.FILL,T=null){const p=[this.minX,this.minY,this.maxX,this.maxY];if(u===i.PathType.STROKE){T||(0,s.unreachable)("Stroke bounding box must include transform.");const _=s.Util.singularValueDecompose2dScale(T),I=_[0]*this.lineWidth/2,k=_[1]*this.lineWidth/2;p[0]-=I,p[1]-=k,p[2]+=I,p[3]+=k}return p}updateClipFromPath(){const u=s.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(u||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(u){this.clipBox=u,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(u=i.PathType.FILL,T=null){return s.Util.intersect(this.clipBox,this.getPathBoundingBox(u,T))}}function M(G,u){if(typeof ImageData<"u"&&u instanceof ImageData){G.putImageData(u,0,0);return}const T=u.height,p=u.width,_=T%C,I=(T-_)/C,k=_===0?I:I+1,B=G.createImageData(p,C);let X=0,nt;const Q=u.data,lt=B.data;let pt,Ct,mt,Pt;if(u.kind===s.ImageKind.GRAYSCALE_1BPP){const Dt=Q.byteLength,xt=new Uint32Array(lt.buffer,0,lt.byteLength>>2),Bt=xt.length,ft=p+7>>3,at=4294967295,st=s.FeatureTest.isLittleEndian?4278190080:255;for(pt=0;pt<k;pt++){for(mt=pt<I?C:_,nt=0,Ct=0;Ct<mt;Ct++){const Tt=Dt-X;let Nt=0;const yt=Tt>ft?p:Tt*8-7,Ht=yt&-8;let jt=0,$t=0;for(;Nt<Ht;Nt+=8)$t=Q[X++],xt[nt++]=$t&128?at:st,xt[nt++]=$t&64?at:st,xt[nt++]=$t&32?at:st,xt[nt++]=$t&16?at:st,xt[nt++]=$t&8?at:st,xt[nt++]=$t&4?at:st,xt[nt++]=$t&2?at:st,xt[nt++]=$t&1?at:st;for(;Nt<yt;Nt++)jt===0&&($t=Q[X++],jt=128),xt[nt++]=$t&jt?at:st,jt>>=1}for(;nt<Bt;)xt[nt++]=0;G.putImageData(B,0,pt*C)}}else if(u.kind===s.ImageKind.RGBA_32BPP){for(Ct=0,Pt=p*C*4,pt=0;pt<I;pt++)lt.set(Q.subarray(X,X+Pt)),X+=Pt,G.putImageData(B,0,Ct),Ct+=C;pt<k&&(Pt=p*_*4,lt.set(Q.subarray(X,X+Pt)),G.putImageData(B,0,Ct))}else if(u.kind===s.ImageKind.RGB_24BPP)for(mt=C,Pt=p*mt,pt=0;pt<k;pt++){for(pt>=I&&(mt=_,Pt=p*mt),nt=0,Ct=Pt;Ct--;)lt[nt++]=Q[X++],lt[nt++]=Q[X++],lt[nt++]=Q[X++],lt[nt++]=255;G.putImageData(B,0,pt*C)}else throw new Error(`bad image kind: ${u.kind}`)}function R(G,u){if(u.bitmap){G.drawImage(u.bitmap,0,0);return}const T=u.height,p=u.width,_=T%C,I=(T-_)/C,k=_===0?I:I+1,B=G.createImageData(p,C);let X=0;const nt=u.data,Q=B.data;for(let lt=0;lt<k;lt++){const pt=lt<I?C:_;({srcPos:X}=(0,a.convertBlackAndWhiteToRGBA)({src:nt,srcPos:X,dest:Q,width:p,height:pt,nonBlackColor:0})),G.putImageData(B,0,lt*C)}}function g(G,u){const T=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const p of T)G[p]!==void 0&&(u[p]=G[p]);G.setLineDash!==void 0&&(u.setLineDash(G.getLineDash()),u.lineDashOffset=G.lineDashOffset)}function f(G){if(G.strokeStyle=G.fillStyle="#000000",G.fillRule="nonzero",G.globalAlpha=1,G.lineWidth=1,G.lineCap="butt",G.lineJoin="miter",G.miterLimit=10,G.globalCompositeOperation="source-over",G.font="10px sans-serif",G.setLineDash!==void 0&&(G.setLineDash([]),G.lineDashOffset=0),!s.isNodeJS){const{filter:u}=G;u!=="none"&&u!==""&&(G.filter="none")}}function L(G,u,T,p){const _=G.length;for(let I=3;I<_;I+=4){const k=G[I];if(k===0)G[I-3]=u,G[I-2]=T,G[I-1]=p;else if(k<255){const B=255-k;G[I-3]=G[I-3]*k+u*B>>8,G[I-2]=G[I-2]*k+T*B>>8,G[I-1]=G[I-1]*k+p*B>>8}}}function N(G,u,T){const p=G.length,_=1/255;for(let I=3;I<p;I+=4){const k=T?T[G[I]]:G[I];u[I]=u[I]*k*_|0}}function E(G,u,T){const p=G.length;for(let _=3;_<p;_+=4){const I=G[_-3]*77+G[_-2]*152+G[_-1]*28;u[_]=T?u[_]*T[I>>8]>>8:u[_]*I>>16}}function F(G,u,T,p,_,I,k,B,X,nt,Q){const lt=!!I,pt=lt?I[0]:0,Ct=lt?I[1]:0,mt=lt?I[2]:0,Pt=_==="Luminosity"?E:N,Dt=Math.min(p,Math.ceil(1048576/T));for(let xt=0;xt<p;xt+=Dt){const Bt=Math.min(Dt,p-xt),ft=G.getImageData(B-nt,xt+(X-Q),T,Bt),at=u.getImageData(B,xt+X,T,Bt);lt&&L(ft.data,pt,Ct,mt),Pt(ft.data,at.data,k),u.putImageData(at,B,xt+X)}}function P(G,u,T,p){const _=p[0],I=p[1],k=p[2]-_,B=p[3]-I;k===0||B===0||(F(u.context,T,k,B,u.subtype,u.backdrop,u.transferMap,_,I,u.offsetX,u.offsetY),G.save(),G.globalAlpha=1,G.globalCompositeOperation="source-over",G.setTransform(1,0,0,1,0,0),G.drawImage(T.canvas,0,0),G.restore())}function W(G,u){const T=s.Util.singularValueDecompose2dScale(G);T[0]=Math.fround(T[0]),T[1]=Math.fround(T[1]);const p=Math.fround((globalThis.devicePixelRatio||1)*r.PixelsPerInch.PDF_TO_CSS_UNITS);return u!==void 0?u:T[0]<=p||T[1]<=p}const z=["butt","round","square"],w=["miter","round","bevel"],Y={},ot={},gt=class gt{constructor(u,T,p,_,I,{optionalContentConfig:k,markedContentStack:B=null},X,nt){j(this,q);j(this,dt);this.ctx=u,this.current=new v(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=T,this.objs=p,this.canvasFactory=_,this.filterFactory=I,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=B||[],this.optionalContentConfig=k,this.cachedCanvases=new b(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=X,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=nt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(u,T=null){return typeof u=="string"?u.startsWith("g_")?this.commonObjs.get(u):this.objs.get(u):T}beginDrawing({transform:u,viewport:T,transparency:p=!1,background:_=null}){const I=this.ctx.canvas.width,k=this.ctx.canvas.height,B=this.ctx.fillStyle;if(this.ctx.fillStyle=_||"#ffffff",this.ctx.fillRect(0,0,I,k),this.ctx.fillStyle=B,p){const X=this.cachedCanvases.getCanvas("transparent",I,k);this.compositeCtx=this.ctx,this.transparentCanvas=X.canvas,this.ctx=X.context,this.ctx.save(),this.ctx.transform(...(0,r.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),f(this.ctx),u&&(this.ctx.transform(...u),this.outputScaleX=u[0],this.outputScaleY=u[0]),this.ctx.transform(...T.transform),this.viewportScale=T.scale,this.baseTransform=(0,r.getCurrentTransform)(this.ctx)}executeOperatorList(u,T,p,_){const I=u.argsArray,k=u.fnArray;let B=T||0;const X=I.length;if(X===B)return B;const nt=X-B>A&&typeof p=="function",Q=nt?Date.now()+h:0;let lt=0;const pt=this.commonObjs,Ct=this.objs;let mt;for(;;){if(_!==void 0&&B===_.nextBreakPoint)return _.breakIt(B,p),B;if(mt=k[B],mt!==s.OPS.dependency)this[mt].apply(this,I[B]);else for(const Pt of I[B]){const Dt=Pt.startsWith("g_")?pt:Ct;if(!Dt.has(Pt))return Dt.get(Pt,p),B}if(B++,B===X)return B;if(nt&&++lt>A){if(Date.now()>Q)return p(),B;lt=0}}}endDrawing(){K(this,q,Ze).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const u of this._cachedBitmapsMap.values()){for(const T of u.values())typeof HTMLCanvasElement<"u"&&T instanceof HTMLCanvasElement&&(T.width=T.height=0);u.clear()}this._cachedBitmapsMap.clear(),K(this,dt,tn).call(this)}_scaleImage(u,T){const p=u.width,_=u.height;let I=Math.max(Math.hypot(T[0],T[1]),1),k=Math.max(Math.hypot(T[2],T[3]),1),B=p,X=_,nt="prescale1",Q,lt;for(;I>2&&B>1||k>2&&X>1;){let pt=B,Ct=X;I>2&&B>1&&(pt=B>=16384?Math.floor(B/2)-1||1:Math.ceil(B/2),I/=B/pt),k>2&&X>1&&(Ct=X>=16384?Math.floor(X/2)-1||1:Math.ceil(X)/2,k/=X/Ct),Q=this.cachedCanvases.getCanvas(nt,pt,Ct),lt=Q.context,lt.clearRect(0,0,pt,Ct),lt.drawImage(u,0,0,B,X,0,0,pt,Ct),u=Q.canvas,B=pt,X=Ct,nt=nt==="prescale1"?"prescale2":"prescale1"}return{img:u,paintWidth:B,paintHeight:X}}_createMaskCanvas(u){const T=this.ctx,{width:p,height:_}=u,I=this.current.fillColor,k=this.current.patternFill,B=(0,r.getCurrentTransform)(T);let X,nt,Q,lt;if((u.bitmap||u.data)&&u.count>1){const Nt=u.bitmap||u.data.buffer;nt=JSON.stringify(k?B:[B.slice(0,4),I]),X=this._cachedBitmapsMap.get(Nt),X||(X=new Map,this._cachedBitmapsMap.set(Nt,X));const yt=X.get(nt);if(yt&&!k){const Ht=Math.round(Math.min(B[0],B[2])+B[4]),jt=Math.round(Math.min(B[1],B[3])+B[5]);return{canvas:yt,offsetX:Ht,offsetY:jt}}Q=yt}Q||(lt=this.cachedCanvases.getCanvas("maskCanvas",p,_),R(lt.context,u));let pt=s.Util.transform(B,[1/p,0,0,-1/_,0,0]);pt=s.Util.transform(pt,[1,0,0,1,0,-_]);const Ct=s.Util.applyTransform([0,0],pt),mt=s.Util.applyTransform([p,_],pt),Pt=s.Util.normalizeRect([Ct[0],Ct[1],mt[0],mt[1]]),Dt=Math.round(Pt[2]-Pt[0])||1,xt=Math.round(Pt[3]-Pt[1])||1,Bt=this.cachedCanvases.getCanvas("fillCanvas",Dt,xt),ft=Bt.context,at=Math.min(Ct[0],mt[0]),st=Math.min(Ct[1],mt[1]);ft.translate(-at,-st),ft.transform(...pt),Q||(Q=this._scaleImage(lt.canvas,(0,r.getCurrentTransformInverse)(ft)),Q=Q.img,X&&k&&X.set(nt,Q)),ft.imageSmoothingEnabled=W((0,r.getCurrentTransform)(ft),u.interpolate),S(ft,Q,0,0,Q.width,Q.height,0,0,p,_),ft.globalCompositeOperation="source-in";const Tt=s.Util.transform((0,r.getCurrentTransformInverse)(ft),[1,0,0,1,-at,-st]);return ft.fillStyle=k?I.getPattern(T,this,Tt,i.PathType.FILL):I,ft.fillRect(0,0,p,_),X&&!k&&(this.cachedCanvases.delete("fillCanvas"),X.set(nt,Bt.canvas)),{canvas:Bt.canvas,offsetX:Math.round(at),offsetY:Math.round(st)}}setLineWidth(u){u!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=u,this.ctx.lineWidth=u}setLineCap(u){this.ctx.lineCap=z[u]}setLineJoin(u){this.ctx.lineJoin=w[u]}setMiterLimit(u){this.ctx.miterLimit=u}setDash(u,T){const p=this.ctx;p.setLineDash!==void 0&&(p.setLineDash(u),p.lineDashOffset=T)}setRenderingIntent(u){}setFlatness(u){}setGState(u){for(const[T,p]of u)switch(T){case"LW":this.setLineWidth(p);break;case"LC":this.setLineCap(p);break;case"LJ":this.setLineJoin(p);break;case"ML":this.setMiterLimit(p);break;case"D":this.setDash(p[0],p[1]);break;case"RI":this.setRenderingIntent(p);break;case"FL":this.setFlatness(p);break;case"Font":this.setFont(p[0],p[1]);break;case"CA":this.current.strokeAlpha=p;break;case"ca":this.current.fillAlpha=p,this.ctx.globalAlpha=p;break;case"BM":this.ctx.globalCompositeOperation=p;break;case"SMask":this.current.activeSMask=p?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(p);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const u=this.inSMaskMode;this.current.activeSMask&&!u?this.beginSMaskMode():!this.current.activeSMask&&u&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const u=this.ctx.canvas.width,T=this.ctx.canvas.height,p="smaskGroupAt"+this.groupLevel,_=this.cachedCanvases.getCanvas(p,u,T);this.suspendedCtx=this.ctx,this.ctx=_.context;const I=this.ctx;I.setTransform(...(0,r.getCurrentTransform)(this.suspendedCtx)),g(this.suspendedCtx,I),D(I,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),g(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(u){if(!this.current.activeSMask)return;u?(u[0]=Math.floor(u[0]),u[1]=Math.floor(u[1]),u[2]=Math.ceil(u[2]),u[3]=Math.ceil(u[3])):u=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const T=this.current.activeSMask,p=this.suspendedCtx;P(p,T,this.ctx,u),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(g(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const u=this.current;this.stateStack.push(u),this.current=u.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),g(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(u,T,p,_,I,k){this.ctx.transform(u,T,p,_,I,k),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(u,T,p){const _=this.ctx,I=this.current;let k=I.x,B=I.y,X,nt;const Q=(0,r.getCurrentTransform)(_),lt=Q[0]===0&&Q[3]===0||Q[1]===0&&Q[2]===0,pt=lt?p.slice(0):null;for(let Ct=0,mt=0,Pt=u.length;Ct<Pt;Ct++)switch(u[Ct]|0){case s.OPS.rectangle:k=T[mt++],B=T[mt++];const Dt=T[mt++],xt=T[mt++],Bt=k+Dt,ft=B+xt;_.moveTo(k,B),Dt===0||xt===0?_.lineTo(Bt,ft):(_.lineTo(Bt,B),_.lineTo(Bt,ft),_.lineTo(k,ft)),lt||I.updateRectMinMax(Q,[k,B,Bt,ft]),_.closePath();break;case s.OPS.moveTo:k=T[mt++],B=T[mt++],_.moveTo(k,B),lt||I.updatePathMinMax(Q,k,B);break;case s.OPS.lineTo:k=T[mt++],B=T[mt++],_.lineTo(k,B),lt||I.updatePathMinMax(Q,k,B);break;case s.OPS.curveTo:X=k,nt=B,k=T[mt+4],B=T[mt+5],_.bezierCurveTo(T[mt],T[mt+1],T[mt+2],T[mt+3],k,B),I.updateCurvePathMinMax(Q,X,nt,T[mt],T[mt+1],T[mt+2],T[mt+3],k,B,pt),mt+=6;break;case s.OPS.curveTo2:X=k,nt=B,_.bezierCurveTo(k,B,T[mt],T[mt+1],T[mt+2],T[mt+3]),I.updateCurvePathMinMax(Q,X,nt,k,B,T[mt],T[mt+1],T[mt+2],T[mt+3],pt),k=T[mt+2],B=T[mt+3],mt+=4;break;case s.OPS.curveTo3:X=k,nt=B,k=T[mt+2],B=T[mt+3],_.bezierCurveTo(T[mt],T[mt+1],k,B,k,B),I.updateCurvePathMinMax(Q,X,nt,T[mt],T[mt+1],k,B,k,B,pt),mt+=4;break;case s.OPS.closePath:_.closePath();break}lt&&I.updateScalingPathMinMax(Q,pt),I.setCurrentPoint(k,B)}closePath(){this.ctx.closePath()}stroke(u=!0){const T=this.ctx,p=this.current.strokeColor;T.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof p=="object"&&(p!=null&&p.getPattern)?(T.save(),T.strokeStyle=p.getPattern(T,this,(0,r.getCurrentTransformInverse)(T),i.PathType.STROKE),this.rescaleAndStroke(!1),T.restore()):this.rescaleAndStroke(!0)),u&&this.consumePath(this.current.getClippedPathBoundingBox()),T.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(u=!0){const T=this.ctx,p=this.current.fillColor,_=this.current.patternFill;let I=!1;_&&(T.save(),T.fillStyle=p.getPattern(T,this,(0,r.getCurrentTransformInverse)(T),i.PathType.FILL),I=!0);const k=this.current.getClippedPathBoundingBox();this.contentVisible&&k!==null&&(this.pendingEOFill?(T.fill("evenodd"),this.pendingEOFill=!1):T.fill()),I&&T.restore(),u&&this.consumePath(k)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Y}eoClip(){this.pendingClip=ot}beginText(){this.current.textMatrix=s.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const u=this.pendingTextPaths,T=this.ctx;if(u===void 0){T.beginPath();return}T.save(),T.beginPath();for(const p of u)T.setTransform(...p.transform),T.translate(p.x,p.y),p.addToPath(T,p.fontSize);T.restore(),T.clip(),T.beginPath(),delete this.pendingTextPaths}setCharSpacing(u){this.current.charSpacing=u}setWordSpacing(u){this.current.wordSpacing=u}setHScale(u){this.current.textHScale=u/100}setLeading(u){this.current.leading=-u}setFont(u,T){var Q;const p=this.commonObjs.get(u),_=this.current;if(!p)throw new Error(`Can't find font for ${u}`);if(_.fontMatrix=p.fontMatrix||s.FONT_IDENTITY_MATRIX,(_.fontMatrix[0]===0||_.fontMatrix[3]===0)&&(0,s.warn)("Invalid font matrix for font "+u),T<0?(T=-T,_.fontDirection=-1):_.fontDirection=1,this.current.font=p,this.current.fontSize=T,p.isType3Font)return;const I=p.loadedName||"sans-serif",k=((Q=p.systemFontInfo)==null?void 0:Q.css)||`"${I}", ${p.fallbackName}`;let B="normal";p.black?B="900":p.bold&&(B="bold");const X=p.italic?"italic":"normal";let nt=T;T<c?nt=c:T>o&&(nt=o),this.current.fontSizeScale=T/nt,this.ctx.font=`${X} ${B} ${nt}px ${k}`}setTextRenderingMode(u){this.current.textRenderingMode=u}setTextRise(u){this.current.textRise=u}moveText(u,T){this.current.x=this.current.lineX+=u,this.current.y=this.current.lineY+=T}setLeadingMoveText(u,T){this.setLeading(-T),this.moveText(u,T)}setTextMatrix(u,T,p,_,I,k){this.current.textMatrix=[u,T,p,_,I,k],this.current.textMatrixScale=Math.hypot(u,T),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(u,T,p,_){const I=this.ctx,k=this.current,B=k.font,X=k.textRenderingMode,nt=k.fontSize/k.fontSizeScale,Q=X&s.TextRenderingMode.FILL_STROKE_MASK,lt=!!(X&s.TextRenderingMode.ADD_TO_PATH_FLAG),pt=k.patternFill&&!B.missingFile;let Ct;(B.disableFontFace||lt||pt)&&(Ct=B.getPathGenerator(this.commonObjs,u)),B.disableFontFace||pt?(I.save(),I.translate(T,p),I.beginPath(),Ct(I,nt),_&&I.setTransform(..._),(Q===s.TextRenderingMode.FILL||Q===s.TextRenderingMode.FILL_STROKE)&&I.fill(),(Q===s.TextRenderingMode.STROKE||Q===s.TextRenderingMode.FILL_STROKE)&&I.stroke(),I.restore()):((Q===s.TextRenderingMode.FILL||Q===s.TextRenderingMode.FILL_STROKE)&&I.fillText(u,T,p),(Q===s.TextRenderingMode.STROKE||Q===s.TextRenderingMode.FILL_STROKE)&&I.strokeText(u,T,p)),lt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,r.getCurrentTransform)(I),x:T,y:p,fontSize:nt,addToPath:Ct})}get isFontSubpixelAAEnabled(){const{context:u}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);u.scale(1.5,1),u.fillText("I",0,10);const T=u.getImageData(0,0,10,10).data;let p=!1;for(let _=3;_<T.length;_+=4)if(T[_]>0&&T[_]<255){p=!0;break}return(0,s.shadow)(this,"isFontSubpixelAAEnabled",p)}showText(u){const T=this.current,p=T.font;if(p.isType3Font)return this.showType3Text(u);const _=T.fontSize;if(_===0)return;const I=this.ctx,k=T.fontSizeScale,B=T.charSpacing,X=T.wordSpacing,nt=T.fontDirection,Q=T.textHScale*nt,lt=u.length,pt=p.vertical,Ct=pt?1:-1,mt=p.defaultVMetrics,Pt=_*T.fontMatrix[0],Dt=T.textRenderingMode===s.TextRenderingMode.FILL&&!p.disableFontFace&&!T.patternFill;I.save(),I.transform(...T.textMatrix),I.translate(T.x,T.y+T.textRise),nt>0?I.scale(Q,-1):I.scale(Q,1);let xt;if(T.patternFill){I.save();const Tt=T.fillColor.getPattern(I,this,(0,r.getCurrentTransformInverse)(I),i.PathType.FILL);xt=(0,r.getCurrentTransform)(I),I.restore(),I.fillStyle=Tt}let Bt=T.lineWidth;const ft=T.textMatrixScale;if(ft===0||Bt===0){const Tt=T.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;(Tt===s.TextRenderingMode.STROKE||Tt===s.TextRenderingMode.FILL_STROKE)&&(Bt=this.getSinglePixelWidth())}else Bt/=ft;if(k!==1&&(I.scale(k,k),Bt/=k),I.lineWidth=Bt,p.isInvalidPDFjsFont){const Tt=[];let Nt=0;for(const yt of u)Tt.push(yt.unicode),Nt+=yt.width;I.fillText(Tt.join(""),0,0),T.x+=Nt*Pt*Q,I.restore(),this.compose();return}let at=0,st;for(st=0;st<lt;++st){const Tt=u[st];if(typeof Tt=="number"){at+=Ct*Tt*_/1e3;continue}let Nt=!1;const yt=(Tt.isSpace?X:0)+B,Ht=Tt.fontChar,jt=Tt.accent;let $t,Xt,qt=Tt.width;if(pt){const Vt=Tt.vmetric||mt,ut=-(Tt.vmetric?Vt[1]:qt*.5)*Pt,rt=Vt[2]*Pt;qt=Vt?-Vt[0]:qt,$t=ut/k,Xt=(at+rt)/k}else $t=at/k,Xt=0;if(p.remeasure&&qt>0){const Vt=I.measureText(Ht).width*1e3/_*k;if(qt<Vt&&this.isFontSubpixelAAEnabled){const ut=qt/Vt;Nt=!0,I.save(),I.scale(ut,1),$t/=ut}else qt!==Vt&&($t+=(qt-Vt)/2e3*_/k)}if(this.contentVisible&&(Tt.isInFont||p.missingFile)){if(Dt&&!jt)I.fillText(Ht,$t,Xt);else if(this.paintChar(Ht,$t,Xt,xt),jt){const Vt=$t+_*jt.offset.x/k,ut=Xt-_*jt.offset.y/k;this.paintChar(jt.fontChar,Vt,ut,xt)}}const zt=pt?qt*Pt-yt*nt:qt*Pt+yt*nt;at+=zt,Nt&&I.restore()}pt?T.y-=at:T.x+=at*Q,I.restore(),this.compose()}showType3Text(u){const T=this.ctx,p=this.current,_=p.font,I=p.fontSize,k=p.fontDirection,B=_.vertical?1:-1,X=p.charSpacing,nt=p.wordSpacing,Q=p.textHScale*k,lt=p.fontMatrix||s.FONT_IDENTITY_MATRIX,pt=u.length,Ct=p.textRenderingMode===s.TextRenderingMode.INVISIBLE;let mt,Pt,Dt,xt;if(!(Ct||I===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,T.save(),T.transform(...p.textMatrix),T.translate(p.x,p.y),T.scale(Q,k),mt=0;mt<pt;++mt){if(Pt=u[mt],typeof Pt=="number"){xt=B*Pt*I/1e3,this.ctx.translate(xt,0),p.x+=xt*Q;continue}const Bt=(Pt.isSpace?nt:0)+X,ft=_.charProcOperatorList[Pt.operatorListId];if(!ft){(0,s.warn)(`Type3 character "${Pt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Pt,this.save(),T.scale(I,I),T.transform(...lt),this.executeOperatorList(ft),this.restore()),Dt=s.Util.applyTransform([Pt.width,0],lt)[0]*I+Bt,T.translate(Dt,0),p.x+=Dt*Q}T.restore(),this.processingType3=null}}setCharWidth(u,T){}setCharWidthAndBounds(u,T,p,_,I,k){this.ctx.rect(p,_,I-p,k-_),this.ctx.clip(),this.endPath()}getColorN_Pattern(u){let T;if(u[0]==="TilingPattern"){const p=u[1],_=this.baseTransform||(0,r.getCurrentTransform)(this.ctx),I={createCanvasGraphics:k=>new gt(k,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};T=new i.TilingPattern(u,p,this.ctx,I,_)}else T=this._getPattern(u[1],u[2]);return T}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(u,T,p){const _=s.Util.makeHexColor(u,T,p);this.ctx.strokeStyle=_,this.current.strokeColor=_}setFillRGBColor(u,T,p){const _=s.Util.makeHexColor(u,T,p);this.ctx.fillStyle=_,this.current.fillColor=_,this.current.patternFill=!1}_getPattern(u,T=null){let p;return this.cachedPatterns.has(u)?p=this.cachedPatterns.get(u):(p=(0,i.getShadingPattern)(this.getObject(u)),this.cachedPatterns.set(u,p)),T&&(p.matrix=T),p}shadingFill(u){if(!this.contentVisible)return;const T=this.ctx;this.save();const p=this._getPattern(u);T.fillStyle=p.getPattern(T,this,(0,r.getCurrentTransformInverse)(T),i.PathType.SHADING);const _=(0,r.getCurrentTransformInverse)(T);if(_){const{width:I,height:k}=T.canvas,[B,X,nt,Q]=s.Util.getAxialAlignedBoundingBox([0,0,I,k],_);this.ctx.fillRect(B,X,nt-B,Q-X)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,s.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,s.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(u,T){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(u)&&u.length===6&&this.transform(...u),this.baseTransform=(0,r.getCurrentTransform)(this.ctx),T)){const p=T[2]-T[0],_=T[3]-T[1];this.ctx.rect(T[0],T[1],p,_),this.current.updateRectMinMax((0,r.getCurrentTransform)(this.ctx),T),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(u){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const T=this.ctx;u.isolated||(0,s.info)("TODO: Support non-isolated groups."),u.knockout&&(0,s.warn)("Knockout groups not supported.");const p=(0,r.getCurrentTransform)(T);if(u.matrix&&T.transform(...u.matrix),!u.bbox)throw new Error("Bounding box is required.");let _=s.Util.getAxialAlignedBoundingBox(u.bbox,(0,r.getCurrentTransform)(T));const I=[0,0,T.canvas.width,T.canvas.height];_=s.Util.intersect(_,I)||[0,0,0,0];const k=Math.floor(_[0]),B=Math.floor(_[1]);let X=Math.max(Math.ceil(_[2])-k,1),nt=Math.max(Math.ceil(_[3])-B,1),Q=1,lt=1;X>m&&(Q=X/m,X=m),nt>m&&(lt=nt/m,nt=m),this.current.startNewPathAndClipBox([0,0,X,nt]);let pt="groupAt"+this.groupLevel;u.smask&&(pt+="_smask_"+this.smaskCounter++%2);const Ct=this.cachedCanvases.getCanvas(pt,X,nt),mt=Ct.context;mt.scale(1/Q,1/lt),mt.translate(-k,-B),mt.transform(...p),u.smask?this.smaskStack.push({canvas:Ct.canvas,context:mt,offsetX:k,offsetY:B,scaleX:Q,scaleY:lt,subtype:u.smask.subtype,backdrop:u.smask.backdrop,transferMap:u.smask.transferMap||null,startTransformInverse:null}):(T.setTransform(1,0,0,1,0,0),T.translate(k,B),T.scale(Q,lt),T.save()),g(T,mt),this.ctx=mt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(T),this.groupLevel++}endGroup(u){if(!this.contentVisible)return;this.groupLevel--;const T=this.ctx,p=this.groupStack.pop();if(this.ctx=p,this.ctx.imageSmoothingEnabled=!1,u.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const _=(0,r.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(..._);const I=s.Util.getAxialAlignedBoundingBox([0,0,T.canvas.width,T.canvas.height],_);this.ctx.drawImage(T.canvas,0,0),this.ctx.restore(),this.compose(I)}}beginAnnotation(u,T,p,_,I){if(K(this,q,Ze).call(this),f(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(T)&&T.length===4){const k=T[2]-T[0],B=T[3]-T[1];if(I&&this.annotationCanvasMap){p=p.slice(),p[4]-=T[0],p[5]-=T[1],T=T.slice(),T[0]=T[1]=0,T[2]=k,T[3]=B;const[X,nt]=s.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(this.ctx)),{viewportScale:Q}=this,lt=Math.ceil(k*this.outputScaleX*Q),pt=Math.ceil(B*this.outputScaleY*Q);this.annotationCanvas=this.canvasFactory.create(lt,pt);const{canvas:Ct,context:mt}=this.annotationCanvas;this.annotationCanvasMap.set(u,Ct),this.annotationCanvas.savedCtx=this.ctx,this.ctx=mt,this.ctx.save(),this.ctx.setTransform(X,0,0,-nt,0,B*nt),f(this.ctx)}else f(this.ctx),this.ctx.rect(T[0],T[1],k,B),this.ctx.clip(),this.endPath()}this.current=new v(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...p),this.transform(..._)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),K(this,dt,tn).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(u){if(!this.contentVisible)return;const T=u.count;u=this.getObject(u.data,u),u.count=T;const p=this.ctx,_=this.processingType3;if(_&&(_.compiled===void 0&&(_.compiled=O(u)),_.compiled)){_.compiled(p);return}const I=this._createMaskCanvas(u),k=I.canvas;p.save(),p.setTransform(1,0,0,1,0,0),p.drawImage(k,I.offsetX,I.offsetY),p.restore(),this.compose()}paintImageMaskXObjectRepeat(u,T,p=0,_=0,I,k){if(!this.contentVisible)return;u=this.getObject(u.data,u);const B=this.ctx;B.save();const X=(0,r.getCurrentTransform)(B);B.transform(T,p,_,I,0,0);const nt=this._createMaskCanvas(u);B.setTransform(1,0,0,1,nt.offsetX-X[4],nt.offsetY-X[5]);for(let Q=0,lt=k.length;Q<lt;Q+=2){const pt=s.Util.transform(X,[T,p,_,I,k[Q],k[Q+1]]),[Ct,mt]=s.Util.applyTransform([0,0],pt);B.drawImage(nt.canvas,Ct,mt)}B.restore(),this.compose()}paintImageMaskXObjectGroup(u){if(!this.contentVisible)return;const T=this.ctx,p=this.current.fillColor,_=this.current.patternFill;for(const I of u){const{data:k,width:B,height:X,transform:nt}=I,Q=this.cachedCanvases.getCanvas("maskCanvas",B,X),lt=Q.context;lt.save();const pt=this.getObject(k,I);R(lt,pt),lt.globalCompositeOperation="source-in",lt.fillStyle=_?p.getPattern(lt,this,(0,r.getCurrentTransformInverse)(T),i.PathType.FILL):p,lt.fillRect(0,0,B,X),lt.restore(),T.save(),T.transform(...nt),T.scale(1,-1),S(T,Q.canvas,0,0,B,X,0,-1,1,1),T.restore()}this.compose()}paintImageXObject(u){if(!this.contentVisible)return;const T=this.getObject(u);if(!T){(0,s.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(T)}paintImageXObjectRepeat(u,T,p,_){if(!this.contentVisible)return;const I=this.getObject(u);if(!I){(0,s.warn)("Dependent image isn't ready yet");return}const k=I.width,B=I.height,X=[];for(let nt=0,Q=_.length;nt<Q;nt+=2)X.push({transform:[T,0,0,p,_[nt],_[nt+1]],x:0,y:0,w:k,h:B});this.paintInlineImageXObjectGroup(I,X)}applyTransferMapsToCanvas(u){return this.current.transferMaps!=="none"&&(u.filter=this.current.transferMaps,u.drawImage(u.canvas,0,0),u.filter="none"),u.canvas}applyTransferMapsToBitmap(u){if(this.current.transferMaps==="none")return u.bitmap;const{bitmap:T,width:p,height:_}=u,I=this.cachedCanvases.getCanvas("inlineImage",p,_),k=I.context;return k.filter=this.current.transferMaps,k.drawImage(T,0,0),k.filter="none",I.canvas}paintInlineImageXObject(u){if(!this.contentVisible)return;const T=u.width,p=u.height,_=this.ctx;if(this.save(),!s.isNodeJS){const{filter:B}=_;B!=="none"&&B!==""&&(_.filter="none")}_.scale(1/T,-1/p);let I;if(u.bitmap)I=this.applyTransferMapsToBitmap(u);else if(typeof HTMLElement=="function"&&u instanceof HTMLElement||!u.data)I=u;else{const B=this.cachedCanvases.getCanvas("inlineImage",T,p).context;M(B,u),I=this.applyTransferMapsToCanvas(B)}const k=this._scaleImage(I,(0,r.getCurrentTransformInverse)(_));_.imageSmoothingEnabled=W((0,r.getCurrentTransform)(_),u.interpolate),S(_,k.img,0,0,k.paintWidth,k.paintHeight,0,-p,T,p),this.compose(),this.restore()}paintInlineImageXObjectGroup(u,T){if(!this.contentVisible)return;const p=this.ctx;let _;if(u.bitmap)_=u.bitmap;else{const I=u.width,k=u.height,B=this.cachedCanvases.getCanvas("inlineImage",I,k).context;M(B,u),_=this.applyTransferMapsToCanvas(B)}for(const I of T)p.save(),p.transform(...I.transform),p.scale(1,-1),S(p,_,I.x,I.y,I.w,I.h,0,-1,1,1),p.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(u){}markPointProps(u,T){}beginMarkedContent(u){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(u,T){u==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(T)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(u){const T=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(u);const p=this.ctx;this.pendingClip&&(T||(this.pendingClip===ot?p.clip("evenodd"):p.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),p.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const u=(0,r.getCurrentTransform)(this.ctx);if(u[1]===0&&u[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(u[0]),Math.abs(u[3]));else{const T=Math.abs(u[0]*u[3]-u[2]*u[1]),p=Math.hypot(u[0],u[2]),_=Math.hypot(u[1],u[3]);this._cachedGetSinglePixelWidth=Math.max(p,_)/T}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:u}=this.current,{a:T,b:p,c:_,d:I}=this.ctx.getTransform();let k,B;if(p===0&&_===0){const X=Math.abs(T),nt=Math.abs(I);if(X===nt)if(u===0)k=B=1/X;else{const Q=X*u;k=B=Q<1?1/Q:1}else if(u===0)k=1/X,B=1/nt;else{const Q=X*u,lt=nt*u;k=Q<1?1/Q:1,B=lt<1?1/lt:1}}else{const X=Math.abs(T*I-p*_),nt=Math.hypot(T,p),Q=Math.hypot(_,I);if(u===0)k=Q/X,B=nt/X;else{const lt=u*X;k=Q>lt?Q/lt:1,B=nt>lt?nt/lt:1}}this._cachedScaleForStroking[0]=k,this._cachedScaleForStroking[1]=B}return this._cachedScaleForStroking}rescaleAndStroke(u){const{ctx:T}=this,{lineWidth:p}=this.current,[_,I]=this.getScaleForStroking();if(T.lineWidth=p||1,_===1&&I===1){T.stroke();return}const k=T.getLineDash();if(u&&T.save(),T.scale(_,I),k.length>0){const B=Math.max(_,I);T.setLineDash(k.map(X=>X/B)),T.lineDashOffset/=B}T.stroke(),u&&T.restore()}isContentVisible(){for(let u=this.markedContentStack.length-1;u>=0;u--)if(!this.markedContentStack[u].visible)return!1;return!0}};q=new WeakSet,Ze=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},dt=new WeakSet,tn=function(){if(this.pageColors){const u=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(u!=="none"){const T=this.ctx.filter;this.ctx.filter=u,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=T}}};let et=gt;e.CanvasGraphics=et;for(const G in s.OPS)et.prototype[G]!==void 0&&(et.prototype[s.OPS[G]]=et.prototype[G])},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=C;var s=n(1),r=n(6);const i={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=i;function a(O,v){if(!v)return;const M=v[2]-v[0],R=v[3]-v[1],g=new Path2D;g.rect(v[0],v[1],M,R),O.clip(g)}class c{constructor(){this.constructor===c&&(0,s.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,s.unreachable)("Abstract method `getPattern` called.")}}class o extends c{constructor(v){super(),this._type=v[1],this._bbox=v[2],this._colorStops=v[3],this._p0=v[4],this._p1=v[5],this._r0=v[6],this._r1=v[7],this.matrix=null}_createGradient(v){let M;this._type==="axial"?M=v.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(M=v.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const R of this._colorStops)M.addColorStop(R[0],R[1]);return M}getPattern(v,M,R,g){let f;if(g===i.STROKE||g===i.FILL){const L=M.current.getClippedPathBoundingBox(g,(0,r.getCurrentTransform)(v))||[0,0,0,0],N=Math.ceil(L[2]-L[0])||1,E=Math.ceil(L[3]-L[1])||1,F=M.cachedCanvases.getCanvas("pattern",N,E,!0),P=F.context;P.clearRect(0,0,P.canvas.width,P.canvas.height),P.beginPath(),P.rect(0,0,P.canvas.width,P.canvas.height),P.translate(-L[0],-L[1]),R=s.Util.transform(R,[1,0,0,1,L[0],L[1]]),P.transform(...M.baseTransform),this.matrix&&P.transform(...this.matrix),a(P,this._bbox),P.fillStyle=this._createGradient(P),P.fill(),f=v.createPattern(F.canvas,"no-repeat");const W=new DOMMatrix(R);f.setTransform(W)}else a(v,this._bbox),f=this._createGradient(v);return f}}function m(O,v,M,R,g,f,L,N){const E=v.coords,F=v.colors,P=O.data,W=O.width*4;let z;E[M+1]>E[R+1]&&(z=M,M=R,R=z,z=f,f=L,L=z),E[R+1]>E[g+1]&&(z=R,R=g,g=z,z=L,L=N,N=z),E[M+1]>E[R+1]&&(z=M,M=R,R=z,z=f,f=L,L=z);const w=(E[M]+v.offsetX)*v.scaleX,Y=(E[M+1]+v.offsetY)*v.scaleY,ot=(E[R]+v.offsetX)*v.scaleX,et=(E[R+1]+v.offsetY)*v.scaleY,q=(E[g]+v.offsetX)*v.scaleX,ht=(E[g+1]+v.offsetY)*v.scaleY;if(Y>=ht)return;const dt=F[f],Et=F[f+1],gt=F[f+2],G=F[L],u=F[L+1],T=F[L+2],p=F[N],_=F[N+1],I=F[N+2],k=Math.round(Y),B=Math.round(ht);let X,nt,Q,lt,pt,Ct,mt,Pt;for(let Dt=k;Dt<=B;Dt++){if(Dt<et){const st=Dt<Y?0:(Y-Dt)/(Y-et);X=w-(w-ot)*st,nt=dt-(dt-G)*st,Q=Et-(Et-u)*st,lt=gt-(gt-T)*st}else{let st;Dt>ht?st=1:et===ht?st=0:st=(et-Dt)/(et-ht),X=ot-(ot-q)*st,nt=G-(G-p)*st,Q=u-(u-_)*st,lt=T-(T-I)*st}let xt;Dt<Y?xt=0:Dt>ht?xt=1:xt=(Y-Dt)/(Y-ht),pt=w-(w-q)*xt,Ct=dt-(dt-p)*xt,mt=Et-(Et-_)*xt,Pt=gt-(gt-I)*xt;const Bt=Math.round(Math.min(X,pt)),ft=Math.round(Math.max(X,pt));let at=W*Dt+Bt*4;for(let st=Bt;st<=ft;st++)xt=(X-st)/(X-pt),xt<0?xt=0:xt>1&&(xt=1),P[at++]=nt-(nt-Ct)*xt|0,P[at++]=Q-(Q-mt)*xt|0,P[at++]=lt-(lt-Pt)*xt|0,P[at++]=255}}function h(O,v,M){const R=v.coords,g=v.colors;let f,L;switch(v.type){case"lattice":const N=v.verticesPerRow,E=Math.floor(R.length/N)-1,F=N-1;for(f=0;f<E;f++){let P=f*N;for(let W=0;W<F;W++,P++)m(O,M,R[P],R[P+1],R[P+N],g[P],g[P+1],g[P+N]),m(O,M,R[P+N+1],R[P+1],R[P+N],g[P+N+1],g[P+1],g[P+N])}break;case"triangles":for(f=0,L=R.length;f<L;f+=3)m(O,M,R[f],R[f+1],R[f+2],g[f],g[f+1],g[f+2]);break;default:throw new Error("illegal figure")}}class A extends c{constructor(v){super(),this._coords=v[2],this._colors=v[3],this._figures=v[4],this._bounds=v[5],this._bbox=v[7],this._background=v[8],this.matrix=null}_createMeshCanvas(v,M,R){const g=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),L=Math.ceil(this._bounds[2])-g,N=Math.ceil(this._bounds[3])-f,E=Math.min(Math.ceil(Math.abs(L*v[0]*1.1)),3e3),F=Math.min(Math.ceil(Math.abs(N*v[1]*1.1)),3e3),P=L/E,W=N/F,z={coords:this._coords,colors:this._colors,offsetX:-g,offsetY:-f,scaleX:1/P,scaleY:1/W},w=E+2*2,Y=F+2*2,ot=R.getCanvas("mesh",w,Y,!1),et=ot.context,q=et.createImageData(E,F);if(M){const ht=q.data;for(let dt=0,Et=ht.length;dt<Et;dt+=4)ht[dt]=M[0],ht[dt+1]=M[1],ht[dt+2]=M[2],ht[dt+3]=255}for(const ht of this._figures)h(q,ht,z);return et.putImageData(q,2,2),{canvas:ot.canvas,offsetX:g-2*P,offsetY:f-2*W,scaleX:P,scaleY:W}}getPattern(v,M,R,g){a(v,this._bbox);let f;if(g===i.SHADING)f=s.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(v));else if(f=s.Util.singularValueDecompose2dScale(M.baseTransform),this.matrix){const N=s.Util.singularValueDecompose2dScale(this.matrix);f=[f[0]*N[0],f[1]*N[1]]}const L=this._createMeshCanvas(f,g===i.SHADING?null:this._background,M.cachedCanvases);return g!==i.SHADING&&(v.setTransform(...M.baseTransform),this.matrix&&v.transform(...this.matrix)),v.translate(L.offsetX,L.offsetY),v.scale(L.scaleX,L.scaleY),v.createPattern(L.canvas,"no-repeat")}}class y extends c{getPattern(){return"hotpink"}}function C(O){switch(O[0]){case"RadialAxial":return new o(O);case"Mesh":return new A(O);case"Dummy":return new y}throw new Error(`Unknown IR type: ${O[0]}`)}const D={COLORED:1,UNCOLORED:2},S=class S{constructor(v,M,R,g,f){this.operatorList=v[2],this.matrix=v[3]||[1,0,0,1,0,0],this.bbox=v[4],this.xstep=v[5],this.ystep=v[6],this.paintType=v[7],this.tilingType=v[8],this.color=M,this.ctx=R,this.canvasGraphicsFactory=g,this.baseTransform=f}createPatternCanvas(v){const M=this.operatorList,R=this.bbox,g=this.xstep,f=this.ystep,L=this.paintType,N=this.tilingType,E=this.color,F=this.canvasGraphicsFactory;(0,s.info)("TilingType: "+N);const P=R[0],W=R[1],z=R[2],w=R[3],Y=s.Util.singularValueDecompose2dScale(this.matrix),ot=s.Util.singularValueDecompose2dScale(this.baseTransform),et=[Y[0]*ot[0],Y[1]*ot[1]],q=this.getSizeAndScale(g,this.ctx.canvas.width,et[0]),ht=this.getSizeAndScale(f,this.ctx.canvas.height,et[1]),dt=v.cachedCanvases.getCanvas("pattern",q.size,ht.size,!0),Et=dt.context,gt=F.createCanvasGraphics(Et);gt.groupLevel=v.groupLevel,this.setFillAndStrokeStyleToContext(gt,L,E);let G=P,u=W,T=z,p=w;return P<0&&(G=0,T+=Math.abs(P)),W<0&&(u=0,p+=Math.abs(W)),Et.translate(-(q.scale*G),-(ht.scale*u)),gt.transform(q.scale,0,0,ht.scale,0,0),Et.save(),this.clipBbox(gt,G,u,T,p),gt.baseTransform=(0,r.getCurrentTransform)(gt.ctx),gt.executeOperatorList(M),gt.endDrawing(),{canvas:dt.canvas,scaleX:q.scale,scaleY:ht.scale,offsetX:G,offsetY:u}}getSizeAndScale(v,M,R){v=Math.abs(v);const g=Math.max(S.MAX_PATTERN_SIZE,M);let f=Math.ceil(v*R);return f>=g?f=g:R=f/v,{scale:R,size:f}}clipBbox(v,M,R,g,f){const L=g-M,N=f-R;v.ctx.rect(M,R,L,N),v.current.updateRectMinMax((0,r.getCurrentTransform)(v.ctx),[M,R,g,f]),v.clip(),v.endPath()}setFillAndStrokeStyleToContext(v,M,R){const g=v.ctx,f=v.current;switch(M){case D.COLORED:const L=this.ctx;g.fillStyle=L.fillStyle,g.strokeStyle=L.strokeStyle,f.fillColor=L.fillStyle,f.strokeColor=L.strokeStyle;break;case D.UNCOLORED:const N=s.Util.makeHexColor(R[0],R[1],R[2]);g.fillStyle=N,g.strokeStyle=N,f.fillColor=N,f.strokeColor=N;break;default:throw new s.FormatError(`Unsupported paint type: ${M}`)}}getPattern(v,M,R,g){let f=R;g!==i.SHADING&&(f=s.Util.transform(f,M.baseTransform),this.matrix&&(f=s.Util.transform(f,this.matrix)));const L=this.createPatternCanvas(M);let N=new DOMMatrix(f);N=N.translate(L.offsetX,L.offsetY),N=N.scale(1/L.scaleX,1/L.scaleY);const E=v.createPattern(L.canvas,"repeat");return E.setTransform(N),E}};ne(S,"MAX_PATTERN_SIZE",3e3);let b=S;e.TilingPattern=b},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=i,e.convertToRGBA=r,e.grayToRGBA=c;var s=n(1);function r(o){switch(o.kind){case s.ImageKind.GRAYSCALE_1BPP:return i(o);case s.ImageKind.RGB_24BPP:return a(o)}return null}function i({src:o,srcPos:m=0,dest:h,width:A,height:y,nonBlackColor:C=4294967295,inverseDecode:D=!1}){const b=s.FeatureTest.isLittleEndian?4278190080:255,[S,O]=D?[C,b]:[b,C],v=A>>3,M=A&7,R=o.length;h=new Uint32Array(h.buffer);let g=0;for(let f=0;f<y;f++){for(const N=m+v;m<N;m++){const E=m<R?o[m]:255;h[g++]=E&128?O:S,h[g++]=E&64?O:S,h[g++]=E&32?O:S,h[g++]=E&16?O:S,h[g++]=E&8?O:S,h[g++]=E&4?O:S,h[g++]=E&2?O:S,h[g++]=E&1?O:S}if(M===0)continue;const L=m<R?o[m++]:255;for(let N=0;N<M;N++)h[g++]=L&1<<7-N?O:S}return{srcPos:m,destPos:g}}function a({src:o,srcPos:m=0,dest:h,destPos:A=0,width:y,height:C}){let D=0;const b=o.length>>2,S=new Uint32Array(o.buffer,m,b);if(s.FeatureTest.isLittleEndian){for(;D<b-2;D+=3,A+=4){const O=S[D],v=S[D+1],M=S[D+2];h[A]=O|4278190080,h[A+1]=O>>>24|v<<8|4278190080,h[A+2]=v>>>16|M<<16|4278190080,h[A+3]=M>>>8|4278190080}for(let O=D*4,v=o.length;O<v;O+=3)h[A++]=o[O]|o[O+1]<<8|o[O+2]<<16|4278190080}else{for(;D<b-2;D+=3,A+=4){const O=S[D],v=S[D+1],M=S[D+2];h[A]=O|255,h[A+1]=O<<24|v>>>8|255,h[A+2]=v<<16|M>>>16|255,h[A+3]=M<<8|255}for(let O=D*4,v=o.length;O<v;O+=3)h[A++]=o[O]<<24|o[O+1]<<16|o[O+2]<<8|255}return{srcPos:m,destPos:A}}function c(o,m){if(s.FeatureTest.isLittleEndian)for(let h=0,A=o.length;h<A;h++)m[h]=o[h]*65793|4278190080;else for(let h=0,A=o.length;h<A;h++)m[h]=o[h]*16843008|255}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const n=Object.create(null);e.GlobalWorkerOptions=n,n.workerPort=null,n.workerSrc=""},(t,e,n)=>{var o,vn,h,Pn,y,Re;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var s=n(1);const r={UNKNOWN:0,DATA:1,ERROR:2},i={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function a(D){switch(D instanceof Error||typeof D=="object"&&D!==null||(0,s.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),D.name){case"AbortException":return new s.AbortException(D.message);case"MissingPDFException":return new s.MissingPDFException(D.message);case"PasswordException":return new s.PasswordException(D.message,D.code);case"UnexpectedResponseException":return new s.UnexpectedResponseException(D.message,D.status);case"UnknownErrorException":return new s.UnknownErrorException(D.message,D.details);default:return new s.UnknownErrorException(D.message,D.toString())}}class c{constructor(b,S,O){j(this,o);j(this,h);j(this,y);this.sourceName=b,this.targetName=S,this.comObj=O,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=v=>{const M=v.data;if(M.targetName!==this.sourceName)return;if(M.stream){K(this,h,Pn).call(this,M);return}if(M.callback){const g=M.callbackId,f=this.callbackCapabilities[g];if(!f)throw new Error(`Cannot resolve callback ${g}`);if(delete this.callbackCapabilities[g],M.callback===r.DATA)f.resolve(M.data);else if(M.callback===r.ERROR)f.reject(a(M.reason));else throw new Error("Unexpected callback case");return}const R=this.actionHandler[M.action];if(!R)throw new Error(`Unknown action from worker: ${M.action}`);if(M.callbackId){const g=this.sourceName,f=M.sourceName;new Promise(function(L){L(R(M.data))}).then(function(L){O.postMessage({sourceName:g,targetName:f,callback:r.DATA,callbackId:M.callbackId,data:L})},function(L){O.postMessage({sourceName:g,targetName:f,callback:r.ERROR,callbackId:M.callbackId,reason:a(L)})});return}if(M.streamId){K(this,o,vn).call(this,M);return}R(M.data)},O.addEventListener("message",this._onComObjOnMessage)}on(b,S){const O=this.actionHandler;if(O[b])throw new Error(`There is already an actionName called "${b}"`);O[b]=S}send(b,S,O){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:b,data:S},O)}sendWithPromise(b,S,O){const v=this.callbackId++,M=new s.PromiseCapability;this.callbackCapabilities[v]=M;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:b,callbackId:v,data:S},O)}catch(R){M.reject(R)}return M.promise}sendWithStream(b,S,O,v){const M=this.streamId++,R=this.sourceName,g=this.targetName,f=this.comObj;return new ReadableStream({start:L=>{const N=new s.PromiseCapability;return this.streamControllers[M]={controller:L,startCall:N,pullCall:null,cancelCall:null,isClosed:!1},f.postMessage({sourceName:R,targetName:g,action:b,streamId:M,data:S,desiredSize:L.desiredSize},v),N.promise},pull:L=>{const N=new s.PromiseCapability;return this.streamControllers[M].pullCall=N,f.postMessage({sourceName:R,targetName:g,stream:i.PULL,streamId:M,desiredSize:L.desiredSize}),N.promise},cancel:L=>{(0,s.assert)(L instanceof Error,"cancel must have a valid reason");const N=new s.PromiseCapability;return this.streamControllers[M].cancelCall=N,this.streamControllers[M].isClosed=!0,f.postMessage({sourceName:R,targetName:g,stream:i.CANCEL,streamId:M,reason:a(L)}),N.promise}},O)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}o=new WeakSet,vn=function(b){const S=b.streamId,O=this.sourceName,v=b.sourceName,M=this.comObj,R=this,g=this.actionHandler[b.action],f={enqueue(L,N=1,E){if(this.isCancelled)return;const F=this.desiredSize;this.desiredSize-=N,F>0&&this.desiredSize<=0&&(this.sinkCapability=new s.PromiseCapability,this.ready=this.sinkCapability.promise),M.postMessage({sourceName:O,targetName:v,stream:i.ENQUEUE,streamId:S,chunk:L},E)},close(){this.isCancelled||(this.isCancelled=!0,M.postMessage({sourceName:O,targetName:v,stream:i.CLOSE,streamId:S}),delete R.streamSinks[S])},error(L){(0,s.assert)(L instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,M.postMessage({sourceName:O,targetName:v,stream:i.ERROR,streamId:S,reason:a(L)}))},sinkCapability:new s.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:b.desiredSize,ready:null};f.sinkCapability.resolve(),f.ready=f.sinkCapability.promise,this.streamSinks[S]=f,new Promise(function(L){L(g(b.data,f))}).then(function(){M.postMessage({sourceName:O,targetName:v,stream:i.START_COMPLETE,streamId:S,success:!0})},function(L){M.postMessage({sourceName:O,targetName:v,stream:i.START_COMPLETE,streamId:S,reason:a(L)})})},h=new WeakSet,Pn=function(b){const S=b.streamId,O=this.sourceName,v=b.sourceName,M=this.comObj,R=this.streamControllers[S],g=this.streamSinks[S];switch(b.stream){case i.START_COMPLETE:b.success?R.startCall.resolve():R.startCall.reject(a(b.reason));break;case i.PULL_COMPLETE:b.success?R.pullCall.resolve():R.pullCall.reject(a(b.reason));break;case i.PULL:if(!g){M.postMessage({sourceName:O,targetName:v,stream:i.PULL_COMPLETE,streamId:S,success:!0});break}g.desiredSize<=0&&b.desiredSize>0&&g.sinkCapability.resolve(),g.desiredSize=b.desiredSize,new Promise(function(f){var L;f((L=g.onPull)==null?void 0:L.call(g))}).then(function(){M.postMessage({sourceName:O,targetName:v,stream:i.PULL_COMPLETE,streamId:S,success:!0})},function(f){M.postMessage({sourceName:O,targetName:v,stream:i.PULL_COMPLETE,streamId:S,reason:a(f)})});break;case i.ENQUEUE:if((0,s.assert)(R,"enqueue should have stream controller"),R.isClosed)break;R.controller.enqueue(b.chunk);break;case i.CLOSE:if((0,s.assert)(R,"close should have stream controller"),R.isClosed)break;R.isClosed=!0,R.controller.close(),K(this,y,Re).call(this,R,S);break;case i.ERROR:(0,s.assert)(R,"error should have stream controller"),R.controller.error(a(b.reason)),K(this,y,Re).call(this,R,S);break;case i.CANCEL_COMPLETE:b.success?R.cancelCall.resolve():R.cancelCall.reject(a(b.reason)),K(this,y,Re).call(this,R,S);break;case i.CANCEL:if(!g)break;new Promise(function(f){var L;f((L=g.onCancel)==null?void 0:L.call(g,a(b.reason)))}).then(function(){M.postMessage({sourceName:O,targetName:v,stream:i.CANCEL_COMPLETE,streamId:S,success:!0})},function(f){M.postMessage({sourceName:O,targetName:v,stream:i.CANCEL_COMPLETE,streamId:S,reason:a(f)})}),g.sinkCapability.reject(a(b.reason)),g.isCancelled=!0,delete this.streamSinks[S];break;default:throw new Error("Unexpected stream case")}},y=new WeakSet,Re=async function(b,S){var O,v,M;await Promise.allSettled([(O=b.startCall)==null?void 0:O.promise,(v=b.pullCall)==null?void 0:v.promise,(M=b.cancelCall)==null?void 0:M.promise]),delete this.streamControllers[S]},e.MessageHandler=c},(t,e,n)=>{var i,a;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var s=n(1);class r{constructor({parsedData:o,rawData:m}){j(this,i,void 0);j(this,a,void 0);it(this,i,o),it(this,a,m)}getRaw(){return l(this,a)}get(o){return l(this,i).get(o)??null}getAll(){return(0,s.objectFromMap)(l(this,i))}has(o){return l(this,i).has(o)}}i=new WeakMap,a=new WeakMap,e.Metadata=r},(t,e,n)=>{var o,m,h,A,y,C,en;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var s=n(1),r=n(8);const i=Symbol("INTERNAL");class a{constructor(S,O){j(this,o,!0);this.name=S,this.intent=O}get visible(){return l(this,o)}_setVisible(S,O){S!==i&&(0,s.unreachable)("Internal method `_setVisible` called."),it(this,o,O)}}o=new WeakMap;class c{constructor(S){j(this,C);j(this,m,null);j(this,h,new Map);j(this,A,null);j(this,y,null);if(this.name=null,this.creator=null,S!==null){this.name=S.name,this.creator=S.creator,it(this,y,S.order);for(const O of S.groups)l(this,h).set(O.id,new a(O.name,O.intent));if(S.baseState==="OFF")for(const O of l(this,h).values())O._setVisible(i,!1);for(const O of S.on)l(this,h).get(O)._setVisible(i,!0);for(const O of S.off)l(this,h).get(O)._setVisible(i,!1);it(this,A,this.getHash())}}isVisible(S){if(l(this,h).size===0)return!0;if(!S)return(0,s.warn)("Optional content group not defined."),!0;if(S.type==="OCG")return l(this,h).has(S.id)?l(this,h).get(S.id).visible:((0,s.warn)(`Optional content group not found: ${S.id}`),!0);if(S.type==="OCMD"){if(S.expression)return K(this,C,en).call(this,S.expression);if(!S.policy||S.policy==="AnyOn"){for(const O of S.ids){if(!l(this,h).has(O))return(0,s.warn)(`Optional content group not found: ${O}`),!0;if(l(this,h).get(O).visible)return!0}return!1}else if(S.policy==="AllOn"){for(const O of S.ids){if(!l(this,h).has(O))return(0,s.warn)(`Optional content group not found: ${O}`),!0;if(!l(this,h).get(O).visible)return!1}return!0}else if(S.policy==="AnyOff"){for(const O of S.ids){if(!l(this,h).has(O))return(0,s.warn)(`Optional content group not found: ${O}`),!0;if(!l(this,h).get(O).visible)return!0}return!1}else if(S.policy==="AllOff"){for(const O of S.ids){if(!l(this,h).has(O))return(0,s.warn)(`Optional content group not found: ${O}`),!0;if(l(this,h).get(O).visible)return!1}return!0}return(0,s.warn)(`Unknown optional content policy ${S.policy}.`),!0}return(0,s.warn)(`Unknown group type ${S.type}.`),!0}setVisibility(S,O=!0){if(!l(this,h).has(S)){(0,s.warn)(`Optional content group not found: ${S}`);return}l(this,h).get(S)._setVisible(i,!!O),it(this,m,null)}get hasInitialVisibility(){return l(this,A)===null||this.getHash()===l(this,A)}getOrder(){return l(this,h).size?l(this,y)?l(this,y).slice():[...l(this,h).keys()]:null}getGroups(){return l(this,h).size>0?(0,s.objectFromMap)(l(this,h)):null}getGroup(S){return l(this,h).get(S)||null}getHash(){if(l(this,m)!==null)return l(this,m);const S=new r.MurmurHash3_64;for(const[O,v]of l(this,h))S.update(`${O}:${v.visible}`);return it(this,m,S.hexdigest())}}m=new WeakMap,h=new WeakMap,A=new WeakMap,y=new WeakMap,C=new WeakSet,en=function(S){const O=S.length;if(O<2)return!0;const v=S[0];for(let M=1;M<O;M++){const R=S[M];let g;if(Array.isArray(R))g=K(this,C,en).call(this,R);else if(l(this,h).has(R))g=l(this,h).get(R).visible;else return(0,s.warn)(`Optional content group not found: ${R}`),!0;switch(v){case"And":if(!g)return!1;break;case"Or":if(g)return!0;break;case"Not":return!g;default:return!0}}return v==="And"},e.OptionalContentConfig=c},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var s=n(1),r=n(6);class i{constructor({length:m,initialData:h,progressiveDone:A=!1,contentDispositionFilename:y=null,disableRange:C=!1,disableStream:D=!1},b){if((0,s.assert)(b,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=A,this._contentDispositionFilename=y,(h==null?void 0:h.length)>0){const S=h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength?h.buffer:new Uint8Array(h).buffer;this._queuedChunks.push(S)}this._pdfDataRangeTransport=b,this._isStreamingSupported=!D,this._isRangeSupported=!C,this._contentLength=m,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((S,O)=>{this._onReceiveData({begin:S,chunk:O})}),this._pdfDataRangeTransport.addProgressListener((S,O)=>{this._onProgress({loaded:S,total:O})}),this._pdfDataRangeTransport.addProgressiveReadListener(S=>{this._onReceiveData({chunk:S})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:m,chunk:h}){const A=h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength?h.buffer:new Uint8Array(h).buffer;if(m===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(A):this._queuedChunks.push(A);else{const y=this._rangeReaders.some(function(C){return C._begin!==m?!1:(C._enqueue(A),!0)});(0,s.assert)(y,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var m;return((m=this._fullRequestReader)==null?void 0:m._loaded)??0}_onProgress(m){var h,A,y,C;m.total===void 0?(A=(h=this._rangeReaders[0])==null?void 0:h.onProgress)==null||A.call(h,{loaded:m.loaded}):(C=(y=this._fullRequestReader)==null?void 0:y.onProgress)==null||C.call(y,{loaded:m.loaded,total:m.total})}_onProgressiveDone(){var m;(m=this._fullRequestReader)==null||m.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(m){const h=this._rangeReaders.indexOf(m);h>=0&&this._rangeReaders.splice(h,1)}getFullReader(){(0,s.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const m=this._queuedChunks;return this._queuedChunks=null,new a(this,m,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(m,h){if(h<=this._progressiveDataLength)return null;const A=new c(this,m,h);return this._pdfDataRangeTransport.requestDataRange(m,h),this._rangeReaders.push(A),A}cancelAllRequests(m){var h;(h=this._fullRequestReader)==null||h.cancel(m);for(const A of this._rangeReaders.slice(0))A.cancel(m);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=i;class a{constructor(m,h,A=!1,y=null){this._stream=m,this._done=A||!1,this._filename=(0,r.isPdfFile)(y)?y:null,this._queuedChunks=h||[],this._loaded=0;for(const C of this._queuedChunks)this._loaded+=C.byteLength;this._requests=[],this._headersReady=Promise.resolve(),m._fullRequestReader=this,this.onProgress=null}_enqueue(m){this._done||(this._requests.length>0?this._requests.shift().resolve({value:m,done:!1}):this._queuedChunks.push(m),this._loaded+=m.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const m=new s.PromiseCapability;return this._requests.push(m),m.promise}cancel(m){this._done=!0;for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class c{constructor(m,h,A){this._stream=m,this._begin=h,this._end=A,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(m){if(!this._done){if(this._requests.length===0)this._queuedChunk=m;else{this._requests.shift().resolve({value:m,done:!1});for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const h=this._queuedChunk;return this._queuedChunk=null,{value:h,done:!1}}if(this._done)return{value:void 0,done:!0};const m=new s.PromiseCapability;return this._requests.push(m),m.promise}cancel(m){this._done=!0;for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var s=n(1),r=n(20);function i(A,y,C){return{method:"GET",headers:A,signal:C.signal,mode:"cors",credentials:y?"include":"same-origin",redirect:"follow"}}function a(A){const y=new Headers;for(const C in A){const D=A[C];D!==void 0&&y.append(C,D)}return y}function c(A){return A instanceof Uint8Array?A.buffer:A instanceof ArrayBuffer?A:((0,s.warn)(`getArrayBuffer - unexpected data format: ${A}`),new Uint8Array(A).buffer)}class o{constructor(y){this.source=y,this.isHttp=/^https?:/i.test(y.url),this.httpHeaders=this.isHttp&&y.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var y;return((y=this._fullRequestReader)==null?void 0:y._loaded)??0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new m(this),this._fullRequestReader}getRangeReader(y,C){if(C<=this._progressiveDataLength)return null;const D=new h(this,y,C);return this._rangeRequestReaders.push(D),D}cancelAllRequests(y){var C;(C=this._fullRequestReader)==null||C.cancel(y);for(const D of this._rangeRequestReaders.slice(0))D.cancel(y)}}e.PDFFetchStream=o;class m{constructor(y){this._stream=y,this._reader=null,this._loaded=0,this._filename=null;const C=y.source;this._withCredentials=C.withCredentials||!1,this._contentLength=C.length,this._headersCapability=new s.PromiseCapability,this._disableRange=C.disableRange||!1,this._rangeChunkSize=C.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!C.disableStream,this._isRangeSupported=!C.disableRange,this._headers=a(this._stream.httpHeaders);const D=C.url;fetch(D,i(this._headers,this._withCredentials,this._abortController)).then(b=>{if(!(0,r.validateResponseStatus)(b.status))throw(0,r.createResponseStatusError)(b.status,D);this._reader=b.body.getReader(),this._headersCapability.resolve();const S=M=>b.headers.get(M),{allowRangeRequests:O,suggestedLength:v}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:S,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=O,this._contentLength=v||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(S),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new s.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var D;await this._headersCapability.promise;const{value:y,done:C}=await this._reader.read();return C?{value:y,done:C}:(this._loaded+=y.byteLength,(D=this.onProgress)==null||D.call(this,{loaded:this._loaded,total:this._contentLength}),{value:c(y),done:!1})}cancel(y){var C;(C=this._reader)==null||C.cancel(y),this._abortController.abort()}}class h{constructor(y,C,D){this._stream=y,this._reader=null,this._loaded=0;const b=y.source;this._withCredentials=b.withCredentials||!1,this._readCapability=new s.PromiseCapability,this._isStreamingSupported=!b.disableStream,this._abortController=new AbortController,this._headers=a(this._stream.httpHeaders),this._headers.append("Range",`bytes=${C}-${D-1}`);const S=b.url;fetch(S,i(this._headers,this._withCredentials,this._abortController)).then(O=>{if(!(0,r.validateResponseStatus)(O.status))throw(0,r.createResponseStatusError)(O.status,S);this._readCapability.resolve(),this._reader=O.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var D;await this._readCapability.promise;const{value:y,done:C}=await this._reader.read();return C?{value:y,done:C}:(this._loaded+=y.byteLength,(D=this.onProgress)==null||D.call(this,{loaded:this._loaded}),{value:c(y),done:!1})}cancel(y){var C;(C=this._reader)==null||C.cancel(y),this._abortController.abort()}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=o,e.extractFilenameFromHeader=c,e.validateRangeRequestCapabilities=a,e.validateResponseStatus=m;var s=n(1),r=n(21),i=n(6);function a({getResponseHeader:h,isHttp:A,rangeChunkSize:y,disableRange:C}){const D={allowRangeRequests:!1,suggestedLength:void 0},b=parseInt(h("Content-Length"),10);return!Number.isInteger(b)||(D.suggestedLength=b,b<=2*y)||C||!A||h("Accept-Ranges")!=="bytes"||(h("Content-Encoding")||"identity")!=="identity"||(D.allowRangeRequests=!0),D}function c(h){const A=h("Content-Disposition");if(A){let y=(0,r.getFilenameFromContentDispositionHeader)(A);if(y.includes("%"))try{y=decodeURIComponent(y)}catch{}if((0,i.isPdfFile)(y))return y}return null}function o(h,A){return h===404||h===0&&A.startsWith("file:")?new s.MissingPDFException('Missing PDF "'+A+'".'):new s.UnexpectedResponseException(`Unexpected server response (${h}) while retrieving PDF "${A}".`,h)}function m(h){return h===200||h===206}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=r;var s=n(1);function r(i){let a=!0,c=o("filename\\*","i").exec(i);if(c){c=c[1];let b=y(c);return b=unescape(b),b=C(b),b=D(b),h(b)}if(c=A(i),c){const b=D(c);return h(b)}if(c=o("filename","i").exec(i),c){c=c[1];let b=y(c);return b=D(b),h(b)}function o(b,S){return new RegExp("(?:^|;)\\s*"+b+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',S)}function m(b,S){if(b){if(!/^[\x00-\xFF]+$/.test(S))return S;try{const O=new TextDecoder(b,{fatal:!0}),v=(0,s.stringToBytes)(S);S=O.decode(v),a=!1}catch{}}return S}function h(b){return a&&/[\x80-\xff]/.test(b)&&(b=m("utf-8",b),a&&(b=m("iso-8859-1",b))),b}function A(b){const S=[];let O;const v=o("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(O=v.exec(b))!==null;){let[,R,g,f]=O;if(R=parseInt(R,10),R in S){if(R===0)break;continue}S[R]=[g,f]}const M=[];for(let R=0;R<S.length&&R in S;++R){let[g,f]=S[R];f=y(f),g&&(f=unescape(f),R===0&&(f=C(f))),M.push(f)}return M.join("")}function y(b){if(b.startsWith('"')){const S=b.slice(1).split('\\"');for(let O=0;O<S.length;++O){const v=S[O].indexOf('"');v!==-1&&(S[O]=S[O].slice(0,v),S.length=O+1),S[O]=S[O].replaceAll(/\\(.)/g,"$1")}b=S.join('"')}return b}function C(b){const S=b.indexOf("'");if(S===-1)return b;const O=b.slice(0,S),v=b.slice(S+1).replace(/^[^']*'/,"");return m(O,v)}function D(b){return!b.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(b)?b:b.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(S,O,v,M){if(v==="q"||v==="Q")return M=M.replaceAll("_"," "),M=M.replaceAll(/=([0-9a-fA-F]{2})/g,function(R,g){return String.fromCharCode(parseInt(g,16))}),m(O,M);try{M=atob(M)}catch{}return m(O,M)})}return""}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var s=n(1),r=n(20);const i=200,a=206;function c(y){const C=y.response;return typeof C!="string"?C:(0,s.stringToBytes)(C).buffer}class o{constructor(C,D={}){this.url=C,this.isHttp=/^https?:/i.test(C),this.httpHeaders=this.isHttp&&D.httpHeaders||Object.create(null),this.withCredentials=D.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(C,D,b){const S={begin:C,end:D};for(const O in b)S[O]=b[O];return this.request(S)}requestFull(C){return this.request(C)}request(C){const D=new XMLHttpRequest,b=this.currXhrId++,S=this.pendingRequests[b]={xhr:D};D.open("GET",this.url),D.withCredentials=this.withCredentials;for(const O in this.httpHeaders){const v=this.httpHeaders[O];v!==void 0&&D.setRequestHeader(O,v)}return this.isHttp&&"begin"in C&&"end"in C?(D.setRequestHeader("Range",`bytes=${C.begin}-${C.end-1}`),S.expectedStatus=a):S.expectedStatus=i,D.responseType="arraybuffer",C.onError&&(D.onerror=function(O){C.onError(D.status)}),D.onreadystatechange=this.onStateChange.bind(this,b),D.onprogress=this.onProgress.bind(this,b),S.onHeadersReceived=C.onHeadersReceived,S.onDone=C.onDone,S.onError=C.onError,S.onProgress=C.onProgress,D.send(null),b}onProgress(C,D){var S;const b=this.pendingRequests[C];b&&((S=b.onProgress)==null||S.call(b,D))}onStateChange(C,D){var M,R,g;const b=this.pendingRequests[C];if(!b)return;const S=b.xhr;if(S.readyState>=2&&b.onHeadersReceived&&(b.onHeadersReceived(),delete b.onHeadersReceived),S.readyState!==4||!(C in this.pendingRequests))return;if(delete this.pendingRequests[C],S.status===0&&this.isHttp){(M=b.onError)==null||M.call(b,S.status);return}const O=S.status||i;if(!(O===i&&b.expectedStatus===a)&&O!==b.expectedStatus){(R=b.onError)==null||R.call(b,S.status);return}const v=c(S);if(O===a){const f=S.getResponseHeader("Content-Range"),L=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);b.onDone({begin:parseInt(L[1],10),chunk:v})}else v?b.onDone({begin:0,chunk:v}):(g=b.onError)==null||g.call(b,S.status)}getRequestXhr(C){return this.pendingRequests[C].xhr}isPendingRequest(C){return C in this.pendingRequests}abortRequest(C){const D=this.pendingRequests[C].xhr;delete this.pendingRequests[C],D.abort()}}class m{constructor(C){this._source=C,this._manager=new o(C.url,{httpHeaders:C.httpHeaders,withCredentials:C.withCredentials}),this._rangeChunkSize=C.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(C){const D=this._rangeRequestReaders.indexOf(C);D>=0&&this._rangeRequestReaders.splice(D,1)}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new h(this._manager,this._source),this._fullRequestReader}getRangeReader(C,D){const b=new A(this._manager,C,D);return b.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(b),b}cancelAllRequests(C){var D;(D=this._fullRequestReader)==null||D.cancel(C);for(const b of this._rangeRequestReaders.slice(0))b.cancel(C)}}e.PDFNetworkStream=m;class h{constructor(C,D){this._manager=C;const b={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=D.url,this._fullRequestId=C.requestFull(b),this._headersReceivedCapability=new s.PromiseCapability,this._disableRange=D.disableRange||!1,this._contentLength=D.length,this._rangeChunkSize=D.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const C=this._fullRequestId,D=this._manager.getRequestXhr(C),b=v=>D.getResponseHeader(v),{allowRangeRequests:S,suggestedLength:O}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:b,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});S&&(this._isRangeSupported=!0),this._contentLength=O||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(b),this._isRangeSupported&&this._manager.abortRequest(C),this._headersReceivedCapability.resolve()}_onDone(C){if(C&&(this._requests.length>0?this._requests.shift().resolve({value:C.chunk,done:!1}):this._cachedChunks.push(C.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const D of this._requests)D.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(C){this._storedError=(0,r.createResponseStatusError)(C,this._url),this._headersReceivedCapability.reject(this._storedError);for(const D of this._requests)D.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(C){var D;(D=this.onProgress)==null||D.call(this,{loaded:C.loaded,total:C.lengthComputable?C.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const C=new s.PromiseCapability;return this._requests.push(C),C.promise}cancel(C){this._done=!0,this._headersReceivedCapability.reject(C);for(const D of this._requests)D.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class A{constructor(C,D,b){this._manager=C;const S={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=C.url,this._requestId=C.requestRange(D,b,S),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var C;(C=this.onClosed)==null||C.call(this,this)}_onDone(C){const D=C.chunk;this._requests.length>0?this._requests.shift().resolve({value:D,done:!1}):this._queuedChunk=D,this._done=!0;for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(C){this._storedError=(0,r.createResponseStatusError)(C,this._url);for(const D of this._requests)D.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(C){var D;this.isStreamingSupported||((D=this.onProgress)==null||D.call(this,{loaded:C.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const D=this._queuedChunk;return this._queuedChunk=null,{value:D,done:!1}}if(this._done)return{value:void 0,done:!0};const C=new s.PromiseCapability;return this._requests.push(C),C.promise}cancel(C){this._done=!0;for(const D of this._requests)D.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var s=n(1),r=n(20);const i=/^file:\/\/\/[a-zA-Z]:\//;function a(b){const S=require$$0,O=S.parse(b);return O.protocol==="file:"||O.host?O:/^[a-z]:[/\\]/i.test(b)?S.parse(`file:///${b}`):(O.host||(O.protocol="file:"),O)}class c{constructor(S){this.source=S,this.url=a(S.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&S.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var S;return((S=this._fullRequestReader)==null?void 0:S._loaded)??0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new C(this):new A(this),this._fullRequestReader}getRangeReader(S,O){if(O<=this._progressiveDataLength)return null;const v=this.isFsUrl?new D(this,S,O):new y(this,S,O);return this._rangeRequestReaders.push(v),v}cancelAllRequests(S){var O;(O=this._fullRequestReader)==null||O.cancel(S);for(const v of this._rangeRequestReaders.slice(0))v.cancel(S)}}e.PDFNodeStream=c;class o{constructor(S){this._url=S.url,this._done=!1,this._storedError=null,this.onProgress=null;const O=S.source;this._contentLength=O.length,this._loaded=0,this._filename=null,this._disableRange=O.disableRange||!1,this._rangeChunkSize=O.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!O.disableStream,this._isRangeSupported=!O.disableRange,this._readableStream=null,this._readCapability=new s.PromiseCapability,this._headersCapability=new s.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var O;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const S=this._readableStream.read();return S===null?(this._readCapability=new s.PromiseCapability,this.read()):(this._loaded+=S.length,(O=this.onProgress)==null||O.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(S).buffer,done:!1})}cancel(S){if(!this._readableStream){this._error(S);return}this._readableStream.destroy(S)}_error(S){this._storedError=S,this._readCapability.resolve()}_setReadableStream(S){this._readableStream=S,S.on("readable",()=>{this._readCapability.resolve()}),S.on("end",()=>{S.destroy(),this._done=!0,this._readCapability.resolve()}),S.on("error",O=>{this._error(O)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new s.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class m{constructor(S){this._url=S.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new s.PromiseCapability;const O=S.source;this._isStreamingSupported=!O.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var O;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const S=this._readableStream.read();return S===null?(this._readCapability=new s.PromiseCapability,this.read()):(this._loaded+=S.length,(O=this.onProgress)==null||O.call(this,{loaded:this._loaded}),{value:new Uint8Array(S).buffer,done:!1})}cancel(S){if(!this._readableStream){this._error(S);return}this._readableStream.destroy(S)}_error(S){this._storedError=S,this._readCapability.resolve()}_setReadableStream(S){this._readableStream=S,S.on("readable",()=>{this._readCapability.resolve()}),S.on("end",()=>{S.destroy(),this._done=!0,this._readCapability.resolve()}),S.on("error",O=>{this._error(O)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function h(b,S){return{protocol:b.protocol,auth:b.auth,host:b.hostname,port:b.port,path:b.path,method:"GET",headers:S}}class A extends o{constructor(S){super(S);const O=v=>{if(v.statusCode===404){const f=new s.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=f,this._headersCapability.reject(f);return}this._headersCapability.resolve(),this._setReadableStream(v);const M=f=>this._readableStream.headers[f.toLowerCase()],{allowRangeRequests:R,suggestedLength:g}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:M,isHttp:S.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=R,this._contentLength=g||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(M)};if(this._request=null,this._url.protocol==="http:"){const v=require$$0;this._request=v.request(h(this._url,S.httpHeaders),O)}else{const v=require$$0;this._request=v.request(h(this._url,S.httpHeaders),O)}this._request.on("error",v=>{this._storedError=v,this._headersCapability.reject(v)}),this._request.end()}}class y extends m{constructor(S,O,v){super(S),this._httpHeaders={};for(const R in S.httpHeaders){const g=S.httpHeaders[R];g!==void 0&&(this._httpHeaders[R]=g)}this._httpHeaders.Range=`bytes=${O}-${v-1}`;const M=R=>{if(R.statusCode===404){const g=new s.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=g;return}this._setReadableStream(R)};if(this._request=null,this._url.protocol==="http:"){const R=require$$0;this._request=R.request(h(this._url,this._httpHeaders),M)}else{const R=require$$0;this._request=R.request(h(this._url,this._httpHeaders),M)}this._request.on("error",R=>{this._storedError=R}),this._request.end()}}class C extends o{constructor(S){super(S);let O=decodeURIComponent(this._url.path);i.test(this._url.href)&&(O=O.replace(/^\//,""));const v=require$$0;v.lstat(O,(M,R)=>{if(M){M.code==="ENOENT"&&(M=new s.MissingPDFException(`Missing PDF "${O}".`)),this._storedError=M,this._headersCapability.reject(M);return}this._contentLength=R.size,this._setReadableStream(v.createReadStream(O)),this._headersCapability.resolve()})}}class D extends m{constructor(S,O,v){super(S);let M=decodeURIComponent(this._url.path);i.test(this._url.href)&&(M=M.replace(/^\//,""));const R=require$$0;this._setReadableStream(R.createReadStream(M,{start:O,end:v-1}))}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var s=n(6),r=n(1);const i={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},a="http://www.w3.org/XML/1998/namespace",c="http://www.w3.org/1999/xlink",o=["butt","round","square"],m=["miter","round","bevel"],h=function(R,g="",f=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!f)return URL.createObjectURL(new Blob([R],{type:g}));const L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let N=`data:${g};base64,`;for(let E=0,F=R.length;E<F;E+=3){const P=R[E]&255,W=R[E+1]&255,z=R[E+2]&255,w=P>>2,Y=(P&3)<<4|W>>4,ot=E+1<F?(W&15)<<2|z>>6:64,et=E+2<F?z&63:64;N+=L[w]+L[Y]+L[ot]+L[et]}return N},A=function(){const R=new Uint8Array([137,80,78,71,13,10,26,10]),g=12,f=new Int32Array(256);for(let z=0;z<256;z++){let w=z;for(let Y=0;Y<8;Y++)w=w&1?3988292384^w>>1&2147483647:w>>1&2147483647;f[z]=w}function L(z,w,Y){let ot=-1;for(let et=w;et<Y;et++){const q=(ot^z[et])&255,ht=f[q];ot=ot>>>8^ht}return ot^-1}function N(z,w,Y,ot){let et=ot;const q=w.length;Y[et]=q>>24&255,Y[et+1]=q>>16&255,Y[et+2]=q>>8&255,Y[et+3]=q&255,et+=4,Y[et]=z.charCodeAt(0)&255,Y[et+1]=z.charCodeAt(1)&255,Y[et+2]=z.charCodeAt(2)&255,Y[et+3]=z.charCodeAt(3)&255,et+=4,Y.set(w,et),et+=w.length;const ht=L(Y,ot+4,et);Y[et]=ht>>24&255,Y[et+1]=ht>>16&255,Y[et+2]=ht>>8&255,Y[et+3]=ht&255}function E(z,w,Y){let ot=1,et=0;for(let q=w;q<Y;++q)ot=(ot+(z[q]&255))%65521,et=(et+ot)%65521;return et<<16|ot}function F(z){if(!r.isNodeJS)return P(z);try{const w=parseInt(process.versions.node)>=8?z:Buffer.from(z),Y=require$$0.deflateSync(w,{level:9});return Y instanceof Uint8Array?Y:new Uint8Array(Y)}catch(w){(0,r.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+w)}return P(z)}function P(z){let w=z.length;const Y=65535,ot=Math.ceil(w/Y),et=new Uint8Array(2+w+ot*5+4);let q=0;et[q++]=120,et[q++]=156;let ht=0;for(;w>Y;)et[q++]=0,et[q++]=255,et[q++]=255,et[q++]=0,et[q++]=0,et.set(z.subarray(ht,ht+Y),q),q+=Y,ht+=Y,w-=Y;et[q++]=1,et[q++]=w&255,et[q++]=w>>8&255,et[q++]=~w&65535&255,et[q++]=(~w&65535)>>8&255,et.set(z.subarray(ht),q),q+=z.length-ht;const dt=E(z,0,z.length);return et[q++]=dt>>24&255,et[q++]=dt>>16&255,et[q++]=dt>>8&255,et[q++]=dt&255,et}function W(z,w,Y,ot){const et=z.width,q=z.height;let ht,dt,Et;const gt=z.data;switch(w){case r.ImageKind.GRAYSCALE_1BPP:dt=0,ht=1,Et=et+7>>3;break;case r.ImageKind.RGB_24BPP:dt=2,ht=8,Et=et*3;break;case r.ImageKind.RGBA_32BPP:dt=6,ht=8,Et=et*4;break;default:throw new Error("invalid format")}const G=new Uint8Array((1+Et)*q);let u=0,T=0;for(let X=0;X<q;++X)G[u++]=0,G.set(gt.subarray(T,T+Et),u),T+=Et,u+=Et;if(w===r.ImageKind.GRAYSCALE_1BPP&&ot){u=0;for(let X=0;X<q;X++){u++;for(let nt=0;nt<Et;nt++)G[u++]^=255}}const p=new Uint8Array([et>>24&255,et>>16&255,et>>8&255,et&255,q>>24&255,q>>16&255,q>>8&255,q&255,ht,dt,0,0,0]),_=F(G),I=R.length+g*3+p.length+_.length,k=new Uint8Array(I);let B=0;return k.set(R,B),B+=R.length,N("IHDR",p,k,B),B+=g+p.length,N("IDATA",_,k,B),B+=g+_.length,N("IEND",new Uint8Array(0),k,B),h(k,"image/png",Y)}return function(z,w,Y){const ot=z.kind===void 0?r.ImageKind.GRAYSCALE_1BPP:z.kind;return W(z,ot,w,Y)}}();class y{constructor(){this.fontSizeScale=1,this.fontWeight=i.fontWeight,this.fontSize=0,this.textMatrix=r.IDENTITY_MATRIX,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=r.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=i.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(g,f){this.x=g,this.y=f}}function C(R){let g=[];const f=[];for(const L of R){if(L.fn==="save"){g.push({fnId:92,fn:"group",items:[]}),f.push(g),g=g.at(-1).items;continue}L.fn==="restore"?g=f.pop():g.push(L)}return g}function D(R){if(Number.isInteger(R))return R.toString();const g=R.toFixed(10);let f=g.length-1;if(g[f]!=="0")return g;do f--;while(g[f]==="0");return g.substring(0,g[f]==="."?f:f+1)}function b(R){if(R[4]===0&&R[5]===0){if(R[1]===0&&R[2]===0)return R[0]===1&&R[3]===1?"":`scale(${D(R[0])} ${D(R[3])})`;if(R[0]===R[3]&&R[1]===-R[2]){const g=Math.acos(R[0])*180/Math.PI;return`rotate(${D(g)})`}}else if(R[0]===1&&R[1]===0&&R[2]===0&&R[3]===1)return`translate(${D(R[4])} ${D(R[5])})`;return`matrix(${D(R[0])} ${D(R[1])} ${D(R[2])} ${D(R[3])} ${D(R[4])} ${D(R[5])})`}let S=0,O=0,v=0;class M{constructor(g,f,L=!1){(0,s.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new s.DOMSVGFactory,this.current=new y,this.transformMatrix=r.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=g,this.objs=f,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!L,this._operatorIdMapping=[];for(const N in r.OPS)this._operatorIdMapping[r.OPS[N]]=N}getObject(g,f=null){return typeof g=="string"?g.startsWith("g_")?this.commonObjs.get(g):this.objs.get(g):f}save(){this.transformStack.push(this.transformMatrix);const g=this.current;this.extraStack.push(g),this.current=g.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(g){this.save(),this.executeOpTree(g),this.restore()}loadDependencies(g){const f=g.fnArray,L=g.argsArray;for(let N=0,E=f.length;N<E;N++)if(f[N]===r.OPS.dependency)for(const F of L[N]){const P=F.startsWith("g_")?this.commonObjs:this.objs,W=new Promise(z=>{P.get(F,z)});this.current.dependencies.push(W)}return Promise.all(this.current.dependencies)}transform(g,f,L,N,E,F){const P=[g,f,L,N,E,F];this.transformMatrix=r.Util.transform(this.transformMatrix,P),this.tgrp=null}getSVG(g,f){this.viewport=f;const L=this._initialize(f);return this.loadDependencies(g).then(()=>(this.transformMatrix=r.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(g)),L))}convertOpList(g){const f=this._operatorIdMapping,L=g.argsArray,N=g.fnArray,E=[];for(let F=0,P=N.length;F<P;F++){const W=N[F];E.push({fnId:W,fn:f[W],args:L[F]})}return C(E)}executeOpTree(g){for(const f of g){const L=f.fn,N=f.fnId,E=f.args;switch(N|0){case r.OPS.beginText:this.beginText();break;case r.OPS.dependency:break;case r.OPS.setLeading:this.setLeading(E);break;case r.OPS.setLeadingMoveText:this.setLeadingMoveText(E[0],E[1]);break;case r.OPS.setFont:this.setFont(E);break;case r.OPS.showText:this.showText(E[0]);break;case r.OPS.showSpacedText:this.showText(E[0]);break;case r.OPS.endText:this.endText();break;case r.OPS.moveText:this.moveText(E[0],E[1]);break;case r.OPS.setCharSpacing:this.setCharSpacing(E[0]);break;case r.OPS.setWordSpacing:this.setWordSpacing(E[0]);break;case r.OPS.setHScale:this.setHScale(E[0]);break;case r.OPS.setTextMatrix:this.setTextMatrix(E[0],E[1],E[2],E[3],E[4],E[5]);break;case r.OPS.setTextRise:this.setTextRise(E[0]);break;case r.OPS.setTextRenderingMode:this.setTextRenderingMode(E[0]);break;case r.OPS.setLineWidth:this.setLineWidth(E[0]);break;case r.OPS.setLineJoin:this.setLineJoin(E[0]);break;case r.OPS.setLineCap:this.setLineCap(E[0]);break;case r.OPS.setMiterLimit:this.setMiterLimit(E[0]);break;case r.OPS.setFillRGBColor:this.setFillRGBColor(E[0],E[1],E[2]);break;case r.OPS.setStrokeRGBColor:this.setStrokeRGBColor(E[0],E[1],E[2]);break;case r.OPS.setStrokeColorN:this.setStrokeColorN(E);break;case r.OPS.setFillColorN:this.setFillColorN(E);break;case r.OPS.shadingFill:this.shadingFill(E[0]);break;case r.OPS.setDash:this.setDash(E[0],E[1]);break;case r.OPS.setRenderingIntent:this.setRenderingIntent(E[0]);break;case r.OPS.setFlatness:this.setFlatness(E[0]);break;case r.OPS.setGState:this.setGState(E[0]);break;case r.OPS.fill:this.fill();break;case r.OPS.eoFill:this.eoFill();break;case r.OPS.stroke:this.stroke();break;case r.OPS.fillStroke:this.fillStroke();break;case r.OPS.eoFillStroke:this.eoFillStroke();break;case r.OPS.clip:this.clip("nonzero");break;case r.OPS.eoClip:this.clip("evenodd");break;case r.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case r.OPS.paintImageXObject:this.paintImageXObject(E[0]);break;case r.OPS.paintInlineImageXObject:this.paintInlineImageXObject(E[0]);break;case r.OPS.paintImageMaskXObject:this.paintImageMaskXObject(E[0]);break;case r.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(E[0],E[1]);break;case r.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case r.OPS.closePath:this.closePath();break;case r.OPS.closeStroke:this.closeStroke();break;case r.OPS.closeFillStroke:this.closeFillStroke();break;case r.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case r.OPS.nextLine:this.nextLine();break;case r.OPS.transform:this.transform(E[0],E[1],E[2],E[3],E[4],E[5]);break;case r.OPS.constructPath:this.constructPath(E[0],E[1]);break;case r.OPS.endPath:this.endPath();break;case 92:this.group(f.items);break;default:(0,r.warn)(`Unimplemented operator ${L}`);break}}}setWordSpacing(g){this.current.wordSpacing=g}setCharSpacing(g){this.current.charSpacing=g}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(g,f,L,N,E,F){const P=this.current;P.textMatrix=P.lineMatrix=[g,f,L,N,E,F],P.textMatrixScale=Math.hypot(g,f),P.x=P.lineX=0,P.y=P.lineY=0,P.xcoords=[],P.ycoords=[],P.tspan=this.svgFactory.createElement("svg:tspan"),P.tspan.setAttributeNS(null,"font-family",P.fontFamily),P.tspan.setAttributeNS(null,"font-size",`${D(P.fontSize)}px`),P.tspan.setAttributeNS(null,"y",D(-P.y)),P.txtElement=this.svgFactory.createElement("svg:text"),P.txtElement.append(P.tspan)}beginText(){const g=this.current;g.x=g.lineX=0,g.y=g.lineY=0,g.textMatrix=r.IDENTITY_MATRIX,g.lineMatrix=r.IDENTITY_MATRIX,g.textMatrixScale=1,g.tspan=this.svgFactory.createElement("svg:tspan"),g.txtElement=this.svgFactory.createElement("svg:text"),g.txtgrp=this.svgFactory.createElement("svg:g"),g.xcoords=[],g.ycoords=[]}moveText(g,f){const L=this.current;L.x=L.lineX+=g,L.y=L.lineY+=f,L.xcoords=[],L.ycoords=[],L.tspan=this.svgFactory.createElement("svg:tspan"),L.tspan.setAttributeNS(null,"font-family",L.fontFamily),L.tspan.setAttributeNS(null,"font-size",`${D(L.fontSize)}px`),L.tspan.setAttributeNS(null,"y",D(-L.y))}showText(g){const f=this.current,L=f.font,N=f.fontSize;if(N===0)return;const E=f.fontSizeScale,F=f.charSpacing,P=f.wordSpacing,W=f.fontDirection,z=f.textHScale*W,w=L.vertical,Y=w?1:-1,ot=L.defaultVMetrics,et=N*f.fontMatrix[0];let q=0;for(const Et of g){if(Et===null){q+=W*P;continue}else if(typeof Et=="number"){q+=Y*Et*N/1e3;continue}const gt=(Et.isSpace?P:0)+F,G=Et.fontChar;let u,T,p=Et.width;if(w){let I;const k=Et.vmetric||ot;I=Et.vmetric?k[1]:p*.5,I=-I*et;const B=k[2]*et;p=k?-k[0]:p,u=I/E,T=(q+B)/E}else u=q/E,T=0;(Et.isInFont||L.missingFile)&&(f.xcoords.push(f.x+u),w&&f.ycoords.push(-f.y+T),f.tspan.textContent+=G);const _=w?p*et-gt*W:p*et+gt*W;q+=_}f.tspan.setAttributeNS(null,"x",f.xcoords.map(D).join(" ")),w?f.tspan.setAttributeNS(null,"y",f.ycoords.map(D).join(" ")):f.tspan.setAttributeNS(null,"y",D(-f.y)),w?f.y-=q:f.x+=q*z,f.tspan.setAttributeNS(null,"font-family",f.fontFamily),f.tspan.setAttributeNS(null,"font-size",`${D(f.fontSize)}px`),f.fontStyle!==i.fontStyle&&f.tspan.setAttributeNS(null,"font-style",f.fontStyle),f.fontWeight!==i.fontWeight&&f.tspan.setAttributeNS(null,"font-weight",f.fontWeight);const ht=f.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;if(ht===r.TextRenderingMode.FILL||ht===r.TextRenderingMode.FILL_STROKE?(f.fillColor!==i.fillColor&&f.tspan.setAttributeNS(null,"fill",f.fillColor),f.fillAlpha<1&&f.tspan.setAttributeNS(null,"fill-opacity",f.fillAlpha)):f.textRenderingMode===r.TextRenderingMode.ADD_TO_PATH?f.tspan.setAttributeNS(null,"fill","transparent"):f.tspan.setAttributeNS(null,"fill","none"),ht===r.TextRenderingMode.STROKE||ht===r.TextRenderingMode.FILL_STROKE){const Et=1/(f.textMatrixScale||1);this._setStrokeAttributes(f.tspan,Et)}let dt=f.textMatrix;f.textRise!==0&&(dt=dt.slice(),dt[5]+=f.textRise),f.txtElement.setAttributeNS(null,"transform",`${b(dt)} scale(${D(z)}, -1)`),f.txtElement.setAttributeNS(a,"xml:space","preserve"),f.txtElement.append(f.tspan),f.txtgrp.append(f.txtElement),this._ensureTransformGroup().append(f.txtElement)}setLeadingMoveText(g,f){this.setLeading(-f),this.moveText(g,f)}addFontStyle(g){if(!g.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const f=h(g.data,g.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${g.loadedName}"; src: url(${f}); }
`}setFont(g){const f=this.current,L=this.commonObjs.get(g[0]);let N=g[1];f.font=L,this.embedFonts&&!L.missingFile&&!this.embeddedFonts[L.loadedName]&&(this.addFontStyle(L),this.embeddedFonts[L.loadedName]=L),f.fontMatrix=L.fontMatrix||r.FONT_IDENTITY_MATRIX;let E="normal";L.black?E="900":L.bold&&(E="bold");const F=L.italic?"italic":"normal";N<0?(N=-N,f.fontDirection=-1):f.fontDirection=1,f.fontSize=N,f.fontFamily=L.loadedName,f.fontWeight=E,f.fontStyle=F,f.tspan=this.svgFactory.createElement("svg:tspan"),f.tspan.setAttributeNS(null,"y",D(-f.y)),f.xcoords=[],f.ycoords=[]}endText(){var f;const g=this.current;g.textRenderingMode&r.TextRenderingMode.ADD_TO_PATH_FLAG&&((f=g.txtElement)!=null&&f.hasChildNodes())&&(g.element=g.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(g){g>0&&(this.current.lineWidth=g)}setLineCap(g){this.current.lineCap=o[g]}setLineJoin(g){this.current.lineJoin=m[g]}setMiterLimit(g){this.current.miterLimit=g}setStrokeAlpha(g){this.current.strokeAlpha=g}setStrokeRGBColor(g,f,L){this.current.strokeColor=r.Util.makeHexColor(g,f,L)}setFillAlpha(g){this.current.fillAlpha=g}setFillRGBColor(g,f,L){this.current.fillColor=r.Util.makeHexColor(g,f,L),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(g){this.current.strokeColor=this._makeColorN_Pattern(g)}setFillColorN(g){this.current.fillColor=this._makeColorN_Pattern(g)}shadingFill(g){const{width:f,height:L}=this.viewport,N=r.Util.inverseTransform(this.transformMatrix),[E,F,P,W]=r.Util.getAxialAlignedBoundingBox([0,0,f,L],N),z=this.svgFactory.createElement("svg:rect");z.setAttributeNS(null,"x",E),z.setAttributeNS(null,"y",F),z.setAttributeNS(null,"width",P-E),z.setAttributeNS(null,"height",W-F),z.setAttributeNS(null,"fill",this._makeShadingPattern(g)),this.current.fillAlpha<1&&z.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(z)}_makeColorN_Pattern(g){return g[0]==="TilingPattern"?this._makeTilingPattern(g):this._makeShadingPattern(g)}_makeTilingPattern(g){const f=g[1],L=g[2],N=g[3]||r.IDENTITY_MATRIX,[E,F,P,W]=g[4],z=g[5],w=g[6],Y=g[7],ot=`shading${v++}`,[et,q,ht,dt]=r.Util.normalizeRect([...r.Util.applyTransform([E,F],N),...r.Util.applyTransform([P,W],N)]),[Et,gt]=r.Util.singularValueDecompose2dScale(N),G=z*Et,u=w*gt,T=this.svgFactory.createElement("svg:pattern");T.setAttributeNS(null,"id",ot),T.setAttributeNS(null,"patternUnits","userSpaceOnUse"),T.setAttributeNS(null,"width",G),T.setAttributeNS(null,"height",u),T.setAttributeNS(null,"x",`${et}`),T.setAttributeNS(null,"y",`${q}`);const p=this.svg,_=this.transformMatrix,I=this.current.fillColor,k=this.current.strokeColor,B=this.svgFactory.create(ht-et,dt-q);if(this.svg=B,this.transformMatrix=N,Y===2){const X=r.Util.makeHexColor(...f);this.current.fillColor=X,this.current.strokeColor=X}return this.executeOpTree(this.convertOpList(L)),this.svg=p,this.transformMatrix=_,this.current.fillColor=I,this.current.strokeColor=k,T.append(B.childNodes[0]),this.defs.append(T),`url(#${ot})`}_makeShadingPattern(g){switch(typeof g=="string"&&(g=this.objs.get(g)),g[0]){case"RadialAxial":const f=`shading${v++}`,L=g[3];let N;switch(g[1]){case"axial":const E=g[4],F=g[5];N=this.svgFactory.createElement("svg:linearGradient"),N.setAttributeNS(null,"id",f),N.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),N.setAttributeNS(null,"x1",E[0]),N.setAttributeNS(null,"y1",E[1]),N.setAttributeNS(null,"x2",F[0]),N.setAttributeNS(null,"y2",F[1]);break;case"radial":const P=g[4],W=g[5],z=g[6],w=g[7];N=this.svgFactory.createElement("svg:radialGradient"),N.setAttributeNS(null,"id",f),N.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),N.setAttributeNS(null,"cx",W[0]),N.setAttributeNS(null,"cy",W[1]),N.setAttributeNS(null,"r",w),N.setAttributeNS(null,"fx",P[0]),N.setAttributeNS(null,"fy",P[1]),N.setAttributeNS(null,"fr",z);break;default:throw new Error(`Unknown RadialAxial type: ${g[1]}`)}for(const E of L){const F=this.svgFactory.createElement("svg:stop");F.setAttributeNS(null,"offset",E[0]),F.setAttributeNS(null,"stop-color",E[1]),N.append(F)}return this.defs.append(N),`url(#${f})`;case"Mesh":return(0,r.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${g[0]}`)}}setDash(g,f){this.current.dashArray=g,this.current.dashPhase=f}constructPath(g,f){const L=this.current;let N=L.x,E=L.y,F=[],P=0;for(const W of g)switch(W|0){case r.OPS.rectangle:N=f[P++],E=f[P++];const z=f[P++],w=f[P++],Y=N+z,ot=E+w;F.push("M",D(N),D(E),"L",D(Y),D(E),"L",D(Y),D(ot),"L",D(N),D(ot),"Z");break;case r.OPS.moveTo:N=f[P++],E=f[P++],F.push("M",D(N),D(E));break;case r.OPS.lineTo:N=f[P++],E=f[P++],F.push("L",D(N),D(E));break;case r.OPS.curveTo:N=f[P+4],E=f[P+5],F.push("C",D(f[P]),D(f[P+1]),D(f[P+2]),D(f[P+3]),D(N),D(E)),P+=6;break;case r.OPS.curveTo2:F.push("C",D(N),D(E),D(f[P]),D(f[P+1]),D(f[P+2]),D(f[P+3])),N=f[P+2],E=f[P+3],P+=4;break;case r.OPS.curveTo3:N=f[P+2],E=f[P+3],F.push("C",D(f[P]),D(f[P+1]),D(N),D(E),D(N),D(E)),P+=4;break;case r.OPS.closePath:F.push("Z");break}F=F.join(" "),L.path&&g.length>0&&g[0]!==r.OPS.rectangle&&g[0]!==r.OPS.moveTo?F=L.path.getAttributeNS(null,"d")+F:(L.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(L.path)),L.path.setAttributeNS(null,"d",F),L.path.setAttributeNS(null,"fill","none"),L.element=L.path,L.setCurrentPoint(N,E)}endPath(){const g=this.current;if(g.path=null,!this.pendingClip)return;if(!g.element){this.pendingClip=null;return}const f=`clippath${S++}`,L=this.svgFactory.createElement("svg:clipPath");L.setAttributeNS(null,"id",f),L.setAttributeNS(null,"transform",b(this.transformMatrix));const N=g.element.cloneNode(!0);if(this.pendingClip==="evenodd"?N.setAttributeNS(null,"clip-rule","evenodd"):N.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,L.append(N),this.defs.append(L),g.activeClipUrl){g.clipGroup=null;for(const E of this.extraStack)E.clipGroup=null;L.setAttributeNS(null,"clip-path",g.activeClipUrl)}g.activeClipUrl=`url(#${f})`,this.tgrp=null}clip(g){this.pendingClip=g}closePath(){const g=this.current;if(g.path){const f=`${g.path.getAttributeNS(null,"d")}Z`;g.path.setAttributeNS(null,"d",f)}}setLeading(g){this.current.leading=-g}setTextRise(g){this.current.textRise=g}setTextRenderingMode(g){this.current.textRenderingMode=g}setHScale(g){this.current.textHScale=g/100}setRenderingIntent(g){}setFlatness(g){}setGState(g){for(const[f,L]of g)switch(f){case"LW":this.setLineWidth(L);break;case"LC":this.setLineCap(L);break;case"LJ":this.setLineJoin(L);break;case"ML":this.setMiterLimit(L);break;case"D":this.setDash(L[0],L[1]);break;case"RI":this.setRenderingIntent(L);break;case"FL":this.setFlatness(L);break;case"Font":this.setFont(L);break;case"CA":this.setStrokeAlpha(L);break;case"ca":this.setFillAlpha(L);break;default:(0,r.warn)(`Unimplemented graphic state operator ${f}`);break}}fill(){const g=this.current;g.element&&(g.element.setAttributeNS(null,"fill",g.fillColor),g.element.setAttributeNS(null,"fill-opacity",g.fillAlpha),this.endPath())}stroke(){const g=this.current;g.element&&(this._setStrokeAttributes(g.element),g.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(g,f=1){const L=this.current;let N=L.dashArray;f!==1&&N.length>0&&(N=N.map(function(E){return f*E})),g.setAttributeNS(null,"stroke",L.strokeColor),g.setAttributeNS(null,"stroke-opacity",L.strokeAlpha),g.setAttributeNS(null,"stroke-miterlimit",D(L.miterLimit)),g.setAttributeNS(null,"stroke-linecap",L.lineCap),g.setAttributeNS(null,"stroke-linejoin",L.lineJoin),g.setAttributeNS(null,"stroke-width",D(f*L.lineWidth)+"px"),g.setAttributeNS(null,"stroke-dasharray",N.map(D).join(" ")),g.setAttributeNS(null,"stroke-dashoffset",D(f*L.dashPhase)+"px")}eoFill(){var g;(g=this.current.element)==null||g.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var g;(g=this.current.element)==null||g.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const g=this.svgFactory.createElement("svg:rect");g.setAttributeNS(null,"x","0"),g.setAttributeNS(null,"y","0"),g.setAttributeNS(null,"width","1px"),g.setAttributeNS(null,"height","1px"),g.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(g)}paintImageXObject(g){const f=this.getObject(g);if(!f){(0,r.warn)(`Dependent image with object ID ${g} is not ready yet`);return}this.paintInlineImageXObject(f)}paintInlineImageXObject(g,f){const L=g.width,N=g.height,E=A(g,this.forceDataSchema,!!f),F=this.svgFactory.createElement("svg:rect");F.setAttributeNS(null,"x","0"),F.setAttributeNS(null,"y","0"),F.setAttributeNS(null,"width",D(L)),F.setAttributeNS(null,"height",D(N)),this.current.element=F,this.clip("nonzero");const P=this.svgFactory.createElement("svg:image");P.setAttributeNS(c,"xlink:href",E),P.setAttributeNS(null,"x","0"),P.setAttributeNS(null,"y",D(-N)),P.setAttributeNS(null,"width",D(L)+"px"),P.setAttributeNS(null,"height",D(N)+"px"),P.setAttributeNS(null,"transform",`scale(${D(1/L)} ${D(-1/N)})`),f?f.append(P):this._ensureTransformGroup().append(P)}paintImageMaskXObject(g){const f=this.getObject(g.data,g);if(f.bitmap){(0,r.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const L=this.current,N=f.width,E=f.height,F=L.fillColor;L.maskId=`mask${O++}`;const P=this.svgFactory.createElement("svg:mask");P.setAttributeNS(null,"id",L.maskId);const W=this.svgFactory.createElement("svg:rect");W.setAttributeNS(null,"x","0"),W.setAttributeNS(null,"y","0"),W.setAttributeNS(null,"width",D(N)),W.setAttributeNS(null,"height",D(E)),W.setAttributeNS(null,"fill",F),W.setAttributeNS(null,"mask",`url(#${L.maskId})`),this.defs.append(P),this._ensureTransformGroup().append(W),this.paintInlineImageXObject(f,P)}paintFormXObjectBegin(g,f){if(Array.isArray(g)&&g.length===6&&this.transform(g[0],g[1],g[2],g[3],g[4],g[5]),f){const L=f[2]-f[0],N=f[3]-f[1],E=this.svgFactory.createElement("svg:rect");E.setAttributeNS(null,"x",f[0]),E.setAttributeNS(null,"y",f[1]),E.setAttributeNS(null,"width",D(L)),E.setAttributeNS(null,"height",D(N)),this.current.element=E,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(g){const f=this.svgFactory.create(g.width,g.height),L=this.svgFactory.createElement("svg:defs");f.append(L),this.defs=L;const N=this.svgFactory.createElement("svg:g");return N.setAttributeNS(null,"transform",b(g.transform)),f.append(N),this.svg=N,f}_ensureClipGroup(){if(!this.current.clipGroup){const g=this.svgFactory.createElement("svg:g");g.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(g),this.current.clipGroup=g}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",b(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=M},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class n{static textContent(r){const i=[],a={items:i,styles:Object.create(null)};function c(o){var A;if(!o)return;let m=null;const h=o.name;if(h==="#text")m=o.value;else if(n.shouldBuildText(h))(A=o==null?void 0:o.attributes)!=null&&A.textContent?m=o.attributes.textContent:o.value&&(m=o.value);else return;if(m!==null&&i.push({str:m}),!!o.children)for(const y of o.children)c(y)}return c(r),a}static shouldBuildText(r){return!(r==="textarea"||r==="input"||r==="option"||r==="select")}}e.XfaText=n},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=b,e.updateTextLayer=S;var s=n(1),r=n(6);const i=1e5,a=30,c=.8,o=new Map;function m(O,v){let M;if(v&&s.FeatureTest.isOffscreenCanvasSupported)M=new OffscreenCanvas(O,O).getContext("2d",{alpha:!1});else{const R=document.createElement("canvas");R.width=R.height=O,M=R.getContext("2d",{alpha:!1})}return M}function h(O,v){const M=o.get(O);if(M)return M;const R=m(a,v);R.font=`${a}px ${O}`;const g=R.measureText("");let f=g.fontBoundingBoxAscent,L=Math.abs(g.fontBoundingBoxDescent);if(f){const E=f/(f+L);return o.set(O,E),R.canvas.width=R.canvas.height=0,E}R.strokeStyle="red",R.clearRect(0,0,a,a),R.strokeText("g",0,0);let N=R.getImageData(0,0,a,a).data;L=0;for(let E=N.length-1-3;E>=0;E-=4)if(N[E]>0){L=Math.ceil(E/4/a);break}R.clearRect(0,0,a,a),R.strokeText("A",0,a),N=R.getImageData(0,0,a,a).data,f=0;for(let E=0,F=N.length;E<F;E+=4)if(N[E]>0){f=a-Math.floor(E/4/a);break}if(R.canvas.width=R.canvas.height=0,f){const E=f/(f+L);return o.set(O,E),E}return o.set(O,c),c}function A(O,v,M){const R=document.createElement("span"),g={angle:0,canvasWidth:0,hasText:v.str!=="",hasEOL:v.hasEOL,fontSize:0};O._textDivs.push(R);const f=s.Util.transform(O._transform,v.transform);let L=Math.atan2(f[1],f[0]);const N=M[v.fontName];N.vertical&&(L+=Math.PI/2);const E=Math.hypot(f[2],f[3]),F=E*h(N.fontFamily,O._isOffscreenCanvasSupported);let P,W;L===0?(P=f[4],W=f[5]-F):(P=f[4]+F*Math.sin(L),W=f[5]-F*Math.cos(L));const z="calc(var(--scale-factor)*",w=R.style;O._container===O._rootContainer?(w.left=`${(100*P/O._pageWidth).toFixed(2)}%`,w.top=`${(100*W/O._pageHeight).toFixed(2)}%`):(w.left=`${z}${P.toFixed(2)}px)`,w.top=`${z}${W.toFixed(2)}px)`),w.fontSize=`${z}${E.toFixed(2)}px)`,w.fontFamily=N.fontFamily,g.fontSize=E,R.setAttribute("role","presentation"),R.textContent=v.str,R.dir=v.dir,O._fontInspectorEnabled&&(R.dataset.fontName=v.fontName),L!==0&&(g.angle=L*(180/Math.PI));let Y=!1;if(v.str.length>1)Y=!0;else if(v.str!==" "&&v.transform[0]!==v.transform[3]){const ot=Math.abs(v.transform[0]),et=Math.abs(v.transform[3]);ot!==et&&Math.max(ot,et)/Math.min(ot,et)>1.5&&(Y=!0)}Y&&(g.canvasWidth=N.vertical?v.height:v.width),O._textDivProperties.set(R,g),O._isReadableStream&&O._layoutText(R)}function y(O){const{div:v,scale:M,properties:R,ctx:g,prevFontSize:f,prevFontFamily:L}=O,{style:N}=v;let E="";if(R.canvasWidth!==0&&R.hasText){const{fontFamily:F}=N,{canvasWidth:P,fontSize:W}=R;(f!==W||L!==F)&&(g.font=`${W*M}px ${F}`,O.prevFontSize=W,O.prevFontFamily=F);const{width:z}=g.measureText(v.textContent);z>0&&(E=`scaleX(${P*M/z})`)}R.angle!==0&&(E=`rotate(${R.angle}deg) ${E}`),E.length>0&&(N.transform=E)}function C(O){if(O._canceled)return;const v=O._textDivs,M=O._capability;if(v.length>i){M.resolve();return}if(!O._isReadableStream)for(const R of v)O._layoutText(R);M.resolve()}class D{constructor({textContentSource:v,container:M,viewport:R,textDivs:g,textDivProperties:f,textContentItemsStr:L,isOffscreenCanvasSupported:N}){var z;this._textContentSource=v,this._isReadableStream=v instanceof ReadableStream,this._container=this._rootContainer=M,this._textDivs=g||[],this._textContentItemsStr=L||[],this._isOffscreenCanvasSupported=N,this._fontInspectorEnabled=!!((z=globalThis.FontInspector)!=null&&z.enabled),this._reader=null,this._textDivProperties=f||new WeakMap,this._canceled=!1,this._capability=new s.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:R.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:m(0,N)};const{pageWidth:E,pageHeight:F,pageX:P,pageY:W}=R.rawDims;this._transform=[1,0,0,-1,-P,W+F],this._pageWidth=E,this._pageHeight=F,(0,r.setLayerDimensions)(M,R),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new s.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new s.AbortException("TextLayer task cancelled."))}_processItems(v,M){for(const R of v){if(R.str===void 0){if(R.type==="beginMarkedContentProps"||R.type==="beginMarkedContent"){const g=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),R.id!==null&&this._container.setAttribute("id",`${R.id}`),g.append(this._container)}else R.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(R.str),A(this,R,M)}}_layoutText(v){const M=this._layoutTextParams.properties=this._textDivProperties.get(v);if(this._layoutTextParams.div=v,y(this._layoutTextParams),M.hasText&&this._container.append(v),M.hasEOL){const R=document.createElement("br");R.setAttribute("role","presentation"),this._container.append(R)}}_render(){const v=new s.PromiseCapability;let M=Object.create(null);if(this._isReadableStream){const R=()=>{this._reader.read().then(({value:g,done:f})=>{if(f){v.resolve();return}Object.assign(M,g.styles),this._processItems(g.items,M),R()},v.reject)};this._reader=this._textContentSource.getReader(),R()}else if(this._textContentSource){const{items:R,styles:g}=this._textContentSource;this._processItems(R,g),v.resolve()}else throw new Error('No "textContentSource" parameter specified.');v.promise.then(()=>{M=null,C(this)},this._capability.reject)}}e.TextLayerRenderTask=D;function b(O){!O.textContentSource&&(O.textContent||O.textContentStream)&&((0,r.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),O.textContentSource=O.textContent||O.textContentStream);const{container:v,viewport:M}=O,R=getComputedStyle(v),g=R.getPropertyValue("visibility"),f=parseFloat(R.getPropertyValue("--scale-factor"));g==="visible"&&(!f||Math.abs(f-M.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const L=new D(O);return L._render(),L}function S({container:O,viewport:v,textDivs:M,textDivProperties:R,isOffscreenCanvasSupported:g,mustRotate:f=!0,mustRescale:L=!0}){if(f&&(0,r.setLayerDimensions)(O,{rotation:v.rotation}),L){const N=m(0,g),E={prevFontSize:null,prevFontFamily:null,div:null,scale:v.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:N};for(const F of M)E.properties=R.get(F),E.div=F,y(E)}}},(t,e,n)=>{var h,A,y,C,D,b,S,O,v,M,R,nn,f,ve,N,sn,F,rn;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var s=n(1),r=n(4),i=n(28),a=n(33),c=n(6),o=n(34);const W=class W{constructor({uiManager:w,pageIndex:Y,div:ot,accessibilityManager:et,annotationLayer:q,viewport:ht,l10n:dt}){j(this,R);j(this,f);j(this,N);j(this,F);j(this,h,void 0);j(this,A,!1);j(this,y,null);j(this,C,this.pointerup.bind(this));j(this,D,this.pointerdown.bind(this));j(this,b,new Map);j(this,S,!1);j(this,O,!1);j(this,v,!1);j(this,M,void 0);const Et=[i.FreeTextEditor,a.InkEditor,o.StampEditor];if(!W._initialized){W._initialized=!0;for(const gt of Et)gt.initialize(dt)}w.registerEditorTypes(Et),it(this,M,w),this.pageIndex=Y,this.div=ot,it(this,h,et),it(this,y,q),this.viewport=ht,l(this,M).addLayer(this)}get isEmpty(){return l(this,b).size===0}updateToolbar(w){l(this,M).updateToolbar(w)}updateMode(w=l(this,M).getMode()){K(this,F,rn).call(this),w===s.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),w!==s.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",w===s.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",w===s.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",w===s.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(w){if(!(!w&&l(this,M).getMode()!==s.AnnotationEditorType.INK)){if(!w){for(const Y of l(this,b).values())if(Y.isEmpty()){Y.setInBackground();return}}K(this,f,ve).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(w){l(this,M).setEditingState(w)}addCommands(w){l(this,M).addCommands(w)}enable(){this.div.style.pointerEvents="auto";const w=new Set;for(const ot of l(this,b).values())ot.enableEditing(),ot.annotationElementId&&w.add(ot.annotationElementId);if(!l(this,y))return;const Y=l(this,y).getEditableAnnotations();for(const ot of Y){if(ot.hide(),l(this,M).isDeletedAnnotationElement(ot.data.id)||w.has(ot.data.id))continue;const et=this.deserialize(ot);et&&(this.addOrRebuild(et),et.enableEditing())}}disable(){var Y;it(this,v,!0),this.div.style.pointerEvents="none";const w=new Set;for(const ot of l(this,b).values()){if(ot.disableEditing(),!ot.annotationElementId||ot.serialize()!==null){w.add(ot.annotationElementId);continue}(Y=this.getEditableAnnotation(ot.annotationElementId))==null||Y.show(),ot.remove()}if(l(this,y)){const ot=l(this,y).getEditableAnnotations();for(const et of ot){const{id:q}=et.data;w.has(q)||l(this,M).isDeletedAnnotationElement(q)||et.show()}}K(this,F,rn).call(this),this.isEmpty&&(this.div.hidden=!0),it(this,v,!1)}getEditableAnnotation(w){var Y;return((Y=l(this,y))==null?void 0:Y.getEditableAnnotation(w))||null}setActiveEditor(w){l(this,M).getActive()!==w&&l(this,M).setActiveEditor(w)}enableClick(){this.div.addEventListener("pointerdown",l(this,D)),this.div.addEventListener("pointerup",l(this,C))}disableClick(){this.div.removeEventListener("pointerdown",l(this,D)),this.div.removeEventListener("pointerup",l(this,C))}attach(w){l(this,b).set(w.id,w);const{annotationElementId:Y}=w;Y&&l(this,M).isDeletedAnnotationElement(Y)&&l(this,M).removeDeletedAnnotationElement(w)}detach(w){var Y;l(this,b).delete(w.id),(Y=l(this,h))==null||Y.removePointerInTextLayer(w.contentDiv),!l(this,v)&&w.annotationElementId&&l(this,M).addDeletedAnnotationElement(w)}remove(w){this.detach(w),l(this,M).removeEditor(w),w.div.contains(document.activeElement)&&setTimeout(()=>{l(this,M).focusMainContainer()},0),w.div.remove(),w.isAttachedToDOM=!1,l(this,O)||this.addInkEditorIfNeeded(!1)}changeParent(w){var Y;w.parent!==this&&(w.annotationElementId&&(l(this,M).addDeletedAnnotationElement(w.annotationElementId),r.AnnotationEditor.deleteAnnotationElement(w),w.annotationElementId=null),this.attach(w),(Y=w.parent)==null||Y.detach(w),w.setParent(this),w.div&&w.isAttachedToDOM&&(w.div.remove(),this.div.append(w.div)))}add(w){if(this.changeParent(w),l(this,M).addEditor(w),this.attach(w),!w.isAttachedToDOM){const Y=w.render();this.div.append(Y),w.isAttachedToDOM=!0}w.fixAndSetPosition(),w.onceAdded(),l(this,M).addToAnnotationStorage(w)}moveEditorInDOM(w){var ot;if(!w.isAttachedToDOM)return;const{activeElement:Y}=document;w.div.contains(Y)&&(w._focusEventsAllowed=!1,setTimeout(()=>{w.div.contains(document.activeElement)?w._focusEventsAllowed=!0:(w.div.addEventListener("focusin",()=>{w._focusEventsAllowed=!0},{once:!0}),Y.focus())},0)),w._structTreeParentId=(ot=l(this,h))==null?void 0:ot.moveElementInDOM(this.div,w.div,w.contentDiv,!0)}addOrRebuild(w){w.needsToBeRebuilt()?w.rebuild():this.add(w)}addUndoableEditor(w){const Y=()=>w._uiManager.rebuild(w),ot=()=>{w.remove()};this.addCommands({cmd:Y,undo:ot,mustExec:!1})}getNextId(){return l(this,M).getId()}pasteEditor(w,Y){l(this,M).updateToolbar(w),l(this,M).updateMode(w);const{offsetX:ot,offsetY:et}=K(this,N,sn).call(this),q=this.getNextId(),ht=K(this,R,nn).call(this,{parent:this,id:q,x:ot,y:et,uiManager:l(this,M),isCentered:!0,...Y});ht&&this.add(ht)}deserialize(w){switch(w.annotationType??w.annotationEditorType){case s.AnnotationEditorType.FREETEXT:return i.FreeTextEditor.deserialize(w,this,l(this,M));case s.AnnotationEditorType.INK:return a.InkEditor.deserialize(w,this,l(this,M));case s.AnnotationEditorType.STAMP:return o.StampEditor.deserialize(w,this,l(this,M))}return null}addNewEditor(){K(this,f,ve).call(this,K(this,N,sn).call(this),!0)}setSelected(w){l(this,M).setSelected(w)}toggleSelected(w){l(this,M).toggleSelected(w)}isSelected(w){return l(this,M).isSelected(w)}unselect(w){l(this,M).unselect(w)}pointerup(w){const{isMac:Y}=s.FeatureTest.platform;if(!(w.button!==0||w.ctrlKey&&Y)&&w.target===this.div&&l(this,S)){if(it(this,S,!1),!l(this,A)){it(this,A,!0);return}if(l(this,M).getMode()===s.AnnotationEditorType.STAMP){l(this,M).unselectAll();return}K(this,f,ve).call(this,w,!1)}}pointerdown(w){if(l(this,S)){it(this,S,!1);return}const{isMac:Y}=s.FeatureTest.platform;if(w.button!==0||w.ctrlKey&&Y||w.target!==this.div)return;it(this,S,!0);const ot=l(this,M).getActive();it(this,A,!ot||ot.isEmpty())}findNewParent(w,Y,ot){const et=l(this,M).findParent(Y,ot);return et===null||et===this?!1:(et.changeParent(w),!0)}destroy(){var w,Y;((w=l(this,M).getActive())==null?void 0:w.parent)===this&&(l(this,M).commitOrRemove(),l(this,M).setActiveEditor(null));for(const ot of l(this,b).values())(Y=l(this,h))==null||Y.removePointerInTextLayer(ot.contentDiv),ot.setParent(null),ot.isAttachedToDOM=!1,ot.div.remove();this.div=null,l(this,b).clear(),l(this,M).removeLayer(this)}render({viewport:w}){this.viewport=w,(0,c.setLayerDimensions)(this.div,w);for(const Y of l(this,M).getEditors(this.pageIndex))this.add(Y);this.updateMode()}update({viewport:w}){l(this,M).commitOrRemove(),this.viewport=w,(0,c.setLayerDimensions)(this.div,{rotation:w.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:w,pageHeight:Y}=this.viewport.rawDims;return[w,Y]}};h=new WeakMap,A=new WeakMap,y=new WeakMap,C=new WeakMap,D=new WeakMap,b=new WeakMap,S=new WeakMap,O=new WeakMap,v=new WeakMap,M=new WeakMap,R=new WeakSet,nn=function(w){switch(l(this,M).getMode()){case s.AnnotationEditorType.FREETEXT:return new i.FreeTextEditor(w);case s.AnnotationEditorType.INK:return new a.InkEditor(w);case s.AnnotationEditorType.STAMP:return new o.StampEditor(w)}return null},f=new WeakSet,ve=function(w,Y){const ot=this.getNextId(),et=K(this,R,nn).call(this,{parent:this,id:ot,x:w.offsetX,y:w.offsetY,uiManager:l(this,M),isCentered:Y});return et&&this.add(et),et},N=new WeakSet,sn=function(){const{x:w,y:Y,width:ot,height:et}=this.div.getBoundingClientRect(),q=Math.max(0,w),ht=Math.max(0,Y),dt=Math.min(window.innerWidth,w+ot),Et=Math.min(window.innerHeight,Y+et),gt=(q+dt)/2-w,G=(ht+Et)/2-Y,[u,T]=this.viewport.rotation%180===0?[gt,G]:[G,gt];return{offsetX:u,offsetY:T}},F=new WeakSet,rn=function(){it(this,O,!0);for(const w of l(this,b).values())w.isEmpty()&&w.remove();it(this,O,!1)},ne(W,"_initialized",!1);let m=W;e.AnnotationEditorLayer=m},(t,e,n)=>{var o,m,h,A,y,C,D,b,S,O,Mn,M,xn,g,kn,L,Se,E,an,P,Ln,z,on;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var s=n(1),r=n(5),i=n(4),a=n(29);const Y=class Y extends i.AnnotationEditor{constructor(q){super({...q,name:"freeTextEditor"});j(this,O);j(this,M);j(this,g);j(this,L);j(this,E);j(this,P);j(this,z);j(this,o,this.editorDivBlur.bind(this));j(this,m,this.editorDivFocus.bind(this));j(this,h,this.editorDivInput.bind(this));j(this,A,this.editorDivKeydown.bind(this));j(this,y,void 0);j(this,C,"");j(this,D,`${this.id}-editor`);j(this,b,void 0);j(this,S,null);it(this,y,q.color||Y._defaultColor||i.AnnotationEditor._defaultLineColor),it(this,b,q.fontSize||Y._defaultFontSize)}static get _keyboardManager(){const q=Y.prototype,ht=gt=>gt.isEmpty(),dt=r.AnnotationEditorUIManager.TRANSLATE_SMALL,Et=r.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,s.shadow)(this,"_keyboardManager",new r.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],q.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],q.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],q._translateEmpty,{args:[-dt,0],checker:ht}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],q._translateEmpty,{args:[-Et,0],checker:ht}],[["ArrowRight","mac+ArrowRight"],q._translateEmpty,{args:[dt,0],checker:ht}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],q._translateEmpty,{args:[Et,0],checker:ht}],[["ArrowUp","mac+ArrowUp"],q._translateEmpty,{args:[0,-dt],checker:ht}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],q._translateEmpty,{args:[0,-Et],checker:ht}],[["ArrowDown","mac+ArrowDown"],q._translateEmpty,{args:[0,dt],checker:ht}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],q._translateEmpty,{args:[0,Et],checker:ht}]]))}static initialize(q){i.AnnotationEditor.initialize(q,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const ht=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(ht.getPropertyValue("--freetext-padding"))}static updateDefaultParams(q,ht){switch(q){case s.AnnotationEditorParamsType.FREETEXT_SIZE:Y._defaultFontSize=ht;break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:Y._defaultColor=ht;break}}updateParams(q,ht){switch(q){case s.AnnotationEditorParamsType.FREETEXT_SIZE:K(this,O,Mn).call(this,ht);break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:K(this,M,xn).call(this,ht);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,Y._defaultFontSize],[s.AnnotationEditorParamsType.FREETEXT_COLOR,Y._defaultColor||i.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,l(this,b)],[s.AnnotationEditorParamsType.FREETEXT_COLOR,l(this,y)]]}_translateEmpty(q,ht){this._uiManager.translateSelectedEditors(q,ht,!0)}getInitialTranslation(){const q=this.parentScale;return[-Y._internalPadding*q,-(Y._internalPadding+l(this,b))*q]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(s.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",l(this,A)),this.editorDiv.addEventListener("focus",l(this,m)),this.editorDiv.addEventListener("blur",l(this,o)),this.editorDiv.addEventListener("input",l(this,h)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,D)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",l(this,A)),this.editorDiv.removeEventListener("focus",l(this,m)),this.editorDiv.removeEventListener("blur",l(this,o)),this.editorDiv.removeEventListener("input",l(this,h)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(q){this._focusEventsAllowed&&(super.focusin(q),q.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var q;if(this.width){K(this,z,on).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(q=this._initialOptions)!=null&&q.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const q=l(this,C),ht=it(this,C,K(this,g,kn).call(this).trimEnd());if(q===ht)return;const dt=Et=>{if(it(this,C,Et),!Et){this.remove();return}K(this,E,an).call(this),this._uiManager.rebuild(this),K(this,L,Se).call(this)};this.addCommands({cmd:()=>{dt(ht)},undo:()=>{dt(q)},mustExec:!1}),K(this,L,Se).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(q){this.enterInEditMode()}keydown(q){q.target===this.div&&q.key==="Enter"&&(this.enterInEditMode(),q.preventDefault())}editorDivKeydown(q){Y._keyboardManager.exec(this,q)}editorDivFocus(q){this.isEditing=!0}editorDivBlur(q){this.isEditing=!1}editorDivInput(q){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let q,ht;this.width&&(q=this.x,ht=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,D)),this.enableEditing(),i.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Et=>{var gt;return(gt=this.editorDiv)==null?void 0:gt.setAttribute("aria-label",Et)}),i.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Et=>{var gt;return(gt=this.editorDiv)==null?void 0:gt.setAttribute("default-content",Et)}),this.editorDiv.contentEditable=!0;const{style:dt}=this.editorDiv;if(dt.fontSize=`calc(${l(this,b)}px * var(--scale-factor))`,dt.color=l(this,y),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,r.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Et,gt]=this.parentDimensions;if(this.annotationElementId){const{position:G}=l(this,S);let[u,T]=this.getInitialTranslation();[u,T]=this.pageTranslationToScreen(u,T);const[p,_]=this.pageDimensions,[I,k]=this.pageTranslation;let B,X;switch(this.rotation){case 0:B=q+(G[0]-I)/p,X=ht+this.height-(G[1]-k)/_;break;case 90:B=q+(G[0]-I)/p,X=ht-(G[1]-k)/_,[u,T]=[T,-u];break;case 180:B=q-this.width+(G[0]-I)/p,X=ht-(G[1]-k)/_,[u,T]=[-u,-T];break;case 270:B=q+(G[0]-I-this.height*_)/p,X=ht+(G[1]-k-this.width*p)/_,[u,T]=[-T,u];break}this.setAt(B*Et,X*gt,u,T)}else this.setAt(q*Et,ht*gt,this.width*Et,this.height*gt);K(this,E,an).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(q,ht,dt){let Et=null;if(q instanceof a.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:G,fontColor:u},rect:T,rotation:p,id:_},textContent:I,textPosition:k,parent:{page:{pageNumber:B}}}=q;if(!I||I.length===0)return null;Et=q={annotationType:s.AnnotationEditorType.FREETEXT,color:Array.from(u),fontSize:G,value:I.join(`
`),position:k,pageIndex:B-1,rect:T,rotation:p,id:_,deleted:!1}}const gt=super.deserialize(q,ht,dt);return it(gt,b,q.fontSize),it(gt,y,s.Util.makeHexColor(...q.color)),it(gt,C,q.value),gt.annotationElementId=q.id||null,it(gt,S,Et),gt}serialize(q=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const ht=Y._internalPadding*this.parentScale,dt=this.getRect(ht,ht),Et=i.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,y)),gt={annotationType:s.AnnotationEditorType.FREETEXT,color:Et,fontSize:l(this,b),value:l(this,C),pageIndex:this.pageIndex,rect:dt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return q?gt:this.annotationElementId&&!K(this,P,Ln).call(this,gt)?null:(gt.id=this.annotationElementId,gt)}};o=new WeakMap,m=new WeakMap,h=new WeakMap,A=new WeakMap,y=new WeakMap,C=new WeakMap,D=new WeakMap,b=new WeakMap,S=new WeakMap,O=new WeakSet,Mn=function(q){const ht=Et=>{this.editorDiv.style.fontSize=`calc(${Et}px * var(--scale-factor))`,this.translate(0,-(Et-l(this,b))*this.parentScale),it(this,b,Et),K(this,L,Se).call(this)},dt=l(this,b);this.addCommands({cmd:()=>{ht(q)},undo:()=>{ht(dt)},mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},M=new WeakSet,xn=function(q){const ht=l(this,y);this.addCommands({cmd:()=>{it(this,y,this.editorDiv.style.color=q)},undo:()=>{it(this,y,this.editorDiv.style.color=ht)},mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},g=new WeakSet,kn=function(){const q=this.editorDiv.getElementsByTagName("div");if(q.length===0)return this.editorDiv.innerText;const ht=[];for(const dt of q)ht.push(dt.innerText.replace(/\r\n?|\n/,""));return ht.join(`
`)},L=new WeakSet,Se=function(){const[q,ht]=this.parentDimensions;let dt;if(this.isAttachedToDOM)dt=this.div.getBoundingClientRect();else{const{currentLayer:Et,div:gt}=this,G=gt.style.display;gt.style.display="hidden",Et.div.append(this.div),dt=gt.getBoundingClientRect(),gt.remove(),gt.style.display=G}this.rotation%180===this.parentRotation%180?(this.width=dt.width/q,this.height=dt.height/ht):(this.width=dt.height/q,this.height=dt.width/ht),this.fixAndSetPosition()},E=new WeakSet,an=function(){if(this.editorDiv.replaceChildren(),!!l(this,C))for(const q of l(this,C).split(`
`)){const ht=document.createElement("div");ht.append(q?document.createTextNode(q):document.createElement("br")),this.editorDiv.append(ht)}},P=new WeakSet,Ln=function(q){const{value:ht,fontSize:dt,color:Et,rect:gt,pageIndex:G}=l(this,S);return q.value!==ht||q.fontSize!==dt||q.rect.some((u,T)=>Math.abs(u-gt[T])>=1)||q.color.some((u,T)=>u!==Et[T])||q.pageIndex!==G},z=new WeakSet,on=function(q=!1){if(!this.annotationElementId)return;if(K(this,L,Se).call(this),!q&&(this.width===0||this.height===0)){setTimeout(()=>K(this,z,on).call(this,!0),0);return}const ht=Y._internalPadding*this.parentScale;l(this,S).rect=this.getRect(ht,ht)},ne(Y,"_freeTextDefaultContent",""),ne(Y,"_internalPadding",0),ne(Y,"_defaultColor",null),ne(Y,"_defaultFontSize",10),ne(Y,"_type","freetext");let c=Y;e.FreeTextEditor=c},(t,e,n)=>{var T,_,ce,k,wn,X,nt,Q,lt,pt,Ct,mt,Pt,Dt,xt,Bt,ft,at,st,Tt,Nt,yt,Ht,Fn,$t,Pe,qt,ln,Vt,cn,rt,J,_t,It,ee,te,tt,hn,wt,Ot,Ft,Gt,Gn,St,dn;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var s=n(1),r=n(6),i=n(3),a=n(30),c=n(31),o=n(32);const m=1e3,h=9,A=new WeakSet;function y(Lt){return{width:Lt[2]-Lt[0],height:Lt[3]-Lt[1]}}class C{static create(U){switch(U.data.annotationType){case s.AnnotationType.LINK:return new b(U);case s.AnnotationType.TEXT:return new S(U);case s.AnnotationType.WIDGET:switch(U.data.fieldType){case"Tx":return new v(U);case"Btn":return U.data.radioButton?new g(U):U.data.checkBox?new R(U):new f(U);case"Ch":return new L(U);case"Sig":return new M(U)}return new O(U);case s.AnnotationType.POPUP:return new N(U);case s.AnnotationType.FREETEXT:return new F(U);case s.AnnotationType.LINE:return new P(U);case s.AnnotationType.SQUARE:return new W(U);case s.AnnotationType.CIRCLE:return new z(U);case s.AnnotationType.POLYLINE:return new w(U);case s.AnnotationType.CARET:return new ot(U);case s.AnnotationType.INK:return new et(U);case s.AnnotationType.POLYGON:return new Y(U);case s.AnnotationType.HIGHLIGHT:return new q(U);case s.AnnotationType.UNDERLINE:return new ht(U);case s.AnnotationType.SQUIGGLY:return new dt(U);case s.AnnotationType.STRIKEOUT:return new Et(U);case s.AnnotationType.STAMP:return new gt(U);case s.AnnotationType.FILEATTACHMENT:return new G(U);default:return new D(U)}}}const p=class p{constructor(U,{isRenderable:d=!1,ignoreBorder:x=!1,createQuadrilaterals:H=!1}={}){j(this,T,!1);this.isRenderable=d,this.data=U.data,this.layer=U.layer,this.linkService=U.linkService,this.downloadManager=U.downloadManager,this.imageResourcesPath=U.imageResourcesPath,this.renderForms=U.renderForms,this.svgFactory=U.svgFactory,this.annotationStorage=U.annotationStorage,this.enableScripting=U.enableScripting,this.hasJSActions=U.hasJSActions,this._fieldObjects=U.fieldObjects,this.parent=U.parent,d&&(this.container=this._createContainer(x)),H&&this._createQuadrilaterals()}static _hasPopupData({titleObj:U,contentsObj:d,richText:x}){return!!(U!=null&&U.str||d!=null&&d.str||x!=null&&x.str)}get hasPopupData(){return p._hasPopupData(this.data)}_createContainer(U){const{data:d,parent:{page:x,viewport:H}}=this,V=document.createElement("section");V.setAttribute("data-annotation-id",d.id),this instanceof O||(V.tabIndex=m),V.style.zIndex=this.parent.zIndex++,this.data.popupRef&&V.setAttribute("aria-haspopup","dialog"),d.noRotate&&V.classList.add("norotate");const{pageWidth:Z,pageHeight:ct,pageX:At,pageY:vt}=H.rawDims;if(!d.rect||this instanceof N){const{rotation:Ut}=d;return!d.hasOwnCanvas&&Ut!==0&&this.setRotation(Ut,V),V}const{width:Rt,height:Wt}=y(d.rect),Mt=s.Util.normalizeRect([d.rect[0],x.view[3]-d.rect[1]+x.view[1],d.rect[2],x.view[3]-d.rect[3]+x.view[1]]);if(!U&&d.borderStyle.width>0){V.style.borderWidth=`${d.borderStyle.width}px`;const Ut=d.borderStyle.horizontalCornerRadius,Yt=d.borderStyle.verticalCornerRadius;if(Ut>0||Yt>0){const Zt=`calc(${Ut}px * var(--scale-factor)) / calc(${Yt}px * var(--scale-factor))`;V.style.borderRadius=Zt}else if(this instanceof g){const Zt=`calc(${Rt}px * var(--scale-factor)) / calc(${Wt}px * var(--scale-factor))`;V.style.borderRadius=Zt}switch(d.borderStyle.style){case s.AnnotationBorderStyleType.SOLID:V.style.borderStyle="solid";break;case s.AnnotationBorderStyleType.DASHED:V.style.borderStyle="dashed";break;case s.AnnotationBorderStyleType.BEVELED:(0,s.warn)("Unimplemented border style: beveled");break;case s.AnnotationBorderStyleType.INSET:(0,s.warn)("Unimplemented border style: inset");break;case s.AnnotationBorderStyleType.UNDERLINE:V.style.borderBottomStyle="solid";break}const Jt=d.borderColor||null;Jt?(it(this,T,!0),V.style.borderColor=s.Util.makeHexColor(Jt[0]|0,Jt[1]|0,Jt[2]|0)):V.style.borderWidth=0}V.style.left=`${100*(Mt[0]-At)/Z}%`,V.style.top=`${100*(Mt[1]-vt)/ct}%`;const{rotation:kt}=d;return d.hasOwnCanvas||kt===0?(V.style.width=`${100*Rt/Z}%`,V.style.height=`${100*Wt/ct}%`):this.setRotation(kt,V),V}setRotation(U,d=this.container){if(!this.data.rect)return;const{pageWidth:x,pageHeight:H}=this.parent.viewport.rawDims,{width:V,height:Z}=y(this.data.rect);let ct,At;U%180===0?(ct=100*V/x,At=100*Z/H):(ct=100*Z/x,At=100*V/H),d.style.width=`${ct}%`,d.style.height=`${At}%`,d.setAttribute("data-main-rotation",(360-U)%360)}get _commonActions(){const U=(d,x,H)=>{const V=H.detail[d],Z=V[0],ct=V.slice(1);H.target.style[x]=a.ColorConverters[`${Z}_HTML`](ct),this.annotationStorage.setValue(this.data.id,{[x]:a.ColorConverters[`${Z}_rgb`](ct)})};return(0,s.shadow)(this,"_commonActions",{display:d=>{const{display:x}=d.detail,H=x%2===1;this.container.style.visibility=H?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:H,noPrint:x===1||x===2})},print:d=>{this.annotationStorage.setValue(this.data.id,{noPrint:!d.detail.print})},hidden:d=>{const{hidden:x}=d.detail;this.container.style.visibility=x?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:x,noView:x})},focus:d=>{setTimeout(()=>d.target.focus({preventScroll:!1}),0)},userName:d=>{d.target.title=d.detail.userName},readonly:d=>{d.target.disabled=d.detail.readonly},required:d=>{this._setRequired(d.target,d.detail.required)},bgColor:d=>{U("bgColor","backgroundColor",d)},fillColor:d=>{U("fillColor","backgroundColor",d)},fgColor:d=>{U("fgColor","color",d)},textColor:d=>{U("textColor","color",d)},borderColor:d=>{U("borderColor","borderColor",d)},strokeColor:d=>{U("strokeColor","borderColor",d)},rotation:d=>{const x=d.detail.rotation;this.setRotation(x),this.annotationStorage.setValue(this.data.id,{rotation:x})}})}_dispatchEventFromSandbox(U,d){var H;const x=this._commonActions;for(const V of Object.keys(d.detail))(H=U[V]||x[V])==null||H(d)}_setDefaultPropertiesFromJS(U){if(!this.enableScripting)return;const d=this.annotationStorage.getRawValue(this.data.id);if(!d)return;const x=this._commonActions;for(const[H,V]of Object.entries(d)){const Z=x[H];if(Z){const ct={detail:{[H]:V},target:U};Z(ct),delete d[H]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:U}=this.data;if(!U)return;const[d,x,H,V]=this.data.rect;if(U.length===1){const[,{x:Yt,y:Jt},{x:Zt,y:se}]=U[0];if(H===Yt&&V===Jt&&d===Zt&&x===se)return}const{style:Z}=this.container;let ct;if(l(this,T)){const{borderColor:Yt,borderWidth:Jt}=Z;Z.borderWidth=0,ct=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Yt}" stroke-width="${Jt}">`],this.container.classList.add("hasBorder")}const At=H-d,vt=V-x,{svgFactory:Rt}=this,Wt=Rt.createElement("svg");Wt.classList.add("quadrilateralsContainer"),Wt.setAttribute("width",0),Wt.setAttribute("height",0);const Mt=Rt.createElement("defs");Wt.append(Mt);const kt=Rt.createElement("clipPath"),Ut=`clippath_${this.data.id}`;kt.setAttribute("id",Ut),kt.setAttribute("clipPathUnits","objectBoundingBox"),Mt.append(kt);for(const[,{x:Yt,y:Jt},{x:Zt,y:se}]of U){const re=Rt.createElement("rect"),ae=(Zt-d)/At,Te=(V-Jt)/vt,le=(Yt-Zt)/At,_n=(Jt-se)/vt;re.setAttribute("x",ae),re.setAttribute("y",Te),re.setAttribute("width",le),re.setAttribute("height",_n),kt.append(re),ct==null||ct.push(`<rect vector-effect="non-scaling-stroke" x="${ae}" y="${Te}" width="${le}" height="${_n}"/>`)}l(this,T)&&(ct.push("</g></svg>')"),Z.backgroundImage=ct.join("")),this.container.append(Wt),this.container.style.clipPath=`url(#${Ut})`}_createPopup(){const{container:U,data:d}=this;U.setAttribute("aria-haspopup","dialog");const x=new N({data:{color:d.color,titleObj:d.titleObj,modificationDate:d.modificationDate,contentsObj:d.contentsObj,richText:d.richText,parentRect:d.rect,borderStyle:0,id:`popup_${d.id}`,rotation:d.rotation},parent:this.parent,elements:[this]});this.parent.div.append(x.render())}render(){(0,s.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(U,d=null){const x=[];if(this._fieldObjects){const H=this._fieldObjects[U];if(H)for(const{page:V,id:Z,exportValues:ct}of H){if(V===-1||Z===d)continue;const At=typeof ct=="string"?ct:null,vt=document.querySelector(`[data-element-id="${Z}"]`);if(vt&&!A.has(vt)){(0,s.warn)(`_getElementsByName - element not allowed: ${Z}`);continue}x.push({id:Z,exportValue:At,domElement:vt})}return x}for(const H of document.getElementsByName(U)){const{exportValue:V}=H,Z=H.getAttribute("data-element-id");Z!==d&&A.has(H)&&x.push({id:Z,exportValue:V,domElement:H})}return x}show(){var U;this.container&&(this.container.hidden=!1),(U=this.popup)==null||U.maybeShow()}hide(){var U;this.container&&(this.container.hidden=!0),(U=this.popup)==null||U.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const U=this.getElementsToTriggerPopup();if(Array.isArray(U))for(const d of U)d.classList.add("highlightArea");else U.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:U,data:{id:d}}=this;this.container.addEventListener("dblclick",()=>{var x;(x=this.linkService.eventBus)==null||x.dispatch("switchannotationeditormode",{source:this,mode:U,editId:d})})}};T=new WeakMap;let D=p;class b extends D{constructor(d,x=null){super(d,{isRenderable:!0,ignoreBorder:!!(x!=null&&x.ignoreBorder),createQuadrilaterals:!0});j(this,_);j(this,k);this.isTooltipOnly=d.data.isTooltipOnly}render(){const{data:d,linkService:x}=this,H=document.createElement("a");H.setAttribute("data-element-id",d.id);let V=!1;return d.url?(x.addLinkAttributes(H,d.url,d.newWindow),V=!0):d.action?(this._bindNamedAction(H,d.action),V=!0):d.attachment?(this._bindAttachment(H,d.attachment),V=!0):d.setOCGState?(K(this,k,wn).call(this,H,d.setOCGState),V=!0):d.dest?(this._bindLink(H,d.dest),V=!0):(d.actions&&(d.actions.Action||d.actions["Mouse Up"]||d.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(H,d),V=!0),d.resetForm?(this._bindResetFormAction(H,d.resetForm),V=!0):this.isTooltipOnly&&!V&&(this._bindLink(H,""),V=!0)),this.container.classList.add("linkAnnotation"),V&&this.container.append(H),this.container}_bindLink(d,x){d.href=this.linkService.getDestinationHash(x),d.onclick=()=>(x&&this.linkService.goToDestination(x),!1),(x||x==="")&&K(this,_,ce).call(this)}_bindNamedAction(d,x){d.href=this.linkService.getAnchorUrl(""),d.onclick=()=>(this.linkService.executeNamedAction(x),!1),K(this,_,ce).call(this)}_bindAttachment(d,x){d.href=this.linkService.getAnchorUrl(""),d.onclick=()=>{var H;return(H=this.downloadManager)==null||H.openOrDownloadData(this.container,x.content,x.filename),!1},K(this,_,ce).call(this)}_bindJSAction(d,x){d.href=this.linkService.getAnchorUrl("");const H=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const V of Object.keys(x.actions)){const Z=H.get(V);Z&&(d[Z]=()=>{var ct;return(ct=this.linkService.eventBus)==null||ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:x.id,name:V}}),!1})}d.onclick||(d.onclick=()=>!1),K(this,_,ce).call(this)}_bindResetFormAction(d,x){const H=d.onclick;if(H||(d.href=this.linkService.getAnchorUrl("")),K(this,_,ce).call(this),!this._fieldObjects){(0,s.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),H||(d.onclick=()=>!1);return}d.onclick=()=>{var Wt;H==null||H();const{fields:V,refs:Z,include:ct}=x,At=[];if(V.length!==0||Z.length!==0){const Mt=new Set(Z);for(const kt of V){const Ut=this._fieldObjects[kt]||[];for(const{id:Yt}of Ut)Mt.add(Yt)}for(const kt of Object.values(this._fieldObjects))for(const Ut of kt)Mt.has(Ut.id)===ct&&At.push(Ut)}else for(const Mt of Object.values(this._fieldObjects))At.push(...Mt);const vt=this.annotationStorage,Rt=[];for(const Mt of At){const{id:kt}=Mt;switch(Rt.push(kt),Mt.type){case"text":{const Yt=Mt.defaultValue||"";vt.setValue(kt,{value:Yt});break}case"checkbox":case"radiobutton":{const Yt=Mt.defaultValue===Mt.exportValues;vt.setValue(kt,{value:Yt});break}case"combobox":case"listbox":{const Yt=Mt.defaultValue||"";vt.setValue(kt,{value:Yt});break}default:continue}const Ut=document.querySelector(`[data-element-id="${kt}"]`);if(Ut){if(!A.has(Ut)){(0,s.warn)(`_bindResetFormAction - element not allowed: ${kt}`);continue}}else continue;Ut.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Wt=this.linkService.eventBus)==null||Wt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Rt,name:"ResetForm"}})),!1}}}_=new WeakSet,ce=function(){this.container.setAttribute("data-internal-link","")},k=new WeakSet,wn=function(d,x){d.href=this.linkService.getAnchorUrl(""),d.onclick=()=>(this.linkService.executeSetOCGState(x),!1),K(this,_,ce).call(this)};class S extends D{constructor(U){super(U,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const U=document.createElement("img");return U.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",U.alt="[{{type}} Annotation]",U.dataset.l10nId="text_annotation_type",U.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(U),this.container}}class O extends D{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(U){var d;this.data.hasOwnCanvas&&(((d=U.previousSibling)==null?void 0:d.nodeName)==="CANVAS"&&(U.previousSibling.hidden=!0),U.hidden=!1)}_getKeyModifier(U){const{isWin:d,isMac:x}=s.FeatureTest.platform;return d&&U.ctrlKey||x&&U.metaKey}_setEventListener(U,d,x,H,V){x.includes("mouse")?U.addEventListener(x,Z=>{var ct;(ct=this.linkService.eventBus)==null||ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:H,value:V(Z),shift:Z.shiftKey,modifier:this._getKeyModifier(Z)}})}):U.addEventListener(x,Z=>{var ct;if(x==="blur"){if(!d.focused||!Z.relatedTarget)return;d.focused=!1}else if(x==="focus"){if(d.focused)return;d.focused=!0}V&&((ct=this.linkService.eventBus)==null||ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:H,value:V(Z)}}))})}_setEventListeners(U,d,x,H){var V,Z,ct;for(const[At,vt]of x)(vt==="Action"||(V=this.data.actions)!=null&&V[vt])&&((vt==="Focus"||vt==="Blur")&&(d||(d={focused:!1})),this._setEventListener(U,d,At,vt,H),vt==="Focus"&&!((Z=this.data.actions)!=null&&Z.Blur)?this._setEventListener(U,d,"blur","Blur",null):vt==="Blur"&&!((ct=this.data.actions)!=null&&ct.Focus)&&this._setEventListener(U,d,"focus","Focus",null))}_setBackgroundColor(U){const d=this.data.backgroundColor||null;U.style.backgroundColor=d===null?"transparent":s.Util.makeHexColor(d[0],d[1],d[2])}_setTextStyle(U){const d=["left","center","right"],{fontColor:x}=this.data.defaultAppearanceData,H=this.data.defaultAppearanceData.fontSize||h,V=U.style;let Z;const ct=2,At=vt=>Math.round(10*vt)/10;if(this.data.multiLine){const vt=Math.abs(this.data.rect[3]-this.data.rect[1]-ct),Rt=Math.round(vt/(s.LINE_FACTOR*H))||1,Wt=vt/Rt;Z=Math.min(H,At(Wt/s.LINE_FACTOR))}else{const vt=Math.abs(this.data.rect[3]-this.data.rect[1]-ct);Z=Math.min(H,At(vt/s.LINE_FACTOR))}V.fontSize=`calc(${Z}px * var(--scale-factor))`,V.color=s.Util.makeHexColor(x[0],x[1],x[2]),this.data.textAlignment!==null&&(V.textAlign=d[this.data.textAlignment])}_setRequired(U,d){d?U.setAttribute("required",!0):U.removeAttribute("required"),U.setAttribute("aria-required",d)}}class v extends O{constructor(U){const d=U.renderForms||!U.data.hasAppearance&&!!U.data.fieldValue;super(U,{isRenderable:d})}setPropertyOnSiblings(U,d,x,H){const V=this.annotationStorage;for(const Z of this._getElementsByName(U.name,U.id))Z.domElement&&(Z.domElement[d]=x),V.setValue(Z.id,{[H]:x})}render(){var H,V;const U=this.annotationStorage,d=this.data.id;this.container.classList.add("textWidgetAnnotation");let x=null;if(this.renderForms){const Z=U.getValue(d,{value:this.data.fieldValue});let ct=Z.value||"";const At=U.getValue(d,{charLimit:this.data.maxLen}).charLimit;At&&ct.length>At&&(ct=ct.slice(0,At));let vt=Z.formattedValue||((H=this.data.textContent)==null?void 0:H.join(`
`))||null;vt&&this.data.comb&&(vt=vt.replaceAll(/\s+/g,""));const Rt={userValue:ct,formattedValue:vt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(x=document.createElement("textarea"),x.textContent=vt??ct,this.data.doNotScroll&&(x.style.overflowY="hidden")):(x=document.createElement("input"),x.type="text",x.setAttribute("value",vt??ct),this.data.doNotScroll&&(x.style.overflowX="hidden")),this.data.hasOwnCanvas&&(x.hidden=!0),A.add(x),x.setAttribute("data-element-id",d),x.disabled=this.data.readOnly,x.name=this.data.fieldName,x.tabIndex=m,this._setRequired(x,this.data.required),At&&(x.maxLength=At),x.addEventListener("input",Mt=>{U.setValue(d,{value:Mt.target.value}),this.setPropertyOnSiblings(x,"value",Mt.target.value,"value"),Rt.formattedValue=null}),x.addEventListener("resetform",Mt=>{const kt=this.data.defaultFieldValue??"";x.value=Rt.userValue=kt,Rt.formattedValue=null});let Wt=Mt=>{const{formattedValue:kt}=Rt;kt!=null&&(Mt.target.value=kt),Mt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){x.addEventListener("focus",kt=>{if(Rt.focused)return;const{target:Ut}=kt;Rt.userValue&&(Ut.value=Rt.userValue),Rt.lastCommittedValue=Ut.value,Rt.commitKey=1,Rt.focused=!0}),x.addEventListener("updatefromsandbox",kt=>{this.showElementAndHideCanvas(kt.target);const Ut={value(Yt){Rt.userValue=Yt.detail.value??"",U.setValue(d,{value:Rt.userValue.toString()}),Yt.target.value=Rt.userValue},formattedValue(Yt){const{formattedValue:Jt}=Yt.detail;Rt.formattedValue=Jt,Jt!=null&&Yt.target!==document.activeElement&&(Yt.target.value=Jt),U.setValue(d,{formattedValue:Jt})},selRange(Yt){Yt.target.setSelectionRange(...Yt.detail.selRange)},charLimit:Yt=>{var re;const{charLimit:Jt}=Yt.detail,{target:Zt}=Yt;if(Jt===0){Zt.removeAttribute("maxLength");return}Zt.setAttribute("maxLength",Jt);let se=Rt.userValue;!se||se.length<=Jt||(se=se.slice(0,Jt),Zt.value=Rt.userValue=se,U.setValue(d,{value:se}),(re=this.linkService.eventBus)==null||re.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d,name:"Keystroke",value:se,willCommit:!0,commitKey:1,selStart:Zt.selectionStart,selEnd:Zt.selectionEnd}}))}};this._dispatchEventFromSandbox(Ut,kt)}),x.addEventListener("keydown",kt=>{var Jt;Rt.commitKey=1;let Ut=-1;if(kt.key==="Escape"?Ut=0:kt.key==="Enter"&&!this.data.multiLine?Ut=2:kt.key==="Tab"&&(Rt.commitKey=3),Ut===-1)return;const{value:Yt}=kt.target;Rt.lastCommittedValue!==Yt&&(Rt.lastCommittedValue=Yt,Rt.userValue=Yt,(Jt=this.linkService.eventBus)==null||Jt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d,name:"Keystroke",value:Yt,willCommit:!0,commitKey:Ut,selStart:kt.target.selectionStart,selEnd:kt.target.selectionEnd}}))});const Mt=Wt;Wt=null,x.addEventListener("blur",kt=>{var Yt;if(!Rt.focused||!kt.relatedTarget)return;Rt.focused=!1;const{value:Ut}=kt.target;Rt.userValue=Ut,Rt.lastCommittedValue!==Ut&&((Yt=this.linkService.eventBus)==null||Yt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d,name:"Keystroke",value:Ut,willCommit:!0,commitKey:Rt.commitKey,selStart:kt.target.selectionStart,selEnd:kt.target.selectionEnd}})),Mt(kt)}),(V=this.data.actions)!=null&&V.Keystroke&&x.addEventListener("beforeinput",kt=>{var Te;Rt.lastCommittedValue=null;const{data:Ut,target:Yt}=kt,{value:Jt,selectionStart:Zt,selectionEnd:se}=Yt;let re=Zt,ae=se;switch(kt.inputType){case"deleteWordBackward":{const le=Jt.substring(0,Zt).match(/\w*[^\w]*$/);le&&(re-=le[0].length);break}case"deleteWordForward":{const le=Jt.substring(Zt).match(/^[^\w]*\w*/);le&&(ae+=le[0].length);break}case"deleteContentBackward":Zt===se&&(re-=1);break;case"deleteContentForward":Zt===se&&(ae+=1);break}kt.preventDefault(),(Te=this.linkService.eventBus)==null||Te.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d,name:"Keystroke",value:Jt,change:Ut||"",willCommit:!1,selStart:re,selEnd:ae}})}),this._setEventListeners(x,Rt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],kt=>kt.target.value)}if(Wt&&x.addEventListener("blur",Wt),this.data.comb){const Mt=(this.data.rect[2]-this.data.rect[0])/At;x.classList.add("comb"),x.style.letterSpacing=`calc(${Mt}px * var(--scale-factor) - 1ch)`}}else x=document.createElement("div"),x.textContent=this.data.fieldValue,x.style.verticalAlign="middle",x.style.display="table-cell";return this._setTextStyle(x),this._setBackgroundColor(x),this._setDefaultPropertiesFromJS(x),this.container.append(x),this.container}}class M extends O{constructor(U){super(U,{isRenderable:!!U.data.hasOwnCanvas})}}class R extends O{constructor(U){super(U,{isRenderable:U.renderForms})}render(){const U=this.annotationStorage,d=this.data,x=d.id;let H=U.getValue(x,{value:d.exportValue===d.fieldValue}).value;typeof H=="string"&&(H=H!=="Off",U.setValue(x,{value:H})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const V=document.createElement("input");return A.add(V),V.setAttribute("data-element-id",x),V.disabled=d.readOnly,this._setRequired(V,this.data.required),V.type="checkbox",V.name=d.fieldName,H&&V.setAttribute("checked",!0),V.setAttribute("exportValue",d.exportValue),V.tabIndex=m,V.addEventListener("change",Z=>{const{name:ct,checked:At}=Z.target;for(const vt of this._getElementsByName(ct,x)){const Rt=At&&vt.exportValue===d.exportValue;vt.domElement&&(vt.domElement.checked=Rt),U.setValue(vt.id,{value:Rt})}U.setValue(x,{value:At})}),V.addEventListener("resetform",Z=>{const ct=d.defaultFieldValue||"Off";Z.target.checked=ct===d.exportValue}),this.enableScripting&&this.hasJSActions&&(V.addEventListener("updatefromsandbox",Z=>{const ct={value(At){At.target.checked=At.detail.value!=="Off",U.setValue(x,{value:At.target.checked})}};this._dispatchEventFromSandbox(ct,Z)}),this._setEventListeners(V,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Z=>Z.target.checked)),this._setBackgroundColor(V),this._setDefaultPropertiesFromJS(V),this.container.append(V),this.container}}class g extends O{constructor(U){super(U,{isRenderable:U.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const U=this.annotationStorage,d=this.data,x=d.id;let H=U.getValue(x,{value:d.fieldValue===d.buttonValue}).value;typeof H=="string"&&(H=H!==d.buttonValue,U.setValue(x,{value:H}));const V=document.createElement("input");if(A.add(V),V.setAttribute("data-element-id",x),V.disabled=d.readOnly,this._setRequired(V,this.data.required),V.type="radio",V.name=d.fieldName,H&&V.setAttribute("checked",!0),V.tabIndex=m,V.addEventListener("change",Z=>{const{name:ct,checked:At}=Z.target;for(const vt of this._getElementsByName(ct,x))U.setValue(vt.id,{value:!1});U.setValue(x,{value:At})}),V.addEventListener("resetform",Z=>{const ct=d.defaultFieldValue;Z.target.checked=ct!=null&&ct===d.buttonValue}),this.enableScripting&&this.hasJSActions){const Z=d.buttonValue;V.addEventListener("updatefromsandbox",ct=>{const At={value:vt=>{const Rt=Z===vt.detail.value;for(const Wt of this._getElementsByName(vt.target.name)){const Mt=Rt&&Wt.id===x;Wt.domElement&&(Wt.domElement.checked=Mt),U.setValue(Wt.id,{value:Mt})}}};this._dispatchEventFromSandbox(At,ct)}),this._setEventListeners(V,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ct=>ct.target.checked)}return this._setBackgroundColor(V),this._setDefaultPropertiesFromJS(V),this.container.append(V),this.container}}class f extends b{constructor(U){super(U,{ignoreBorder:U.data.hasAppearance})}render(){const U=super.render();U.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(U.title=this.data.alternativeText);const d=U.lastChild;return this.enableScripting&&this.hasJSActions&&d&&(this._setDefaultPropertiesFromJS(d),d.addEventListener("updatefromsandbox",x=>{this._dispatchEventFromSandbox({},x)})),U}}class L extends O{constructor(U){super(U,{isRenderable:U.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const U=this.annotationStorage,d=this.data.id,x=U.getValue(d,{value:this.data.fieldValue}),H=document.createElement("select");A.add(H),H.setAttribute("data-element-id",d),H.disabled=this.data.readOnly,this._setRequired(H,this.data.required),H.name=this.data.fieldName,H.tabIndex=m;let V=this.data.combo&&this.data.options.length>0;this.data.combo||(H.size=this.data.options.length,this.data.multiSelect&&(H.multiple=!0)),H.addEventListener("resetform",Rt=>{const Wt=this.data.defaultFieldValue;for(const Mt of H.options)Mt.selected=Mt.value===Wt});for(const Rt of this.data.options){const Wt=document.createElement("option");Wt.textContent=Rt.displayValue,Wt.value=Rt.exportValue,x.value.includes(Rt.exportValue)&&(Wt.setAttribute("selected",!0),V=!1),H.append(Wt)}let Z=null;if(V){const Rt=document.createElement("option");Rt.value=" ",Rt.setAttribute("hidden",!0),Rt.setAttribute("selected",!0),H.prepend(Rt),Z=()=>{Rt.remove(),H.removeEventListener("input",Z),Z=null},H.addEventListener("input",Z)}const ct=Rt=>{const Wt=Rt?"value":"textContent",{options:Mt,multiple:kt}=H;return kt?Array.prototype.filter.call(Mt,Ut=>Ut.selected).map(Ut=>Ut[Wt]):Mt.selectedIndex===-1?null:Mt[Mt.selectedIndex][Wt]};let At=ct(!1);const vt=Rt=>{const Wt=Rt.target.options;return Array.prototype.map.call(Wt,Mt=>({displayValue:Mt.textContent,exportValue:Mt.value}))};return this.enableScripting&&this.hasJSActions?(H.addEventListener("updatefromsandbox",Rt=>{const Wt={value(Mt){Z==null||Z();const kt=Mt.detail.value,Ut=new Set(Array.isArray(kt)?kt:[kt]);for(const Yt of H.options)Yt.selected=Ut.has(Yt.value);U.setValue(d,{value:ct(!0)}),At=ct(!1)},multipleSelection(Mt){H.multiple=!0},remove(Mt){const kt=H.options,Ut=Mt.detail.remove;kt[Ut].selected=!1,H.remove(Ut),kt.length>0&&Array.prototype.findIndex.call(kt,Yt=>Yt.selected)===-1&&(kt[0].selected=!0),U.setValue(d,{value:ct(!0),items:vt(Mt)}),At=ct(!1)},clear(Mt){for(;H.length!==0;)H.remove(0);U.setValue(d,{value:null,items:[]}),At=ct(!1)},insert(Mt){const{index:kt,displayValue:Ut,exportValue:Yt}=Mt.detail.insert,Jt=H.children[kt],Zt=document.createElement("option");Zt.textContent=Ut,Zt.value=Yt,Jt?Jt.before(Zt):H.append(Zt),U.setValue(d,{value:ct(!0),items:vt(Mt)}),At=ct(!1)},items(Mt){const{items:kt}=Mt.detail;for(;H.length!==0;)H.remove(0);for(const Ut of kt){const{displayValue:Yt,exportValue:Jt}=Ut,Zt=document.createElement("option");Zt.textContent=Yt,Zt.value=Jt,H.append(Zt)}H.options.length>0&&(H.options[0].selected=!0),U.setValue(d,{value:ct(!0),items:vt(Mt)}),At=ct(!1)},indices(Mt){const kt=new Set(Mt.detail.indices);for(const Ut of Mt.target.options)Ut.selected=kt.has(Ut.index);U.setValue(d,{value:ct(!0)}),At=ct(!1)},editable(Mt){Mt.target.disabled=!Mt.detail.editable}};this._dispatchEventFromSandbox(Wt,Rt)}),H.addEventListener("input",Rt=>{var Mt;const Wt=ct(!0);U.setValue(d,{value:Wt}),Rt.preventDefault(),(Mt=this.linkService.eventBus)==null||Mt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d,name:"Keystroke",value:At,changeEx:Wt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(H,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Rt=>Rt.target.value)):H.addEventListener("input",function(Rt){U.setValue(d,{value:ct(!0)})}),this.data.combo&&this._setTextStyle(H),this._setBackgroundColor(H),this._setDefaultPropertiesFromJS(H),this.container.append(H),this.container}}class N extends D{constructor(U){const{data:d,elements:x}=U;super(U,{isRenderable:D._hasPopupData(d)}),this.elements=x}render(){this.container.classList.add("popupAnnotation");const U=new E({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),d=[];for(const x of this.elements)x.popup=U,d.push(x.data.id),x.addHighlightArea();return this.container.setAttribute("aria-controls",d.map(x=>`${s.AnnotationPrefix}${x}`).join(",")),this.container}}class E{constructor({container:U,color:d,elements:x,titleObj:H,modificationDate:V,contentsObj:Z,richText:ct,parent:At,rect:vt,parentRect:Rt,open:Wt}){j(this,Ht);j(this,$t);j(this,qt);j(this,Vt);j(this,X,null);j(this,nt,K(this,Ht,Fn).bind(this));j(this,Q,K(this,Vt,cn).bind(this));j(this,lt,K(this,qt,ln).bind(this));j(this,pt,K(this,$t,Pe).bind(this));j(this,Ct,null);j(this,mt,null);j(this,Pt,null);j(this,Dt,null);j(this,xt,null);j(this,Bt,null);j(this,ft,!1);j(this,at,null);j(this,st,null);j(this,Tt,null);j(this,Nt,null);j(this,yt,!1);var kt;it(this,mt,U),it(this,Nt,H),it(this,Pt,Z),it(this,Tt,ct),it(this,xt,At),it(this,Ct,d),it(this,st,vt),it(this,Bt,Rt),it(this,Dt,x);const Mt=r.PDFDateString.toDateObject(V);Mt&&it(this,X,At.l10n.get("annotation_date_string",{date:Mt.toLocaleDateString(),time:Mt.toLocaleTimeString()})),this.trigger=x.flatMap(Ut=>Ut.getElementsToTriggerPopup());for(const Ut of this.trigger)Ut.addEventListener("click",l(this,pt)),Ut.addEventListener("mouseenter",l(this,lt)),Ut.addEventListener("mouseleave",l(this,Q)),Ut.classList.add("popupTriggerArea");for(const Ut of x)(kt=Ut.container)==null||kt.addEventListener("keydown",l(this,nt));l(this,mt).hidden=!0,Wt&&K(this,$t,Pe).call(this)}render(){if(l(this,at))return;const{page:{view:U},viewport:{rawDims:{pageWidth:d,pageHeight:x,pageX:H,pageY:V}}}=l(this,xt),Z=it(this,at,document.createElement("div"));if(Z.className="popup",l(this,Ct)){const se=Z.style.outlineColor=s.Util.makeHexColor(...l(this,Ct));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Z.style.backgroundColor=`color-mix(in srgb, ${se} 30%, white)`:Z.style.backgroundColor=s.Util.makeHexColor(...l(this,Ct).map(re=>Math.floor(.7*(255-re)+re)))}const ct=document.createElement("span");ct.className="header";const At=document.createElement("h1");if(ct.append(At),{dir:At.dir,str:At.textContent}=l(this,Nt),Z.append(ct),l(this,X)){const se=document.createElement("span");se.classList.add("popupDate"),l(this,X).then(re=>{se.textContent=re}),ct.append(se)}const vt=l(this,Pt),Rt=l(this,Tt);if(Rt!=null&&Rt.str&&(!(vt!=null&&vt.str)||vt.str===Rt.str))o.XfaLayer.render({xfaHtml:Rt.html,intent:"richText",div:Z}),Z.lastChild.classList.add("richText","popupContent");else{const se=this._formatContents(vt);Z.append(se)}let Wt=!!l(this,Bt),Mt=Wt?l(this,Bt):l(this,st);for(const se of l(this,Dt))if(!Mt||s.Util.intersect(se.data.rect,Mt)!==null){Mt=se.data.rect,Wt=!0;break}const kt=s.Util.normalizeRect([Mt[0],U[3]-Mt[1]+U[1],Mt[2],U[3]-Mt[3]+U[1]]),Ut=Wt?Mt[2]-Mt[0]+5:0,Yt=kt[0]+Ut,Jt=kt[1],{style:Zt}=l(this,mt);Zt.left=`${100*(Yt-H)/d}%`,Zt.top=`${100*(Jt-V)/x}%`,l(this,mt).append(Z)}_formatContents({str:U,dir:d}){const x=document.createElement("p");x.classList.add("popupContent"),x.dir=d;const H=U.split(/(?:\r\n?|\n)/);for(let V=0,Z=H.length;V<Z;++V){const ct=H[V];x.append(document.createTextNode(ct)),V<Z-1&&x.append(document.createElement("br"))}return x}forceHide(){it(this,yt,this.isVisible),l(this,yt)&&(l(this,mt).hidden=!0)}maybeShow(){l(this,yt)&&(it(this,yt,!1),l(this,mt).hidden=!1)}get isVisible(){return l(this,mt).hidden===!1}}X=new WeakMap,nt=new WeakMap,Q=new WeakMap,lt=new WeakMap,pt=new WeakMap,Ct=new WeakMap,mt=new WeakMap,Pt=new WeakMap,Dt=new WeakMap,xt=new WeakMap,Bt=new WeakMap,ft=new WeakMap,at=new WeakMap,st=new WeakMap,Tt=new WeakMap,Nt=new WeakMap,yt=new WeakMap,Ht=new WeakSet,Fn=function(U){U.altKey||U.shiftKey||U.ctrlKey||U.metaKey||(U.key==="Enter"||U.key==="Escape"&&l(this,ft))&&K(this,$t,Pe).call(this)},$t=new WeakSet,Pe=function(){it(this,ft,!l(this,ft)),l(this,ft)?(K(this,qt,ln).call(this),l(this,mt).addEventListener("click",l(this,pt)),l(this,mt).addEventListener("keydown",l(this,nt))):(K(this,Vt,cn).call(this),l(this,mt).removeEventListener("click",l(this,pt)),l(this,mt).removeEventListener("keydown",l(this,nt)))},qt=new WeakSet,ln=function(){l(this,at)||this.render(),this.isVisible?l(this,ft)&&l(this,mt).classList.add("focused"):(l(this,mt).hidden=!1,l(this,mt).style.zIndex=parseInt(l(this,mt).style.zIndex)+1e3)},Vt=new WeakSet,cn=function(){l(this,mt).classList.remove("focused"),!(l(this,ft)||!this.isVisible)&&(l(this,mt).hidden=!0,l(this,mt).style.zIndex=parseInt(l(this,mt).style.zIndex)-1e3)};class F extends D{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0}),this.textContent=U.data.textContent,this.textPosition=U.data.textPosition,this.annotationEditorType=s.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const U=document.createElement("div");U.classList.add("annotationTextContent"),U.setAttribute("role","comment");for(const d of this.textContent){const x=document.createElement("span");x.textContent=d,U.append(x)}this.container.append(U)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=F;class P extends D{constructor(d){super(d,{isRenderable:!0,ignoreBorder:!0});j(this,rt,null)}render(){this.container.classList.add("lineAnnotation");const d=this.data,{width:x,height:H}=y(d.rect),V=this.svgFactory.create(x,H,!0),Z=it(this,rt,this.svgFactory.createElement("svg:line"));return Z.setAttribute("x1",d.rect[2]-d.lineCoordinates[0]),Z.setAttribute("y1",d.rect[3]-d.lineCoordinates[1]),Z.setAttribute("x2",d.rect[2]-d.lineCoordinates[2]),Z.setAttribute("y2",d.rect[3]-d.lineCoordinates[3]),Z.setAttribute("stroke-width",d.borderStyle.width||1),Z.setAttribute("stroke","transparent"),Z.setAttribute("fill","transparent"),V.append(Z),this.container.append(V),!d.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,rt)}addHighlightArea(){this.container.classList.add("highlightArea")}}rt=new WeakMap;class W extends D{constructor(d){super(d,{isRenderable:!0,ignoreBorder:!0});j(this,J,null)}render(){this.container.classList.add("squareAnnotation");const d=this.data,{width:x,height:H}=y(d.rect),V=this.svgFactory.create(x,H,!0),Z=d.borderStyle.width,ct=it(this,J,this.svgFactory.createElement("svg:rect"));return ct.setAttribute("x",Z/2),ct.setAttribute("y",Z/2),ct.setAttribute("width",x-Z),ct.setAttribute("height",H-Z),ct.setAttribute("stroke-width",Z||1),ct.setAttribute("stroke","transparent"),ct.setAttribute("fill","transparent"),V.append(ct),this.container.append(V),!d.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,J)}addHighlightArea(){this.container.classList.add("highlightArea")}}J=new WeakMap;class z extends D{constructor(d){super(d,{isRenderable:!0,ignoreBorder:!0});j(this,_t,null)}render(){this.container.classList.add("circleAnnotation");const d=this.data,{width:x,height:H}=y(d.rect),V=this.svgFactory.create(x,H,!0),Z=d.borderStyle.width,ct=it(this,_t,this.svgFactory.createElement("svg:ellipse"));return ct.setAttribute("cx",x/2),ct.setAttribute("cy",H/2),ct.setAttribute("rx",x/2-Z/2),ct.setAttribute("ry",H/2-Z/2),ct.setAttribute("stroke-width",Z||1),ct.setAttribute("stroke","transparent"),ct.setAttribute("fill","transparent"),V.append(ct),this.container.append(V),!d.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,_t)}addHighlightArea(){this.container.classList.add("highlightArea")}}_t=new WeakMap;class w extends D{constructor(d){super(d,{isRenderable:!0,ignoreBorder:!0});j(this,It,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const d=this.data,{width:x,height:H}=y(d.rect),V=this.svgFactory.create(x,H,!0);let Z=[];for(const At of d.vertices){const vt=At.x-d.rect[0],Rt=d.rect[3]-At.y;Z.push(vt+","+Rt)}Z=Z.join(" ");const ct=it(this,It,this.svgFactory.createElement(this.svgElementName));return ct.setAttribute("points",Z),ct.setAttribute("stroke-width",d.borderStyle.width||1),ct.setAttribute("stroke","transparent"),ct.setAttribute("fill","transparent"),V.append(ct),this.container.append(V),!d.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,It)}addHighlightArea(){this.container.classList.add("highlightArea")}}It=new WeakMap;class Y extends w{constructor(U){super(U),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ot extends D{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class et extends D{constructor(d){super(d,{isRenderable:!0,ignoreBorder:!0});j(this,ee,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=s.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const d=this.data,{width:x,height:H}=y(d.rect),V=this.svgFactory.create(x,H,!0);for(const Z of d.inkLists){let ct=[];for(const vt of Z){const Rt=vt.x-d.rect[0],Wt=d.rect[3]-vt.y;ct.push(`${Rt},${Wt}`)}ct=ct.join(" ");const At=this.svgFactory.createElement(this.svgElementName);l(this,ee).push(At),At.setAttribute("points",ct),At.setAttribute("stroke-width",d.borderStyle.width||1),At.setAttribute("stroke","transparent"),At.setAttribute("fill","transparent"),!d.popupRef&&this.hasPopupData&&this._createPopup(),V.append(At)}return this.container.append(V),this.container}getElementsToTriggerPopup(){return l(this,ee)}addHighlightArea(){this.container.classList.add("highlightArea")}}ee=new WeakMap,e.InkAnnotationElement=et;class q extends D{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class ht extends D{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class dt extends D{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Et extends D{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class gt extends D{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=gt;class G extends D{constructor(d){var V;super(d,{isRenderable:!0});j(this,tt);j(this,te,null);const{filename:x,content:H}=this.data.file;this.filename=(0,r.getFilenameFromUrl)(x,!0),this.content=H,(V=this.linkService.eventBus)==null||V.dispatch("fileattachmentannotation",{source:this,filename:x,content:H})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:d,data:x}=this;let H;x.hasAppearance||x.fillAlpha===0?H=document.createElement("div"):(H=document.createElement("img"),H.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(x.name)?"paperclip":"pushpin"}.svg`,x.fillAlpha&&x.fillAlpha<1&&(H.style=`filter: opacity(${Math.round(x.fillAlpha*100)}%);`)),H.addEventListener("dblclick",K(this,tt,hn).bind(this)),it(this,te,H);const{isMac:V}=s.FeatureTest.platform;return d.addEventListener("keydown",Z=>{Z.key==="Enter"&&(V?Z.metaKey:Z.ctrlKey)&&K(this,tt,hn).call(this)}),!x.popupRef&&this.hasPopupData?this._createPopup():H.classList.add("popupTriggerArea"),d.append(H),d}getElementsToTriggerPopup(){return l(this,te)}addHighlightArea(){this.container.classList.add("highlightArea")}}te=new WeakMap,tt=new WeakSet,hn=function(){var d;(d=this.downloadManager)==null||d.openOrDownloadData(this.container,this.content,this.filename)};class u{constructor({div:U,accessibilityManager:d,annotationCanvasMap:x,l10n:H,page:V,viewport:Z}){j(this,Gt);j(this,St);j(this,wt,null);j(this,Ot,null);j(this,Ft,new Map);this.div=U,it(this,wt,d),it(this,Ot,x),this.l10n=H,this.page=V,this.viewport=Z,this.zIndex=0,this.l10n||(this.l10n=c.NullL10n)}async render(U){const{annotations:d}=U,x=this.div;(0,r.setLayerDimensions)(x,this.viewport);const H=new Map,V={data:null,layer:x,linkService:U.linkService,downloadManager:U.downloadManager,imageResourcesPath:U.imageResourcesPath||"",renderForms:U.renderForms!==!1,svgFactory:new r.DOMSVGFactory,annotationStorage:U.annotationStorage||new i.AnnotationStorage,enableScripting:U.enableScripting===!0,hasJSActions:U.hasJSActions,fieldObjects:U.fieldObjects,parent:this,elements:null};for(const Z of d){if(Z.noHTML)continue;const ct=Z.annotationType===s.AnnotationType.POPUP;if(ct){const Rt=H.get(Z.id);if(!Rt)continue;V.elements=Rt}else{const{width:Rt,height:Wt}=y(Z.rect);if(Rt<=0||Wt<=0)continue}V.data=Z;const At=C.create(V);if(!At.isRenderable)continue;if(!ct&&Z.popupRef){const Rt=H.get(Z.popupRef);Rt?Rt.push(At):H.set(Z.popupRef,[At])}At.annotationEditorType>0&&l(this,Ft).set(At.data.id,At);const vt=At.render();Z.hidden&&(vt.style.visibility="hidden"),K(this,Gt,Gn).call(this,vt,Z.id)}K(this,St,dn).call(this),await this.l10n.translate(x)}update({viewport:U}){const d=this.div;this.viewport=U,(0,r.setLayerDimensions)(d,{rotation:U.rotation}),K(this,St,dn).call(this),d.hidden=!1}getEditableAnnotations(){return Array.from(l(this,Ft).values())}getEditableAnnotation(U){return l(this,Ft).get(U)}}wt=new WeakMap,Ot=new WeakMap,Ft=new WeakMap,Gt=new WeakSet,Gn=function(U,d){var H;const x=U.firstChild||U;x.id=`${s.AnnotationPrefix}${d}`,this.div.append(U),(H=l(this,wt))==null||H.moveElementInDOM(this.div,U,x,!1)},St=new WeakSet,dn=function(){if(!l(this,Ot))return;const U=this.div;for(const[d,x]of l(this,Ot)){const H=U.querySelector(`[data-annotation-id="${d}"]`);if(!H)continue;const{firstChild:V}=H;V?V.nodeName==="CANVAS"?V.replaceWith(x):V.before(x):H.append(x)}l(this,Ot).clear()},e.AnnotationLayer=u},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function n(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function s(i){return Math.max(0,Math.min(255,255*i))}class r{static CMYK_G([a,c,o,m]){return["G",1-Math.min(1,.3*a+.59*o+.11*c+m)]}static G_CMYK([a]){return["CMYK",0,0,0,1-a]}static G_RGB([a]){return["RGB",a,a,a]}static G_rgb([a]){return a=s(a),[a,a,a]}static G_HTML([a]){const c=n(a);return`#${c}${c}${c}`}static RGB_G([a,c,o]){return["G",.3*a+.59*c+.11*o]}static RGB_rgb(a){return a.map(s)}static RGB_HTML(a){return`#${a.map(n).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([a,c,o,m]){return["RGB",1-Math.min(1,a+m),1-Math.min(1,o+m),1-Math.min(1,c+m)]}static CMYK_rgb([a,c,o,m]){return[s(1-Math.min(1,a+m)),s(1-Math.min(1,o+m)),s(1-Math.min(1,c+m))]}static CMYK_HTML(a){const c=this.CMYK_RGB(a).slice(1);return this.RGB_HTML(c)}static RGB_CMYK([a,c,o]){const m=1-a,h=1-c,A=1-o,y=Math.min(m,h,A);return["CMYK",m,h,A,y]}}e.ColorConverters=r},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=s;const n={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xD7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xD7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing\u2026",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};n.print_progress_percent="{{progress}}%";function s(a,c){switch(a){case"find_match_count":a=`find_match_count[${c.total===1?"one":"other"}]`;break;case"find_match_count_limit":a=`find_match_count_limit[${c.limit===1?"one":"other"}]`;break}return n[a]||""}function r(a,c){return c?a.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(o,m)=>m in c?c[m]:"{{"+m+"}}"):a}const i={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(a,c=null,o=s(a,c)){return r(o,c)},async translate(a){}};e.NullL10n=i},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var s=n(25);class r{static setupStorage(a,c,o,m,h){const A=m.getValue(c,{value:null});switch(o.name){case"textarea":if(A.value!==null&&(a.textContent=A.value),h==="print")break;a.addEventListener("input",y=>{m.setValue(c,{value:y.target.value})});break;case"input":if(o.attributes.type==="radio"||o.attributes.type==="checkbox"){if(A.value===o.attributes.xfaOn?a.setAttribute("checked",!0):A.value===o.attributes.xfaOff&&a.removeAttribute("checked"),h==="print")break;a.addEventListener("change",y=>{m.setValue(c,{value:y.target.checked?y.target.getAttribute("xfaOn"):y.target.getAttribute("xfaOff")})})}else{if(A.value!==null&&a.setAttribute("value",A.value),h==="print")break;a.addEventListener("input",y=>{m.setValue(c,{value:y.target.value})})}break;case"select":if(A.value!==null){a.setAttribute("value",A.value);for(const y of o.children)y.attributes.value===A.value?y.attributes.selected=!0:y.attributes.hasOwnProperty("selected")&&delete y.attributes.selected}a.addEventListener("input",y=>{const C=y.target.options,D=C.selectedIndex===-1?"":C[C.selectedIndex].value;m.setValue(c,{value:D})});break}}static setAttributes({html:a,element:c,storage:o=null,intent:m,linkService:h}){const{attributes:A}=c,y=a instanceof HTMLAnchorElement;A.type==="radio"&&(A.name=`${A.name}-${m}`);for(const[C,D]of Object.entries(A))if(D!=null)switch(C){case"class":D.length&&a.setAttribute(C,D.join(" "));break;case"dataId":break;case"id":a.setAttribute("data-element-id",D);break;case"style":Object.assign(a.style,D);break;case"textContent":a.textContent=D;break;default:(!y||C!=="href"&&C!=="newWindow")&&a.setAttribute(C,D)}y&&h.addLinkAttributes(a,A.href,A.newWindow),o&&A.dataId&&this.setupStorage(a,A.dataId,c,o)}static render(a){var b;const c=a.annotationStorage,o=a.linkService,m=a.xfaHtml,h=a.intent||"display",A=document.createElement(m.name);m.attributes&&this.setAttributes({html:A,element:m,intent:h,linkService:o});const y=[[m,-1,A]],C=a.div;if(C.append(A),a.viewport){const S=`matrix(${a.viewport.transform.join(",")})`;C.style.transform=S}h!=="richText"&&C.setAttribute("class","xfaLayer xfaFont");const D=[];for(;y.length>0;){const[S,O,v]=y.at(-1);if(O+1===S.children.length){y.pop();continue}const M=S.children[++y.at(-1)[1]];if(M===null)continue;const{name:R}=M;if(R==="#text"){const f=document.createTextNode(M.value);D.push(f),v.append(f);continue}const g=(b=M==null?void 0:M.attributes)!=null&&b.xmlns?document.createElementNS(M.attributes.xmlns,R):document.createElement(R);if(v.append(g),M.attributes&&this.setAttributes({html:g,element:M,storage:c,intent:h,linkService:o}),M.children&&M.children.length>0)y.push([M,-1,g]);else if(M.value){const f=document.createTextNode(M.value);s.XfaText.shouldBuildText(R)&&D.push(f),g.append(f)}}for(const S of C.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))S.setAttribute("readOnly",!0);return{textDivs:D}}static update(a){const c=`matrix(${a.viewport.transform.join(",")})`;a.div.style.transform=c,a.div.hidden=!1}}e.XfaLayer=r},(t,e,n)=>{var m,h,A,y,C,D,b,S,O,v,M,R,g,f,L,Bn,E,Un,P,Hn,z,$n,Y,un,et,jn,ht,pn,Et,qn,G,Wn,T,Xn,_,zn,k,Yn,X,oe,Q,mn,pt,Me,mt,xe,Dt,pe,Bt,Tn,at,ke,Tt,Vn,yt,fn,jt,Kn,Xt,Qn,zt,gn,ut,Le,J,me;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var s=n(1),r=n(4),i=n(29),a=n(6),c=n(5);const It=class It extends r.AnnotationEditor{constructor(tt){super({...tt,name:"inkEditor"});j(this,L);j(this,E);j(this,P);j(this,z);j(this,Y);j(this,et);j(this,ht);j(this,Et);j(this,G);j(this,T);j(this,_);j(this,k);j(this,X);j(this,Q);j(this,pt);j(this,mt);j(this,Dt);j(this,Bt);j(this,at);j(this,Xt);j(this,zt);j(this,ut);j(this,J);j(this,m,0);j(this,h,0);j(this,A,this.canvasPointermove.bind(this));j(this,y,this.canvasPointerleave.bind(this));j(this,C,this.canvasPointerup.bind(this));j(this,D,this.canvasPointerdown.bind(this));j(this,b,new Path2D);j(this,S,!1);j(this,O,!1);j(this,v,!1);j(this,M,null);j(this,R,0);j(this,g,0);j(this,f,null);this.color=tt.color||null,this.thickness=tt.thickness||null,this.opacity=tt.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(tt){r.AnnotationEditor.initialize(tt,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(tt,bt){switch(tt){case s.AnnotationEditorParamsType.INK_THICKNESS:It._defaultThickness=bt;break;case s.AnnotationEditorParamsType.INK_COLOR:It._defaultColor=bt;break;case s.AnnotationEditorParamsType.INK_OPACITY:It._defaultOpacity=bt/100;break}}updateParams(tt,bt){switch(tt){case s.AnnotationEditorParamsType.INK_THICKNESS:K(this,L,Bn).call(this,bt);break;case s.AnnotationEditorParamsType.INK_COLOR:K(this,E,Un).call(this,bt);break;case s.AnnotationEditorParamsType.INK_OPACITY:K(this,P,Hn).call(this,bt);break}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,It._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,It._defaultColor||r.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(It._defaultOpacity*100)]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||It._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,this.color||It._defaultColor||r.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??It._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(K(this,pt,Me).call(this),K(this,mt,xe).call(this)),this.isAttachedToDOM||(this.parent.add(this),K(this,Dt,pe).call(this)),K(this,J,me).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,l(this,M).disconnect(),it(this,M,null),super.remove())}setParent(tt){!this.parent&&tt?this._uiManager.removeShouldRescale(this):this.parent&&tt===null&&this._uiManager.addShouldRescale(this),super.setParent(tt)}onScaleChanging(){const[tt,bt]=this.parentDimensions,wt=this.width*tt,Ot=this.height*bt;this.setDimensions(wt,Ot)}enableEditMode(){l(this,S)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",l(this,D)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",l(this,D)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){l(this,S)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),it(this,S,!0),this.div.classList.add("disabled"),K(this,J,me).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(tt){this._focusEventsAllowed&&(super.focusin(tt),this.enableEditMode())}canvasPointerdown(tt){tt.button!==0||!this.isInEditMode()||l(this,S)||(this.setInForeground(),tt.preventDefault(),tt.type!=="mouse"&&this.div.focus(),K(this,et,jn).call(this,tt.offsetX,tt.offsetY))}canvasPointermove(tt){tt.preventDefault(),K(this,ht,pn).call(this,tt.offsetX,tt.offsetY)}canvasPointerup(tt){tt.preventDefault(),K(this,Q,mn).call(this,tt)}canvasPointerleave(tt){K(this,Q,mn).call(this,tt)}get isResizable(){return!this.isEmpty()&&l(this,S)}render(){if(this.div)return this.div;let tt,bt;this.width&&(tt=this.x,bt=this.y),super.render(),r.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Qt=>{var St;return(St=this.div)==null?void 0:St.setAttribute("aria-label",Qt)});const[wt,Ot,Ft,Gt]=K(this,z,$n).call(this);if(this.setAt(wt,Ot,0,0),this.setDims(Ft,Gt),K(this,pt,Me).call(this),this.width){const[Qt,St]=this.parentDimensions;this.setAspectRatio(this.width*Qt,this.height*St),this.setAt(tt*Qt,bt*St,this.width*Qt,this.height*St),it(this,v,!0),K(this,Dt,pe).call(this),this.setDims(this.width*Qt,this.height*St),K(this,X,oe).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return K(this,mt,xe).call(this),this.div}setDimensions(tt,bt){const wt=Math.round(tt),Ot=Math.round(bt);if(l(this,R)===wt&&l(this,g)===Ot)return;it(this,R,wt),it(this,g,Ot),this.canvas.style.visibility="hidden";const[Ft,Gt]=this.parentDimensions;this.width=tt/Ft,this.height=bt/Gt,this.fixAndSetPosition(),l(this,S)&&K(this,Bt,Tn).call(this,tt,bt),K(this,Dt,pe).call(this),K(this,X,oe).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(tt,bt,wt){var V,Z,ct;if(tt instanceof i.InkAnnotationElement)return null;const Ot=super.deserialize(tt,bt,wt);Ot.thickness=tt.thickness,Ot.color=s.Util.makeHexColor(...tt.color),Ot.opacity=tt.opacity;const[Ft,Gt]=Ot.pageDimensions,Qt=Ot.width*Ft,St=Ot.height*Gt,Kt=Ot.parentScale,Lt=tt.thickness/2;it(Ot,S,!0),it(Ot,R,Math.round(Qt)),it(Ot,g,Math.round(St));const{paths:U,rect:d,rotation:x}=tt;for(let{bezier:At}of U){At=K(V=It,jt,Kn).call(V,At,d,x);const vt=[];Ot.paths.push(vt);let Rt=Kt*(At[0]-Lt),Wt=Kt*(At[1]-Lt);for(let kt=2,Ut=At.length;kt<Ut;kt+=6){const Yt=Kt*(At[kt]-Lt),Jt=Kt*(At[kt+1]-Lt),Zt=Kt*(At[kt+2]-Lt),se=Kt*(At[kt+3]-Lt),re=Kt*(At[kt+4]-Lt),ae=Kt*(At[kt+5]-Lt);vt.push([[Rt,Wt],[Yt,Jt],[Zt,se],[re,ae]]),Rt=re,Wt=ae}const Mt=K(this,Tt,Vn).call(this,vt);Ot.bezierPath2D.push(Mt)}const H=K(Z=Ot,zt,gn).call(Z);return it(Ot,h,Math.max(r.AnnotationEditor.MIN_SIZE,H[2]-H[0])),it(Ot,m,Math.max(r.AnnotationEditor.MIN_SIZE,H[3]-H[1])),K(ct=Ot,Bt,Tn).call(ct,Qt,St),Ot}serialize(){if(this.isEmpty())return null;const tt=this.getRect(0,0),bt=r.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:s.AnnotationEditorType.INK,color:bt,thickness:this.thickness,opacity:this.opacity,paths:K(this,Xt,Qn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,tt),pageIndex:this.pageIndex,rect:tt,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};m=new WeakMap,h=new WeakMap,A=new WeakMap,y=new WeakMap,C=new WeakMap,D=new WeakMap,b=new WeakMap,S=new WeakMap,O=new WeakMap,v=new WeakMap,M=new WeakMap,R=new WeakMap,g=new WeakMap,f=new WeakMap,L=new WeakSet,Bn=function(tt){const bt=this.thickness;this.addCommands({cmd:()=>{this.thickness=tt,K(this,J,me).call(this)},undo:()=>{this.thickness=bt,K(this,J,me).call(this)},mustExec:!0,type:s.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},E=new WeakSet,Un=function(tt){const bt=this.color;this.addCommands({cmd:()=>{this.color=tt,K(this,X,oe).call(this)},undo:()=>{this.color=bt,K(this,X,oe).call(this)},mustExec:!0,type:s.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},P=new WeakSet,Hn=function(tt){tt/=100;const bt=this.opacity;this.addCommands({cmd:()=>{this.opacity=tt,K(this,X,oe).call(this)},undo:()=>{this.opacity=bt,K(this,X,oe).call(this)},mustExec:!0,type:s.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},z=new WeakSet,$n=function(){const{parentRotation:tt,parentDimensions:[bt,wt]}=this;switch(tt){case 90:return[0,wt,wt,bt];case 180:return[bt,wt,bt,wt];case 270:return[bt,0,wt,bt];default:return[0,0,bt,wt]}},Y=new WeakSet,un=function(){const{ctx:tt,color:bt,opacity:wt,thickness:Ot,parentScale:Ft,scaleFactor:Gt}=this;tt.lineWidth=Ot*Ft/Gt,tt.lineCap="round",tt.lineJoin="round",tt.miterLimit=10,tt.strokeStyle=`${bt}${(0,c.opacityToHex)(wt)}`},et=new WeakSet,jn=function(tt,bt){this.canvas.addEventListener("contextmenu",a.noContextMenu),this.canvas.addEventListener("pointerleave",l(this,y)),this.canvas.addEventListener("pointermove",l(this,A)),this.canvas.addEventListener("pointerup",l(this,C)),this.canvas.removeEventListener("pointerdown",l(this,D)),this.isEditing=!0,l(this,v)||(it(this,v,!0),K(this,Dt,pe).call(this),this.thickness||(this.thickness=It._defaultThickness),this.color||(this.color=It._defaultColor||r.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=It._defaultOpacity)),this.currentPath.push([tt,bt]),it(this,O,!1),K(this,Y,un).call(this),it(this,f,()=>{K(this,T,Xn).call(this),l(this,f)&&window.requestAnimationFrame(l(this,f))}),window.requestAnimationFrame(l(this,f))},ht=new WeakSet,pn=function(tt,bt){const[wt,Ot]=this.currentPath.at(-1);if(this.currentPath.length>1&&tt===wt&&bt===Ot)return;const Ft=this.currentPath;let Gt=l(this,b);if(Ft.push([tt,bt]),it(this,O,!0),Ft.length<=2){Gt.moveTo(...Ft[0]),Gt.lineTo(tt,bt);return}Ft.length===3&&(it(this,b,Gt=new Path2D),Gt.moveTo(...Ft[0])),K(this,_,zn).call(this,Gt,...Ft.at(-3),...Ft.at(-2),tt,bt)},Et=new WeakSet,qn=function(){if(this.currentPath.length===0)return;const tt=this.currentPath.at(-1);l(this,b).lineTo(...tt)},G=new WeakSet,Wn=function(tt,bt){it(this,f,null),tt=Math.min(Math.max(tt,0),this.canvas.width),bt=Math.min(Math.max(bt,0),this.canvas.height),K(this,ht,pn).call(this,tt,bt),K(this,Et,qn).call(this);let wt;if(this.currentPath.length!==1)wt=K(this,k,Yn).call(this);else{const St=[tt,bt];wt=[[St,St.slice(),St.slice(),St]]}const Ot=l(this,b),Ft=this.currentPath;this.currentPath=[],it(this,b,new Path2D);const Gt=()=>{this.allRawPaths.push(Ft),this.paths.push(wt),this.bezierPath2D.push(Ot),this.rebuild()},Qt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(K(this,pt,Me).call(this),K(this,mt,xe).call(this)),K(this,J,me).call(this))};this.addCommands({cmd:Gt,undo:Qt,mustExec:!0})},T=new WeakSet,Xn=function(){if(!l(this,O))return;it(this,O,!1);const tt=Math.ceil(this.thickness*this.parentScale),bt=this.currentPath.slice(-3),wt=bt.map(Gt=>Gt[0]),Ot=bt.map(Gt=>Gt[1]);Math.min(...wt)-tt,Math.max(...wt)+tt,Math.min(...Ot)-tt,Math.max(...Ot)+tt;const{ctx:Ft}=this;Ft.save(),Ft.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Gt of this.bezierPath2D)Ft.stroke(Gt);Ft.stroke(l(this,b)),Ft.restore()},_=new WeakSet,zn=function(tt,bt,wt,Ot,Ft,Gt,Qt){const St=(bt+Ot)/2,Kt=(wt+Ft)/2,Lt=(Ot+Gt)/2,U=(Ft+Qt)/2;tt.bezierCurveTo(St+2*(Ot-St)/3,Kt+2*(Ft-Kt)/3,Lt+2*(Ot-Lt)/3,U+2*(Ft-U)/3,Lt,U)},k=new WeakSet,Yn=function(){const tt=this.currentPath;if(tt.length<=2)return[[tt[0],tt[0],tt.at(-1),tt.at(-1)]];const bt=[];let wt,[Ot,Ft]=tt[0];for(wt=1;wt<tt.length-2;wt++){const[d,x]=tt[wt],[H,V]=tt[wt+1],Z=(d+H)/2,ct=(x+V)/2,At=[Ot+2*(d-Ot)/3,Ft+2*(x-Ft)/3],vt=[Z+2*(d-Z)/3,ct+2*(x-ct)/3];bt.push([[Ot,Ft],At,vt,[Z,ct]]),[Ot,Ft]=[Z,ct]}const[Gt,Qt]=tt[wt],[St,Kt]=tt[wt+1],Lt=[Ot+2*(Gt-Ot)/3,Ft+2*(Qt-Ft)/3],U=[St+2*(Gt-St)/3,Kt+2*(Qt-Kt)/3];return bt.push([[Ot,Ft],Lt,U,[St,Kt]]),bt},X=new WeakSet,oe=function(){if(this.isEmpty()){K(this,at,ke).call(this);return}K(this,Y,un).call(this);const{canvas:tt,ctx:bt}=this;bt.setTransform(1,0,0,1,0,0),bt.clearRect(0,0,tt.width,tt.height),K(this,at,ke).call(this);for(const wt of this.bezierPath2D)bt.stroke(wt)},Q=new WeakSet,mn=function(tt){this.canvas.removeEventListener("pointerleave",l(this,y)),this.canvas.removeEventListener("pointermove",l(this,A)),this.canvas.removeEventListener("pointerup",l(this,C)),this.canvas.addEventListener("pointerdown",l(this,D)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",a.noContextMenu)},10),K(this,G,Wn).call(this,tt.offsetX,tt.offsetY),this.addToAnnotationStorage(),this.setInBackground()},pt=new WeakSet,Me=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",r.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(tt=>{var bt;return(bt=this.canvas)==null?void 0:bt.setAttribute("aria-label",tt)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},mt=new WeakSet,xe=function(){it(this,M,new ResizeObserver(tt=>{const bt=tt[0].contentRect;bt.width&&bt.height&&this.setDimensions(bt.width,bt.height)})),l(this,M).observe(this.div)},Dt=new WeakSet,pe=function(){if(!l(this,v))return;const[tt,bt]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*tt),this.canvas.height=Math.ceil(this.height*bt),K(this,at,ke).call(this)},Bt=new WeakSet,Tn=function(tt,bt){const wt=K(this,ut,Le).call(this),Ot=(tt-wt)/l(this,h),Ft=(bt-wt)/l(this,m);this.scaleFactor=Math.min(Ot,Ft)},at=new WeakSet,ke=function(){const tt=K(this,ut,Le).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+tt,this.translationY*this.scaleFactor+tt)},Tt=new WeakSet,Vn=function(tt){const bt=new Path2D;for(let wt=0,Ot=tt.length;wt<Ot;wt++){const[Ft,Gt,Qt,St]=tt[wt];wt===0&&bt.moveTo(...Ft),bt.bezierCurveTo(Gt[0],Gt[1],Qt[0],Qt[1],St[0],St[1])}return bt},yt=new WeakSet,fn=function(tt,bt,wt){const[Ot,Ft,Gt,Qt]=bt;switch(wt){case 0:for(let St=0,Kt=tt.length;St<Kt;St+=2)tt[St]+=Ot,tt[St+1]=Qt-tt[St+1];break;case 90:for(let St=0,Kt=tt.length;St<Kt;St+=2){const Lt=tt[St];tt[St]=tt[St+1]+Ot,tt[St+1]=Lt+Ft}break;case 180:for(let St=0,Kt=tt.length;St<Kt;St+=2)tt[St]=Gt-tt[St],tt[St+1]+=Ft;break;case 270:for(let St=0,Kt=tt.length;St<Kt;St+=2){const Lt=tt[St];tt[St]=Gt-tt[St+1],tt[St+1]=Qt-Lt}break;default:throw new Error("Invalid rotation")}return tt},jt=new WeakSet,Kn=function(tt,bt,wt){const[Ot,Ft,Gt,Qt]=bt;switch(wt){case 0:for(let St=0,Kt=tt.length;St<Kt;St+=2)tt[St]-=Ot,tt[St+1]=Qt-tt[St+1];break;case 90:for(let St=0,Kt=tt.length;St<Kt;St+=2){const Lt=tt[St];tt[St]=tt[St+1]-Ft,tt[St+1]=Lt-Ot}break;case 180:for(let St=0,Kt=tt.length;St<Kt;St+=2)tt[St]=Gt-tt[St],tt[St+1]-=Ft;break;case 270:for(let St=0,Kt=tt.length;St<Kt;St+=2){const Lt=tt[St];tt[St]=Qt-tt[St+1],tt[St+1]=Gt-Lt}break;default:throw new Error("Invalid rotation")}return tt},Xt=new WeakSet,Qn=function(tt,bt,wt,Ot){var Kt,Lt;const Ft=[],Gt=this.thickness/2,Qt=tt*bt+Gt,St=tt*wt+Gt;for(const U of this.paths){const d=[],x=[];for(let H=0,V=U.length;H<V;H++){const[Z,ct,At,vt]=U[H],Rt=tt*Z[0]+Qt,Wt=tt*Z[1]+St,Mt=tt*ct[0]+Qt,kt=tt*ct[1]+St,Ut=tt*At[0]+Qt,Yt=tt*At[1]+St,Jt=tt*vt[0]+Qt,Zt=tt*vt[1]+St;H===0&&(d.push(Rt,Wt),x.push(Rt,Wt)),d.push(Mt,kt,Ut,Yt,Jt,Zt),x.push(Mt,kt),H===V-1&&x.push(Jt,Zt)}Ft.push({bezier:K(Kt=It,yt,fn).call(Kt,d,Ot,this.rotation),points:K(Lt=It,yt,fn).call(Lt,x,Ot,this.rotation)})}return Ft},zt=new WeakSet,gn=function(){let tt=1/0,bt=-1/0,wt=1/0,Ot=-1/0;for(const Ft of this.paths)for(const[Gt,Qt,St,Kt]of Ft){const Lt=s.Util.bezierBoundingBox(...Gt,...Qt,...St,...Kt);tt=Math.min(tt,Lt[0]),wt=Math.min(wt,Lt[1]),bt=Math.max(bt,Lt[2]),Ot=Math.max(Ot,Lt[3])}return[tt,wt,bt,Ot]},ut=new WeakSet,Le=function(){return l(this,S)?Math.ceil(this.thickness*this.parentScale):0},J=new WeakSet,me=function(tt=!1){if(this.isEmpty())return;if(!l(this,S)){K(this,X,oe).call(this);return}const bt=K(this,zt,gn).call(this),wt=K(this,ut,Le).call(this);it(this,h,Math.max(r.AnnotationEditor.MIN_SIZE,bt[2]-bt[0])),it(this,m,Math.max(r.AnnotationEditor.MIN_SIZE,bt[3]-bt[1]));const Ot=Math.ceil(wt+l(this,h)*this.scaleFactor),Ft=Math.ceil(wt+l(this,m)*this.scaleFactor),[Gt,Qt]=this.parentDimensions;this.width=Ot/Gt,this.height=Ft/Qt,this.setAspectRatio(Ot,Ft);const St=this.translationX,Kt=this.translationY;this.translationX=-bt[0],this.translationY=-bt[1],K(this,Dt,pe).call(this),K(this,X,oe).call(this),it(this,R,Ot),it(this,g,Ft),this.setDims(Ot,Ft);const Lt=tt?wt/this.scaleFactor/2:0;this.translate(St-this.translationX-Lt,Kt-this.translationY-Lt)},j(It,Tt),j(It,yt),j(It,jt),ne(It,"_defaultColor",null),ne(It,"_defaultOpacity",1),ne(It,"_defaultThickness",1),ne(It,"_type","ink");let o=It;e.InkEditor=o},(t,e,n)=>{var o,m,h,A,y,C,D,b,S,O,v,Ie,R,Ce,f,we,N,En,F,Jn,W,Zn,w,An,ot,Fe,q,ts;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var s=n(1),r=n(4),i=n(6),a=n(29);const dt=class dt extends r.AnnotationEditor{constructor(G){super({...G,name:"stampEditor"});j(this,v);j(this,R);j(this,f);j(this,N);j(this,F);j(this,W);j(this,w);j(this,ot);j(this,q);j(this,o,null);j(this,m,null);j(this,h,null);j(this,A,null);j(this,y,null);j(this,C,null);j(this,D,null);j(this,b,null);j(this,S,!1);j(this,O,!1);it(this,A,G.bitmapUrl),it(this,y,G.bitmapFile)}static initialize(G){r.AnnotationEditor.initialize(G)}static get supportedTypes(){const G=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,s.shadow)(this,"supportedTypes",G.map(u=>`image/${u}`))}static get supportedTypesStr(){return(0,s.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(G){return this.supportedTypes.includes(G)}static paste(G,u){u.pasteEditor(s.AnnotationEditorType.STAMP,{bitmapFile:G.getAsFile()})}remove(){var G,u;l(this,m)&&(it(this,o,null),this._uiManager.imageManager.deleteId(l(this,m)),(G=l(this,C))==null||G.remove(),it(this,C,null),(u=l(this,D))==null||u.disconnect(),it(this,D,null)),super.remove()}rebuild(){if(!this.parent){l(this,m)&&K(this,f,we).call(this);return}super.rebuild(),this.div!==null&&(l(this,m)&&K(this,f,we).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(l(this,h)||l(this,o)||l(this,A)||l(this,y))}get isResizable(){return!0}render(){if(this.div)return this.div;let G,u;if(this.width&&(G=this.x,u=this.y),super.render(),this.div.hidden=!0,l(this,o)?K(this,N,En).call(this):K(this,f,we).call(this),this.width){const[T,p]=this.parentDimensions;this.setAt(G*T,u*p,this.width*T,this.height*p)}return this.div}static deserialize(G,u,T){if(G instanceof a.StampAnnotationElement)return null;const p=super.deserialize(G,u,T),{rect:_,bitmapUrl:I,bitmapId:k,isSvg:B,accessibilityData:X}=G;k&&T.imageManager.isValidId(k)?it(p,m,k):it(p,A,I),it(p,S,B);const[nt,Q]=p.pageDimensions;return p.width=(_[2]-_[0])/nt,p.height=(_[3]-_[1])/Q,X&&(p.altTextData=X),p}serialize(G=!1,u=null){if(this.isEmpty())return null;const T={annotationType:s.AnnotationEditorType.STAMP,bitmapId:l(this,m),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,S),structTreeParentId:this._structTreeParentId};if(G)return T.bitmapUrl=K(this,ot,Fe).call(this,!0),T.accessibilityData=this.altTextData,T;const{decorative:p,altText:_}=this.altTextData;if(!p&&_&&(T.accessibilityData={type:"Figure",alt:_}),u===null)return T;u.stamps||(u.stamps=new Map);const I=l(this,S)?(T.rect[2]-T.rect[0])*(T.rect[3]-T.rect[1]):null;if(!u.stamps.has(l(this,m)))u.stamps.set(l(this,m),{area:I,serialized:T}),T.bitmap=K(this,ot,Fe).call(this,!1);else if(l(this,S)){const k=u.stamps.get(l(this,m));I>k.area&&(k.area=I,k.serialized.bitmap.close(),k.serialized.bitmap=K(this,ot,Fe).call(this,!1))}return T}};o=new WeakMap,m=new WeakMap,h=new WeakMap,A=new WeakMap,y=new WeakMap,C=new WeakMap,D=new WeakMap,b=new WeakMap,S=new WeakMap,O=new WeakMap,v=new WeakSet,Ie=function(G,u=!1){if(!G){this.remove();return}it(this,o,G.bitmap),u||(it(this,m,G.id),it(this,S,G.isSvg)),K(this,N,En).call(this)},R=new WeakSet,Ce=function(){it(this,h,null),this._uiManager.enableWaiting(!1),l(this,C)&&this.div.focus()},f=new WeakSet,we=function(){if(l(this,m)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,m)).then(u=>K(this,v,Ie).call(this,u,!0)).finally(()=>K(this,R,Ce).call(this));return}if(l(this,A)){const u=l(this,A);it(this,A,null),this._uiManager.enableWaiting(!0),it(this,h,this._uiManager.imageManager.getFromUrl(u).then(T=>K(this,v,Ie).call(this,T)).finally(()=>K(this,R,Ce).call(this)));return}if(l(this,y)){const u=l(this,y);it(this,y,null),this._uiManager.enableWaiting(!0),it(this,h,this._uiManager.imageManager.getFromFile(u).then(T=>K(this,v,Ie).call(this,T)).finally(()=>K(this,R,Ce).call(this)));return}const G=document.createElement("input");G.type="file",G.accept=dt.supportedTypesStr,it(this,h,new Promise(u=>{G.addEventListener("change",async()=>{if(!G.files||G.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const T=await this._uiManager.imageManager.getFromFile(G.files[0]);K(this,v,Ie).call(this,T)}u()}),G.addEventListener("cancel",()=>{this.remove(),u()})}).finally(()=>K(this,R,Ce).call(this))),G.click()},N=new WeakSet,En=function(){const{div:G}=this;let{width:u,height:T}=l(this,o);const[p,_]=this.pageDimensions,I=.75;if(this.width)u=this.width*p,T=this.height*_;else if(u>I*p||T>I*_){const nt=Math.min(I*p/u,I*_/T);u*=nt,T*=nt}const[k,B]=this.parentDimensions;this.setDims(u*k/p,T*B/_),this._uiManager.enableWaiting(!1);const X=it(this,C,document.createElement("canvas"));G.append(X),G.hidden=!1,K(this,w,An).call(this,u,T),K(this,q,ts).call(this),l(this,O)||(this.parent.addUndoableEditor(this),it(this,O,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},F=new WeakSet,Jn=function(G,u){var I;const[T,p]=this.parentDimensions;this.width=G/T,this.height=u/p,this.setDims(G,u),(I=this._initialOptions)!=null&&I.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,l(this,b)!==null&&clearTimeout(l(this,b)),it(this,b,setTimeout(()=>{it(this,b,null),K(this,w,An).call(this,G,u)},200))},W=new WeakSet,Zn=function(G,u){const{width:T,height:p}=l(this,o);let _=T,I=p,k=l(this,o);for(;_>2*G||I>2*u;){const B=_,X=I;_>2*G&&(_=_>=16384?Math.floor(_/2)-1:Math.ceil(_/2)),I>2*u&&(I=I>=16384?Math.floor(I/2)-1:Math.ceil(I/2));const nt=new OffscreenCanvas(_,I);nt.getContext("2d").drawImage(k,0,0,B,X,0,0,_,I),k=nt.transferToImageBitmap()}return k},w=new WeakSet,An=function(G,u){G=Math.ceil(G),u=Math.ceil(u);const T=l(this,C);if(!T||T.width===G&&T.height===u)return;T.width=G,T.height=u;const p=l(this,S)?l(this,o):K(this,W,Zn).call(this,G,u),_=T.getContext("2d");_.filter=this._uiManager.hcmFilter,_.drawImage(p,0,0,p.width,p.height,0,0,G,u)},ot=new WeakSet,Fe=function(G){if(G){if(l(this,S)){const T=this._uiManager.imageManager.getSvgUrl(l(this,m));if(T)return T}const u=document.createElement("canvas");return{width:u.width,height:u.height}=l(this,o),u.getContext("2d").drawImage(l(this,o),0,0),u.toDataURL()}if(l(this,S)){const[u,T]=this.pageDimensions,p=Math.round(this.width*u*i.PixelsPerInch.PDF_TO_CSS_UNITS),_=Math.round(this.height*T*i.PixelsPerInch.PDF_TO_CSS_UNITS),I=new OffscreenCanvas(p,_);return I.getContext("2d").drawImage(l(this,o),0,0,l(this,o).width,l(this,o).height,0,0,p,_),I.transferToImageBitmap()}return structuredClone(l(this,o))},q=new WeakSet,ts=function(){it(this,D,new ResizeObserver(G=>{const u=G[0].contentRect;u.width&&u.height&&K(this,F,Jn).call(this,u.width,u.height)})),l(this,D).observe(this.div)},ne(dt,"_type","stamp");let c=dt;e.StampEditor=c}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__w_pdfjs_require__),n.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return i.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return a.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return c.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"DOMSVGFactory",{enumerable:!0,get:function(){return s.DOMSVGFactory}}),Object.defineProperty(t,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return o.GlobalWorkerOptions}}),Object.defineProperty(t,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return s.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return s.PixelsPerInch}}),Object.defineProperty(t,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return s.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return n.SVGGraphics}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return m.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return s.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return s.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return s.getXfaPageViewport}}),Object.defineProperty(t,"isDataScheme",{enumerable:!0,get:function(){return s.isDataScheme}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return s.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return s.loadScript}}),Object.defineProperty(t,"noContextMenu",{enumerable:!0,get:function(){return s.noContextMenu}}),Object.defineProperty(t,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return r.renderTextLayer}}),Object.defineProperty(t,"setLayerDimensions",{enumerable:!0,get:function(){return s.setLayerDimensions}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"updateTextLayer",{enumerable:!0,get:function(){return r.updateTextLayer}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return n.version}});var e=__w_pdfjs_require__(1),n=__w_pdfjs_require__(2),s=__w_pdfjs_require__(6),r=__w_pdfjs_require__(26),i=__w_pdfjs_require__(27),a=__w_pdfjs_require__(5),c=__w_pdfjs_require__(29),o=__w_pdfjs_require__(14),m=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),PDFJS=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjsWorker=new URL("pdfjs-dist/build/pdf.worker.js",self.location.href).toString();pdfExports.GlobalWorkerOptions.workerSrc=pdfjsWorker;const pdfDist=PDFJS;export{DialogWrap as D,LeftOutlined$1 as L,Modal$1 as M,ReadabilityExports as R,Space$1 as S,Tag$2 as T,useBreakpoint as a,useClosable as b,commonjsRequire as c,usePanelRef as d,ReadabilityReaderableExports as e,load as f,genModalMaskStyle as g,TurndownService as h,initFadeMotion as i,pdfDist as j,logger as l,pickClosable as p,require$$0 as r,useForceUpdate as u};
