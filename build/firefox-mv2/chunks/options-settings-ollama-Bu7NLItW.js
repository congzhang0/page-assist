import{a as b,e as N,j as e,R as w,r as _,f as j,__tla as I}from"./FontSizeProvider-D4Gh80tw.js";import{B as P,S as K,__tla as C}from"./SettingsOptionLayout-gi-p9doQ.js";import{O as F,__tla as M}from"./Layout-B2rmxZ24.js";import{c as z,F as t,u as y,D as L,I as a,C as u,o as c,l as f,k as S,s as A,L as q,g as O}from"./SaveButton-Dir2VHfX.js";import{A as U}from"./AdvanceOllamaSettings-BEtzK4Nc.js";import{N as R,O as T,__tla as E}from"./Sidebar-uBkE2MHz.js";import{T as k}from"./Trans-BJZsQOvU.js";import"./chevron-right-CDZTKm5_.js";let v,G=Promise.all([(()=>{try{return I}catch{}})(),(()=>{try{return C}catch{}})(),(()=>{try{return M}catch{}})(),(()=>{try{return E}catch{}})()]).then(async()=>{let x,h,g;x=z("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),h=()=>{const{t:l}=b("common"),[n]=t.useForm(),i=N(),{isPending:d}=y({queryKey:["fetchModelConfig"],queryFn:async()=>{const m=await T();return n.setFieldsValue(m),m}});return e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2",children:[e.jsx(P,{}),e.jsx("h2",{className:"text-base font-semibold leading-7 text-gray-900 dark:text-white",children:l("modelSettings.label")})]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-neutral-400 mt-1",children:l("modelSettings.description")}),e.jsx("div",{className:"border border-b border-gray-200 dark:border-gray-600 mt-3 mb-6"})]}),d?e.jsx(S,{active:!0}):e.jsxs(t,{onFinish:m=>{Object.entries(m).forEach(([o,r])=>{R(o,r)}),i.invalidateQueries({queryKey:["fetchModelConfig"]})},form:n,layout:"vertical",children:[e.jsx(t.Item,{name:"keepAlive",help:l("modelSettings.form.keepAlive.help"),label:l("modelSettings.form.keepAlive.label"),children:e.jsx(L,{size:"large",placeholder:l("modelSettings.form.keepAlive.placeholder")})}),e.jsx(t.Item,{name:"temperature",label:l("modelSettings.form.temperature.label"),children:e.jsx(a,{size:"large",style:{width:"100%"},placeholder:l("modelSettings.form.temperature.placeholder")})}),e.jsx(t.Item,{name:"numCtx",label:l("modelSettings.form.numCtx.label"),children:e.jsx(a,{style:{width:"100%"},placeholder:l("modelSettings.form.numCtx.placeholder"),size:"large"})}),e.jsx(t.Item,{name:"numPredict",label:l("modelSettings.form.numPredict.label"),children:e.jsx(a,{style:{width:"100%"},placeholder:l("modelSettings.form.numPredict.placeholder")})}),e.jsx(u,{ghost:!0,className:"border-none bg-transparent",items:[{key:"1",label:l("modelSettings.advanced"),children:e.jsxs(w.Fragment,{children:[e.jsx(t.Item,{name:"topK",label:l("modelSettings.form.topK.label"),children:e.jsx(a,{style:{width:"100%"},placeholder:l("modelSettings.form.topK.placeholder"),size:"large"})}),e.jsx(t.Item,{name:"topP",label:l("modelSettings.form.topP.label"),children:e.jsx(a,{style:{width:"100%"},size:"large",placeholder:l("modelSettings.form.topP.placeholder")})}),e.jsx(t.Item,{name:"numGpu",label:l("modelSettings.form.numGpu.label"),children:e.jsx(a,{style:{width:"100%"},size:"large",placeholder:l("modelSettings.form.numGpu.placeholder")})}),e.jsx(t.Item,{name:"minP",label:l("modelSettings.form.minP.label"),children:e.jsx(a,{style:{width:"100%"},placeholder:l("modelSettings.form.minP.placeholder")})}),e.jsx(t.Item,{name:"repeatPenalty",label:l("modelSettings.form.repeatPenalty.label"),children:e.jsx(a,{style:{width:"100%"},placeholder:l("modelSettings.form.repeatPenalty.placeholder")})}),e.jsx(t.Item,{name:"repeatLastN",label:l("modelSettings.form.repeatLastN.label"),children:e.jsx(a,{style:{width:"100%"},placeholder:l("modelSettings.form.repeatLastN.placeholder")})}),e.jsx(t.Item,{name:"tfsZ",label:l("modelSettings.form.tfsZ.label"),children:e.jsx(a,{style:{width:"100%"},placeholder:l("modelSettings.form.tfsZ.placeholder")})}),e.jsx(t.Item,{name:"numKeep",label:l("modelSettings.form.numKeep.label"),children:e.jsx(a,{style:{width:"100%"},placeholder:l("modelSettings.form.numKeep.placeholder")})}),e.jsx(t.Item,{name:"numThread",label:l("modelSettings.form.numThread.label"),children:e.jsx(a,{style:{width:"100%"},placeholder:l("modelSettings.form.numThread.placeholder")})}),e.jsx(t.Item,{name:"useMMap",label:l("modelSettings.form.useMMap.label"),children:e.jsx(c,{})}),e.jsx(t.Item,{name:"useMlock",label:l("modelSettings.form.useMlock.label"),children:e.jsx(c,{})})]})}]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(f,{btnType:"submit"})})]})]})},g=()=>{const[l,n]=_.useState(""),[i,d]=j("ollamaEnabledStatus",!0),[m,o]=j("checkOllamaStatus",!0),{t:r}=b("settings"),{status:p}=y({queryKey:["fetchOllamURL"],queryFn:async()=>{try{const[s]=await Promise.all([O()]);return n(s),{}}catch(s){return console.error(s),{}}}});return e.jsxs("div",{className:"flex flex-col space-y-3",children:[p==="pending"&&e.jsx(S,{paragraph:{rows:4},active:!0}),p==="success"&&e.jsxs("div",{className:"flex flex-col space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold leading-7 text-gray-900 dark:text-white",children:r("ollamaSettings.heading")}),e.jsx("div",{className:"border border-b border-gray-200 dark:border-gray-600 mt-3 mb-6"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"ollamaURL",className:"text-sm font-medium dark:text-gray-200",children:r("ollamaSettings.settings.ollamaUrl.label")}),e.jsx("input",{type:"url",id:"ollamaURL",value:l,onChange:s=>{n(s.target.value)},placeholder:r("ollamaSettings.settings.ollamaUrl.placeholder"),className:"w-full p-2 border border-gray-300 rounded-md dark:bg-[#262626] dark:text-gray-100"})]}),e.jsx("div",{className:"flex justify-end mb-3",children:e.jsx(f,{onClick:()=>{A(l)},className:"mt-2"})}),e.jsx(u,{size:"small",items:[{key:"1",label:e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold leading-7 text-gray-900 dark:text-white",children:r("ollamaSettings.settings.advanced.label")}),e.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-400 mb-4",children:e.jsx(k,{i18nKey:"settings:ollamaSettings.settings.advanced.help",components:{anchor:e.jsx("a",{href:"https://github.com/n4ze3m/page-assist/blob/main/docs/connection-issue.md#solutions",target:"__blank",className:"text-blue-600 dark:text-blue-400"})}})})]}),children:e.jsx(U,{})}]}),e.jsxs("div",{className:"mt-8 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium dark:text-gray-200",children:r("ollamaSettings.settings.globalEnable.label")}),e.jsx(c,{checked:i,onChange:s=>{d(s),o(s)}})]}),!i&&e.jsx("div",{className:"mt-2 p-3 bg-yellow-50 dark:bg-yellow-900/30 rounded-md",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(x,{className:"h-5 w-5 text-yellow-400 dark:text-yellow-500"})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:e.jsx(k,{i18nKey:"settings:ollamaSettings.settings.globalEnable.warning",components:{anchor:e.jsx(q,{to:"/settings/openai",className:"text-blue-600 dark:text-blue-400"})}})})})]})})," "]})]}),e.jsx(h,{})]})]})},v=()=>e.jsx(F,{children:e.jsx(K,{children:e.jsx(g,{})})})});export{G as __tla,v as default};
